"use strict";
function _objectWithoutProperties(source, excluded) {
    if (source == null)
        return {};
    var target = _objectWithoutPropertiesLoose(source, excluded);
    var key, i;
    if (Object.getOwnPropertySymbols) {
        var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
        for (i = 0; i < sourceSymbolKeys.length; i++) {
            key = sourceSymbolKeys[i];
            if (excluded.indexOf(key) >= 0)
                continue;
            if (!Object.prototype.propertyIsEnumerable.call(source, key))
                continue;
            target[key] = source[key]
        }
    }
    return target
}
function _objectWithoutPropertiesLoose(source, excluded) {
    if (source == null)
        return {};
    var target = {};
    var sourceKeys = Object.keys(source);
    var key, i;
    for (i = 0; i < sourceKeys.length; i++) {
        key = sourceKeys[i];
        if (excluded.indexOf(key) >= 0)
            continue;
        target[key] = source[key]
    }
    return target
}
function _createForOfIteratorHelperLoose(o) {
    var i = 0;
    if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) {
        if (Array.isArray(o) || (o = _unsupportedIterableToArray(o)))
            return function() {
                if (i >= o.length)
                    return {
                        done: true
                    };
                return {
                    done: false,
                    value: o[i++]
                }
            }
            ;
        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
    }
    i = o[Symbol.iterator]();
    return i.next.bind(i)
}
function _assertThisInitialized(self) {
    if (self === void 0) {
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
    }
    return self
}
function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);
    if (Object.getOwnPropertySymbols) {
        var symbols = Object.getOwnPropertySymbols(object);
        if (enumerableOnly)
            symbols = symbols.filter(function(sym) {
                return Object.getOwnPropertyDescriptor(object, sym).enumerable
            });
        keys.push.apply(keys, symbols)
    }
    return keys
}
function _objectSpread(target) {
    for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i] != null ? arguments[i] : {};
        if (i % 2) {
            ownKeys(Object(source), true).forEach(function(key) {
                _defineProperty(target, key, source[key])
            })
        } else if (Object.getOwnPropertyDescriptors) {
            Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))
        } else {
            ownKeys(Object(source)).forEach(function(key) {
                Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key))
            })
        }
    }
    return target
}
function _defineProperty(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        })
    } else {
        obj[key] = value
    }
    return obj
}
function _defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value"in descriptor)
            descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor)
    }
}
function _createClass(Constructor, protoProps, staticProps) {
    if (protoProps)
        _defineProperties(Constructor.prototype, protoProps);
    if (staticProps)
        _defineProperties(Constructor, staticProps);
    return Constructor
}
function _slicedToArray(arr, i) {
    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest()
}
function _nonIterableRest() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o)
        return;
    if (typeof o === "string")
        return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor)
        n = o.constructor.name;
    if (n === "Map" || n === "Set")
        return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
        return _arrayLikeToArray(o, minLen)
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length)
        len = arr.length;
    for (var i = 0, arr2 = new Array(len); i < len; i++) {
        arr2[i] = arr[i]
    }
    return arr2
}
function _iterableToArrayLimit(arr, i) {
    if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr)))
        return;
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;
    try {
        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
            _arr.push(_s.value);
            if (i && _arr.length === i)
                break
        }
    } catch (err) {
        _d = true;
        _e = err
    } finally {
        try {
            if (!_n && _i["return"] != null)
                _i["return"]()
        } finally {
            if (_d)
                throw _e
        }
    }
    return _arr
}
function _arrayWithHoles(arr) {
    if (Array.isArray(arr))
        return arr
}
function _inheritsLoose(subClass, superClass) {
    subClass.prototype = Object.create(superClass.prototype);
    subClass.prototype.constructor = subClass;
    subClass.__proto__ = superClass
}
!function(e) {
    function t(t) {
        for (var n, a, o = t[0], l = t[1], d = t[2], c = 0, h = []; c < o.length; c++) {
            a = o[c],
            Object.prototype.hasOwnProperty.call(r, a) && r[a] && h.push(r[a][0]),
            r[a] = 0
        }
        for (n in l) {
            Object.prototype.hasOwnProperty.call(l, n) && (e[n] = l[n])
        }
        for (u && u(t); h.length; ) {
            h.shift()()
        }
        return s.push.apply(s, d || []),
        i()
    }
    function i() {
        for (var e, t = 0; t < s.length; t++) {
            for (var i = s[t], n = !0, o = 1; o < i.length; o++) {
                var l = i[o];
                0 !== r[l] && (n = !1)
            }
            n && (s.splice(t--, 1),
            e = a(a.s = i[0]))
        }
        return e
    }
    var n = {}
      , r = {
        0: 0
    }
      , s = [];
    function a(t) {
        if (n[t])
            return n[t].exports;
        var i = n[t] = {
            i: t,
            l: !1,
            exports: {}
        }
          , r = !0;
        try {
            e[t].call(i.exports, i, i.exports, a),
            r = !1
        } finally {
            r && delete n[t]
        }
        return i.l = !0,
        i.exports
    }
    a.m = e,
    a.c = n,
    a.d = function(e, t, i) {
        a.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: i
        })
    }
    ,
    a.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }),
        Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }
    ,
    a.t = function(e, t) {
        if (1 & t && (e = a(e)),
        8 & t)
            return e;
        if (4 & t && "object" == typeof e && e && e.__esModule)
            return e;
        var i = Object.create(null);
        if (a.r(i),
        Object.defineProperty(i, "default", {
            enumerable: !0,
            value: e
        }),
        2 & t && "string" != typeof e)
            for (var n in e) {
                a.d(i, n, function(t) {
                    return e[t]
                }
                .bind(null, n))
            }
        return i
    }
    ,
    a.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default
        }
        : function() {
            return e
        }
        ;
        return a.d(t, "a", t),
        t
    }
    ,
    a.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }
    ,
    a.p = "";
    var o = window.webpackJsonpPlayer = window.webpackJsonpPlayer || []
      , l = o.push.bind(o);
    o.push = t,
    o = o.slice();
    for (var d = 0; d < o.length; d++) {
        t(o[d])
    }
    var u = l;
    s.push([83, 1]),
    i()
}([function(e, t, i) {
    "use strict";
    e.exports = i(156)
}
, function(e, t, i) {
    "use strict";
    (function(e) {
        i.d(t, "a", function() {
            return N
        }),
        i.d(t, "b", function() {
            return z
        }),
        i.d(t, "c", function() {
            return w
        }),
        i.d(t, "d", function() {
            return g
        }),
        i.d(t, "e", function() {
            return c
        }),
        i.d(t, "f", function() {
            return u
        }),
        i.d(t, "g", function() {
            return Y
        }),
        i.d(t, "i", function() {
            return Z
        });
        var n = i(4)
          , r = i.n(n)
          , s = i(74)
          , a = i.n(s)
          , o = i(33)
          , l = function(e) {
            function t() {
                e.call(this),
                this.on("error", function() {})
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(r.a);
        if (l.prototype.off = r.a.prototype.removeListener,
        l.prototype.trigger = r.a.prototype.emit,
        "function" != typeof window.CustomEvent) {
            var d = function(e, t) {
                t = t || {};
                var i = document.createEvent("CustomEvent");
                return i.initCustomEvent(e, t.bubbles, t.cancelable, t.detail),
                i
            };
            d.prototype = window.CustomEvent.prototype,
            window.CustomEvent = d
        }
        var u = function(e) {
            function t() {
                e.apply(this, arguments)
            }
            e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t;
            var i = {
                src: {
                    configurable: !0
                },
                license: {
                    configurable: !0
                },
                autoplay: {
                    configurable: !0
                },
                currentSrc: {
                    configurable: !0
                },
                initialTime: {
                    configurable: !0
                },
                muted: {
                    configurable: !0
                },
                paused: {
                    configurable: !0
                },
                seeking: {
                    configurable: !0
                },
                ended: {
                    configurable: !0
                },
                volume: {
                    configurable: !0
                },
                currentTime: {
                    configurable: !0
                },
                duration: {
                    configurable: !0
                },
                buffered: {
                    configurable: !0
                },
                buffer: {
                    configurable: !0
                },
                played: {
                    configurable: !0
                },
                readyState: {
                    configurable: !0
                },
                networkState: {
                    configurable: !0
                },
                seekable: {
                    configurable: !0
                },
                currentCuePoint: {
                    configurable: !0
                },
                manifest: {
                    configurable: !0
                },
                textTracks: {
                    configurable: !0
                },
                audioTracks: {
                    configurable: !0
                },
                videoTracks: {
                    configurable: !0
                },
                startDate: {
                    configurable: !0
                },
                error: {
                    configurable: !0
                },
                logger: {
                    configurable: !0
                },
                mbr: {
                    configurable: !0
                },
                configuration: {
                    configurable: !0
                },
                bufferingState: {
                    configurable: !0
                },
                playbackRate: {
                    configurable: !0
                }
            };
            return i.src.get = function() {}
            ,
            i.src.set = function() {}
            ,
            i.license.get = function() {}
            ,
            i.license.set = function() {}
            ,
            i.autoplay.get = function() {}
            ,
            i.autoplay.set = function() {}
            ,
            i.currentSrc.get = function() {}
            ,
            i.initialTime.get = function() {}
            ,
            i.muted.get = function() {}
            ,
            i.paused.get = function() {}
            ,
            i.seeking.get = function() {}
            ,
            i.ended.get = function() {}
            ,
            i.volume.get = function() {}
            ,
            i.volume.set = function() {}
            ,
            i.currentTime.get = function() {}
            ,
            i.currentTime.set = function() {}
            ,
            i.duration.get = function() {}
            ,
            i.buffered.get = function() {}
            ,
            i.buffer.get = function() {}
            ,
            i.played.get = function() {}
            ,
            i.readyState.get = function() {}
            ,
            i.networkState.get = function() {}
            ,
            i.seekable.get = function() {}
            ,
            i.currentCuePoint.get = function() {}
            ,
            i.manifest.get = function() {}
            ,
            i.textTracks.get = function() {}
            ,
            i.audioTracks.get = function() {}
            ,
            i.videoTracks.get = function() {}
            ,
            i.startDate.get = function() {}
            ,
            i.startDate.set = function() {}
            ,
            i.error.get = function() {}
            ,
            i.logger.get = function() {}
            ,
            i.mbr.get = function() {}
            ,
            i.configuration.set = function() {}
            ,
            i.configuration.get = function() {}
            ,
            i.bufferingState.get = function() {}
            ,
            i.playbackRate.get = function() {}
            ,
            i.playbackRate.set = function() {}
            ,
            t.prototype.setConfiguration = function() {}
            ,
            t.prototype.load = function() {}
            ,
            t.prototype.play = function() {}
            ,
            t.prototype.pause = function() {}
            ,
            t.prototype.stop = function() {}
            ,
            t.prototype.mute = function() {}
            ,
            t.prototype.unmute = function() {}
            ,
            t.prototype.seek = function() {}
            ,
            t.prototype.seekToPeriod = function() {}
            ,
            t.prototype.renderCaptions = function() {}
            ,
            t.prototype.setMaxBitrate = function() {}
            ,
            t.prototype.clampTimelineStart = function() {}
            ,
            t.prototype.createThumbnailUrl = function() {}
            ,
            t.prototype.setPreferredAudioTrack = function() {}
            ,
            t.prototype.setPreferredVideoTrack = function() {}
            ,
            t.prototype.setPreferredTextTrack = function() {}
            ,
            t.prototype.getVideoPlaybackQuality = function() {}
            ,
            t.prototype.addEventListener = function() {}
            ,
            t.prototype.removeEventListener = function() {}
            ,
            t.prototype.removeAllEventListeners = function() {}
            ,
            Object.defineProperties(t.prototype, i),
            t
        }(l)
          , c = {
            LOAD_START: "loadstart",
            PROGRESS: "progress",
            SUSPEND: "suspend",
            ABORT: "abort",
            ERROR: "error",
            WARNING: "warning",
            EMPTIED: "emptied",
            STALLED: "stalled",
            LOADED_METADATA: "loadedmetadata",
            LOADED_DATA: "loadeddata",
            CAN_PLAY: "canplay",
            CAN_PLAY_THROUGH: "canplaythrough",
            PLAYING: "playing",
            WAITING: "waiting",
            SEEKING: "seeking",
            SEEKED: "seeked",
            ENDED: "ended",
            DURATION_CHANGE: "durationchange",
            TIME_UPDATE: "timeupdate",
            PLAY: "play",
            PAUSE: "pause",
            VOLUME_CHANGE: "volumechange",
            MANIFEST_CHANGE: "manifestchange",
            PERIOD_ENTER: "periodenter",
            PERIOD_EXIT: "periodexit",
            PERIOD_RESOLVING: "periodresolving",
            PERIOD_RESOLVED: "periodresolved",
            CUE_POINT_START: "cuepointstart",
            CUE_POINT_ENDED: "cuepointended",
            QUALITY_CHANGE: "qualitychange",
            CDN_CHANGE: "cdnchange",
            BITRATE_CHANGE: "bitratechange",
            SEEKABLE_CHANGE: "seekablechange",
            REBUFFER_START: "rebufferstart",
            REBUFFER_END: "rebufferend",
            RECONNECTING: "reconnecting",
            TIMED_METADATA: "timedmetadata",
            LOG: "log",
            TRACKING: "tracking",
            QOS_FRAGMENT: "qosfragment",
            QOS_MANIFEST: "qosmanifest",
            QOS_LICENSE: "qoslicense",
            QOS_REMOTE_PERIOD: "qosremoteperiod"
        }
          , h = function(e) {
            this.time = Math.floor(e.time),
            this._reset(e)
        }
          , p = {
            mediaMetadatas: {
                configurable: !0
            },
            fetching: {
                configurable: !0
            },
            fetched: {
                configurable: !0
            },
            playing: {
                configurable: !0
            },
            played: {
                configurable: !0
            },
            skipped: {
                configurable: !0
            },
            currentTime: {
                configurable: !0
            },
            duration: {
                configurable: !0
            },
            autoResumePlayer: {
                configurable: !0
            }
        };
        h.prototype._reset = function(e) {
            this.metadata = e,
            this._mediaMetadatas = null,
            this._fetching = !1,
            this._fetched = !1,
            this._playing = !1,
            this._played = !1,
            this._skipped = !1,
            this._currentTime = 0,
            this._duration = 0,
            this._autoResumePlayer = !0
        }
        ,
        h.prototype.get = function() {
            return this.metadata
        }
        ,
        h.prototype.set = function(e) {
            this.metadata = e
        }
        ,
        p.mediaMetadatas.get = function() {
            return this._mediaMetadatas
        }
        ,
        p.mediaMetadatas.set = function(e) {
            this._fetching = !1,
            this._fetched = !0,
            this._mediaMetadatas = Array.isArray(e) ? e : null
        }
        ,
        p.fetching.get = function() {
            return this._fetching
        }
        ,
        p.fetched.get = function() {
            return this._fetched
        }
        ,
        p.playing.get = function() {
            return this._playing
        }
        ,
        p.played.get = function() {
            return this._played
        }
        ,
        p.skipped.get = function() {
            return this._skipped
        }
        ,
        p.currentTime.get = function() {
            return this._currentTime
        }
        ,
        p.currentTime.set = function(e) {
            this._currentTime = e
        }
        ,
        p.duration.get = function() {
            return this._duration
        }
        ,
        p.duration.set = function(e) {
            this._duration = e
        }
        ,
        p.autoResumePlayer.get = function() {
            return this._autoResumePlayer
        }
        ,
        p.autoResumePlayer.set = function(e) {
            this._autoResumePlayer = e
        }
        ,
        h.prototype.fetch = function() {
            this._fetching = !0
        }
        ,
        h.prototype.play = function() {
            this._playing = !0
        }
        ,
        h.prototype.stop = function() {
            this._playing = !1,
            this._played = !0
        }
        ,
        h.prototype.skip = function() {
            this._skipped = !0
        }
        ,
        Object.defineProperties(h.prototype, p);
        var _ = function() {
            this._cuePoints = [],
            this._currentCuePoint = null,
            this._playing = !1
        }
          , f = {
            playing: {
                configurable: !0
            },
            currentCuePoint: {
                configurable: !0
            }
        };
        f.playing.get = function() {
            return this._playing || this._currentCuePoint && this._currentCuePoint.playing
        }
        ,
        f.currentCuePoint.get = function() {
            return this._currentCuePoint
        }
        ,
        _.prototype.getCuePoints = function() {
            return this._cuePoints
        }
        ,
        _.prototype.setCuePoints = function(e) {
            this._cuePoints = e || [],
            this._currentCuePoint = null,
            this._playing = !1
        }
        ,
        _.prototype.setCuePointsWithMetadatas = function(e) {
            var t = this;
            this.setCuePoints(),
            e.forEach(function(e) {
                t.addCuePoint(new h(e))
            }),
            this._currentCuePoint = null
        }
        ,
        _.prototype.addCuePoint = function(e) {
            this._cuePoints.push(e)
        }
        ,
        _.prototype.removeCuePoint = function(e) {
            this._cuePoints = this._cuePoints.filter(function(t) {
                return t !== e
            })
        }
        ,
        _.prototype.removeAllCuePoints = function() {
            this._cuePoints = []
        }
        ,
        _.prototype.find = function(e) {
            return this._cuePoints.find(function(t) {
                return e(t) && !(t.played || t.skipped)
            })
        }
        ,
        _.prototype.findPre = function(e) {
            return e = Math.floor(e),
            this.find(function(t) {
                return t.time >= e
            })
        }
        ,
        _.prototype.findNext = function(e) {
            return e = Math.floor(e),
            this.find(function(t) {
                return t.time <= e
            })
        }
        ,
        _.prototype.play = function(e) {
            this._playing = !0,
            this._currentCuePoint = e
        }
        ,
        _.prototype.stop = function(e) {
            this._playing = !1,
            (e = e || this._currentCuePoint) && e.stop(),
            this._currentCuePoint = null
        }
        ,
        Object.defineProperties(_.prototype, f);
        var g = {
            MP4: "mp4",
            HLS: "hls",
            DASH: "dash"
        };
        function m(e) {
            return /\.mp4/gi.test(e) ? g.MP4 : /\.mpd/gi.test(e) ? g.DASH : /\.m3u8/gi.test(e) ? g.HLS : void 0
        }
        var y = function(e) {
            "string" == typeof e ? (this._src = e,
            this._type = m(e)) : "object" == typeof e && e.src && (this._src = e.src,
            this._type = e.type || m(e.src))
        }
          , v = {
            type: {
                configurable: !0
            },
            src: {
                configurable: !0
            }
        };
        v.type.get = function() {
            return this._type
        }
        ,
        v.src.get = function() {
            return this._src
        }
        ,
        Object.defineProperties(y.prototype, v);
        var E = function(e) {
            this.middlewareMethods = Object.keys({
                getCurrentTime: !0,
                getDuration: !0,
                onEnded: !0,
                onDurationChange: !0,
                onTimeUpdate: !0,
                onPause: !0,
                load: !0,
                play: !0,
                seek: !0,
                getCurrentCuePoint: !0
            }),
            this._target = e,
            this._targetPlayer = void 0,
            this._cuePointManager = new _,
            this._lastPlayedTime = 0,
            this._mainDuration = 0,
            this._currentCuePointMediaMetadatas = []
        };
        E.prototype._prepareCuePoint = function(e) {
            if (!e.paused && !this._cuePointManager.playing && this._cuePointWillStart) {
                var t = this._cuePointManager.findNext(e.currentTime + 30);
                !t || t.fetched || t.fetching || (t.fetch(),
                this._cuePointWillStart(t.get(), function(e) {
                    t.mediaMetadatas = e,
                    this._playCuePoint()
                }
                .bind(this))),
                this._playCuePoint()
            }
            this._cuePointManager.playing && (this._cuePointManager.currentCuePoint.currentTime = e.player.currentTime)
        }
        ,
        E.prototype._playCuePoint = function() {
            var e = this._target
              , t = e.currentTime
              , i = this._cuePointManager.findNext(t);
            i && (this._cuePointManager.playing || !i.fetching && !i.fetched || (this._lastPlayedTime = t,
            this._mainDuration = e.duration || this._mainDuration,
            this._cuePointManager.play(i),
            e.dispatchEvent(c.CUE_POINT_START, {
                detail: i.get()
            }),
            i.autoResumePlayer = !this._target.paused,
            i.fetching && (this._target.pause(),
            e.dispatchEvent(c.WAITING))),
            this._cuePointManager.playing && i === this._cuePointManager.currentCuePoint && i.fetched && (!i.playing && i.mediaMetadatas && i.mediaMetadatas.length ? (this._currentCuePointMediaMetadatas = [].concat(i.mediaMetadatas),
            this._nextCuePointMediaMetadata(e)) : (i.skip(),
            e.dispatchEvent(c.CUE_POINT_ENDED, {
                detail: i.get()
            }),
            this._cuePointManager.stop(),
            i.autoResumePlayer && this._target.play())))
        }
        ,
        E.prototype._nextCuePointMediaMetadata = function(e) {
            var t = this._currentCuePointMediaMetadatas.shift();
            if (t) {
                var i = {
                    content: t
                };
                i.content = new y(i.content),
                e.player = e._playerFactory.create(i.content.type),
                e.player.load(i),
                e.player.play()
            }
        }
        ,
        E.prototype.getCurrentTime = function() {
            var t = this;
            return function(e) {
                return function() {
                    return t._cuePointManager.playing ? t._lastPlayedTime : e()
                }
            }
        }
        ,
        E.prototype.getDuration = function() {
            var t = this;
            return function(e) {
                return function() {
                    return t._cuePointManager.playing ? t._mainDuration : e()
                }
            }
        }
        ,
        E.prototype.getCurrentCuePoint = function() {
            var t = this;
            return function(e) {
                return function() {
                    for (var i = [], n = arguments.length; n--; ) {
                        i[n] = arguments[n]
                    }
                    return t._cuePointManager.currentCuePoint ? t._cuePointManager.currentCuePoint.get() : e()
                }
            }
        }
        ,
        E.prototype.onEnded = function(e) {
            var t = this;
            return function(i) {
                return function() {
                    for (var n = [], r = arguments.length; r--; ) {
                        n[r] = arguments[r]
                    }
                    var s = i.apply(void 0, n);
                    if (t._cuePointManager.playing)
                        if (t._currentCuePointMediaMetadatas.length)
                            t._nextCuePointMediaMetadata(e);
                        else {
                            var a = t._cuePointManager.currentCuePoint;
                            e.dispatchEvent(c.CUE_POINT_ENDED, {
                                detail: a.get()
                            }),
                            t._cuePointManager.stop(),
                            e.player = t._targetPlayer,
                            e.player.load(Object.assign({}, e.configuration, {
                                initialTime: t._lastPlayedTime,
                                autoplay: a.autoResumePlayer
                            }))
                        }
                    return s
                }
            }
        }
        ,
        E.prototype.onDurationChange = function(e) {
            var t = this;
            return function(i) {
                return function() {
                    for (var n = [], r = arguments.length; r--; ) {
                        n[r] = arguments[r]
                    }
                    return t._cuePointManager.playing && (t._cuePointManager.currentCuePoint.duration += e.player.duration),
                    i.apply(void 0, n)
                }
            }
        }
        ,
        E.prototype.onTimeUpdate = function(e) {
            var t = this;
            return function(i) {
                return function() {
                    for (var n = [], r = arguments.length; r--; ) {
                        n[r] = arguments[r]
                    }
                    return t._prepareCuePoint(e),
                    i.apply(void 0, n)
                }
            }
        }
        ,
        E.prototype.onPause = function() {
            var t = this;
            return function(e) {
                return function() {
                    for (var i = [], n = arguments.length; n--; ) {
                        i[n] = arguments[n]
                    }
                    if (!t._cuePointManager.playing)
                        return e.apply(void 0, i)
                }
            }
        }
        ,
        E.prototype.load = function(e) {
            var t = this;
            return function(i) {
                return function(n) {
                    var r = i(n);
                    return t._cuePointWillStart = e.configuration.cuePointWillStart,
                    t._cuePointManager.setCuePointsWithMetadatas(e.configuration.cuePoints || []),
                    t._targetPlayer = e.player,
                    e.configuration.autoplay && t._prepareCuePoint(e),
                    r
                }
            }
        }
        ,
        E.prototype.play = function(e) {
            var t = this;
            return function(i) {
                return function() {
                    for (var n = [], r = arguments.length; r--; ) {
                        n[r] = arguments[r]
                    }
                    t._prepareCuePoint(e),
                    t._cuePointManager.currentCuePoint && t._cuePointManager.currentCuePoint.fetching || setTimeout(function() {
                        return i.apply(void 0, n)
                    }, 16)
                }
            }
        }
        ,
        E.prototype.seek = function() {
            var t = this;
            return function(e) {
                return function(i) {
                    if (!t._cuePointManager.playing)
                        return e(i)
                }
            }
        }
        ,
        E.prototype.seekToPeriod = function() {
            var t = this;
            return function(e) {
                return function(i, n) {
                    if (!t._cuePointManager.playing)
                        return e(i, n)
                }
            }
        }
        ;
        var b = function(e) {
            this._player = e,
            this._player.logger.eventRegExp = null,
            this.middlewareMethods = Object.keys({
                trigger: !0
            })
        };
        b.prototype.trigger = function(e) {
            return function(t) {
                return function() {
                    for (var i, n = [], r = arguments.length; r--; ) {
                        n[r] = arguments[r]
                    }
                    var s = t.apply(void 0, n);
                    return e.logger.eventRegExp && e.logger.eventRegExp.test(n[0]) && (i = e.logger).print.apply(i, ["Event:"].concat(n)),
                    s
                }
            }
        }
        ;
        var T = {
            debug: 0,
            log: 1,
            info: 2,
            warn: 3,
            error: 4,
            never: 5
        }
          , S = {
            Safari: 2,
            Firefox: 3,
            IE: 4,
            Edge: 4,
            Chrome: 4
        }
          , A = function() {
            this._laungh = Date.now(),
            this._browser = this._getBrowser()
        };
        A.prototype.log = function(e, t) {
            var i, n = this._getLineStr(), r = Array.prototype.join.call(t, ", ");
            if (this.listener && this.listener({
                at: Date.now(),
                from: n,
                logLevel: e,
                message: r,
                args: t
            }),
            this.warnListener && T[e] == T.warn && this.warnListener({
                code: -1,
                message: r,
                platformCode: -1,
                stackTrace: n,
                system: "",
                args: t
            }),
            !(T[e] < T[this.level]))
                if (t.unshift(this._getTimeStr()),
                t.push(">>", n),
                this.method)
                    this.method(e, t);
                else if (this.container) {
                    var s = window.document.getElementById(this.container);
                    s && (t.unshift(e + ":"),
                    s.innerHTML = t.join(" ") + "<br/>" + s.innerHTML)
                } else if (window.console && window.console[e] && window.console[e].apply) {
                    if ("Safari" != this._browser)
                        (i = window.console)[e].apply(i, t);
                    else
                        t.every(function(e) {
                            return "object" != typeof e
                        }) ? window.console[e](t.join(" ")) : window.console[e](t)
                }
        }
        ,
        A.prototype._getTimeStr = function() {
            function e(e, t) {
                return ("000" + (e = String(e))).substr(-Math.max(t, e.length))
            }
            var t = Date.now() - this._laungh;
            return e(Math.floor(t / 1e3 / 60), 2) + ":" + e(Math.floor(t / 1e3 % 60), 2) + ":" + e(Math.floor(t % 1e3), 3)
        }
        ,
        A.prototype._getLineStr = function() {
            try {
                var e = new Error;
                if ("IE" == this._browser)
                    try {
                        throw e
                    } catch (e) {}
                var t = e.stack.split("\n")
                  , i = t[S[this._browser]].trim();
                try {
                    this.caller && (i += " called " + t[S[this._browser] + 1].trim())
                } catch (e) {}
                return i
            } catch (e) {
                return "at unknown"
            }
        }
        ,
        A.prototype._getBrowser = function() {
            var e = window.navigator.userAgent;
            return e.includes("Edge") ? "Edge" : e.includes("Chrome") ? "Chrome" : e.includes("Safari") ? "Safari" : e.includes("Firefox") ? "Firefox" : e.includes("Trident") ? "IE" : "Other"
        }
        ;
        var P = new A
          , w = function() {};
        w.debug = function() {
            for (var e = [], t = arguments.length; t--; ) {
                e[t] = arguments[t]
            }
            return P.log(w.DEBUG_LEVEL, e)
        }
        ,
        w.log = function() {
            for (var e = [], t = arguments.length; t--; ) {
                e[t] = arguments[t]
            }
            return P.log(w.LOG_LEVEL, e)
        }
        ,
        w.info = function() {
            for (var e = [], t = arguments.length; t--; ) {
                e[t] = arguments[t]
            }
            return P.log(w.INFO_LEVEL, e)
        }
        ,
        w.warn = function() {
            for (var e = [], t = arguments.length; t--; ) {
                e[t] = arguments[t]
            }
            return P.log(w.WARN_LEVEL, e)
        }
        ,
        w.error = function() {
            for (var e = [], t = arguments.length; t--; ) {
                e[t] = arguments[t]
            }
            return P.log(w.ERROR_LEVEL, e)
        }
        ,
        w.setLevel = function(e) {
            P.level = e
        }
        ,
        w.setContainer = function(e) {
            P.container = e
        }
        ,
        w.setLogMethod = function(e) {
            P.method = e
        }
        ,
        w.printCaller = function(e) {
            P.caller = e
        }
        ,
        w.setLogListener = function(e) {
            P.listener = e
        }
        ,
        w.setWarnListener = function(e) {
            P.warnListener = e
        }
        ,
        w.DEBUG_LEVEL = "debug",
        w.LOG_LEVEL = "log",
        w.INFO_LEVEL = "info",
        w.WARN_LEVEL = "warn",
        w.ERROR_LEVEL = "error",
        w.NEVER_LEVEL = "never",
        w.setLevel(w.NEVER_LEVEL);
        var k = function(e) {
            this._logFn = console.log,
            this._enable = e || !1
        }
          , C = {
            log: {
                configurable: !0
            },
            enable: {
                configurable: !0
            }
        };
        k.prototype.print = function() {
            for (var e, t = [], i = arguments.length; i--; ) {
                t[i] = arguments[i]
            }
            if (this._enable) {
                var n = new Date
                  , r = n.getHours() + ":" + n.getMinutes() + ":" + n.getSeconds() + "." + n.getMilliseconds();
                try {
                    "function" == typeof this._logFn && (e = this)._logFn.apply(e, [r].concat(t))
                } catch (e) {}
            }
        }
        ,
        C.log.get = function() {
            return this._logFn
        }
        ,
        C.log.set = function(e) {
            this._logFn = e
        }
        ,
        C.enable.get = function() {
            return this._enable
        }
        ,
        C.enable.set = function(e) {
            this._enable = e
        }
        ,
        Object.defineProperties(k.prototype, C);
        var I = function() {
            this._logger = new k,
            w.setLevel(w.LOG_LEVEL),
            w.setLogMethod(this._formatDASHLog.bind(this)),
            this.middlewareMethods = Object.keys({
                getLogger: !0
            })
        };
        I.prototype._formatDASHLog = function(e, t) {
            var i;
            (i = this._logger).print.apply(i, [e].concat(t))
        }
        ,
        I.prototype.getLogger = function() {
            var t = this;
            return function() {
                return function() {
                    return t._logger
                }
            }
        }
        ;
        var R, D = function(e) {
            function t(t) {
                e.call(this),
                this._target = t,
                this._eventTarget = this._target,
                this.onLoadStart = this.onLoadStart.bind(this),
                this.onProgress = this.onProgress.bind(this),
                this.onSuspend = this.onSuspend.bind(this),
                this.onAbort = this.onAbort.bind(this),
                this.onError = this.onError.bind(this),
                this.onWarning = this.onWarning.bind(this),
                this.onEmptied = this.onEmptied.bind(this),
                this.onStalled = this.onStalled.bind(this),
                this.onLoadedMetadata = this.onLoadedMetadata.bind(this),
                this.onLoadedData = this.onLoadedData.bind(this),
                this.onCanPlay = this.onCanPlay.bind(this),
                this.onCanPlayThrough = this.onCanPlayThrough.bind(this),
                this.onPlaying = this.onPlaying.bind(this),
                this.onWaiting = this.onWaiting.bind(this),
                this.onSeeking = this.onSeeking.bind(this),
                this.onSeeked = this.onSeeked.bind(this),
                this.onEnded = this.onEnded.bind(this),
                this.onDurationChange = this.onDurationChange.bind(this),
                this.onTimeUpdate = this.onTimeUpdate.bind(this),
                this.onPlay = this.onPlay.bind(this),
                this.onPause = this.onPause.bind(this),
                this.onVolumeChange = this.onVolumeChange.bind(this),
                this.onManifestChange = this.onManifestChange.bind(this),
                this.onPeriodEnter = this.onPeriodEnter.bind(this),
                this.onPeriodExit = this.onPeriodExit.bind(this),
                this.onPeriodResolving = this.onPeriodResolving.bind(this),
                this.onPeriodResolved = this.onPeriodResolved.bind(this),
                this.onQualityChange = this.onQualityChange.bind(this),
                this.onCdnChange = this.onCdnChange.bind(this),
                this.onBitrateChange = this.onBitrateChange.bind(this),
                this.onSeekableChange = this.onSeekableChange.bind(this),
                this.onRebufferStart = this.onRebufferStart.bind(this),
                this.onRebufferEnd = this.onRebufferEnd.bind(this),
                this.onReconnecting = this.onReconnecting.bind(this),
                this.onTimedMetadata = this.onTimedMetadata.bind(this),
                this.onLog = this.onLog.bind(this),
                this.onTracking = this.onTracking.bind(this),
                this.onQosFragment = this.onQosFragment.bind(this),
                this.onQosManifest = this.onQosManifest.bind(this),
                this.onQosLicense = this.onQosLicense.bind(this),
                this.onQosRemotePeriod = this.onQosRemotePeriod.bind(this)
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t.prototype._bindEvent = function() {
                this._toggleBindEvent()
            }
            ,
            t.prototype._unbindEvent = function() {
                this._toggleBindEvent(!0)
            }
            ,
            t.prototype._toggleBindEvent = function(e) {
                var t = e ? "removeEventListener" : "addEventListener";
                this._eventTarget[t](c.LOAD_START, this.onLoadStart),
                this._eventTarget[t](c.PROGRESS, this.onProgress),
                this._eventTarget[t](c.SUSPEND, this.onSuspend),
                this._eventTarget[t](c.ABORT, this.onAbort),
                this._eventTarget[t](c.ERROR, this.onError),
                this._eventTarget[t](c.WARNING, this.onWarning),
                this._eventTarget[t](c.EMPTIED, this.onEmptied),
                this._eventTarget[t](c.STALLED, this.onStalled),
                this._eventTarget[t](c.LOADED_METADATA, this.onLoadedMetadata),
                this._eventTarget[t](c.LOADED_DATA, this.onLoadedData),
                this._eventTarget[t](c.CAN_PLAY, this.onCanPlay),
                this._eventTarget[t](c.CAN_PLAY_THROUGH, this.onCanPlayThrough),
                this._eventTarget[t](c.PLAYING, this.onPlaying),
                this._eventTarget[t](c.WAITING, this.onWaiting),
                this._eventTarget[t](c.SEEKING, this.onSeeking),
                this._eventTarget[t](c.SEEKED, this.onSeeked),
                this._eventTarget[t](c.ENDED, this.onEnded),
                this._eventTarget[t](c.DURATION_CHANGE, this.onDurationChange),
                this._eventTarget[t](c.TIME_UPDATE, this.onTimeUpdate),
                this._eventTarget[t](c.PLAY, this.onPlay),
                this._eventTarget[t](c.PAUSE, this.onPause),
                this._eventTarget[t](c.VOLUME_CHANGE, this.onVolumeChange),
                this._eventTarget[t](c.MANIFEST_CHANGE, this.onManifestChange),
                this._eventTarget[t](c.PERIOD_ENTER, this.onPeriodEnter),
                this._eventTarget[t](c.PERIOD_EXIT, this.onPeriodExit),
                this._eventTarget[t](c.PERIOD_RESOLVING, this.onPeriodResolving),
                this._eventTarget[t](c.PERIOD_RESOLVED, this.onPeriodResolved),
                this._eventTarget[t](c.QUALITY_CHANGE, this.onQualityChange),
                this._eventTarget[t](c.CDN_CHANGE, this.onCdnChange),
                this._eventTarget[t](c.BITRATE_CHANGE, this.onBitrateChange),
                this._eventTarget[t](c.SEEKABLE_CHANGE, this.onSeekableChange),
                this._eventTarget[t](c.REBUFFER_START, this.onRebufferStart),
                this._eventTarget[t](c.REBUFFER_END, this.onRebufferEnd),
                this._eventTarget[t](c.RECONNECTING, this.onReconnecting),
                this._eventTarget[t](c.TIMED_METADATA, this.onTimedMetadata),
                this._eventTarget[t](c.LOG, this.onLog),
                this._eventTarget[t](c.TRACKING, this.onTracking),
                this._eventTarget[t](c.QOS_FRAGMENT, this.onQosFragment),
                this._eventTarget[t](c.QOS_MANIFEST, this.onQosManifest),
                this._eventTarget[t](c.QOS_LICENSE, this.onQosLicense),
                this._eventTarget[t](c.QOS_REMOTE_PERIOD, this.onQosRemotePeriod)
            }
            ,
            t.prototype.onLoadStart = function(e) {
                this.dispatchEvent(c.LOAD_START, e)
            }
            ,
            t.prototype.onProgress = function(e) {
                this.dispatchEvent(c.PROGRESS, e)
            }
            ,
            t.prototype.onSuspend = function(e) {
                this.dispatchEvent(c.SUSPEND, e)
            }
            ,
            t.prototype.onAbort = function(e) {
                this.dispatchEvent(c.ABORT, e)
            }
            ,
            t.prototype.onError = function(e) {
                this.dispatchEvent(c.ERROR, e)
            }
            ,
            t.prototype.onWarning = function(e) {
                this.dispatchEvent(c.WARNING, e)
            }
            ,
            t.prototype.onEmptied = function(e) {
                this.dispatchEvent(c.EMPTIED, e)
            }
            ,
            t.prototype.onStalled = function(e) {
                this.dispatchEvent(c.STALLED, e)
            }
            ,
            t.prototype.onLoadedMetadata = function(e) {
                this.dispatchEvent(c.LOADED_METADATA, e)
            }
            ,
            t.prototype.onLoadedData = function(e) {
                this.dispatchEvent(c.LOADED_DATA, e)
            }
            ,
            t.prototype.onCanPlay = function(e) {
                this.dispatchEvent(c.CAN_PLAY, e)
            }
            ,
            t.prototype.onCanPlayThrough = function(e) {
                this.dispatchEvent(c.CAN_PLAY_THROUGH, e)
            }
            ,
            t.prototype.onPlaying = function(e) {
                this.dispatchEvent(c.PLAYING, e)
            }
            ,
            t.prototype.onWaiting = function(e) {
                this.dispatchEvent(c.WAITING, e)
            }
            ,
            t.prototype.onSeeking = function(e) {
                this.dispatchEvent(c.SEEKING, e)
            }
            ,
            t.prototype.onSeeked = function(e) {
                this.dispatchEvent(c.SEEKED, e)
            }
            ,
            t.prototype.onEnded = function(e) {
                this.dispatchEvent(c.ENDED, e)
            }
            ,
            t.prototype.onDurationChange = function(e) {
                this.dispatchEvent(c.DURATION_CHANGE, e)
            }
            ,
            t.prototype.onTimeUpdate = function(e) {
                this.dispatchEvent(c.TIME_UPDATE, e)
            }
            ,
            t.prototype.onPlay = function(e) {
                this.dispatchEvent(c.PLAY, e)
            }
            ,
            t.prototype.onPause = function(e) {
                this.dispatchEvent(c.PAUSE, e)
            }
            ,
            t.prototype.onVolumeChange = function(e) {
                this.dispatchEvent(c.VOLUME_CHANGE, e)
            }
            ,
            t.prototype.onManifestChange = function(e) {
                this.dispatchEvent(c.MANIFEST_CHANGE, e)
            }
            ,
            t.prototype.onPeriodEnter = function(e) {
                this.dispatchEvent(c.PERIOD_ENTER, e)
            }
            ,
            t.prototype.onPeriodExit = function(e) {
                this.dispatchEvent(c.PERIOD_EXIT, e)
            }
            ,
            t.prototype.onPeriodResolving = function(e) {
                this.dispatchEvent(c.PERIOD_RESOLVING, e)
            }
            ,
            t.prototype.onPeriodResolved = function(e) {
                this.dispatchEvent(c.PERIOD_RESOLVED, e)
            }
            ,
            t.prototype.onQualityChange = function(e) {
                this.dispatchEvent(c.QUALITY_CHANGE, e)
            }
            ,
            t.prototype.onCdnChange = function(e) {
                this.dispatchEvent(c.CDN_CHANGE, e)
            }
            ,
            t.prototype.onBitrateChange = function(e) {
                this.dispatchEvent(c.BITRATE_CHANGE, e)
            }
            ,
            t.prototype.onSeekableChange = function(e) {
                this.dispatchEvent(c.SEEKABLE_CHANGE, e)
            }
            ,
            t.prototype.onRebufferStart = function(e) {
                this.dispatchEvent(c.REBUFFER_START, e)
            }
            ,
            t.prototype.onRebufferEnd = function(e) {
                this.dispatchEvent(c.REBUFFER_END, e)
            }
            ,
            t.prototype.onReconnecting = function(e) {
                this.dispatchEvent(c.RECONNECTING, e)
            }
            ,
            t.prototype.onTimedMetadata = function(e) {
                this.dispatchEvent(c.TIMED_METADATA, e)
            }
            ,
            t.prototype.onLog = function(e) {
                this.dispatchEvent(c.LOG, e)
            }
            ,
            t.prototype.onTracking = function(e) {
                this.dispatchEvent(c.TRACKING, e)
            }
            ,
            t.prototype.onQosFragment = function(e) {
                this.dispatchEvent(c.QOS_FRAGMENT, e)
            }
            ,
            t.prototype.onQosManifest = function(e) {
                this.dispatchEvent(c.QOS_MANIFEST, e)
            }
            ,
            t.prototype.onQosLicense = function(e) {
                this.dispatchEvent(c.QOS_LICENSE, e)
            }
            ,
            t.prototype.onQosRemotePeriod = function(e) {
                this.dispatchEvent(c.QOS_REMOTE_PERIOD, e)
            }
            ,
            t.prototype.dispatchEvent = function(e, t) {
                var i, n = e;
                if ("object" == typeof e && e.type)
                    n = e.type,
                    i = e;
                else {
                    var r = t && t.target || this;
                    i = new window.CustomEvent(n,t || {}),
                    Object.defineProperties(i, {
                        target: {
                            configurable: !0,
                            enumerable: !0,
                            get: function get() {
                                return r
                            }
                        },
                        currentTarget: {
                            configurable: !0,
                            enumerable: !0,
                            get: function get() {
                                return r
                            }
                        }
                    })
                }
                this.trigger(n, i)
            }
            ,
            t.prototype.addEventListener = function(e, t) {
                this.on(e, t)
            }
            ,
            t.prototype.removeEventListener = function(e, t) {
                this.off(e, t)
            }
            ,
            t.prototype.removeAllEventListeners = function() {
                this.removeAllListeners()
            }
            ,
            t
        }(u);
        (R = window.Promise && /\[\s*native code\s*\]/.test("" + window.Promise) ? window.Promise : a.a).pending = function() {
            return new R(function() {}
            )
        }
        ;
        var L = function(e, t) {
            this._cts = e,
            this._cb = t,
            e && e._register(t)
        };
        L.prototype.dispose = function() {
            this._cts && this._cts._unregister(this._cb)
        }
        ;
        var M = function(e) {
            this._source = e
        }
          , O = {
            isCancellationRequested: {
                configurable: !0
            },
            waitPromise: {
                configurable: !0
            }
        }
          , x = {
            none: {
                configurable: !0
            }
        };
        O.isCancellationRequested.get = function() {
            return null != this._source && this._source.isCancellationRequested
        }
        ,
        O.waitPromise.get = function() {
            return null == this._promise && (this._promise = this._source ? this._source._getPromise() : R.pending()),
            this._promise
        }
        ,
        M.prototype.register = function(e) {
            return new L(this._source,e)
        }
        ,
        x.none.get = function() {
            return null == M._none && (M._none = new M),
            M._none
        }
        ,
        Object.defineProperties(M.prototype, O),
        Object.defineProperties(M, x);
        var N = function() {
            this._registrations = [],
            this._canceled = !1,
            this._timer = null,
            this._token = new M(this)
        }
          , U = {
            isCancellationRequested: {
                configurable: !0
            },
            token: {
                configurable: !0
            }
        };
        function B(e, t, i, n, r, s, a) {
            return {
                codec: e,
                width: t,
                height: i,
                bitrate: n,
                framerate: r,
                profile: s,
                level: a
            }
        }
        function F(e, t, i, n) {
            return {
                codec: e,
                channels: t,
                bitrate: i,
                samplerate: n
            }
        }
        N.prototype.cancel = function() {
            if (!this._canceled) {
                this._canceled = !0;
                for (var e = 0, t = this._registrations; e < t.length; e += 1) {
                    var i = t[e];
                    try {
                        i()
                    } catch (e) {
                        w.log("exception from oncancel callback", e)
                    }
                }
                this._registrations = null
            }
        }
        ,
        N.prototype.cancelAfter = function(e) {
            var t = this;
            this._canceled || (clearTimeout(this._timer),
            this._timer = setTimeout(function() {
                return t.cancel()
            }, e))
        }
        ,
        U.isCancellationRequested.get = function() {
            return this._canceled
        }
        ,
        U.token.get = function() {
            return this._token
        }
        ,
        N.prototype._getPromise = function() {
            var e = this;
            return new R(function(t) {
                return e._register(t)
            }
            )
        }
        ,
        N.prototype._register = function(e) {
            this._canceled ? setTimeout(e) : this._registrations.push(e)
        }
        ,
        N.prototype._unregister = function(e) {
            if (!this._canceled) {
                var t = this._registrations.indexOf(e);
                t >= 0 && this._registrations.splice(t, 1)
            }
        }
        ,
        Object.defineProperties(N.prototype, U);
        var V = "hevc"
          , H = "h264"
          , W = "hevc_4k"
          , G = {
            hevc_4k: [new B("video/mp4; codecs=\"hev1.2.4.L123.B0\"",3840,2160,16e6,60,"MAIN_10",153)],
            hevc: [new B("video/mp4; codecs=\"hev1.2.4.L123.B0\"",1920,1080,6e6,30,"MAIN_10",123)],
            h264: [new B("video/mp4; codecs=\"avc1.64002a\"",1920,1080,11e6,60,"HIGH",42), new B("video/mp4; codecs=\"avc1.640028\"",1920,1080,75e5,30,"HIGH",40), new B("video/mp4; codecs=\"avc1.640020\"",1280,720,7e6,60,"HIGH",32), new B("video/mp4; codecs=\"avc1.64001F\"",1280,720,44e5,30,"HIGH",31), new B("video/mp4; codecs=\"avc1.64001F\"",854,480,4e6,60,"HIGH",31), new B("video/mp4; codecs=\"avc1.64001F\"",854,480,3e6,30,"HIGH",31)]
        }
          , K = {
            ec3: [new F("audio/mp4; codecs=\"ec-3\"",6,256e3,48e3), new F("audio/mp4; codecs=\"ec-3\"",6,192e3,48e3)]
        }
          , z = {
            PROGRESS_INTERVAL: 100,
            END_OF_STREAM: {
                id: "end-of-stream"
            },
            SEEK_EPS: .99,
            DASH_CTS_EPS: .1,
            NUMERICAL_EPS: 1e-4,
            PERIOD_EPS: 8589934592,
            ReadyState: {
                HAVE_NOTHING: 0,
                HAVE_METADATA: 1,
                HAVE_CURRENT_DATA: 2,
                HAVE_FUTURE_DATA: 3,
                HAVE_ENOUGH_DATA: 4
            },
            NetworkState: {
                NETWORK_EMPTY: 0,
                NETWORK_IDLE: 1,
                NETWORK_LOADING: 2,
                NETWORK_NO_SOURCE: 3
            },
            MediaError: {
                MEDIA_ERR_ABORTED: 1,
                MEDIA_ERR_NETWORK: 2,
                MEDIA_ERR_DECODE: 3,
                MEDIA_ERR_SRC_NOT_SUPPORTED: 4,
                MEDIA_ERR_ENCRYPTED: 5,
                MEDIA_ERR_TIMEOUT: 6
            },
            LoaderState: {
                STOPPED: "stopped",
                ENDED: "ended",
                IDLE_ENOUGH_DATA: "enough_data",
                IDLE_REACHED_END: "reached_end",
                IDLE_WAITING_LIVE: "waiting_live",
                LOADING: "loading",
                ERROR: "error"
            },
            TrackId: {
                CAPTIONS: "captions",
                CHAPTERS: "chapters",
                SUB_CHAPTERS: "sub-chapters",
                QUALITIES: "qualities"
            },
            CueType: {
                AD: "ad",
                INTRO: "intro",
                CONTENT: "content"
            },
            TimelineFlag: {
                NEW_SEG: 1,
                NEW_REP: 3,
                NEW_PERIOD: 4,
                INITIAL: 16,
                FINALIZED: 32
            },
            QualityType: {
                LOW: "low",
                MEDIUM: "medium",
                HIGH: "high",
                HD: "HD",
                AUTO: "auto"
            },
            IntroType: {
                PRE_ROLL: "preroll",
                POST_ROLL: "postroll"
            },
            TrackingEvent: {
                STARTUP_DONE: "startupdone",
                SEGMENT_MISALIGN: "segmentmisalign",
                VIDEO_SEGMENT_LOADED: "videosegmentloaded",
                SEGMENT_DOWNLOAD_FAILURE: "segmentdownloadfailure",
                MPD_MISSING_SEGMENT: "mpdmissingsegment",
                SEGMENT_DOWNLOAD: "segmentdownload",
                MPD_REFRESH_FAILURE: "mpdrefreshfailure",
                SEGMENT_SKIP: "segmentskip",
                SEGMENT_SKIP_PLAYBACK: "segmentskipplayback"
            },
            RetryLevel: {
                EME: "RETRY EME",
                NONE: "RETRY NONE",
                STREAM: "RETRY STREAM"
            },
            BufferingState: {
                BUFFERING: "buffering",
                REBUFFERING: "rebuffering",
                SEEKING: "seeking",
                MPD_FRAGMENT_MISSING: "mpd_fragment_missing",
                MPD_REFRESH_FAILURE: "mpd_refresh_failure",
                FRAGMENT_DOWNLOAD_FAILURE: "fragment_download_failure",
                UNKNOWN: "unknown",
                NO_BUFFERING: ""
            }
        }
          , q = {
            Player: {
                ABORT: "abort",
                CAN_PLAY: "canplay",
                CAN_PLAY_THROUGH: "canplaythrough",
                DURATION_CHANGE: "durationchange",
                EMPTIED: "emptied",
                ENDED: "ended",
                ERROR: "error",
                WARNING: "warning",
                LOADED_DATA: "loadeddata",
                LOADED_METADATA: "loadedmetadata",
                LOAD_START: "loadstart",
                PAUSE: "pause",
                PLAY: "play",
                PLAYING: "playing",
                SEEKED: "seeked",
                SEEKING: "seeking",
                TIME_UPDATE: "timeupdate",
                VOLUME_CHANGE: "volumechange",
                WAITING: "waiting",
                PLAY_REJECTED: "playrejected",
                PROGRESS: "progress",
                RATECHANGE: "ratechange",
                RESIZE: "resize",
                STALLED: "stalled",
                SUSPEND: "suspend",
                BITRATE_CHANGE: "bitratechange",
                CDN_CHANGE: "cdnchange",
                MANIFEST_CHANGE: "manifestchange",
                METRICS_UPDATE: "metricsupdate",
                PERIOD_ENTER: "periodenter",
                PERIOD_EXIT: "periodexit",
                PERIOD_RESOLVING: "periodresolving",
                PERIOD_RESOLVED: "periodresolved",
                REBUFFER_END: "rebufferend",
                REBUFFER_START: "rebufferstart",
                RECONNECTING: "reconnecting",
                SEEKABLE_CHANGE: "seekablechange",
                TIMED_METADATA: "timedmetadata",
                TRACKING: "tracking",
                QOS_FRAGMENT: "qosfragment",
                QOS_MANIFEST: "qosmanifest",
                QOS_LICENSE: "qoslicense",
                QOS_REMOTE_PERIOD: "qosremoteperiod",
                LOG: "log"
            },
            Buffer: {
                ENDED: "bufferended",
                ERROR: "buffererror",
                UPDATE: "bufferupdate",
                TRACKING: "buffertracking"
            },
            Timeline: {
                ERROR: "timelineerror",
                UPDATE: "timelineupdate",
                REQUEST_MANIFEST: "timelinerequestmanifest"
            },
            EME: {
                ERROR: "emeerror",
                REQUEST_LICENSE: "emerequestlicense"
            },
            MBR: {
                METRICS_UPDATED: "metricsupdated",
                QUALITY_CHANGE: "qualitychange"
            },
            Track: {
                ADD_TRACK: "addtrack",
                REMOVE_TRACK: "removetrack",
                CHANGE: "change",
                CUE_CHANGE: "cuechange",
                ENTER: "enter",
                EXIT: "exit",
                CUE_FRAGMENT: "cuefragment",
                SELECTED_CHANGE: "selectedchanged"
            }
        }
          , Y = {
            MEDIA_ABORTED_ERROR: "VideoPlayer.Error.MEDIA_ABORTED_ERROR",
            MEDIA_NETWORK_ERROR: "VideoPlayer.Error.MEDIA_NETWORK_ERROR",
            MEDIA_DECODE_ERROR: "VideoPlayer.Error.MEDIA_DECODE_ERROR",
            MEDIA_SRC_NOT_SUPPORTED_ERROR: "VideoPlayer.Error.MEDIA_SRC_NOT_SUPPORTED_ERROR",
            MEDIA_ENCRYPTED_ERROR: "VideoPlayer.Error.MEDIA_ENCRYPTED_ERROR",
            MEDIA_TIMEOUT_ERROR: "VideoPlayer.Error.MEDIA_TIMEOUT_ERROR",
            MEDIA_UNKNOWN_ERROR: "VideoPlayer.Error.MEDIA_UNKNOWN_ERROR",
            MEDIA_KEY_CLIENT_ERROR: "VideoPlayer.Error.MEDIA_KEY_CLIENT_ERROR",
            MEDIA_KEY_DOMAIN_ERROR: "VideoPlayer.Error.MEDIA_KEY_DOMAIN_ERROR",
            MEDIA_KEY_HARDWARECHANGE_ERROR: "VideoPlayer.Error.MEDIA_KEY_HARDWARECHANGE_ERROR",
            MEDIA_KEY_LICENSE_URL_ERROR: "VideoPlayer.Error.MEDIA_KEY_LICENSE_URL_ERROR",
            MEDIA_KEY_MESSAGE_ERROR: "VideoPlayer.Error.MEDIA_KEY_MESSAGE_ERROR",
            MEDIA_KEY_OUTPUT_ERROR: "VideoPlayer.Error.MEDIA_KEY_OUTPUT_ERROR",
            MEDIA_KEY_REQUEST_ERROR: "VideoPlayer.Error.MEDIA_KEY_REQUEST_ERROR",
            MEDIA_KEY_SERVICE_ERROR: "VideoPlayer.Error.MEDIA_KEY_SERVICE_ERROR",
            MEDIA_KEY_UNKNOWN_ERROR: "VideoPlayer.Error.MEDIA_KEY_UNKNOWN_ERROR",
            MEDIA_KEY_UNSUPPORTED_ERROR: "VideoPlayer.Error.MEDIA_KEY_UNSUPPORTED_ERROR",
            CDM_DEPRECATED_BROWSER: "VideoPlayer.Error.CDM_DEPRECATED_BROWSER",
            CDM_UNAVAILABLE_ERROR: "VideoPlayer.Error.CDM_UNAVAILABLE_ERROR",
            EME_UNAVAILABLE_ERROR: "VideoPlayer.Error.EME_UNAVAILABLE_ERROR",
            OUTPUT_NON_HDCP_ERROR: "VideoPlayer.Error.OUTPUT_NON_HDCP_ERROR",
            MPD_FORMAT_ERROR: "VideoPlayer.Error.MPD_FORMAT_ERROR",
            MPD_LOAD_FAILURE: "VideoPlayer.Error.MPD_LOAD_FAILURE",
            MPD_EXPIRED: "VideoPlayer.Error.MPD_EXPIRED",
            DASH_SEGMENT_ERROR: "VideoPlayer.Error.SEGMENT_ERROR",
            DASH_STREAM_ERROR: "VideoPlayer.Error.STREAM_ERROR",
            XLINK_REQUEST_ERROR: "VideoPlayer.Error.XLINK_REQUEST_ERROR",
            SOURCE_BUFFER_APPEND_ERROR: "VideoPlayer.Error.SOURCE_BUFFER_APPEND_ERROR"
        }
          , Q = [200, 800, 1e3, 3e3]
          , $ = function(e, t, i, n) {
            this._url = e,
            this._method = t.method || "GET",
            this._requestBody = t.body || null,
            this._requestHeaders = t.headers || {},
            this._withCredentials = "include" == t.credentials,
            this._ct = i.cancellationToken || M.none,
            this._maxRetryCount = i.retryCount || 0,
            this._downloadTimeout = i.timeoutMs || 0,
            this._connectTimeout = i.connectTimeoutMs || this._downloadTimeout,
            this._type = i.responseType || "arraybuffer",
            this._cancelOnState = i.cancelOnState || [],
            this._errorStatus = i.errorStatus || [],
            this._retryDelays = i.retryDelays && 0 != i.retryDelays.length ? i.retryDelays : Q,
            this._retry = 0,
            this._callbacks = n,
            this._onLoad = this._onLoad.bind(this),
            this._onError = this._onError.bind(this),
            this._onProgress = this._onProgress.bind(this),
            this._onReadyStateRange = this._onReadyStateRange.bind(this),
            this._createXHR()
        };
        $.prototype._createXHR = function() {
            var e = this;
            this._total = this._loaded = 0,
            this._start = Date.now(),
            this._ctreg = this._ct.register(function() {
                return e._disposeXHR()
            }),
            this._connectTimeout > 0 && (this._timer = setTimeout(function() {
                return e._onTimeout()
            }, this._connectTimeout)),
            this._xhr = new XMLHttpRequest,
            this._xhr.open(this._method, this._url),
            this._xhr.responseType = this._type,
            this._xhr.method = this._method,
            this._xhr.withCredentials = this._withCredentials;
            for (var t = 0, i = Object.keys(this._requestHeaders); t < i.length; t += 1) {
                var n = i[t];
                this._xhr.setRequestHeader(n, this._requestHeaders[n])
            }
            this._xhr.addEventListener("load", this._onLoad),
            this._xhr.addEventListener("error", this._onError),
            this._xhr.addEventListener("progress", this._onProgress),
            this._xhr.addEventListener("readystatechange", this._onReadyStateRange),
            this._xhr.send(this._requestBody)
        }
        ,
        $.prototype._disposeXHR = function() {
            this._xhr && (this._ctreg.dispose(),
            this._ctreg = null,
            clearTimeout(this._timer),
            this._timer = null,
            this._xhr.removeEventListener("load", this._onLoad),
            this._xhr.removeEventListener("error", this._onError),
            this._xhr.removeEventListener("progress", this._onProgress),
            this._xhr.removeEventListener("readystatechange", this._onReadyStateRange),
            this._xhr.abort(),
            this._xhr = null)
        }
        ,
        $.prototype._retryXHR = function() {
            var e = this;
            ++this._retry,
            this._disposeXHR(),
            setTimeout(function() {
                e._ct.isCancellationRequested || e._createXHR()
            }, this._retryDelays[Math.min(this._retry, this._retryDelays.length) - 1])
        }
        ,
        $.prototype._onLoad = function() {
            if (this._xhr.status >= 500 && this._retry < this._maxRetryCount)
                this._retryXHR();
            else if (this._errorStatus.includes(this._xhr.status))
                this._onError({
                    type: "loadstatuserror"
                });
            else {
                var e = new J(this._xhr);
                e.rtt = this._rtt,
                e.start = this._start,
                e.total = this._total,
                e.totalTime = Date.now() - this._start,
                e.retry = this._retry,
                this._disposeXHR(),
                this._callbacks.onload(e)
            }
        }
        ,
        $.prototype._onError = function(e) {
            if (this._retry < this._maxRetryCount)
                this._retryXHR();
            else {
                var t = new Error("fetch request " + e.type + " " + this._xhr.status)
                  , i = Date.now() - this._start;
                t.name = "FetchError",
                t.type = e.type,
                t.start = this._start,
                t.retry = this._retry,
                t.total = this._total,
                t.loaded = this._loaded,
                t.status = this._xhr.status,
                t.rtt = this._rtt || i,
                t.totalTime = i,
                t.url = this._url,
                t.method = this._method,
                this._disposeXHR(),
                this._callbacks.onerror(t)
            }
        }
        ,
        $.prototype._onTimeout = function() {
            this._xhr.readyState < XMLHttpRequest.HEADERS_RECEIVED ? this._onError({
                type: "connect_timeout"
            }) : this._onError({
                type: "load_timeout"
            })
        }
        ,
        $.prototype._onProgress = function(e) {
            this._downloadTimeout > 0 && Date.now() - this._start > this._downloadTimeout ? this._onTimeout() : (this._total = e.lengthComputable ? e.total : this._total + e.loaded,
            this._loaded = e.loaded,
            this._callbacks.onprogress({
                start: this._start,
                total: this._total,
                loaded: this._loaded
            }))
        }
        ,
        $.prototype._onReadyStateRange = function() {
            var e = this;
            if (!(this._xhr.readyState < XMLHttpRequest.HEADERS_RECEIVED))
                if (this._rtt = Date.now() - this._start,
                this._connectTimeout > 0 && this._rtt > this._connectTimeout)
                    this._onTimeout();
                else {
                    if (this._xhr.readyState < XMLHttpRequest.DONE) {
                        var t = this._cancelOnState.indexOf(this._xhr.status);
                        if (t >= 0)
                            return this._cancelOnState.splice(t, 1),
                            this._disposeXHR(),
                            void this._createXHR()
                    }
                    clearTimeout(this._timer),
                    this._xhr.removeEventListener("readystatechange", this._onReadyStateRange),
                    this._downloadTimeout > 0 && (this._timer = setTimeout(function() {
                        return e._onTimeout()
                    }, this._downloadTimeout - this._rtt))
                }
        }
        ;
        var X = function() {
            this._map = {}
        };
        X.prototype.get = function(e) {
            return this._map[String(e).toLowerCase()]
        }
        ,
        X.prototype.set = function(e, t) {
            this._map[String(e).toLowerCase()] = String(t)
        }
        ,
        X.prototype.has = function(e) {
            return null != this._map[String(e).toLowerCase()]
        }
        ,
        X.prototype.append = function(e, t) {
            var i = this.get(e);
            this.set(e, null == i ? t : i + "," + t)
        }
        ,
        X.prototype.delete = function(e) {
            delete this._map[String(e).toLowerCase()]
        }
        ,
        X.parse = function(e) {
            for (var t = new X, i = 0, n = (e || "").split("\r\n"); i < n.length; i += 1) {
                var r = n[i];
                (r = r.split(": ")).length < 2 || t.append(r.shift(), r.join(": "))
            }
            return t
        }
        ;
        var J = function(e) {
            this.type = e.responseType,
            this.data = e.response,
            this.status = e.status,
            this.ok = this.status >= 200 && this.status < 300,
            this.headers = X.parse(e.getAllResponseHeaders()),
            this.url = e.responseURL || this.headers.get("X-Request-URL"),
            this.method = e.method
        };
        function Z(e, t, i) {
            return new R(function(n, r) {
                var s = {
                    onload: n,
                    onerror: r,
                    onprogress: i && i.onprogress || function() {}
                };
                new $(e,t || {},i || {},s)
            }
            )
        }
        function ee(e, t) {
            return {
                downloadStartTime: t.start || 0,
                downloadTimeToFirstByte: t.rtt || 0,
                downloadTotalTime: t.totalTime || 0,
                size: t.total || 0,
                statusCode: t.status || 0,
                successful: t.ok || !1,
                retryNumber: t.retry || 0,
                url: e,
                responseURL: t.url
            }
        }
        J.prototype.assertOK = function() {
            if (this.ok)
                return this;
            var e = new Error("http status " + this.status + " error")
              , t = Date.now() - this._start;
            throw e.name = "FetchError",
            e.type = "error",
            e.start = this.start,
            e.retry = this.retry || 0,
            e.total = 0,
            e.loaded = 0,
            e.status = this.status,
            e.rtt = this._rtt || t,
            e.totalTime = t,
            e.fetchResponse = this,
            e.url = this.url,
            e.method = this.method,
            e
        }
        ,
        J.prototype.text = function() {
            return "text" == this.type ? R.resolve(this.data) : this.blob().then(function(e) {
                return new R(function(t, i) {
                    var n = new FileReader;
                    n.onload = function() {
                        return t(n.result)
                    }
                    ,
                    n.onerror = function() {
                        return i(n.error)
                    }
                    ,
                    n.readAsText(e)
                }
                )
            })
        }
        ,
        J.prototype.json = function() {
            return this.text().then(function(e) {
                return JSON.parse(e)
            })
        }
        ,
        J.prototype.blob = function() {
            return "blob" == this.type ? R.resolve(this.data) : R.resolve(new Blob([this.data]))
        }
        ,
        J.prototype.arrayBuffer = function() {
            return "arraybuffer" == this.type ? R.resolve(this.data) : this.blob().then(function(e) {
                return new R(function(t, i) {
                    var n = new FileReader;
                    n.onload = function() {
                        return t(n.result)
                    }
                    ,
                    n.onerror = function() {
                        return i(n.error)
                    }
                    ,
                    n.readAsArrayBuffer(e)
                }
                )
            })
        }
        ,
        J.prototype.formData = function() {
            return R.reject(new TypeError("form data unsupported"))
        }
        ;
        var te = [2e3, 4e3, 8e3]
          , ie = ["com.microsoft.playready", "com.chromecast.playready", "com.youtube.playready", "com.widevine.alpha", "com.apple.fps.1_0"]
          , ne = function() {};
        ne.isWideVine = function(e) {
            return "com.widevine.alpha" == e
        }
        ,
        ne.isChromeCastPlayReady = function(e) {
            return "com.chromecast.playready" == e
        }
        ,
        ne.isPlayReady = function(e) {
            return null != e && e.includes("playready")
        }
        ,
        ne.isFairPlay = function(e) {
            return null != e && e.includes("apple.fps")
        }
        ,
        ne.getEnabledKeySystems = function(e) {
            return e && "default" != e ? 0 == (e = e.filter(function(e) {
                return ie.includes(e)
            })).length ? ie.slice() : e : ie.slice()
        }
        ,
        ne.requestLicense = function(e, t, i, n, r, s) {
            var a = null
              , o = null;
            if (ne.isWideVine(e) ? (a = t.widevine,
            o = {
                body: i
            }) : ne.isChromeCastPlayReady(e) ? (a = t.playready,
            o = {
                body: i
            }) : ne.isPlayReady(e) ? (a = t.playready,
            o = ne._getPlayReadyRequest(i)) : ne.isFairPlay(e) && (a = t.fairplay,
            o = ne._getFairPlayRequest(i)),
            a instanceof Object && (a = a.license),
            !a) {
                var l = new Error("no license url available");
                return l.type = Y.MEDIA_KEY_LICENSE_URL_ERROR,
                R.reject(l)
            }
            if (!o) {
                var d = new Error("no message data available");
                return d.type = Y.MEDIA_KEY_MESSAGE_ERROR,
                R.reject(d)
            }
            var u = {
                cancellationToken: n,
                retryCount: s && null != s.playbackRequestRetries ? s.playbackRequestRetries : 3,
                timeoutMs: s && null != s.playbackRequestTimeout ? s.playbackRequestTimeout : 2e4,
                retryDelays: te
            };
            o.method = "POST";
            var c = null;
            return Z(a, o, u).then(function(e) {
                return c = ee(a, e),
                e.assertOK().arrayBuffer()
            }).then(function(t) {
                return r(c),
                t = new Uint8Array(t),
                ne.isFairPlay(e) ? ne._getFairPlayResponse(t) : t
            }).catch(function(e) {
                return r(ee(a, e)),
                e.message = "cannot fetch license",
                e.type = Y.MEDIA_KEY_REQUEST_ERROR,
                e.fetchResponse ? e.fetchResponse.text().catch(function() {
                    return R.reject(e)
                }).then(function(t) {
                    return 400 == e.status && t && t.includes("old browser") && (e.type = Y.CDM_DEPRECATED_BROWSER),
                    R.reject(e)
                }) : R.reject(e)
            })
        }
        ,
        ne._getPlayReadyRequest = function(e) {
            var t = {
                headers: {}
            };
            0 == (e = new Uint8Array(e))[1] && (e = new Uint16Array(e.buffer)),
            e = String.fromCharCode.apply(String, e);
            var i = new DOMParser().parseFromString(e, "application/xml")
              , n = i.getElementsByTagName("Challenge")[0];
            if (!n)
                return null;
            var r = n.childNodes[0];
            r && r.nodeType == Node.TEXT_NODE ? t.body = atob(r.nodeValue) : t.body = e;
            for (var s = 0, a = Array.from(i.getElementsByTagName("HttpHeader")); s < a.length; s += 1) {
                var o = a[s];
                t.headers[o.childNodes[0].textContent] = o.childNodes[1].textContent
            }
            return t
        }
        ,
        ne._getFairPlayRequest = function(e) {
            var t = {
                headers: {
                    "Content-Type": "text/plain"
                }
            };
            return e = String.fromCharCode.apply(String, new Uint8Array(e)),
            t.body = window.btoa(e),
            t
        }
        ,
        ne._getFairPlayResponse = function(e) {
            return e = String.fromCharCode.apply(String, e),
            e = window.atob(e),
            e = Array.from(e).map(function(e) {
                return e.charCodeAt(0)
            }),
            new Uint8Array(e)
        }
        ;
        var re = function() {};
        if (re.inject = function(e) {
            Object.assign(e, {
                addEventListener: function addEventListener(e, t, i) {
                    var n = i && i.once;
                    if (this._etmListeners || (this._etmListeners = {}),
                    null == this._etmListeners[e])
                        this._etmListeners[e] = [{
                            handler: t,
                            once: n
                        }];
                    else {
                        var r = this._etmListeners[e];
                        null == r.find(function(e) {
                            return e.handler == t
                        }) && r.push({
                            handler: t,
                            once: n
                        })
                    }
                },
                removeEventListener: function removeEventListener(e, t) {
                    if (this._etmListeners && null != this._etmListeners[e]) {
                        var i = this._etmListeners[e]
                          , n = i.findIndex(function(e) {
                            return e.handler == t
                        });
                        n < 0 || (1 == i.length ? delete this._etmListeners[e] : i.splice(n, 1))
                    }
                },
                dispatchEvent: function dispatchEvent(e) {
                    var t = this;
                    if (!(e instanceof Event))
                        return w.error("dispatchEvent only takes instanceof of Event", e),
                        !1;
                    if (!this._etmListeners)
                        return !0;
                    var i = this._etmListeners[e.type];
                    if (!i || 0 == i.length)
                        return !0;
                    var n = !1;
                    Object.defineProperties(e, {
                        target: {
                            enumerable: !0,
                            configurable: !0,
                            get: function get() {
                                return t
                            }
                        },
                        stopImmediatePropagation: {
                            configurable: !0,
                            get: function get() {
                                return function() {
                                    return n = !0
                                }
                            }
                        }
                    }),
                    e.detail && Object.keys(e.detail).forEach(function(t) {
                        t in e || (e[t] = e.detail[t])
                    });
                    for (var r = !1, s = 0, a = i.slice(); s < a.length; s += 1) {
                        var o = a[s]
                          , l = o.handler;
                        if (o.once && this.removeEventListener(e.type, l),
                        l.handleEvent ? r |= 0 == l.handleEvent.call(l, e) : r |= 0 == l.call(this, e),
                        n)
                            break
                    }
                    return !r && !e.defaultPrevented
                }
            })
        }
        ,
        "function" != typeof window.CustomEvent) {
            var se = function(e, t) {
                t = t || {};
                var i = document.createEvent("CustomEvent");
                return i.initCustomEvent(e, t.bubbles, t.cancelable, t.detail),
                i
            };
            se.prototype = window.CustomEvent.prototype,
            window.CustomEvent = se
        }
        var ae = {
            NEED_KEY: "needkey",
            KEY_MESSAGE: "keymessage",
            KEY_ERROR: "keyerror"
        }
          , oe = {}
          , le = window.HTMLMediaElement.prototype;
        le.generateKeyRequest ? (oe.addKey = le.addKey,
        oe.generateKeyRequest = le.generateKeyRequest,
        ae.NEED_KEY = "needkey",
        ae.KEY_MESSAGE = "keymessage",
        ae.KEY_ERROR = "keyerror") : le.msGenerateKeyRequest ? (oe.addKey = le.msAddKey,
        oe.generateKeyRequest = le.msGenerateKeyRequest,
        ae.NEED_KEY = "msneedkey",
        ae.KEY_MESSAGE = "mskeymessage",
        ae.KEY_ERROR = "mskeyerror") : le.webkitGenerateKeyRequest && (oe.addKey = le.webkitAddKey,
        oe.generateKeyRequest = le.webkitGenerateKeyRequest,
        ae.NEED_KEY = "webkitneedkey",
        ae.KEY_MESSAGE = "webkitkeymessage",
        ae.KEY_ERROR = "webkitkeyerror");
        var de = function(e, t) {
            this._videoTag = e,
            this._tracker = t,
            this._config = {},
            this._hasKey = !1,
            this._sessionCTS = new N,
            this._onNeedKey = this._onNeedKey.bind(this),
            this._onKeyMessage = this._onKeyMessage.bind(this),
            this._onKeyError = this._onKeyError.bind(this),
            this._onRequestLicense = this._onRequestLicense.bind(this),
            this._videoTag.addEventListener(ae.NEED_KEY, this._onNeedKey),
            this._videoTag.addEventListener(ae.KEY_MESSAGE, this._onKeyMessage),
            this._videoTag.addEventListener(ae.KEY_ERROR, this._onKeyError)
        }
          , ue = {
            supported: {
                configurable: !0
            }
        };
        de.prototype.setEnabledKeySystems = function(e) {
            var t = this;
            this._enabled = ne.getEnabledKeySystems(e);
            var i = this._enabled.find(function(e) {
                return t._videoTag.canPlayType("video/mp4", e)
            });
            i != this._keySystem && (this._keySystem = i,
            w.log("[eme0.1b] select key system", this._keySystem))
        }
        ,
        de.prototype.setConfig = function(e) {
            this._config = e
        }
        ,
        de.prototype.openSession = function(e, t) {
            t && (w.log("[eme0.1b] open session"),
            this._licenses = t,
            this._sessionCTS = new N)
        }
        ,
        de.prototype.closeSession = function() {
            this._hasKey = !1,
            this._sessionCTS.cancel()
        }
        ,
        de.prototype.dispose = function() {
            this._videoTag.removeEventListener(ae.NEED_KEY, this._onNeedKey),
            this._videoTag.removeEventListener(ae.KEY_MESSAGE, this._onKeyMessage),
            this._videoTag.removeEventListener(ae.KEY_ERROR, this._onKeyError)
        }
        ,
        de.prototype.onAttachMediaElement = function() {}
        ,
        de.prototype.onDetachMediaElement = function() {
            this._hasKey = !1
        }
        ,
        ue.supported.get = function() {
            try {
                return "function" == typeof oe.addKey && "function" == typeof oe.generateKeyRequest
            } catch (e) {
                return !1
            }
        }
        ,
        de.getAvailableKeySystems = function() {
            var e = document.getElementsByTagName("video")[0] || document.createElement("video")
              , t = ie.filter(function(t) {
                return e.canPlayType("video/mp4", t)
            });
            return R.resolve(t)
        }
        ,
        de.encryptSupported = function(e) {
            return R.resolve(e !== V)
        }
        ,
        de.prototype._onNeedKey = function(e) {
            if (16 != e.initData.length) {
                if (this._hasKey)
                    w.log("[eme0.1b] needkey omitted, already in process");
                else {
                    if (this._hasKey = !0,
                    w.log("[eme0.1b] on needkey event"),
                    null == this._keySystem) {
                        var t = new Error("no available key system");
                        return t.type = Y.CDM_UNAVAILABLE_ERROR,
                        t.params = {
                            emeRelated: !0
                        },
                        void this.dispatchEvent(new CustomEvent(q.EME.ERROR,{
                            detail: t
                        }))
                    }
                    this._initData = e.initData,
                    oe.generateKeyRequest.call(this._videoTag, this._keySystem, this._initData)
                }
            } else
                w.log("[eme0.1b] dropping non-bmff needkey event")
        }
        ,
        de.prototype._onKeyMessage = function(e) {
            var t = this;
            w.log("[eme0.1b] on message event");
            var i = this._initData
              , n = e.sessionId
              , r = this._sessionCTS.token;
            this._initData = null,
            this._tracker && this._tracker.start("load_license"),
            w.log("[eme0.1b] fetching license"),
            ne.requestLicense(this._keySystem, this._licenses, e.message.buffer, r, this._onRequestLicense, this._config).then(function(e) {
                if (r.isCancellationRequested)
                    return R.pending();
                w.log("[eme0.1b] license loaded"),
                t._tracker && t._tracker.end("load_license"),
                oe.addKey.call(t._videoTag, t._keySystem, e, i, n)
            }).then(function() {
                w.log("[eme0.1b] add key succeed")
            }).catch(function(e) {
                if (r.isCancellationRequested)
                    return R.pending();
                w.log("[eme0.1b] get license failed"),
                e.type = e.type || Y.MEDIA_KEY_UNSUPPORTED_ERROR,
                e.params = {
                    stage: "update license",
                    keySystem: t._keySystem,
                    emeRelated: !0
                },
                t.dispatchEvent(new CustomEvent(q.EME.ERROR,{
                    detail: e
                }))
            })
        }
        ,
        de.prototype._onKeyError = function() {
            var t = new Error("key error");
            t.type = Y.MEDIA_KEY_UNSUPPORTED_ERROR,
            t.params = {
                stage: "key error event",
                keySystem: this._keySystem,
                emeRelated: !0
            },
            this.dispatchEvent(new CustomEvent(q.EME.ERROR,{
                detail: t
            }))
        }
        ,
        de.prototype._onRequestLicense = function(e) {
            this.dispatchEvent(new CustomEvent(q.EME.REQUEST_LICENSE,{
                detail: e
            }))
        }
        ,
        Object.defineProperties(de, ue),
        re.inject(de.prototype);
        var ce = {
            NEED_KEY: "needkey",
            KEY_MESSAGE: "keymessage",
            KEY_ERROR: "keyerror"
        }
          , he = {
            1212433232: Y.OUTPUT_NON_HDCP_ERROR
        }
          , pe = {}
          , _e = window.HTMLMediaElement.prototype;
        window.MediaKeys && window.MediaKeys.isTypeSupported ? (pe.MediaKeys = window.MediaKeys,
        pe.setMediaKeys = _e.setMediaKeys,
        pe.getMediaKeys = function() {
            return this.mediaKeys || this.keys
        }
        ,
        ce.NEED_KEY = "needkey",
        ce.KEY_MESSAGE = "keymessage",
        ce.KEY_ERROR = "keyerror") : window.MSMediaKeys && window.MSMediaKeys.isTypeSupported ? (pe.MediaKeys = window.MSMediaKeys,
        pe.setMediaKeys = _e.msSetMediaKeys,
        pe.getMediaKeys = function() {
            return this.msMediaKeys || this.msKeys
        }
        ,
        ce.NEED_KEY = "msneedkey",
        ce.KEY_MESSAGE = "mskeymessage",
        ce.KEY_ERROR = "mskeyerror") : window.WebKitMediaKeys && window.WebKitMediaKeys.isTypeSupported && (pe.MediaKeys = window.WebKitMediaKeys,
        pe.setMediaKeys = _e.webkitSetMediaKeys,
        pe.getMediaKeys = function() {
            return this.webkitMediaKeys || this.webkitKeys
        }
        ,
        ce.NEED_KEY = "webkitneedkey",
        ce.KEY_MESSAGE = "webkitkeymessage",
        ce.KEY_ERROR = "webkitkeyerror");
        var fe = function(e, t) {
            this._videoTag = e,
            this._tracker = t,
            this._config = {},
            this._hasKey = !1,
            this._sessions = [],
            this._emeTracker = this._createEMETracker(),
            this._sessionCTS = new N,
            this._onNeedKey = this._onNeedKey.bind(this),
            this._onKeyMessage = this._onKeyMessage.bind(this),
            this._onKeyError = this._onKeyError.bind(this),
            this._onRequestLicense = this._onRequestLicense.bind(this),
            this._videoTag.addEventListener(ce.NEED_KEY, this._onNeedKey)
        }
          , ge = {
            supported: {
                configurable: !0
            }
        };
        function me() {
            return window.cast && window.cast.receiver
        }
        fe.prototype.setEnabledKeySystems = function(e) {
            this._enabled = ne.getEnabledKeySystems(e);
            var t = this._enabled.find(fe._isKeySystemSupported);
            t != this._keySystem && (this._keySystem = t,
            this._emeTracker.log("set key system", this._keySystem))
        }
        ,
        fe.prototype.setConfig = function(e) {
            this._config = e
        }
        ,
        fe.prototype.openSession = function(e, t) {
            t && (this._emeTracker.clear(),
            this._emeTracker.log("open session"),
            this._licenses = t,
            this._sessionCTS = new N,
            this._loadFairPlayCert())
        }
        ,
        fe.prototype.closeSession = function() {
            this._hasKey = !1,
            this._sessionCTS.cancel();
            for (var e = 0, t = this._sessions; e < t.length; e += 1) {
                var i = t[e];
                i.removeEventListener(ce.KEY_MESSAGE, this._onKeyMessage),
                i.removeEventListener(ce.KEY_ERROR, this._onKeyError),
                i.close()
            }
            this._sessions = [],
            this._emeTracker.clear()
        }
        ,
        fe.prototype.dispose = function() {
            this._videoTag.removeEventListener(ce.NEED_KEY, this._onNeedKey)
        }
        ,
        fe.prototype.onAttachMediaElement = function() {}
        ,
        fe.prototype.onDetachMediaElement = function() {
            this._hasKey = !1
        }
        ,
        ge.supported.get = function() {
            try {
                return "function" == typeof pe.MediaKeys && "function" == typeof pe.MediaKeys.isTypeSupported
            } catch (e) {
                return !1
            }
        }
        ,
        fe.getAvailableKeySystems = function() {
            var e = ie.filter(fe._isKeySystemSupported);
            return R.resolve(e)
        }
        ,
        fe._isKeySystemSupported = function(e) {
            return pe.MediaKeys.isTypeSupported(e, "video/mp4")
        }
        ,
        fe.encryptSupported = function(e) {
            return R.resolve(e !== V)
        }
        ,
        fe.prototype._createEMETracker = function() {
            return {
                _stages: [],
                log: function log(e) {
                    for (var t = [], i = arguments.length - 1; i-- > 0; ) {
                        t[i] = arguments[i + 1]
                    }
                    this._stages.push(e),
                    this._stages.length > 20 && this._stages.unshift(),
                    w.log.apply(w, ["[eme2014]", this.status].concat(t))
                },
                clear: function clear() {
                    this._stages = []
                },
                get stages() {
                    return this._stages.join("|")
                },
                get status() {
                    return this._stages[this._stages.length - 1]
                }
            }
        }
        ,
        fe.prototype._loadFairPlayCert = function() {
            var e = this;
            this._certPromise || (ne.isFairPlay(this._keySystem) ? this._certPromise = R.resolve().then(function() {
                return Z(e._licenses.fairplay.cert)
            }).then(function(e) {
                return e.assertOK().arrayBuffer()
            }).then(function(e) {
                return new Uint8Array(e)
            }).catch(function() {
                var e = new Error("cannot fetch fps cert");
                throw e.type = Y.MEDIA_KEY_REQUEST_ERROR,
                e
            }) : this._certPromise = R.resolve())
        }
        ,
        fe.prototype._installMediaKeys = function() {
            var e = this;
            return R.resolve().then(function() {
                return null == pe.getMediaKeys.call(e._videoTag) && (e._emeTracker.log("install media keys"),
                pe.setMediaKeys.call(e._videoTag, new pe.MediaKeys(e._keySystem))),
                pe.getMediaKeys.call(e._videoTag)
            }).catch(function(e) {
                throw e.type = Y.CDM_UNAVAILABLE_ERROR,
                e
            })
        }
        ,
        fe.prototype._getInitData = function(e) {
            return ne.isFairPlay(this._keySystem) ? this._certPromise.then(function(t) {
                var i = String.fromCharCode.apply(String, new Uint16Array(e.buffer))
                  , n = document.createElement("a");
                n.href = i;
                var r = n.hostname
                  , s = new Uint8Array(e.length + 4 + 2 * r.length + 4 + t.length)
                  , a = new DataView(s.buffer)
                  , o = 0;
                s.set(e, o),
                o += e.length,
                a.setUint32(o, 2 * r.length, !0),
                o += 4;
                for (var l = 0; l < r.length; ++l) {
                    s[o++] = r.charCodeAt(l),
                    s[o++] = 0
                }
                return a.setUint32(o, t.length, !0),
                o += 4,
                s.set(t, o),
                o += t.length,
                s
            }) : R.resolve(e)
        }
        ,
        fe.prototype._onNeedKey = function(e) {
            var t = this;
            if (16 != e.initData.length && (!this._hasKey || ne.isFairPlay(this._keySystem))) {
                if (this._hasKey = !0,
                this._emeTracker.log("onneedkey"),
                null == this._keySystem) {
                    var i = new Error("no available key system");
                    return i.type = Y.CDM_UNAVAILABLE_ERROR,
                    i.params = {
                        emeRelated: !0
                    },
                    void this.dispatchEvent(new CustomEvent(q.EME.ERROR,{
                        detail: i
                    }))
                }
                var n = this._sessionCTS.token;
                R.all([this._installMediaKeys(), this._getInitData(e.initData)]).then(function(e) {
                    var i = e[0]
                      , r = e[1];
                    if (n.isCancellationRequested)
                        return R.pending();
                    var s = i.createSession("video/mp4", r);
                    s.addEventListener(ce.KEY_MESSAGE, t._onKeyMessage),
                    s.addEventListener(ce.KEY_ERROR, t._onKeyError),
                    t._sessions.push(s)
                }).catch(function(e) {
                    if (n.isCancellationRequested)
                        return R.pending();
                    t._emeTracker.log("cannot create session", e),
                    e.type = e.type || Y.MEDIA_KEY_UNSUPPORTED_ERROR,
                    e.params = {
                        stage: "create session",
                        keySystem: t._keySystem,
                        emeRelated: !0
                    },
                    t.dispatchEvent(new CustomEvent(q.EME.ERROR,{
                        detail: e
                    }))
                })
            }
        }
        ,
        fe.prototype._onKeyMessage = function(e) {
            var t = this;
            this._emeTracker.log("onkeymessage"),
            this._initData = null,
            this._tracker && this._tracker.start("load_license");
            var i = e.target
              , n = this._sessionCTS.token;
            this._emeTracker.log("license:fetching"),
            ne.requestLicense(this._keySystem, this._licenses, e.message.buffer, n, this._onRequestLicense, this._config).then(function(e) {
                if (n.isCancellationRequested)
                    return R.pending();
                t._emeTracker.log("license:loaded"),
                t._tracker && t._tracker.end("load_license"),
                i.update(e),
                t._emeTracker.log("license:update")
            }).catch(function(e) {
                if (n.isCancellationRequested)
                    return R.pending();
                t._emeTracker.log("license:failed"),
                e.type = e.type || Y.MEDIA_KEY_UNSUPPORTED_ERROR,
                e.params = {
                    emeRelated: !0,
                    emeStages: t._emeTracker.stages,
                    stage: "update license",
                    keySystem: t._keySystem
                },
                t.dispatchEvent(new CustomEvent(q.EME.ERROR,{
                    detail: e
                }))
            })
        }
        ,
        fe.prototype._onKeyError = function(e) {
            var t = e.target.error
              , i = t.systemCode;
            if (!ne.isFairPlay(this._keySystem) || "4294955138" != i || this._sessions[1] != e.target) {
                var n = new Error("key error, code: " + t.code + ", systemCode: " + i);
                n.type = he[i] || Y.MEDIA_KEY_UNSUPPORTED_ERROR,
                n.params = {
                    stage: "key error event",
                    keySystem: this._keySystem,
                    emeRelated: !0,
                    emeStages: this._emeTracker.stages,
                    systemMessage: n.message
                },
                this.dispatchEvent(new CustomEvent(q.EME.ERROR,{
                    detail: n
                }))
            }
        }
        ,
        fe.prototype._onRequestLicense = function(e) {
            this.dispatchEvent(new CustomEvent(q.EME.REQUEST_LICENSE,{
                detail: e
            }))
        }
        ,
        Object.defineProperties(fe, ge),
        re.inject(fe.prototype);
        var ye, ve, Ee, be = {
            getCastReceiver: me,
            getChromecast4KVideoConfig: function getChromecast4KVideoConfig() {
                var e = me();
                if (e)
                    for (var t = 0, i = G[W]; t < i.length; t += 1) {
                        var n = i[t]
                          , r = n.codec + "; width=" + n.width + "; height=" + n.height;
                        if (e.platform && e.platform.canDisplayType && e.platform.canDisplayType(r))
                            return n
                    }
                return null
            }
        }, Te = [{
            initDataTypes: ["cenc"],
            audioCapabilities: [{
                contentType: "audio/mp4; codecs=mp4a.40.2",
                robustness: ""
            }],
            videoCapabilities: [{
                contentType: "video/mp4; codecs=avc1.64001E",
                robustness: ""
            }]
        }], Se = [{
            initDataTypes: ["cenc"],
            videoCapabilities: [{
                contentType: "video/mp4; codecs=hev1.2.4.L123.B0",
                robustness: ""
            }]
        }], Ae = (ye = {},
        ve = {},
        Ee = new R(function(e) {
            function t() {
                e(Object.keys(ye))
            }
            (function e(t) {
                var i = ie[t];
                return null == i ? t > 0 ? null : R.resolve() : R.all([window.navigator.requestMediaKeySystemAccess(i, Te).then(function(e) {
                    return ye[i] = e
                }, function() {}), window.navigator.requestMediaKeySystemAccess(i, Se).then(function(e) {
                    return ve[i] = e
                }, function() {})]).then(function() {
                    return e(t + 1)
                })
            }
            )(0).then(t),
            setTimeout(t, 2e3)
        }
        ).catch(function() {
            return []
        }),
        {
            results: ye,
            hevcResults: ve,
            promise: Ee
        }), Pe = function(e, t) {
            this._videoTag = e,
            this._tracker = t,
            this._config = {},
            this._onMessage = this._onMessage.bind(this),
            this._onEncrypted = this._onEncrypted.bind(this),
            this._onWaitingForKey = this._onWaitingForKey.bind(this),
            this._onKeyStatusesChange = this._onKeyStatusesChange.bind(this),
            this._onRequestLicense = this._onRequestLicense.bind(this),
            this._videoTag.addEventListener("encrypted", this._onEncrypted),
            this._videoTag.addEventListener("waitingforkey", this._onWaitingForKey),
            this._preload = "unknown",
            this._handlerCTS = new N,
            this._sessionCTS = new N
        }, we = {
            supported: {
                configurable: !0
            }
        };
        Pe.prototype.setEnabledKeySystems = function(e, t) {
            var i = this;
            t = t || this._handlerCTS.token,
            this._enabled = ne.getEnabledKeySystems(e),
            w.log("[eme2015] set enabled key systems", this._enabled),
            this._installPromise = this._selectKeySystem(t).then(function() {
                return i._installMediaKeys(t)
            }).then(function() {
                return "ok"
            }, function(e) {
                return i._preload = "unsupported",
                w.log("[eme2015] install media keys before media data is not supported"),
                e
            })
        }
        ,
        Pe.prototype._selectKeySystem = function(e) {
            var t = this;
            return R.all([Ae.promise, this._installPromise]).then(function() {
                var i = t._enabled.find(function(e) {
                    return Ae.results[e]
                });
                if (e.isCancellationRequested)
                    return R.pending();
                if (null == i)
                    throw new Error("no available key system");
                i != t._keySystem && (t._keySystem = i,
                w.log("[eme2015] select key system", t._keySystem))
            })
        }
        ,
        Pe.prototype.setConfig = function(e) {
            this._config = e
        }
        ,
        Pe.prototype.openSession = function(e, t, i) {
            t && (w.log("[eme2015] open session"),
            this._licenses = t,
            this._sessionCTS = new N,
            this._mimeList = i,
            e && this._installPromise && "unsupported" != this._preload && (this._generatePromise = this._tryRun(null, this._generateRequest, e, this._sessionCTS.token)))
        }
        ,
        Pe.prototype.closeSession = function(e) {
            w.log("[eme2015] close session"),
            this._encrypted = !1,
            this._generatePromise = null,
            this._sessionCTS.cancel(),
            this._mimeList = null,
            "reconnect" == e && (this._installPromise = null),
            this._session && (this._session.removeEventListener("message", this._onMessage),
            this._session.removeEventListener("keystatuseschange", this._onKeyStatusesChange),
            R.resolve(this._session.close()).then(function() {
                return w.log("[eme2015] session closed")
            }).catch(function(e) {
                return w.warn("[eme2015] close session failed", e)
            }),
            this._session = null)
        }
        ,
        Pe.prototype.dispose = function() {
            this._handlerCTS.cancel(),
            this._sessionCTS.cancel(),
            this._videoTag.removeEventListener("encrypted", this._onEncrypted),
            this._videoTag.removeEventListener("waitingforkey", this._onWaitingForKey)
        }
        ,
        Pe.prototype.onAttachMediaElement = function() {}
        ,
        Pe.prototype.onDetachMediaElement = function() {
            if (null == this._installPromise && null != this._enabled) {
                w.log("[eme2015] reset media keys");
                var e = this._handlerCTS.token
                  , t = this._videoTag.setMediaKeys(null);
                this._keySystem = null,
                t.catch(function(e) {
                    return w.warn("[eme2015] reset media keys error", e)
                }),
                this._installPromise = R.all([t.then(function() {
                    return "ok"
                }, function(e) {
                    return e
                }), this._selectKeySystem(e).then(function() {
                    return "ok"
                }, function(e) {
                    return e
                })]).then(function(e) {
                    return e.find(function(e) {
                        return "ok" != e
                    }) || new Error("no pre install")
                })
            }
        }
        ,
        we.supported.get = function() {
            try {
                return !!(window.navigator.requestMediaKeySystemAccess && window.MediaEncryptedEvent && window.HTMLMediaElement.prototype.setMediaKeys)
            } catch (e) {
                return !1
            }
        }
        ,
        Pe.getAvailableKeySystems = function() {
            return Ae.promise
        }
        ,
        Pe.encryptSupported = function(e) {
            return e != V ? R.resolve(!0) : Ae.promise.then(function() {
                return Object.keys(Ae.hevcResults).length > 0
            })
        }
        ,
        Pe.prototype._tryRun = function(e, t) {
            for (var i = this, n = [], r = arguments.length - 2; r-- > 0; ) {
                n[r] = arguments[r + 2]
            }
            return (e || R.resolve("null")).then(function(e) {
                return "ok" == e || t.apply(i, n)
            }).then(function() {
                return "ok"
            }, function(e) {
                return e
            })
        }
        ,
        Pe.prototype._installMediaKeys = function(e) {
            var t = this;
            w.log("[eme2015] to install media keys", this._keySystem);
            var i = Ae.results[this._keySystem];
            this._tracker && this._tracker.start("install_media_key", {
                mime: this._mimeList
            }, !0),
            this._mimeList && this._mimeList.some(function(e) {
                return e.includes("hev1")
            }) && (i = Ae.hevcResults[this._keySystem] || i);
            var n = R.resolve(i).then(function(e) {
                if (e)
                    return e.createMediaKeys();
                throw new Error("no available key system")
            }).then(function(i) {
                return e.isCancellationRequested ? R.pending() : (w.log("[eme2015] media keys created, installing"),
                t._videoTag.setMediaKeys(i))
            }).then(function() {
                w.log("[eme2015] media keys installed"),
                t._tracker && t._tracker.end("install_media_key")
            });
            return n.catch(function(e) {
                w.log("[eme2015] install media keys error", e),
                t._tracker && t._tracker.end("install_media_key", e.message)
            }),
            n
        }
        ,
        Pe.prototype._generateRequest = function(e, t) {
            var i = this
              , n = this._installPromise.then(function(e) {
                if (t.isCancellationRequested)
                    return R.pending();
                if ("ok" == e)
                    return w.log("[eme2015] create session", i._session ? "resue" : "new"),
                    i._session || i._videoTag.mediaKeys.createSession();
                throw e.type = Y.CDM_UNAVAILABLE_ERROR,
                e
            }).then(function(n) {
                if (t.isCancellationRequested)
                    return R.pending();
                if (i._session = n,
                i._session.addEventListener("message", i._onMessage),
                i._session.addEventListener("keystatuseschange", i._onKeyStatusesChange),
                w.log("[eme2015] media session created"),
                null == e)
                    throw new Error("empty");
                if (e instanceof MediaEncryptedEvent)
                    return w.log("[eme2015] generating license request, encrypted"),
                    i._tracker && i._tracker.start("generate_request", {
                        source: "encrypted"
                    }, !0),
                    i._session.generateRequest(e.initDataType, e.initData);
                var r = null;
                if (ne.isWideVine(i._keySystem) ? r = e.widevine : ne.isChromeCastPlayReady(i._keySystem) && (r = e.playready),
                r)
                    return w.log("[eme2015] generating license request, pssh"),
                    i._tracker && i._tracker.start("generate_request", {
                        source: "preload"
                    }, !0),
                    i._session.generateRequest("cenc", r);
                throw new Error("empty")
            }).then(function() {
                w.log("[eme2015] license request generated"),
                i._tracker && i._tracker.end("generate_request")
            });
            return n.catch(function(t) {
                e instanceof MediaEncryptedEvent || (i._preload = "unsupported"),
                w.log("[eme2015] generate license error", t),
                i._tracker && i._tracker.end("generate_request", t.message)
            }),
            n
        }
        ,
        Pe.prototype._onMessage = function(e) {
            var t = this;
            if (e.target == this._session) {
                w.log("[eme2015] on message event", e.messageType),
                this._tracker && this._tracker.start("load_license");
                var i = this._sessionCTS.token;
                w.log("[eme2015] fetching license"),
                ne.requestLicense(this._keySystem, this._licenses, e.message, i, this._onRequestLicense, this._config).then(function(e) {
                    if (i.isCancellationRequested)
                        return R.pending();
                    w.log("[eme2015] license loaded"),
                    t._tracker && t._tracker.end("load_license"),
                    t._tracker && t._tracker.start("update_license"),
                    t._session.update(e).then(function() {
                        w.log("[eme2015] update license succeed"),
                        t._tracker && t._tracker.end("update_license")
                    }).catch(function(e) {
                        if (i.isCancellationRequested)
                            return R.pending();
                        w.log("[eme2015] update license failed"),
                        t._tracker && t._tracker.end("update_license", e.message),
                        t._installPromise = null,
                        t._tryDisableChromeCastPlayReady(),
                        t._fireEMEError(e, "update_license")
                    })
                }, function(e) {
                    if (i.isCancellationRequested)
                        return R.pending();
                    w.log("[eme2015] load license failed"),
                    t._tracker && t._tracker.end("load_license", e.message),
                    t._fireEMEError(e, "load license")
                })
            }
        }
        ,
        Pe.prototype._onEncrypted = function(e) {
            var t = this;
            if (this._encrypted)
                w.log("[eme2015] encrypted omitted, already in process");
            else {
                this._encrypted = !0,
                w.log("[eme2015] on encrypted event");
                var i = this._sessionCTS.token;
                this._installPromise = this._tryRun(this._installPromise, this._installMediaKeys, this._handlerCTS.token),
                this._tryRun(this._generatePromise, this._generateRequest, e, i).then(function(e) {
                    if (i.isCancellationRequested)
                        return R.pending();
                    "ok" != e && (w.log("[eme2015] generate license request failed", e),
                    t._tracker && t._tracker.end("generate_request", e.message),
                    t._installPromise = null,
                    t._tryDisableChromeCastPlayReady(),
                    t._fireEMEError(e, "generate request"))
                })
            }
        }
        ,
        Pe.prototype._onWaitingForKey = function() {
            w.log("[eme2015] on waitingforkey event"),
            this._logKeyStatuses(this._session)
        }
        ,
        Pe.prototype._onKeyStatusesChange = function() {
            w.log("[eme2015] on keystatuseschange event"),
            this._logKeyStatuses(this._session)
        }
        ,
        Pe.prototype._onRequestLicense = function(e) {
            this.dispatchEvent(new CustomEvent(q.EME.REQUEST_LICENSE,{
                detail: e
            }))
        }
        ,
        Pe.prototype._tryDisableChromeCastPlayReady = function() {
            if (ne.isChromeCastPlayReady(this._keySystem) && be.getCastReceiver()) {
                var e = this._enabled.indexOf("com.chromecast.playready");
                e >= 0 && this._enabled.splice(e, 1);
                try {
                    window.localStorage.setItem("chromecastPlayready", JSON.stringify({
                        timestamp: Date.now(),
                        state: "unsupported"
                    }))
                } catch (e) {}
            }
        }
        ,
        Pe.prototype._logKeyStatuses = function(e) {
            null != e && e.keyStatuses.forEach(function(e, t) {
                var i;
                e instanceof ArrayBuffer && (e = (i = [t, e])[0],
                t = i[1]),
                t = btoa(String.fromCharCode.apply(String, new Uint8Array(t))),
                w.log("[eme2015] key status:", e, "kid:", t)
            })
        }
        ,
        Pe.prototype._fireEMEError = function(e, t) {
            e.type = e.type || Y.MEDIA_KEY_UNSUPPORTED_ERROR,
            e.params = {
                stage: t,
                keySystem: this._keySystem,
                emeRelated: !0,
                systemMessage: e.message
            },
            this.dispatchEvent(new CustomEvent(q.EME.ERROR,{
                detail: e
            }))
        }
        ,
        Object.defineProperties(Pe, we),
        re.inject(Pe.prototype);
        var ke = function() {};
        ke.prototype.openSession = function(e, t) {
            var i = this;
            if (t) {
                w.log("eme api unavailable");
                var n = new Error("eme api unavailable");
                n.type = Y.EME_UNAVAILABLE_ERROR,
                setTimeout(function() {
                    return i.dispatchEvent(new CustomEvent(q.EME.ERROR,{
                        detail: n
                    }))
                })
            }
        }
        ,
        ke.prototype.setConfig = function() {}
        ,
        ke.prototype.setEnabledKeySystems = function() {}
        ,
        ke.prototype.closeSession = function() {}
        ,
        ke.prototype.dispose = function() {}
        ,
        ke.prototype.onAttachMediaElement = function() {}
        ,
        ke.prototype.onDetachMediaElement = function() {}
        ,
        ke.supported = function() {
            return !0
        }
        ,
        ke.getAvailableKeySystems = function() {
            return R.resolve([])
        }
        ,
        ke.encryptSupported = function() {
            return R.resolve(!1)
        }
        ,
        re.inject(ke.prototype);
        var Ce = [fe, Pe, de, ke].find(function(e) {
            return e.supported
        })
          , Ie = function e(t, i) {
            i = i || 0,
            (t = t || [])instanceof window.TimeRanges ? t = Array.from(t, function(e, i) {
                return [t.start(i), t.end(i)]
            }) : t instanceof e ? t = t._ranges : 2 == t.length && "number" == typeof t[0] && (t = [[t[0], t[1]]]),
            this._ranges = t.map(function(e) {
                return [Math.max(e[0] + i, 0), e[1] + i]
            }).filter(function(e) {
                return e[1] > -1e-4 && e[1] > e[0] + 1e-4
            })
        }
          , Re = {
            length: {
                configurable: !0
            }
        };
        function De(e) {
            for (var t, i = e.split(new RegExp("(?:^|,)((?:[^=]*)=(?:\"[^\"]*\"|[^,]*))")), n = {}, r = i.length; r--; ) {
                "" !== i[r] && ((t = /([^=]*)=(.*)/.exec(i[r]).slice(1))[0] = t[0].replace(/^\s+|\s+$/g, ""),
                t[1] = t[1].replace(/^\s+|\s+$/g, ""),
                t[1] = t[1].replace(/^['"](.*)['"]$/g, "$1"),
                n[t[0]] = t[1])
            }
            return n
        }
        Ie.prototype.start = function(e) {
            if (e >= 0 && e < this.length)
                return this._ranges[e][0];
            throw new RangeError("index " + e + " is out of range")
        }
        ,
        Ie.prototype.end = function(e) {
            if (e >= 0 && e < this.length)
                return this._ranges[e][1];
            throw new RangeError("index " + e + " is out of range")
        }
        ,
        Re.length.get = function() {
            return this._ranges.length
        }
        ,
        Ie.stringify = function(e) {
            e instanceof Ie || e instanceof window.TimeRanges || (e = new Ie(e));
            for (var t = [], i = 0; i < e.length; ++i) {
                t.push(e.start(i).toFixed(2) + "~" + e.end(i).toFixed(2))
            }
            return t.join(",")
        }
        ,
        Object.defineProperties(Ie.prototype, Re);
        var Le = function() {};
        Le.parse = function(e) {
            if (0 === (e = e.replace(/^[\u0000\s]+|[\u0000\s]+$/g, "")).length)
                return {};
            if ("#" !== e[0])
                return {
                    type: "uri",
                    uri: e
                };
            if (0 !== e.indexOf("#EXT"))
                return {
                    type: "comment",
                    text: e.slice(1)
                };
            e = e.replace("\r", "");
            var t = /^#([A-Z-0-9]+):(.*)$/.exec(e);
            if (t) {
                var i = t[1]
                  , n = t[2]
                  , r = n.indexOf("=") > 0 ? De(n) : null;
                return {
                    type: "tag",
                    name: i,
                    value: n,
                    attrs: r
                }
            }
            return (t = /^#([A-Z-0-9]+)$/.exec(e)) ? {
                type: "tag",
                name: t[1]
            } : void 0
        }
        ;
        var Me = {
            joinUrl: function joinUrl(e, t) {
                if (/^https?:/.test(t))
                    return t;
                if (e = e.trim(),
                t = t.trim(),
                e.lastIndexOf("/") === e.length - 1 || (e.lastIndexOf("/") === e.indexOf("//") + 1 ? e += "/" : e = e.substr(0, e.lastIndexOf("/") + 1)),
                "/" === t.charAt(0)) {
                    for (; e.lastIndexOf("/") !== e.indexOf("//") + 1; ) {
                        e = e.substr(0, e.lastIndexOf("/"))
                    }
                    e += "/",
                    t = t.substr(1)
                }
                return e + t
            },
            joinBaseUrls: function joinBaseUrls(e, t) {
                if (!e || !Object.keys(e).length)
                    return t;
                if (!t || !Object.keys(t).length)
                    return e;
                var i = {}
                  , n = null;
                for (var r in e) {
                    for (var s in t) {
                        i[n = s || r || ""] || (i[n] = this.joinUrl(e[r], t[s]))
                    }
                }
                return i
            },
            joinUrlParameters: function joinUrlParameters(e, t) {
                if (!t || !t.length)
                    return e;
                var i = e.indexOf("?");
                return i < 0 ? e + "?" + t : i == e.length - 1 ? e + t : e + "&" + t
            }
        }
          , Oe = ["EXT-X-MEDIA"]
          , xe = ["EXT-X-TARGETDURATION", "EXT-X-MEDIA-SEQUENCE", "EXT-X-DISCONTINUITY-SEQUENCE", "EXT-X-ENDLIST", "EXT-X-PLAYLIST-TYPE", "EXT-X-I-FRAMES-ONLY"]
          , Ne = function(e) {
            this._isMasterPlaylist = !0,
            this._isDynamic = !0,
            this._uris = [],
            this._audios = [],
            this._ranges = [],
            this._periods = [],
            this._windowSize = null,
            this._startTimeOffset = null,
            this.parse(e)
        }
          , Ue = {
            isMasterPlaylist: {
                configurable: !0
            },
            isDynamic: {
                configurable: !0
            },
            segments: {
                configurable: !0
            },
            mediaPlaylists: {
                configurable: !0
            },
            audioTracksMetadata: {
                configurable: !0
            },
            windowSize: {
                configurable: !0
            },
            ranges: {
                configurable: !0
            }
        };
        Ue.isMasterPlaylist.get = function() {
            return this._isMasterPlaylist
        }
        ,
        Ue.isDynamic.get = function() {
            return this._isDynamic
        }
        ,
        Ue.segments.get = function() {
            return this._isMasterPlaylist ? [] : this._uris
        }
        ,
        Ue.mediaPlaylists.get = function() {
            return this._isMasterPlaylist ? this._uris : []
        }
        ,
        Ue.audioTracksMetadata.get = function() {
            return this._audios
        }
        ,
        Ne.prototype.getMediaPlaylistLink = function(e, t) {
            return Me.joinUrl(t, this._uris[e].uri)
        }
        ,
        Ue.windowSize.get = function() {
            return this._windowSize
        }
        ,
        Ue.ranges.get = function() {
            return this._ranges
        }
        ,
        Ne.prototype._getPeriodByTime = function(e) {
            e = e < 0 ? 0 : e;
            for (var t = 0, i = 0, n = void 0; i < this._ranges.length - 1; ++i,
            t += n.duration) {
                if (n = this._ranges[i],
                t <= e && e <= t + n.duration)
                    return this._periods[i]
            }
            return this._periods[this._ranges.length - 1]
        }
        ,
        Ne.prototype.getUnifiedLevel3Manifest = function(e) {
            return {
                periods: this._periods,
                activePeriod: this.getActivePeriod(e),
                windowSize: this.windowSize,
                suggestedPresentationDelay: this._startTimeOffset
            }
        }
        ,
        Ne.prototype.getActivePeriod = function(e) {
            return this._getPeriodByTime(e)
        }
        ,
        Ne.prototype._createLevel3Period = function(e) {
            var t = this._isDynamic ? e.startDate : e.startDate - this._ranges[0].startDate;
            return {
                id: e.id,
                start: t,
                xlinkStatus: null,
                duration: e.duration,
                assetIdentifier: e.programId ? {
                    value: e.programId,
                    schemeIdUri: "urn:com:hulu:asset-id:2016"
                } : null
            }
        }
        ,
        Ne.prototype.parse = function(e) {
            for (var t = {}, i = 0, n = e.split("\n"); i < n.length; i += 1) {
                var r = n[i];
                if (r) {
                    var s = Le.parse(r);
                    "tag" == s.type ? (Oe.includes(s.name) && (this._isMasterPlaylist = !0,
                    "EXT-X-MEDIA" === s.name && "AUDIO" === s.attrs.TYPE && this._audios.push(s.attrs)),
                    xe.includes(s.name) && (this._isMasterPlaylist = !1),
                    "EXT-X-ENDLIST" == s.name || "EXT-X-PLAYLIST-TYPE" == s.name && "VOD" == s.value ? this._isDynamic = !1 : "EXT-X-PROGRAM-DATE-TIME" == s.name ? t.startDate = Date.parse(s.value) / 1e3 : "EXTINF" == s.name ? t.duration = parseFloat(s.value) : "EXT-X-DATERANGE" == s.name ? ("WINDOW-SIZE" == s.attrs.CLASS && (this._windowSize = parseFloat(s.attrs["X-HULU-WINDOW-SIZE"])),
                    this._ranges.push({
                        id: s.attrs.ID,
                        startDate: Date.parse(s.attrs["START-DATE"]) / 1e3,
                        programId: s.attrs["X-PROGRAM-ID"] || s.attrs.ID,
                        duration: 0
                    })) : "EXT-X-START" == s.name && (this._startTimeOffset = parseFloat(s.attrs["TIME-OFFSET"]))) : "uri" == s.type && (this._uris.push({
                        uri: s.uri,
                        attrs: t
                    }),
                    this._ranges.length > 0 && (this._ranges[this._ranges.length - 1].duration += t.duration),
                    t = {})
                }
            }
            !this.isMasterPlaylist && this._ranges.length > 0 && this._processRanges()
        }
        ,
        Ne.prototype._processRanges = function() {
            var e = this;
            this.isDynamic && (this._ranges[this._ranges.length - 1].duration = null),
            this._periods = this._ranges.map(function(t) {
                return e._createLevel3Period(t)
            })
        }
        ,
        Object.defineProperties(Ne.prototype, Ue);
        var Be = function() {
            this.length = 0
        }
          , Fe = {
            selectedIndex: {
                configurable: !0
            }
        };
        Fe.selectedIndex.get = function() {
            return Array.prototype.findIndex.call(this, function(e) {
                return e.selected
            })
        }
        ,
        Be.prototype.getTrackById = function(e) {
            return Array.prototype.find.call(this, function(t) {
                return t.id === e
            })
        }
        ,
        Object.defineProperties(Be.prototype, Fe),
        re.inject(Be.prototype);
        var Ve = function(e) {
            function t() {
                e.call(this)
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t.prototype.selectTrackById = function(e) {
                Array.prototype.forEach.call(this, function(t) {
                    return t.updateSelectedValue(t.id === e)
                })
            }
            ,
            t
        }(Be)
          , He = function(e) {
            function t() {
                e.call(this)
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(Be)
          , je = function(e, t) {
            this.id = e.id,
            this.kind = e.kind,
            "description" === this.kind && (this.kind = "descriptions"),
            this.label = e.label || "",
            this.language = e.language || "",
            this.descriptors = [],
            this._trackList = t,
            this._origin = e
        }
          , We = function(e) {
            function t(t, i) {
                e.call(this, t, i),
                this.codecs = "",
                this.channelConfigurations = [],
                this._selected = !1
            }
            e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t;
            var i = {
                selected: {
                    configurable: !0
                }
            };
            return i.selected.set = function(e) {
                this._selected != e && e && (this._trackList.selectTrackById(this.id),
                this._trackList.dispatchEvent(new CustomEvent(q.Track.CHANGE)))
            }
            ,
            i.selected.get = function() {
                return this._selected
            }
            ,
            t.prototype.updateSelectedValue = function(e) {
                this._origin.enabled = this._selected = e
            }
            ,
            Object.defineProperties(t.prototype, i),
            t
        }(je)
          , Ge = function(e) {
            function t(t, i) {
                e.call(this, t, i),
                this.codecs = ""
            }
            e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t;
            var i = {
                selected: {
                    configurable: !0
                }
            };
            return i.selected.set = function(e) {
                this._origin.selected = e
            }
            ,
            i.selected.get = function() {
                return this._origin.selected
            }
            ,
            Object.defineProperties(t.prototype, i),
            t
        }(je)
          , Ke = function(e, t) {
            this._audioTrackList = e,
            this._videoTrackList = t,
            this._addAudioTrack = this._addAudioTrack.bind(this),
            this._addVideoTrack = this._addVideoTrack.bind(this),
            this._audioPreference = {},
            this._videoPreference = {},
            this.m3u8 = null
        }
          , ze = {
            selectedAudioTrack: {
                configurable: !0
            },
            selectedVideoTrack: {
                configurable: !0
            },
            audioPreference: {
                configurable: !0
            },
            videoPreference: {
                configurable: !0
            }
        };
        ze.selectedAudioTrack.get = function() {
            return this._audioTrackList[this._audioTrackList.selectedIndex]
        }
        ,
        ze.selectedVideoTrack.get = function() {
            return this._videoTrackList[this._videoTrackList.selectedIndex]
        }
        ,
        ze.audioPreference.get = function() {
            return this._audioPreference
        }
        ,
        ze.videoPreference.get = function() {
            return this._videoPreference
        }
        ,
        Ke.prototype.selectAudioTrack = function(e, t, i) {
            this._audioPreference.language = e || this._audioPreference.language,
            this._audioPreference.kind = t || this._audioPreference.kind,
            this._audioPreference.codec = i || this._audioPreference.codec
        }
        ,
        Ke.prototype.selectVideoTrack = function(e, t) {
            this._videoPreference.language = e || this._videoPreference.language,
            this._videoPreference.kind = t || this._videoPreference.kind
        }
        ,
        Ke.prototype.toggleAVTrackEvents = function(e, t, i) {
            var n = i ? "removeEventListener" : "addEventListener";
            e[n](q.Track.ADD_TRACK, this._addAudioTrack.bind(this)),
            e[n](q.Track.REMOVE_TRACK, this._removeAudioTrack.bind(this)),
            t[n](q.Track.ADD_TRACK, this._addVideoTrack.bind(this)),
            t[n](q.Track.REMOVE_TRACK, this._removeVideoTrack.bind(this)),
            i && this.clear()
        }
        ,
        Ke.prototype.clear = function() {
            for (; this._audioTrackList.length > 0; ) {
                this._removeTrack(this._audioTrackList, this._audioTrackList[0])
            }
            for (; this._videoTrackList.length > 0; ) {
                this._removeTrack(this._videoTrackList, this._videoTrackList[0])
            }
        }
        ,
        Ke.prototype._addAudioTrack = function(e) {
            var t = this._getNativeTrack(e)
              , i = this.m3u8.audioTracksMetadata
              , n = new We(t,this._audioTrackList);
            n.channelConfigurations = i.map(function(e) {
                return {
                    value: e.CHANNELS
                }
            }),
            this._addTrack(this._audioTrackList, n)
        }
        ,
        Ke.prototype._addVideoTrack = function(e) {
            var t = this._getNativeTrack(e)
              , i = new Ge(t,this._videoTrackList);
            this._addTrack(this._videoTrackList, i)
        }
        ,
        Ke.prototype._removeAudioTrack = function(e) {
            var t = this._findTrack(this._audioTrackList, this._getNativeTrack(e));
            this._removeTrack(this._audioTrackList, t)
        }
        ,
        Ke.prototype._removeVideoTrack = function(e) {
            var t = this._findTrack(this._videoTrackList, this._getNativeTrack(e));
            this._removeTrack(this._videoTrackList, t)
        }
        ,
        Ke.prototype._findTrack = function(e, t) {
            return Array.prototype.find.call(e, function(e) {
                return e.id === t.id
            })
        }
        ,
        Ke.prototype._addTrack = function(e, t) {
            Array.prototype.push.call(e, t),
            setTimeout(function() {
                e.dispatchEvent(new CustomEvent(q.Track.ADD_TRACK,{
                    detail: t
                }))
            })
        }
        ,
        Ke.prototype._removeTrack = function(e, t) {
            var i = Array.prototype.findIndex.call(e, function(e) {
                return e === t
            });
            -1 != i && (Array.prototype.splice.call(e, i, 1),
            setTimeout(function() {
                e.dispatchEvent(new CustomEvent(q.Track.REMOVE_TRACK,{
                    detail: t
                }))
            }))
        }
        ,
        Ke.prototype._getNativeTrack = function(e) {
            return e.track
        }
        ,
        Ke.getPreferredTracks = function(e, t) {
            if (!e || !e.length)
                return null;
            var i = [].filter
              , n = e;
            if (t.language) {
                var r = i.call(n, function(e) {
                    return e.language == t.language
                });
                r.length > 0 && (n = r)
            }
            if (t.kind) {
                var s = i.call(n, function(e) {
                    return e.kind == t.kind
                });
                s.length > 0 && (n = s)
            }
            if (t.codec) {
                var a = [];
                "eac3" === t.codec ? a = i.call(n, function(e) {
                    return e.codecs.includes("ec-3")
                }) : "aac" === t.codec && (a = i.call(n, function(e) {
                    return !e.codecs.includes("ec-3")
                })),
                a.length > 0 && (n = a)
            }
            return n[0]
        }
        ,
        Object.defineProperties(Ke.prototype, ze);
        var qe = Math.ceil
          , Ye = Math.floor
          , Qe = function(e) {
            return isNaN(e = +e) ? 0 : (e > 0 ? Ye : qe)(e)
        }
          , $e = function(e) {
            if (null == e)
                throw TypeError("Can't call method on " + e);
            return e
        }
          , Xe = function(e) {
            return function(t, i) {
                var n, r, s = String($e(t)), a = Qe(i), o = s.length;
                return a < 0 || a >= o ? e ? "" : void 0 : (n = s.charCodeAt(a)) < 55296 || n > 56319 || a + 1 === o || (r = s.charCodeAt(a + 1)) < 56320 || r > 57343 ? e ? s.charAt(a) : n : e ? s.slice(a, a + 2) : r - 56320 + (n - 55296 << 10) + 65536
            }
        }
          , Je = {
            codeAt: Xe(!1),
            charAt: Xe(!0)
        }
          , Ze = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : void 0 !== e ? e : "undefined" != typeof self ? self : {};
        function et(e, t) {
            return e(t = {
                exports: {}
            }, t.exports),
            t.exports
        }
        var tt = function(e) {
            return e && e.Math == Math && e
        }
          , it = tt("object" == typeof globalThis && globalThis) || tt("object" == typeof window && window) || tt("object" == typeof self && self) || tt("object" == typeof Ze && Ze) || Function("return this")()
          , nt = function(e) {
            try {
                return !!e()
            } catch (e) {
                return !0
            }
        }
          , rt = !nt(function() {
            return 7 != Object.defineProperty({}, "a", {
                get: function get() {
                    return 7
                }
            }).a
        })
          , st = function(e) {
            return "object" == typeof e ? null !== e : "function" == typeof e
        }
          , at = it.document
          , ot = st(at) && st(at.createElement)
          , lt = function(e) {
            return ot ? at.createElement(e) : {}
        }
          , dt = !rt && !nt(function() {
            return 7 != Object.defineProperty(lt("div"), "a", {
                get: function get() {
                    return 7
                }
            }).a
        })
          , ut = function(e) {
            if (!st(e))
                throw TypeError(String(e) + " is not an object");
            return e
        }
          , ct = function(e, t) {
            if (!st(e))
                return e;
            var i, n;
            if (t && "function" == typeof (i = e.toString) && !st(n = i.call(e)))
                return n;
            if ("function" == typeof (i = e.valueOf) && !st(n = i.call(e)))
                return n;
            if (!t && "function" == typeof (i = e.toString) && !st(n = i.call(e)))
                return n;
            throw TypeError("Can't convert object to primitive value")
        }
          , ht = Object.defineProperty
          , pt = {
            f: rt ? ht : function(e, t, i) {
                if (ut(e),
                t = ct(t, !0),
                ut(i),
                dt)
                    try {
                        return ht(e, t, i)
                    } catch (e) {}
                if ("get"in i || "set"in i)
                    throw TypeError("Accessors not supported");
                return "value"in i && (e[t] = i.value),
                e
            }
        }
          , _t = function(e, t) {
            return {
                enumerable: !(1 & e),
                configurable: !(2 & e),
                writable: !(4 & e),
                value: t
            }
        }
          , ft = rt ? function(e, t, i) {
            return pt.f(e, t, _t(1, i))
        }
        : function(e, t, i) {
            return e[t] = i,
            e
        }
          , gt = function(e, t) {
            try {
                ft(it, e, t)
            } catch (i) {
                it[e] = t
            }
            return t
        }
          , mt = it["__core-js_shared__"] || gt("__core-js_shared__", {})
          , yt = Function.toString;
        "function" != typeof mt.inspectSource && (mt.inspectSource = function(e) {
            return yt.call(e)
        }
        );
        var vt, Et, bt, Tt = mt.inspectSource, St = it.WeakMap, At = "function" == typeof St && /native code/.test(Tt(St)), Pt = {}.hasOwnProperty, wt = function(e, t) {
            return Pt.call(e, t)
        }, kt = et(function(e) {
            (e.exports = function(e, t) {
                return mt[e] || (mt[e] = void 0 !== t ? t : {})
            }
            )("versions", []).push({
                version: "3.6.0",
                mode: "global",
                copyright: "\xA9 2019 Denis Pushkarev (zloirock.ru)"
            })
        }), Ct = 0, It = Math.random(), Rt = function(e) {
            return "Symbol(" + String(void 0 === e ? "" : e) + ")_" + (++Ct + It).toString(36)
        }, Dt = kt("keys"), Lt = function(e) {
            return Dt[e] || (Dt[e] = Rt(e))
        }, Mt = {}, Ot = it.WeakMap;
        if (At) {
            var xt = new Ot
              , Nt = xt.get
              , Ut = xt.has
              , Bt = xt.set;
            vt = function(e, t) {
                return Bt.call(xt, e, t),
                t
            }
            ,
            Et = function(e) {
                return Nt.call(xt, e) || {}
            }
            ,
            bt = function(e) {
                return Ut.call(xt, e)
            }
        } else {
            var Ft = Lt("state");
            Mt[Ft] = !0,
            vt = function(e, t) {
                return ft(e, Ft, t),
                t
            }
            ,
            Et = function(e) {
                return wt(e, Ft) ? e[Ft] : {}
            }
            ,
            bt = function(e) {
                return wt(e, Ft)
            }
        }
        var Vt, Ht, jt, Wt = {
            set: vt,
            get: Et,
            has: bt,
            enforce: function enforce(e) {
                return bt(e) ? Et(e) : vt(e, {})
            },
            getterFor: function getterFor(e) {
                return function(t) {
                    var i;
                    if (!st(t) || (i = Et(t)).type !== e)
                        throw TypeError("Incompatible receiver, " + e + " required");
                    return i
                }
            }
        }, Gt = {}.propertyIsEnumerable, Kt = Object.getOwnPropertyDescriptor, zt = {
            f: Kt && !Gt.call({
                1: 2
            }, 1) ? function(e) {
                var t = Kt(this, e);
                return !!t && t.enumerable
            }
            : Gt
        }, qt = {}.toString, Yt = function(e) {
            return qt.call(e).slice(8, -1)
        }, Qt = "".split, $t = nt(function() {
            return !Object("z").propertyIsEnumerable(0)
        }) ? function(e) {
            return "String" == Yt(e) ? Qt.call(e, "") : Object(e)
        }
        : Object, Xt = function(e) {
            return $t($e(e))
        }, Jt = Object.getOwnPropertyDescriptor, Zt = {
            f: rt ? Jt : function(e, t) {
                if (e = Xt(e),
                t = ct(t, !0),
                dt)
                    try {
                        return Jt(e, t)
                    } catch (e) {}
                if (wt(e, t))
                    return _t(!zt.f.call(e, t), e[t])
            }
        }, ei = et(function(e) {
            var t = Wt.get
              , i = Wt.enforce
              , n = String(String).split("String");
            (e.exports = function(e, t, r, s) {
                var a = !!s && !!s.unsafe
                  , o = !!s && !!s.enumerable
                  , l = !!s && !!s.noTargetGet;
                "function" == typeof r && ("string" != typeof t || wt(r, "name") || ft(r, "name", t),
                i(r).source = n.join("string" == typeof t ? t : "")),
                e !== it ? (a ? !l && e[t] && (o = !0) : delete e[t],
                o ? e[t] = r : ft(e, t, r)) : o ? e[t] = r : gt(t, r)
            }
            )(Function.prototype, "toString", function() {
                return "function" == typeof this && t(this).source || Tt(this)
            })
        }), ti = it, ii = function(e) {
            return "function" == typeof e ? e : void 0
        }, ni = function(e, t) {
            return arguments.length < 2 ? ii(ti[e]) || ii(it[e]) : ti[e] && ti[e][t] || it[e] && it[e][t]
        }, ri = Math.min, si = function(e) {
            return e > 0 ? ri(Qe(e), 9007199254740991) : 0
        }, ai = Math.max, oi = Math.min, li = function(e) {
            return function(t, i, n) {
                var r, s = Xt(t), a = si(s.length), o = function(e, t) {
                    var i = Qe(e);
                    return i < 0 ? ai(i + t, 0) : oi(i, t)
                }(n, a);
                if (e && i != i) {
                    for (; a > o; ) {
                        if ((r = s[o++]) != r)
                            return !0
                    }
                } else
                    for (; a > o; o++) {
                        if ((e || o in s) && s[o] === i)
                            return e || o || 0
                    }
                return !e && -1
            }
        }, di = {
            includes: li(!0),
            indexOf: li(!1)
        }.indexOf, ui = function(e, t) {
            var i, n = Xt(e), r = 0, s = [];
            for (i in n) {
                !wt(Mt, i) && wt(n, i) && s.push(i)
            }
            for (; t.length > r; ) {
                wt(n, i = t[r++]) && (~di(s, i) || s.push(i))
            }
            return s
        }, ci = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"], hi = ci.concat("length", "prototype"), pi = {
            f: Object.getOwnPropertyNames || function(e) {
                return ui(e, hi)
            }
        }, _i = {
            f: Object.getOwnPropertySymbols
        }, fi = ni("Reflect", "ownKeys") || function(e) {
            var t = pi.f(ut(e))
              , i = _i.f;
            return i ? t.concat(i(e)) : t
        }
        , gi = function(e, t) {
            for (var i = fi(t), n = pt.f, r = Zt.f, s = 0; s < i.length; s++) {
                var a = i[s];
                wt(e, a) || n(e, a, r(t, a))
            }
        }, yi = function(e, t) {
            var i = Ei[vi(e)];
            return i == Ti || i != bi && ("function" == typeof t ? nt(t) : !!t)
        }, vi = yi.normalize = function(e) {
            return String(e).replace(/#|\.prototype\./, ".").toLowerCase()
        }
        , Ei = yi.data = {}, bi = yi.NATIVE = "N", Ti = yi.POLYFILL = "P", Ai = Zt.f, Pi = function(e, t) {
            var i, n, r, s, a, o = e.target, l = e.global, d = e.stat;
            if (i = l ? it : d ? it[o] || gt(o, {}) : (it[o] || {}).prototype)
                for (n in t) {
                    if (s = t[n],
                    r = e.noTargetGet ? (a = Ai(i, n)) && a.value : i[n],
                    !yi(l ? n : o + (d ? "." : "#") + n, e.forced) && void 0 !== r) {
                        if (typeof s == typeof r)
                            continue;
                        gi(s, r)
                    }
                    (e.sham || r && r.sham) && ft(s, "sham", !0),
                    ei(i, n, s, e)
                }
        }, wi = function(e) {
            return Object($e(e))
        }, ki = !nt(function() {
            function e() {}
            return e.prototype.constructor = null,
            Object.getPrototypeOf(new e) !== e.prototype
        }), Ci = Lt("IE_PROTO"), Ii = Object.prototype, Ri = ki ? Object.getPrototypeOf : function(e) {
            return e = wi(e),
            wt(e, Ci) ? e[Ci] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? Ii : null
        }
        , Di = !!Object.getOwnPropertySymbols && !nt(function() {
            return !String(Symbol())
        }), Li = Di && !Symbol.sham && "symbol" == typeof Symbol(), Mi = kt("wks"), Oi = it.Symbol, xi = Li ? Oi : Rt, Ni = function(e) {
            return wt(Mi, e) || (Di && wt(Oi, e) ? Mi[e] = Oi[e] : Mi[e] = xi("Symbol." + e)),
            Mi[e]
        }, Ui = Ni("iterator"), Bi = !1;
        [].keys && ("next"in (jt = [].keys()) ? (Ht = Ri(Ri(jt))) !== Object.prototype && (Vt = Ht) : Bi = !0),
        null == Vt && (Vt = {}),
        wt(Vt, Ui) || ft(Vt, Ui, function() {
            return this
        });
        var Fi, Vi = {
            IteratorPrototype: Vt,
            BUGGY_SAFARI_ITERATORS: Bi
        }, Hi = Object.keys || function(e) {
            return ui(e, ci)
        }
        , ji = rt ? Object.defineProperties : function(e, t) {
            ut(e);
            for (var i, n = Hi(t), r = n.length, s = 0; r > s; ) {
                pt.f(e, i = n[s++], t[i])
            }
            return e
        }
        , Wi = ni("document", "documentElement"), Gi = Lt("IE_PROTO"), Ki = function() {}, zi = function(e) {
            return "<script>" + e + "</script>"
        }, _qi = function qi() {
            try {
                Fi = document.domain && new ActiveXObject("htmlfile")
            } catch (e) {}
            var e, t;
            _qi = Fi ? function(e) {
                e.write(zi("")),
                e.close();
                var t = e.parentWindow.Object;
                return e = null,
                t
            }(Fi) : ((t = lt("iframe")).style.display = "none",
            Wi.appendChild(t),
            t.src = String("javascript:"),
            (e = t.contentWindow.document).open(),
            e.write(zi("document.F=Object")),
            e.close(),
            e.F);
            for (var i = ci.length; i--; ) {
                delete _qi.prototype[ci[i]]
            }
            return _qi()
        };
        Mt[Gi] = !0;
        var Yi = Object.create || function(e, t) {
            var i;
            return null !== e ? (Ki.prototype = ut(e),
            i = new Ki,
            Ki.prototype = null,
            i[Gi] = e) : i = _qi(),
            void 0 === t ? i : ji(i, t)
        }
          , Qi = pt.f
          , $i = Ni("toStringTag")
          , Xi = function(e, t, i) {
            e && !wt(e = i ? e : e.prototype, $i) && Qi(e, $i, {
                configurable: !0,
                value: t
            })
        }
          , Ji = {}
          , Zi = Vi.IteratorPrototype
          , en = function() {
            return this
        }
          , tn = function(e, t, i) {
            var n = t + " Iterator";
            return e.prototype = Yi(Zi, {
                next: _t(1, i)
            }),
            Xi(e, n, !1),
            Ji[n] = en,
            e
        }
          , nn = Object.setPrototypeOf || ("__proto__"in {} ? function() {
            var e, t = !1, i = {};
            try {
                (e = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set).call(i, []),
                t = i instanceof Array
            } catch (e) {}
            return function(i, n) {
                return ut(i),
                function(e) {
                    if (!st(e) && null !== e)
                        throw TypeError("Can't set " + String(e) + " as a prototype")
                }(n),
                t ? e.call(i, n) : i.__proto__ = n,
                i
            }
        }() : void 0)
          , rn = Vi.IteratorPrototype
          , sn = Vi.BUGGY_SAFARI_ITERATORS
          , an = Ni("iterator")
          , on = function() {
            return this
        }
          , ln = function(e, t, i, n, r, s, a) {
            tn(i, t, n);
            var o, l, d, u = function(e) {
                if (e === r && f)
                    return f;
                if (!sn && e in p)
                    return p[e];
                switch (e) {
                case "keys":
                case "values":
                case "entries":
                    return function() {
                        return new i(this,e)
                    }
                    ;
                }
                return function() {
                    return new i(this)
                }
            }, h = !1, p = e.prototype, _ = p[an] || p["@@iterator"] || r && p[r], f = !sn && _ || u(r), g = "Array" == t && p.entries || _;
            if (g && (o = Ri(g.call(new e)),
            rn !== Object.prototype && o.next && (Ri(o) !== rn && (nn ? nn(o, rn) : "function" != typeof o[an] && ft(o, an, on)),
            Xi(o, t + " Iterator", !0))),
            "values" == r && _ && "values" !== _.name && (h = !0,
            f = function() {
                return _.call(this)
            }
            ),
            p[an] !== f && ft(p, an, f),
            Ji[t] = f,
            r)
                if (l = {
                    values: u("values"),
                    keys: s ? f : u("keys"),
                    entries: u("entries")
                },
                a)
                    for (d in l) {
                        (sn || h || !(d in p)) && ei(p, d, l[d])
                    }
                else
                    Pi({
                        target: t,
                        proto: !0,
                        forced: sn || h
                    }, l);
            return l
        }
          , dn = Je.charAt
          , un = Wt.set
          , cn = Wt.getterFor("String Iterator");
        ln(String, "String", function(e) {
            un(this, {
                type: "String Iterator",
                string: String(e),
                index: 0
            })
        }, function() {
            var e, t = cn(this), i = t.string, n = t.index;
            return n >= i.length ? {
                value: void 0,
                done: !0
            } : (e = dn(i, n),
            t.index += e.length,
            {
                value: e,
                done: !1
            })
        });
        var hn = Ni("iterator")
          , pn = !nt(function() {
            var e = new URL("b?a=1&b=2&c=3","http://a")
              , t = e.searchParams
              , i = "";
            return e.pathname = "c%20d",
            t.forEach(function(e, n) {
                t.delete("b"),
                i += n + e
            }),
            !t.sort || "http://a/c%20d?a=1&c=3" !== e.href || "3" !== t.get("c") || "a=1" !== String(new URLSearchParams("?a=1")) || !t[hn] || "a" !== new URL("https://a@b").username || "b" !== new URLSearchParams(new URLSearchParams("a=b")).get("a") || "xn--e1aybc" !== new URL("http://\u0442\u0435\u0441\u0442").host || "#%D0%B1" !== new URL("http://a#\u0431").hash || "a1c3" !== i || "x" !== new URL("http://x",void 0).host
        })
          , _n = function(e, t, i) {
            if (!(e instanceof t))
                throw TypeError("Incorrect " + (i ? i + " " : "") + "invocation");
            return e
        }
          , fn = Object.assign
          , gn = Object.defineProperty
          , mn = !fn || nt(function() {
            if (rt && 1 !== fn({
                b: 1
            }, fn(gn({}, "a", {
                enumerable: !0,
                get: function get() {
                    gn(this, "b", {
                        value: 3,
                        enumerable: !1
                    })
                }
            }), {
                b: 2
            })).b)
                return !0;
            var e = {}
              , t = {}
              , i = Symbol();
            return e[i] = 7,
            "abcdefghijklmnopqrst".split("").forEach(function(e) {
                t[e] = e
            }),
            7 != fn({}, e)[i] || "abcdefghijklmnopqrst" != Hi(fn({}, t)).join("")
        }) ? function(e) {
            for (var i = wi(e), n = arguments.length, r = 1, s = _i.f, a = zt.f; n > r; ) {
                for (var o, l = $t(arguments[r++]), d = s ? Hi(l).concat(s(l)) : Hi(l), u = d.length, c = 0; u > c; ) {
                    o = d[c++],
                    rt && !a.call(l, o) || (i[o] = l[o])
                }
            }
            return i
        }
        : fn
          , yn = function(e, t, i) {
            if (function(e) {
                if ("function" != typeof e)
                    throw TypeError(String(e) + " is not a function")
            }(e),
            void 0 === t)
                return e;
            switch (i) {
            case 0:
                return function() {
                    return e.call(t)
                }
                ;
            case 1:
                return function(i) {
                    return e.call(t, i)
                }
                ;
            case 2:
                return function(i, n) {
                    return e.call(t, i, n)
                }
                ;
            case 3:
                return function(i, n, r) {
                    return e.call(t, i, n, r)
                }
                ;
            }
            return function() {
                return e.apply(t, arguments)
            }
        }
          , vn = function(e, t, i, n) {
            try {
                return n ? t(ut(i)[0], i[1]) : t(i)
            } catch (t) {
                var r = e.return;
                throw void 0 !== r && ut(r.call(e)),
                t
            }
        }
          , En = Ni("iterator")
          , bn = Array.prototype
          , Tn = function(e) {
            return void 0 !== e && (Ji.Array === e || bn[En] === e)
        }
          , Sn = function(e, t, i) {
            var n = ct(t);
            n in e ? pt.f(e, n, _t(0, i)) : e[n] = i
        }
          , An = {};
        An[Ni("toStringTag")] = "z";
        var Pn = "[object z]" === String(An)
          , wn = Ni("toStringTag")
          , kn = "Arguments" == Yt(function() {
            return arguments
        }())
          , Cn = function(e) {
            var t, i, n;
            return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (i = function(e, t) {
                try {
                    return e[t]
                } catch (e) {}
            }(t = Object(e), wn)) ? i : kn ? Yt(t) : "Object" == (n = Yt(t)) && "function" == typeof t.callee ? "Arguments" : n
        }
          , In = Ni("iterator")
          , Rn = function(e) {
            if (null != e)
                return e[In] || e["@@iterator"] || Ji[Cn(e)]
        }
          , Dn = function(e) {
            var t, i, n, r, s, a = wi(e), o = "function" == typeof this ? this : Array, l = arguments.length, d = l > 1 ? arguments[1] : void 0, u = void 0 !== d, c = 0, h = Rn(a);
            if (u && (d = yn(d, l > 2 ? arguments[2] : void 0, 2)),
            null == h || o == Array && Tn(h))
                for (i = new o(t = si(a.length)); t > c; c++) {
                    Sn(i, c, u ? d(a[c], c) : a[c])
                }
            else
                for (s = (r = h.call(a)).next,
                i = new o; !(n = s.call(r)).done; c++) {
                    Sn(i, c, u ? vn(r, d, [n.value, c], !0) : n.value)
                }
            return i.length = c,
            i
        }
          , On = "Overflow: input needs wider integers to process"
          , xn = Math.floor
          , Nn = String.fromCharCode
          , Un = function(e) {
            return e + 22 + 75 * (e < 26)
        }
          , Bn = function(e, t, i) {
            var n = 0;
            for (e = i ? xn(e / 700) : e >> 1,
            e += xn(e / t); e > 455; n += 36) {
                e = xn(e / 35)
            }
            return xn(n + 36 * e / (e + 38))
        }
          , Fn = function(e) {
            var t, i, n = [], r = (e = function(e) {
                for (var t = [], i = 0, n = e.length; i < n; ) {
                    var r = e.charCodeAt(i++);
                    if (r >= 55296 && r <= 56319 && i < n) {
                        var s = e.charCodeAt(i++);
                        56320 == (64512 & s) ? t.push(((1023 & r) << 10) + (1023 & s) + 65536) : (t.push(r),
                        i--)
                    } else
                        t.push(r)
                }
                return t
            }(e)).length, s = 128, a = 0, o = 72;
            for (t = 0; t < e.length; t++) {
                (i = e[t]) < 128 && n.push(Nn(i))
            }
            var l = n.length
              , d = l;
            for (l && n.push("-"); d < r; ) {
                var u = 2147483647;
                for (t = 0; t < e.length; t++) {
                    (i = e[t]) >= s && i < u && (u = i)
                }
                var c = d + 1;
                if (u - s > xn((2147483647 - a) / c))
                    throw RangeError(On);
                for (a += (u - s) * c,
                s = u,
                t = 0; t < e.length; t++) {
                    if ((i = e[t]) < s && ++a > 2147483647)
                        throw RangeError(On);
                    if (i == s) {
                        for (var h = a, p = 36; ; p += 36) {
                            var _ = p <= o ? 1 : p >= o + 26 ? 26 : p - o;
                            if (h < _)
                                break;
                            var f = h - _
                              , g = 36 - _;
                            n.push(Nn(Un(_ + f % g))),
                            h = xn(f / g)
                        }
                        n.push(Nn(Un(h))),
                        o = Bn(a, c, d == l),
                        a = 0,
                        ++d
                    }
                }
                ++a,
                ++s
            }
            return n.join("")
        }
          , Vn = Ni("unscopables")
          , Hn = Array.prototype;
        null == Hn[Vn] && pt.f(Hn, Vn, {
            configurable: !0,
            value: Yi(null)
        });
        var jn = function(e) {
            Hn[Vn][e] = !0
        }
          , Wn = Wt.set
          , Gn = Wt.getterFor("Array Iterator");
        ln(Array, "Array", function(e, t) {
            Wn(this, {
                type: "Array Iterator",
                target: Xt(e),
                index: 0,
                kind: t
            })
        }, function() {
            var e = Gn(this)
              , t = e.target
              , i = e.kind
              , n = e.index++;
            return !t || n >= t.length ? (e.target = void 0,
            {
                value: void 0,
                done: !0
            }) : "keys" == i ? {
                value: n,
                done: !1
            } : "values" == i ? {
                value: t[n],
                done: !1
            } : {
                value: [n, t[n]],
                done: !1
            }
        }, "values");
        Ji.Arguments = Ji.Array,
        jn("keys"),
        jn("values"),
        jn("entries");
        var Kn = function(e) {
            var t = Rn(e);
            if ("function" != typeof t)
                throw TypeError(String(e) + " is not iterable");
            return ut(t.call(e))
        }
          , zn = ni("fetch")
          , qn = ni("Headers")
          , Yn = Ni("iterator")
          , Qn = Wt.set
          , $n = Wt.getterFor("URLSearchParams")
          , Xn = Wt.getterFor("URLSearchParamsIterator")
          , Zn = Array(4)
          , er = function(e) {
            return Zn[e - 1] || (Zn[e - 1] = RegExp("((?:%[\\da-f]{2}){" + e + "})", "gi"))
        }
          , tr = function(e) {
            try {
                return decodeURIComponent(e)
            } catch (t) {
                return e
            }
        }
          , ir = function(e) {
            var t = e.replace(/\+/g, " ")
              , i = 4;
            try {
                return decodeURIComponent(t)
            } catch (e) {
                for (; i; ) {
                    t = t.replace(er(i--), tr)
                }
                return t
            }
        }
          , rr = {
            "!": "%21",
            "'": "%27",
            "(": "%28",
            ")": "%29",
            "~": "%7E",
            "%20": "+"
        }
          , sr = function(e) {
            return rr[e]
        }
          , ar = function(e) {
            return encodeURIComponent(e).replace(/[!'()~]|%20/g, sr)
        }
          , or = function(e, t) {
            if (t)
                for (var i, n, r = t.split("&"), s = 0; s < r.length; ) {
                    (i = r[s++]).length && (n = i.split("="),
                    e.push({
                        key: ir(n.shift()),
                        value: ir(n.join("="))
                    }))
                }
        }
          , lr = function(e) {
            this.entries.length = 0,
            or(this.entries, e)
        }
          , dr = function(e, t) {
            if (e < t)
                throw TypeError("Not enough arguments")
        }
          , ur = tn(function(e, t) {
            Qn(this, {
                type: "URLSearchParamsIterator",
                iterator: Kn($n(e).entries),
                kind: t
            })
        }, "Iterator", function() {
            var e = Xn(this)
              , t = e.kind
              , i = e.iterator.next()
              , n = i.value;
            return i.done || (i.value = "keys" === t ? n.key : "values" === t ? n.value : [n.key, n.value]),
            i
        })
          , cr = function() {
            _n(this, cr, "URLSearchParams");
            var e, t, i, n, r, s, a, o, l, d = arguments.length > 0 ? arguments[0] : void 0, u = this, c = [];
            if (Qn(u, {
                type: "URLSearchParams",
                entries: c,
                updateURL: function updateURL() {},
                updateSearchParams: lr
            }),
            void 0 !== d)
                if (st(d)) {
                    if ("function" == typeof (e = Rn(d)))
                        for (i = (t = e.call(d)).next; !(n = i.call(t)).done; ) {
                            if ((a = (s = (r = Kn(ut(n.value))).next).call(r)).done || (o = s.call(r)).done || !s.call(r).done)
                                throw TypeError("Expected sequence with length 2");
                            c.push({
                                key: a.value + "",
                                value: o.value + ""
                            })
                        }
                    else
                        for (l in d) {
                            wt(d, l) && c.push({
                                key: l,
                                value: d[l] + ""
                            })
                        }
                } else
                    or(c, "string" == typeof d ? "?" === d.charAt(0) ? d.slice(1) : d : d + "")
        }
          , hr = cr.prototype;
        !function(e, t, i) {
            for (var n in t) {
                ei(e, n, t[n], i)
            }
        }(hr, {
            append: function append(e, t) {
                dr(arguments.length, 2);
                var i = $n(this);
                i.entries.push({
                    key: e + "",
                    value: t + ""
                }),
                i.updateURL()
            },
            delete: function _delete(e) {
                dr(arguments.length, 1);
                for (var t = $n(this), i = t.entries, r = 0; r < i.length; ) {
                    i[r].key === e + "" ? i.splice(r, 1) : r++
                }
                t.updateURL()
            },
            get: function get(e) {
                dr(arguments.length, 1);
                for (var t = $n(this).entries, n = 0; n < t.length; n++) {
                    if (t[n].key === e + "")
                        return t[n].value
                }
                return null
            },
            getAll: function getAll(e) {
                dr(arguments.length, 1);
                for (var t = $n(this).entries, n = [], r = 0; r < t.length; r++) {
                    t[r].key === e + "" && n.push(t[r].value)
                }
                return n
            },
            has: function has(e) {
                dr(arguments.length, 1);
                for (var t = $n(this).entries, n = 0; n < t.length; ) {
                    if (t[n++].key === e + "")
                        return !0
                }
                return !1
            },
            set: function set(e, t) {
                dr(arguments.length, 1);
                for (var i, n = $n(this), r = n.entries, s = !1, a = e + "", o = t + "", l = 0; l < r.length; l++) {
                    (i = r[l]).key === a && (s ? r.splice(l--, 1) : (s = !0,
                    i.value = o))
                }
                s || r.push({
                    key: a,
                    value: o
                }),
                n.updateURL()
            },
            sort: function sort() {
                var e, t, i, n = $n(this), r = n.entries, s = r.slice();
                for (r.length = 0,
                i = 0; i < s.length; i++) {
                    for (e = s[i],
                    t = 0; t < i; t++) {
                        if (r[t].key > e.key) {
                            r.splice(t, 0, e);
                            break
                        }
                    }
                    t === i && r.push(e)
                }
                n.updateURL()
            },
            forEach: function forEach(e) {
                for (var t, i = $n(this).entries, n = yn(e, arguments.length > 1 ? arguments[1] : void 0, 3), r = 0; r < i.length; ) {
                    n((t = i[r++]).value, t.key, this)
                }
            },
            keys: function keys() {
                return new ur(this,"keys")
            },
            values: function values() {
                return new ur(this,"values")
            },
            entries: function entries() {
                return new ur(this,"entries")
            }
        }, {
            enumerable: !0
        }),
        ei(hr, Yn, hr.entries),
        ei(hr, "toString", function() {
            for (var e, t = $n(this).entries, i = [], n = 0; n < t.length; ) {
                e = t[n++],
                i.push(ar(e.key) + "=" + ar(e.value))
            }
            return i.join("&")
        }, {
            enumerable: !0
        }),
        Xi(cr, "URLSearchParams"),
        Pi({
            global: !0,
            forced: !pn
        }, {
            URLSearchParams: cr
        }),
        pn || "function" != typeof zn || "function" != typeof qn || Pi({
            global: !0,
            enumerable: !0,
            forced: !0
        }, {
            fetch: function fetch(e) {
                var t, i, n, r = [e];
                return arguments.length > 1 && (t = arguments[1],
                st(t) && (i = t.body,
                "URLSearchParams" === Cn(i) && ((n = t.headers ? new qn(t.headers) : new qn).has("content-type") || n.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"),
                t = Yi(t, {
                    body: _t(0, String(i)),
                    headers: _t(0, n)
                }))),
                r.push(t)),
                zn.apply(this, r)
            }
        });
        var pr, _r = {
            URLSearchParams: cr,
            getState: $n
        }, fr = Je.codeAt, gr = it.URL, mr = _r.URLSearchParams, yr = _r.getState, vr = Wt.set, Er = Wt.getterFor("URL"), br = Math.floor, Tr = Math.pow, Sr = /[A-Za-z]/, Pr = /\d/, Ir = /^[\dA-Fa-f]+$/, Or = function(e, t) {
            var i, n, r;
            if ("[" == t.charAt(0)) {
                if ("]" != t.charAt(t.length - 1))
                    return "Invalid host";
                if (!(i = Nr(t.slice(1, -1))))
                    return "Invalid host";
                e.host = i
            } else if (Gr(e)) {
                if (t = function(e) {
                    var t, i, n = [], r = e.toLowerCase().replace(/[.\u3002\uFF0E\uFF61]/g, ".").split(".");
                    for (t = 0; t < r.length; t++) {
                        i = r[t],
                        n.push(/[^\0-\u007E]/.test(i) ? "xn--" + Fn(i) : i)
                    }
                    return n.join(".")
                }(t),
                /[\u0000\u0009\u000A\u000D #%/:?@[\\]]/.test(t))
                    return "Invalid host";
                if (null === (i = xr(t)))
                    return "Invalid host";
                e.host = i
            } else {
                if (/[\u0000\u0009\u000A\u000D #/:?@[\\]]/.test(t))
                    return "Invalid host";
                for (i = "",
                n = Dn(t),
                r = 0; r < n.length; r++) {
                    i += jr(n[r], Br)
                }
                e.host = i
            }
        }, xr = function(e) {
            var t, i, n, r, s, a, o, l = e.split(".");
            if (l.length && "" == l[l.length - 1] && l.pop(),
            (t = l.length) > 4)
                return e;
            for (i = [],
            n = 0; n < t; n++) {
                if ("" == (r = l[n]))
                    return e;
                if (s = 10,
                r.length > 1 && "0" == r.charAt(0) && (s = /^(0x|0X)/.test(r) ? 16 : 8,
                r = r.slice(8 == s ? 1 : 2)),
                "" === r)
                    a = 0;
                else {
                    if (!(10 == s ? /^\d+$/ : 8 == s ? /^[0-7]+$/ : Ir).test(r))
                        return e;
                    a = parseInt(r, s)
                }
                i.push(a)
            }
            for (n = 0; n < t; n++) {
                if (a = i[n],
                n == t - 1) {
                    if (a >= Tr(256, 5 - t))
                        return null
                } else if (a > 255)
                    return null
            }
            for (o = i.pop(),
            n = 0; n < i.length; n++) {
                o += i[n] * Tr(256, 3 - n)
            }
            return o
        }, Nr = function(e) {
            var t, i, n, r, s, a, o, l = [0, 0, 0, 0, 0, 0, 0, 0], d = 0, u = null, c = 0, h = function() {
                return e.charAt(c)
            };
            if (":" == h()) {
                if (":" != e.charAt(1))
                    return;
                c += 2,
                u = ++d
            }
            for (; h(); ) {
                if (8 == d)
                    return;
                if (":" != h()) {
                    for (t = i = 0; i < 4 && Ir.test(h()); ) {
                        t = 16 * t + parseInt(h(), 16),
                        c++,
                        i++
                    }
                    if ("." == h()) {
                        if (0 == i)
                            return;
                        if (c -= i,
                        d > 6)
                            return;
                        for (n = 0; h(); ) {
                            if (r = null,
                            n > 0) {
                                if (!("." == h() && n < 4))
                                    return;
                                c++
                            }
                            if (!Pr.test(h()))
                                return;
                            for (; Pr.test(h()); ) {
                                if (s = parseInt(h(), 10),
                                null === r)
                                    r = s;
                                else {
                                    if (0 == r)
                                        return;
                                    r = 10 * r + s
                                }
                                if (r > 255)
                                    return;
                                c++
                            }
                            l[d] = 256 * l[d] + r,
                            2 != ++n && 4 != n || d++
                        }
                        if (4 != n)
                            return;
                        break
                    }
                    if (":" == h()) {
                        if (c++,
                        !h())
                            return
                    } else if (h())
                        return;
                    l[d++] = t
                } else {
                    if (null !== u)
                        return;
                    c++,
                    u = ++d
                }
            }
            if (null !== u)
                for (a = d - u,
                d = 7; 0 != d && a > 0; ) {
                    o = l[d],
                    l[d--] = l[u + a - 1],
                    l[u + --a] = o
                }
            else if (8 != d)
                return;
            return l
        }, Ur = function(e) {
            var t, i, n, r;
            if ("number" == typeof e) {
                for (t = [],
                i = 0; i < 4; i++) {
                    t.unshift(e % 256),
                    e = br(e / 256)
                }
                return t.join(".")
            }
            if ("object" == typeof e) {
                for (t = "",
                n = function(e) {
                    for (var t = null, i = 1, n = null, r = 0, s = 0; s < 8; s++) {
                        0 !== e[s] ? (r > i && (t = n,
                        i = r),
                        n = null,
                        r = 0) : (null === n && (n = s),
                        ++r)
                    }
                    return r > i && (t = n,
                    i = r),
                    t
                }(e),
                i = 0; i < 8; i++) {
                    r && 0 === e[i] || (r && (r = !1),
                    n === i ? (t += i ? ":" : "::",
                    r = !0) : (t += e[i].toString(16),
                    i < 7 && (t += ":")))
                }
                return "[" + t + "]"
            }
            return e
        }, Br = {}, Fr = mn({}, Br, {
            " ": 1,
            "\"": 1,
            "<": 1,
            ">": 1,
            "`": 1
        }), Vr = mn({}, Fr, {
            "#": 1,
            "?": 1,
            "{": 1,
            "}": 1
        }), Hr = mn({}, Vr, {
            "/": 1,
            ":": 1,
            ";": 1,
            "=": 1,
            "@": 1,
            "[": 1,
            "\\": 1,
            "]": 1,
            "^": 1,
            "|": 1
        }), jr = function(e, t) {
            var i = fr(e, 0);
            return i > 32 && i < 127 && !wt(t, e) ? e : encodeURIComponent(e)
        }, Wr = {
            ftp: 21,
            file: null,
            http: 80,
            https: 443,
            ws: 80,
            wss: 443
        }, Gr = function(e) {
            return wt(Wr, e.scheme)
        }, Kr = function(e) {
            return "" != e.username || "" != e.password
        }, zr = function(e) {
            return !e.host || e.cannotBeABaseURL || "file" == e.scheme
        }, qr = function(e, t) {
            var i;
            return 2 == e.length && Sr.test(e.charAt(0)) && (":" == (i = e.charAt(1)) || !t && "|" == i)
        }, Yr = function(e) {
            var t;
            return e.length > 1 && qr(e.slice(0, 2)) && (2 == e.length || "/" === (t = e.charAt(2)) || "\\" === t || "?" === t || "#" === t)
        }, Qr = function(e) {
            var t = e.path
              , i = t.length;
            !i || "file" == e.scheme && 1 == i && qr(t[0], !0) || t.pop()
        }, $r = function(e) {
            return "." === e || "%2e" === e.toLowerCase()
        }, Xr = {}, Jr = {}, Zr = {}, es = {}, ts = {}, is = {}, ns = {}, rs = {}, ss = {}, as = {}, os = {}, ls = {}, ds = {}, us = {}, cs = {}, hs = {}, ps = {}, _s = {}, fs = {}, gs = {}, ms = {}, ys = function(e, t, i, n) {
            var r, s, a, o, l, d = i || Xr, u = 0, c = "", h = !1, p = !1, _ = !1;
            for (i || (e.scheme = "",
            e.username = "",
            e.password = "",
            e.host = null,
            e.port = null,
            e.path = [],
            e.query = null,
            e.fragment = null,
            e.cannotBeABaseURL = !1,
            t = t.replace(/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g, "")),
            t = t.replace(/[\u0009\u000A\u000D]/g, ""),
            r = Dn(t); u <= r.length; ) {
                switch (s = r[u],
                d) {
                case Xr:
                    if (!s || !Sr.test(s)) {
                        if (i)
                            return "Invalid scheme";
                        d = Zr;
                        continue
                    }
                    c += s.toLowerCase(),
                    d = Jr;
                    break;
                case Jr:
                    if (s && (/[\d+\-.A-Za-z]/.test(s) || "+" == s || "-" == s || "." == s))
                        c += s.toLowerCase();
                    else {
                        if (":" != s) {
                            if (i)
                                return "Invalid scheme";
                            c = "",
                            d = Zr,
                            u = 0;
                            continue
                        }
                        if (i && (Gr(e) != wt(Wr, c) || "file" == c && (Kr(e) || null !== e.port) || "file" == e.scheme && !e.host))
                            return;
                        if (e.scheme = c,
                        i)
                            return void (Gr(e) && Wr[e.scheme] == e.port && (e.port = null));
                        c = "",
                        "file" == e.scheme ? d = us : Gr(e) && n && n.scheme == e.scheme ? d = es : Gr(e) ? d = rs : "/" == r[u + 1] ? (d = ts,
                        u++) : (e.cannotBeABaseURL = !0,
                        e.path.push(""),
                        d = fs)
                    }
                    break;
                case Zr:
                    if (!n || n.cannotBeABaseURL && "#" != s)
                        return "Invalid scheme";
                    if (n.cannotBeABaseURL && "#" == s) {
                        e.scheme = n.scheme,
                        e.path = n.path.slice(),
                        e.query = n.query,
                        e.fragment = "",
                        e.cannotBeABaseURL = !0,
                        d = ms;
                        break
                    }
                    d = "file" == n.scheme ? us : is;
                    continue;
                case es:
                    if ("/" != s || "/" != r[u + 1]) {
                        d = is;
                        continue
                    }
                    d = ss,
                    u++;
                    break;
                case ts:
                    if ("/" == s) {
                        d = as;
                        break
                    }
                    d = _s;
                    continue;
                case is:
                    if (e.scheme = n.scheme,
                    s == pr)
                        e.username = n.username,
                        e.password = n.password,
                        e.host = n.host,
                        e.port = n.port,
                        e.path = n.path.slice(),
                        e.query = n.query;
                    else if ("/" == s || "\\" == s && Gr(e))
                        d = ns;
                    else if ("?" == s)
                        e.username = n.username,
                        e.password = n.password,
                        e.host = n.host,
                        e.port = n.port,
                        e.path = n.path.slice(),
                        e.query = "",
                        d = gs;
                    else {
                        if ("#" != s) {
                            e.username = n.username,
                            e.password = n.password,
                            e.host = n.host,
                            e.port = n.port,
                            e.path = n.path.slice(),
                            e.path.pop(),
                            d = _s;
                            continue
                        }
                        e.username = n.username,
                        e.password = n.password,
                        e.host = n.host,
                        e.port = n.port,
                        e.path = n.path.slice(),
                        e.query = n.query,
                        e.fragment = "",
                        d = ms
                    }
                    break;
                case ns:
                    if (!Gr(e) || "/" != s && "\\" != s) {
                        if ("/" != s) {
                            e.username = n.username,
                            e.password = n.password,
                            e.host = n.host,
                            e.port = n.port,
                            d = _s;
                            continue
                        }
                        d = as
                    } else
                        d = ss;
                    break;
                case rs:
                    if (d = ss,
                    "/" != s || "/" != c.charAt(u + 1))
                        continue;
                    u++;
                    break;
                case ss:
                    if ("/" != s && "\\" != s) {
                        d = as;
                        continue
                    }
                    break;
                case as:
                    if ("@" == s) {
                        h && (c = "%40" + c),
                        h = !0,
                        a = Dn(c);
                        for (var f = 0; f < a.length; f++) {
                            var g = a[f];
                            if (":" != g || _) {
                                var m = jr(g, Hr);
                                _ ? e.password += m : e.username += m
                            } else
                                _ = !0
                        }
                        c = ""
                    } else if (s == pr || "/" == s || "?" == s || "#" == s || "\\" == s && Gr(e)) {
                        if (h && "" == c)
                            return "Invalid authority";
                        u -= Dn(c).length + 1,
                        c = "",
                        d = os
                    } else
                        c += s;
                    break;
                case os:
                case ls:
                    if (i && "file" == e.scheme) {
                        d = hs;
                        continue
                    }
                    if (":" != s || p) {
                        if (s == pr || "/" == s || "?" == s || "#" == s || "\\" == s && Gr(e)) {
                            if (Gr(e) && "" == c)
                                return "Invalid host";
                            if (i && "" == c && (Kr(e) || null !== e.port))
                                return;
                            if (o = Or(e, c))
                                return o;
                            if (c = "",
                            d = ps,
                            i)
                                return;
                            continue
                        }
                        "[" == s ? p = !0 : "]" == s && (p = !1),
                        c += s
                    } else {
                        if ("" == c)
                            return "Invalid host";
                        if (o = Or(e, c))
                            return o;
                        if (c = "",
                        d = ds,
                        i == ls)
                            return
                    }
                    break;
                case ds:
                    if (!Pr.test(s)) {
                        if (s == pr || "/" == s || "?" == s || "#" == s || "\\" == s && Gr(e) || i) {
                            if ("" != c) {
                                var y = parseInt(c, 10);
                                if (y > 65535)
                                    return "Invalid port";
                                e.port = Gr(e) && y === Wr[e.scheme] ? null : y,
                                c = ""
                            }
                            if (i)
                                return;
                            d = ps;
                            continue
                        }
                        return "Invalid port"
                    }
                    c += s;
                    break;
                case us:
                    if (e.scheme = "file",
                    "/" == s || "\\" == s)
                        d = cs;
                    else {
                        if (!n || "file" != n.scheme) {
                            d = _s;
                            continue
                        }
                        if (s == pr)
                            e.host = n.host,
                            e.path = n.path.slice(),
                            e.query = n.query;
                        else if ("?" == s)
                            e.host = n.host,
                            e.path = n.path.slice(),
                            e.query = "",
                            d = gs;
                        else {
                            if ("#" != s) {
                                Yr(r.slice(u).join("")) || (e.host = n.host,
                                e.path = n.path.slice(),
                                Qr(e)),
                                d = _s;
                                continue
                            }
                            e.host = n.host,
                            e.path = n.path.slice(),
                            e.query = n.query,
                            e.fragment = "",
                            d = ms
                        }
                    }
                    break;
                case cs:
                    if ("/" == s || "\\" == s) {
                        d = hs;
                        break
                    }
                    n && "file" == n.scheme && !Yr(r.slice(u).join("")) && (qr(n.path[0], !0) ? e.path.push(n.path[0]) : e.host = n.host),
                    d = _s;
                    continue;
                case hs:
                    if (s == pr || "/" == s || "\\" == s || "?" == s || "#" == s) {
                        if (!i && qr(c))
                            d = _s;
                        else if ("" == c) {
                            if (e.host = "",
                            i)
                                return;
                            d = ps
                        } else {
                            if (o = Or(e, c))
                                return o;
                            if ("localhost" == e.host && (e.host = ""),
                            i)
                                return;
                            c = "",
                            d = ps
                        }
                        continue
                    }
                    c += s;
                    break;
                case ps:
                    if (Gr(e)) {
                        if (d = _s,
                        "/" != s && "\\" != s)
                            continue
                    } else if (i || "?" != s) {
                        if (i || "#" != s) {
                            if (s != pr && (d = _s,
                            "/" != s))
                                continue
                        } else
                            e.fragment = "",
                            d = ms;
                    } else
                        e.query = "",
                        d = gs;
                    break;
                case _s:
                    if (s == pr || "/" == s || "\\" == s && Gr(e) || !i && ("?" == s || "#" == s)) {
                        if (".." === (l = (l = c).toLowerCase()) || "%2e." === l || ".%2e" === l || "%2e%2e" === l ? (Qr(e),
                        "/" == s || "\\" == s && Gr(e) || e.path.push("")) : $r(c) ? "/" == s || "\\" == s && Gr(e) || e.path.push("") : ("file" == e.scheme && !e.path.length && qr(c) && (e.host && (e.host = ""),
                        c = c.charAt(0) + ":"),
                        e.path.push(c)),
                        c = "",
                        "file" == e.scheme && (s == pr || "?" == s || "#" == s))
                            for (; e.path.length > 1 && "" === e.path[0]; ) {
                                e.path.shift()
                            }
                        "?" == s ? (e.query = "",
                        d = gs) : "#" == s && (e.fragment = "",
                        d = ms)
                    } else
                        c += jr(s, Vr);
                    break;
                case fs:
                    "?" == s ? (e.query = "",
                    d = gs) : "#" == s ? (e.fragment = "",
                    d = ms) : s != pr && (e.path[0] += jr(s, Br));
                    break;
                case gs:
                    i || "#" != s ? s != pr && ("'" == s && Gr(e) ? e.query += "%27" : e.query += "#" == s ? "%23" : jr(s, Br)) : (e.fragment = "",
                    d = ms);
                    break;
                case ms:
                    s != pr && (e.fragment += jr(s, Fr));
                }
                u++
            }
        }, vs = function(e) {
            var t, i, n = _n(this, vs, "URL"), r = arguments.length > 1 ? arguments[1] : void 0, s = String(e), a = vr(n, {
                type: "URL"
            });
            if (void 0 !== r)
                if (r instanceof vs)
                    t = Er(r);
                else if (i = ys(t = {}, String(r)))
                    throw TypeError(i);
            if (i = ys(a, s, null, t))
                throw TypeError(i);
            var o = a.searchParams = new mr
              , l = yr(o);
            l.updateSearchParams(a.query),
            l.updateURL = function() {
                a.query = String(o) || null
            }
            ,
            rt || (n.href = bs.call(n),
            n.origin = Ts.call(n),
            n.protocol = Ss.call(n),
            n.username = As.call(n),
            n.password = Ps.call(n),
            n.host = ws.call(n),
            n.hostname = ks.call(n),
            n.port = Cs.call(n),
            n.pathname = Is.call(n),
            n.search = Rs.call(n),
            n.searchParams = Ds.call(n),
            n.hash = Ls.call(n))
        }, Es = vs.prototype, bs = function() {
            var e = Er(this)
              , t = e.scheme
              , i = e.username
              , n = e.password
              , r = e.host
              , s = e.port
              , a = e.path
              , o = e.query
              , l = e.fragment
              , d = t + ":";
            return null !== r ? (d += "//",
            Kr(e) && (d += i + (n ? ":" + n : "") + "@"),
            d += Ur(r),
            null !== s && (d += ":" + s)) : "file" == t && (d += "//"),
            d += e.cannotBeABaseURL ? a[0] : a.length ? "/" + a.join("/") : "",
            null !== o && (d += "?" + o),
            null !== l && (d += "#" + l),
            d
        }, Ts = function() {
            var e = Er(this)
              , t = e.scheme
              , i = e.port;
            if ("blob" == t)
                try {
                    return new URL(t.path[0]).origin
                } catch (e) {
                    return "null"
                }
            return "file" != t && Gr(e) ? t + "://" + Ur(e.host) + (null !== i ? ":" + i : "") : "null"
        }, Ss = function() {
            return Er(this).scheme + ":"
        }, As = function() {
            return Er(this).username
        }, Ps = function() {
            return Er(this).password
        }, ws = function() {
            var e = Er(this)
              , t = e.host
              , i = e.port;
            return null === t ? "" : null === i ? Ur(t) : Ur(t) + ":" + i
        }, ks = function() {
            var e = Er(this).host;
            return null === e ? "" : Ur(e)
        }, Cs = function() {
            var e = Er(this).port;
            return null === e ? "" : String(e)
        }, Is = function() {
            var e = Er(this)
              , t = e.path;
            return e.cannotBeABaseURL ? t[0] : t.length ? "/" + t.join("/") : ""
        }, Rs = function() {
            var e = Er(this).query;
            return e ? "?" + e : ""
        }, Ds = function() {
            return Er(this).searchParams
        }, Ls = function() {
            var e = Er(this).fragment;
            return e ? "#" + e : ""
        }, Ms = function(e, t) {
            return {
                get: e,
                set: t,
                configurable: !0,
                enumerable: !0
            }
        };
        if (rt && ji(Es, {
            href: Ms(bs, function(e) {
                var t = Er(this)
                  , i = String(e)
                  , n = ys(t, i);
                if (n)
                    throw TypeError(n);
                yr(t.searchParams).updateSearchParams(t.query)
            }),
            origin: Ms(Ts),
            protocol: Ms(Ss, function(e) {
                var t = Er(this);
                ys(t, String(e) + ":", Xr)
            }),
            username: Ms(As, function(e) {
                var t = Er(this)
                  , i = Dn(String(e));
                if (!zr(t)) {
                    t.username = "";
                    for (var n = 0; n < i.length; n++) {
                        t.username += jr(i[n], Hr)
                    }
                }
            }),
            password: Ms(Ps, function(e) {
                var t = Er(this)
                  , i = Dn(String(e));
                if (!zr(t)) {
                    t.password = "";
                    for (var n = 0; n < i.length; n++) {
                        t.password += jr(i[n], Hr)
                    }
                }
            }),
            host: Ms(ws, function(e) {
                var t = Er(this);
                t.cannotBeABaseURL || ys(t, String(e), os)
            }),
            hostname: Ms(ks, function(e) {
                var t = Er(this);
                t.cannotBeABaseURL || ys(t, String(e), ls)
            }),
            port: Ms(Cs, function(e) {
                var t = Er(this);
                zr(t) || ("" == (e = String(e)) ? t.port = null : ys(t, e, ds))
            }),
            pathname: Ms(Is, function(e) {
                var t = Er(this);
                t.cannotBeABaseURL || (t.path = [],
                ys(t, e + "", ps))
            }),
            search: Ms(Rs, function(e) {
                var t = Er(this);
                "" == (e = String(e)) ? t.query = null : ("?" == e.charAt(0) && (e = e.slice(1)),
                t.query = "",
                ys(t, e, gs)),
                yr(t.searchParams).updateSearchParams(t.query)
            }),
            searchParams: Ms(Ds),
            hash: Ms(Ls, function(e) {
                var t = Er(this);
                "" != (e = String(e)) ? ("#" == e.charAt(0) && (e = e.slice(1)),
                t.fragment = "",
                ys(t, e, ms)) : t.fragment = null
            })
        }),
        ei(Es, "toJSON", function() {
            return bs.call(this)
        }, {
            enumerable: !0
        }),
        ei(Es, "toString", function() {
            return bs.call(this)
        }, {
            enumerable: !0
        }),
        gr) {
            var Os = gr.createObjectURL
              , xs = gr.revokeObjectURL;
            Os && ei(vs, "createObjectURL", function() {
                return Os.apply(gr, arguments)
            }),
            xs && ei(vs, "revokeObjectURL", function() {
                return xs.apply(gr, arguments)
            })
        }
        Xi(vs, "URL"),
        Pi({
            global: !0,
            forced: !pn,
            sham: !rt
        }, {
            URL: vs
        }),
        Pi({
            target: "URL",
            proto: !0,
            enumerable: !0
        }, {
            toJSON: function toJSON() {
                return URL.prototype.toString.call(this)
            }
        });
        var Ns = ti.URL
          , Us = [2e3, 4e3, 8e3]
          , Bs = function(e, t, i) {
            this._parent = e,
            this._videoTag = t,
            this._configs = i || {},
            this._timer = -1,
            this._lastActivePeriod = null,
            this._startTime = -1,
            this._isPlaying = !1,
            this.checkPeriodChange = this.checkPeriodChange.bind(this),
            this.onPlaying = this.onPlaying.bind(this),
            this.onPause = this.onPause.bind(this),
            this.onLoadedMetadata = this.onLoadedMetadata.bind(this),
            this.onLoadedData = this.onLoadedData.bind(this),
            this.setPreferredAudioTrack = this.setPreferredAudioTrack.bind(this),
            this.setPreferredVideoTrack = this.setPreferredVideoTrack.bind(this),
            this._audioTracks = new Ve,
            this._videoTracks = new He,
            this._avTrackManager = new Ke(this._audioTracks,this._videoTracks)
        }
          , Fs = {
            manifest: {
                configurable: !0
            },
            isDynamic: {
                configurable: !0
            },
            seekable: {
                configurable: !0
            },
            startDate: {
                configurable: !0
            },
            currentTime: {
                configurable: !0
            },
            audioTracks: {
                configurable: !0
            },
            videoTracks: {
                configurable: !0
            }
        };
        Bs.prototype.start = function(e) {
            var t = this;
            this.stop(),
            this._masterM3U8Url = e,
            this._cdn = new Ns(e).searchParams.get("cdn"),
            this._cts = new N;
            var i = this._cts.token
              , n = {
                timeoutMs: null != this._configs.playbackRequestTimeout ? this._configs.playbackRequestTimeout : 1e4,
                retryCount: null != this._configs.playbackRequestRetries ? this._configs.playbackRequestRetries : 3,
                cancellationToken: i,
                retryDelays: Us
            };
            Bs._fetchM3U8(this._masterM3U8Url, n).then(function(e) {
                return i.isCancellationRequested ? R.pending() : (t._masterM3U8 = e,
                t._avTrackManager.m3u8 = e,
                t._avTrackManager.clear(),
                t._mediaM3U8Url = t._masterM3U8.getMediaPlaylistLink(0, t._masterM3U8Url),
                Bs._fetchM3U8(t._mediaM3U8Url, n))
            }).then(function(e) {
                if (i.isCancellationRequested)
                    return R.pending();
                t._onMediaPlaylistLoaded(e)
            }),
            this.toggleBindEvents()
        }
        ,
        Fs.manifest.get = function() {
            return this._mediaM3U8.getUnifiedLevel3Manifest(this._videoTag.currentTime)
        }
        ,
        Fs.isDynamic.get = function() {
            return this._videoTag.duration == 1 / 0
        }
        ,
        Fs.seekable.get = function() {
            if (this.isDynamic) {
                var e = this._videoTag.getStartDate().getTime() / 1e3;
                return new Ie(this._videoTag.seekable,e)
            }
            return this._videoTag.seekable
        }
        ,
        Fs.startDate.get = function() {
            if (this.isDynamic)
                return new Date(0);
            var e = this._videoTag.getStartDate();
            return e && isFinite(e) ? e : new Date(0)
        }
        ,
        Fs.currentTime.get = function() {
            return this.isDynamic ? this._videoTag.currentTime + this._videoTag.getStartDate().getTime() / 1e3 : this._videoTag.currentTime
        }
        ,
        Fs.currentTime.set = function(e) {
            this._videoTag.readyState < 1 ? this._startTime = e : this._videoTag.currentTime = e > 1e6 ? e - this._videoTag.getStartDate() / 1e3 : e
        }
        ,
        Bs.prototype.setPreferredAudioTrack = function(e, t) {
            this._avTrackManager.selectAudioTrack(e, t),
            this._selectPreferredAudio()
        }
        ,
        Bs.prototype.setPreferredVideoTrack = function(e, t) {
            this._avTrackManager.selectVideoTrack(e, t),
            this._selectPreferredAudio()
        }
        ,
        Bs.prototype.onPlaying = function() {
            if (this._isPlaying = !0,
            this._startTime >= 0) {
                var e = this._startTime;
                this._startTime = -1,
                this.currentTime = e
            }
        }
        ,
        Bs.prototype.onLoadedMetadata = function() {
            this._sendCdnChangeEvent()
        }
        ,
        Bs.prototype.onLoadedData = function() {
            this._selectPreferredAudio(),
            this._selectPreferredVideo()
        }
        ,
        Bs.prototype._selectPreferredAudio = function() {
            var e = Ke.getPreferredTracks(this._audioTracks, this._avTrackManager.audioPreference);
            e && !e.selected && (e.selected = !0)
        }
        ,
        Bs.prototype._selectPreferredVideo = function() {
            var e = Ke.getPreferredTracks(this._videoTracks, this._avTrackManager.videoPreference);
            e && !e.selected && (e.selected = !0)
        }
        ,
        Bs.prototype._sendCdnChangeEvent = function() {
            var e = {
                reason: "",
                presentationTime: this.currentTime,
                previous: "",
                current: this._cdn || ""
            };
            this._parent.onCdnChange({
                detail: Object.assign({}, {
                    dataType: "video"
                }, e),
                target: this._parent
            }),
            this._parent.onCdnChange({
                detail: Object.assign({}, {
                    dataType: "audio"
                }, e),
                target: this._parent
            })
        }
        ,
        Bs.prototype.onPause = function() {
            this._isPlaying = !1
        }
        ,
        Bs.prototype._onMediaPlaylistLoaded = function(e) {
            var t = this;
            this._mediaM3U8 = e;
            var i = {
                manifest: this.manifest
            };
            if (this._parent.onManifestChange({
                detail: i,
                target: this._parent
            }),
            this.checkPeriodChange(),
            this._mediaM3U8.isDynamic) {
                clearTimeout(this._timer);
                var n = this._cts.token;
                this._timer = setTimeout(function() {
                    Bs._fetchM3U8(t._mediaM3U8Url, {
                        retryCount: 1,
                        cancellationToken: n
                    }).then(function(e) {
                        if (n.isCancellationRequested)
                            return R.pending();
                        t._onMediaPlaylistLoaded(e)
                    })
                }, 4e3)
            }
        }
        ,
        Fs.audioTracks.get = function() {
            return this._audioTracks
        }
        ,
        Fs.videoTracks.get = function() {
            return this._videoTracks
        }
        ,
        Bs.prototype.stop = function() {
            this._masterM3U8 = null,
            this._mediaM3U8 = null,
            this._cdn = null,
            this._lastActivePeriod = null,
            this._startTime = -1,
            this._isPlaying = !1,
            clearTimeout(this._timer),
            this._cts && (this._cts.cancel(),
            this._cts = null),
            this.toggleBindEvents(!0)
        }
        ,
        Bs.prototype.checkPeriodChange = function() {
            if (this._isPlaying && this._mediaM3U8) {
                var e = this._mediaM3U8.getActivePeriod(this._videoTag.currentTime);
                if (e && (!this._lastActivePeriod || e.id != this._lastActivePeriod.id)) {
                    if (this._lastActivePeriod) {
                        var t = {
                            cue: {
                                assetIdentifier: this._lastActivePeriod.assetIdentifier
                            }
                        };
                        this._parent.onPeriodExit({
                            detail: t,
                            target: this._parent
                        })
                    }
                    var i = {
                        cue: {
                            assetIdentifier: e.assetIdentifier
                        }
                    };
                    this._parent.onPeriodEnter({
                        detail: i,
                        target: this._parent
                    }),
                    this._lastActivePeriod = e
                }
            }
        }
        ,
        Bs.prototype.toggleBindEvents = function(e) {
            var t = this._videoTag.audioTracks
              , i = this._videoTag.videoTracks
              , n = e ? "removeEventListener" : "addEventListener";
            this._videoTag[n](q.Player.TIME_UPDATE, this.checkPeriodChange),
            this._videoTag[n](q.Player.PLAYING, this.onPlaying),
            this._videoTag[n](q.Player.LOADED_METADATA, this.onLoadedMetadata),
            this._videoTag[n](q.Player.LOADED_DATA, this.onLoadedData),
            this._videoTag[n](q.Player.PAUSE, this.onPause),
            this._avTrackManager.toggleAVTrackEvents(t, i, e)
        }
        ,
        Bs._fetchM3U8 = function(e, t) {
            return Z(e, {}, Object.assign({}, t, {
                responseType: "text"
            })).then(function(e) {
                return e.assertOK().text()
            }).then(function(e) {
                return new Ne(e)
            })
        }
        ,
        Object.defineProperties(Bs.prototype, Fs);
        var Vs = function e(t, i) {
            this._style = {},
            this._track = null,
            this._onAddTrack = this._onAddTrack.bind(this),
            this._onCueChange = this._onCueChange.bind(this),
            this._player = t,
            this._player.textTracks.addEventListener(q.Track.ADD_TRACK, this._onAddTrack),
            this.mode = i || e.SIMPLE_MODE
        }
          , Hs = {
            area: {
                configurable: !0
            },
            mode: {
                configurable: !0
            },
            style: {
                configurable: !0
            }
        };
        Hs.area.get = function() {
            return this._area
        }
        ,
        Hs.area.set = function(e) {
            this._area != e && (this._area && (this._area.innerHTML = ""),
            this._area = e,
            this._area && (this._area.innerHTML = ""),
            this._createLayout())
        }
        ,
        Hs.mode.get = function() {
            return this._mode
        }
        ,
        Hs.mode.set = function(e) {
            this._mode != e && (this._mode = e,
            this._createLayout())
        }
        ,
        Hs.style.get = function() {
            return this._style
        }
        ,
        Hs.style.set = function(e) {
            this._style = Object.assign({}, e),
            this.refresh()
        }
        ,
        Vs.prototype._createLayout = function() {
            null == this._area ? this._layout = null : this._mode == Vs.VTT_MODE ? this._area.innerHTML = "" : (this._area.innerHTML = "",
            this._layout = new js(this),
            this.refresh())
        }
        ,
        Vs.prototype.refresh = function() {
            this._render(this._track && this._track.activeCues)
        }
        ,
        Vs.prototype.clear = function() {
            this._render()
        }
        ,
        Vs.prototype._onAddTrack = function(e) {
            var t = e.track;
            t && "captions" == t.kind && (t.mode = "hidden",
            this._track && this._track.removeEventListener(q.Track.CUE_CHANGE, this._onCueChange),
            this._track = t,
            this._track.addEventListener(q.Track.CUE_CHANGE, this._onCueChange))
        }
        ,
        Vs.prototype._render = function(e) {
            this._track && this._layout && this._layout.render(e)
        }
        ,
        Vs.prototype._onCueChange = function() {
            this._render(this._track && this._track.activeCues)
        }
        ,
        Vs.prototype.dispose = function() {
            this._area && (this._area.innerHTML = ""),
            this._player.removeEventListener(q.Track.ADD_TRACK, this._onAddTrack),
            this._track && this._track.removeEventListener(q.Track.CUE_CHANGE, this._onCueChange)
        }
        ,
        Object.defineProperties(Vs.prototype, Hs);
        var js = function(e) {
            this._parent = e;
            var t = this._screen = document.createElement("div");
            e.area.appendChild(t),
            t.style.setProperty("width", "100%"),
            t.style.setProperty("height", "100%"),
            t.style.setProperty("display", "flex"),
            t.style.setProperty("align-items", "flex-start"),
            t.style.setProperty("flex-direction", "column"),
            t.style.setProperty("justify-content", "flex-end")
        };
        js.prototype.render = function(e) {
            if (this._screen.innerHTML = "",
            null != e) {
                for (var t = [], i = 0; i < e.length; ++i) {
                    var n = e[i];
                    t.push(n.text.replace(/(<([^>]+)>)/gi, ""))
                }
                if (0 != t.length)
                    for (var r = 0; r < t.length; ++r) {
                        this._renderLine(t[r])
                    }
            }
        }
        ,
        js.prototype._renderLine = function(e) {
            var t = document.createElement("div");
            this._screen.appendChild(t),
            t.textContent = e,
            t.style.setProperty("padding", "0 1%"),
            t.style.setProperty("line-height", String(1.2));
            for (var i = 0, n = Object.keys(this._parent.style); i < n.length; i += 1) {
                var r = n[i];
                t.style.setProperty(r, this._parent.style[r])
            }
        }
        ,
        Vs.VTT_MODE = "vtt",
        Vs.SIMPLE_MODE = "simple";
        var Ws = function(e) {
            function t(t) {
                e.call(this, t),
                this.name = "MediaPlayer",
                this.onSeekableChange = this.onSeekableChange.bind(this),
                this.onTextTrackAdd = this.onTextTrackAdd.bind(this),
                this.onEMEError = this.onEMEError.bind(this),
                this._initProps()
            }
            e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t;
            var i = {
                currentSrc: {
                    configurable: !0
                },
                initialTime: {
                    configurable: !0
                },
                muted: {
                    configurable: !0
                },
                paused: {
                    configurable: !0
                },
                seeking: {
                    configurable: !0
                },
                ended: {
                    configurable: !0
                },
                volume: {
                    configurable: !0
                },
                currentTime: {
                    configurable: !0
                },
                duration: {
                    configurable: !0
                },
                buffered: {
                    configurable: !0
                },
                played: {
                    configurable: !0
                },
                readyState: {
                    configurable: !0
                },
                networkState: {
                    configurable: !0
                },
                seekable: {
                    configurable: !0
                },
                startDate: {
                    configurable: !0
                },
                textTracks: {
                    configurable: !0
                },
                liveEdge: {
                    configurable: !0
                },
                error: {
                    configurable: !0
                },
                bufferingState: {
                    configurable: !0
                },
                playbackRate: {
                    configurable: !0
                },
                audioTracks: {
                    configurable: !0
                },
                videoTracks: {
                    configurable: !0
                },
                manifest: {
                    configurable: !0
                }
            };
            return t.prototype._initProps = function() {
                this._initialTime = void 0,
                this._paused = !0,
                this._volume = 1,
                this._seekableEnd = 0,
                this._EMEHandler = void 0,
                this._EMESessionOpenend = !1,
                this._emeError = null
            }
            ,
            t.prototype._createEME = function() {
                null == this._target.__EMEHandler__ && (this._target.__EMEHandler__ = new Ce(this._target),
                this._target.__EMEHandler__.setEnabledKeySystems("default")),
                this._EMEHandler = this._target.__EMEHandler__
            }
            ,
            t.prototype._toggleBindEvent = function(t) {
                var i = t ? "removeEventListener" : "addEventListener";
                this._eventTarget[i](c.LOAD_START, this.onSeekableChange),
                this._eventTarget[i](c.PROGRESS, this.onSeekableChange),
                this._eventTarget[i](c.SUSPEND, this.onSeekableChange),
                this._eventTarget[i](c.DURATION_CHANGE, this.onSeekableChange),
                this._toggleBindEMEEvent(t),
                this._toggleBindTextTrackEvent(t),
                e.prototype._toggleBindEvent.call(this, t)
            }
            ,
            t.prototype._toggleBindEMEEvent = function(e) {
                if (this._EMEHandler) {
                    var t = e ? "removeEventListener" : "addEventListener";
                    this._EMEHandler[t](q.EME.ERROR, this.onEMEError)
                }
            }
            ,
            t.prototype._toggleBindTextTrackEvent = function(e) {
                var t = e ? "removeEventListener" : "addEventListener";
                this.textTracks[t](q.Track.ADD_TRACK, this.onTextTrackAdd)
            }
            ,
            i.currentSrc.get = function() {
                return this._target.currentSrc
            }
            ,
            i.initialTime.get = function() {
                return this._initialTime
            }
            ,
            i.muted.get = function() {
                return this._target.muted || 0 === this._target.volume
            }
            ,
            i.paused.get = function() {
                return this._paused
            }
            ,
            i.seeking.get = function() {
                return this._target.seeking
            }
            ,
            i.ended.get = function() {
                return "Infinity" != this._target.duration && this._target.currentTime >= this._target.duration
            }
            ,
            i.volume.get = function() {
                return this._target.volume
            }
            ,
            i.volume.set = function(e) {
                e = e > 0 ? Math.min(e, 1) : 0,
                this._target.volume = e,
                this._volume = e
            }
            ,
            i.currentTime.get = function() {
                return this._hlsLevel3Adapter ? this._hlsLevel3Adapter.currentTime : this._target.currentTime
            }
            ,
            i.currentTime.set = function(e) {
                this._hlsLevel3Adapter ? this._hlsLevel3Adapter.currentTime = e : this._target.currentTime = e
            }
            ,
            i.duration.get = function() {
                return this._target.duration
            }
            ,
            i.buffered.get = function() {
                return this._target.buffered
            }
            ,
            i.played.get = function() {
                return this._target.played
            }
            ,
            i.readyState.get = function() {
                return this._target.readyState
            }
            ,
            i.networkState.get = function() {
                return this._target.networkState
            }
            ,
            i.seekable.get = function() {
                return this._hlsLevel3Adapter ? this._hlsLevel3Adapter.seekable : this._target.seekable
            }
            ,
            i.startDate.get = function() {
                return this._hlsLevel3Adapter ? this._hlsLevel3Adapter.startDate : new Date(0)
            }
            ,
            i.startDate.set = function() {}
            ,
            i.textTracks.get = function() {
                return this._target.textTracks
            }
            ,
            i.liveEdge.get = function() {
                var e = NaN;
                try {
                    e = this.seekable.end(0)
                } catch (e) {}
                return e
            }
            ,
            i.error.get = function() {
                var e = this._target.error;
                if (e) {
                    var t = null;
                    switch (e.code) {
                    case MediaError.MEDIA_ERR_ABORTED:
                        t = Y.MEDIA_ABORTED_ERROR;
                        break;
                    case MediaError.MEDIA_ERR_DECODE:
                        t = Y.MEDIA_DECODE_ERROR;
                        break;
                    case MediaError.MEDIA_ERR_ENCRYPTED:
                        t = Y.MEDIA_ENCRYPTED_ERROR;
                        break;
                    case MediaError.MEDIA_ERR_NETWORK:
                        t = Y.MEDIA_NETWORK_ERROR;
                        break;
                    case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:
                        t = Y.MEDIA_SRC_NOT_SUPPORTED_ERROR;
                    }
                    if (t)
                        return {
                            type: t,
                            params: {
                                type: t
                            }
                        }
                }
                return this._emeError ? this._emeError : null
            }
            ,
            i.bufferingState.get = function() {
                return null
            }
            ,
            i.playbackRate.get = function() {
                return this._target.playbackRate
            }
            ,
            i.playbackRate.set = function(e) {
                this._target.playbackRate = e
            }
            ,
            i.audioTracks.get = function() {
                return this._hlsLevel3Adapter ? this._hlsLevel3Adapter.audioTracks : {
                    length: 0
                }
            }
            ,
            i.videoTracks.get = function() {
                return this._hlsLevel3Adapter ? this._hlsLevel3Adapter.videoTracks : {
                    length: 0
                }
            }
            ,
            t.prototype.onTextTrackAdd = function(e) {
                var t = e.track;
                t && ("captions" == t.kind && (t.mode = "hidden"),
                "subtitles" == t.kind && (t.mode = "disabled",
                setTimeout(function() {
                    return t.mode = "disabled"
                }, 1)))
            }
            ,
            t.prototype.onEMEError = function(e) {
                this._emeError = e.detail,
                this._emeError.params.errorMessage = this._emeError.toString(),
                this._emeError.params.type = this._emeError.type,
                this.onError(e)
            }
            ,
            t.prototype.onSeekableChange = function() {
                var t = !1;
                try {
                    t = this._seekableEnd != this.seekable.end(0),
                    this._seekableEnd = this.seekable.end(0)
                } catch (e) {}
                t && e.prototype.onSeekableChange.call(this, {
                    detail: this.seekable,
                    target: this._target
                })
            }
            ,
            t.prototype.openEMESession = function(e) {
                this._EMESessionOpenend || (this._EMESessionOpenend = !0,
                this._EMEHandler.onAttachMediaElement(),
                this._EMEHandler.setConfig(this._configs),
                this._EMEHandler.openSession(null, e))
            }
            ,
            t.prototype.closeEMESession = function() {
                this._EMESessionOpenend && (this._EMESessionOpenend = !1,
                this._EMEHandler.onDetachMediaElement(),
                this._EMEHandler.closeSession())
            }
            ,
            t.prototype.load = function(e) {
                this.stop(),
                this._initProps(),
                this._configs = e || {},
                this._initialTime = e.initialTime,
                this._target.autoplay = !!this._configs.autoplay,
                this._paused = !this._target.autoplay,
                this._configs.license && this._configs.license.fairplay && (this._EMEHandler || (this._createEME(),
                this._toggleBindEMEEvent()),
                this.openEMESession({
                    fairplay: this._configs.license.fairplay
                })),
                this._configs.content.type == g.HLS && (this._hlsLevel3Adapter = new Bs(this,this._target,this._configs),
                this._hlsLevel3Adapter.start(this._configs.content.src)),
                this._target.src = this._configs.content.src,
                void 0 !== this._initialTime && null !== this._initialTime && this.seek(this._initialTime)
            }
            ,
            t.prototype.play = function() {
                var e = this;
                this._paused = !1;
                var t = this._target.play();
                void 0 !== t && t.catch(function(t) {
                    !t || "NotAllowedError" != t.name && "AbortError" != t.name || e.pause()
                })
            }
            ,
            t.prototype.pause = function() {
                this._paused = !0,
                this._target.pause()
            }
            ,
            t.prototype.stop = function() {
                this.closeEMESession(),
                this._emeError = null,
                this._configs && this._configs.content && this._configs.content.type == g.HLS && this._hlsLevel3Adapter.stop(),
                this.pause(),
                this._target.removeAttribute("src"),
                this._target.load()
            }
            ,
            t.prototype.mute = function() {
                this._volume = this._target.volume,
                this._target.volume = 0
            }
            ,
            t.prototype.unmute = function() {
                this._target.volume = this._volume
            }
            ,
            t.prototype.seek = function(e) {
                this.currentTime = e
            }
            ,
            t.prototype.renderCaptions = function(e, t) {
                return this._vttRenderer || (this._vttRenderer = new Vs(this)),
                this._vttRenderer.area = e,
                this._vttRenderer.mode = t ? Vs.SIMPLE_MODE : Vs.VTT_MODE,
                this._vttRenderer
            }
            ,
            t.prototype.getVideoPlaybackQuality = function() {
                return "function" == typeof this._target.getVideoPlaybackQuality ? this._target.getVideoPlaybackQuality() : {
                    creationTime: performance.now(),
                    totalVideoFrames: this._target.webkitDecodedFrameCount || 0,
                    droppedVideoFrames: this._target.webkitDroppedFrameCount || 0
                }
            }
            ,
            t.prototype.setPreferredAudioTrack = function(e, t) {
                return this._hlsLevel3Adapter.setPreferredAudioTrack(e, t)
            }
            ,
            t.prototype.setPreferredVideoTrack = function(e, t) {
                return this._hlsLevel3Adapter.setPreferredVideoTrack(e, t)
            }
            ,
            i.manifest.get = function() {
                return this._configs && this._configs.content && this._configs.content.type == g.HLS ? this._hlsLevel3Adapter.manifest : null
            }
            ,
            Object.defineProperties(t.prototype, i),
            t
        }(D)
          , Gs = function() {
            this.length = 0
        }
          , Ks = {
            selectedIndex: {
                configurable: !0
            }
        };
        Ks.selectedIndex.get = function() {
            return Array.prototype.findIndex.call(this, function(e) {
                return e.selected
            })
        }
        ,
        Gs.prototype.getTrackById = function(e) {
            return Array.prototype.find.call(this, function(t) {
                return t.id == e
            })
        }
        ,
        Gs.prototype.selectTrackById = function(e) {
            return Array.prototype.forEach.call(this, function(t) {
                return t.updateSelectedValue(t.id == e)
            })
        }
        ,
        Object.defineProperties(Gs.prototype, Ks),
        re.inject(Gs.prototype);
        var zs = function(e, t, i, n, r) {
            this.id = e,
            this.kind = t,
            this.label = i || "",
            this.language = n || "",
            this.descriptors = [],
            this._selectedValue = !1,
            this._trackList = r
        }
          , qs = {
            selected: {
                configurable: !0
            }
        };
        qs.selected.set = function(e) {
            this._selectedValue != e && e && (this._trackList.selectTrackById(this.id),
            this._trackList.dispatchEvent(new CustomEvent(q.Track.SELECTED_CHANGE)))
        }
        ,
        qs.selected.get = function() {
            return this._selectedValue
        }
        ,
        zs.prototype.updateSelectedValue = function(e) {
            this._selectedValue = e
        }
        ,
        Object.defineProperties(zs.prototype, qs);
        var Ys = function() {
            this.length = 0
        }
          , Qs = {
            selectedIndex: {
                configurable: !0
            }
        };
        Ys.prototype.getRepresentationById = function(e) {
            return Array.prototype.find.call(this, function(t) {
                return t.id == e
            })
        }
        ,
        Qs.selectedIndex.get = function() {
            return Array.prototype.findIndex.call(this, function(e) {
                return e.selected
            })
        }
        ,
        Object.defineProperties(Ys.prototype, Qs),
        re.inject(Ys.prototype);
        var $s = function(e, t) {
            void 0 === t && (t = {}),
            this.id = e,
            this.bandwidth = t.bandwidth || 0,
            this.codecs = t.codecs || "",
            this.cdn = t.cdn || "",
            this.selected = t.selected || !1
        }
          , Xs = function(e) {
            function t() {
                e.call(this)
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(Gs)
          , Js = function(e) {
            function t(t, i, n, r, s) {
                e.call(this, t, i, n, r, s),
                this.kind = "main",
                this.codecs = "",
                this.maxFrameRate = "",
                this.maxWidth = "",
                this.maxHeight = "",
                this.representations = new Zs
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(zs)
          , Zs = function(e) {
            function t() {
                e.call(this)
            }
            e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t;
            var i = {
                maxWidth: {
                    configurable: !0
                },
                maxHeight: {
                    configurable: !0
                },
                maxFrameRate: {
                    configurable: !0
                }
            };
            return i.maxWidth.get = function() {
                var e = 0;
                return Array.prototype.forEach.call(this, function(t) {
                    t.width && t.width > e && (e = t.width)
                }),
                e
            }
            ,
            i.maxHeight.get = function() {
                var e = 0;
                return Array.prototype.forEach.call(this, function(t) {
                    t.height && t.height > e && (e = t.height)
                }),
                e
            }
            ,
            i.maxFrameRate.get = function() {
                var e = 0
                  , t = "";
                return Array.prototype.forEach.call(this, function(i) {
                    var n = i.frameRate;
                    if ("string" == typeof n && n) {
                        var r = n.split("/").map(function(e) {
                            return parseInt(e, 10)
                        })
                          , s = r[0] / (r[1] || 1);
                        s > e && (e = s,
                        t = n)
                    }
                }),
                t
            }
            ,
            Object.defineProperties(t.prototype, i),
            t
        }(Ys)
          , ea = function(e) {
            function t(t, i) {
                void 0 === i && (i = {}),
                e.call(this, t, i),
                this.sar = i.sar || "",
                this.profile = i.profile || "",
                this.frameRate = i.frameRate || "",
                this.width = i.width || 0,
                this.height = i.height || 0
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t.findIndexById = function(e, t) {
                return Array.prototype.findIndex.call(e, function(e) {
                    return e.id == t
                })
            }
            ,
            t.selectById = function(e, t) {
                Array.prototype.forEach.call(e, function(e) {
                    return e.selected = e.id == t
                })
            }
            ,
            t
        }($s)
          , ta = function(e) {
            function t() {
                e.call(this)
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(Gs)
          , ia = function(e) {
            function t(t, i, n, r, s) {
                e.call(this, t, i, n, r, s),
                this.codecs = "",
                this.samplingRate = "",
                this.enabled = !1,
                this.channelConfigurations = [],
                this.representations = new na
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(zs)
          , na = function(e) {
            function t() {
                e.call(this)
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(Ys)
          , ra = function(e) {
            function t(t, i) {
                void 0 === i && (i = {}),
                e.call(this, t, i),
                this.samplingRate = i.samplingRate || ""
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t.findIndexById = function(e, t) {
                return Array.prototype.findIndex.call(e, function(e) {
                    return e.id == t
                })
            }
            ,
            t.selectById = function(e, t) {
                Array.prototype.forEach.call(e, function(e) {
                    return e.selected = e.id == t
                })
            }
            ,
            t
        }($s)
          , sa = function(e, t) {
            this._audioTrackList = e,
            this._videoTrackList = t,
            this._audioPreference = {},
            this._videoPreference = {},
            this._overrideAudioId = null,
            this._overrideVideoId = null
        }
          , aa = {
            selectedAudioTrack: {
                configurable: !0
            },
            selectedVideoTrack: {
                configurable: !0
            },
            audioPreference: {
                configurable: !0
            },
            videoPreference: {
                configurable: !0
            },
            overrideAudioId: {
                configurable: !0
            },
            overrideVideoId: {
                configurable: !0
            }
        };
        aa.selectedAudioTrack.get = function() {
            return this._audioTrackList[this._audioTrackList.selectedIndex]
        }
        ,
        aa.selectedVideoTrack.get = function() {
            return this._videoTrackList[this._videoTrackList.selectedIndex]
        }
        ,
        aa.audioPreference.get = function() {
            return this._audioPreference
        }
        ,
        aa.videoPreference.get = function() {
            return this._videoPreference
        }
        ,
        aa.overrideAudioId.set = function(e) {
            this._audioPreference.overrideTrackId = e
        }
        ,
        aa.overrideVideoId.set = function(e) {
            this._videoPreference.overrideTrackId = e
        }
        ,
        sa.prototype._addTrack = function(e, t) {
            Array.prototype.push.call(e, t),
            setTimeout(function() {
                return e.dispatchEvent(new CustomEvent(q.Track.ADD_TRACK,{
                    detail: t
                }))
            })
        }
        ,
        sa.prototype._removeTrack = function(e, t) {
            var i = Array.prototype.findIndex.call(e, function(e) {
                return e === t
            });
            -1 != i && (Array.prototype.splice.call(e, i, 1),
            setTimeout(function() {
                e.dispatchEvent(new CustomEvent(q.Track.REMOVE_TRACK,{
                    detail: t
                }))
            }))
        }
        ,
        sa.prototype.update = function(e) {
            this.updateAudio(e),
            this.updateVideo(e)
        }
        ,
        sa.prototype.updateAudio = function(e) {
            var t = this;
            if (e.audios.forEach(function(e) {
                if (e && e.reps.length) {
                    var i = e.adaptationSetId
                      , n = [];
                    e.reps.forEach(function(e) {
                        var i = e.detail;
                        n = n.concat(i.cdns.map(function(n) {
                            var r = t._formatRepUniqueId(e.detail.id, n);
                            return new ra(r,{
                                bandwidth: i.bandwidth,
                                codecs: i.codecs,
                                cdn: n,
                                samplingRate: i.samplingRate
                            })
                        }))
                    });
                    var r = new ia(i,e.kind,null,e.language,t._audioTrackList);
                    Array.prototype.push.apply(r.representations, n),
                    r.codecs = e.codecs,
                    r.channelConfigurations = e.channelConfigurations || [],
                    r.descriptors = e.descriptors || [],
                    t.addAudioTrack(r)
                }
            }),
            this._audioTrackList.length) {
                this._audioTrackList.selectTrackById(e.audio.adaptationSetId),
                setTimeout(function() {
                    return t._audioTrackList.dispatchEvent(new CustomEvent(q.Track.CHANGE))
                });
                var i = e.audio.activeRep;
                i && this.selectAudioRepresentation(Object.assign({}, i.mbrID, {
                    cdn: e.audio.activeCdn
                }))
            }
        }
        ,
        sa.prototype.updateVideo = function(e) {
            var t = this;
            if (e.videos.forEach(function(e) {
                if (e && e.reps.length) {
                    var i = e.adaptationSetId
                      , n = [];
                    e.reps.forEach(function(e) {
                        var i = e.detail;
                        n = n.concat(i.cdns.map(function(n) {
                            var r = t._formatRepUniqueId(e.detail.id, n);
                            return new ea(r,{
                                bandwidth: i.bandwidth,
                                codecs: i.codecs,
                                cdn: n,
                                sar: i.sar,
                                profile: i.profile,
                                width: i.width,
                                height: i.height,
                                frameRate: i.frameRate
                            })
                        }))
                    });
                    var r = new Js(i,e.kind,null,e.language,t._videoTrackList);
                    Array.prototype.push.apply(r.representations, n),
                    r.codecs = e.codecs,
                    r.maxWidth = e.maxWidth || r.representations.maxWidth,
                    r.maxHeight = e.maxHeight || r.representations.maxHeight,
                    r.maxFrameRate = e.maxFrameRate || r.representations.maxFrameRate,
                    r.descriptors = e.descriptors || [],
                    t.addVideoTrack(r)
                }
            }),
            this._videoTrackList.length) {
                this._videoTrackList.selectTrackById(e.video.adaptationSetId),
                setTimeout(function() {
                    return t._videoTrackList.dispatchEvent(new CustomEvent(q.Track.CHANGE))
                });
                var i = e.video.activeRep;
                i && this.selectVideoRepresentation(Object.assign({}, i.mbrID, {
                    cdn: e.video.activeCdn
                }))
            }
        }
        ,
        sa.prototype.addAudioTrack = function(e) {
            this._addTrack(this._audioTrackList, e)
        }
        ,
        sa.prototype.addVideoTrack = function(e) {
            this._addTrack(this._videoTrackList, e)
        }
        ,
        sa.prototype.removeAudioTrack = function(e) {
            this._removeTrack(this._audioTrackList, e)
        }
        ,
        sa.prototype.removeVideoTrack = function(e) {
            this._removeTrack(this._videoTrackList, e)
        }
        ,
        sa.prototype.selectAudioTrack = function(e, t, i) {
            this._audioPreference.language = e || this._audioPreference.language,
            this._audioPreference.kind = t || this._audioPreference.kind,
            this._audioPreference.codec = i || this._audioPreference.codec
        }
        ,
        sa.prototype.selectVideoTrack = function(e, t) {
            this._videoPreference.language = e || this._videoPreference.language,
            this._videoPreference.kind = t || this._videoPreference.kind
        }
        ,
        sa.prototype.selectAudioRepresentation = function(e) {
            var t = this.selectedAudioTrack
              , i = e.representationId
              , n = e.adaptationSetId
              , r = e.cdn;
            if (t && t.id === n) {
                var s = this._formatRepUniqueId(i, r);
                -1 != ra.findIndexById(t.representations, s) && (ra.selectById(t.representations, s),
                setTimeout(function() {
                    return t.representations.dispatchEvent(new CustomEvent(q.Track.CHANGE))
                }))
            }
        }
        ,
        sa.prototype.selectVideoRepresentation = function(e) {
            var t = this.selectedVideoTrack
              , i = e.representationId
              , n = e.adaptationSetId
              , r = e.cdn;
            if (t && t.id === n) {
                var s = this._formatRepUniqueId(i, r);
                -1 != ea.findIndexById(t.representations, s) && (ea.selectById(t.representations, s),
                setTimeout(function() {
                    return t.representations.dispatchEvent(new CustomEvent(q.Track.CHANGE))
                }))
            }
        }
        ,
        sa.prototype.clear = function() {
            for (; this._audioTrackList.length > 0; ) {
                this.removeAudioTrack(this._audioTrackList[0])
            }
            for (; this._videoTrackList.length > 0; ) {
                this.removeVideoTrack(this._videoTrackList[0])
            }
        }
        ,
        sa.prototype._formatRepUniqueId = function(e, t) {
            return e + "-" + t
        }
        ,
        sa.getBestASet = function(e, t) {
            if (!e || !e.length)
                return null;
            var i = e;
            if (t.overrideTrackId) {
                var n = i.find(function(e) {
                    return e.adaptationSetId == t.overrideTrackId
                });
                if (n)
                    return n
            }
            if (t.language) {
                var r = i.filter(function(e) {
                    return e.language == t.language
                });
                r.length > 0 && (i = r)
            }
            if (t.kind) {
                var s = i.filter(function(e) {
                    return e.kind == t.kind
                });
                s.length > 0 && (i = s)
            }
            if (t.codec) {
                var a = [];
                "eac3" === t.codec ? a = i.filter(function(e) {
                    return e.codec.includes("ec-3")
                }) : "aac" === t.codec && (a = i.filter(function(e) {
                    return !e.codec.includes("ec-3")
                })),
                a.length > 0 && (i = a)
            }
            return i[0]
        }
        ,
        sa.getPreferredAudio = function(e, t) {
            return sa.getBestASet(e, t)
        }
        ,
        sa.getPreferredVideo = function(e, t) {
            return sa.getBestASet(e, t)
        }
        ,
        sa.rolesToKind = function(e) {
            var t = {};
            return e.forEach(function(e) {
                return t[e] = !0
            }),
            t.main ? t.caption ? "captions" : t.description ? "main-desc" : t.subtitle ? "subtitles" : t.dub ? "translation" : "main" : t.description ? "descriptions" : t.commentary ? "commentary" : t.alternate && !t.dub ? "alternative" : ""
        }
        ,
        Object.defineProperties(sa.prototype, aa);
        var oa = function() {
            this._boxes = []
        };
        oa.prototype.parse = function(e, t, i) {
            for (var n = 0; n < i; ) {
                var r = new la(e,t + n);
                n += r.size,
                this._boxes.push(r)
            }
        }
        ,
        oa.prototype.find = function(e) {
            for (var t = 0, i = this._boxes; t < i.length; t += 1) {
                var n = i[t];
                if (n.type == e)
                    return n;
                var r = n.find(e);
                if (null != r)
                    return r
            }
            return null
        }
        ,
        oa.prototype.accept = function(e, t) {
            for (var i = 0, n = this._boxes; i < n.length; i += 1) {
                var r = n[i];
                r.type == e && t(r),
                r.accept(e, t)
            }
        }
        ;
        var la = function(e) {
            function t(t, i) {
                e.call(this),
                this.offset = i,
                this.size = t.getUint32(i),
                this.type = String.fromCharCode.apply(String, [4, 5, 6, 7].map(function(e) {
                    return t.getUint8(i + e)
                })),
                i += 8,
                "moof" == this.type || "traf" == this.type ? this.parse(t, i, this.size - 8) : "trun" == this.type ? this._parseTRUN(t, i) : "tfdt" == this.type ? this._parseTFDT(t, i) : "sidx" == this.type ? this._parseSIDX(t, i) : "emsg" == this.type && this._parseEMSG(t, i)
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t.prototype._parseTRUN = function(e, t) {
                this.samples = [];
                var i = e.getUint8(t)
                  , n = e.getUint16(t + 1) << 8 | e.getUint8(t + 3);
                t += 4;
                var r = e.getUint32(t);
                t += 4,
                1 & n && (t += 4),
                4 & n && (t += 4);
                for (var s = 0; s < r; ++s) {
                    var a = {
                        duration: 0,
                        size: 0,
                        flags: 0,
                        cts: 0
                    };
                    256 & n && (a.duration = e.getUint32(t),
                    t += 4),
                    512 & n && (a.size = e.getUint32(t),
                    t += 4),
                    1024 & n && (a.flags = e.getUint32(t),
                    t += 4),
                    2048 & n && (a.cts = 0 == i ? e.getUint32(t) : e.getInt32(t),
                    t += 4),
                    this.samples.push(a)
                }
                return t
            }
            ,
            t.prototype._parseTFDT = function(e, t) {
                var i = e.getUint8(t);
                return t += 4,
                1 == i ? (this.baseDTS = 4294967296 * e.getUint32(t) + e.getUint32(t + 4),
                t += 8) : (this.baseDTS = e.getUint32(t),
                t += 4),
                t
            }
            ,
            t.prototype._parseSIDX = function(e, t) {
                this.segments = [];
                var i = e.getUint8(t);
                t += 8,
                this.timescale = e.getUint32(t),
                t += 4;
                var n = 0
                  , r = 0;
                0 == i ? (n = e.getUint32(t),
                r = e.getUint32(t + 4),
                t += 8) : (n = 4294967296 * e.getUint32(t + 0) + e.getUint32(t + 4),
                r = 4294967296 * e.getUint32(t + 8) + e.getUint32(t + 12),
                t += 16);
                var s = e.getUint16(t + 2);
                t += 4;
                for (var a = 0; a < s; ++a) {
                    var o = 2147483647 & e.getUint32(t)
                      , l = e.getUint32(t + 4);
                    this.segments.push({
                        time: n,
                        duration: l,
                        offset: r,
                        size: o
                    }),
                    r += o,
                    n += l,
                    t += 12
                }
                return t
            }
            ,
            t.prototype._parseEMSG = function(e, t) {
                function i() {
                    for (var i = []; i[i.push(e.getUint8(t++)) - 1]; ) {}
                    return i.pop(),
                    String.fromCharCode.apply(String, i)
                }
                t += 4,
                this.scheme = i(),
                this.value = i(),
                this.timescale = e.getUint32(t),
                this.time = e.getUint32(t + 4),
                this.duration = e.getUint32(t + 8),
                this.id = e.getUint32(t + 12),
                t += 16,
                this.data = new Uint8Array(e.buffer,e.byteOffset + t,this.offset + this.size - t)
            }
            ,
            t
        }(oa)
          , da = function(e) {
            function t(t) {
                e.call(this),
                this.parse(t, 0, t.byteLength)
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(oa)
          , ua = function(e) {
            this._loaders = {},
            this._onRequest = e || function() {}
        };
        ua.prototype.load = function(e, t) {
            var i = this._loaders[e.id];
            return i || (i = new ca(this._onRequest),
            this._loaders[e.id] = i),
            i.load(e, t)
        }
        ,
        ua.prototype.clear = function(e) {
            var t = this._loaders[e.id];
            t && (t.dispose(),
            delete this._loaders[e.id])
        }
        ,
        ua.prototype.reset = function() {
            for (var e = 0, t = Object.keys(this._loaders); e < t.length; e += 1) {
                var i = t[e];
                this._loaders[i].dispose()
            }
            this._loaders = {}
        }
        ;
        var ca = function(e) {
            this._init = null,
            this._sidx = null,
            this._errors = {},
            this._promise = null,
            this._download = null,
            this._onRequest = e,
            this._cts = new N
        };
        ca.prototype.load = function(e, t) {
            var i = this
              , n = this._cts.token;
            if (n.isCancellationRequested)
                return R.pending();
            if (e.init.data)
                return R.resolve();
            if (this._init)
                return delete e.errors[t],
                e.sidx = this._sidx,
                e.init.data = this._init,
                R.resolve();
            if (this._promise)
                return this._promise.then(function() {
                    return i.load(e, t)
                });
            var r = e.init.getUrlByCdn(t);
            if (this._errors[t])
                return R.reject(this._errors[t]);
            var s, a = e.init.bytes ? {
                range: "bytes=" + e.init.bytes
            } : {}, o = {
                retryCount: 1,
                timeoutMs: 1e4,
                cancellationToken: n,
                cancelOnState: e.init.bytes ? [200] : []
            }, l = Z(r, {
                headers: a
            }, o).then(function(e) {
                return s = e,
                e.assertOK().arrayBuffer()
            }).then(function(r) {
                if (i._onRequest(e.init, t, s, !0),
                n.isCancellationRequested)
                    return R.pending();
                w.log("init segment loaded", e.id),
                i._parseInitData(e.init, r),
                i._errors = {}
            }).catch(function(s) {
                if (i._onRequest(e.init, t, s, !0),
                n.isCancellationRequested)
                    return R.pending();
                throw w.warn("init segment error", e.id, s.message),
                i._init = i._sidx = null,
                i._errors[t] = e.errors[t] = s,
                s.type = Y.DASH_STREAM_ERROR,
                s.params = {
                    segmentUrl: r,
                    segmentType: "initSegment",
                    segmentBytes: e.init.bytes,
                    cdn: t,
                    bandwidth: e.detail.bandwidth,
                    huluProfileBandwidth: e.detail.profile,
                    elapsedDownloadTime: Date.now() - s.start,
                    httpStatus: s.status,
                    attempt: s.retry + 1,
                    RTT: s.rtt || -1
                },
                s
            });
            return this._promise = l.catch(function() {}).then(function() {
                return i._promise = null
            }),
            l.then(function() {
                return i.load(e, t)
            })
        }
        ,
        ca.prototype.dispose = function() {
            this._cts.cancel()
        }
        ,
        ca.prototype._parseInitData = function(e, t) {
            if (e.ranges && e.ranges.sidx) {
                this._init = t.slice(0, e.ranges.init.end + 1 - e.ranges.init.start);
                var i = new da(new DataView(t,e.ranges.sidx.start - e.ranges.init.start));
                this._sidx = i.find("sidx"),
                this._sidx.base = e.ranges.sidx.start + this._sidx.size
            } else
                this._init = t.slice(0),
                this._sidx = null
        }
        ;
        var ha = z.LoaderState.STOPPED
          , pa = z.LoaderState.ENDED
          , _a = z.LoaderState.IDLE_ENOUGH_DATA
          , fa = z.LoaderState.IDLE_REACHED_END
          , ga = z.LoaderState.IDLE_WAITING_LIVE
          , ma = z.LoaderState.LOADING
          , ya = z.LoaderState.ERROR
          , va = z.DASH_CTS_EPS
          , Ea = z.NUMERICAL_EPS
          , Ta = "retry"
          , Aa = function(e, t) {
            this.aset = e,
            this._cppAdapter = t.cppAdapter,
            this._type = e.type,
            this._timeline = e.parent,
            this._name = "[" + e.id + "-loader]",
            this._position = 0,
            this._download = 0,
            this._continue = 0,
            this._appended = 0,
            this._queue = [],
            this._state = ha,
            this._cts = new N,
            this._abrState = {},
            this._tracker = t.playerTracker,
            this._eventStreams = t.eventStreams,
            this._bufferManager = t.bufferManager,
            this._captionManager = t.captionManager,
            this._sendQoSFragmentEvent = t.sendQoSFragmentEvent,
            this._initSegmentPool = new ua(this._notifySegmentRequest.bind(this)),
            this._rep = this.aset.reps[0],
            this._cdn = this._rep.detail.cdns[0],
            this._onUpdateEnd = this._onUpdateEnd.bind(this),
            this._onTimelineUpdate = this._onTimelineUpdate.bind(this),
            this._nextDownloadTimeout = 0
        }
          , Pa = {
            state: {
                configurable: !0
            },
            buffer: {
                configurable: !0
            },
            position: {
                configurable: !0
            },
            download: {
                configurable: !0
            },
            nextDownload: {
                configurable: !0
            },
            queue: {
                configurable: !0
            }
        };
        Aa.prototype.load = function(e) {
            var t = this;
            this._state = ma,
            this._cts = new N,
            this._cts.token.register(function() {
                return t._loading && (t._loading.cancel(),
                t._loading = null)
            }),
            this._position = e,
            this._download = e,
            this._calculateLoadPosition(),
            this._calculateBufferLength(),
            this._currentRetryNumber = 0,
            this._nextAction = "next",
            w.log(this._name, "start load at", this._download),
            this._callLater(this._loadInitSegments, 0),
            this._callLater(this._tryDownloadData, 0),
            this._callLater(this._tryAppendBuffer, 0)
        }
        ,
        Aa.prototype.stop = function() {
            this._state = ha,
            this._cts.cancel(),
            this._queue = []
        }
        ,
        Aa.prototype.end = function() {
            null != this._buffer && (Aa.isDull(this._state) || (w.log(this._name, "ended, by require"),
            this._state = pa,
            this._cts.cancel()))
        }
        ,
        Aa.prototype.seek = function(e) {
            var t = this._position;
            if (null != this._buffer)
                for (var i = this._buffer.buffered, n = 0; n < i.length; ++n) {
                    i.start(n) < Math.max(this._position + Ea, va) && i.end(n) > this._position + Ea && (t = i.start(n))
                }
            e < t - Ea || e > this._download + va ? (this.stop(),
            this.load(e)) : this.position = e
        }
        ,
        Pa.state.get = function() {
            return this._state
        }
        ,
        Pa.buffer.get = function() {
            return this._buffer
        }
        ,
        Pa.buffer.set = function(e) {
            if (this._buffer != e) {
                var t = this._timeline.units[0].timeline;
                this._buffer && (this._buffer.removeEventListener("updateend", this._onUpdateEnd),
                t.removeEventListener(q.Timeline.UPDATE, this._onTimelineUpdate),
                w.log(this._name, "detach buffer")),
                this._buffer = e,
                this._buffer && (this._buffer.addEventListener("updateend", this._onUpdateEnd),
                t.addEventListener(q.Timeline.UPDATE, this._onTimelineUpdate),
                this._callLater(this._tryAppendBuffer, 0),
                w.log(this._name, "attach buffer")),
                this._init = null,
                this._continue = 0,
                this._appended = 0,
                this._updating = !1
            }
        }
        ,
        Pa.position.get = function() {
            return this._position
        }
        ,
        Pa.position.set = function(e) {
            e < this._position + this._continue + Ea ? (this._appended -= e - this._position,
            this._continue -= e - this._position,
            this._position = e) : (this._position = e,
            this._calculateBufferLength())
        }
        ,
        Pa.download.get = function() {
            return this._download
        }
        ,
        Pa.nextDownload.get = function() {
            if (!this._loading)
                return this._download;
            var e = this._rep.findSegment(this._download);
            return e ? e.end : this._download
        }
        ,
        Pa.queue.get = function() {
            return this._queue
        }
        ,
        Aa.prototype.getQueueLength = function() {
            return this._queue.reduce(function(e, t) {
                return e + t.seg.duration
            }, 0)
        }
        ,
        Aa.prototype.getBufferLength = function() {
            return Math.max(this._appended, this._continue)
        }
        ,
        Aa.prototype.getContinueBufferLength = function() {
            return this._continue
        }
        ,
        Aa.prototype.getFacingStreamGap = function() {
            if (!this._buffer)
                return 0;
            if (this._continue > .5)
                return 0;
            if (this._appended < 1)
                return 0;
            for (var e = this._buffer.buffered, t = 0; t < e.length; ++t) {
                if (e.start(t) > this._position)
                    return e.start(t) + .5
            }
            return 0
        }
        ,
        Aa.prototype._calculateLoadPosition = function() {
            this._download = Math.max(this._download, this._timeline.seekable[0] || 0);
            for (var e = 0, t = 0, i = this._download, n = this._bufferManager.getMaxDownloadLength(), r = this._buffer ? this._buffer.buffered : []; this._download < this._position + n; ) {
                for (var s = e + t; e < this._queue.length && this._queue[e].seg.start - va < this._download; ) {
                    this._download = Math.max(this._download, this._queue[e++].seg.end)
                }
                for (; t < r.length && r.start(t) - va < Math.max(this._download - 10, this._position); ) {
                    this._download = Math.max(this._download, r.end(t++))
                }
                if (e + t == s)
                    break
            }
            this._download > i && (this._download += va)
        }
        ,
        Aa.prototype._calculateBufferLength = function() {
            if (this._continue = 0,
            this._appended = 0,
            null != this._buffer) {
                for (var e = Math.min(this._queue.length ? this._queue[0].seg.start : 1 / 0, this._download), t = this._buffer.buffered, i = 0; i < t.length; ++i) {
                    var n = t.start(i)
                      , r = t.end(i);
                    n < Math.max(this._position + Ea, va) && r > this._position + Ea && (this._continue = r - this._position),
                    this._appended += Math.max(Math.min(r, e) - Math.max(n, this._position), 0)
                }
                w.debug(this._name, "buffer length", this._continue, this._appended)
            }
        }
        ,
        Aa.prototype._tryDownloadData = function() {
            if (!Aa.isDull(this._state))
                if (this._rep && this._rep.init.data && 0 != this._rep.segments.length) {
                    if (0 != this._timeline.seekable.length) {
                        if (this._updating)
                            this._callLater(this._tryDownloadData, 50);
                        else {
                            if (this._calculateLoadPosition(),
                            this._calculateBufferLength(),
                            this._bufferManager.isBufferFull(this))
                                return this._state == ma && w.debug(this._name, "idle enough data"),
                                this._state = _a,
                                void this._callLater(this._tryDownloadData, 1e3);
                            if (this._isReachedBufferEnd(this._download))
                                return this._state == ma && w.debug(this._name, "idle all loaded"),
                                this._state = fa,
                                this._checkLoaderEnded(),
                                void this._callLater(this._tryDownloadData, 5e3);
                            var e = this._rep.findSegment(this._download);
                            e ? (e.start > this._download + va && (this._verifyMissingSegment(e),
                            w.warn(this._name, "find stream gap", this._download, e.start)),
                            this._state != ma && w.debug(this._name, "resume loading"),
                            this._state = ma,
                            this._loadSegment(e, this._cdn)) : this._timeline.infinity ? (this._state == ma && w.debug(this._name, "idle wait live"),
                            this._state = ga,
                            this._callLater(this._tryDownloadData, 1e3)) : (this._state == ma && w.debug(this._name, "idle all loaded"),
                            this._state = fa,
                            this._checkLoaderEnded(),
                            this._callLater(this._tryDownloadData, 5e3))
                        }
                    } else
                        this._callLater(this._tryDownloadData, 2e3);
                } else
                    this._callLater(this._tryDownloadData, 50)
        }
        ,
        Aa.prototype._tryFindMissingSegment = function(e, t) {
            for (var i = []; i.length < 3; ) {
                var n = this._rep;
                if (i.push(n),
                this._rep == n)
                    break;
                var r = this._rep.findSegment(e);
                if (r && r.start < e + Ea) {
                    t = r;
                    break
                }
            }
            return t.start > e + va && w.warn(this._name, "find stream gap", this._download, t.start),
            t
        }
        ,
        Aa.prototype._loadSegment = function(e, t) {
            var i = this;
            this._loading = new N,
            this._tracker && this._tracker.downloads.start(e, t),
            this._download = e.start + Ea;
            var n = this._loading.token
              , r = e.bytes ? {
                range: "bytes=" + e.bytes
            } : {}
              , s = Object.assign({
                cancellationToken: n,
                cancelOnState: e.bytes ? [200] : []
            }, this._loadConfig);
            w.debug(this._name, "loading seg", e.parent.id, e.start, e.end),
            n.register(function() {
                return i._tracker && i._tracker.downloads.end(e, t, "cancelled")
            });
            var a = null;
            Z(e.getUrlByCdn(t), {
                headers: r
            }, s).then(function(e) {
                return a = e,
                R.all([e.assertOK(), e.arrayBuffer()])
            }).then(function(r) {
                i._onSegmentLoad(e, t, r[0], r[1], n),
                i._notifySegmentRequest(e, t, a),
                i._next()
            }, function(r) {
                i._notifySegmentRequest(e, t, r),
                i._onSegmentError(e, t, r, n)
            }),
            this._tryAppendInitData(e)
        }
        ,
        Aa.prototype._tryAppendInitData = function(e) {
            this._init != this._rep.init.data && 0 == this._queue.length && !this._updating && this.getBufferLength() <= .5 && this._appendBuffer(e)
        }
        ,
        Aa.prototype._notifySegmentDownload = function(e, t, i, n) {
            if (e) {
                var r = e.seg
                  , s = {
                    profile: r.parent.detail.profile,
                    buffer_length: this.getBufferLength(),
                    rtt: t ? t.rtt : -1,
                    segment_idx: r.number,
                    end_time: e.end,
                    total_downloading_time: e.end - e.start,
                    byte_length: i ? i.byteLength : -1,
                    segment_offset_time: r.t,
                    cdn: r.parent.detail.cdn,
                    is_success: n,
                    type: this._type
                };
                this._tracker.trigger(z.TrackingEvent.SEGMENT_DOWNLOAD, s, !0)
            }
        }
        ,
        Aa.prototype._verifyMissingSegment = function(e) {
            if (!(e.number - e.parent.startNumber < 1)) {
                var t = e.parent.segments[e.number - e.parent.startNumber - 1];
                if (t && t.t + t.d != e.t && t.t + t.d != e.t + z.PERIOD_EPS) {
                    var i = (e.t - t.t - t.d + z.PERIOD_EPS) % z.PERIOD_EPS;
                    this._notifySegmentRequest(Object.assign({}, e, {
                        bytes: "",
                        d: i,
                        duration: i / e.parent.timescale,
                        number: -1,
                        t: t.t + t.d,
                        getUrlByCdn: function getUrlByCdn() {
                            return null
                        }
                    }), this._cdn, {
                        type: "fragment_missing"
                    })
                }
            }
        }
        ,
        Aa.prototype._notifySegmentRequest = function(e, t, i, n) {
            this._sendQoSFragmentEvent(e, t, i, n, n ? null : this._currentRetryNumber, this._abrState)
        }
        ,
        Aa.prototype._onSegmentLoad = function(e, t, i, n, r) {
            if (!r.isCancellationRequested) {
                this._loading = null;
                var s = this._tracker && this._tracker.downloads.end(e, t);
                this._download = e.end + Ea;
                var a = new da(new DataView(n));
                if (this._validateSegment(e, a)) {
                    for (var o = 0, l = this._queue.length - 1; l >= 0; --l) {
                        if (this._queue[l].seg.t < e.t) {
                            o = l + 1;
                            break
                        }
                    }
                    this._queue.splice(o, 0, {
                        seg: e,
                        data: n,
                        mp4file: a,
                        record: s,
                        response: i
                    }),
                    w.debug(this._name, "loaded seg", e.parent.id, e.start, e.end, this._queue.length, i.retry)
                }
                this._tryAppendBuffer()
            }
        }
        ,
        Aa.prototype._onSegmentError = function(e, t, i, n) {
            if (!n.isCancellationRequested) {
                this._loading = null;
                var r = this._tracker && this._tracker.downloads.end(e, t, i.message + ":" + i.loaded);
                w.warn(this._name, "load error", e.parent.id, e.start, e.end, i.type, i.retry);
                var s = e.getUrlByCdn(t);
                if (this._timeline.units[0].timeline.live) {
                    var a = s.split("/")
                      , o = a.length > 3 ? a[3] : ""
                      , l = {
                        start_apts: e.startUnixTime,
                        duration: e.duration,
                        cdn: t,
                        bandwidth: e.parent.detail.bandwidth,
                        channel_id: o,
                        error: i.toString(),
                        url: s
                    };
                    this._tracker && this._tracker.trigger(z.TrackingEvent.SEGMENT_DOWNLOAD_FAILURE, l, !0)
                }
                var d = Date.now() - i.start
                  , u = this._wrapSegmentDownloadError(e, t, i, d);
                this._notifySegmentDownload(r, null, null, !1),
                this._nextAction === Ta ? this._next() : this._nextAction === "skip" ? (u.skipReason = "downloadfailure",
                this._tracker && this._tracker.trigger(z.TrackingEvent.SEGMENT_SKIP, u, !0),
                this._download = e.end + Ea,
                this._next()) : (this._state = ya,
                u.nextAction = this._nextAction,
                u.retryNumber = this._currentRetryNumber,
                i.type = Y.DASH_STREAM_ERROR,
                i.params = u,
                this.dispatchEvent(new CustomEvent(q.Buffer.ERROR,{
                    detail: i
                })))
            }
        }
        ,
        Aa.prototype._next = function() {
            if (0 === this._nextDownloadTimeout)
                return this._tryDownloadData();
            this._callLater(this._tryDownloadData, this._nextDownloadTimeout)
        }
        ,
        Aa.prototype._wrapSegmentDownloadError = function(e, t, i, n) {
            return {
                segmentUrl: e.getUrlByCdn(t),
                segmentType: this._type + "Segment",
                segmentBytes: e.bytes,
                cdn: t,
                bandwidth: e.parent.detail.bandwidth,
                huluProfileBandwidth: e.parent.detail.profile,
                elapsedDownloadTime: n,
                httpStatus: i.status,
                attempt: i.retry + 1,
                RTT: i.rtt || -1,
                isPreload: null == this._buffer
            }
        }
        ,
        Aa.prototype._onSegmentProgress = function() {}
        ,
        Aa.prototype._validateSegment = function(e, t) {
            var i = (t.find("tfdt") || {
                baseDTS: 0
            }).baseDTS;
            return "video" == this._type && i < e.parent.pto ? (w.warn(this._name, "negative dts", e.parent.id, e.start, e.end, e.t, e.parent.pto, i),
            !1) : !(Math.abs(i - e.t) > va * e.parent.timescale) || (w.warn(this._name, "time mismatch", e.parent.id, e.start, e.end, e.t, i),
            !1)
        }
        ,
        Aa.prototype._loadInitSegments = function() {
            var e = this
              , t = this._cts.token;
            this._tracker && this._tracker.startup.start("load_init_seg");
            return R.all(this._getPriorityRepForInit().map(function(i) {
                return n = i.rep,
                r = i.cdn,
                e._initSegmentPool.load(n, r).then(function() {
                    return "ok"
                }).catch(function(e) {
                    return t.isCancellationRequested ? R.pending() : e
                });
                var n, r
            })).then(function(i) {
                t.isCancellationRequested || (e._tracker && e._tracker.startup.end("load_init_seg"),
                i.some(function(e) {
                    return "ok" == e
                }) || 0 != e._timeline.seekable.length && (e._state = ya,
                e.dispatchEvent(new CustomEvent(q.Buffer.ERROR,{
                    detail: i[0]
                }))))
            })
        }
        ,
        Aa.prototype._getPriorityRepForInit = function() {
            for (var e = this, t = [{
                cdn: this._cdn,
                rep: this._rep
            }], i = [], n = function() {
                var n = s[r];
                n.detail.cdns.forEach(function(r) {
                    n == e._rep && r == e._cdn || (r == e._cdn ? t : i).push({
                        cdn: r,
                        rep: n
                    })
                })
            }, r = 0, s = e.aset.reps; r < s.length; r += 1) {
                n()
            }
            return t.concat(i)
        }
        ,
        Aa.prototype._tryAppendBuffer = function() {
            if (!this._updating && null != this._buffer && !this._buffer.updating && 0 != this._queue.length && !Aa.isDull(this._state)) {
                var e = this._queue[0]
                  , t = e.seg
                  , i = e.data
                  , n = e.mp4file
                  , r = e.record
                  , s = e.response
                  , a = this._appendBuffer(t, i, n, r, s);
                if (a)
                    return "QuotaExceededError" == a.name ? (w.log(this._name, "append quota exceeded error"),
                    void this._callLater(this._tryAppendBuffer, 2e3)) : (a = this._appendBuffer(t, i, n, r, s)) ? "QuotaExceededError" == a.name ? (w.log(this._name, "append quota exceeded error"),
                    void this._callLater(this._tryAppendBuffer, 2e3)) : (this._state = ya,
                    a.type = Y.SOURCE_BUFFER_APPEND_ERROR,
                    void this.dispatchEvent(new CustomEvent(q.Buffer.ERROR,{
                        detail: a
                    }))) : void 0
            }
        }
        ,
        Aa.prototype._appendBuffer = function(e, t, i, n, r) {
            var s = this;
            if (this._init != e.parent.init.data) {
                w.debug(this._name, "to append init", e.parent.id);
                try {
                    this._buffer.appendBuffer(e.parent.init.data)
                } catch (e) {
                    return e
                }
                this._updating = !0,
                this._init = e.parent.init.data
            } else {
                w.debug(this._name, "to append", e.parent.id, e.start, e.end);
                try {
                    this._buffer.appendBuffer(t);
                    var a = function() {
                        s._notifySegmentDownload(n, r, t, !0),
                        s._buffer && s._buffer.removeEventListener("updateend", a)
                    };
                    this._buffer.addEventListener("updateend", a)
                } catch (e) {
                    return e
                }
                this._updating = !0,
                this._queue.shift(),
                this._eventStreams.parseSegment(e, t, i),
                this._bufferManager.appendSegment(e, t, i);
                try {
                    this._captionManager.parseSegment(e, t, i)
                } catch (t) {
                    w.warn(this._name, "caption parse failed for seg", e.start, t.message, t.stack, Date.now())
                }
            }
        }
        ,
        Aa.prototype._onUpdateEnd = function() {
            if (!Aa.isDull(this._state) && null != this._buffer && !this._buffer.updating) {
                if (this._updating = !1,
                this._calculateBufferLength(),
                "video" == this._type) {
                    var e = this._buffer.buffered;
                    this._eventStreams.updateBuffered(e),
                    this._bufferManager.updateBuffered(e),
                    this._captionManager.updateBuffered(e)
                }
                w.debug(this._name, "on updateend", Ie.stringify(this._buffer.buffered)),
                this.dispatchEvent(new CustomEvent(q.Buffer.UPDATE)),
                this._checkLoaderEnded() || this._tryAppendBuffer()
            }
        }
        ,
        Aa.prototype.selectRepresentation = function(e) {
            var t = e.cdn
              , i = e.representationId
              , n = e.adaptationSetId
              , r = e.nextAction
              , s = e.abrState
              , a = e.timeoutInMillisecond
              , o = e.connectTimeoutInMillisecond
              , l = e.waitTimeInMillisecond;
            if (this._abrState = s || {},
            this._loadConfig = {
                timeoutMs: a,
                connectTimeoutMs: o
            },
            this._nextAction = r,
            this._nextDownloadTimeout = l,
            this.aset.adaptationSetId === n) {
                var d = this.aset.reps.findIndex(function(e) {
                    return e.detail.id == i
                });
                if (d < 0 || !this.aset.reps[d].detail.cdns.includes(t))
                    w.warn(this._name, "cannot find candidate representation", i);
                else {
                    this.aset.selectRep(d, t);
                    var u = this.aset.activeRep
                      , c = u != this._rep || t != this._cdn;
                    c && (this._rep = u,
                    this._cdn = t,
                    w.log(this._name, "quality change", t, this._rep.detail.profile)),
                    this._nextAction !== Ta || c ? this._currentRetryNumber = 0 : this._currentRetryNumber += 1
                }
            } else
                w.warn(this._name, "cancidate adaptation set is not active selected", n)
        }
        ,
        Aa.prototype.isDownloadingLastSegment = function() {
            if (!this._rep || 0 === this._rep.segments.length)
                return !1;
            if (this._state != ma)
                return !1;
            var e = this._rep.segments[this._rep.segments.length - 1];
            return this._download >= e.start
        }
        ,
        Aa.prototype._onTimelineUpdate = function() {
            Aa.isDull(this._state) || (w.debug(this._name, "on timelineupdate event"),
            this._checkLoaderEnded())
        }
        ,
        Aa.prototype._checkLoaderEnded = function() {
            return !this._updating && null != this._buffer && !this._buffer.updating && !(this._queue.length > 0) && this._state == fa && !!this._isReachedBufferEnd(this._download) && (w.log(this._name, "ended, all data appended"),
            this._state = pa,
            this.dispatchEvent(new CustomEvent(q.Buffer.ENDED)),
            !0)
        }
        ,
        Aa.prototype._isReachedBufferEnd = function(e) {
            return !this._timeline.infinity && (0 == this._timeline.seekable.length || e > this._timeline.seekable[1])
        }
        ,
        Aa.prototype._callLater = function(e, t) {
            for (var i = this, n = [], r = arguments.length - 2; r-- > 0; ) {
                n[r] = arguments[r + 2]
            }
            var s = this._cts.token;
            setTimeout(function() {
                s.isCancellationRequested || e.apply(i, n)
            }, t)
        }
        ,
        Aa.isDull = function(e) {
            return e == ha || e == pa || e == ya
        }
        ,
        Object.defineProperties(Aa.prototype, Pa);
        var wa = function() {
            this.empty = !0,
            this.queue = [],
            this.state = ha,
            this.buffer = null,
            this.position = 0,
            this.download = 1 / 0
        };
        wa.prototype.load = function(e) {
            this.state = pa,
            this.position = e
        }
        ,
        wa.prototype.stop = function() {
            this.state = ha
        }
        ,
        wa.prototype.end = function() {
            this.state = pa
        }
        ,
        wa.prototype.seek = function(e) {
            this.position = e
        }
        ,
        wa.prototype.getQueueLength = function() {
            return 0
        }
        ,
        wa.prototype.getBufferLength = function() {
            return 1 / 0
        }
        ,
        wa.prototype.getFacingStreamGap = function() {
            return 0
        }
        ,
        re.inject(Aa.prototype),
        re.inject(wa.prototype);
        var ka = function() {
            this.length = 0
        };
        ka.prototype.getTrackById = function(e) {
            return Array.prototype.find.call(this, function(t) {
                return t.id == e
            })
        }
        ;
        var Ca = function() {
            this.length = 0
        };
        Ca.prototype.getCueById = function(e) {
            return Array.prototype.find.call(this, function(t) {
                return t.id == e
            })
        }
        ;
        var Ia = function(e, t, i, n, r) {
            this.id = e,
            this.kind = t,
            this.mode = i || "disabled",
            this.label = n || "",
            this.language = r || "",
            this.cues = new Ca,
            this.activeCues = new Ca
        };
        Ia.prototype.addCue = function(e) {
            e.track && e.track.removeCue(e),
            e.track = this,
            e.index = this.cues.length,
            Array.prototype.push.call(this.cues, e)
        }
        ,
        Ia.prototype.removeCue = function(e) {
            if (e.track != this)
                throw new Error("NotFoundError");
            Array.prototype.splice.call(this.cues, e.index, 1),
            e.track = null,
            e.index = -1
        }
        ,
        re.inject(ka.prototype),
        re.inject(Ia.prototype);
        var Ra = function() {};
        Ra.changeActiveCue = function(e, t, i) {
            void 0 === i && (i = {});
            var n = e.activeCues[0]
              , r = null;
            "string" == typeof t ? r = e.cues.getCueById(t) : null != t && t.track == e && (r = t),
            n != r && (n && (Array.prototype.pop.call(e.activeCues),
            setTimeout(function() {
                return n.dispatchEvent(new CustomEvent(q.Track.EXIT,{
                    detail: i
                }))
            })),
            r && (Array.prototype.push.call(e.activeCues, r),
            setTimeout(function() {
                return r.dispatchEvent(new CustomEvent(q.Track.ENTER,{
                    detail: i
                }))
            })))
        }
        ,
        Ra.changeCueList = function(e, t, i) {
            void 0 === i && (i = {}),
            0 == e.cues.length && 0 == t.length || (Ra.changeActiveCue(e, null),
            Ra._splice(e, 0, e.cues.length, t, i))
        }
        ,
        Ra.appendCueList = function(e, t, i) {
            void 0 === i && (i = {}),
            Ra._splice(e, e.cues.length, 0, t, i)
        }
        ,
        Ra.shiftCueList = function(e, t, i) {
            void 0 === i && (i = {}),
            Ra._splice(e, 0, t, [], i)
        }
        ,
        Ra.replaceCueList = function(e, t, i, n, r) {
            void 0 === r && (r = {}),
            Ra._splice(e, t, i, n, r)
        }
        ,
        Ra._splice = function(e, t, i, n, r) {
            var s;
            (s = Array.prototype.splice).call.apply(s, [e.cues, t, i].concat(n)).forEach(function(e) {
                e.index = -1,
                e.track = null
            });
            for (var a = t; a < e.cues.length; ++a) {
                e.cues[a].index = a,
                e.cues[a].track = e
            }
            setTimeout(function() {
                return e.dispatchEvent(new CustomEvent(q.Track.CUE_CHANGE,{
                    detail: r
                }))
            })
        }
        ;
        var Da = function(e) {
            this.id = e.representationId,
            this.adaptationSetId = e.adaptationSetId,
            this.cdn = e.cdn,
            this.bandwidth = e.bandwidth,
            this.profile = e.profile,
            this.width = e.width,
            this.height = e.height,
            this.protocol = e.protocol
        };
        re.inject(Da.prototype);
        var La = function() {
            this.reset()
        };
        La.prototype.size = function(e, t) {
            void 0 === e && (e = 0),
            void 0 === t && (t = 1 / 0);
            for (var i = 0, n = 0, r = this._datas; n < r.length; n += 1) {
                var s = r[n]
                  , a = Math.min(t, s.e) - Math.max(e, s.s);
                a > z.DASH_CTS_EPS && (i += a * s.b / 8 / 1024)
            }
            return i
        }
        ,
        La.prototype.reset = function() {
            this._datas = []
        }
        ,
        La.prototype.append = function(e, t) {
            var i = this._datas[this._datas.length - 1];
            e.e - e.s < z.DASH_CTS_EPS || (null == i || i.e < e.s - z.DASH_CTS_EPS ? this._datas.push(e) : i.e > e.s + z.DASH_CTS_EPS ? t ? this._merge(e) : w.warn(e, "is not tail", this._datas) : i.b == e.b ? i.e = e.e : this._datas.push(e))
        }
        ,
        La.prototype.update = function(e) {
            for (var t = 0, i = 0, n = []; t < e.length && i < this._datas.length; ) {
                var r = this._datas[i];
                r.e < e.start(t) ? ++i : r.s > e.end(t) ? ++t : r.e < e.end(t) ? (n.push({
                    s: Math.max(r.s, e.start(t)),
                    e: r.e,
                    b: r.b
                }),
                ++i) : (n.push({
                    s: Math.max(r.s, e.start(t)),
                    e: e.end(t),
                    b: r.b
                }),
                ++t)
            }
            this._datas = n
        }
        ,
        La.prototype._merge = function(e) {
            var t = this._datas;
            this._datas = [];
            for (var i = 0, n = t; i < n.length; i += 1) {
                var r = n[i];
                this.append({
                    s: r.s,
                    e: Math.min(r.e, e.s),
                    b: r.b
                }),
                this.append({
                    s: e.s,
                    e: Math.min(r.e, e.e),
                    b: e.b
                }),
                this.append({
                    s: Math.max(r.s, e.e),
                    e: r.e,
                    b: r.b
                }),
                e.s = Math.max(e.s, r.e)
            }
            this.append(e)
        }
        ;
        var Ma = function() {
            this._cues = [],
            this._stream = null,
            this._loading = null,
            this._records = [],
            this._buffered = new La,
            this._track = new Ia(z.TrackId.QUALITIES,"metadata"),
            this.limits = {}
        }
          , Oa = {
            stream: {
                configurable: !0
            },
            tracks: {
                configurable: !0
            },
            limits: {
                configurable: !0
            }
        };
        Oa.stream.set = function(e) {
            var t = this;
            if (this._stream != e && (this._stream = e,
            this._buffered.reset(),
            this._stream)) {
                this._cues = [],
                this._stream.getAvailableRepsForSelectedAset("video").forEach(function(e) {
                    t._cues = t._cues.concat(e.detail.cdns.map(function(t) {
                        var i = e.detail.baseUrls[t].split("://")[0];
                        return new Da(Object.assign({}, {
                            cdn: t,
                            protocol: i
                        }, e.detail, e.mbrID))
                    }))
                }),
                Ra.changeCueList(this._track, this._cues);
                for (var i = function() {
                    var e = r[n]
                      , i = t._cues.find(function(t) {
                        return t.id == e.id
                    });
                    null != i && Ra.changeActiveCue(t._track, i, e)
                }, n = 0, r = t._records; n < r.length; n += 1) {
                    i()
                }
                this._records = []
            }
        }
        ,
        Oa.stream.get = function() {
            return this._stream
        }
        ,
        Oa.tracks.get = function() {
            return [this._track]
        }
        ,
        Oa.limits.get = function() {
            return this._limits
        }
        ,
        Oa.limits.set = function(e) {
            this._limits = {
                seconds: {
                    min: e.minBufferedSecs || 15,
                    max: e.maxBufferedSecs || 20
                },
                kilobytes: e.maxBufferedKilobytes || 1 / 0
            }
        }
        ,
        Ma.prototype.clear = function() {
            this._cues = [],
            this._stream = null,
            this._loading = null,
            this._records = [],
            Ra.changeCueList(this._track, this._cues)
        }
        ,
        Ma.prototype.loadStream = function(e) {
            null != this._loading && this._loading != e && (Aa.isDull(this._loading.loaderState) || (w.warn(this._loading._name, "forced to stop by", e._name),
            this._loading.stop())),
            this._loading = e
        }
        ,
        Ma.prototype.getMaxDownloadLength = function() {
            var e = this._limits.seconds.max;
            if (this._stream && this._stream != this._loading && (e -= this._stream.getBufferLength()),
            this._loading) {
                var t = this._loading.loaders
                  , i = t.audio
                  , n = t.video
                  , r = Math.min(i.getBufferLength(), n.getBufferLength());
                e = Math.min(e, r + this._limits.seconds.min)
            }
            return e
        }
        ,
        Ma.prototype.getMinDownloadLength = function() {
            var e = this._limits.seconds.min;
            return this._stream && this._stream != this._loading && (e -= this._stream.getBufferLength()),
            e
        }
        ,
        Ma.prototype.isBufferFull = function(e) {
            var t = this.getMinDownloadLength();
            if (e.getBufferLength() + e.getQueueLength() < t)
                return !1;
            var i, n, r = this.getMaxDownloadLength();
            if (e.getBufferLength() + e.getQueueLength() > r)
                return !0;
            if ("video" != e.aset.type)
                return !1;
            if (this._limits.kilobytes == 1 / 0)
                return !1;
            this._stream && this._stream != this._loading ? (i = this._stream.loaders.video,
            n = e) : (i = e,
            n = {
                queue: []
            });
            var s = this._buffered.size(i.position, i.download);
            return s > this._limits.kilobytes || (s += i.queue.reduce(function(e, t) {
                return e + t.data.byteLength / 1024
            }, 0)) > this._limits.kilobytes || (s += n.queue.reduce(function(e, t) {
                return e + t.data.byteLength / 1024
            }, 0)) > this._limits.kilobytes
        }
        ,
        Ma.prototype.appendSegment = function(e) {
            var t = e.parent;
            "video" == t.parent.type && this._limits.kilobytes != 1 / 0 && this._buffered.append({
                s: e.start,
                e: e.end,
                b: t.detail.bandwidth
            }, "merge")
        }
        ,
        Ma.prototype.updateBuffered = function(e) {
            this._limits.kilobytes != 1 / 0 && this._buffered.update(e)
        }
        ,
        Ma.prototype.stopStream = function(e) {
            this._loading == e && (this._loading = null)
        }
        ,
        Ma.prototype.changeActiveCue = function(e) {
            var t = e.representationId
              , i = e.adaptationSetId
              , n = e.cdn
              , r = e.reason
              , s = {
                id: t,
                adaptationSetId: i,
                dataType: e.type,
                isInitial: e.isInitial,
                cdn: n,
                reason: r,
                message: e.message
            }
              , a = this._cues.find(function(e) {
                return e.id == s.id && e.cdn == s.cdn && e.adaptationSetId == s.adaptationSetId
            });
            null != a ? Ra.changeActiveCue(this._track, a, s) : this._records.push(s)
        }
        ,
        Object.defineProperties(Ma.prototype, Oa);
        var xa = function(e, t) {
            this.audio = e,
            this.video = t
        }
          , Na = function(e, t) {
            this.duration = e || 0,
            this.firstTimestamp = t || 0
        }
          , Ua = {
            42: 225,
            92: 233,
            94: 237,
            95: 243,
            96: 250,
            123: 231,
            124: 247,
            125: 209,
            126: 241,
            127: 9608,
            128: 174,
            129: 176,
            130: 189,
            131: 191,
            132: 8482,
            133: 162,
            134: 163,
            135: 9834,
            136: 224,
            137: 32,
            138: 232,
            139: 226,
            140: 234,
            141: 238,
            142: 244,
            143: 251,
            144: 193,
            145: 201,
            146: 211,
            147: 218,
            148: 220,
            149: 252,
            150: 8216,
            151: 161,
            152: 42,
            153: 8217,
            154: 9473,
            155: 169,
            156: 8480,
            157: 8226,
            158: 8220,
            159: 8221,
            160: 192,
            161: 194,
            162: 199,
            163: 200,
            164: 202,
            165: 203,
            166: 235,
            167: 206,
            168: 207,
            169: 239,
            170: 212,
            171: 217,
            172: 249,
            173: 219,
            174: 171,
            175: 187,
            176: 195,
            177: 227,
            178: 205,
            179: 204,
            180: 236,
            181: 210,
            182: 242,
            183: 213,
            184: 245,
            185: 123,
            186: 125,
            187: 92,
            188: 94,
            189: 95,
            190: 124,
            191: 8764,
            192: 196,
            193: 228,
            194: 214,
            195: 246,
            196: 223,
            197: 165,
            198: 164,
            199: 9475,
            200: 197,
            201: 229,
            202: 216,
            203: 248,
            204: 9487,
            205: 9491,
            206: 9495,
            207: 9499
        }
          , Ba = function(e) {
            var t = e;
            return Ua.hasOwnProperty(e) && (t = Ua[e]),
            String.fromCharCode(t)
        }
          , Fa = {
            17: 1,
            18: 3,
            21: 5,
            22: 7,
            23: 9,
            16: 11,
            19: 12,
            20: 14
        }
          , Va = {
            17: 2,
            18: 4,
            21: 6,
            22: 8,
            23: 10,
            19: 13,
            20: 15
        }
          , Ha = {
            25: 1,
            26: 3,
            29: 5,
            30: 7,
            31: 9,
            24: 11,
            27: 12,
            28: 14
        }
          , ja = {
            25: 2,
            26: 4,
            29: 6,
            30: 8,
            31: 10,
            27: 13,
            28: 15
        }
          , Wa = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "black", "transparent"]
          , Ga = {
            verboseFilter: {
                DATA: 3,
                DEBUG: 3,
                INFO: 2,
                WARNING: 2,
                TEXT: 1,
                ERROR: 0
            },
            _time: null,
            verboseLevel: 0,
            setTime: function setTime(e) {
                this._time = e
            },
            getTime: function getTime() {
                return this._time
            },
            log: function log(e, t) {
                var i = this.verboseFilter[e];
                this.verboseLevel >= i && console.log(this.time + " [" + e + "] " + t)
            }
        }
          , Ka = function(e) {
            for (var t = [], i = 0; i < e.length; i++) {
                t.push(e[i].toString(16))
            }
            return t
        }
          , za = function(e, t, i, n, r) {
            this.foreground = e || "white",
            this.underline = t || !1,
            this.italics = i || !1,
            this.background = n || "black",
            this.flash = r || !1
        };
        za.prototype = {
            reset: function reset() {
                this.foreground = "white",
                this.underline = !1,
                this.italics = !1,
                this.background = "black",
                this.flash = !1
            },
            setStyles: function setStyles(e) {
                for (var t = ["foreground", "underline", "italics", "background", "flash"], i = 0; i < t.length; i++) {
                    var n = t[i];
                    e.hasOwnProperty(n) && (this[n] = e[n])
                }
            },
            isDefault: function isDefault() {
                return "white" === this.foreground && !this.underline && !this.italics && "black" === this.background && !this.flash
            },
            equals: function equals(e) {
                return this.foreground === e.foreground && this.underline === e.underline && this.italics === e.italics && this.background === e.background && this.flash === e.flash
            },
            copy: function copy(e) {
                this.foreground = e.foreground,
                this.underline = e.underline,
                this.italics = e.italics,
                this.background = e.background,
                this.flash = e.flash
            },
            toString: function toString() {
                return "color=" + this.foreground + ", underline=" + this.underline + ", italics=" + this.italics + ", background=" + this.background + ", flash=" + this.flash
            }
        };
        var qa = function(e, t, i, n, r, s) {
            this.uchar = e || " ",
            this.penState = new za(t,i,n,r,s)
        };
        qa.prototype = {
            reset: function reset() {
                this.uchar = " ",
                this.penState.reset()
            },
            setChar: function setChar(e, t) {
                this.uchar = e,
                this.penState.copy(t)
            },
            setPenState: function setPenState(e) {
                this.penState.copy(e)
            },
            equals: function equals(e) {
                return this.uchar === e.uchar && this.penState.equals(e.penState)
            },
            copy: function copy(e) {
                this.uchar = e.uchar,
                this.penState.copy(e.penState)
            },
            isEmpty: function isEmpty() {
                return " " === this.uchar && this.penState.isDefault()
            }
        };
        var Ya = function() {
            this.chars = [];
            for (var e = 0; e < 32; e++) {
                this.chars.push(new qa)
            }
            this.pos = 0,
            this.currPenState = new za
        };
        Ya.prototype = {
            equals: function equals(e) {
                for (var t = !0, i = 0; i < 32; i++) {
                    if (!this.chars[i].equals(e.chars[i])) {
                        t = !1;
                        break
                    }
                }
                return t
            },
            copy: function copy(e) {
                for (var t = 0; t < 32; t++) {
                    this.chars[t].copy(e.chars[t])
                }
            },
            isEmpty: function isEmpty() {
                for (var e = !0, t = 0; t < 32; t++) {
                    if (!this.chars[t].isEmpty()) {
                        e = !1;
                        break
                    }
                }
                return e
            },
            setCursor: function setCursor(e) {
                this.pos !== e && (this.pos = e),
                this.pos < 0 ? (Ga.log("ERROR", "Negative cursor position " + this.pos),
                this.pos = 0) : this.pos > 32 && (Ga.log("ERROR", "Too large cursor position " + this.pos),
                this.pos = 32)
            },
            moveCursor: function moveCursor(e) {
                var t = this.pos + e;
                if (e > 1)
                    for (var i = this.pos + 1; i < t + 1 && i < 32; i++) {
                        this.chars[i].setPenState(this.currPenState)
                    }
                this.setCursor(t)
            },
            backSpace: function backSpace() {
                this.moveCursor(-1),
                this.chars[this.pos].setChar(" ", this.currPenState)
            },
            insertChar: function insertChar(e) {
                e >= 144 && this.backSpace();
                var t = Ba(e);
                this.pos >= 32 ? Ga.log("ERROR", "Cannot insert " + e.toString(16) + " (" + t + ") at position " + this.pos + ". Skipping it!") : (this.chars[this.pos].setChar(t, this.currPenState),
                this.moveCursor(1))
            },
            clearFromPos: function clearFromPos(e) {
                var t;
                for (t = e; t < 32; t++) {
                    this.chars[t].reset()
                }
            },
            clear: function clear() {
                this.clearFromPos(0),
                this.pos = 0,
                this.currPenState.reset()
            },
            clearToEndOfRow: function clearToEndOfRow() {
                this.clearFromPos(this.pos)
            },
            getTextString: function getTextString() {
                for (var e = [], t = !0, i = 0; i < 32; i++) {
                    var n = this.chars[i].uchar;
                    " " !== n && (t = !1),
                    e.push(n)
                }
                return t ? "" : e.join("")
            },
            setPenStyles: function setPenStyles(e) {
                this.currPenState.setStyles(e),
                this.chars[this.pos].setPenState(this.currPenState)
            }
        };
        var Qa = function() {
            this.rows = [];
            for (var e = 0; e < 15; e++) {
                this.rows.push(new Ya)
            }
            this.currRow = 14,
            this.nrRollUpRows = null,
            this.reset()
        };
        Qa.prototype = {
            reset: function reset() {
                for (var e = 0; e < 15; e++) {
                    this.rows[e].clear()
                }
                this.currRow = 14
            },
            equals: function equals(e) {
                for (var t = !0, i = 0; i < 15; i++) {
                    if (!this.rows[i].equals(e.rows[i])) {
                        t = !1;
                        break
                    }
                }
                return t
            },
            copy: function copy(e) {
                for (var t = 0; t < 15; t++) {
                    this.rows[t].copy(e.rows[t])
                }
            },
            isEmpty: function isEmpty() {
                for (var e = !0, t = 0; t < 15; t++) {
                    if (!this.rows[t].isEmpty()) {
                        e = !1;
                        break
                    }
                }
                return e
            },
            backSpace: function backSpace() {
                this.rows[this.currRow].backSpace()
            },
            clearToEndOfRow: function clearToEndOfRow() {
                this.rows[this.currRow].clearToEndOfRow()
            },
            insertChar: function insertChar(e) {
                this.rows[this.currRow].insertChar(e)
            },
            setPen: function setPen(e) {
                this.rows[this.currRow].setPenStyles(e)
            },
            moveCursor: function moveCursor(e) {
                this.rows[this.currRow].moveCursor(e)
            },
            setCursor: function setCursor(e) {
                Ga.log("INFO", "setCursor: " + e),
                this.rows[this.currRow].setCursor(e)
            },
            setPAC: function setPAC(e) {
                Ga.log("INFO", "pacData = " + JSON.stringify(e));
                var t = e.row - 1;
                this.nrRollUpRows && t < this.nrRollUpRows - 1 && (t = this.nrRollUpRows - 1),
                this.currRow = t;
                var i = this.rows[this.currRow];
                if (null !== e.indent) {
                    var n = e.indent
                      , r = Math.max(n - 1, 0);
                    i.setCursor(e.indent),
                    e.color = i.chars[r].penState.foreground
                }
                var s = {
                    foreground: e.color,
                    underline: e.underline,
                    italics: e.italics,
                    background: "black",
                    flash: !1
                };
                this.setPen(s)
            },
            setBkgData: function setBkgData(e) {
                Ga.log("INFO", "bkgData = " + JSON.stringify(e)),
                this.backSpace(),
                this.setPen(e),
                this.insertChar(32)
            },
            setRollUpRows: function setRollUpRows(e) {
                this.nrRollUpRows = e
            },
            rollUp: function rollUp() {
                if (null !== this.nrRollUpRows) {
                    Ga.log("TEXT", this.getDisplayText());
                    var e = this.currRow + 1 - this.nrRollUpRows
                      , t = this.rows.splice(e, 1)[0];
                    t.clear(),
                    this.rows.splice(this.currRow, 0, t),
                    Ga.log("INFO", "Rolling up")
                } else
                    Ga.log("DEBUG", "roll_up but nrRollUpRows not set yet")
            },
            getDisplayText: function getDisplayText(e) {
                e = e || !1;
                for (var t = [], i = "", n = -1, r = 0; r < 15; r++) {
                    var s = this.rows[r].getTextString();
                    s && (n = r + 1,
                    e ? t.push("Row " + n + ": \"" + s + "\"") : t.push(s.trim()))
                }
                return t.length > 0 && (i = e ? "[" + t.join(" | ") + "]" : t.join("\n")),
                i
            },
            getTextAndFormat: function getTextAndFormat() {
                return this.rows
            }
        };
        var $a = function(e, t) {
            this.chNr = e,
            this.outputFilter = t,
            this.mode = null,
            this.verbose = 0,
            this.displayedMemory = new Qa,
            this.nonDisplayedMemory = new Qa,
            this.lastOutputScreen = new Qa,
            this.currRollUpRow = this.displayedMemory.rows[14],
            this.writeScreen = this.displayedMemory,
            this.mode = null,
            this.cueStartTime = null,
            this.pendingOutputDataUpdate = !1
        };
        $a.prototype = {
            modes: ["MODE_ROLL-UP", "MODE_POP-ON", "MODE_PAINT-ON", "MODE_TEXT"],
            reset: function reset() {
                this.mode = null,
                this.displayedMemory.reset(),
                this.nonDisplayedMemory.reset(),
                this.lastOutputScreen.reset(),
                this.currRollUpRow = this.displayedMemory.rows[14],
                this.writeScreen = this.displayedMemory,
                this.mode = null,
                this.cueStartTime = null,
                this.lastCueEndTime = null,
                this.pendingOutputDataUpdate = !1
            },
            getHandler: function getHandler() {
                return this.outputFilter
            },
            setHandler: function setHandler(e) {
                this.outputFilter = e
            },
            setPAC: function setPAC(e) {
                this.writeScreen.setPAC(e)
            },
            setBkgData: function setBkgData(e) {
                this.writeScreen.setBkgData(e)
            },
            setMode: function setMode(e) {
                e !== this.mode && (this.mode = e,
                Ga.log("INFO", "MODE=" + e),
                "MODE_POP-ON" == this.mode ? this.writeScreen = this.nonDisplayedMemory : (this.writeScreen = this.displayedMemory,
                this.writeScreen.reset()),
                "MODE_ROLL-UP" !== this.mode && (this.displayedMemory.nrRollUpRows = null,
                this.nonDisplayedMemory.nrRollUpRows = null),
                this.mode = e)
            },
            insertChars: function insertChars(e) {
                for (var t = 0; t < e.length; t++) {
                    this.writeScreen.insertChar(e[t])
                }
                var i = this.writeScreen === this.displayedMemory ? "DISP" : "NON_DISP";
                Ga.log("INFO", i + ": " + this.writeScreen.getDisplayText(!0)),
                "MODE_PAINT-ON" !== this.mode && "MODE_ROLL-UP" !== this.mode || (Ga.log("TEXT", "DISPLAYED: " + this.displayedMemory.getDisplayText(!0)),
                this.pendingOutputDataUpdate = !0)
            },
            cc_RCL: function cc_RCL() {
                Ga.log("INFO", "RCL - Resume Caption Loading"),
                this.setMode("MODE_POP-ON")
            },
            cc_BS: function cc_BS() {
                Ga.log("INFO", "BS - BackSpace"),
                "MODE_TEXT" !== this.mode && (this.writeScreen.backSpace(),
                this.writeScreen === this.displayedMemory && (this.pendingOutputDataUpdate = !0))
            },
            cc_AOF: function cc_AOF() {},
            cc_AON: function cc_AON() {},
            cc_DER: function cc_DER() {
                Ga.log("INFO", "DER- Delete to End of Row"),
                this.writeScreen.clearToEndOfRow(),
                this.pendingOutputDataUpdate = !0
            },
            cc_RU: function cc_RU(e) {
                Ga.log("INFO", "RU(" + e + ") - Roll Up"),
                this.writeScreen = this.displayedMemory,
                this.setMode("MODE_ROLL-UP"),
                this.writeScreen.setRollUpRows(e)
            },
            cc_FON: function cc_FON() {
                Ga.log("INFO", "FON - Flash On"),
                this.writeScreen.setPen({
                    flash: !0
                })
            },
            cc_RDC: function cc_RDC() {
                Ga.log("INFO", "RDC - Resume Direct Captioning"),
                this.setMode("MODE_PAINT-ON")
            },
            cc_TR: function cc_TR() {
                Ga.log("INFO", "TR"),
                this.setMode("MODE_TEXT")
            },
            cc_RTD: function cc_RTD() {
                Ga.log("INFO", "RTD"),
                this.setMode("MODE_TEXT")
            },
            cc_EDM: function cc_EDM() {
                Ga.log("INFO", "EDM - Erase Displayed Memory"),
                this.displayedMemory.reset(),
                this.pendingOutputDataUpdate = !0
            },
            cc_CR: function cc_CR() {
                Ga.log("CR - Carriage Return"),
                this.writeScreen.rollUp(),
                this.pendingOutputDataUpdate = !0
            },
            cc_ENM: function cc_ENM() {
                Ga.log("INFO", "ENM - Erase Non-displayed Memory"),
                this.nonDisplayedMemory.reset()
            },
            cc_EOC: function cc_EOC() {
                if (Ga.log("INFO", "EOC - End Of Caption"),
                "MODE_POP-ON" === this.mode) {
                    var e = this.displayedMemory;
                    this.displayedMemory = this.nonDisplayedMemory,
                    this.nonDisplayedMemory = e,
                    this.writeScreen = this.nonDisplayedMemory,
                    Ga.log("TEXT", "DISP: " + this.displayedMemory.getDisplayText())
                }
                this.pendingOutputDataUpdate = !0
            },
            cc_TO: function cc_TO(e) {
                Ga.log("INFO", "TO(" + e + ") - Tab Offset"),
                this.writeScreen.moveCursor(e)
            },
            cc_MIDROW: function cc_MIDROW(e) {
                var t = {
                    flash: !1
                };
                if (t.underline = e % 2 == 1,
                t.italics = e >= 46,
                t.italics)
                    t.foreground = "white";
                else {
                    var i = Math.floor(e / 2) - 16;
                    t.foreground = ["white", "green", "blue", "cyan", "red", "yellow", "magenta"][i]
                }
                Ga.log("INFO", "MIDROW: " + JSON.stringify(t)),
                this.writeScreen.setPen(t)
            },
            outputDataUpdate: function outputDataUpdate() {
                var e = Ga.getTime();
                null !== e && this.outputFilter && (this.outputFilter.updateData && this.outputFilter.updateData(e, this.displayedMemory),
                null !== this.cueStartTime || this.displayedMemory.isEmpty() ? this.displayedMemory.equals(this.lastOutputScreen) || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, e, this.lastOutputScreen),
                this.cueStartTime = this.displayedMemory.isEmpty() ? null : e) : this.cueStartTime = e,
                this.lastOutputScreen.copy(this.displayedMemory))
            },
            cueSplitAtTime: function cueSplitAtTime(e) {
                this.outputFilter && (this.displayedMemory.isEmpty() || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, e, this.displayedMemory),
                this.cueStartTime = e))
            }
        };
        var Xa = function(e, t, i) {
            this.field = e || 1,
            this.outputs = [t, i],
            this.channels = [new $a(1,t), new $a(2,i)],
            this.currChNr = -1,
            this.lastCmdA = null,
            this.lastCmdB = null,
            this.bufferedData = [],
            this.startTime = null,
            this.lastTime = null,
            this.dataCounters = {
                padding: 0,
                char: 0,
                cmd: 0,
                other: 0
            }
        };
        Xa.prototype = {
            getHandler: function getHandler(e) {
                return this.channels[e].getHandler()
            },
            setHandler: function setHandler(e, t) {
                this.channels[e].setHandler(t)
            },
            addData: function addData(e, t) {
                var i, n, r, s = !1;
                this.lastTime = e,
                Ga.setTime(e),
                this.channels.forEach(function(e) {
                    return e.pendingOutputDataUpdate = !1
                });
                for (var a = 0; a < t.length; a += 2) {
                    if (n = 127 & t[a],
                    r = 127 & t[a + 1],
                    0 !== n || 0 !== r) {
                        if (Ga.log("DATA", "[CCDATA] [" + Ka([t[a], t[a + 1]]) + "] -> (" + Ka([n, r]) + ")"),
                        (i = this.parseCmd(n, r)) || (i = this.parseMidrow(n, r)),
                        i || (i = this.parsePAC(n, r)),
                        i || (i = this.parseBackgroundAttributes(n, r)),
                        !i)
                            if (s = this.parseChars(n, r))
                                if (this.currChNr && this.currChNr >= 0)
                                    this.channels[this.currChNr - 1].insertChars(s);
                                else
                                    Ga.log("WARNING", "No channel found yet. TEXT-MODE?");
                        i ? (this.dataCounters.cmd += 2,
                        Ga.log("DATA", "CMD [" + Ka([t[a], t[a + 1]]) + "] -> (" + Ka([n, r]) + ")")) : s ? this.dataCounters.char += 2 : (this.dataCounters.other += 2,
                        Ga.log("WARNING", "Couldn't parse cleaned data " + Ka([n, r]) + " orig: " + Ka([t[a], t[a + 1]])))
                    } else
                        this.dataCounters.padding += 2
                }
                this.channels.forEach(function(e) {
                    e.pendingOutputDataUpdate && e.outputDataUpdate()
                })
            },
            parseCmd: function parseCmd(e, t) {
                var i = null;
                if (!((20 === e || 28 === e) && 32 <= t && t <= 47) && !((23 === e || 31 === e) && 33 <= t && t <= 35))
                    return !1;
                if (e === this.lastCmdA && t === this.lastCmdB)
                    return this.lastCmdA = null,
                    this.lastCmdB = null,
                    Ga.log("DEBUG", "Repeated command (" + Ka([e, t]) + ") is dropped"),
                    !0;
                i = 20 === e || 23 === e ? 1 : 2;
                var n = this.channels[i - 1];
                return 20 === e || 28 === e ? 32 === t ? n.cc_RCL() : 33 === t ? n.cc_BS() : 34 === t ? n.cc_AOF() : 35 === t ? n.cc_AON() : 36 === t ? n.cc_DER() : 37 === t ? n.cc_RU(2) : 38 === t ? n.cc_RU(3) : 39 === t ? n.cc_RU(4) : 40 === t ? n.cc_FON() : 41 === t ? n.cc_RDC() : 42 === t ? n.cc_TR() : 43 === t ? n.cc_RTD() : 44 === t ? n.cc_EDM() : 45 === t ? n.cc_CR() : 46 === t ? n.cc_ENM() : 47 === t && n.cc_EOC() : n.cc_TO(t - 32),
                this.lastCmdA = e,
                this.lastCmdB = t,
                this.currChNr = i,
                !0
            },
            parseMidrow: function parseMidrow(e, t) {
                var i = null;
                return (17 === e || 25 === e) && 32 <= t && t <= 47 && ((i = 17 === e ? 1 : 2) !== this.currChNr ? (Ga.log("ERROR", "Mismatch channel in midrow parsing"),
                !1) : (this.channels[i - 1].cc_MIDROW(t),
                Ga.log("DEBUG", "MIDROW (" + Ka([e, t]) + ")"),
                !0))
            },
            parsePAC: function parsePAC(e, t) {
                var i, n = null;
                if (!((17 <= e && e <= 23 || 25 <= e && e <= 31) && 64 <= t && t <= 127) && !((16 === e || 24 === e) && 64 <= t && t <= 95))
                    return !1;
                if (e === this.lastCmdA && t === this.lastCmdB)
                    return this.lastCmdA = null,
                    this.lastCmdB = null,
                    !0;
                i = e <= 23 ? 1 : 2,
                n = 64 <= t && t <= 95 ? 1 === i ? Fa[e] : Ha[e] : 1 === i ? Va[e] : ja[e];
                var r = this.interpretPAC(n, t);
                return this.channels[i - 1].setPAC(r),
                this.lastCmdA = e,
                this.lastCmdB = t,
                this.currChNr = i,
                !0
            },
            interpretPAC: function interpretPAC(e, t) {
                var i = t
                  , n = {
                    color: null,
                    italics: !1,
                    indent: null,
                    underline: !1,
                    row: e
                };
                return i = t > 95 ? t - 96 : t - 64,
                n.underline = 1 == (1 & i),
                i <= 13 ? n.color = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "white"][Math.floor(i / 2)] : i <= 15 ? (n.italics = !0,
                n.color = "white") : n.indent = 4 * Math.floor((i - 16) / 2),
                n
            },
            parseChars: function parseChars(e, t) {
                var i = null
                  , n = null
                  , r = null;
                if (e >= 25 ? (i = 2,
                r = e - 8) : (i = 1,
                r = e),
                17 <= r && r <= 19) {
                    var s = t;
                    s = 17 === r ? t + 80 : 18 === r ? t + 112 : t + 144,
                    Ga.log("INFO", "Special char '" + Ba(s) + "' in channel " + i),
                    n = [s]
                } else
                    32 <= e && e <= 127 && (n = 0 === t ? [e] : [e, t]);
                if (n) {
                    var a = Ka(n);
                    Ga.log("DEBUG", "Char codes =  " + a.join(",")),
                    this.lastCmdA = null,
                    this.lastCmdB = null
                }
                return n
            },
            parseBackgroundAttributes: function parseBackgroundAttributes(e, t) {
                var i, n, r;
                return ((16 === e || 24 === e) && 32 <= t && t <= 47 || (23 === e || 31 === e) && 45 <= t && t <= 47) && (i = {},
                16 === e || 24 === e ? (n = Math.floor((t - 32) / 2),
                i.background = Wa[n],
                t % 2 == 1 && (i.background = i.background + "_semi")) : 45 === t ? i.background = "transparent" : (i.foreground = "black",
                47 === t && (i.underline = !0)),
                r = e < 24 ? 1 : 2,
                this.channels[r - 1].setBkgData(i),
                this.lastCmdA = null,
                this.lastCmdB = null,
                !0)
            },
            reset: function reset() {
                for (var e = 0; e < this.channels.length; e++) {
                    this.channels[e] && this.channels[e].reset()
                }
                this.lastCmdA = null,
                this.lastCmdB = null
            },
            cueSplitAtTime: function cueSplitAtTime(e) {
                for (var t = 0; t < this.channels.length; t++) {
                    this.channels[t] && this.channels[t].cueSplitAtTime(e)
                }
            }
        };
        var Ja = z.NUMERICAL_EPS
          , Za = function(e, t) {
            this.time = e,
            this.u8data = t
        }
          , eo = {
            id: {
                configurable: !0
            },
            data: {
                configurable: !0
            },
            startTime: {
                configurable: !0
            },
            endTime: {
                configurable: !0
            }
        };
        eo.id.get = function() {
            return "cc" + this.time.toFixed(3)
        }
        ,
        eo.data.get = function() {
            return this.u8data.buffer
        }
        ,
        eo.startTime.get = function() {
            return this.time
        }
        ,
        eo.endTime.get = function() {
            return this.time + 4
        }
        ,
        Object.defineProperties(Za.prototype, eo),
        re.inject(Za.prototype);
        var to = function() {
            this._cues = [],
            this._track = new Ia(z.TrackId.CAPTIONS,"captions")
        }
          , io = {
            tracks: {
                configurable: !0
            }
        };
        to.prototype.parseSegment = function(e, t, i) {
            var n, r = e.parent;
            if ("video" == r.parent.type) {
                t = new DataView(t);
                var s = i.find("mdat")
                  , a = i.find("trun");
                if (s && a) {
                    for (var o = [], l = i.find("tfdt") || {
                        baseDTS: 0
                    }, d = a.samples, u = 0; u < d.length; ++u) {
                        d[u].dts = 0 == u ? l.baseDTS : d[u - 1].dts + d[u - 1].duration,
                        d[u].offset = 0 == u ? s.offset + 8 : d[u - 1].offset + d[u - 1].size;
                        var c = this._extractCCData(t, d[u]);
                        if (c.length > 0) {
                            var h = (d[u].dts + d[u].cts - r.pto) / r.timescale;
                            o.push(new Za(h,new Uint8Array(c)))
                        }
                    }
                    if (0 != o.length) {
                        o[0].first = !0,
                        o.sort(function(e, t) {
                            return e.time - t.time
                        });
                        var p = this._getCueAtOrAfter(o[0].time - Ja)
                          , _ = this._getCueAtOrAfter(o[o.length - 1].time + Ja);
                        (n = this._cues).splice.apply(n, [p, _ - p].concat(o))
                    }
                }
            }
        }
        ,
        to.prototype.updateTime = function(e) {
            if (null == e)
                this._last = null,
                this._changeCueList([], {
                    emptied: !0
                });
            else {
                if (e == this._last)
                    return;
                var t = null != this._last && Math.abs(e - this._last) < z.SEEK_EPS;
                if (t) {
                    if (e < this._last)
                        return
                } else
                    null != this._last && this._changeCueList([], {
                        emptied: !0
                    });
                var i = t ? this._getCueAtOrAfter(this._last) : this._getStartCueBefore(e)
                  , n = this._getCueAtOrAfter(e + z.PROGRESS_INTERVAL / 2e3)
                  , r = this._cues.slice(i, n);
                this._changeCueList(r, {}),
                r.length > 0 ? this._last = r[r.length - 1].time + Ja : this._last = e
            }
        }
        ,
        to.prototype.updateBuffered = function(e) {
            for (var t = 0, i = 0, n = []; t < e.length && i < this._cues.length; ) {
                var r = this._cues[i];
                r.time < e.start(t) - 15 ? ++i : r.time < e.end(t) + 15 ? (n.push(r),
                ++i) : ++t
            }
            this._cues = n
        }
        ,
        to.prototype.clear = function() {
            this._changeCueList([], {
                emptied: !0
            }),
            this._cues = [],
            this._last = null
        }
        ,
        io.tracks.get = function() {
            return [this._track]
        }
        ,
        to.prototype._extractCCData = function(e, t) {
            for (var i = [], n = 0, r = function(e, t, i) {
                for (var n = 0, r = t, s = [], a = function(e, t, i, n) {
                    if (4 !== e || t < 8)
                        return null;
                    var r = i.getUint8(n)
                      , s = i.getUint16(n + 1)
                      , a = i.getUint32(n + 3)
                      , o = i.getUint8(n + 7);
                    return 181 == r && 49 == s && 1195456820 == a && 3 == o
                }; r < t + i; ) {
                    if (n = e.getUint32(r),
                    6 === (31 & e.getUint8(r + 4)))
                        for (var o = r + 5, l = -1; o < r + 4 + n - 1; ) {
                            l = 0;
                            for (var d = 255; 255 === d; ) {
                                l += d = e.getUint8(o),
                                o++
                            }
                            var u = 0;
                            for (d = 255; 255 === d; ) {
                                u += d = e.getUint8(o),
                                o++
                            }
                            4 === u && 4 === l && (u = e.getUint8(o++)),
                            a(l, u, e, o) && s.push([o, u]);
                            for (var c = 16777215, h = 0; h < u && o < e.byteLength; ) {
                                768 !== (c = c << 8 | (d = e.getUint8(o++))) && 769 !== c && 770 !== c && 771 !== c && ++h
                            }
                        }
                    r += n + 4
                }
                return s
            }(e, t.offset, t.size); n < r.length; n += 1) {
                var s = r[n][0] + 8
                  , a = 31 & e.getUint8(s++);
                for (s++; a-- > 0; ) {
                    var o = 7 & e.getUint8(s);
                    4 == o || 5 == o ? (i.push(e.getUint8(s++)),
                    i.push(e.getUint8(s++)),
                    i.push(e.getUint8(s++))) : s += 3
                }
            }
            return i
        }
        ,
        to.prototype._getCueAtOrAfter = function(e) {
            for (var t = 0, i = this._cues.length; t < i; ) {
                var n = t + i >> 1;
                this._cues[n].time < e ? t = n + 1 : i = n
            }
            return t
        }
        ,
        to.prototype._getStartCueBefore = function(e) {
            for (var t = this._getCueAtOrAfter(e), i = t - 1; i >= 0; --i) {
                var n = this._cues[i];
                if (n.first)
                    return i;
                if (n.time < e - 15)
                    break
            }
            return t
        }
        ,
        to.prototype._changeCueList = function(e, t) {
            var i, n = this;
            (0 != this._track.cues.length || 0 != e.length || t.emptied) && (t.emptied && 0 == this._cues.length || ((i = Array.prototype.splice).call.apply(i, [this._track.cues, 0, this._track.cues.length].concat(e)),
            t.data = Array.prototype.reduce.call(this._track.cues, function(e, t) {
                return e.push.apply(e, t.u8data),
                e
            }, []),
            t.startTime = Date.now(),
            setTimeout(function() {
                return n._track.dispatchEvent(new CustomEvent(q.Track.CUE_FRAGMENT,{
                    detail: t
                }))
            })))
        }
        ,
        Object.defineProperties(to.prototype, io);
        var no = function(e) {
            this.id = e.id,
            this._unit = e
        }
          , ro = {
            type: {
                configurable: !0
            },
            vast: {
                configurable: !0
            },
            startTime: {
                configurable: !0
            },
            endTime: {
                configurable: !0
            },
            assetIdentifier: {
                configurable: !0
            },
            segmentType: {
                configurable: !0
            },
            vastRequired: {
                configurable: !0
            }
        };
        ro.type.get = function() {
            return this._unit.type
        }
        ,
        ro.vast.get = function() {
            return this._unit.detail.vast
        }
        ,
        ro.startTime.get = function() {
            return Math.max(this._unit.start, 0)
        }
        ,
        ro.endTime.get = function() {
            var e = 0;
            return this._unit.infinity ? this._unit.seekable.length > 0 && (e = this._unit.seekable[1]) : e = this._unit.duration,
            Math.max(this._unit.start + e, 0)
        }
        ,
        ro.assetIdentifier.get = function() {
            return this._unit.detail.assetIdentifier
        }
        ,
        ro.segmentType.get = function() {
            return this._unit.detail.segmentType
        }
        ,
        ro.vastRequired.get = function() {
            return this.type == z.CueType.AD && (this._unit.subordinate ? "xlink" == this._unit.subordinate.origin : !!this._unit.timeline && "xlink" == this._unit.timeline.origin)
        }
        ,
        Object.defineProperties(no.prototype, ro),
        re.inject(no.prototype);
        var so = function() {
            this._topTrack = new Ia(z.TrackId.CHAPTERS,"chapters"),
            this._subTrack = new Ia(z.TrackId.SUB_CHAPTERS,"chapters"),
            this._period = null
        }
          , ao = {
            tracks: {
                configurable: !0
            }
        };
        ao.tracks.get = function() {
            return [this._topTrack, this._subTrack]
        }
        ,
        so.prototype.replace = function(e, t) {
            var i = t.map(function(e) {
                return new no(e)
            });
            Ra.replaceCueList(this._topTrack, e, 1, i)
        }
        ,
        so.prototype.update = function(e) {
            for (var t = [], i = "top" == e.level ? this._topTrack : this._subTrack, n = this._findDiffWithTimeline(i.cues, e), r = n; r < e.units.length; ++r) {
                t.push(new no(e.units[r]))
            }
            Ra.replaceCueList(i, n, i.cues.length - n, t, {
                initialize: 0 == n && t.length > 0,
                incrementFrom: n > 0 && t.length > 0 ? n : -1
            })
        }
        ,
        so.prototype.enter = function(e) {
            this._period = e;
            var t = "top" == e.timeline.level ? this._topTrack : this._subTrack;
            Ra.changeActiveCue(t, e.id)
        }
        ,
        so.prototype.leave = function(e, t) {
            var i = 0;
            1 & (i = null == this._period || this._period == e ? 0 : null == e ? 3 : "top" == this._period.timeline.level ? 2 : this._period.timeline == e.timeline ? 1 : 3) && Ra.changeActiveCue(this._subTrack, null, t),
            2 & i && (Ra.changeCueList(this._subTrack, []),
            Ra.changeActiveCue(this._topTrack, null, t)),
            this._period = null
        }
        ,
        so.prototype.shift = function(e) {
            Ra.shiftCueList(this._topTrack, e)
        }
        ,
        so.prototype.clear = function() {
            this._period = null,
            this._timeline = null,
            Ra.changeCueList(this._subTrack, []),
            Ra.changeCueList(this._topTrack, [])
        }
        ,
        so.prototype._findDiffWithTimeline = function(e, t) {
            for (var i = e.length; i > 0 && !this._isCueInTimeline(e[i - 1], t); ) {
                --i
            }
            return i
        }
        ,
        so.prototype._isCueInTimeline = function(e, t) {
            if (!e)
                return !0;
            for (var i = t.units, n = i.length - 1; n >= 0; --n) {
                if (e.id === i[n].id)
                    return !0;
                if (e.startTime > i[n].start + i[n].duration)
                    return !1
            }
            return !1
        }
        ,
        Object.defineProperties(so.prototype, ao);
        var oo = function(e) {
            return null == e ? [] : Array.prototype.slice.call(e)
        }
          , lo = function(e) {
            var t = /^(-)?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)+D)?(?:T(?:(\d+)+H)?(?:(\d+)M)?(?:(\d+)(?:.(\d+))?S)?)?$/.exec(e);
            return t ? t[2] || t[3] ? null : (t[8] = t[8] ? 1e3 * parseFloat("0." + t[8]) : 0,
            (t[1] ? -1 : 1) * (24 * parseInt(t[4] || 0) * 60 * 60 + 60 * parseInt(t[5] || 0) * 60 + 60 * parseInt(t[6] || 0) + parseInt(t[7] || 0) + t[8] / 1e3)) : null
        }
          , uo = function(e) {
            return null == e ? null : parseInt(e)
        }
          , co = function(e) {
            return e && Date.parse(e) / 1e3
        }
          , ho = function(e) {
            for (var t = atob(e), i = new Uint8Array(t.length), n = 0; n < t.length; ++n) {
                i[n] = t.charCodeAt(n)
            }
            return i.buffer
        }
          , po = function(e) {
            for (var t = {}, i = null, n = 0, r = oo(e.childNodes).filter(function(e) {
                return "BaseURL" === e.tagName
            }); n < r.length; n += 1) {
                var s = r[n];
                t[i = s.getAttribute("serviceLocation") || ""] || (t[i] = s.textContent)
            }
            return t
        }
          , _o = function(e, t) {
            this.representation = t,
            this.presentationTimeOffset = parseInt(e.getAttribute("presentationTimeOffset")),
            isNaN(this.presentationTimeOffset) && (this.presentationTimeOffset = 0),
            this.timescale = parseInt(e.getAttribute("timescale")),
            isNaN(this.timescale) && (this.timescale = 1),
            this.xml = e
        }
          , fo = {
            indexRange: {
                configurable: !0
            },
            initializationRange: {
                configurable: !0
            },
            period: {
                configurable: !0
            }
        };
        _o.prototype.bindRepresentation = function(e) {
            if (null != this.representation)
                throw Error("already have representation");
            var t = Object.create(this);
            return t.representation = e,
            t
        }
        ,
        fo.indexRange.get = function() {
            if (void 0 === this._indexRange)
                try {
                    var e = this.xml.getAttribute("indexRange").split("-");
                    this._indexRange = {
                        start: parseInt(e[0]),
                        end: parseInt(e[1])
                    }
                } catch (e) {
                    this._indexRange = null
                }
            return this._indexRange
        }
        ,
        fo.initializationRange.get = function() {
            if (void 0 === this._initializationRange)
                try {
                    var e = this.xml.getElementsByTagName("Initialization")[0].getAttribute("range").split("-");
                    this._initializationRange = {
                        start: parseInt(e[0]),
                        end: parseInt(e[1])
                    }
                } catch (e) {
                    this._initializationRange = null
                }
            return this._initializationRange
        }
        ,
        fo.period.get = function() {
            return this.representation && this.representation.period
        }
        ,
        Object.defineProperties(_o.prototype, fo);
        var go = function(e) {
            function t(t) {
                e.call(this, t),
                this.media = this.xml.getAttribute("media"),
                this.initialization = this.xml.getAttribute("initialization")
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(function(e) {
            function t(t) {
                e.call(this, t),
                this.duration = parseInt(this.xml.getAttribute("duration")),
                isNaN(this.duration) && (this.duration = null),
                this.startNumber = parseInt(this.xml.getAttribute("startNumber")),
                isNaN(this.startNumber) && (this.startNumber = 0)
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(_o))
          , mo = function(e, t) {
            this.adaptationSet = t,
            this.bandwidth = parseInt(e.getAttribute("bandwidth")),
            this.frameRate = e.getAttribute("frameRate"),
            this.height = uo(e.getAttribute("height")),
            this.id = e.getAttribute("id"),
            this.period = this.adaptationSet.period,
            this.samplingRate = e.getAttribute("audioSamplingRate"),
            this.sar = e.getAttribute("sar"),
            this.segmentBase = null,
            this.startWithSAP = uo(e.getAttribute("startWithSAP")),
            e.getElementsByTagName("SegmentBase").length && (this.segmentBase = new _o(e.getElementsByTagName("SegmentBase")[0],this)),
            this.width = uo(e.getAttribute("width")),
            this.xml = e
        }
          , yo = {
            baseUrls: {
                configurable: !0
            },
            huluProfileBandwidth: {
                configurable: !0
            },
            huluCdn: {
                configurable: !0
            },
            codecs: {
                configurable: !0
            },
            mimeType: {
                configurable: !0
            },
            segmentTemplate: {
                configurable: !0
            }
        };
        yo.baseUrls.get = function() {
            return void 0 === this._baseUrls && (this._baseUrls = Me.joinBaseUrls(this.adaptationSet.baseUrls, po(this.xml)),
            this._baseUrls.hasOwnProperty("") && "unknown" !== this.huluCdn && (this._baseUrls[this.huluCdn] = this._baseUrls[""],
            delete this._baseUrls[""])),
            this._baseUrls
        }
        ,
        yo.huluProfileBandwidth.get = function() {
            if (void 0 === this._huluProfileBandwidth) {
                var e = oo(this.xml.childNodes).filter(function(e) {
                    return "hulu:ProfileBandwidth" === e.tagName
                });
                this._huluProfileBandwidth = parseInt(e[0] ? e[0].textContent : this.bandwidth / 1024)
            }
            return this._huluProfileBandwidth
        }
        ,
        yo.huluCdn.get = function() {
            if (void 0 === this._huluCdn) {
                var e = oo(this.xml.childNodes).filter(function(e) {
                    return "hulu:Cdn" === e.tagName
                });
                this._huluCdn = e[0] && e[0].textContent || this.adaptationSet.period.mpd.huluCdn || "unknown"
            }
            return this._huluCdn.trim()
        }
        ,
        yo.codecs.get = function() {
            return void 0 === this._codecs && (this._codecs = this.xml.getAttribute("codecs") || this.adaptationSet.codecs),
            this._codecs
        }
        ,
        yo.mimeType.get = function() {
            return void 0 === this._mimeType && (this._mimeType = this.xml.getAttribute("mimeType") || this.adaptationSet.mimeType),
            this._mimeType
        }
        ,
        yo.segmentTemplate.get = function() {
            var e = this;
            return void 0 === this._segmentTemplate && (this._segmentTemplate = oo(this.xml.childNodes).filter(function(e) {
                return "SegmentTemplate" === e.tagName
            }).map(function(t) {
                return new go(t,e)
            })[0],
            !this._segmentTemplate && this.adaptationSet.segmentTemplate && (this._segmentTemplate = this.adaptationSet.segmentTemplate.bindRepresentation(this)),
            this._segmentTemplate || (this._segmentTemplate = null)),
            this._segmentTemplate
        }
        ,
        Object.defineProperties(mo.prototype, yo);
        var vo = function(e, t, i) {
            this.codecs = e.getAttribute("codecs"),
            this.id = e.getAttribute("id"),
            this.index = i,
            this.mimeType = e.getAttribute("mimeType"),
            this.language = e.getAttribute("lang"),
            this.maxFrameRate = e.getAttribute("maxFrameRate"),
            this.frameRate = e.getAttribute("frameRate"),
            this.maxHeight = uo(e.getAttribute("maxHeight")),
            this.maxWidth = uo(e.getAttribute("maxWidth")),
            this.period = t,
            this.xml = e
        }
          , Eo = {
            audioChannelConfigurations: {
                configurable: !0
            },
            baseUrls: {
                configurable: !0
            },
            contentProtections: {
                configurable: !0
            },
            representations: {
                configurable: !0
            },
            roles: {
                configurable: !0
            },
            segmentTemplate: {
                configurable: !0
            },
            sortedRepresentations: {
                configurable: !0
            },
            mergedRepresentationsAcrossCdn: {
                configurable: !0
            },
            supplementalProperties: {
                configurable: !0
            },
            essentialProperties: {
                configurable: !0
            }
        };
        Eo.audioChannelConfigurations.get = function() {
            return void 0 === this._audioChannelConfigurations && (this._audioChannelConfigurations = oo(this.xml.getElementsByTagName("AudioChannelConfiguration")).map(function(e) {
                return {
                    schemeIdUri: e.getAttribute("schemeIdUri"),
                    value: e.getAttribute("value")
                }
            })),
            this._audioChannelConfigurations
        }
        ,
        Eo.baseUrls.get = function() {
            return void 0 === this._baseUrls && (this._baseUrls = Me.joinBaseUrls(this.period.baseUrls, po(this.xml))),
            this._baseUrls
        }
        ,
        Eo.contentProtections.get = function() {
            return void 0 === this._contentProtections && (this._contentProtections = oo(this.xml.getElementsByTagName("ContentProtection")).map(function(e) {
                var t = null
                  , i = e.getElementsByTagNameNS("urn:mpeg:cenc:2013", "pssh");
                return i.length && (t = ho(i[0].textContent)),
                {
                    schemeIdUri: e.getAttribute("schemeIdUri"),
                    pssh: t
                }
            })),
            this._contentProtections
        }
        ,
        Eo.representations.get = function() {
            var e = this;
            return void 0 === this._representations && (this._representations = oo(this.xml.getElementsByTagName("Representation")).map(function(t) {
                return new mo(t,e)
            })),
            this._representations
        }
        ,
        Eo.roles.get = function() {
            return void 0 === this._roles && (this._roles = oo(this.xml.getElementsByTagName("Role")).concat(oo(this.xml.getElementsByTagName("Accessibility"))).filter(function(e) {
                return "urn:mpeg:dash:role:2011" == e.getAttribute("schemeIdUri")
            }).map(function(e) {
                return e.getAttribute("value")
            })),
            this._roles
        }
        ,
        Eo.segmentTemplate.get = function() {
            return void 0 === this._segmentTemplate && (this._segmentTemplate = oo(this.xml.childNodes).filter(function(e) {
                return "SegmentTemplate" === e.tagName
            }).map(function(e) {
                return new go(e)
            })[0] || null),
            this._segmentTemplate
        }
        ,
        Eo.sortedRepresentations.get = function() {
            return void 0 === this._sortedRepresentations && (this._sortedRepresentations = this.representations.map(function(e, t) {
                return [e, e.bandwidth, t]
            }).sort(function(e, t) {
                return e[1] - t[1] || e[2] - t[2]
            }).map(function(e) {
                return e[0]
            })),
            this._sortedRepresentations
        }
        ,
        Eo.mergedRepresentationsAcrossCdn.get = function() {
            if (void 0 === this._mergedRepresentationsAcrossCdn) {
                for (var e = function(_e2) {
                    var t = _e2.baseUrls[Object.keys(_e2.baseUrls)[0]]
                      , i = Math.floor(1e5 * Math.random());
                    try {
                        i = t.match(/^https?:\/\/[^/]*\/([^?]*)(\?|$)/)[1]
                    } catch (e) {}
                    return [_e2.id, i].join("-")
                }, t = [], i = function() {
                    var i = r[n]
                      , s = t[t.length - 1];
                    s && i.huluCdn && "unknown" != i.huluCdn && e(i) == e(s.rep) ? Object.keys(i.baseUrls).forEach(function(e) {
                        s.baseUrls[e || i.huluCdn] = i.baseUrls[e]
                    }) : t.push({
                        rep: i,
                        baseUrls: Object.assign({}, i.baseUrls)
                    })
                }, n = 0, r = this.sortedRepresentations; n < r.length; n += 1) {
                    i()
                }
                this._mergedRepresentationsAcrossCdn = t
            }
            return this._mergedRepresentationsAcrossCdn
        }
        ,
        Eo.supplementalProperties.get = function() {
            return void 0 === this._supplementalProperties && (this._supplementalProperties = oo(this.xml.getElementsByTagName("SupplementalProperty")).map(function(e) {
                return {
                    schemeIdUri: e.getAttribute("schemeIdUri"),
                    value: e.getAttribute("value"),
                    id: e.getAttribute("id")
                }
            })),
            this._supplementalProperties
        }
        ,
        Eo.essentialProperties.get = function() {
            return void 0 === this._essentialProperties && (this._essentialProperties = oo(this.xml.getElementsByTagName("EssentialProperty")).map(function(e) {
                return {
                    schemeIdUri: e.getAttribute("schemeIdUri"),
                    value: e.getAttribute("value"),
                    id: e.getAttribute("id")
                }
            })),
            this._essentialProperties
        }
        ,
        Object.defineProperties(vo.prototype, Eo);
        var bo = function(e) {
            this.schemeIdUri = e.getAttribute("schemeIdUri") || "",
            this.timescale = parseInt(e.getAttribute("timescale")) || 1,
            this.value = e.getAttribute("value"),
            this.xml = e
        }
          , To = {
            events: {
                configurable: !0
            }
        };
        To.events.get = function() {
            return void 0 === this._events && (this._events = oo(this.xml.getElementsByTagName("Event")).map(function(e) {
                return {
                    id: e.getAttribute("id"),
                    presentationTime: parseFloat(e.getAttribute("presentationTime")) || 0,
                    duration: parseFloat(e.getAttribute("duration")) || 0,
                    messageData: e.textContent.trim()
                }
            })),
            this._events
        }
        ,
        Object.defineProperties(bo.prototype, To);
        var So = function(e, t) {
            this.duration = lo(e.getAttribute("duration")),
            this.id = e.getAttribute("id") || "",
            this.mpd = t,
            this.start = lo(e.getAttribute("start")),
            this.xml = e
        }
          , Ao = {
            adaptationSets: {
                configurable: !0
            },
            audioAdaptationSets: {
                configurable: !0
            },
            assetIdentifier: {
                configurable: !0
            },
            supplementalProperties: {
                configurable: !0
            },
            essentialProperties: {
                configurable: !0
            },
            segmentType: {
                configurable: !0
            },
            eventStreams: {
                configurable: !0
            },
            videoAdaptationSets: {
                configurable: !0
            },
            baseUrls: {
                configurable: !0
            },
            xlinkUrl: {
                configurable: !0
            }
        };
        Ao.adaptationSets.get = function() {
            var e = this;
            if (void 0 === this._adaptationSets) {
                var t = this.xml.getElementsByTagName("AdaptationSet");
                this._adaptationSets = oo(t).map(function(t, i) {
                    return new vo(t,e,i)
                })
            }
            return this._adaptationSets
        }
        ,
        Ao.audioAdaptationSets.get = function() {
            return this.adaptationSets.filter(function(e) {
                return e.mimeType.indexOf("audio") >= 0
            })
        }
        ,
        Ao.assetIdentifier.get = function() {
            if (void 0 === this._assetIdentifier) {
                for (var e = this.xml.getElementsByTagName("AssetIdentifier"), t = null, i = 0; i < e.length && "urn:com:hulu:asset-id:2018" !== (t = {
                    schemeIdUri: e[i].getAttribute("schemeIdUri"),
                    value: e[i].getAttribute("value")
                }).schemeIdUri; i++) {}
                this._assetIdentifier = t
            }
            return this._assetIdentifier
        }
        ,
        Ao.supplementalProperties.get = function() {
            return void 0 === this._supplementalProperties && (this._supplementalProperties = oo(this.xml.getElementsByTagName("SupplementalProperty")).map(function(e) {
                return {
                    schemeIdUri: e.getAttribute("schemeIdUri"),
                    value: e.getAttribute("value"),
                    id: e.getAttribute("id")
                }
            })),
            this._supplementalProperties
        }
        ,
        Ao.essentialProperties.get = function() {
            return void 0 === this._essentialProperties && (this._essentialProperties = oo(this.xml.getElementsByTagName("EssentialProperty")).map(function(e) {
                return {
                    schemeIdUri: e.getAttribute("schemeIdUri"),
                    value: e.getAttribute("value"),
                    id: e.getAttribute("id")
                }
            })),
            this._essentialProperties
        }
        ,
        Ao.segmentType.get = function() {
            if (void 0 === this._segmentType) {
                var e = this.xml.getElementsByTagName("hulu:SegmentType")
                  , t = null;
                e.length > 0 && (t = {
                    schemeIdUri: e[0].getAttribute("schemeIdUri"),
                    value: e[0].getAttribute("value"),
                    subValue: e[0].getAttribute("subValue")
                }),
                this._segmentType = t
            }
            return this._segmentType
        }
        ,
        Ao.eventStreams.get = function() {
            if (void 0 === this._eventStreams) {
                var e = this.xml.getElementsByTagName("EventStream");
                this._eventStreams = oo(e).map(function(e) {
                    return new bo(e)
                })
            }
            return this._eventStreams
        }
        ,
        Ao.videoAdaptationSets.get = function() {
            return this.adaptationSets.filter(function(e) {
                return e.mimeType.indexOf("video") >= 0
            })
        }
        ,
        Ao.baseUrls.get = function() {
            return void 0 === this._baseUrls && (this._baseUrls = Me.joinBaseUrls(this.mpd.baseUrls, po(this.xml))),
            this._baseUrls
        }
        ,
        Ao.xlinkUrl.get = function() {
            if (void 0 === this._xlinkUrl) {
                var e = this.xml.getAttribute("xlink:href");
                this._xlinkUrl = e ? Me.joinUrl(this.baseUrls[Object.keys(this.baseUrls)[0]], e) : null
            }
            return this._xlinkUrl
        }
        ,
        Object.defineProperties(So.prototype, Ao);
        var Po = function(e, t) {
            "string" == typeof e ? e = new DOMParser().parseFromString(e, "application/xml").getElementsByTagName("MPD")[0] : e instanceof Document && (e = e.getElementsByTagName("MPD")[0]);
            this.availabilityStartTime = co(e.getAttribute("availabilityStartTime")),
            this.huluCdn = e.getAttribute("hulu:Cdn"),
            this.huluWindowSize = uo(e.getAttribute("hulu:WindowSize")),
            this.mediaPresentationDuration = lo(e.getAttribute("mediaPresentationDuration")),
            this.minBufferTime = lo(e.getAttribute("minBufferTime")),
            this.minimumUpdatePeriod = lo(e.getAttribute("minimumUpdatePeriod")),
            this.mpdUrl = Me.joinUrl(location.href, t),
            this.suggestedPresentationDelay = lo(e.getAttribute("suggestedPresentationDelay")),
            this.type = e.getAttribute("type"),
            this.xml = e
        }
          , wo = {
            baseUrls: {
                configurable: !0
            },
            supplementalProperties: {
                configurable: !0
            },
            essentialProperties: {
                configurable: !0
            },
            urlQueryInfos: {
                configurable: !0
            },
            location: {
                configurable: !0
            },
            periods: {
                configurable: !0
            }
        };
        wo.baseUrls.get = function() {
            return void 0 === this._baseUrls && (this._baseUrls = Me.joinBaseUrls({
                "": this.mpdUrl
            }, po(this.xml))),
            this._baseUrls
        }
        ,
        wo.supplementalProperties.get = function() {
            return void 0 === this._supplementalProperties && (this._supplementalProperties = oo(this.xml.getElementsByTagName("SupplementalProperty")).map(function(e) {
                return {
                    schemeIdUri: e.getAttribute("schemeIdUri"),
                    value: e.getAttribute("value"),
                    id: e.getAttribute("id")
                }
            })),
            this._supplementalProperties
        }
        ,
        wo.essentialProperties.get = function() {
            return void 0 === this._essentialProperties && (this._essentialProperties = oo(this.xml.getElementsByTagName("EssentialProperty")).map(function(e) {
                return {
                    schemeIdUri: e.getAttribute("schemeIdUri"),
                    value: e.getAttribute("value"),
                    id: e.getAttribute("id"),
                    node: e
                }
            })),
            this._essentialProperties
        }
        ,
        wo.urlQueryInfos.get = function() {
            if (void 0 === this._urlQueryInfos) {
                var e = this.essentialProperties.find(function(e) {
                    return e.node && "urn:mpeg:dash:urlparam:2016" == e.node.getAttribute("schemeIdUri")
                })
                  , t = [];
                if (e) {
                    var i = e.node.getElementsByTagName("up:ExtUrlQueryInfo");
                    0 == i.length && (i = e.node.getElementsByTagNameNS("urn:mpeg:dash:schema:urlparam:2014", "ExtUrlQueryInfo")),
                    t = oo(i).map(function(e) {
                        return {
                            useMPDUrlQuery: e.getAttribute("useMPDUrlQuery"),
                            includeInRequests: e.getAttribute("includeInRequests"),
                            queryString: e.getAttribute("queryString"),
                            queryTemplate: e.getAttribute("queryTemplate")
                        }
                    })
                }
                this._urlQueryInfos = t
            }
            return this._urlQueryInfos
        }
        ,
        wo.location.get = function() {
            if (void 0 === this._location) {
                var e = oo(this.xml.childNodes).filter(function(e) {
                    return "Location" === e.tagName
                })
                  , t = e[0] ? e[0].textContent : "";
                this._location = t ? Me.joinUrl(this.mpdUrl, t) : this.mpdUrl
            }
            return this._location
        }
        ,
        wo.periods.get = function() {
            var e = this;
            return void 0 === this._periods && (this._periods = oo(this.xml.getElementsByTagName("Period")).map(function(t) {
                return new So(t,e)
            })),
            this._periods
        }
        ,
        Object.defineProperties(Po.prototype, wo);
        var ko = function(e) {
            for (var t = this, i = 0, n = 0, r = 0, s = e.assets; r < s.length; r += 1) {
                var a = s[r].video.reps[0];
                if (null == a)
                    return;
                i += a.segments.length,
                n += a.segments.reduce(function(e, t) {
                    return e + t.duration
                }, 0)
            }
            this._timeline = e,
            this._timeline.addEventListener(q.Timeline.UPDATE, function() {
                return t._update()
            });
            var o = e.mpd.suggestedPresentationDelay;
            this._delay = o && o > 0 ? o : Math.max(i && 3 * n / i - .1, 15),
            this.reset()
        };
        function Co(e, t) {
            for (var i = 0, n = t[i], r = t[i + 1], s = 0; s < e.length; s++) {
                var a = e[s];
                r && a.t >= r.detail.pto && (n = r,
                r = t[1 + ++i]),
                a.unit = n
            }
            return e
        }
        ko.prototype.get = function(e) {
            var t = this._now() - this._gap() - this._delay
              , i = this._timeline.seekable;
            return e && (t = this._last = Math.max(t, this._last, e.getPositionInContent())),
            Math.max(i[0], Math.min(t, i[1]))
        }
        ,
        ko.prototype.reset = function() {
            this._last = 0,
            this._stamp = this._now(),
            this._current = this._now() - this._timeline.seekable[1],
            this._history = this._current
        }
        ,
        ko.prototype.delay = function() {
            return this._delay
        }
        ,
        ko.prototype._update = function() {
            var e = this._gap();
            this._stamp = this._now();
            var t = this._stamp - this._timeline.seekable[1];
            e - t > 20 || (this._history = e,
            this._current = t)
        }
        ,
        ko.prototype._gap = function() {
            var e = (this._now() - this._stamp) * Math.abs(this._history - this._current) / 40;
            return (this._history + this._current * e) / (1 + e)
        }
        ,
        ko.prototype._now = function() {
            return Date.now() / 1e3
        }
        ;
        var Io = function(e, t, i, n, r, s) {
            this.t = e,
            this.d = t,
            this.number = i,
            this.bytes = n,
            this.parent = r,
            this._template = s,
            this.unit = null
        }
          , Ro = {
            start: {
                configurable: !0
            },
            end: {
                configurable: !0
            },
            duration: {
                configurable: !0
            },
            startUnixTime: {
                configurable: !0
            },
            size: {
                configurable: !0
            }
        };
        Ro.start.get = function() {
            return (this.t - this.parent.pto) / this.parent.timescale
        }
        ,
        Ro.end.get = function() {
            return (this.t + this.d - this.parent.pto) / this.parent.timescale
        }
        ,
        Ro.duration.get = function() {
            return this.d / this.parent.timescale
        }
        ,
        Ro.startUnixTime.get = function() {
            return (this.t - this.parent.pto) / this.parent.timescale + this.parent.parent.parent.start
        }
        ,
        Ro.size.get = function() {
            if (!this.bytes)
                return NaN;
            var e = this.bytes.split("-");
            return parseInt(e[1]) - parseInt(e[0]) + 1
        }
        ,
        Io.prototype.getUrlByCdn = function(e) {
            return "template" == this.parent.mode ? Io.url(this._template, e, this.parent, this.t, this.number) : "baseurl" == this.parent.mode ? this.parent.detail.baseUrls[e] : null
        }
        ,
        Io.url = function(e, t, i, n, r) {
            function s(e, t, i) {
                return e.replace(t, function(e, t) {
                    return function(e, t) {
                        for (; e.length < t; ) {
                            e = "0" + e
                        }
                        return e
                    }(String(i), parseInt(t))
                })
            }
            var a = e;
            return a = s(a, /\$RepresentationID()\$/g, i.detail.id),
            a = s(a, /\$Number(?:%0(\d+)d)?\$/g, r),
            a = s(a, /\$Bandwidth(?:%0(\d+)d)?\$/g, i.detail.bandwidth),
            a = s(a, /\$Time(?:%0(\d+)d)?\$/g, n),
            Me.joinUrl(i.detail.baseUrls[t], a.replace(/\$\$/g, "$"))
        }
        ,
        Io.firstSegmentFromTemplate = function(e) {
            var t = e.xml.getElementsByTagName("S")[0];
            return t ? {
                t: parseInt(t.getAttribute("t")),
                d: parseInt(t.getAttribute("d"))
            } : null
        }
        ,
        Io.fromTemplate = function(e, t) {
            for (var i = [], n = Array.from(e.xml.getElementsByTagName("S")).map(function(e) {
                return {
                    t: parseInt(e.getAttribute("t")),
                    d: parseInt(e.getAttribute("d")),
                    r: parseInt(e.getAttribute("r"))
                }
            }), r = 0, s = e.startNumber, a = 0, o = n; a < o.length; a += 1) {
                var l = o[a]
                  , d = l.r || 0;
                for (r = l.t || r; d-- >= 0; ) {
                    i.push(new Io(r,l.d,s,"",t,e.media)),
                    r += l.d,
                    s += 1
                }
            }
            return Co(i, t.parent.parent.units)
        }
        ,
        Io.fromSidx = function(e, t) {
            for (var i = [], n = 0; n < e.segments.length; ++n) {
                var r = e.segments[n].time
                  , s = e.segments[n].duration
                  , a = e.base + e.segments[n].offset
                  , o = a + e.segments[n].size - 1;
                i.push(new Io(r,s,n,a + "-" + o,t,null))
            }
            return Co(i, t.parent.parent.units)
        }
        ,
        Io.find = function(e, t) {
            for (var i = 0, n = e.length; i < n; ) {
                var r = i + n >> 1
                  , s = e[r];
                s.t + s.d > t ? n = r : i = r + 1
            }
            return e[i]
        }
        ,
        Object.defineProperties(Io.prototype, Ro);
        var Do = function(e, t, i) {
            this.unit = e.parent.parent.units[0],
            this.ranges = i,
            this.parent = e,
            this.bytes = i ? i.init.start + "-" + i.sidx.end : "",
            this._template = t
        };
        Do.prototype.getUrlByCdn = function(e) {
            return "template" == this.parent.mode ? Io.url(this._template, e, this.parent) : "baseurl" == this.parent.mode ? this.parent.detail.baseUrls[e] : null
        }
        ,
        Do.fromTemplate = function(e, t) {
            return new Do(t,e.initialization)
        }
        ,
        Do.fromSegmentBase = function(e, t) {
            return new Do(t,null,{
                init: e.initializationRange,
                sidx: e.indexRange
            })
        }
        ;
        var Lo = function(e) {
            var t = this;
            this.id = (e.primary ? "primary-" : "") + e.id,
            this.start = e.utc.s,
            this.primary = e.primary,
            e.asset = this,
            this.units = [e],
            this.audios = e.period.audioAdaptationSets.map(function(e, i) {
                return new Oo("audio",e,i,t)
            }),
            this.audios.length || this.audios.push(new Oo("audio",null,null,this)),
            this.videos = e.period.videoAdaptationSets.map(function(e, i) {
                return new Oo("video",e,i,t)
            }),
            this.videos.length || this.videos.push(new Oo("video",null,null,this)),
            this._activeIndex = {
                audio: 0,
                video: 0
            }
        }
          , Mo = {
            audio: {
                configurable: !0
            },
            video: {
                configurable: !0
            },
            duration: {
                configurable: !0
            },
            infinity: {
                configurable: !0
            },
            seekable: {
                configurable: !0
            },
            empty: {
                configurable: !0
            }
        };
        Mo.audio.get = function() {
            return this.audios[this._activeIndex.audio]
        }
        ,
        Mo.video.get = function() {
            return this.videos[this._activeIndex.video]
        }
        ,
        Mo.duration.get = function() {
            var e = this.units[this.units.length - 1];
            return e ? e.utc.s + e.duration - this.start : 0
        }
        ,
        Mo.infinity.get = function() {
            return this.units[this.units.length - 1].infinity
        }
        ,
        Mo.seekable.get = function() {
            if (null == this._seekable) {
                var e = this.audio.seekable
                  , t = this.video.seekable;
                this._seekable = [Math.max(e[0], t[0], 0), Math.min(e[1], t[1], this.duration)]
            }
            return this._seekable
        }
        ,
        Mo.empty.get = function() {
            return this.audio.empty && this.video.empty
        }
        ,
        Lo.prototype.append = function(e) {
            e.asset = this,
            this.units.push(e),
            this.audios.forEach(function(t, i) {
                return t.append(e.period.audioAdaptationSets[i], e)
            }),
            this.videos.forEach(function(t, i) {
                return t.append(e.period.videoAdaptationSets[i], e)
            }),
            this.changed()
        }
        ,
        Lo.prototype.update = function(e) {
            var t = this.units[this.units.length - 1];
            if (null == e)
                return !1;
            if (e.id != t.id)
                throw new Error("only last period can be updated");
            var i = !1;
            return i = this.audios.reduce(function(i, n, r) {
                return n.update(e.period.audioAdaptationSets[r], t) || i
            }, i),
            (i = this.videos.reduce(function(i, n, r) {
                return n.update(e.period.videoAdaptationSets[r], t) || i
            }, i)) && this.changed(),
            i
        }
        ,
        Lo.prototype.continuous = function(e) {
            return !(!this.primary || !e.primary) && !this.audios.some(function(t, i) {
                return !t.continuous(e.period.audioAdaptationSets[i], e)
            }) && !this.videos.some(function(t, i) {
                return !t.continuous(e.period.videoAdaptationSets[i], e)
            })
        }
        ,
        Lo.prototype.changed = function() {
            this._seekable = null
        }
        ,
        Lo.prototype.clamp = function(e) {
            var t = !1;
            return t = this.audio.clamp(e),
            (t = this.video.clamp(e) || t) && (Ho.clamp(this.units, e),
            this.changed()),
            t
        }
        ,
        Lo.prototype.cut = function(e) {
            Ho.cut(this.units, e),
            this.changed()
        }
        ,
        Lo.prototype.updateSelectedAset = function(e, t) {
            if ("audio" == e) {
                var i = sa.getPreferredAudio(this.audios, t);
                this._activeIndex.audio = Math.max(this.audios.indexOf(i), 0)
            } else {
                var n = sa.getPreferredVideo(this.videos, t);
                this._activeIndex.video = Math.max(this.videos.indexOf(n), 0)
            }
        }
        ,
        Lo.prototype.getTargetRep = function(e, t, i) {
            var n = ("video" === e ? this.videos : this.audios).find(function(e) {
                return e.adaptationSetId === t
            });
            return n ? n.reps.find(function(e) {
                return e.detail.id === i
            }) : null
        }
        ,
        Object.defineProperties(Lo.prototype, Mo),
        re.inject(Lo.prototype);
        var Oo = function(e, t, i, n) {
            var r = this;
            if (this.id = n.id + "-" + e + "-" + i,
            this.type = e,
            this.parent = n,
            this.reps = [],
            this._activeRepIndex = 0,
            this._activeCdn = "",
            t && (this.adaptationSetId = t.id || this.id,
            this.codecs = t.codecs,
            this.frameRate = t.frameRate,
            this.maxWidth = t.maxWidth,
            this.maxHeight = t.maxHeight,
            this.maxFrameRate = t.maxFrameRate,
            this.descriptors = t.supplementalProperties.concat(t.essentialProperties),
            this.roles = t.roles,
            this.kind = sa.rolesToKind(this.roles),
            this.language = t.language,
            "audio" == e && (this.channelConfigurations = t.audioChannelConfigurations),
            t.sortedRepresentations.length > 0)) {
                this.reps = t.mergedRepresentationsAcrossCdn.map(function(e) {
                    return new No(e.rep,e.baseUrls,r)
                }),
                this.pto = Math.min.apply(Math, this.reps.map(function(e) {
                    return e.pto
                })) / this.reps[0].timescale;
                var s = t.sortedRepresentations[t.sortedRepresentations.length - 1];
                this.mime = s.mimeType + "; codecs=\"" + s.codecs + "\"",
                this.codecs = this.codecs || s.codecs
            }
        }
          , xo = {
            empty: {
                configurable: !0
            },
            seekable: {
                configurable: !0
            },
            activeRep: {
                configurable: !0
            },
            activeCdn: {
                configurable: !0
            }
        };
        xo.empty.get = function() {
            return 0 == this.reps.length
        }
        ,
        xo.seekable.get = function() {
            if (this.empty)
                return [0, this.parent.duration];
            var e = this.reps.map(function(e) {
                return e.seekable
            });
            return [Math.max.apply(Math, e.map(function(e) {
                return e[0]
            })), Math.min.apply(Math, e.map(function(e) {
                return e[1]
            }))]
        }
        ,
        Oo.prototype.append = function(e, t) {
            var i = this;
            e.mergedRepresentationsAcrossCdn.forEach(function(e, n) {
                return i.reps[n].append(e.rep, t)
            })
        }
        ,
        Oo.prototype.update = function(e, t) {
            var i = this;
            return e.mergedRepresentationsAcrossCdn.reduce(function(e, n, r) {
                return i.reps[r].update(n.rep, t) || e
            }, !1)
        }
        ,
        Oo.prototype.continuous = function(e, t) {
            if (null == e)
                return !1;
            var i = e.mergedRepresentationsAcrossCdn;
            return !this.empty && this.reps.length == i.length && this.reps.every(function(e, n) {
                return e.continuous(i[n].rep, t)
            })
        }
        ,
        Oo.prototype.clamp = function(e) {
            var t = !1;
            return this.reps.forEach(function(i) {
                return t = i.clamp(e) || t
            }),
            t
        }
        ,
        Oo.prototype.selectRep = function(e, t) {
            this._activeRepIndex = e,
            this._activeCdn = t
        }
        ,
        xo.activeRep.get = function() {
            return this.reps[this._activeRepIndex]
        }
        ,
        xo.activeCdn.get = function() {
            return this._activeCdn
        }
        ,
        Object.defineProperties(Oo.prototype, xo);
        var No = function(e, t, i) {
            if (t && 0 != t.length || (t = e.baseUrls),
            this.parent = i,
            this.id = [e.id, i.id, e.huluProfileBandwidth, i.parent.id].join("-"),
            this.errors = {},
            this.mbrID = {
                id: this.id,
                adaptationSetId: i.adaptationSetId,
                representationId: e.id,
                type: i.type
            },
            this.detail = {
                id: e.id,
                baseUrls: t,
                cdns: Object.keys(t),
                type: i.type,
                width: e.width,
                height: e.height,
                bandwidth: e.bandwidth,
                profile: e.huluProfileBandwidth,
                codecs: e.codecs,
                frameRate: e.frameRate || i.frameRate || i.maxFrameRate,
                samplingRate: e.samplingRate,
                sar: e.sar
            },
            e.segmentTemplate)
                this.mode = "template",
                this.timescale = e.segmentTemplate.timescale,
                this.pto = e.segmentTemplate.presentationTimeOffset,
                this.startNumber = e.segmentTemplate.startNumber,
                this.media = e.segmentTemplate.media,
                this.init = Do.fromTemplate(e.segmentTemplate, this),
                this.segments = Io.fromTemplate(e.segmentTemplate, this);
            else {
                if (!e.segmentBase)
                    throw new Error("incomplete rep");
                this.mode = "baseurl",
                this.timescale = e.segmentBase.timescale,
                this.pto = e.segmentBase.presentationTimeOffset,
                this.startNumber = 0,
                this._hackHuluVoDTimescale(),
                this.init = Do.fromSegmentBase(e.segmentBase, this),
                this.segments = []
            }
        }
          , Uo = {
            seekable: {
                configurable: !0
            },
            sidx: {
                configurable: !0
            }
        };
        Uo.seekable.get = function() {
            var e = this.segments;
            return e.length > 0 ? [e[0].start < z.DASH_CTS_EPS ? 0 : e[0].start, e[e.length - 1].end] : "baseurl" == this.mode ? [0, this.parent.parent.duration] : []
        }
        ,
        Uo.sidx.set = function(e) {
            if (null != e) {
                if (0 != this.segments.length || "baseurl" != this.mode)
                    throw new Error("cannot change sidx");
                this.timescale = e.timescale,
                this.segments = Io.fromSidx(e, this),
                this.parent.parent.changed()
            }
        }
        ,
        No.prototype.findSegment = function(e) {
            return Io.find(this.segments, e * this.timescale + this.pto)
        }
        ,
        No.prototype.append = function(e, t) {
            e.segmentTemplate && (this.media = e.segmentTemplate.media),
            this.update(e, t)
        }
        ,
        No.prototype.update = function(e) {
            var i = this;
            if ("template" == this.mode) {
                var n = this.segments.length
                  , r = Io.fromTemplate(e.segmentTemplate, this);
                if (0 == n)
                    this.segments = r;
                else {
                    var s = this.segments[this.segments.length - 1]
                      , a = r.findIndex(function(e) {
                        return e.t >= s.t + s.d - z.DASH_CTS_EPS * i.timescale
                    });
                    a >= 0 && r.slice(a).forEach(function(t) {
                        e.segmentTemplate.xml.getAttribute("startNumber") || (t.number = i.segments.length),
                        i.segments.push(t)
                    })
                }
                return this.segments.length > n
            }
        }
        ,
        No.prototype.clamp = function(e) {
            var t = this.segments.findIndex(function(t) {
                return t.startUnixTime + t.duration > e
            });
            return t > 0 && (this.segments.splice(0, t),
            !0)
        }
        ,
        No.prototype.judgeMPDMissingSegment = function(e, t, i) {
            if (i.timeline.live && this == this.parent.reps[0] && "audio" != this.detail.type) {
                for (var n = [], r = e; r < t - 1; r++) {
                    var s = this.segments[r]
                      , a = this.segments[r + 1];
                    if (s.t + s.d != a.t && s.t + s.d != a.t + z.PERIOD_EPS) {
                        var o = s.url.split("/")
                          , l = {
                            channel_id: o.length > 3 ? o[3] : "",
                            period_id: i.id,
                            t1_unix_time: s.startUnixTime,
                            t1: s.t,
                            d1: s.d,
                            t2: a.t,
                            type: this.detail.type
                        };
                        n.push(l)
                    }
                }
                n.length > 0 && i.timeline.reportMPDMissingSegment(n)
            }
        }
        ,
        No.prototype.isInMissingSegment = function(e) {
            var t = this.findSegment(e);
            return t && t.start > e + z.DASH_CTS_EPS
        }
        ,
        No.prototype.continuous = function(e) {
            if (this.detail.id != e.id)
                return !1;
            if (this.detail.bandwidth != e.bandwidth)
                return !1;
            var i = e.segmentBase || e.segmentTemplate;
            if (this.timescale != i.timescale)
                return !1;
            var n = (i.presentationTimeOffset - this.pto) / i.timescale;
            if (Math.abs(n - this.parent.parent.duration) > z.DASH_CTS_EPS)
                return !1;
            if (e.segmentTemplate && this.segments.length > 0) {
                var r = this.segments[this.segments.length - 1]
                  , s = Io.firstSegmentFromTemplate(e.segmentTemplate);
                if (s && s.t < r.t + r.d - z.DASH_CTS_EPS * this.timescale)
                    return !1
            }
            return !0
        }
        ,
        No.prototype._hackHuluVoDTimescale = function() {
            1 == this.timescale && this.parent.parent.primary && "unknown" != this.detail.cdn && (this.timescale = 1e7)
        }
        ,
        Object.defineProperties(No.prototype, Uo);
        var Bo = function e(t, i) {
            this.id = t.id,
            this.period = t,
            this.timeline = i,
            this.start = t.start,
            this.duration = t.duration,
            this.type = e._getType(this),
            this.primary = e._getPrimary(this);
            var n = t.videoAdaptationSets[0]
              , r = t.audioAdaptationSets[0]
              , s = n && n.representations[0] || r && r.representations[0]
              , a = s && (s.segmentBase || s.segmentTemplate);
            this.detail = {
                pto: a && a.presentationTimeOffset,
                assetIdentifier: t.assetIdentifier,
                descriptors: t.supplementalProperties.concat(t.essentialProperties),
                segmentType: t.segmentType,
                vast: e._getVast(this),
                events: e._getEvents(this)
            }
        }
          , Fo = {
            infinity: {
                configurable: !0
            },
            seekable: {
                configurable: !0
            }
        };
        Fo.infinity.get = function() {
            return this.duration == 1 / 0
        }
        ,
        Fo.seekable.get = function() {
            return [Math.max(this.atop(this.asset.seekable[0]), 0), Math.min(this.atop(this.asset.seekable[1]), this.duration)]
        }
        ,
        Bo.prototype.update = function(e, t) {
            var i = this.duration != e;
            return this.duration = e,
            this.utc && (this.utc.d = this.primary ? e : 0),
            this.asset && (i = this.asset.update(t) || i),
            i
        }
        ,
        Bo.prototype.ptoa = function(e) {
            return this.utc.s + e - this.asset.start
        }
        ,
        Bo.prototype.atop = function(e) {
            return this.asset.start + e - this.utc.s
        }
        ,
        Bo._getType = function(e) {
            var t = e.period.segmentType || {}
              , i = e.period.assetIdentifier || {}
              , n = e.period.id.toLowerCase();
            return "content" == t.value ? z.CueType.CONTENT : "ad" == t.value ? z.CueType.AD : "bumper" == t.value ? z.CueType.INTRO : "huluAd" == i.value || "assetAd" == i.value ? z.CueType.AD : null != i.value ? z.CueType.CONTENT : "ad" == n.substr(0, 2) ? z.CueType.AD : "bumper" == n.substr(0, 6) ? z.CueType.INTRO : z.CueType.CONTENT
        }
        ,
        Bo._getPrimary = function(e) {
            return e.type == z.CueType.CONTENT || !(!e.period.assetIdentifier || "assetAd" != e.period.assetIdentifier.value) || !!e.timeline.live || "xlink" != e.timeline.origin && (!!e.timeline.mpd.mpdUrl.includes("/psl_dash/") || !!e.timeline.mpd.mpdUrl.includes("/live_dash/"))
        }
        ,
        Bo._getVast = function(e) {
            if (e.type != z.CueType.AD)
                return null;
            try {
                return e.period.eventStreams.find(function(e) {
                    return "http://dashif.org/identifiers/vast30" == e.schemeIdUri
                }).events[0].messageData
            } catch (e) {
                return ""
            }
        }
        ,
        Bo._getEvents = function(e) {
            if (e.type != z.CueType.AD)
                return [];
            var t = e.period.eventStreams.find(function(e) {
                return "urn:com:hulu:dash:event:ad:2018" == e.schemeIdUri
            });
            return t && t.events ? t.events.map(function(e) {
                return {
                    id: e.id,
                    schemeIdUri: t.schemeIdUri,
                    presentationTime: e.presentationTime / t.timescale,
                    duration: e.duration / t.timescale,
                    messageData: e.messageData
                }
            }) : []
        }
        ,
        Object.defineProperties(Bo.prototype, Fo),
        re.inject(Bo.prototype);
        var Vo = ti.URLSearchParams
          , Ho = function() {};
        Ho.build = function(e, t) {
            for (var i = [], n = (e.availabilityStartTime || 0) + (e.suggestedPresentationDelay || 0), r = 0; r < e.periods.length; ++r) {
                var s = e.periods[r]
                  , a = new Bo(s,t)
                  , o = i[i.length - 1];
                if (null != s.start)
                    a.start = s.start + n;
                else if (0 != r || t.live) {
                    if (r > 0 && null != o.period.duration)
                        a.start = o.start + o.period.duration;
                    else {
                        if (!(r > 0 && 0 == o.period.adaptationSets.length))
                            throw new Error("unsupport early available period");
                        a.start = o.start
                    }
                } else
                    a.start = 0;
                Ho.cut(i, a.start),
                i.push(a)
            }
            for (var l = 0; l < i.length; ++l) {
                var d = i[l];
                if (l + 1 < i.length)
                    d.duration = i[l + 1].start - d.start;
                else if (t.live)
                    d.duration = 1 / 0;
                else if (null != d.period.duration)
                    d.duration = d.period.duration;
                else if (null != e.mediaPresentationDuration)
                    d.duration = i[0].start + e.mediaPresentationDuration - d.start;
                else {
                    if (0 != d.period.adaptationSets.length)
                        throw new Error("no duration for last period");
                    d.duration = 0
                }
                if (d.duration < -z.NUMERICAL_EPS)
                    throw new Error("period has negative duration");
                d.duration < z.NUMERICAL_EPS && (d.duration = 0)
            }
            return i
        }
        ,
        Ho.buildPatch = function(e, t) {
            if (!e.essentialProperties.find(function(e) {
                return "urn:com:hulu:schema:mpd:2017:patch" == e.schemeIdUri
            }))
                return !1;
            e.huluCdn = t.mpd.huluCdn,
            e.availabilityStartTime = t.mpd.availabilityStartTime,
            e.suggestedPresentationDelay = t.mpd.suggestedPresentationDelay;
            var i = e.periods[0]
              , n = t.units[t.units.length - 1];
            return !(!i || !n || i.id !== n.id) && (i.adaptationSets.forEach(function(e) {
                var t;
                e.id === n.asset.audio.adaptationSetId ? t = n.asset.audio.reps : e.id === n.asset.video.adaptationSetId && (t = n.asset.video.reps),
                t && t.forEach(function(t) {
                    var i = {
                        segmentTemplate: Object.assign({}, e.segmentTemplate, {
                            media: t.media,
                            presentationTimeOffset: t.pto,
                            startNumber: t.startNumber,
                            timescale: t.timescale
                        })
                    };
                    t.update(i, n)
                })
            }),
            n.asset.changed(),
            e.periods.shift(),
            !0)
        }
        ,
        Ho.move = function(e, t) {
            var i = e.filter(function(e) {
                return (e.start += t) + e.duration < -z.NUMERICAL_EPS
            });
            e.splice(0, i.length)
        }
        ,
        Ho.clamp = function(e, t) {
            var i = e.findIndex(function(e) {
                return e.start + e.duration >= t - z.NUMERICAL_EPS
            });
            i > 0 && e.splice(0, i)
        }
        ,
        Ho.cut = function(e, t) {
            if (0 != e.length)
                for (; e[e.length - 1] && e[e.length - 1].start > t + z.NUMERICAL_EPS; ) {
                    var i = e.pop();
                    i instanceof Bo ? i.update(0, null) : i instanceof Lo && i.cut(t)
                }
        }
        ,
        Ho.assets = function(e, t, i) {
            for (var n = [], r = 0, s = e; r < s.length; r += 1) {
                var a = s[r];
                a.utc = {
                    s: t,
                    d: a.primary ? a.duration : 0
                },
                t += a.utc.d,
                a.primary ? i && i.continuous(a) ? i.append(a) : n.push(i = new Lo(a)) : n.push(new Lo(a)),
                a.period.xlinkUrl && (a.subordinate = new jo(a)),
                delete a.period
            }
            return n
        }
        ,
        Ho.collapse = function(e) {
            if (!e.live) {
                for (var t = [], i = 0, n = e.units; i < n.length; i += 1) {
                    var r = n[i]
                      , s = t.length - 1
                      , a = r.asset.empty ? "empty" : r.type;
                    s < 0 || t[s].type != a ? t.push({
                        type: a,
                        units: [r],
                        index: s + 1
                    }) : t[s].units.push(r)
                }
                for (var o = [], l = 0, d = t; l < d.length; l += 1) {
                    var u = d[l];
                    if ("content" == u.type || "empty" == u.type)
                        o.push.apply(o, u.units);
                    else {
                        var c = document.createElement("Period");
                        c.setAttribute("id", u.type + "-collapsed-" + u.index);
                        var h = new Bo(new So(c,e.mpd),e);
                        h.utc = {
                            s: u.units[0].utc.s,
                            d: u.units.reduce(function(e, t) {
                                return e + t.utc.d
                            }, 0)
                        },
                        h.duration = 0,
                        h.subordinate = new Go(h,u.units),
                        new Lo(h),
                        o.push(h)
                    }
                }
                e.units = o,
                e.duration = o.reduce(function(e, t) {
                    return (t.start = e) + t.duration
                }, 0)
            }
        }
        ,
        Ho.intros = function(e, t) {
            if (!e.live) {
                var i = e.units.filter(function(e) {
                    return "intro" != e.type
                });
                i.unshift.apply(i, n("preroll")),
                i.push.apply(i, n("postroll")),
                e.units = i,
                e.duration = i.reduce(function(e, t) {
                    return (t.start = e) + t.duration
                }, 0)
            }
            function n(i) {
                return t.filter(function(e) {
                    return e.type.includes(i)
                }).map(function(t, n) {
                    var r = document.createElement("Period");
                    r.setAttribute("id", "intro-" + i + "-" + n),
                    r.setAttribute("xlink:href", t.url.replace(/\.mp4(\?|$)/, ".mpd$1")),
                    r.setAttribute("xlink:actuate", "onRequest");
                    var s = new Bo(new So(r,e.mpd),e);
                    return s.utc = {
                        s: 0,
                        d: 0
                    },
                    s.duration = 0,
                    s.subordinate = new jo(s),
                    new Lo(s),
                    s
                })
            }
        }
        ,
        Ho.mpd = function(e) {
            return {
                type: e.type,
                mpdUrl: e.mpdUrl,
                huluCdn: e.huluCdn,
                location: Ho.location(e),
                minBufferTime: e.minBufferTime,
                huluWindowSize: e.huluWindowSize,
                minimumUpdatePeriod: e.minimumUpdatePeriod,
                availabilityStartTime: e.availabilityStartTime,
                mediaPresentationDuration: e.mediaPresentationDuration,
                suggestedPresentationDelay: e.suggestedPresentationDelay,
                descriptors: e.supplementalProperties.concat(e.essentialProperties)
            }
        }
        ,
        Ho.location = function(e) {
            var t = e.location
              , i = e.urlQueryInfos.find(function(e) {
                return "mpd" == e.includeInRequests
            });
            if (!i)
                return t;
            var n = new Vo([i.queryString || "", i.useMPDUrlQuery && e.mpdUrl.split("?")[1] || ""].join("&"))
              , r = n
              , s = (i.queryTemplate || "").replace(/\$+/g, "$");
            return "$querypart" !== s && (r = new Vo,
            s.split("$").filter(function(e) {
                return e.startsWith("query:")
            }).map(function(e) {
                return e.slice(6)
            }).forEach(function(e) {
                return r.set(e, n.get(e))
            })),
            Me.joinUrlParameters(t, r.toString())
        }
        ,
        Ho.pssh = function(e) {
            for (var t = {}, i = [], n = 0, r = e.periods; n < r.length; n += 1) {
                var s = r[n].videoAdaptationSets[0];
                if (s && s.contentProtections.length) {
                    i = s.contentProtections;
                    break
                }
            }
            for (var a = 0, o = i; a < o.length; a += 1) {
                var l = o[a];
                l.pssh && ("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed" == l.schemeIdUri ? t.widevine = l.pssh : "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95" == l.schemeIdUri && (t.playready = l.pssh))
            }
            return t
        }
        ,
        Ho.replace = function(e) {
            for (var t, i = e.parent, n = e.units, r = -e.parent.duration, s = 0, a = n; s < a.length; s += 1) {
                var o = a[s];
                o.start += i.start,
                o.timeline = i.timeline,
                r += o.duration
            }
            var l = i.timeline
              , d = l.units.indexOf(i);
            (t = l.units).splice.apply(t, [d, 1].concat(e.units));
            for (var u = d + n.length; u < l.units.length; ++u) {
                l.units[u].start += r
            }
            return l.duration += r,
            d
        }
        ;
        var jo = function(e) {
            this.url = e.period.xlinkUrl,
            this.level = "sub",
            this.parent = e,
            this.baseline = 0,
            this.origin = "xlink",
            this.canResolve = !0,
            this._cts = new N,
            this._timestamp = 0,
            this._promise = null,
            this._units = null
        }
          , Wo = {
            units: {
                configurable: !0
            },
            state: {
                configurable: !0
            }
        };
        jo.prototype.request = function(e) {
            var t = this;
            if (null == this._promise) {
                var i = this._cts.token;
                (e = e || {
                    onTimelinePeriodResolving: function onTimelinePeriodResolving() {},
                    onTimelineRequestPeriod: function onTimelineRequestPeriod() {},
                    onTimelinePeriodResolved: function onTimelinePeriodResolved() {}
                }).onTimelinePeriodResolving(this.parent);
                var r = null;
                this._promise = Z(this.url, null, {
                    timeoutMs: 1e4,
                    retryCount: 1,
                    cancellationToken: i,
                    responseType: "text"
                }).then(function(e) {
                    return r = ee(t.url, e),
                    e.assertOK().text()
                }).then(function(i) {
                    return e.onTimelineRequestPeriod(r),
                    [t._parse(i)]
                }).catch(function(i) {
                    return e.onTimelineRequestPeriod(ee(t.url, i)),
                    [[], Object.assign(i, {
                        url: t.url,
                        type: Y.XLINK_REQUEST_ERROR
                    })]
                }).then(function(n) {
                    if (i.isCancellationRequested)
                        return R.pending();
                    t.error = n[1],
                    t._promise = null,
                    t._units = n[0],
                    t._timestamp = Date.now(),
                    e.onTimelinePeriodResolved(t.parent),
                    0 == t._units.length ? t.parent.duration > 0 && delete t.parent.subordinate : t._units.forEach(function(e) {
                        e.subordinate && "xlink" == e.subordinate.origin && (e.subordinate.canResolve = !1)
                    })
                })
            }
            return this._promise
        }
        ,
        jo.prototype.dispose = function() {
            this.error = null,
            this._promise = null,
            this._units = null,
            this.canResolve = !0,
            this._cts.cancel(),
            this._cts = new N
        }
        ,
        Wo.units.get = function() {
            return this._units || []
        }
        ,
        Wo.state.get = function() {
            return this._units ? "ready" : this._promise ? "request" : "empty"
        }
        ,
        jo.prototype._parse = function(e) {
            e = e.replace(/<\?xml.*\?>/, "");
            var t = new DOMParser().parseFromString("<PeriodsWrapper>" + e + "</PeriodsWrapper>", "application/xml")
              , i = t.getElementsByTagName("Period")
              , n = null;
            if (t.getElementsByTagName("MPD").length > 0) {
                var r = t.getElementsByTagName("MPD")[0];
                n = lo(r.getAttribute("mediaPresentationDuration"))
            }
            for (var s = [], a = 0; a < i.length; ++a) {
                var o = new So(i[a],{
                    baseUrls: {
                        "": this.url
                    }
                });
                o.id = o.id || this.parent.id + "-sub-" + a,
                s.push(o)
            }
            var l = Ho.build({
                mediaPresentationDuration: n,
                periods: s
            }, this);
            return Ho.assets(l, this.parent.utc.s),
            l
        }
        ,
        Object.defineProperties(jo.prototype, Wo);
        var Go = function(e, t) {
            var i = this;
            this.url = e.id,
            this.level = "sub",
            this.parent = e,
            this.baseline = 0,
            this.origin = "collapse",
            this.canResolve = !0,
            this.state = "ready",
            this.units = t,
            t.reduce(function(e, t) {
                return t.start = e,
                t.timeline = i,
                e + t.duration
            }, 0)
        };
        Go.prototype.request = function() {
            return R.resolve()
        }
        ,
        Go.prototype.dispose = function() {}
        ;
        var Ko = [2e3, 4e3, 8e3]
          , zo = function(e, t) {
            if (void 0 === t && (t = {}),
            this.level = "top",
            this.live = "dynamic" == e.type,
            this.mpd = Ho.mpd(e),
            this.pssh = Ho.pssh(e),
            this.units = Ho.build(e, this),
            0 == this.units.length)
                throw new Error("no available period in mpd");
            this.baseline = this.units[0].start,
            this.duration = this.live ? 1 / 0 : this.units.reduce(function(e, t) {
                return e + t.duration
            }, 0),
            this.assets = Ho.assets(this.units, this.baseline),
            this.edge = this.live ? new ko(this) : null,
            this._cts = new N,
            this._tracker = t.playerTracker,
            this._onRequestManifest = t.onTimelineRequestManifest,
            this._tracker && this._tracker.mpd.log(),
            this._continuousError = 0,
            this._tryRefreshMPDLater(0)
        }
          , qo = {
            seekable: {
                configurable: !0
            },
            baseline: {
                configurable: !0
            },
            url: {
                configurable: !0
            }
        };
        zo.create = function(e, t, i) {
            var n;
            if (void 0 === i && (i = {}),
            i.config && i.config.mpd)
                n = new R(function(t) {
                    return t(new Po(i.config.mpd,e))
                }
                );
            else {
                var r = i.config || {}
                  , s = {
                    timeoutMs: null != r.playbackRequestTimeout ? r.playbackRequestTimeout : 1e4,
                    retryCount: null != r.playbackRequestRetries ? r.playbackRequestRetries : 3,
                    cancellationToken: t,
                    retryDelays: Ko,
                    errorStatus: [204]
                };
                n = zo._fetchMPD(e, s, i.onTimelineRequestManifest)
            }
            return n.then(function(e) {
                return t && t.isCancellationRequested ? R.pending() : new zo(e,i)
            }).catch(function(i) {
                if (t && t.isCancellationRequested)
                    return R.pending();
                throw zo._fillErrorParams(i, e),
                i
            })
        }
        ,
        zo.prototype.dispose = function() {
            this._cts.cancel()
        }
        ,
        qo.seekable.get = function() {
            var e = this.units[0]
              , t = this.units[this.units.length - 1];
            return [Math.max(e.start + e.seekable[0], 0), t.start + t.seekable[1]]
        }
        ,
        qo.baseline.get = function() {
            return this._baseline
        }
        ,
        qo.url.get = function() {
            return this.mpd.location
        }
        ,
        qo.baseline.set = function(e) {
            Ho.move(this.units, (this._baseline || 0) - e),
            this._baseline = e,
            this.edge && this.edge.reset()
        }
        ,
        zo.prototype.clampTimeline = function(e) {
            var t = e - (this._baseline || 0);
            Ho.clamp(this.units, t),
            Ho.clamp(this.assets, t),
            this.assets.length > 0 && this.assets[0].clamp(this.units[0].start)
        }
        ,
        zo.prototype._updateTimeline = function(e) {
            var t, i, n = this;
            this.mpd.location = Ho.location(e);
            var r = Ho.buildPatch(e, this)
              , s = Ho.build(e, this);
            Ho.move(s, -this.baseline);
            var a = this.units[this.units.length - 1]
              , o = s.find(function(e) {
                return e.id == a.id
            });
            if (o ? (r = a.update(o.start + o.duration - a.start, o),
            s.splice(0, s.indexOf(o) + 1)) : s.length > 0 && (Ho.cut(this.units, s[0].start),
            Ho.cut(this.assets, s[0].start),
            (a = this.units[this.units.length - 1]) && (a.asset.cut(s[0].start),
            a.update(s[0].start - a.start, null))),
            s.length > 0) {
                r = !0;
                var l = Ho.assets(s, s[0].start + this.baseline, a.asset);
                l.length > 0 && (t = this.assets).push.apply(t, l),
                (i = this.units).push.apply(i, s)
            }
            r && (w.debug("[timeline] update"),
            this._tracker && this._tracker.mpd.log(),
            setTimeout(function() {
                return n.dispatchEvent(new CustomEvent(q.Timeline.UPDATE))
            }))
        }
        ,
        zo.prototype._tryRefreshMPDLater = function(e) {
            var t = this;
            if (this.live) {
                var i = this._cts.token
                  , n = 0
                  , r = Math.max(1e3 * this.mpd.minimumUpdatePeriod, 5e3 - e, 1e3);
                new R(function(e) {
                    return setTimeout(e, r)
                }
                ).then(function() {
                    if (i.isCancellationRequested)
                        return R.pending();
                    n = Date.now();
                    return zo._fetchMPD(t.url, {
                        timeoutMs: 5e3,
                        retryCount: 0,
                        cancellationToken: i
                    }, t._onRequestManifest)
                }).then(function(e) {
                    if (i.isCancellationRequested)
                        return R.pending();
                    e && t._updateTimeline(e),
                    t._continuousError = 0
                }).catch(function(e) {
                    if (i.isCancellationRequested)
                        return R.pending();
                    if (w.warn("update timeline failed", e),
                    t._tracker && t._tracker.mpd.log(null, e.message),
                    ++t._continuousError > 3) {
                        if (t._continuousError = 0,
                        zo._fillErrorParams(e, t.url),
                        403 == e.status && e.responseText && e.responseText.includes("expire"))
                            return e.type = Y.MPD_EXPIRED,
                            t.dispatchEvent(new CustomEvent(q.Timeline.ERROR,{
                                detail: e
                            })),
                            R.pending();
                        t._tracker && t._tracker.trigger(z.TrackingEvent.MPD_REFRESH_FAILURE, e, !0)
                    }
                }).then(function() {
                    if (i.isCancellationRequested)
                        return R.pending();
                    t._tryRefreshMPDLater(Date.now() - n)
                })
            }
        }
        ,
        zo.prototype.reportMPDMissingSegment = function(e) {
            this.live && (e.url = this.url,
            this._tracker && this._tracker.trigger(z.TrackingEvent.MPD_MISSING_SEGMENT, e, !0))
        }
        ,
        zo._fillErrorParams = function(e, t) {
            "FetchError" == e.name ? (e.type = Y.MPD_LOAD_FAILURE,
            e.params = {
                url: t,
                httpStatus: e.status,
                responseText: e.responseText
            }) : (e.type = Y.MPD_FORMAT_ERROR,
            e.params = {
                url: t
            })
        }
        ,
        zo._fetchMPD = function(e, t, i) {
            i = i || function() {}
            ;
            var n = Object.assign({}, t, {
                responseType: "text"
            })
              , r = null;
            return Z(e, {}, n).then(function(t) {
                return r = ee(e, t),
                t.assertOK().text()
            }).then(function(t) {
                return i(r),
                204 == r.statusCode ? null : new Po(t,r.responseURL || e)
            }).catch(function(t) {
                return i(ee(e, t)),
                t.fetchResponse ? t.fetchResponse.text().catch(function() {
                    return R.reject(t)
                }).then(function(e) {
                    return t.responseText = e,
                    R.reject(t)
                }) : R.reject(t)
            })
        }
        ,
        zo.prototype.getAverageDuration = function(e, t, i) {
            var n = 0
              , r = 0;
            return "video" !== e && "audio" !== e ? -1 : (this.assets.forEach(function(s) {
                var a = s.getTargetRep(e, t, i);
                if (a) {
                    var o = a.segments.length;
                    if (!o)
                        return;
                    if (r += o,
                    isFinite(s.duration))
                        n += s.duration;
                    else {
                        var l = a.segments[o - 1]
                          , d = a.segments[0]
                          , u = l.t + l.d - d.t;
                        n += u / a.timescale
                    }
                }
            }),
            r > 0 ? n / r : -1)
        }
        ,
        Object.defineProperties(zo.prototype, qo),
        re.inject(zo.prototype);
        var Yo = {};
        Yo[Y.MEDIA_ABORTED_ERROR] = {
            type: Y.MEDIA_ABORTED_ERROR,
            code: z.MediaError.MEDIA_ERR_ABORTED,
            retry: z.RetryLevel.STREAM
        },
        Yo[Y.MEDIA_NETWORK_ERROR] = {
            type: Y.MEDIA_NETWORK_ERROR,
            code: z.MediaError.MEDIA_ERR_NETWORK,
            retry: z.RetryLevel.STREAM
        },
        Yo[Y.MEDIA_DECODE_ERROR] = {
            type: Y.MEDIA_DECODE_ERROR,
            code: z.MediaError.MEDIA_ERR_DECODE,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_SRC_NOT_SUPPORTED_ERROR] = {
            type: Y.MEDIA_SRC_NOT_SUPPORTED_ERROR,
            code: z.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,
            retry: z.RetryLevel.STREAM
        },
        Yo[Y.MEDIA_ENCRYPTED_ERROR] = {
            type: Y.MEDIA_ENCRYPTED_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_TIMEOUT_ERROR] = {
            type: Y.MEDIA_TIMEOUT_ERROR,
            code: z.MediaError.MEDIA_ERR_TIMEOUT,
            retry: z.RetryLevel.STREAM
        },
        Yo[Y.MEDIA_UNKNOWN_ERROR] = {
            type: Y.MEDIA_UNKNOWN_ERROR,
            code: z.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_KEY_CLIENT_ERROR] = {
            type: Y.MEDIA_KEY_CLIENT_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_KEY_DOMAIN_ERROR] = {
            type: Y.MEDIA_KEY_DOMAIN_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_KEY_HARDWARECHANGE_ERROR] = {
            type: Y.MEDIA_KEY_HARDWARECHANGE_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_KEY_LICENSE_URL_ERROR] = {
            type: Y.MEDIA_KEY_LICENSE_URL_ERROR,
            code: z.MediaError.MEDIA_ERR_NETWORK,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_KEY_MESSAGE_ERROR] = {
            type: Y.MEDIA_KEY_MESSAGE_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_KEY_OUTPUT_ERROR] = {
            type: Y.MEDIA_KEY_OUTPUT_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_KEY_REQUEST_ERROR] = {
            type: Y.MEDIA_KEY_REQUEST_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_KEY_SERVICE_ERROR] = {
            type: Y.MEDIA_KEY_SERVICE_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_KEY_UNKNOWN_ERROR] = {
            type: Y.MEDIA_KEY_UNKNOWN_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MEDIA_KEY_UNSUPPORTED_ERROR] = {
            type: Y.MEDIA_KEY_UNSUPPORTED_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.CDM_UNAVAILABLE_ERROR] = {
            type: Y.CDM_UNAVAILABLE_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.CDM_DEPRECATED_BROWSER] = {
            type: Y.CDM_DEPRECATED_BROWSER,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.NONE
        },
        Yo[Y.EME_UNAVAILABLE_ERROR] = {
            type: Y.EME_UNAVAILABLE_ERROR,
            code: z.MediaError.MEDIA_ERR_ENCRYPTED,
            retry: z.RetryLevel.EME
        },
        Yo[Y.MPD_FORMAT_ERROR] = {
            type: Y.MPD_FORMAT_ERROR,
            code: z.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,
            retry: z.RetryLevel.NONE
        },
        Yo[Y.MPD_LOAD_FAILURE] = {
            type: Y.MPD_LOAD_FAILURE,
            code: z.MediaError.MEDIA_ERR_NETWORK,
            retry: z.RetryLevel.NONE
        },
        Yo[Y.MPD_EXPIRED] = {
            type: Y.MPD_EXPIRED,
            code: z.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,
            retry: z.RetryLevel.NONE
        },
        Yo[Y.DASH_SEGMENT_ERROR] = {
            type: Y.DASH_SEGMENT_ERROR,
            code: z.MediaError.MEDIA_ERR_DECODE,
            retry: z.RetryLevel.STREAM
        },
        Yo[Y.DASH_STREAM_ERROR] = {
            type: Y.DASH_STREAM_ERROR,
            code: z.MediaError.MEDIA_ERR_NETWORK,
            retry: z.RetryLevel.STREAM
        },
        Yo[Y.XLINK_REQUEST_ERROR] = {
            type: Y.XLINK_REQUEST_ERROR,
            code: z.MediaError.MEDIA_ERR_NETWORK,
            retry: z.RetryLevel.NONE
        },
        Yo[Y.SOURCE_BUFFER_APPEND_ERROR] = {
            type: Y.SOURCE_BUFFER_APPEND_ERROR,
            code: z.MediaError.MEDIA_ERR_DECODE,
            retry: z.RetryLevel.STREAM
        };
        var Qo = function(e) {
            this.code = e
        };
        Object.assign(Qo.prototype, z.MediaError);
        var $o = function(e) {
            this._raw = e,
            this._def = Yo[e.type] || Yo[Y.MEDIA_UNKNOWN_ERROR]
        }
          , Xo = {
            code: {
                configurable: !0
            },
            type: {
                configurable: !0
            },
            retry: {
                configurable: !0
            }
        };
        Xo.code.get = function() {
            return this._def.code
        }
        ,
        Xo.type.get = function() {
            return this._def.type
        }
        ,
        Xo.retry.get = function() {
            return this._def.type == Y.MEDIA_TIMEOUT_ERROR ? this._raw.retry : this._def.retry
        }
        ,
        $o.prototype.generateError = function(e, t) {
            return null == this._error && (this._error = new Qo(this.code),
            this._error.type = this.type,
            this._error.params = Object.assign({
                player: this._trackPlayer(e)
            }, this._raw.params, t, {
                type: this.type,
                errorMessage: this._raw.toString(),
                errorStack: this._raw.stack
            })),
            this._error
        }
        ,
        $o.prototype._trackPlayer = function(e) {
            var t = e.getCurrentPosition();
            return {
                timestamp: new Date().toISOString(),
                position: {
                    player: t.toString(),
                    utc: t.getPositionInUTC(),
                    period: t.getPositionInPeriod(),
                    content: t.getPositionInContent(),
                    primary: t.getPositionInPrimary(),
                    decoder: e.decoder.currentTime
                },
                duration: {
                    player: e.duration,
                    utc: t.getDurationOfUTC(),
                    period: t.getDurationOfPeriod(),
                    content: t.getDurationOfContent(),
                    primary: t.getDurationOfPrimary(),
                    decoder: e.decoder.duration
                },
                flags: {
                    ended: e.ended,
                    paused: e.paused,
                    seeking: e.seeking
                },
                url: e.src,
                decoder: this._trackDecoder(e.decoder),
                seekable: Ie.stringify(e.seekable),
                timeline: e._timeline && this._trackTimeline(e._timeline),
                metrics: e.tracker.report(),
                preload: e._preloader && e._preloader.unit.id,
                stream: e._player && this._trackAssetPlayer(e._player),
                mbr: e._cppAdapter && e._cppAdapter.getPluginState()
            }
        }
        ,
        $o.prototype._trackAssetPlayer = function(e) {
            var t = this._trackDecoder(e);
            return t.flags.loading = e.loading,
            t.flags.suspended = e.suspended,
            t.flags.rebuffering = e.rebuffering,
            t.seekable = Ie.stringify(e.seekable),
            t.mediaSourceReadyState = e.stream._mediaSource && e.stream._mediaSource.readyState,
            t.audioLoader = this._trackLoader(e.stream._audioLoader),
            t.videoLoader = this._trackLoader(e.stream._videoLoader),
            t
        }
        ,
        $o.prototype._trackDecoder = function(e) {
            return {
                position: e.currentTime,
                duration: e.duration,
                flags: {
                    ended: e.ended,
                    paused: e.paused,
                    seeking: e.seeking,
                    blocked: e.blocked
                },
                blocked: e._blocked,
                readyState: e.readyState,
                networkState: e.networkState
            }
        }
        ,
        $o.prototype._trackLoader = function(e) {
            if (e.empty)
                return "empty";
            var t = {
                rep: e._rep.id,
                reps: e.aset.reps.map(function(e) {
                    return e.id + ":" + (e.init.data && "init")
                }),
                state: e._state,
                queue: Ie.stringify(e._queue.map(function(e) {
                    return [e.seg.start, e.seg.end]
                })),
                position: e._position,
                download: e._download,
                continue: e._continue,
                appended: e._appended,
                updating: e._updating,
                repDetails: {
                    segmentsLength: e._rep.segments.length,
                    hasInitData: !!e._rep.init.data
                }
            };
            try {
                t.buffer = e.buffer ? {
                    updating: e.buffer.updating,
                    pto: e.buffer.timestampOffset,
                    buffered: Ie.stringify(e.buffer.buffered)
                } : "null"
            } catch (e) {
                t.buffer = e.message
            }
            return t
        }
        ,
        $o.prototype._trackTimeline = function(e) {
            return {
                url: e.url,
                ast: e.mpd.availabilityStartTime,
                type: e.mpd.type,
                assets: e.assets.map(function(e) {
                    return {
                        id: e.id,
                        seekable: Ie.stringify(e.seekable)
                    }
                }),
                periods: e.units.map(function(e) {
                    return {
                        id: e.id,
                        start: e.start,
                        duration: e.duration,
                        utc: e.utc.s
                    }
                }),
                baseline: e.baseline,
                edge: e.edge && {
                    time: e.edge.get(),
                    delay: e.edge.delay()
                }
            }
        }
        ,
        Object.defineProperties($o.prototype, Xo);
        var Jo = function(e, t) {
            this.time = e.start,
            this.detail = {
                src: "emsg",
                id: String(t.id),
                schemeIdUri: t.scheme,
                value: t.value,
                presentationTime: 0,
                duration: 0,
                messageData: String.fromCharCode.apply(null, t.data)
            }
        }
          , Zo = function(e) {
            this.time = e.presentationTime,
            this.detail = Object.assign({
                src: "manifest"
            }, e)
        }
          , el = function(e) {
            this._player = e,
            this.clear()
        };
        el.prototype.parseSegment = function(e, t, i) {
            var n = this;
            i.accept("emsg", function(t) {
                return n._add(n._emsgEvents, new Jo(e,t))
            })
        }
        ,
        el.prototype.updateBuffered = function(e) {
            for (var t = 0, i = 0, n = []; t < e.length && i < this._emsgEvents.length; ) {
                var r = this._emsgEvents[i];
                r.time < e.start(t) - z.DASH_CTS_EPS ? ++i : r.time < e.end(t) - z.DASH_CTS_EPS ? (n.push(r),
                ++i) : ++t
            }
            this._emsgEvents = n
        }
        ,
        el.prototype.updateManifestEvents = function(e) {
            if (e.detail && e.detail.events)
                for (var t = 0, i = e.detail.events; t < i.length; t += 1) {
                    var n = i[t];
                    this._add(this._manifestEvents, new Zo(n))
                }
        }
        ,
        el.prototype.updateTime = function(e) {
            if (null != this._last && null != e)
                for (var t = 0, i = this._emsgEvents; t < i.length; t += 1) {
                    var n = i[t];
                    if (n.time > e)
                        break;
                    n.time > this._last && this._player._queueEvent(q.Player.TIMED_METADATA, n.detail)
                }
            if (null != e)
                for (var r = 0, s = this._manifestEvents; r < s.length; r += 1) {
                    var a = s[r];
                    if (a.time > e)
                        break;
                    var o = [a.time, a.time + (a.detail.duration || .8)];
                    !this._isTimeInRange(this._last, o) && this._isTimeInRange(e, o) && (a.detail.duration || e === a.time || Math.abs(e - (this._last || 0)) <= z.SEEK_EPS) && this._player._queueEvent(q.Player.TIMED_METADATA, a.detail)
                }
            this._last = e
        }
        ,
        el.prototype.clear = function() {
            this._last = null,
            this._emsgEvents = [],
            this._manifestEvents = []
        }
        ,
        el.prototype._add = function(e, t) {
            var i;
            for (i = e.length; i > 0 && !(e[i - 1].time <= t.time); --i) {}
            e.splice(i, 0, t)
        }
        ,
        el.prototype._isTimeInRange = function(e, t) {
            return null != e && e < t[1] && e >= t[0]
        }
        ;
        var tl = function() {};
        tl.inject = function(e) {
            Object.assign(e, {
                getPositionInContent: function getPositionInContent() {
                    return this.getCurrentPosition().getPositionInContent()
                },
                setPositionInContent: function setPositionInContent(e) {
                    this.currentTime = e
                },
                getDurationOfContent: function getDurationOfContent() {
                    return this.getCurrentPosition().getDurationOfContent()
                },
                getPositionInPeriod: function getPositionInPeriod() {
                    return this.getCurrentPosition().getPositionInPeriod()
                },
                setPositionInPeriod: function setPositionInPeriod(e) {
                    this.seek(null, e)
                },
                getDurationOfPeriod: function getDurationOfPeriod() {
                    return this.getCurrentPosition().getDurationOfPeriod()
                },
                getPositionInPrimary: function getPositionInPrimary() {
                    return this.getCurrentPosition().getPositionInPrimary()
                },
                setPositionInPrimary: function setPositionInPrimary(e) {
                    this.currentTime = {
                        primaryPosition: e
                    }
                },
                getDurationOfPrimary: function getDurationOfPrimary() {
                    return this.getCurrentPosition().getDurationOfPrimary()
                },
                getPositionInUTC: function getPositionInUTC() {
                    return this.getCurrentPosition().getPositionInUTC()
                },
                setPositionInUTC: function setPositionInUTC(e) {
                    this.currentTime = {
                        utcPosition: e
                    }
                },
                getDurationOfUTC: function getDurationOfUTC() {
                    return this.getCurrentPosition().getDurationOfUTC()
                },
                getLiveEdge: function getLiveEdge() {
                    return this._timeline && this._timeline.live ? this._timeline.edge.get(this.getCurrentPosition()) : NaN
                },
                getAssetPosition: function getAssetPosition() {
                    return arguments.length > 0 ? this.findPosition(arguments[0]).getPositionInPrimary() : this.getCurrentPosition().getPositionInPrimary()
                }
            })
        }
        ;
        var il = {};
        il[z.BufferingState.BUFFERING] = "initializing",
        il[z.BufferingState.NO_BUFFERING] = "not_buffering",
        il[z.BufferingState.REBUFFERING] = "rebuffering",
        il[z.BufferingState.SEEKING] = "seeking",
        il[z.BufferingState.MPD_FRAGMENT_MISSING] = "mpd_fragment_missing",
        il[z.BufferingState.MPD_REFRESH_FAILURE] = "mpd_refresh_failure",
        il[z.BufferingState.FRAGMENT_DOWNLOAD_FAILURE] = "fragment_download_failure",
        il[z.BufferingState.UNKNOWN] = "unknown";
        var nl = "bufferingstart"
          , rl = "bufferingend"
          , sl = "seekingstart"
          , al = "seekingend"
          , ol = "droppedframe"
          , ll = "qosfragment"
          , dl = function(e) {
            function t(t) {
                e.call(this),
                this._player = t,
                this._pluginContext = {}
            }
            e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t;
            var i = {
                pluginContext: {
                    configurable: !0
                }
            };
            return i.pluginContext.set = function(e) {
                this._pluginContext = e
            }
            ,
            t.prototype.sendBufferingStartEvent = function(e) {
                var t = {};
                t.bufferingType = il[e] || e,
                w.log("[cpp] send events:", nl, t),
                this._dispatchPlayerEventsToCPP(nl, t)
            }
            ,
            t.prototype.sendBufferingEndEvent = function(e) {
                var t = {};
                t.bufferingType = il[e] || e,
                w.log("[cpp] send events:", rl, t),
                this._dispatchPlayerEventsToCPP(rl, t)
            }
            ,
            t.prototype.sendSeekingStartEvent = function() {
                w.log("[cpp] send events:", sl),
                this._dispatchPlayerEventsToCPP(sl)
            }
            ,
            t.prototype.sendSeekingEndEvent = function() {
                w.log("[cpp] send events:", al),
                this._dispatchPlayerEventsToCPP(al)
            }
            ,
            t.prototype.sendDroppedFrameEvent = function(e) {
                w.debug("[cpp] send events:", ol, e),
                this._dispatchPlayerEventsToCPP(ol, e)
            }
            ,
            t.prototype.sendQosFragmentEvent = function(e) {
                var t = Object.keys(e).filter(function(e) {
                    return !e.includes("abrState")
                }).map(function(t) {
                    return t + "=" + e[t]
                }).join();
                w.log("[cpp] send events:", ll, t),
                this._dispatchPlayerEventsToCPP(ll, e)
            }
            ,
            t.prototype._dispatchPlayerEventsToCPP = function(e, t) {
                var i = t || {};
                i.timestampInMilliseconds = this.getTimestampInMilliseconds();
                var n = new CustomEvent(e,{
                    detail: i
                });
                this.dispatchEvent(n)
            }
            ,
            t.prototype.getTimestampInMilliseconds = function() {
                return Date.now()
            }
            ,
            t.prototype.getPlayPosInMilliseconds = function() {
                return 1e3 * this._player.currentTime
            }
            ,
            t.prototype.getMinBufferedLengthInMilliseconds = function() {
                var t = this._player.timeline;
                return t && t.mpd && t.mpd.minBufferTime || -1
            }
            ,
            t.prototype.getBufferedLengthInMilliseconds = function(e) {
                return parseInt(1e3 * this._player.getBufferLength(e))
            }
            ,
            t.prototype.hasCurrentFragmentEnteredPipeline = function() {
                return !1
            }
            ,
            t.prototype.isLive = function() {
                var e = this._player.timeline;
                return e && e.live
            }
            ,
            t.prototype.getNextFragments = function(e, t, i, n, r) {
                var s = []
                  , a = []
                  , o = this._player.segmentDownloadExecutor && this._player.segmentDownloadExecutor.stream.getNextSegments(e, t, i, n);
                if (o) {
                    var l = o.nextSegments
                      , d = o.totalSeconds
                      , u = o.rep.detail.bandwidth
                      , c = Math.max(Math.ceil((n - d) / r), 0);
                    s = l.map(function(e) {
                        return e.duration
                    }).concat(Array(c).fill(r)),
                    a = l.map(function(e) {
                        return e.bytes ? e.size : u * e.duration / 8
                    }).concat(Array(c).fill(u * r / 8))
                }
                return {
                    size: a,
                    duration: s
                }
            }
            ,
            t.prototype.getAverageDuration = function(e, t, i) {
                var n = this._player.timeline;
                return n ? n.getAverageDuration(e, t, i) : -1
            }
            ,
            t.prototype.getHorizontalPhysicalPixels = function() {
                return window.screen.width || 0
            }
            ,
            t.prototype.getVerticalPhysicalPixels = function() {
                return window.screen.height || 0
            }
            ,
            t.prototype.isLastSegment = function(e) {
                var t = this._player.segmentDownloadExecutor;
                return !!t && t.stream.isDownloadingLastSegment(e)
            }
            ,
            t.prototype.getCorePlaybackBufferingState = function() {
                var e = this._player.bufferingState;
                return il[e] || e
            }
            ,
            Object.defineProperties(t.prototype, i),
            t
        }(o.a);
        re.inject(dl.prototype);
        var ul = {
            now: Date.now,
            str: function str(e) {
                return void 0 === e && (e = Date.now()),
                new Date(e).toISOString().slice(11)
            }
        };
        function cl(e, t, i) {
            e.push(t),
            e.length > i && e.shift()
        }
        function hl(e, t) {
            return t.err && (e.err = t.err),
            t.data && (e.data = t.data),
            null != t.at ? e.at = ul.str(t.at) : null != t.end ? (e.at = ul.str(t.start) + "~" + ul.str(t.end),
            e.time = (t.end - t.start) / 1e3) : e.at = ul.str(t.start) + "~",
            e
        }
        var pl = function() {
            this.records = []
        };
        pl.prototype.log = function(e, t) {
            cl(this.records, {
                data: e,
                err: t,
                at: ul.now()
            }, 10)
        }
        ,
        pl.prototype.clear = function() {
            this.records = []
        }
        ,
        pl.prototype.report = function() {
            return this.records.map(function(e) {
                return hl({}, e)
            })
        }
        ;
        var _l = function() {
            this.records = []
        };
        _l.prototype.start = function(e, t) {
            cl(this.records, {
                seg: e,
                cdn: t,
                start: ul.now()
            }, 10)
        }
        ,
        _l.prototype.end = function(e, t, i) {
            var n = this.records.find(function(i) {
                return i.seg == e && i.cdn == t
            });
            if (null != n)
                return n.err = i,
                n.end = ul.now(),
                n.data = {
                    pos: e.start,
                    url: e.getUrlByCdn(t),
                    bytes: e.bytes,
                    cdn: t
                },
                n
        }
        ,
        _l.prototype.clear = function() {
            this.records = []
        }
        ,
        _l.prototype.report = function() {
            return this.records.map(function(e) {
                return hl({}, e)
            })
        }
        ;
        var fl = function(e) {
            this.records = {},
            this.tracker = e
        };
        fl.prototype.start = function(e, t, i) {
            !i && this.records[e] || (this.records[e] = {
                data: t,
                start: ul.now()
            })
        }
        ,
        fl.prototype.end = function(e, t) {
            var i = this.records[e];
            i && !i.end && (i.err = t,
            i.end = ul.now(),
            "load" == e && this._done())
        }
        ,
        fl.prototype._done = function() {
            for (var e = 0, t = 0; e < 2 && t < this.tracker.downloads.records.length; ++t) {
                var i = this.tracker.downloads.records[t];
                "video" == i.seg.parent.detail.type && (this.records["load_seg_" + ++e] = i)
            }
            this.tracker.trigger(z.TrackingEvent.STARTUP_DONE, this.report(), !0)
        }
        ,
        fl.prototype.clear = function() {
            this.records = {}
        }
        ,
        fl.prototype.report = function() {
            var e = this;
            return Object.keys(this.records).map(function(t) {
                return hl({
                    key: t
                }, e.records[t])
            })
        }
        ;
        var gl = function() {
            this.mpd = new pl(this),
            this.startup = new fl(this),
            this.downloads = new _l(this),
            this._cts = new N
        };
        gl.prototype.clear = function() {
            this.mpd.clear(),
            this.startup.clear(),
            this.downloads.clear(),
            this._cts.cancel(),
            this._cts = new N
        }
        ,
        gl.prototype.report = function() {
            return {
                mpd: this.mpd.report(),
                startup: this.startup.report(),
                downloads: this.downloads.report()
            }
        }
        ,
        gl.prototype.trigger = function(e, t, i) {
            var n = this;
            if (i)
                this.dispatchEvent(new CustomEvent(e,{
                    detail: t
                })),
                this.target.dispatchEvent(new CustomEvent(q.Player.TRACKING,{
                    detail: {
                        event: e,
                        data: t
                    }
                }));
            else {
                var r = this._cts.token;
                setTimeout(function() {
                    return r.isCancellationRequested || n.trigger(e, t, !0)
                })
            }
        }
        ,
        gl.fill = hl,
        re.inject(gl.prototype);
        var ml = function(e, t, i) {
            this.unit = e,
            this.offset = t || 0,
            this.timeline = i || e && e.timeline
        };
        ml.prototype.getPositionInContent = function() {
            return null == this.unit ? 0 : this.unit == z.END_OF_STREAM ? this.getDurationOfContent() : this.unit.timeline == this.timeline ? this.unit.start + this.offset : this.unit.timeline.parent.start
        }
        ,
        ml.prototype.getDurationOfContent = function() {
            return this.timeline ? this.timeline.duration : NaN
        }
        ,
        ml.prototype.getPositionInPeriod = function() {
            return this.offset
        }
        ,
        ml.prototype.getDurationOfPeriod = function() {
            return null == this.unit || this.unit == z.END_OF_STREAM ? 0 : this.unit.duration
        }
        ,
        ml.prototype.getPositionInPrimary = function() {
            return null == this.timeline ? 0 : this.getPositionInUTC() - this.timeline.baseline
        }
        ,
        ml.prototype.getDurationOfPrimary = function() {
            return this.getDurationOfUTC()
        }
        ,
        ml.prototype.getPositionInAsset = function() {
            return null == this.unit || this.unit == z.END_OF_STREAM ? 0 : this.unit.ptoa(this.offset)
        }
        ,
        ml.prototype.getDurationOfAsset = function() {
            return null == this.unit ? NaN : this.unit == z.END_OF_STREAM ? 0 : this.unit.asset.duration
        }
        ,
        ml.prototype.getPositionInUTC = function() {
            return null == this.unit ? 0 : this.unit == z.END_OF_STREAM ? this.getDurationOfUTC() + this.timeline.baseline : this.unit.primary ? this.unit.utc.s + this.offset : this.unit.utc.s
        }
        ,
        ml.prototype.getDurationOfUTC = function() {
            if (null == this.timeline)
                return NaN;
            var e = this.timeline.units[0]
              , t = this.timeline.units[this.timeline.units.length - 1];
            return t.utc.s + t.utc.d - e.utc.s
        }
        ,
        ml.prototype.toString = function() {
            return null == this.unit ? "null" : this.unit.id + ":" + this.offset.toFixed(3)
        }
        ,
        ml.find = function(e, t) {
            return null == e ? new ml : "number" == typeof t ? ml._find(e, t, function(e) {
                return e.start
            }, function(e) {
                return e.duration
            }) : "string" == typeof t ? new ml(e.units.find(function(e) {
                return e.id == t
            }),0,e) : t && null != t.index ? new ml(e.units[t.index],0,e) : t && null != t.utcPosition ? ml._find(e, t.utcPosition, function(e) {
                return e.utc.s
            }, function(e) {
                return e.utc.d
            }) : t && null != t.primaryPosition ? ml._find(e, t.primaryPosition + e.baseline, function(e) {
                return e.utc.s
            }, function(e) {
                return e.utc.d
            }) : t && null != t.assetPosition ? ml._find(e, t.assetPosition + e.baseline, function(e) {
                return e.utc.s
            }, function(e) {
                return e.utc.d
            }) : new ml(null,0,e)
        }
        ,
        ml._find = function(e, t, i, n) {
            for (var r = 0, s = e.units; r < s.length; r += 1) {
                var a = s[r]
                  , o = t - i(a);
                if (o <= Math.max(n(a) - z.SEEK_EPS, 0))
                    return o = Math.min(o, a.duration),
                    new ml(a,o < z.SEEK_EPS ? 0 : o,e)
            }
            return new ml(z.END_OF_STREAM,0,e)
        }
        ,
        ml.first = function(e) {
            return new ml(e.units[0],0)
        }
        ,
        ml.isContinuousInAsset = function(e, t) {
            if (e.unit.subordinate && "ready" == e.unit.subordinate.state && e.unit.subordinate.units.length > 0) {
                var i = e.unit.subordinate.units[e.unit.subordinate.units.length - 1];
                e = new ml(i,i.duration,e.timeline)
            }
            return t.unit.subordinate && "ready" == t.unit.subordinate.state && t.unit.subordinate.units.length > 0 && (t = new ml(t.unit.subordinate.units[0],0,t.timeline)),
            e.unit.asset == t.unit.asset && Math.abs(e.getPositionInAsset() - t.getPositionInAsset()) < z.SEEK_EPS
        }
        ,
        ml.isContinuousInContent = function(e, t) {
            return Math.abs(e.getPositionInContent() - t.getPositionInContent()) < z.SEEK_EPS
        }
        ;
        var yl = [q.Player.ENDED, q.Player.TIME_UPDATE, q.Player.VOLUME_CHANGE]
          , vl = {
            autoplay: {},
            buffered: {
                readonly: !0
            },
            currentSrc: {
                readonly: !0
            },
            duration: {
                readonly: !0
            },
            ended: {
                readonly: !0
            },
            loop: {},
            muted: {},
            networkState: {
                readonly: !0
            },
            paused: {
                readonly: !0
            },
            readyState: {
                readonly: !0
            },
            seekable: {
                readonly: !0
            },
            seeking: {
                readonly: !0
            },
            volume: {}
        }
          , El = 0
          , bl = 2
          , Tl = 1
          , Sl = function(e, t) {
            this._videoTag = e,
            this._tracker = t,
            this._emeHandler = new Ce(e,t),
            this._config = {},
            this._src = null,
            this._error = null,
            this._blocked = El,
            this._playbackRate = 1,
            this._onError = this._onError.bind(this),
            this._onPlaying = this._onPlaying.bind(this),
            this._onTimeUpdate = this._onTimeUpdate.bind(this),
            this._onForwardEvent = this._onForwardEvent.bind(this),
            this._videoTag.addEventListener(q.Player.ERROR, this._onError),
            this._videoTag.addEventListener(q.Player.PLAYING, this._onPlaying),
            this._videoTag.addEventListener(q.Player.TIME_UPDATE, this._onTimeUpdate),
            this._emeHandler.addEventListener(q.EME.REQUEST_LICENSE, this._onForwardEvent),
            this._emeHandler.addEventListener(q.EME.ERROR, this._onForwardEvent);
            for (var i = 0, n = yl; i < n.length; i += 1) {
                var r = n[i];
                this._videoTag.addEventListener(r, this._onForwardEvent)
            }
        }
          , Al = {
            src: {
                configurable: !0
            },
            currentTime: {
                configurable: !0
            },
            blocked: {
                configurable: !0
            },
            error: {
                configurable: !0
            },
            playbackRate: {
                configurable: !0
            }
        };
        Sl.prototype.play = function() {
            var e = this;
            w.log("[decoder] request play"),
            this._videoTag.paused && (this._tracker && this._tracker.start("decoder_play"),
            this._tracker && this._tracker.start("set_blocked_playing"),
            this._blocked = bl,
            Promise.resolve(this._videoTag.play()).catch(function(t) {
                e._tracker && e._tracker.end("decoder_play", t.name || t.message),
                t && "NotAllowedError" == t.name && e.dispatchEvent(new CustomEvent(q.Player.PLAY_REJECTED))
            }))
        }
        ,
        Sl.prototype.pause = function() {
            w.log("[decoder] request pause"),
            this._videoTag.paused || this._videoTag.pause()
        }
        ,
        Sl.prototype.setEnabledKeySystems = function(e, t) {
            e && (t || null == this._systems) && (this._systems = e,
            this._emeHandler.setEnabledKeySystems(e))
        }
        ,
        Sl.prototype.openEMESession = function(e, t, i) {
            this._emeHandler.openSession(e, t, i)
        }
        ,
        Sl.prototype.closeEMESession = function() {
            this._emeHandler.closeSession()
        }
        ,
        Sl.prototype.getVideoPlaybackQuality = function() {
            return "function" == typeof this._videoTag.getVideoPlaybackQuality ? this._videoTag.getVideoPlaybackQuality() : {
                creationTime: performance.now(),
                totalVideoFrames: this._videoTag.webkitDecodedFrameCount || 0,
                droppedVideoFrames: this._videoTag.webkitDroppedFrameCount || 0
            }
        }
        ,
        Sl.prototype.canPlayType = function(e) {
            return this._videoTag.canPlayType(e)
        }
        ,
        Sl.prototype.setConfig = function(e) {
            this._config = e,
            this._emeHandler.setConfig(this._config)
        }
        ,
        Al.src.get = function() {
            return this._src
        }
        ,
        Al.src.set = function(e) {
            this._error = null,
            this._blocked = El,
            this._src && (w.log("[decoder] detach src", this._videoTag.src),
            w.debug("[decoder] detach time", this._videoTag.currentTime, this._videoTag.duration),
            w.debug("[decoder] detach state", this._videoTag.readyState, this._videoTag.networkState),
            w.debug("[decoder] detach flags", this._videoTag.paused, this._videoTag.seeking, this._videoTag.ended),
            this._videoTag.removeAttribute("src"),
            this._videoTag.load(),
            this._emeHandler.onDetachMediaElement()),
            this._ms && (this._ms = null,
            URL.revokeObjectURL(this._src)),
            e instanceof MediaSource ? (this._ms = e,
            this._src = URL.createObjectURL(e)) : this._src = e,
            this._src && (this._emeHandler.onAttachMediaElement(),
            this._videoTag.setAttribute("src", this._src),
            this._videoTag.load(),
            this._videoTag.playbackRate = this._playbackRate,
            w.log("[decoder] attach src", this._videoTag.src),
            w.debug("[decoder] attach time", this._videoTag.currentTime, this._videoTag.duration),
            w.debug("[decoder] attach state", this._videoTag.readyState, this._videoTag.networkState),
            w.debug("[decoder] attach flags", this._videoTag.paused, this._videoTag.seeking, this._videoTag.ended))
        }
        ,
        Al.currentTime.get = function() {
            return this._videoTag.currentTime
        }
        ,
        Al.currentTime.set = function(e) {
            var t = this._videoTag.currentTime;
            this._videoTag.currentTime = e,
            w.log("[decoder] request seek", t, e, this._videoTag.currentTime)
        }
        ,
        Al.blocked.get = function() {
            return this._blocked != El
        }
        ,
        Al.error.get = function() {
            return this._error
        }
        ,
        Al.playbackRate.set = function(e) {
            this._playbackRate = e,
            this._videoTag.playbackRate = e
        }
        ,
        Al.playbackRate.get = function() {
            return this._playbackRate
        }
        ,
        Sl.prototype.isMediaSourceOpen = function() {
            return null != this._ms && "open" == this._ms.readyState
        }
        ,
        Sl.prototype.isMediaSourceClosed = function() {
            return null == this._ms || "closed" == this._ms.readyState
        }
        ,
        Sl.prototype._onError = function() {
            var e = this._videoTag.error.code
              , t = Y.MEDIA_UNKNOWN_ERROR
              , i = {};
            switch (e) {
            case z.MediaError.MEDIA_ERR_ABORTED:
                t = Y.MEDIA_ABORTED_ERROR;
                break;
            case z.MediaError.MEDIA_ERR_NETWORK:
                t = Y.MEDIA_NETWORK_ERROR;
                break;
            case z.MediaError.MEDIA_ERR_DECODE:
                t = Y.MEDIA_DECODE_ERROR,
                i.emeRelated = !0;
                break;
            case z.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:
                t = Y.MEDIA_SRC_NOT_SUPPORTED_ERROR,
                i.emeRelated = !0;
                break;
            case z.MediaError.MEDIA_ERR_ENCRYPTED:
                t = Y.MEDIA_ENCRYPTED_ERROR,
                i.emeRelated = !0;
            }
            this._error = new Error("native video tag error, message: " + this._videoTag.error.message),
            this._error.type = t,
            this._error.params = i,
            this.dispatchEvent(new CustomEvent(q.Player.ERROR))
        }
        ,
        Sl.prototype._onPlaying = function() {
            w.log("[decoder] playing"),
            this._tracker && this._tracker.end("decoder_play"),
            this._videoTag.paused || this._blocked != bl || (this._tracker && this._tracker.end("set_blocked_playing"),
            this._tracker && this._tracker.start("set_blocked_timeupdate"),
            this._blocked = Tl)
        }
        ,
        Sl.prototype._onTimeUpdate = function() {
            this._videoTag.paused || this._blocked != Tl || (this._tracker && this._tracker.end("set_blocked_timeupdate"),
            this._blocked = El,
            w.log("[decoder] unblock"),
            this.dispatchEvent(new CustomEvent(q.Player.PLAYING)))
        }
        ,
        Sl.prototype._onForwardEvent = function(e) {
            this.dispatchEvent(new CustomEvent(e.type,e))
        }
        ,
        Object.defineProperties(Sl.prototype, Al),
        re.inject(Sl.prototype);
        for (var Pl = 0, wl = Object.keys(vl); Pl < wl.length; Pl += 1) {
            var kl = wl[Pl];
            Object.defineProperty(Sl.prototype, kl, function(e, t) {
                return {
                    configurable: !0,
                    get: function get() {
                        return this._videoTag[e]
                    },
                    set: t ? void 0 : function(t) {
                        this._videoTag[e] = t
                    }
                }
            }(kl, vl[kl].readonly))
        }
        var Cl = z.LoaderState
          , Il = {};
        Il[Cl.STOPPED] = 0,
        Il[Cl.ENDED] = 1,
        Il[Cl.IDLE_ENOUGH_DATA] = 2,
        Il[Cl.IDLE_REACHED_END] = 3,
        Il[Cl.IDLE_WAITING_LIVE] = 4,
        Il[Cl.LOADING] = 5,
        Il[Cl.ERROR] = 6;
        var Rl = function(e, t) {
            this._cppListener = t.cppListener,
            this._cppAdapter = t.cppAdapter,
            this._asset = e,
            this._position = 0,
            this._name = "[" + e.id + "-stream]",
            this._bufferManager = t.bufferManager,
            this._onSourceOpen = this._onSourceOpen.bind(this),
            this._onSourceClose = this._onSourceClose.bind(this),
            this._onBufferEnded = this._onBufferEnded.bind(this),
            this._onBufferError = this._onBufferError.bind(this),
            this._onBufferUpdate = this._onBufferUpdate.bind(this),
            this._cppListener.setDashStream(this),
            this._audioLoader = this._generateLoader(e.audio, t),
            this._videoLoader = this._generateLoader(e.video, t)
        }
          , Dl = {
            decoder: {
                configurable: !0
            },
            position: {
                configurable: !0
            },
            loaders: {
                configurable: !0
            },
            loaderState: {
                configurable: !0
            },
            networkState: {
                configurable: !0
            }
        };
        Rl.prototype.load = function(e) {
            if (this.loaderState == Cl.STOPPED) {
                this._bufferManager.loadStream(this),
                this._position = e,
                this._audioLoader.load(e),
                this._videoLoader.load(e);
                var t = this._getTimelineUnitByPosition(e);
                this.setPeriodSession(t)
            }
        }
        ,
        Rl.prototype.stop = function() {
            this._bufferManager.stopStream(this),
            this._audioLoader.stop(),
            this._videoLoader.stop(),
            w.log(this._name, "stop loading")
        }
        ,
        Rl.prototype.seek = function(e) {
            if (Aa.isDull(this.loaderState))
                w.log(this._name, "seek trigger reload", e, this._position),
                this.stop(),
                this.load(e);
            else {
                var t = this._getTimelineUnitByPosition(this._position);
                this._position = e;
                var i = this._getTimelineUnitByPosition(e);
                t !== i && this.setPeriodSession(i),
                this._audioLoader.seek(e),
                this._videoLoader.seek(e)
            }
        }
        ,
        Rl.prototype.end = function() {
            this._audioLoader.end(),
            this._videoLoader.end()
        }
        ,
        Rl.prototype.setPeriodSession = function(e) {
            if (!this._asset.empty) {
                var t = [];
                this._asset.videos.forEach(function(e) {
                    return t = t.concat(e.reps)
                }),
                this._asset.audios.forEach(function(e) {
                    return t = t.concat(e.reps)
                }),
                this._cppAdapter.setPeriodSession(e, t),
                this._cppAdapter.setCurrentVideoAdaptationSet(this._asset.video.adaptationSetId),
                this._cppAdapter.setCurrentAudioAdaptationSet(this._asset.audio.adaptationSetId)
            }
        }
        ,
        Rl.prototype.selectRepresentation = function(e) {
            var t = e.dataType;
            "audio" === t ? this._audioLoader.selectRepresentation(e) : "video" === t && this._videoLoader.selectRepresentation(e)
        }
        ,
        Dl.decoder.get = function() {
            return this._decoder
        }
        ,
        Dl.decoder.set = function(e) {
            this._decoder != e && (this._decoder && (this.stop(),
            this._audioLoader.buffer = null,
            this._videoLoader.buffer = null,
            this._mediaSource.removeEventListener("sourceopen", this._onSourceOpen),
            this._mediaSource.removeEventListener("sourceclose", this._onSourceClose),
            this._mediaSource = this._decoder.src = null,
            w.log(this._name, "detach decoder"),
            this._bufferManager.stream = null),
            this._decoder = e,
            this._decoder && (this.load(this._position),
            this._mediaSource = this._decoder.src = new MediaSource,
            this._mediaSource.addEventListener("sourceopen", this._onSourceOpen),
            this._mediaSource.addEventListener("sourceclose", this._onSourceClose),
            w.log(this._name, "attach decoder"),
            this._bufferManager.stream = this))
        }
        ,
        Dl.position.get = function() {
            return this._position
        }
        ,
        Dl.position.set = function(e) {
            this._position = e,
            this._audioLoader.position = e,
            this._videoLoader.position = e
        }
        ,
        Dl.loaders.get = function() {
            return {
                audio: this._audioLoader,
                video: this._videoLoader
            }
        }
        ,
        Rl.prototype.getNextDownloadPosition = function(e) {
            return "audio" == e ? this._audioLoader.nextDownload : "video" == e ? this._videoLoader.nextDownload : NaN
        }
        ,
        Rl.prototype.getAvailableRepsForSelectedAset = function(e) {
            return "audio" == e ? this._asset.audio.reps : "video" == e ? this._asset.video.reps : this._asset.audio.reps.concat(this._asset.video.reps)
        }
        ,
        Rl.prototype.getBufferLength = function(e) {
            if ("audio" == e)
                return this._audioLoader.getBufferLength();
            if ("video" == e)
                return this._videoLoader.getBufferLength();
            var t = this._audioLoader.getBufferLength()
              , i = this._videoLoader.getBufferLength();
            return Math.min(t, i)
        }
        ,
        Rl.prototype.getContinueBufferLength = function(e) {
            if ("audio" == e)
                return this._audioLoader.getContinueBufferLength();
            if ("video" == e)
                return this._videoLoader.getContinueBufferLength();
            var t = this._audioLoader.getContinueBufferLength()
              , i = this._videoLoader.getContinueBufferLength();
            return Math.min(t, i)
        }
        ,
        Rl.prototype.getBufferedRanges = function(e) {
            var t = null;
            return (t = "audio" == e ? this._audioLoader.buffer : "video" == e ? this._videoLoader.buffer : this._decoder) ? t.buffered : new Ie
        }
        ,
        Rl.prototype.getFacingStreamGap = function(e) {
            if ("audio" == e)
                return this._audioLoader.getFacingStreamGap();
            if ("video" == e)
                return this._videoLoader.getFacingStreamGap();
            var t = this._audioLoader.getFacingStreamGap()
              , i = this._videoLoader.getFacingStreamGap();
            return Math.max(t, i)
        }
        ,
        Rl.prototype._getTimelineUnitByPosition = function(e) {
            return this._asset ? this._asset.units.find(function(t) {
                return t.atop(e) < t.duration
            }) : null
        }
        ,
        Rl.prototype._generateLoader = function(e, t) {
            if (e.empty)
                return new wa;
            var i = new Aa(e,t);
            return i.addEventListener(q.Buffer.ENDED, this._onBufferEnded),
            i.addEventListener(q.Buffer.ERROR, this._onBufferError),
            i.addEventListener(q.Buffer.UPDATE, this._onBufferUpdate),
            i
        }
        ,
        Rl.prototype._generateBuffer = function(e, t) {
            if (!t.empty) {
                var i = this._mediaSource.addSourceBuffer(t.mime);
                i.timestampOffset = -t.pto,
                e.buffer = i
            }
        }
        ,
        Rl.prototype._onSourceOpen = function() {
            null != this._decoder && (this._decoder.isMediaSourceClosed() || (w.log(this._name, "sourceopen"),
            this._mediaSource.removeEventListener("sourceopen", this._onSourceOpen),
            this._mediaSource.duration = this._asset.duration,
            this._generateBuffer(this._audioLoader, this._asset.audio),
            this._generateBuffer(this._videoLoader, this._asset.video)))
        }
        ,
        Rl.prototype._onSourceClose = function() {
            w.error(this._name, "unexpected sourceclose"),
            this.stop(),
            this._audioLoader.buffer = null,
            this._videoLoader.buffer = null
        }
        ,
        Rl.prototype._onBufferEnded = function() {
            this._decoder && this._decoder.isMediaSourceOpen() && this.loaderState == Cl.ENDED && (w.log(this._name, "media source ended"),
            this._mediaSource.endOfStream())
        }
        ,
        Rl.prototype._onBufferError = function(e) {
            this._error = !0,
            this.dispatchEvent(new CustomEvent(q.Buffer.ERROR,e))
        }
        ,
        Rl.prototype._onBufferUpdate = function() {
            this._decoder.isMediaSourceOpen() && this.dispatchEvent(new CustomEvent(q.Buffer.UPDATE))
        }
        ,
        Dl.loaderState.get = function() {
            if (this._error)
                return Cl.ERROR;
            var e = this._audioLoader.state
              , t = this._videoLoader.state;
            return Il[e] > Il[t] ? e : t
        }
        ,
        Dl.networkState.get = function() {
            switch (this.loaderState) {
            case Cl.ENDED:
            case Cl.STOPPED:
            case Cl.IDLE_ENOUGH_DATA:
            case Cl.IDLE_REACHED_END:
            case Cl.IDLE_WAITING_LIVE:
                return z.NetworkState.NETWORK_IDLE;
            case Cl.LOADING:
                return z.NetworkState.NETWORK_LOADING;
            case Cl.ERROR:
            default:
                return z.NetworkState.NETWORK_NO_SOURCE;
            }
        }
        ,
        Rl.prototype.getNextSegments = function(e, t, i, n) {
            var r = []
              , s = this._asset.getTargetRep(e, t, i);
            if (!s)
                return null;
            var a = s.segments
              , o = this.getNextDownloadPosition(e);
            if (isNaN(o))
                return null;
            for (var l = s.findSegment(o), d = 0, u = l ? l.number : a.length; u < a.length && d < n; ) {
                var c = a[u++];
                r.push(c),
                d += c.duration
            }
            return {
                nextSegments: r,
                rep: s,
                totalSeconds: d
            }
        }
        ,
        Rl.prototype.isDownloadingLastSegment = function(e) {
            return "video" === e && this._videoLoader ? this._videoLoader.isDownloadingLastSegment() : !("audio" !== e || !this._audioLoader) && this._audioLoader.isDownloadingLastSegment()
        }
        ,
        Object.defineProperties(Rl.prototype, Dl),
        re.inject(Rl.prototype);
        var Ll = function(e, t, i, n) {
            void 0 === n && (n = z.RetryLevel.STREAM),
            this.state = e,
            this.name = t,
            this._interval = i,
            this._retry = n,
            this._start = Date.now()
        }
          , Ml = {
            ended: {
                configurable: !0
            },
            timeouted: {
                configurable: !0
            }
        };
        function Ol(e, t) {
            for (var i = [], n = arguments.length - 2; n-- > 0; ) {
                i[n] = arguments[n + 2]
            }
            return e && e.state == t ? e : new (Function.prototype.bind.apply(Ll, [null].concat([t], i)))
        }
        Ll.prototype.same = function(e) {
            return this.state == e.state
        }
        ,
        Ll.prototype.refresh = function() {
            this.state == Ll.PLAYING && (this._start = Date.now())
        }
        ,
        Ml.ended.get = function() {
            return this.state == Ll.ENDED && this.timeouted
        }
        ,
        Ml.timeouted.get = function() {
            return Date.now() - this._start > this._interval
        }
        ,
        Ll.prototype.generateError = function() {
            var e = new Error("timeout error " + this.state + " " + this.name);
            return e.type = Y.MEDIA_TIMEOUT_ERROR,
            e.retry = this._retry,
            e.params = {
                timeoutName: this.name,
                timeoutState: this.state
            },
            e
        }
        ,
        Ll.get = function(e, t) {
            var i = e.asset.units[0].timeline.live;
            if (e && e.decoder) {
                if (e.suspended)
                    return Ol(t, Ll.SUSPENDED, "suspended", 6e4);
                if (e.loading)
                    return Ol(t, Ll.LOADING, "loading", i ? 6e4 : 3e4);
                if (e.seeking)
                    return Ol(t, Ll.SEEKING, "seeking", i ? 6e4 : 3e4);
                if (e.rebuffering)
                    return Ol(t, Ll.REBUFFERING, "rebuffering", 45e3);
                if (e.paused)
                    return Ol(t, Ll.NULL, "null", 1 / 0);
                if (e.duration - e.currentTime < 3) {
                    var n = 1100 * (e.duration - e.currentTime);
                    return Ol(t, Ll.ENDED, "ended", n)
                }
                return e.blocked ? Ol(t, Ll.BLOCKED, "blocked", 2e4, z.RetryLevel.EME) : Ol(t, Ll.PLAYING, "playing", i ? 6e4 : 1e4, z.RetryLevel.EME)
            }
            return Ol(t, Ll.NULL, "null", 1 / 0)
        }
        ,
        Object.defineProperties(Ll.prototype, Ml),
        Ll.NULL = -1,
        Ll.PLAYING = 0,
        Ll.REBUFFERING = 1,
        Ll.SEEKING = 3,
        Ll.ENDED = 5,
        Ll.LOADING = 6,
        Ll.BLOCKED = 8,
        Ll.SUSPENDED = 9;
        var xl = z.ReadyState.HAVE_NOTHING
          , Nl = z.ReadyState.HAVE_METADATA
          , Ul = z.ReadyState.HAVE_CURRENT_DATA
          , Bl = z.ReadyState.HAVE_FUTURE_DATA
          , Fl = z.ReadyState.HAVE_ENOUGH_DATA
          , Vl = function(e, t) {
            this._asset = e,
            this._corePlayback = t.corePlayback,
            this._name = "[" + e.id + "-player]",
            this._stream = new Rl(e,t),
            this._ended = !1,
            this._paused = !0,
            this._position = 0,
            this._loading = !1,
            this._seeking = !1,
            this._rebuffering = !1,
            this._isTimeUpdateFired = !1,
            this._readyState = xl,
            this._eventStreams = t.eventStreams,
            this._captionManager = t.captionManager,
            this._tracker = t.playerTracker,
            this._timeoutChecker = Ll.get(this),
            this._isWaitingAtGap = !1,
            this._onEnded = this._onEnded.bind(this),
            this._onError = this._onError.bind(this),
            this._onTimeUpdate = this._onTimeUpdate.bind(this),
            this._onBufferError = this._onBufferError.bind(this),
            this._onBufferUpdate = this._onBufferUpdate.bind(this),
            this._stream.addEventListener(q.Buffer.ERROR, this._onBufferError),
            this._stream.addEventListener(q.Buffer.UPDATE, this._onBufferUpdate)
        }
          , Hl = {
            decoder: {
                configurable: !0
            },
            ended: {
                configurable: !0
            },
            paused: {
                configurable: !0
            },
            loading: {
                configurable: !0
            },
            seeking: {
                configurable: !0
            },
            rebuffering: {
                configurable: !0
            },
            blocked: {
                configurable: !0
            },
            suspended: {
                configurable: !0
            },
            stream: {
                configurable: !0
            },
            asset: {
                configurable: !0
            },
            currentTime: {
                configurable: !0
            },
            seekable: {
                configurable: !0
            },
            duration: {
                configurable: !0
            },
            error: {
                configurable: !0
            },
            readyState: {
                configurable: !0
            },
            networkState: {
                configurable: !0
            },
            buffered: {
                configurable: !0
            },
            bufferingState: {
                configurable: !0
            }
        };
        Vl.prototype.play = function() {
            w.log(this._name, "request play"),
            this._ended || this._paused && (this._paused = !1,
            this._queueEvent(q.Player.PLAY),
            this._readyState >= Bl ? (this._decoder.play(),
            this._queueEvent(q.Player.PLAYING)) : (this._queueEvent(q.Player.WAITING),
            this._corePlayback.sendBufferingStartEvent(this.bufferingState)))
        }
        ,
        Vl.prototype.pause = function() {
            w.log(this._name, "request pause"),
            this._paused || (this._paused = !0,
            this._isWaitingAtGap = !1,
            this._queueEvent(q.Player.PAUSE),
            this._queueEvent(q.Player.TIME_UPDATE),
            this._readyState >= Bl && this._decoder.pause())
        }
        ,
        Vl.prototype.dispose = function() {
            w.log(this._name, "dispose"),
            this._stream.stop(),
            this._isWaitingAtGap = !1,
            this._disposed = !0,
            this._decoder && (w.log(this._name, "dispose with decoder"),
            this._decoder.pause(),
            this._stopInterval(),
            this._eventStreams.clear(),
            this._captionManager.clear(),
            this._stream.decoder = null,
            this._detachDecoderEvents(),
            this._decoder = null)
        }
        ,
        Hl.decoder.get = function() {
            return this._decoder
        }
        ,
        Hl.decoder.set = function(e) {
            this._decoder != e && (this._ended = !1,
            this._loading = !0,
            this._rebuffering = !1,
            this._readyState = xl,
            this._decoder && (this._stopInterval(),
            this._detachDecoderEvents(),
            this._stream.decoder = null,
            w.log(this._name, "detach decoder")),
            this._decoder = e,
            this._isTimeUpdateFired = !1,
            this._decoder && (this._startInterval(),
            this._attachDecoderEvents(),
            this._stream.decoder = e,
            this._setSeekingState(this._position > 0),
            w.log(this._name, "attach decoder")),
            this._captionManager.clear(),
            this._timeoutChecker = Ll.get(this))
        }
        ,
        Hl.ended.get = function() {
            return this._ended
        }
        ,
        Hl.paused.get = function() {
            return this._paused
        }
        ,
        Hl.loading.get = function() {
            return this._loading
        }
        ,
        Hl.seeking.get = function() {
            return this._seeking
        }
        ,
        Hl.rebuffering.get = function() {
            return this._rebuffering
        }
        ,
        Hl.blocked.get = function() {
            return !!this._decoder && this._decoder.blocked
        }
        ,
        Hl.suspended.get = function() {
            return this._readyState <= Ul && this._stream.loaderState == z.LoaderState.IDLE_WAITING_LIVE
        }
        ,
        Hl.stream.get = function() {
            return this._stream
        }
        ,
        Hl.asset.get = function() {
            return this._asset
        }
        ,
        Hl.currentTime.get = function() {
            return this._position
        }
        ,
        Hl.currentTime.set = function(e) {
            w.log(this._name, "request seek", e),
            0 != this.seekable.length && (this._isWaitingAtGap = !1,
            e = Math.min(Math.max(this.seekable[0], e), this.seekable[1]),
            this._position = e,
            this._stream.seek(e),
            null != this._decoder && (this._setSeekingState(!0),
            this._updateReadyState()))
        }
        ,
        Hl.seekable.get = function() {
            return this._asset.seekable
        }
        ,
        Hl.duration.get = function() {
            return this._asset.duration
        }
        ,
        Hl.error.get = function() {
            return this._error
        }
        ,
        Hl.readyState.get = function() {
            return this._readyState
        }
        ,
        Hl.readyState.set = function(e) {
            this._readyState = Math.min(e, this._readyState),
            this._queueTask(this._updateReadyState)
        }
        ,
        Hl.networkState.get = function() {
            return this._stream.networkState
        }
        ,
        Hl.buffered.get = function() {
            return this._stream.getBufferedRanges()
        }
        ,
        Hl.bufferingState.get = function() {
            var e = z.BufferingState;
            if (this._loading)
                return e.BUFFERING;
            if (this._seeking)
                return e.SEEKING;
            if (!this._rebuffering)
                return this._readyState <= Ul ? e.UNKNOWN : e.NO_BUFFERING;
            if (!this._asset.units[0].timeline.live)
                return e.REBUFFERING;
            if (this._asset.infinity && Math.abs(this.seekable[1] - this._position) <= this._haveFutureDataThreshold() + .5)
                return e.MPD_REFRESH_FAILURE;
            if (this._isWaitingAtGap) {
                var t = this._position + this._stream.getContinueBufferLength()
                  , i = z.DASH_CTS_EPS;
                return this._asset.audio.reps[0] && this._asset.audio.reps[0].isInMissingSegment(t + i) || this._asset.video.reps[0].isInMissingSegment(t + i) ? e.MPD_FRAGMENT_MISSING : e.FRAGMENT_DOWNLOAD_FAILURE
            }
            return e.REBUFFERING
        }
        ,
        Vl.prototype._startInterval = function() {
            var e = this;
            null == this._interval && (this._interval = setInterval(function() {
                return e._onProgressInterval()
            }, z.PROGRESS_INTERVAL))
        }
        ,
        Vl.prototype._stopInterval = function() {
            clearInterval(this._interval),
            this._interval = null,
            this._eventStreams.updateTime(null),
            this._captionManager.updateTime(null)
        }
        ,
        Vl.prototype._onProgressInterval = function() {
            if (this._decoder && !this._error && !this._ended) {
                var e = this._position;
                this._updatePosition(),
                this._isTimeUpdateFired || e === this._position || (this._isTimeUpdateFired = !0,
                this.dispatchEvent(new CustomEvent(q.Player.TIME_UPDATE))),
                this._checkEndedState() || this._checkTimeout() || this._checkStreamGap() || (this._updateReadyState(),
                this._eventStreams.updateTime(this._position),
                this._captionManager.updateTime(this._position))
            }
        }
        ,
        Vl.prototype._onEnded = function() {
            var e = this;
            this._ended = !0,
            this._setSeekingState(!1),
            this._position = this.duration,
            this._eventStreams.updateTime(this._position),
            this._queueTask(function() {
                e._ended && !e._paused && (e._paused = !0,
                e.dispatchEvent(new CustomEvent(q.Player.PAUSE)))
            }),
            this._queueEvent(q.Player.ENDED)
        }
        ,
        Vl.prototype._onError = function() {
            this._handleError(this._decoder.error)
        }
        ,
        Vl.prototype._onTimeUpdate = function() {
            this._isReadyForPlay() && (this._timeoutChecker.refresh(),
            this._updatePosition(),
            this._isTimeUpdateFired = !0,
            this.dispatchEvent(new CustomEvent(q.Player.TIME_UPDATE)))
        }
        ,
        Vl.prototype._onBufferError = function(e) {
            this._handleError(e.detail)
        }
        ,
        Vl.prototype._onBufferUpdate = function() {
            this._loading && this._updateReadyState()
        }
        ,
        Vl.prototype._updatePosition = function() {
            if (this._isReadyForPlay()) {
                var e = Math.min(this._decoder.currentTime, this._decoder.duration, this.duration);
                e > this._position + z.SEEK_EPS && w.warn(this._name, "unexpected jump", this._position, e, this._decoder.currentTime, this._decoder.duration, this._decoder.paused, this._decoder.seeking, this._decoder.ended, this._decoder.readyState, this._decoder.networkState),
                this._position = e,
                this._stream.position = this._position
            }
        }
        ,
        Vl.prototype._syncDecoderPosition = function(e) {
            void 0 === e && (e = 0),
            0 != this._decoder.buffered.length && (Math.abs(this._position - this._decoder.currentTime) < e || (this._decoder.currentTime = this._position))
        }
        ,
        Vl.prototype._checkEndedState = function() {
            return !!this._ended || !this._paused && (this._asset.empty ? (w.log(this._name, "ended by empty"),
            this._onEnded(),
            !0) : this._decoder.ended ? (w.log(this._name, "ended by decoder ended flag"),
            this._onEnded(),
            !0) : !this._asset.infinity && (this._timeoutChecker.ended ? (w.warn(this._name, "ended by timeout"),
            this._onEnded(),
            !0) : 0 == this.seekable.length ? (w.log(this._name, "ended by timeline change"),
            this._onEnded(),
            !0) : this._position > this.seekable[1] - z.NUMERICAL_EPS ? (w.log(this._name, "ended by reaching last frame"),
            this._onEnded(),
            !0) : !!this._isStreamEndedWithEmptyBuffer() && (w.log(this._name, "ended by reaching last playable frame"),
            this._onEnded(),
            !0)))
        }
        ,
        Vl.prototype._checkTimeout = function() {
            var e = this._timeoutChecker
              , t = Ll.get(this, e);
            return t.same(e) ? !!e.timeouted && (this._handleError(e.generateError()),
            !0) : (this._timeoutChecker = t,
            w.log(this._name, "timeout checker change", t.name),
            !1)
        }
        ,
        Vl.prototype._checkStreamGap = function() {
            var e = this._stream.getFacingStreamGap();
            if (e > 0) {
                if (!this._paused && this._asset.infinity) {
                    var t = this.seekable[1] - this._asset.units[0].timeline.edge.delay() + .5;
                    if (e > t)
                        return this._isWaitingAtGap || (w.warn(this._name, "waiting at gap near live edge", this._position, e, t),
                        this._isWaitingAtGap = !0),
                        !1
                }
                return w.warn(this._name, "jump across gap", this._position, e),
                this._trackSegmentSkip(e),
                this.currentTime = e,
                !0
            }
            return !1
        }
        ,
        Vl.prototype._trackSegmentSkip = function(e) {
            this._trackSegmentSkipByType("audio", e),
            this._trackSegmentSkipByType("video", e)
        }
        ,
        Vl.prototype._trackSegmentSkipByType = function(e, t) {
            var i = "video" == e ? this._asset.video.reps[0] : this._asset.audio.reps[0];
            if (i) {
                var n = ""
                  , r = null
                  , s = {}
                  , a = t - z.DASH_CTS_EPS - .5;
                i.isInMissingSegment(a) ? n = "missingsegment" : (r = i.findSegment(a)) ? (n = "downloadfailure",
                s.segmentT = r.t,
                s.segmentD = r.d,
                s.segmentBytes = r.bytes,
                s.segmentStart = r.start,
                s.segmentEnd = r.end,
                s.segmentNumber = r.number,
                s.periodId = r.unit && r.unit.id || null) : n = "unknown",
                s.skipReason = n,
                s.type = e,
                s.jumpTo = t,
                s.currentTime = this.currentTime,
                this._tracker && this._tracker.trigger(z.TrackingEvent.SEGMENT_SKIP_PLAYBACK, s, !0)
            }
        }
        ,
        Vl.prototype._updateReadyState = function(e) {
            var t = this._readyState
              , i = this._calculateReadyState(e);
            (t != i || this._seeking) && (this._readyState = i,
            w.log(this._name, "ready state change", i),
            t == xl && i >= Nl && this._queueEvent(q.Player.LOADED_METADATA),
            t <= Nl && i >= Ul && this._loading && this._queueEvent(q.Player.LOADED_DATA),
            t >= Bl && i <= Ul && (this._paused || (this._queueEvent(q.Player.TIME_UPDATE),
            this._queueEvent(q.Player.WAITING),
            this._corePlayback.sendBufferingStartEvent(this.bufferingState),
            this._decoder.pause()),
            this._setRebufferingState(!0)),
            (t <= Ul || this._seeking) && i >= Bl && (this._loading = !1,
            this._setSeekingState(!1),
            this._queueEvent(q.Player.CAN_PLAY),
            this._corePlayback.sendBufferingEndEvent(this.bufferingState),
            this._paused || (this._decoder.play(),
            this._queueEvent(q.Player.PLAYING)),
            this._setRebufferingState(!1)),
            i == Fl && this._queueEvent(q.Player.CAN_PLAY_THROUGH))
        }
        ,
        Vl.prototype._setSeekingState = function(e) {
            e ? (w.log(this._name, "seeking", this._seeking),
            this._ended = !1,
            this._seeking = !0,
            this._isWaitingAtGap = !1,
            this._decoder.pause(),
            this._syncDecoderPosition(),
            this._setRebufferingState(!1),
            this._queueEvent(q.Player.SEEKING),
            this._corePlayback.sendSeekingStartEvent(),
            this._corePlayback.sendBufferingStartEvent(this.bufferingState)) : this._seeking && (w.log(this._name, "seeked", this._position),
            this._seeking = !1,
            this._syncDecoderPosition(z.SEEK_EPS),
            this._queueEvent(q.Player.TIME_UPDATE),
            this._queueEvent(q.Player.SEEKED),
            this._corePlayback.sendSeekingEndEvent(),
            this._corePlayback.sendBufferingEndEvent(this.bufferingState),
            this._eventStreams.updateTime(this._position),
            this._captionManager.updateTime(null),
            this._captionManager.updateTime(this._position))
        }
        ,
        Vl.prototype._setRebufferingState = function(e) {
            e != this._rebuffering && (e ? this._seeking || (this._rebuffering = !0,
            this._queueEvent(q.Player.REBUFFER_START)) : (this._rebuffering = !1,
            this._queueEvent(q.Player.REBUFFER_END)))
        }
        ,
        Vl.prototype._handleError = function(e) {
            this._error || (this._stopInterval(),
            this._error = e,
            this._isWaitingAtGap = !1,
            this._queueEvent(q.Player.ERROR))
        }
        ,
        Vl.prototype._attachDecoderEvents = function() {
            this._decoder.addEventListener(q.Player.ERROR, this._onError),
            this._decoder.addEventListener(q.Player.TIME_UPDATE, this._onTimeUpdate)
        }
        ,
        Vl.prototype._detachDecoderEvents = function() {
            this._decoder.removeEventListener(q.Player.ERROR, this._onError),
            this._decoder.removeEventListener(q.Player.TIME_UPDATE, this._onTimeUpdate)
        }
        ,
        Vl.prototype._queueEvent = function(e, t) {
            this._queueTask(this.dispatchEvent, new CustomEvent(e,{
                detail: t
            }))
        }
        ,
        Vl.prototype._queueTask = function(e) {
            for (var t = this, i = [], n = arguments.length - 1; n-- > 0; ) {
                i[n] = arguments[n + 1]
            }
            setTimeout(function() {
                t._disposed || e.apply(t, i)
            })
        }
        ,
        Vl.prototype._calculateReadyState = function(e) {
            if (null != e)
                return e;
            if (!this._decoder || this._decoder.error)
                return xl;
            if (this._stream.loaderState == z.LoaderState.ENDED)
                return Fl;
            if (this._asset.infinity && this._readyState <= Ul && this._position >= this.seekable[1] - this._asset.units[0].timeline.edge.delay() + .5)
                return this._readyState;
            if (this._isWaitingAtGap)
                return Ul;
            var t = this._stream.getBufferLength();
            return t < this._haveCurrentDataThreshold() ? Nl : t < this._haveFutureDataThreshold() ? Ul : t < this._haveEnoughDataThreshold() ? Bl : Fl
        }
        ,
        Vl.prototype._haveCurrentDataThreshold = function() {
            return .05
        }
        ,
        Vl.prototype._haveFutureDataThreshold = function() {
            return this._loading || this._seeking ? 2 : this._rebuffering ? 5 : .8
        }
        ,
        Vl.prototype._haveEnoughDataThreshold = function() {
            return this._readyState == Fl ? 5 : 15
        }
        ,
        Vl.prototype._isReadyForPlay = function() {
            return !(!(this._readyState >= Bl && this._decoder.readyState >= Bl) || this._ended || this._error || this._loading || this._seeking || this._rebuffering || this._decoder.ended || this._decoder.error || this._decoder.seeking)
        }
        ,
        Vl.prototype._isStreamEndedWithEmptyBuffer = function() {
            var e = z.LoaderState.ENDED
              , t = this._stream.loaders.audio
              , i = this._stream.loaders.video;
            return t.state === e && t.getBufferLength() < .8 && i.state !== e || i.state === e && i.getBufferLength() < .8 && t.state !== e
        }
        ,
        Object.defineProperties(Vl.prototype, Hl),
        re.inject(Vl.prototype);
        var jl = function(e, t) {
            this.unit = e,
            this._options = t
        }
          , Wl = {
            expired: {
                configurable: !0
            }
        };
        jl.prototype.load = function(e) {
            var t = this;
            if (!this._disposed && this.unit != z.END_OF_STREAM)
                if (this.unit.subordinate && this.unit.subordinate.canResolve) {
                    var i = this.unit.subordinate
                      , n = i.state;
                    "empty" == n ? i.request(this._options).then(function() {
                        t.load(0)
                    }) : "ready" == n && i.units.length > 0 && this._load(i.units[0].asset, i.units[0].ptoa(0))
                } else
                    this._load(this.unit.asset, e)
        }
        ,
        jl.prototype._load = function(e, t) {
            null == this.player && (e.updateSelectedAset("audio", this._options.avTrackManager.audioPreference),
            e.updateSelectedAset("video", this._options.avTrackManager.videoPreference),
            this.player = new Vl(e,this._options));
            var i = this.player.stream;
            i.loaderState == z.LoaderState.STOPPED ? (w.log("[preloader]", "start preload", this.player.asset.id, "at", t),
            i.load(t)) : i.position = t
        }
        ,
        jl.prototype.dispose = function() {
            this._disposed = !0,
            null != this.player && this.player.dispose(),
            null != this.unit.subordinate && this.unit.subordinate.dispose()
        }
        ,
        Wl.expired.get = function() {
            var e = this.unit.subordinate;
            return null != e && "expired" == e.state
        }
        ,
        jl.ending = function(e, t) {
            var i = t.duration - t.atop(e.currentTime);
            return !(i > 70) && (i < e.stream.getBufferLength() - 1 || e.stream.loaderState == z.LoaderState.ENDED)
        }
        ,
        jl.empty = function(e) {
            return {
                unit: {
                    id: e
                },
                load: function load() {},
                dispose: function dispose() {}
            }
        }
        ,
        Object.defineProperties(jl.prototype, Wl);
        var Gl = function(e) {
            this._pluginHandler = e,
            this._pluginConsultant = new o.b
        };
        Gl.prototype.setPeriodSession = function(e, t) {
            var i = t.map(function(e) {
                return {
                    representationId: e.detail.id,
                    adaptationSetId: e.parent.adaptationSetId,
                    dataType: e.detail.type,
                    bandwidth: e.detail.bandwidth,
                    profile: e.detail.profile,
                    cdns: e.detail.cdns,
                    language: e.parent.language,
                    width: e.detail.width,
                    height: e.detail.height,
                    frameRate: e.detail.frameRate
                }
            })
              , n = {
                periodId: e.id,
                periodType: e.type,
                startTimestamp: e.start
            };
            this._pluginHandler.setPeriodSession(n, i);
            var r = i.map(function(e) {
                return e.cdns
            });
            w.log("[cpp] set Period Session: ", n.periodId, n.periodType, n.startTimestamp, i.length, r)
        }
        ,
        Gl.prototype.setCurrentVideoAdaptationSet = function(e) {
            this._pluginHandler.setCurrentAdaptationSet("video", e),
            w.log("[cpp] set video Adaptaion Set: ", e)
        }
        ,
        Gl.prototype.setCurrentAudioAdaptationSet = function(e) {
            this._pluginHandler.setCurrentAdaptationSet("audio", e),
            w.log("[cpp] set audio Adaptaion Set: ", e)
        }
        ,
        Gl.prototype.setMaxAllowedBitrateInKbps = function(e) {
            this._pluginHandler.setMaxAllowedBitrateInKbps("video", e),
            this._pluginHandler.setMaxAllowedBitrateInKbps("audio", e),
            w.log("[cpp] set max allowed bitrate in kbps: ", e)
        }
        ,
        Gl.prototype.setConfig = function(e) {
            this._pluginConsultant.setPluginConfiguration(e);
            var t = this._pluginConsultant.getPluginConfiguration(e);
            this._pluginHandler.setConfig(t),
            w.log("[cpp] set config: ", t)
        }
        ,
        Gl.prototype.getPluginState = function() {
            return this._pluginHandler.getPluginState ? this._pluginHandler.getPluginState() : null
        }
        ,
        Gl.prototype.addEventListener = function(e, t) {
            this._pluginHandler.addEventListener(e, t)
        }
        ,
        Gl.prototype.removeEventListener = function(e, t) {
            this._pluginHandler.removeEventListener(e, t)
        }
        ;
        var Kl = function(e, t, i) {
            this._pluginHandler = e,
            this._avTrackManager = t,
            this._bufferManager = i,
            this._dashStream = null,
            this._onQualityChange = this._onQualityChange.bind(this),
            this._pluginHandler.addEventListener(q.MBR.QUALITY_CHANGE, this._onQualityChange)
        };
        Kl.prototype.setDashStream = function(e) {
            this._dashStream = e
        }
        ,
        Kl.prototype._onQualityChange = function(e) {
            var t = Object.keys(e).filter(function(e) {
                return !e.includes("abrState")
            }).map(function(t) {
                return t + "=" + e[t]
            }).join();
            w.log("[cpp] received cpp event", q.MBR.QUALITY_CHANGE, t);
            var i = e.dataType;
            this._dashStream && this._dashStream.selectRepresentation(e),
            "audio" === i ? this._avTrackManager.selectAudioRepresentation(e) : "video" === i && (this._avTrackManager.selectVideoRepresentation(e),
            this._bufferManager.changeActiveCue(e))
        }
        ;
        var zl = z.ReadyState
          , ql = z.NetworkState
          , Yl = function(e) {
            e instanceof Sl ? (this._decoder = e,
            this._tracker = arguments[1] || new gl) : 1 == arguments.length ? (this._tracker = new gl,
            this._decoder = new Sl(arguments[0],this._tracker.startup)) : arguments[1]instanceof gl ? (this._tracker = arguments[1],
            this._decoder = new Sl(arguments[0],this._tracker.startup)) : (this._tracker = arguments[2] || new gl,
            this._decoder = new Sl(arguments[0],this._tracker.startup),
            this._decoder.setEnabledKeySystems(arguments[1])),
            this._tracker.target = this,
            this._cts = new N,
            this._config = {},
            this._corePlayback = new dl(this),
            this._pluginHandler = new o.c(this._corePlayback),
            this._cppAdapter = new Gl(this._pluginHandler),
            this._src = null,
            this._loop = !1,
            this._autoplay = !1,
            this._ended = !1,
            this._error = null,
            this._paused = !0,
            this._seeking = !1,
            this._position = new ml,
            this._timeline = null,
            this._autoplaying = !0,
            this._networkState = ql.NETWORK_EMPTY,
            this._pendingPlayTimer = -1,
            this._license = {},
            this._textTracks = new ka,
            this._textTrackEventAttached = !1,
            this._audioTracks = new ta,
            this._videoTracks = new Xs,
            this._avTrackManager = new sa(this._audioTracks,this._videoTracks),
            this._eventStreams = new el(this),
            this._bufferManager = new Ma,
            this._captionManager = new to,
            this._chapterManager = new so,
            this._cppListener = new Kl(this._pluginHandler,this._avTrackManager,this._bufferManager),
            Array.prototype.push.apply(this._textTracks, this._bufferManager.tracks),
            Array.prototype.push.apply(this._textTracks, this._captionManager.tracks),
            Array.prototype.push.apply(this._textTracks, this._chapterManager.tracks),
            this._onEnded = this._onEnded.bind(this),
            this._onError = this._onError.bind(this),
            this._onPlaying = this._onPlaying.bind(this),
            this._onWaiting = this._onWaiting.bind(this),
            this._onCanPlay = this._onCanPlay.bind(this),
            this._onTimeUpdate = this._onTimeUpdate.bind(this),
            this._onCanPlayThrough = this._onCanPlayThrough.bind(this),
            this._onRebufferEnd = this._onRebufferEnd.bind(this),
            this._onRebufferStart = this._onRebufferStart.bind(this),
            this._onProgressInterval = this._onProgressInterval.bind(this),
            this._sendQoSFragmentEvent = this._sendQoSFragmentEvent.bind(this),
            this._onEMERequestLicense = this._onEMERequestLicense.bind(this),
            this._onEMEError = this._onEMEError.bind(this),
            this._onPlayRejected = this._onPlayRejected.bind(this),
            this._onDecoderPlaying = this._onDecoderPlaying.bind(this),
            this._onDecoderVolumeChange = this._onDecoderVolumeChange.bind(this),
            this._onMetricsUpdated = this._onMetricsUpdated.bind(this),
            this._onAudioSelectedChange = this._onAudioSelectedChange.bind(this),
            this._onVideoSelectedChange = this._onVideoSelectedChange.bind(this),
            this._onTimelineError = this._onTimelineError.bind(this),
            this._onTimelineRequestManifest = this._onTimelineRequestManifest.bind(this),
            this._onTimelineRequestPeriod = this._onTimelineRequestPeriod.bind(this),
            this._onTimelinePeriodResolving = this._onTimelinePeriodResolving.bind(this),
            this._onTimelinePeriodResolved = this._onTimelinePeriodResolved.bind(this),
            this._onTimelineUpdate = this._onTimelineUpdate.bind(this),
            this._decoder.addEventListener(q.EME.REQUEST_LICENSE, this._onEMERequestLicense),
            this._decoder.addEventListener(q.EME.ERROR, this._onEMEError),
            this._decoder.addEventListener(q.Player.PLAY_REJECTED, this._onPlayRejected),
            this._audioTracks.addEventListener(q.Track.SELECTED_CHANGE, this._onAudioSelectedChange),
            this._videoTracks.addEventListener(q.Track.SELECTED_CHANGE, this._onVideoSelectedChange),
            this.attach()
        }
          , Ql = {
            mbr: {
                configurable: !0
            },
            src: {
                configurable: !0
            },
            srcObject: {
                configurable: !0
            },
            currentSrc: {
                configurable: !0
            },
            paused: {
                configurable: !0
            },
            seeking: {
                configurable: !0
            },
            currentTime: {
                configurable: !0
            },
            readyState: {
                configurable: !0
            },
            networkState: {
                configurable: !0
            },
            textTracks: {
                configurable: !0
            },
            audioTracks: {
                configurable: !0
            },
            videoTracks: {
                configurable: !0
            },
            duration: {
                configurable: !0
            },
            ended: {
                configurable: !0
            },
            autoplay: {
                configurable: !0
            },
            loop: {
                configurable: !0
            },
            error: {
                configurable: !0
            },
            seekable: {
                configurable: !0
            },
            buffered: {
                configurable: !0
            },
            buffer: {
                configurable: !0
            },
            volume: {
                configurable: !0
            },
            muted: {
                configurable: !0
            },
            tracker: {
                configurable: !0
            },
            decoder: {
                configurable: !0
            },
            license: {
                configurable: !0
            },
            bufferingState: {
                configurable: !0
            },
            playbackRate: {
                configurable: !0
            },
            timeline: {
                configurable: !0
            },
            stream: {
                configurable: !0
            },
            segmentDownloadExecutor: {
                configurable: !0
            }
        };
        Ql.mbr.get = function() {
            return this._pluginHandler
        }
        ,
        Yl.prototype.load = function() {
            var e = this;
            w.log("[player] request load with", this._src),
            this._reset(),
            this._decoder.setEnabledKeySystems("default"),
            this._networkState = ql.NETWORK_NO_SOURCE;
            var t = this._cts.token;
            R.resolve().then(function() {
                return t.isCancellationRequested ? R.pending() : null == e._src ? (e._networkState = ql.NETWORK_EMPTY,
                R.pending()) : (e._networkState = ql.NETWORK_LOADING,
                e._queueEvent(q.Player.LOAD_START),
                e._tracker.startup.start("load"),
                e._tracker.startup.start("load_mpd"),
                zo.create(e._src, t, e._getPlayerContext()))
            }).catch(function(i) {
                return t.isCancellationRequested || e._handleError(i, !1),
                R.pending()
            }).then(function(i) {
                t.isCancellationRequested ? i.dispose() : (e._tracker.startup.end("load_mpd"),
                e._prepareForPlay(i),
                e._dispatchTextTrackEvent(!0))
            })
        }
        ,
        Yl.prototype.play = function() {
            w.log("[player] request play"),
            this._ended && this._timeline.units.length > 0 && this._seek(ml.first(this._timeline)),
            this._paused && (this._paused = !1,
            this._queueEvent(q.Player.PLAY),
            this._player ? this._player.play() : (this._queueEvent(q.Player.WAITING),
            this._corePlayback.sendBufferingStartEvent(this.bufferingState))),
            this._autoplaying = !1
        }
        ,
        Yl.prototype.pause = function() {
            w.log("[player] request pause"),
            this._autoplaying = !1,
            this._paused || (this._paused = !0,
            this._queueEvent(q.Player.TIME_UPDATE),
            this._queueEvent(q.Player.PAUSE),
            this._player && this._player.pause())
        }
        ,
        Yl.prototype.attach = function() {
            this._attached || (this._attached = !0,
            this._decoder.addEventListener(q.Player.PLAYING, this._onDecoderPlaying),
            this._decoder.addEventListener(q.Player.VOLUME_CHANGE, this._onDecoderVolumeChange),
            this._timeline && this._position.unit != z.END_OF_STREAM && this._enterPeriod(this._position))
        }
        ,
        Yl.prototype.detach = function() {
            this._attached && (this._attached = !1,
            this._decoder.removeEventListener(q.Player.PLAYING, this._onDecoderPlaying),
            this._decoder.removeEventListener(q.Player.VOLUME_CHANGE, this._onDecoderVolumeChange),
            this._disposePlayer(),
            this._disposePreloader())
        }
        ,
        Yl.prototype.setMaxBitrate = function(e) {
            this._cppAdapter.setMaxAllowedBitrateInKbps(e / 1024)
        }
        ,
        Ql.src.get = function() {
            return this._src
        }
        ,
        Ql.src.set = function(e) {
            e && "object" == typeof e ? this.srcObject = e : (this._src = e,
            this.load())
        }
        ,
        Ql.srcObject.get = function() {
            return Object.assign({
                src: this._src
            }, this._config)
        }
        ,
        Ql.srcObject.set = function(e) {
            void 0 === e && (e = {});
            var t = e.licenseUrlMap || {};
            this._license = {},
            t.fairplay && (this._license.fairplay = {
                license: t.fairplay,
                cert: t.fpscert
            }),
            t.widevine && (this._license.widevine = {
                license: t.widevine
            }),
            t.playready && (this._license.playready = {
                license: t.playready
            }),
            this.setConfiguration(e),
            this.src = e.url
        }
        ,
        Ql.currentSrc.get = function() {
            return this._src || ""
        }
        ,
        Ql.paused.get = function() {
            return this._paused
        }
        ,
        Ql.seeking.get = function() {
            return this._seeking
        }
        ,
        Ql.currentTime.get = function() {
            return "number" == typeof this._startPosition ? this._startPosition : (this._updatePosition(),
            this._position.getPositionInContent())
        }
        ,
        Ql.currentTime.set = function(e) {
            if (w.log("[player] request seek", e),
            null == this._timeline || null == this._position.timeline)
                this._startPosition = e;
            else {
                var t = this.findPosition(e);
                t.unit && this._seek(t)
            }
        }
        ,
        Ql.readyState.get = function() {
            return this._player ? this._player.readyState : this._timeline ? zl.HAVE_METADATA : zl.HAVE_NOTHING
        }
        ,
        Ql.networkState.get = function() {
            return this._player ? this._player.networkState : this._networkState
        }
        ,
        Ql.textTracks.get = function() {
            return this._textTracks
        }
        ,
        Ql.audioTracks.get = function() {
            return this._audioTracks
        }
        ,
        Ql.videoTracks.get = function() {
            return this._videoTracks
        }
        ,
        Ql.duration.get = function() {
            return this._timeline ? this._timeline.duration : NaN
        }
        ,
        Ql.ended.get = function() {
            return this._ended
        }
        ,
        Ql.autoplay.get = function() {
            return this._autoplay
        }
        ,
        Ql.autoplay.set = function(e) {
            this._autoplay = e
        }
        ,
        Ql.loop.get = function() {
            return this._loop
        }
        ,
        Ql.loop.set = function(e) {
            this._loop = e
        }
        ,
        Ql.error.get = function() {
            return this._error
        }
        ,
        Ql.seekable.get = function() {
            return null == this._timeline || 0 == this._timeline.seekable.length ? new Ie : this._timeline.live ? new Ie([this._timeline.seekable[0], this._timeline.edge.get(this._position)]) : new Ie(this._timeline.seekable)
        }
        ,
        Ql.buffered.get = function() {
            return this.getBufferedRanges()
        }
        ,
        Ql.buffer.get = function() {
            return new xa(new Na(this.getBufferLength("audio"),this.currentTime),new Na(this.getBufferLength("video"),this.currentTime))
        }
        ,
        Ql.volume.get = function() {
            return this._decoder.volume
        }
        ,
        Ql.volume.set = function(e) {
            this._decoder.volume = e
        }
        ,
        Ql.muted.get = function() {
            return this._decoder.muted
        }
        ,
        Ql.muted.set = function(e) {
            this._decoder.muted = e
        }
        ,
        Ql.tracker.get = function() {
            return this._tracker
        }
        ,
        Ql.decoder.get = function() {
            return this._decoder
        }
        ,
        Ql.license.get = function() {
            return this._license
        }
        ,
        Ql.license.set = function(e) {
            this._license = JSON.parse(JSON.stringify(e || {}))
        }
        ,
        Ql.bufferingState.get = function() {
            return this._player ? this._player.bufferingState : this.networkState != ql.NETWORK_EMPTY ? z.BufferingState.BUFFERING : z.BufferingState.NO_BUFFERING
        }
        ,
        Ql.playbackRate.get = function() {
            return this._decoder.playbackRate
        }
        ,
        Ql.playbackRate.set = function(e) {
            this._decoder.playbackRate = e
        }
        ,
        Ql.timeline.get = function() {
            return this._timeline
        }
        ,
        Ql.stream.get = function() {
            return this._player.stream
        }
        ,
        Ql.segmentDownloadExecutor.get = function() {
            return this._preloader ? this._preloader.player : this._player
        }
        ,
        Yl.prototype.setConfiguration = function(e) {
            this._decoder.setEnabledKeySystems(e.enabledKeySystems),
            Object.assign(this._config, e),
            this._decoder.setConfig(this._config)
        }
        ,
        Yl.prototype._prepareForPlay = function(e) {
            this._timeline = e,
            this._config.intros && Ho.intros(e, this._config.intros),
            this._config.collapseBreaks && Ho.collapse(e),
            e.live && null == this._programStartDate && (this._programStartDate = new Date(0)),
            this.setStartDate(this._programStartDate),
            this._bufferManager.limits = this._config,
            this._chapterManager.update(e),
            this._cppAdapter.setConfig(this._config.cppConfig),
            this._decoder.openEMESession(e.pssh, this._license, e.assets.map(function(e) {
                return e.videos[0] && e.videos[0].mime
            })),
            this._queueEvent(q.Player.DURATION_CHANGE),
            this._queueEvent(q.Player.SEEKABLE_CHANGE),
            this._queueEvent(q.Player.LOADED_METADATA),
            e.live && (e.addEventListener(q.Timeline.ERROR, this._onTimelineError),
            e.addEventListener(q.Timeline.UPDATE, this._onTimelineUpdate)),
            w.log("[player] timeline established", e.live, e.duration),
            w.debug("[player] units id:", e.units.map(function(e) {
                return e.id
            })),
            w.debug("[player] units start:", e.units.map(function(e) {
                return e.start
            })),
            w.debug("[player] units duration:", e.units.map(function(e) {
                return e.duration
            })),
            w.debug("[player] assets id:", e.assets.map(function(e) {
                return e.id
            })),
            w.debug("[player] assets start:", e.assets.map(function(e) {
                return e.start
            })),
            w.debug("[player] assets duration:", e.assets.map(function(e) {
                return e.duration
            })),
            this._queueTask(this._startPlayback)
        }
        ,
        Yl.prototype._startPlayback = function() {
            var e = this;
            if (w.debug("[player] start at", this._startPosition),
            this._timeline.live && null == this._startPosition && (this._startPosition = Math.min(this._timeline.edge.get(), this._timeline.seekable[1] - this._timeline.edge.delay())),
            this._periodCoordinator) {
                var t = this._periodCoordinator.getStart(this._chapterManager.tracks[0].cues);
                this._startPosition = null == t ? this._startPosition : t
            }
            var i = ml.first(this._timeline)
              , n = this.findPosition(this._startPosition);
            this._startPosition = null,
            n.unit == i.unit && 0 == n.offset || n.unit == z.END_OF_STREAM ? this._changePeriod(i, "start") : n.unit ? this._seek(n) : this._changePeriod(i, "start"),
            this._interval = setInterval(function() {
                return e._onProgressInterval()
            }, 1e3)
        }
        ,
        Yl.prototype._seek = function(e) {
            this._setSeekingState(!0),
            e.unit != this._period ? this._changePeriod(e, "seek") : this._player ? (w.log("[player] in-period seek", e.unit.id, e.offset, e.unit.ptoa(e.offset)),
            this._disposePreloader(),
            this._player.currentTime = e.unit.ptoa(e.offset),
            this._position.offset = this._period.atop(this._player.currentTime)) : this._position.offset = e.offset
        }
        ,
        Yl.prototype._changePeriod = function(e, t) {
            var i = this;
            e.unit != z.END_OF_STREAM ? (this._leavePeriod(e.unit, t),
            this._enterPeriod(e)) : this._loop && this._timeline.units.length > 0 ? (w.log("[player] ended with loop"),
            this._seek(ml.first(this._timeline))) : (w.log("[player] ended"),
            this._leavePeriod(null, t),
            this._ended = !0,
            this._position = e,
            this._queueEvent(q.Player.TIME_UPDATE),
            this._setSeekingState(!1),
            this._queueTask(function() {
                i._ended && !i._paused && (i._paused = !0,
                i.dispatchEvent(new CustomEvent(q.Player.PAUSE)))
            }),
            this._queueEvent(q.Player.ENDED))
        }
        ,
        Yl.prototype._enterPeriod = function(e) {
            var t = this
              , i = e.unit;
            if (this._period = i,
            this._position = e,
            null != i.subordinate && i.subordinate.canResolve) {
                if ("ready" == i.subordinate.state) {
                    var n = i.subordinate.units;
                    if (w.log("[player] enter period", i.id, "with subordinate", n.length),
                    0 == i.duration && this._config.collapseBreaks)
                        this._chapterManager.enter(i),
                        this._chapterManager.update(i.subordinate);
                    else {
                        0 == n.length && this._getNextPeriod();
                        var r = Ho.replace(i.subordinate);
                        this._queueEvent(q.Player.DURATION_CHANGE),
                        this._chapterManager.replace(r, n),
                        this._onTimelineUpdate()
                    }
                    n.length > 0 ? this._enterPeriod(new ml(n[0],0,this._timeline)) : this._onEnded()
                } else {
                    w.log("[player] enter period", i.id, "with request", i.subordinate.url),
                    0 == i.duration && this._config.collapseBreaks && this._chapterManager.enter(i);
                    var s = this._cts.token;
                    i.subordinate.request(this._getPlayerContext()).then(function() {
                        s.isCancellationRequested || t._enterPeriod(e)
                    })
                }
            } else {
                this._chapterManager.enter(i);
                var a = e.unit.ptoa(e.offset);
                null != this._player ? Math.abs(a - this._player.currentTime) > z.SEEK_EPS ? (w.log("[player] enter period", i.id, a, "with seek"),
                this._player.currentTime = a) : (w.log("[player] enter period", i.id, a, "seamless"),
                this._player.readyState = zl.HAVE_METADATA) : this._attached && (this._preloader && !this._preloader.player && (this._preloader.dispose(),
                this._preloader = null),
                null == this._preloader ? (w.log("[player] enter period", i.id, a, "with new player"),
                i.asset.updateSelectedAset("audio", this._avTrackManager.audioPreference),
                i.asset.updateSelectedAset("video", this._avTrackManager.videoPreference),
                this._player = new Vl(i.asset,this._getPlayerContext())) : (w.log("[player] enter period", i.id, a, "with preloader"),
                this._player = this._preloader.player,
                this._preloader = null),
                this._player.error ? this._queueTask(this._onError) : (this._avTrackManager.update(i.asset),
                this._eventStreams.clear(),
                this._eventStreams.updateManifestEvents(i),
                this._attachPlayerEvents(),
                this._player.currentTime = a,
                this._player.decoder = this._decoder,
                this._paused || (this._pendingPlayTimer = setTimeout(function() {
                    t._paused || t._player.play(),
                    t._pendingPlayTimer = -1
                }, 100)))),
                this._tracker.startup.start("load_period")
            }
        }
        ,
        Yl.prototype._leavePeriod = function(e, t) {
            var i = this;
            if (null != this._period) {
                if (w.log("[player] leave period", this._period.id, t, "next", e && e.id),
                t && (this._avTrackManager.overrideAudioId = null,
                this._avTrackManager.overrideVideoId = null),
                this._disposePreloader(function() {
                    return i._preloader.unit != e
                }),
                this._period.subordinate && this._period.subordinate.error)
                    this._chapterManager.leave(e, {
                        error: this._period.subordinate.error
                    });
                else if ("error" != t) {
                    var n = null != this._player && null != e && this._player.asset == e.asset;
                    this._chapterManager.leave(e, {
                        ended: "ended" == t,
                        seamless: n
                    })
                }
                this._disposePlayer(null == this._preloader ? e : null),
                this._period.subordinate && (w.log("[player] dispose subordinate", this._period.subordinate.url),
                this._period.subordinate.dispose()),
                !this._period.timeline.parent || e && e.timeline == this._period.timeline || (w.log("[player] dispose subordinate", this._period.timeline.url),
                this._period.timeline.dispose()),
                this._next = null,
                this._period = null
            }
        }
        ,
        Yl.prototype._disposePlayer = function(e) {
            if (null != this._player) {
                if (null == e)
                    ;
                else {
                    if (e.asset == this._player.asset)
                        return;
                    if (null == e.subordinate)
                        ;
                    else if ("ready" != e.subordinate.state)
                        ;
                    else {
                        if (0 == e.subordinate.units.length)
                            return;
                        if (e.subordinate.units[0].asset == this._player.asset)
                            return
                    }
                }
                w.log("[player] dispose player", this._player.asset.id),
                this._detachPlayerEvents(),
                this._pendingPlayTimer >= 0 && (clearTimeout(this._pendingPlayTimer),
                this._pendingPlayTimer = -1),
                this._player.dispose(),
                this._player = null,
                this._lastDroppedFrames = 0,
                this._lastTotalFrames = 0,
                this._avTrackManager.clear()
            }
        }
        ,
        Yl.prototype._disposePreloader = function(e) {
            null != this._preloader && (null == e || e()) && (w.log("[player] dispose preloader", this._preloader.unit.id),
            this._preloader.dispose(),
            this._preloader = null,
            this._next = null)
        }
        ,
        Yl.prototype._onEnded = function() {
            this._updatePosition();
            var e = this._getNextPeriod();
            ml.isContinuousInContent(this._position, e) || this._setSeekingState(!0),
            this._changePeriod(e, "ended")
        }
        ,
        Yl.prototype._onError = function() {
            null != this._player && this._handleError(this._player.error, !0)
        }
        ,
        Yl.prototype._onPlaying = function() {
            this._queueEvent(q.Player.PLAYING)
        }
        ,
        Yl.prototype._onWaiting = function() {
            this._queueEvent(q.Player.WAITING)
        }
        ,
        Yl.prototype._onTimeUpdate = function() {
            this._position.offset = this._period.atop(this._player.currentTime);
            var e = this._position.unit.asset.units;
            if (this._position.unit != e[e.length - 1] && this._position.offset > this._position.unit.duration)
                return w.log("[player] end period by position", this._position.offset, this._position.unit.duration),
                void this._onEnded();
            this._timeline.live && this._position.getPositionInContent() > this._timeline.edge.get() && this.dispatchEvent(new CustomEvent(q.Player.SEEKABLE_CHANGE)),
            this.dispatchEvent(new CustomEvent(q.Player.TIME_UPDATE))
        }
        ,
        Yl.prototype._onCanPlay = function() {
            this._pendingPlayTimer >= 0 && (clearTimeout(this._pendingPlayTimer),
            this._pendingPlayTimer = -1,
            this._paused || this._player.play()),
            this._setSeekingState(!1),
            this._queueEvent(q.Player.CAN_PLAY),
            this._tracker.startup.end("load_period")
        }
        ,
        Yl.prototype._onCanPlayThrough = function() {
            this._paused && this._autoplay && this._autoplaying && (this._paused = !1,
            this._queueEvent(q.Player.PLAY),
            this._player.play()),
            this._queueEvent(q.Player.CAN_PLAY_THROUGH)
        }
        ,
        Yl.prototype._onEMERequestLicense = function(e) {
            this.dispatchEvent(new CustomEvent(q.Player.QOS_LICENSE,e))
        }
        ,
        Yl.prototype._onEMEError = function(e) {
            this._handleError(e.detail, !1)
        }
        ,
        Yl.prototype._onPlayRejected = function() {
            this._queueEvent(q.Player.PLAY_REJECTED)
        }
        ,
        Yl.prototype._onDecoderPlaying = function() {
            this._reconnect = null,
            this._tracker.startup.end("load")
        }
        ,
        Yl.prototype._onDecoderVolumeChange = function() {
            this.dispatchEvent(new CustomEvent(q.Player.VOLUME_CHANGE))
        }
        ,
        Yl.prototype._onRebufferEnd = function() {
            this._queueEvent(q.Player.REBUFFER_END, this._getRebufferParams("end"))
        }
        ,
        Yl.prototype._onRebufferStart = function() {
            this._queueEvent(q.Player.REBUFFER_START, this._getRebufferParams("start"))
        }
        ,
        Yl.prototype._onProgressInterval = function() {
            null != this._player && (this._updateDroppedFrames(),
            this._tryPreloadNextPeriod(),
            this._timeline.live && this.dispatchEvent(new CustomEvent(q.Player.SEEKABLE_CHANGE)))
        }
        ,
        Yl.prototype._sendQoSFragmentEvent = function(e, t, i, n, r, s) {
            var a = ee(e.getUrlByCdn(t), i)
              , o = e.unit
              , l = e.parent
              , d = e.bytes.split("-");
            null != r && (a.retryNumber = r);
            var u = Object.assign(a, {
                abrState: JSON.stringify(s),
                adaptationSetId: l.parent.adaptationSetId,
                assetIdentifier: o.detail.assetIdentifier,
                bandwidth: l.detail.bandwidth,
                byteEnd: d[1] || "",
                byteStart: d[0] || "",
                cdn: t,
                dataType: l.detail.type,
                duration: e.duration || 0,
                failureReason: a.successful ? "" : "Fetch Error",
                failureType: a.successful ? "" : i.type || "error",
                fragmentType: n ? "init" : "media",
                index: e.number || 0,
                periodId: o.id,
                presentationTime: e.t || 0,
                profile: l.detail.profile,
                representationId: l.detail.id,
                segmentType: o.detail.segmentType
            });
            this._corePlayback.sendQosFragmentEvent(u),
            this.dispatchEvent(new CustomEvent(q.Player.QOS_FRAGMENT,{
                detail: u
            }))
        }
        ,
        Yl.prototype._onTimelineError = function(e) {
            this._handleError(e.detail, !1)
        }
        ,
        Yl.prototype._onTimelineRequestManifest = function(e) {
            this.dispatchEvent(new CustomEvent(q.Player.QOS_MANIFEST,{
                detail: e
            }))
        }
        ,
        Yl.prototype._onTimelineRequestPeriod = function(e) {
            this.dispatchEvent(new CustomEvent(q.Player.QOS_REMOTE_PERIOD,{
                detail: e
            }))
        }
        ,
        Yl.prototype._onTimelinePeriodResolving = function(e) {
            this._queueEvent(q.Player.PERIOD_RESOLVING, {
                id: e.id
            })
        }
        ,
        Yl.prototype._onTimelinePeriodResolved = function(e) {
            this._queueEvent(q.Player.PERIOD_RESOLVED, {
                successful: !e.subordinate.error,
                id: e.id,
                resolved: e.subordinate.units.map(function(e) {
                    return e.id
                })
            })
        }
        ,
        Yl.prototype._onTimelineUpdate = function() {
            if (this._chapterManager.update(this._timeline),
            this._timeline && this._timeline.live) {
                var t = Math.min(this.currentTime, this.seekable.end(0) - (this._config.maxLiveManifestWindow || 1 / 0));
                this._clampLiveTimeline(t)
            }
            this._queueEvent(q.Player.SEEKABLE_CHANGE)
        }
        ,
        Yl.prototype._onMetricsUpdated = function(e) {
            this._queueEvent(q.Player.METRICS_UPDATE, e.detail)
        }
        ,
        Yl.prototype._onAudioSelectedChange = function() {
            var t = this._avTrackManager.selectedAudioTrack;
            t && this._player && t.id != this._player.asset.audio.adaptationSetId && this.setPreferredAudioTrack(t.language, t.kind, t.codec, t.id)
        }
        ,
        Yl.prototype._onVideoSelectedChange = function() {
            var t = this._avTrackManager.selectedVideoTrack;
            t && this._player && t.id != this._player.asset.video.adaptationSetId && this.setPreferredVideoTrack(t.language, t.kind, t.id)
        }
        ,
        Yl.prototype._getRebufferParams = function(e) {
            return {
                event: e
            }
        }
        ,
        Yl.prototype._handleError = function(e, t) {
            if (!this._error) {
                var i = new $o(e);
                if (e = i.generateError(this, {
                    streamInternal: t
                }),
                this._reconnect && (this._reconnect.params.reconnect = e.params,
                e = this._reconnect),
                null == this._player || this._reconnect || i.retry == z.RetryLevel.NONE) {
                    if (this._error = e,
                    this._reconnect = null,
                    this._queueEvent(q.Player.ERROR),
                    w.error("[player] error", e.type, e),
                    null == this._timeline)
                        return;
                    this._leavePeriod(null, "error"),
                    this._period = this._position.unit,
                    this._timeline.dispose()
                } else
                    this._reconnect = e,
                    w.warn("[player] reconnecting", e.type, e),
                    this._queueEvent(q.Player.RECONNECTING),
                    this._tracker.clear(),
                    i.retry == z.RetryLevel.EME && (this._decoder.closeEMESession("reconnect"),
                    this._decoder.setConfig(this._config),
                    this._decoder.openEMESession(null, this._license)),
                    this._disposePlayer(),
                    this._disposePreloader(),
                    this._enterPeriod(this._position)
            }
        }
        ,
        Yl.prototype._updateDroppedFrames = function() {
            var e = this._decoder.getVideoPlaybackQuality()
              , t = Date.now()
              , i = e.droppedVideoFrames - this._lastDroppedFrames;
            i = window.droppedCount || i;
            var n = e.totalVideoFrames - this._lastTotalFrames;
            this._lastDroppedFrames = e.droppedVideoFrames,
            this._lastTotalFrames = e.totalVideoFrames,
            this._corePlayback.sendDroppedFrameEvent({
                timestampInMilliseconds: t,
                droppedFramesCount: i,
                totalFramesCount: n
            }),
            i > 0 && w.log("[player] dropped frames detected", i)
        }
        ,
        Yl.prototype._tryPreloadNextPeriod = function() {
            var e = this;
            if (!this._seeking && !this._error && jl.ending(this._player, this._period) && (this._disposePreloader(function() {
                return e._paused && e._preloader.expired
            }),
            null == this._preloader)) {
                var t = this._getNextPeriod();
                if (t.unit != z.END_OF_STREAM) {
                    var i = new ml(this._position.unit,this._position.unit.duration,this._timeline);
                    if (ml.isContinuousInAsset(i, t))
                        return this._player.stream.setPeriodSession(t.unit),
                        w.log("[player] preload next period with current preloader", t.unit.id, t.offset),
                        void (this._preloader = jl.empty(t.unit.id + " seamless"));
                    this._player.stream.end(),
                    this._preloader = new jl(t.unit,this._getPlayerContext()),
                    this._preloader.load(t.unit.ptoa(t.offset)),
                    w.log("[player] preload next period with new preloader", t.unit.id, t.offset)
                } else
                    this._preloader = jl.empty(z.END_OF_STREAM.id)
            }
        }
        ,
        Yl.prototype._getNextPeriod = function() {
            if (this._next)
                return this._next;
            var e = this._periodCoordinator && this._periodCoordinator.getNext()
              , t = this.findPosition(e);
            if (t.unit)
                return this._next = t;
            for (var i = this._period, n = null; i && !n; ) {
                var r = i.timeline.units.indexOf(i);
                r + 1 < i.timeline.units.length ? n = i.timeline.units[r + 1] : i = i.timeline.parent
            }
            return this._next = new ml(n || z.END_OF_STREAM,0,this._timeline)
        }
        ,
        Yl.prototype._reset = function() {
            this._cts.cancel(),
            this._cts = new N,
            null != this._interval && (clearInterval(this._interval),
            this._interval = null),
            this.playbackRate = 1,
            this._decoder.closeEMESession(),
            this._tracker.clear(),
            this._eventStreams.clear(),
            this._bufferManager.clear(),
            this._captionManager.clear(),
            this._chapterManager.clear(),
            this._dispatchTextTrackEvent(),
            this._disposePlayer(),
            this._disposePreloader(),
            this.networkState != ql.NETWORK_IDLE && this.networkState != ql.NETWORK_LOADING || this._queueEvent(q.Player.ABORT),
            this.networkState != ql.NETWORK_EMPTY && (this._paused = !0,
            this._queueEvent(q.Player.EMPTIED)),
            this._period && (this._period.subordinate && this._period.subordinate.dispose(),
            this._period.timeline.parent && this._period.timeline.dispose(),
            this._next = null,
            this._period = null),
            this._position.unit && (this._position = new ml,
            this._queueEvent(q.Player.TIME_UPDATE)),
            this._timeline && (this._timeline.removeEventListener(q.Timeline.ERROR, this._onTimelineError),
            this._timeline.removeEventListener(q.Timeline.UPDATE, this._onTimelineUpdate),
            this._timeline.dispose(),
            this._timeline = null),
            this._ended = !1,
            this._error = null,
            this._paused = !0,
            this._seeking = !1,
            this._autoplaying = !0,
            this._reconnect = null,
            this._programStartDate = null,
            this._lastDroppedFrames = 0,
            this._lastTotalFrames = 0,
            this._startPosition = null
        }
        ,
        Yl.prototype._setSeekingState = function(e) {
            e ? (w.log("[player] seeking", this._seeking),
            this._ended = !1,
            this._seeking = !0,
            this._queueEvent(q.Player.SEEKING),
            this._corePlayback.sendSeekingStartEvent()) : this._seeking && (w.log("[player] seeked"),
            this._seeking = !1,
            this._queueEvent(q.Player.TIME_UPDATE),
            this._queueEvent(q.Player.SEEKED),
            this._corePlayback.sendSeekingEndEvent())
        }
        ,
        Yl.prototype._updatePosition = function() {
            null != this._period && null != this._player && (this._position.offset = this._period.atop(this._player.currentTime))
        }
        ,
        Yl.prototype._getPlayerContext = function() {
            return {
                config: this._config,
                playerTracker: this._tracker,
                eventStreams: this._eventStreams,
                bufferManager: this._bufferManager,
                captionManager: this._captionManager,
                avTrackManager: this._avTrackManager,
                onTimelineRequestManifest: this._onTimelineRequestManifest,
                onTimelineRequestPeriod: this._onTimelineRequestPeriod,
                onTimelinePeriodResolving: this._onTimelinePeriodResolving,
                onTimelinePeriodResolved: this._onTimelinePeriodResolved,
                sendQoSFragmentEvent: this._sendQoSFragmentEvent,
                corePlayback: this._corePlayback,
                cppListener: this._cppListener,
                cppAdapter: this._cppAdapter
            }
        }
        ,
        Yl.prototype._attachPlayerEvents = function() {
            this._player.addEventListener(q.Player.ENDED, this._onEnded),
            this._player.addEventListener(q.Player.ERROR, this._onError),
            this._player.addEventListener(q.Player.PLAYING, this._onPlaying),
            this._player.addEventListener(q.Player.WAITING, this._onWaiting),
            this._player.addEventListener(q.Player.CAN_PLAY, this._onCanPlay),
            this._player.addEventListener(q.Player.TIME_UPDATE, this._onTimeUpdate),
            this._player.addEventListener(q.Player.CAN_PLAY_THROUGH, this._onCanPlayThrough),
            this._player.addEventListener(q.Player.REBUFFER_END, this._onRebufferEnd),
            this._player.addEventListener(q.Player.REBUFFER_START, this._onRebufferStart)
        }
        ,
        Yl.prototype._detachPlayerEvents = function() {
            this._player.removeEventListener(q.Player.ENDED, this._onEnded),
            this._player.removeEventListener(q.Player.ERROR, this._onError),
            this._player.removeEventListener(q.Player.PLAYING, this._onPlaying),
            this._player.removeEventListener(q.Player.WAITING, this._onWaiting),
            this._player.removeEventListener(q.Player.CAN_PLAY, this._onCanPlay),
            this._player.removeEventListener(q.Player.TIME_UPDATE, this._onTimeUpdate),
            this._player.removeEventListener(q.Player.CAN_PLAY_THROUGH, this._onCanPlayThrough),
            this._player.removeEventListener(q.Player.REBUFFER_END, this._onRebufferEnd),
            this._player.removeEventListener(q.Player.REBUFFER_START, this._onRebufferStart)
        }
        ,
        Yl.prototype._queueEvent = function(e, t) {
            this._queueTask(this.dispatchEvent, new CustomEvent(e,{
                detail: t
            }))
        }
        ,
        Yl.prototype._dispatchTextTrackEvent = function(e) {
            var t = this
              , i = null;
            this._textTrackEventAttached ? (this._textTrackEventAttached = !1,
            i = q.Track.REMOVE_TRACK) : e && (this._textTrackEventAttached = !0,
            i = q.Track.ADD_TRACK),
            i && this._captionManager.tracks.concat(this._bufferManager.tracks, this._chapterManager.tracks).forEach(function(e) {
                var n = new CustomEvent(i);
                n.track = e,
                t._textTracks.dispatchEvent(n)
            })
        }
        ,
        Yl.prototype._queueTask = function(e) {
            for (var t = this, i = [], n = arguments.length - 1; n-- > 0; ) {
                i[n] = arguments[n + 1]
            }
            var r = this._cts;
            setTimeout(function() {
                r.isCancellationRequested || e.apply(t, i)
            })
        }
        ,
        Yl.prototype._clampLiveTimeline = function(e) {
            var t = this._timeline.units.length;
            return this._timeline.clampTimeline(e),
            (t -= this._timeline.units.length) > 0 && this._chapterManager.shift(t),
            t
        }
        ,
        Yl.prototype.seek = function(e, t) {
            if (w.log("[player] request seek", e, t),
            !this._timeline)
                throw new Error("rich seek only works with timeline ready");
            if (null == e)
                this._position.offset = t,
                this._seek(this._position);
            else {
                var i = this.findPosition(e);
                i.offset = t,
                i.unit && this._seek(i)
            }
        }
        ,
        Yl.prototype.findPosition = function(e) {
            return ml.find(this._timeline, e)
        }
        ,
        Yl.prototype.getCurrentPosition = function() {
            return this._position
        }
        ,
        Yl.prototype.getBufferLength = function(e) {
            return this._player ? this._player.stream.getBufferLength(e) : 0
        }
        ,
        Yl.prototype.getBufferedRanges = function(e) {
            return this._player ? "audio" == e || "video" == e ? this._player.stream.getBufferedRanges(e) : this._decoder.buffered : new Ie
        }
        ,
        Yl.prototype.setPeriodCoordinator = function(e) {
            this._periodCoordinator = e
        }
        ,
        Yl.prototype.recoverFromError = function() {
            this._error && this._period && (this._error = null,
            this._reconnect = null,
            this._timeline.live ? this._changePeriod(this.findPosition(this._timeline.edge.get())) : this._changePeriod(this._getNextPeriod()))
        }
        ,
        Yl.prototype.getStartDate = function() {
            return this._timeline ? new Date(1e3 * this._timeline.baseline) : new Date(this._programStartDate || 0)
        }
        ,
        Yl.prototype.setStartDate = function(e) {
            if (w.log("[player] set start date", e),
            this._timeline && e) {
                var t = this._timeline.units.length;
                this._timeline.baseline = e.getTime() / 1e3,
                t -= this._timeline.units.length,
                this._chapterManager.shift(t),
                this._queueEvent(q.Player.SEEKABLE_CHANGE),
                this._position.unit && this._queueEvent(q.Player.TIME_UPDATE),
                w.log("[player]", t, "periods removed")
            } else
                this._programStartDate = e
        }
        ,
        Yl.prototype.setPreferredAudioTrack = function(e, t, i, n) {
            if (this._avTrackManager.selectAudioTrack(e, t, i),
            this._avTrackManager.overrideAudioId = n || null,
            this._timeline && this._position.unit && this._position.unit.asset) {
                if (this._preloader && this._preloader.player) {
                    var r = this._preloader.player.asset;
                    r.audio.id != sa.getPreferredAudio(r.audios, this._avTrackManager.audioPreference).id && this._disposePreloader()
                }
                var s = this._player.asset;
                s.audio.id != sa.getPreferredAudio(s.audios, this._avTrackManager.audioPreference).id && (this._disposePlayer(),
                this._disposePreloader(),
                this._enterPeriod(this._position))
            }
        }
        ,
        Yl.prototype.setPreferredVideoTrack = function(e, t, i) {
            if (this._avTrackManager.selectVideoTrack(e, t),
            this._avTrackManager.overrideVideoId = i || null,
            this._timeline && this._position.unit && this._position.unit.asset) {
                if (this._preloader && this._preloader.player) {
                    var n = this._preloader.player.asset;
                    n.video.id != sa.getPreferredVideo(n.videos, this._avTrackManager.videoPreference).id && this._disposePreloader()
                }
                var r = this._player.asset;
                r.video.id != sa.getPreferredVideo(r.videos, this._avTrackManager.videoPreference).id && (this._disposePlayer(),
                this._disposePreloader(),
                this._enterPeriod(this._position))
            }
        }
        ,
        Yl.prototype.clampTimelineStart = function(e) {
            if (w.log("[player] clamp timeline start", e),
            this._timeline && this._timeline.live) {
                var t = this._clampLiveTimeline(e);
                t > 0 && (this._queueEvent(q.Player.SEEKABLE_CHANGE),
                this._queueEvent(q.Player.TIME_UPDATE),
                w.log("[player]", t, "periods clamped"))
            }
        }
        ,
        Yl.prototype.canPlayType = function(e) {
            return this._videoTag.canPlayType(e)
        }
        ,
        Yl.prototype.getVideoPlaybackQuality = function() {
            return this._decoder.getVideoPlaybackQuality()
        }
        ,
        Object.defineProperties(Yl.prototype, Ql),
        re.inject(Yl.prototype),
        tl.inject(Yl.prototype);
        var $l = function(e) {
            function t() {
                for (var t = [], i = arguments.length; i--; ) {
                    t[i] = arguments[i]
                }
                e.apply(this, t),
                this._quality = null,
                this._onPlayerError = this._onPlayerError.bind(this),
                this._onChapterCueChange = this._onChapterCueChange.bind(this),
                this._onChapterEnterExit = this._onChapterEnterExit.bind(this),
                this._onQualityCueChange = this._onQualityCueChange.bind(this),
                this._onQualityEnterExit = this._onQualityEnterExit.bind(this),
                this.addEventListener(q.Player.ERROR, this._onPlayerError);
                var n = this.textTracks.getTrackById(z.TrackId.CHAPTERS);
                n.addEventListener(q.Track.CUE_CHANGE, this._onChapterCueChange);
                var r = this.textTracks.getTrackById(z.TrackId.QUALITIES);
                r.addEventListener(q.Track.CUE_CHANGE, this._onQualityCueChange),
                w.setLogListener(this._onLog.bind(this)),
                w.setWarnListener(this._onWarning.bind(this))
            }
            e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t;
            var i = {
                manifest: {
                    configurable: !0
                }
            };
            return i.manifest.get = function() {
                return this._timeline && {
                    periods: this._timeline.units.map(function(e) {
                        return {
                            id: e.id,
                            start: e.start,
                            duration: e.duration == 1 / 0 ? null : e.duration,
                            isRemote: null != e.subordinate,
                            assetIdentifier: e.detail.assetIdentifier,
                            descriptors: e.detail.descriptors,
                            segmentType: e.detail.segmentType,
                            seekable: e.seekable
                        }
                    }),
                    windowSize: this._timeline.mpd.huluWindowSize,
                    descriptors: this._timeline.mpd.descriptors,
                    suggestedPresentationDelay: this._timeline && this._timeline.live ? this._timeline.edge.delay() : null
                }
            }
            ,
            t.prototype.setStartDate = function(t) {
                this._timeline && this._timeline.live && null == t ? e.prototype.setStartDate.call(this, new Date(1e3 * this._timeline.mpd.availabilityStartTime)) : e.prototype.setStartDate.call(this, t)
            }
            ,
            t.prototype.seekToPeriod = function(e) {
                this.seek(e, 0)
            }
            ,
            t.prototype.setABRScript = function() {}
            ,
            t.prototype.createThumbnailUrl = function() {
                return null
            }
            ,
            t.prototype._onPlayerError = function(e) {
                if (!e.detail) {
                    e.stopImmediatePropagation();
                    var t = {
                        code: this.error.type,
                        system: "dash-player",
                        message: this.error.params.errorMessage,
                        stackTrack: this.error.params.errorStack,
                        platformCode: String(this.error.code)
                    };
                    this.dispatchEvent(new CustomEvent(q.Player.ERROR,{
                        detail: t
                    }))
                }
            }
            ,
            t.prototype._onChapterCueChange = function(e) {
                for (var t = e.target.cues, i = 0; i < t.length; ++i) {
                    t[i].addEventListener(q.Track.ENTER, this._onChapterEnterExit),
                    t[i].addEventListener(q.Track.EXIT, this._onChapterEnterExit)
                }
                this._timeline && this._timeline.units.length && this.dispatchEvent(new CustomEvent(q.Player.MANIFEST_CHANGE))
            }
            ,
            t.prototype._onChapterEnterExit = function(e) {
                var t = e.type == q.Track.ENTER ? q.Player.PERIOD_ENTER : q.Player.PERIOD_EXIT;
                this.dispatchEvent(new CustomEvent(t,{
                    detail: {
                        id: e.target.id
                    }
                }))
            }
            ,
            t.prototype._onQualityCueChange = function(e) {
                for (var t = e.target.cues, i = 0; i < t.length; ++i) {
                    t[i].addEventListener(q.Track.ENTER, this._onQualityEnterExit)
                }
                0 == t.length && (this._quality = null)
            }
            ,
            t.prototype._onQualityEnterExit = function(e) {
                var t = this._quality ? this._quality.cdn : ""
                  , i = this._quality ? this._quality.bandwidth : 0
                  , n = this._quality ? this._quality.profile : 0;
                this._quality = e.target,
                this._quality.cdn != t && this.dispatchEvent(new CustomEvent(q.Player.CDN_CHANGE,{
                    detail: {
                        dataType: "video",
                        isInitial: e.detail.isInitial,
                        reason: e.detail.reason,
                        message: e.detail.message,
                        presentationTime: this.currentTime,
                        previous: t,
                        current: this._quality.cdn
                    }
                })),
                this._quality.bandwidth != i && this.dispatchEvent(new CustomEvent(q.Player.BITRATE_CHANGE,{
                    detail: {
                        dataType: "video",
                        reason: e.detail.reason,
                        presentationTime: this.currentTime,
                        bitratePrevious: i,
                        bitrateCurrent: this._quality.bandwidth,
                        profilePrevious: n,
                        profileCurrent: this._quality.profile
                    }
                }))
            }
            ,
            t.prototype._onWarning = function(e) {
                this.dispatchEvent(new CustomEvent(q.Player.WARNING,{
                    detail: e
                }))
            }
            ,
            t.prototype._onLog = function(e) {
                this.dispatchEvent(new CustomEvent(q.Player.LOG,{
                    detail: e
                }))
            }
            ,
            Object.defineProperties(t.prototype, i),
            t
        }(Yl)
          , Xl = {
            white_semi: "rgba(255, 255, 255, 0.5)",
            green_semi: "rgba(0, 255, 0, 0.5)",
            blue_semi: "rgba(0, 0, 255, 0.5)",
            cyan_semi: "rgba(0, 255, 255, 0.5)",
            red_semi: "rgba(255, 0, 0, 0.5)",
            yellow_semi: "rgba(255, 255, 0, 0.5)",
            magenta_semi: "rgba(255, 0, 255, 0.5)",
            black_semi: "rgba(0, 0, 0, 0.5)"
        }
          , Jl = new za("transparent","none","normal","transparent","none")
          , Zl = function e(t, i) {
            this._time = 0,
            this._area = null,
            this._style = {},
            this._mode = i || e.CEA608_MODE,
            this._parser = new Xa(1,this),
            this._caption = new Qa,
            this._onCueFragment = this._onCueFragment.bind(this),
            this._onTimeUpdate = this._onTimeUpdate.bind(this),
            this._player = t,
            this._player.addEventListener(q.Track.TIME_UPDATE, this._onTimeUpdate),
            this._track = t.textTracks.getTrackById(z.TrackId.CAPTIONS),
            this._track.addEventListener(q.Track.CUE_FRAGMENT, this._onCueFragment)
        }
          , ed = {
            style: {
                configurable: !0
            },
            area: {
                configurable: !0
            },
            mode: {
                configurable: !0
            },
            channelMode: {
                configurable: !0
            }
        };
        ed.style.get = function() {
            return this._style
        }
        ,
        ed.style.set = function(e) {
            this._style = Object.assign({}, e),
            this.refresh()
        }
        ,
        ed.area.get = function() {
            return this._area
        }
        ,
        ed.area.set = function(e) {
            this._area != e && (this._area && (this._area.innerHTML = ""),
            this._area = e,
            this._area && (this._area.innerHTML = ""),
            this._createLayout())
        }
        ,
        ed.mode.get = function() {
            return this._mode
        }
        ,
        ed.channelMode.get = function() {
            return this._parser.channels[0].mode
        }
        ,
        ed.mode.set = function(e) {
            this._mode != e && (this._mode = e,
            this._createLayout())
        }
        ,
        Zl.prototype.refresh = function() {
            this._render(this._caption)
        }
        ,
        Zl.prototype.clear = function() {
            this._render(null)
        }
        ,
        Zl.prototype.dispose = function() {
            this._area && (this._area.innerHTML = ""),
            this._player.removeEventListener(q.Track.TIME_UPDATE, this._onTimeUpdate),
            this._track.removeEventListener(q.Track.CUE_FRAGMENT, this._onCueFragment)
        }
        ,
        Zl.prototype.updateData = function(e, t) {
            this._time = e,
            this._render(t)
        }
        ,
        Zl.prototype._onCueFragment = function(e) {
            if (e.detail.emptied)
                this._render(null),
                this._parser.reset();
            else if (e.detail.data) {
                for (var t = e.detail.data, i = [], n = 0; n < t.length; n += 3) {
                    3 & t[n] || (i.push(t[n + 1]),
                    i.push(t[n + 2]))
                }
                i.length > 0 && this._parser.addData(e.detail.startTime, i)
            }
        }
        ,
        Zl.prototype._onTimeUpdate = function() {
            var e = this._player.getCurrentPosition().getPositionInAsset();
            this._time + 4 < e && this._render(null)
        }
        ,
        Zl.prototype._createLayout = function() {
            null == this._area ? this._layout = null : this._mode == Zl.CEA608_MODE ? (this._area.innerHTML = "",
            this._layout = new td(this),
            this._render(this._caption)) : (this._area.innerHTML = "",
            this._layout = new id(this),
            this._render(this._caption))
        }
        ,
        Zl.prototype._render = function(e) {
            this._layout && (this._layout.render(e),
            null == e ? this._caption.reset() : e != this._caption && this._caption.copy(e))
        }
        ,
        Object.defineProperties(Zl.prototype, ed),
        Zl.CEA608_MODE = "cea608",
        Zl.SIMPLE_MODE = "simple";
        var td = function(e) {
            this._parent = e;
            var t = document.createElement("style");
            e.area.appendChild(t),
            t.textContent = "@keyframes caption-blinker { 50% { opacity: 0.0; } }";
            var i = this._screen = document.createElement("div");
            e.area.appendChild(i),
            i.style.setProperty("width", "100%"),
            i.style.setProperty("height", "100%"),
            i.style.setProperty("display", "block");
            for (var n = 0; n < 15; ++n) {
                var r = document.createElement("div");
                i.appendChild(r),
                r.style.setProperty("width", "100%"),
                r.style.setProperty("height", "6.667%"),
                r.style.setProperty("text-align", "center");
                for (var s = 0; s < 3; ++s) {
                    var a = document.createElement("div");
                    r.appendChild(a),
                    a.style.setProperty("display", "inline-block"),
                    a.style.setProperty("line-height", String(1.2)),
                    1 != s && (a.style.setProperty("color", Jl.foreground),
                    a.style.setProperty("background-color", Jl.background),
                    a.style.setProperty("font-style", Jl.italics),
                    a.style.setProperty("text-decoration", Jl.underline),
                    a.style.setProperty("animation", Jl.flash))
                }
            }
        };
        td.prototype.render = function(e) {
            if (!e || e.isEmpty())
                this._screen.style.setProperty("display", "none");
            else {
                var t = this._screen.parentElement.clientHeight
                  , i = Math.min(t, 3 * this._screen.parentElement.clientWidth / 4, 15 * parseFloat(this._parent.style["font-size"]) * 1.2 || 1 / 0);
                this._screen.style.setProperty("display", "block"),
                this._defaultFontSize = Math.floor(i / 15 / 1.2) + "px",
                this._screen.style.setProperty("font-size", this._defaultFontSize),
                this._parent.style["font-family"] && this._screen.style.setProperty("font-family", this._parent.style["font-family"]),
                this._screen.style.setProperty("text-shadow", this._parent.style["text-shadow"]);
                for (var n = 0; n < 15; ++n) {
                    this._renderLine(this._screen.children[n], e.rows[n].chars)
                }
            }
        }
        ,
        td.prototype._renderLine = function(e, t) {
            for (var i = e.children[0], n = e.children[1], r = e.children[2], s = 0, a = t.length; s < a && " " == t[s].uchar; ) {
                ++s
            }
            for (; s < a && " " == t[a - 1].uchar; ) {
                --a
            }
            if (s == a)
                return i.textContent = "",
                n.textContent = "",
                void (r.textContent = "");
            i.textContent = "\xA0".repeat(s),
            r.textContent = "\xA0".repeat(t.length - a),
            this._renderTextBlock(n, t.slice(s, a)),
            e.style.setProperty("text-align", "MODE_ROLL-UP" === this._parent.channelMode ? "left" : "center"),
            e.children[1].style.setProperty("padding-left", "1%"),
            e.children[e.children.length - 2].style.setProperty("padding-right", "1%")
        }
        ,
        td.prototype._renderTextBlock = function(e, t) {
            var i = t.map(function(e) {
                return " " == e.uchar ? "\xA0" : e.uchar
            }).join("");
            e.textContent = i;
            var n = t[0].penState;
            e.style.setProperty("color", this._parent.style.color || n.foreground),
            e.style.setProperty("background-color", this._parent.style["background-color"] || Xl[n.background] || n.background),
            e.style.setProperty("font-style", n.italics ? "italic" : "normal"),
            e.style.setProperty("text-decoration", n.underline ? "underline" : "none"),
            e.style.setProperty("animation", n.flash ? "caption-blinker 1s linear infinite" : "none")
        }
        ;
        var id = function(e) {
            this._parent = e;
            var t = this._screen = document.createElement("div");
            e.area.appendChild(t),
            t.style.setProperty("width", "100%"),
            t.style.setProperty("height", "100%"),
            t.style.setProperty("display", "flex"),
            t.style.setProperty("align-items", "flex-start"),
            t.style.setProperty("flex-direction", "column"),
            t.style.setProperty("justify-content", "flex-end")
        };
        id.prototype.render = function(e) {
            if (this._screen.innerHTML = "",
            null != e) {
                var t = e.rows.map(this._extracRow).filter(function(e) {
                    return e.length > 0
                });
                if (0 != t.length)
                    for (var i = 0; i < t.length; ++i) {
                        this._renderLine(t[i].join(""))
                    }
            }
        }
        ,
        id.prototype._extracRow = function(e) {
            for (var t = [], i = 0; i < 32; ++i) {
                var n = e.chars[i].uchar;
                (" " != n || t.length > 0 && i + 1 < 32 && " " != e.chars[i + 1].uchar) && t.push(n)
            }
            return t
        }
        ,
        id.prototype._renderLine = function(e) {
            var t = document.createElement("div");
            this._screen.appendChild(t),
            t.textContent = e,
            t.style.setProperty("padding", "0 1%"),
            t.style.setProperty("line-height", String(1.2));
            for (var i = 0, n = Object.keys(this._parent.style); i < n.length; i += 1) {
                var r = n[i];
                t.style.setProperty(r, this._parent.style[r])
            }
        }
        ;
        var nd = function(e) {
            function t(t) {
                e.call(this),
                this.name = "DASHPlayer",
                t.__HuluDashPlayer__ = t.__HuluDashPlayer__ || new $l(t),
                this._player = t.__HuluDashPlayer__,
                this._eventTarget = this._player,
                this.onQualitiesChange = this.onQualitiesChange.bind(this),
                this._initProps()
            }
            e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t;
            var i = {
                player: {
                    configurable: !0
                },
                currentSrc: {
                    configurable: !0
                },
                initialTime: {
                    configurable: !0
                },
                muted: {
                    configurable: !0
                },
                paused: {
                    configurable: !0
                },
                seeking: {
                    configurable: !0
                },
                ended: {
                    configurable: !0
                },
                volume: {
                    configurable: !0
                },
                currentTime: {
                    configurable: !0
                },
                duration: {
                    configurable: !0
                },
                buffered: {
                    configurable: !0
                },
                buffer: {
                    configurable: !0
                },
                played: {
                    configurable: !0
                },
                readyState: {
                    configurable: !0
                },
                networkState: {
                    configurable: !0
                },
                seekable: {
                    configurable: !0
                },
                manifest: {
                    configurable: !0
                },
                textTracks: {
                    configurable: !0
                },
                audioTracks: {
                    configurable: !0
                },
                videoTracks: {
                    configurable: !0
                },
                startDate: {
                    configurable: !0
                },
                error: {
                    configurable: !0
                },
                mbr: {
                    configurable: !0
                },
                bufferingState: {
                    configurable: !0
                },
                playbackRate: {
                    configurable: !0
                }
            };
            return t.prototype._initProps = function() {
                this._initialTime = void 0,
                this._paused = !0,
                this._volume = 1,
                this._CEA608Renderer = void 0
            }
            ,
            t.prototype._bindEvent = function() {
                this._player.attach(),
                e.prototype._bindEvent.call(this)
            }
            ,
            t.prototype._unbindEvent = function() {
                e.prototype._unbindEvent.call(this),
                this._player.detach()
            }
            ,
            t.prototype._toggleBindEvent = function(t) {
                var i = this;
                e.prototype._toggleBindEvent.call(this, t);
                var n = t ? "removeEventListener" : "addEventListener";
                this._eventTarget[n]("playrejected", function() {
                    return i.pause()
                }),
                this._eventTarget.removeEventListener(c.MANIFEST_CHANGE, this.onManifestChange),
                this._eventTarget.removeEventListener(c.PERIOD_ENTER, this.onPeriodEnter),
                this._eventTarget.removeEventListener(c.PERIOD_EXIT, this.onPeriodExit),
                this._player.textTracks.getTrackById("chapters")[n]("cuechange", this.onManifestChange),
                this._player.textTracks.getTrackById("qualities")[n]("cuechange", this.onQualitiesChange)
            }
            ,
            i.player.get = function() {
                return this._player
            }
            ,
            i.currentSrc.get = function() {
                return this._player.currentSrc
            }
            ,
            i.initialTime.get = function() {
                return this._initialTime
            }
            ,
            i.muted.get = function() {
                return this._player.muted || 0 === this._player.volume
            }
            ,
            i.paused.get = function() {
                return this._paused
            }
            ,
            i.seeking.get = function() {
                return this._player.seeking
            }
            ,
            i.ended.get = function() {
                return "Infinity" != this._player.duration && this._player.currentTime >= this._player.duration
            }
            ,
            i.volume.get = function() {
                return this._player.volume
            }
            ,
            i.volume.set = function(e) {
                e = e > 0 ? Math.min(e, 1) : 0,
                this._player.volume = e,
                this._volume = e
            }
            ,
            i.currentTime.get = function() {
                return this._player.currentTime
            }
            ,
            i.currentTime.set = function(e) {
                this.seek(e)
            }
            ,
            i.duration.get = function() {
                return this._player.duration
            }
            ,
            i.buffered.get = function() {
                var e = this._player.buffered;
                return e.bufferLength = this._player.getBufferLength(),
                e
            }
            ,
            i.buffer.get = function() {
                return this._player.buffer
            }
            ,
            i.played.get = function() {
                return null
            }
            ,
            i.readyState.get = function() {
                return this._player.readyState
            }
            ,
            i.networkState.get = function() {
                return this._player.networkState
            }
            ,
            i.seekable.get = function() {
                return this._player.seekable
            }
            ,
            i.manifest.get = function() {
                return this._player.manifest
            }
            ,
            i.textTracks.get = function() {
                return this._player.textTracks
            }
            ,
            i.audioTracks.get = function() {
                return this._player.audioTracks
            }
            ,
            i.videoTracks.get = function() {
                return this._player.videoTracks
            }
            ,
            i.startDate.get = function() {
                return this._player.getStartDate()
            }
            ,
            i.startDate.set = function(e) {
                this._player.setStartDate(e)
            }
            ,
            i.error.get = function() {
                return this._player.error
            }
            ,
            i.mbr.get = function() {
                return this._player.mbr
            }
            ,
            i.bufferingState.get = function() {
                return this._player.bufferingState
            }
            ,
            i.playbackRate.get = function() {
                return this._player.playbackRate
            }
            ,
            i.playbackRate.set = function(e) {
                this._player.playbackRate = e
            }
            ,
            t.prototype.onManifestChange = function(t) {
                var i = this;
                Array.from(t.target.cues).forEach(function(e) {
                    e.addEventListener("enter", i.onPeriodEnter),
                    e.addEventListener("exit", i.onPeriodExit)
                });
                var n = Object.assign({}, t.detail, {
                    manifest: this.manifest
                });
                e.prototype.onManifestChange.call(this, {
                    detail: n,
                    target: this._player
                })
            }
            ,
            t.prototype.onPeriodEnter = function(t) {
                var i = Object.assign({}, t.detail, {
                    cue: t.target
                });
                e.prototype.onPeriodEnter.call(this, {
                    detail: i,
                    target: this._player
                })
            }
            ,
            t.prototype.onPeriodExit = function(t) {
                var i = Object.assign({}, t.detail, {
                    cue: t.target
                });
                e.prototype.onPeriodExit.call(this, {
                    detail: i,
                    target: this._player
                })
            }
            ,
            t.prototype.onQualitiesChange = function(e) {
                var t = this;
                Array.from(e.target.cues).forEach(function(e) {
                    e.removeEventListener("enter", t.onQualityChange),
                    e.addEventListener("enter", t.onQualityChange)
                })
            }
            ,
            t.prototype.onQualityChange = function(t) {
                var i = Object.assign({}, t.detail, {
                    cue: t.target
                });
                e.prototype.onQualityChange.call(this, {
                    detail: i,
                    target: this._player
                })
            }
            ,
            t.prototype.onSeekableChange = function(t) {
                var i = Object.assign({}, t.detail, {
                    seekable: this.seekable
                });
                e.prototype.onSeekableChange.call(this, {
                    detail: i,
                    target: this._player
                })
            }
            ,
            t.prototype.onRebufferStart = function(t) {
                e.prototype.onRebufferStart.call(this, {
                    detail: t.detail,
                    target: this._player
                })
            }
            ,
            t.prototype.onRebufferEnd = function(t) {
                e.prototype.onRebufferEnd.call(this, {
                    detail: t.detail,
                    target: this._player
                })
            }
            ,
            t.prototype.onReconnecting = function(t) {
                e.prototype.onReconnecting.call(this, {
                    detail: t.detail,
                    target: this._player
                })
            }
            ,
            t.prototype.onTimedMetadata = function(t) {
                e.prototype.onTimedMetadata.call(this, {
                    detail: t.detail,
                    target: this._player
                })
            }
            ,
            t.prototype.setConfiguration = function(e) {
                this._player.setConfiguration(e)
            }
            ,
            t.prototype.load = function(e) {
                this.stop(),
                this._initProps(),
                this._configs = e || {},
                this._initialTime = e.initialTime,
                this._player.autoplay = !!this._configs.autoplay,
                this._paused = !this._player.autoplay,
                this._configs.maxBitrate && this.setMaxBitrate(e.maxBitrate);
                var t = this._configs.license || {}
                  , i = {};
                t.fairplay && (i.fairplay = t.fairplay.license,
                i.fpscert = t.fairplay.cert),
                t.widevine && (i.widevine = t.widevine.license),
                t.playready && (i.playready = t.playready.license),
                this._player.srcObject = Object.assign({
                    url: this._configs.content.src,
                    licenseUrlMap: i
                }, this._configs),
                void 0 !== this._initialTime && null !== this._initialTime && this.seek(this._initialTime)
            }
            ,
            t.prototype.play = function() {
                this._paused = !1,
                this._player.play()
            }
            ,
            t.prototype.pause = function() {
                this._paused = !0,
                this._player.pause()
            }
            ,
            t.prototype.stop = function() {
                this.pause(),
                this._player.src = null
            }
            ,
            t.prototype.mute = function() {
                this._volume = this._player.volume,
                this._player.volume = 0
            }
            ,
            t.prototype.unmute = function() {
                this._player.volume = this._volume
            }
            ,
            t.prototype.seek = function(e) {
                this._player.currentTime = e
            }
            ,
            t.prototype.seekToPeriod = function(e, t) {
                void 0 !== t && 1 !== arguments.length || "number" != typeof e ? this._player.seek(e, t || 0) : void 0 !== (t = e) && this.seek(t)
            }
            ,
            t.prototype.renderCaptions = function(e, t) {
                return this._CEA608Renderer && this._CEA608Renderer === this._player.__CEA608Renderer__ || (this._CEA608Renderer = this._player.__CEA608Renderer__ || new Zl(this._player),
                this._player.__CEA608Renderer__ = this._CEA608Renderer),
                this._CEA608Renderer.area = e,
                this._CEA608Renderer.mode = t ? Zl.SIMPLE_MODE : Zl.CEA608_MODE,
                this._CEA608Renderer
            }
            ,
            t.prototype.setMaxBitrate = function(e) {
                this._player.setMaxBitrate(e)
            }
            ,
            t.prototype.clampTimelineStart = function(e) {
                this._player.clampTimelineStart(e)
            }
            ,
            t.prototype.createThumbnailUrl = function(e, t, i) {
                return this._player.createThumbnailUrl(e, t, i)
            }
            ,
            t.prototype.setPreferredAudioTrack = function(e, t, i) {
                return this._player.setPreferredAudioTrack(e, t, i)
            }
            ,
            t.prototype.setPreferredVideoTrack = function(e, t) {
                return this._player.setPreferredVideoTrack(e, t)
            }
            ,
            t.prototype.setPreferredTextTrack = function(e, t) {
                return this._player.setPreferredTextTrack(e, t)
            }
            ,
            t.prototype.getVideoPlaybackQuality = function() {
                return this._player.getVideoPlaybackQuality()
            }
            ,
            Object.defineProperties(t.prototype, i),
            t
        }(D)
          , rd = function(e) {
            function t(t) {
                e.call(this, t),
                this.name = "NULLPlayer"
            }
            return e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t,
            t
        }(D)
          , sd = function(e) {
            this._target = e
        };
        sd.prototype.create = function(e) {
            var t;
            switch (e) {
            case g.DASH:
                t = nd;
                break;
            case g.HLS:
            case g.MP4:
                t = Ws;
                break;
            default:
                t = rd;
            }
            return new t(this._target)
        }
        ;
        var ad = [];
        function od() {
            for (var e = [], t = arguments.length; t--; ) {
                e[t] = arguments[t]
            }
            if (0 === e.length)
                return function(e) {
                    return e
                }
                ;
            if (1 === (e = e.filter(function(e) {
                return "function" == typeof e
            })).length)
                return e[0];
            var i = e[e.length - 1]
              , n = e.slice(0, -1);
            return function() {
                for (var e = [], t = arguments.length; t--; ) {
                    e[t] = arguments[t]
                }
                return n.reduceRight(function(e, t) {
                    return t(e)
                }, i.apply(void 0, e))
            }
        }
        var ld = function(e) {
            for (var t = [], i = arguments.length - 1; i-- > 0; ) {
                t[i] = arguments[i + 1]
            }
            var n = ad.find(function(t) {
                return t._target === e
            });
            return void 0 === n && (this._target = e,
            this._methods = {},
            this._methodMiddlewares = {},
            ad.push(this),
            n = this),
            n.use.apply(n, t),
            n
        };
        ld.prototype._methodIsValid = function(e) {
            return !/constructor/g.test(e)
        }
        ,
        ld.prototype._applyToMethod = function(e) {
            for (var t = this, i = [], n = arguments.length - 1; n-- > 0; ) {
                i[n] = arguments[n + 1]
            }
            if ("string" == typeof e && this._methodIsValid(e)) {
                var r = this._methods[e] || this._target[e];
                "function" == typeof r && (this._methods[e] = r,
                void 0 === this._methodMiddlewares[e] && (this._methodMiddlewares[e] = []),
                i.forEach(function(i) {
                    return "function" == typeof i && t._methodMiddlewares[e].push(i(t._target))
                }),
                this._target[e] = od.apply(void 0, this._methodMiddlewares[e])(r.bind(this._target)))
            }
        }
        ,
        ld.prototype.use = function(e) {
            for (var t, i = this, n = [], r = arguments.length - 1; r-- > 0; ) {
                n[r] = arguments[r + 1]
            }
            return "object" == typeof e ? Array.prototype.slice.call(arguments).forEach(function(e) {
                "object" == typeof e && (e.middlewareMethods || (Object.keys(e).length ? Object.keys(e) : Object.getOwnPropertyNames(Object.getPrototypeOf(e)))).forEach(function(t) {
                    "function" == typeof e[t] && i._methodIsValid(t) && i._applyToMethod(t, e[t].bind(e))
                })
            }) : (t = this)._applyToMethod.apply(t, [e].concat(n)),
            this
        }
        ;
        var dd = function(e) {
            function t(t, i) {
                e.call(this, t),
                this._playerFactory = new sd(t),
                this._player = this._playerFactory.create(i),
                this._configs = {
                    autoplay: !1
                },
                this._src = null,
                this._license = {},
                this._eventTarget = this._player,
                this._middlewareManager = new ld(this),
                this._type = i,
                this.use = this._middlewareManager.use.bind(this._middlewareManager),
                this.use(new I(this)),
                this.use(new E(this)),
                this.use(new b(this))
            }
            e && (t.__proto__ = e),
            t.prototype = Object.create(e && e.prototype),
            t.prototype.constructor = t;
            var i = {
                player: {
                    configurable: !0
                },
                src: {
                    configurable: !0
                },
                autoplay: {
                    configurable: !0
                },
                license: {
                    configurable: !0
                },
                currentSrc: {
                    configurable: !0
                },
                initialTime: {
                    configurable: !0
                },
                muted: {
                    configurable: !0
                },
                paused: {
                    configurable: !0
                },
                seeking: {
                    configurable: !0
                },
                ended: {
                    configurable: !0
                },
                volume: {
                    configurable: !0
                },
                currentTime: {
                    configurable: !0
                },
                duration: {
                    configurable: !0
                },
                buffered: {
                    configurable: !0
                },
                buffer: {
                    configurable: !0
                },
                played: {
                    configurable: !0
                },
                readyState: {
                    configurable: !0
                },
                networkState: {
                    configurable: !0
                },
                seekable: {
                    configurable: !0
                },
                currentCuePoint: {
                    configurable: !0
                },
                manifest: {
                    configurable: !0
                },
                textTracks: {
                    configurable: !0
                },
                audioTracks: {
                    configurable: !0
                },
                videoTracks: {
                    configurable: !0
                },
                startDate: {
                    configurable: !0
                },
                error: {
                    configurable: !0
                },
                logger: {
                    configurable: !0
                },
                mbr: {
                    configurable: !0
                },
                bufferingState: {
                    configurable: !0
                },
                configuration: {
                    configurable: !0
                },
                playbackRate: {
                    configurable: !0
                },
                isCastReciever: {
                    configurable: !0
                }
            };
            return t.prototype._updateConfigs = function(e) {
                this._configs = Object.assign({
                    license: this._configs.license,
                    autoplay: this._configs.autoplay
                }, e),
                this._player.setConfiguration(this._configs)
            }
            ,
            t.prototype._bindEvent = function() {
                this._player._bindEvent(),
                e.prototype._bindEvent.call(this)
            }
            ,
            t.prototype._unbindEvent = function() {
                this._player._unbindEvent(),
                e.prototype._unbindEvent.call(this)
            }
            ,
            i.player.get = function() {
                return this._player
            }
            ,
            i.player.set = function(e) {
                this._unbindEvent(),
                this._player = e,
                this._eventTarget = e,
                this._bindEvent()
            }
            ,
            i.src.get = function() {
                return this._src
            }
            ,
            i.src.set = function(e) {
                e ? (this._configs.content = this._src = e,
                this.load()) : this.stop()
            }
            ,
            i.autoplay.set = function(e) {
                this._configs.autoplay = !!e
            }
            ,
            i.autoplay.get = function() {
                return this._configs.autoplay
            }
            ,
            i.license.get = function() {
                return this._configs.license
            }
            ,
            i.license.set = function(e) {
                this._configs.license = e || {}
            }
            ,
            i.currentSrc.get = function() {
                return this._player.currentSrc
            }
            ,
            i.initialTime.get = function() {
                return this._player.initialTime
            }
            ,
            i.muted.get = function() {
                return this._player.muted
            }
            ,
            i.paused.get = function() {
                return this._player.paused
            }
            ,
            i.seeking.get = function() {
                return this._player.seeking
            }
            ,
            i.ended.get = function() {
                return this._player.ended
            }
            ,
            i.volume.get = function() {
                return this._player.volume
            }
            ,
            i.volume.set = function(e) {
                this._player.volume = e
            }
            ,
            i.currentTime.get = function() {
                return this.getCurrentTime()
            }
            ,
            i.currentTime.set = function(e) {
                this.seek(e)
            }
            ,
            i.duration.get = function() {
                return this.getDuration()
            }
            ,
            t.prototype.getCurrentTime = function() {
                return this._player.currentTime
            }
            ,
            t.prototype.getDuration = function() {
                return this._player.duration
            }
            ,
            i.buffered.get = function() {
                return this._player.buffered
            }
            ,
            i.buffer.get = function() {
                return this._player.buffer
            }
            ,
            i.played.get = function() {
                return this._player.played
            }
            ,
            i.readyState.get = function() {
                return this._player.readyState
            }
            ,
            i.networkState.get = function() {
                return this._player.networkState
            }
            ,
            i.seekable.get = function() {
                return this._player.seekable
            }
            ,
            i.currentCuePoint.get = function() {
                return this.getCurrentCuePoint()
            }
            ,
            t.prototype.getCurrentCuePoint = function() {}
            ,
            i.manifest.get = function() {
                return this._player.manifest
            }
            ,
            i.textTracks.get = function() {
                return this._player.textTracks
            }
            ,
            i.audioTracks.get = function() {
                return this._player.audioTracks
            }
            ,
            i.videoTracks.get = function() {
                return this._player.videoTracks
            }
            ,
            i.startDate.get = function() {
                return this._player.startDate
            }
            ,
            i.startDate.set = function(e) {
                this._player.startDate = e
            }
            ,
            i.error.get = function() {
                return this._player.error
            }
            ,
            i.logger.get = function() {
                return this.getLogger()
            }
            ,
            t.prototype.getLogger = function() {}
            ,
            i.mbr.get = function() {
                return this._player.mbr
            }
            ,
            i.bufferingState.get = function() {
                return this._player.bufferingState
            }
            ,
            i.configuration.set = function(e) {
                this._updateConfigs(e)
            }
            ,
            i.configuration.get = function() {
                return this._configs
            }
            ,
            i.playbackRate.get = function() {
                return this._player.playbackRate
            }
            ,
            i.playbackRate.set = function(e) {
                this._player.playbackRate = e
            }
            ,
            t.prototype.setConfiguration = function(e) {
                this.configuration = e
            }
            ,
            t.prototype.load = function(e) {
                Object.keys(e || {}).length && (this.configuration = e),
                this._player.stop(),
                this._configs.content = new y(this._configs.content || this._src),
                this._src = this._configs.content.src,
                this.player = this._playerFactory.create(this._configs.content.type),
                this._player.load(this._configs)
            }
            ,
            t.prototype.play = function() {
                this._player.play()
            }
            ,
            t.prototype.pause = function() {
                this._player.pause()
            }
            ,
            t.prototype.stop = function() {
                this._configs = {
                    autoplay: !1
                },
                this._src = null,
                this._license = {},
                this._player.stop()
            }
            ,
            t.prototype.mute = function() {
                this._player.mute()
            }
            ,
            t.prototype.unmute = function() {
                this._player.unmute()
            }
            ,
            t.prototype.seek = function(e) {
                this._player.seek(e)
            }
            ,
            t.prototype.seekToPeriod = function(e, t) {
                this._player.seekToPeriod(e, t)
            }
            ,
            t.prototype.renderCaptions = function(e, t) {
                return this._player.renderCaptions(e, t)
            }
            ,
            t.prototype.setMaxBitrate = function(e) {
                this._player.setMaxBitrate(e)
            }
            ,
            t.prototype.createThumbnailUrl = function(e, t, i) {
                return this._player.createThumbnailUrl(e, t, i)
            }
            ,
            t.prototype.setPreferredAudioTrack = function(e, t, i) {
                this._player.setPreferredAudioTrack(e, t, i)
            }
            ,
            t.prototype.setPreferredVideoTrack = function(e, t) {
                this._player.setPreferredVideoTrack(e, t)
            }
            ,
            t.prototype.setPreferredTextTrack = function(e, t) {
                this._player.setPreferredTextTrack(e, t)
            }
            ,
            t.prototype.clampTimelineStart = function(e) {
                return this._player.clampTimelineStart(e)
            }
            ,
            t.prototype.getDeviceCapability = function(e) {
                var t = this
                  , i = e == V || e == H || e == W
                  , n = i ? G[e] : K[e];
                return n ? e === W && be.getCastReceiver() ? Promise.resolve(be.getChromecast4KVideoConfig()) : e == H && window.navigator.mediaCapabilities && window.navigator.mediaCapabilities.decodingInfo ? this._checkMediaCapability(n, i) : this._target && "function" == typeof this._target.canPlayType ? Ce.encryptSupported(e).then(function(r) {
                    if (!r)
                        return Promise.reject(null);
                    if (e == "ec3" && /(11.1.* Safari)|(12.1.* Safari)/.test(navigator.userAgent))
                        return Promise.reject(null);
                    var s = n.find(function(e) {
                        return !(i && e.framerate > 30) && "probably" === t._target.canPlayType(e.codec)
                    });
                    return s ? Promise.resolve(s) : Promise.reject(null)
                }) : Promise.resolve(null) : Promise.resolve(null)
            }
            ,
            t.prototype.getVideoPlaybackQuality = function() {
                return this._player.getVideoPlaybackQuality()
            }
            ,
            i.isCastReciever.get = function() {
                return !(!window.cast || !window.cast.receiver)
            }
            ,
            t.prototype._checkMediaCapability = function(e, t, i) {
                var n = this;
                void 0 === i && (i = 0);
                var r = e[i];
                if (null == r)
                    return Promise.resolve();
                var s = {
                    type: "media-source"
                };
                return t ? s.video = {
                    contentType: r.codec,
                    width: r.width,
                    height: r.height,
                    bitrate: r.bitrate,
                    framerate: r.framerate
                } : s.audio = {
                    contentType: r.codec,
                    channels: r.channels,
                    bitrate: r.bitrate,
                    samplerate: r.samplerate
                },
                window.navigator.mediaCapabilities.decodingInfo(s).catch(function() {}).then(function(s) {
                    return s && s.smooth ? r : n._checkMediaCapability(e, t, i + 1)
                })
            }
            ,
            Object.defineProperties(t.prototype, i),
            t
        }(D);
        "undefined" != typeof window && (window.HuluMediaPlayer = dd),
        t.h = dd
    }
    ).call(this, i(13))
}
, function(e, t, i) {
    (function() {
        var t, n, r, s, a, o, l, d, u, c, h, p, _ = {}.hasOwnProperty;
        p = i(5),
        h = p.isObject,
        c = p.isFunction,
        u = p.isEmpty,
        a = null,
        t = null,
        n = null,
        r = null,
        s = null,
        l = null,
        d = null,
        o = null,
        e.exports = function() {
            function e(e) {
                this.parent = e,
                this.parent && (this.options = this.parent.options,
                this.stringify = this.parent.stringify),
                this.children = [],
                a || (a = i(14),
                t = i(15),
                n = i(16),
                r = i(17),
                s = i(18),
                l = i(23),
                d = i(24),
                o = i(25))
            }
            return e.prototype.element = function(e, t, i) {
                var n, r, s, a, o, l, d, p, f, g;
                if (l = null,
                null == t && (t = {}),
                t = t.valueOf(),
                h(t) || (i = (f = [t, i])[0],
                t = f[1]),
                null != e && (e = e.valueOf()),
                Array.isArray(e))
                    for (s = 0,
                    d = e.length; s < d; s++) {
                        r = e[s],
                        l = this.element(r)
                    }
                else if (c(e))
                    l = this.element(e.apply());
                else if (h(e)) {
                    for (o in e) {
                        if (_.call(e, o))
                            if (g = e[o],
                            c(g) && (g = g.apply()),
                            h(g) && u(g) && (g = null),
                            !this.options.ignoreDecorators && this.stringify.convertAttKey && 0 === o.indexOf(this.stringify.convertAttKey))
                                l = this.attribute(o.substr(this.stringify.convertAttKey.length), g);
                            else if (!this.options.separateArrayItems && Array.isArray(g))
                                for (a = 0,
                                p = g.length; a < p; a++) {
                                    r = g[a],
                                    (n = {})[o] = r,
                                    l = this.element(n)
                                }
                            else
                                h(g) ? (l = this.element(o)).element(g) : l = this.element(o, g)
                    }
                } else
                    l = !this.options.ignoreDecorators && this.stringify.convertTextKey && 0 === e.indexOf(this.stringify.convertTextKey) ? this.text(i) : !this.options.ignoreDecorators && this.stringify.convertCDataKey && 0 === e.indexOf(this.stringify.convertCDataKey) ? this.cdata(i) : !this.options.ignoreDecorators && this.stringify.convertCommentKey && 0 === e.indexOf(this.stringify.convertCommentKey) ? this.comment(i) : !this.options.ignoreDecorators && this.stringify.convertRawKey && 0 === e.indexOf(this.stringify.convertRawKey) ? this.raw(i) : !this.options.ignoreDecorators && this.stringify.convertPIKey && 0 === e.indexOf(this.stringify.convertPIKey) ? this.instruction(e.substr(this.stringify.convertPIKey.length), i) : this.node(e, t, i);
                if (null == l)
                    throw new Error("Could not create any elements with: " + e);
                return l
            }
            ,
            e.prototype.insertBefore = function(e, t, i) {
                var n, r, s;
                if (this.isRoot)
                    throw new Error("Cannot insert elements at root level");
                return r = this.parent.children.indexOf(this),
                s = this.parent.children.splice(r),
                n = this.parent.element(e, t, i),
                Array.prototype.push.apply(this.parent.children, s),
                n
            }
            ,
            e.prototype.insertAfter = function(e, t, i) {
                var n, r, s;
                if (this.isRoot)
                    throw new Error("Cannot insert elements at root level");
                return r = this.parent.children.indexOf(this),
                s = this.parent.children.splice(r + 1),
                n = this.parent.element(e, t, i),
                Array.prototype.push.apply(this.parent.children, s),
                n
            }
            ,
            e.prototype.remove = function() {
                var e;
                if (this.isRoot)
                    throw new Error("Cannot remove the root element");
                return e = this.parent.children.indexOf(this),
                [].splice.apply(this.parent.children, [e, e - e + 1].concat([])),
                this.parent
            }
            ,
            e.prototype.node = function(e, t, i) {
                var n, r;
                return null != e && (e = e.valueOf()),
                t || (t = {}),
                t = t.valueOf(),
                h(t) || (i = (r = [t, i])[0],
                t = r[1]),
                n = new a(this,e,t),
                null != i && n.text(i),
                this.children.push(n),
                n
            }
            ,
            e.prototype.text = function(e) {
                var t;
                return t = new d(this,e),
                this.children.push(t),
                this
            }
            ,
            e.prototype.cdata = function(e) {
                var i;
                return i = new t(this,e),
                this.children.push(i),
                this
            }
            ,
            e.prototype.comment = function(e) {
                var t;
                return t = new n(this,e),
                this.children.push(t),
                this
            }
            ,
            e.prototype.commentBefore = function(e) {
                var t, i;
                return t = this.parent.children.indexOf(this),
                i = this.parent.children.splice(t),
                this.parent.comment(e),
                Array.prototype.push.apply(this.parent.children, i),
                this
            }
            ,
            e.prototype.commentAfter = function(e) {
                var t, i;
                return t = this.parent.children.indexOf(this),
                i = this.parent.children.splice(t + 1),
                this.parent.comment(e),
                Array.prototype.push.apply(this.parent.children, i),
                this
            }
            ,
            e.prototype.raw = function(e) {
                var t;
                return t = new l(this,e),
                this.children.push(t),
                this
            }
            ,
            e.prototype.instruction = function(e, t) {
                var i, n, r, s, a;
                if (null != e && (e = e.valueOf()),
                null != t && (t = t.valueOf()),
                Array.isArray(e))
                    for (s = 0,
                    a = e.length; s < a; s++) {
                        i = e[s],
                        this.instruction(i)
                    }
                else if (h(e))
                    for (i in e) {
                        _.call(e, i) && (n = e[i],
                        this.instruction(i, n))
                    }
                else
                    c(t) && (t = t.apply()),
                    r = new o(this,e,t),
                    this.children.push(r);
                return this
            }
            ,
            e.prototype.instructionBefore = function(e, t) {
                var i, n;
                return i = this.parent.children.indexOf(this),
                n = this.parent.children.splice(i),
                this.parent.instruction(e, t),
                Array.prototype.push.apply(this.parent.children, n),
                this
            }
            ,
            e.prototype.instructionAfter = function(e, t) {
                var i, n;
                return i = this.parent.children.indexOf(this),
                n = this.parent.children.splice(i + 1),
                this.parent.instruction(e, t),
                Array.prototype.push.apply(this.parent.children, n),
                this
            }
            ,
            e.prototype.declaration = function(e, t, i) {
                var n, s;
                return n = this.document(),
                s = new r(n,e,t,i),
                n.children[0]instanceof r ? n.children[0] = s : n.children.unshift(s),
                n.root() || n
            }
            ,
            e.prototype.doctype = function(e, t) {
                var i, n, r, a, o, l, d, u, c;
                for (i = this.document(),
                n = new s(i,e,t),
                r = a = 0,
                l = (u = i.children).length; a < l; r = ++a) {
                    if (u[r]instanceof s)
                        return i.children[r] = n,
                        n
                }
                for (r = o = 0,
                d = (c = i.children).length; o < d; r = ++o) {
                    if (c[r].isRoot)
                        return i.children.splice(r, 0, n),
                        n
                }
                return i.children.push(n),
                n
            }
            ,
            e.prototype.up = function() {
                if (this.isRoot)
                    throw new Error("The root node has no parent. Use doc() if you need to get the document object.");
                return this.parent
            }
            ,
            e.prototype.root = function() {
                var e;
                for (e = this; e; ) {
                    if (e.isDocument)
                        return e.rootObject;
                    if (e.isRoot)
                        return e;
                    e = e.parent
                }
            }
            ,
            e.prototype.document = function() {
                var e;
                for (e = this; e; ) {
                    if (e.isDocument)
                        return e;
                    e = e.parent
                }
            }
            ,
            e.prototype.end = function(e) {
                return this.document().end(e)
            }
            ,
            e.prototype.prev = function() {
                var e;
                if ((e = this.parent.children.indexOf(this)) < 1)
                    throw new Error("Already at the first node");
                return this.parent.children[e - 1]
            }
            ,
            e.prototype.next = function() {
                var e;
                if (-1 === (e = this.parent.children.indexOf(this)) || e === this.parent.children.length - 1)
                    throw new Error("Already at the last node");
                return this.parent.children[e + 1]
            }
            ,
            e.prototype.importDocument = function(e) {
                var t;
                return (t = e.root().clone()).parent = this,
                t.isRoot = !1,
                this.children.push(t),
                this
            }
            ,
            e.prototype.ele = function(e, t, i) {
                return this.element(e, t, i)
            }
            ,
            e.prototype.nod = function(e, t, i) {
                return this.node(e, t, i)
            }
            ,
            e.prototype.txt = function(e) {
                return this.text(e)
            }
            ,
            e.prototype.dat = function(e) {
                return this.cdata(e)
            }
            ,
            e.prototype.com = function(e) {
                return this.comment(e)
            }
            ,
            e.prototype.ins = function(e, t) {
                return this.instruction(e, t)
            }
            ,
            e.prototype.doc = function() {
                return this.document()
            }
            ,
            e.prototype.dec = function(e, t, i) {
                return this.declaration(e, t, i)
            }
            ,
            e.prototype.dtd = function(e, t) {
                return this.doctype(e, t)
            }
            ,
            e.prototype.e = function(e, t, i) {
                return this.element(e, t, i)
            }
            ,
            e.prototype.n = function(e, t, i) {
                return this.node(e, t, i)
            }
            ,
            e.prototype.t = function(e) {
                return this.text(e)
            }
            ,
            e.prototype.d = function(e) {
                return this.cdata(e)
            }
            ,
            e.prototype.c = function(e) {
                return this.comment(e)
            }
            ,
            e.prototype.r = function(e) {
                return this.raw(e)
            }
            ,
            e.prototype.i = function(e, t) {
                return this.instruction(e, t)
            }
            ,
            e.prototype.u = function() {
                return this.up()
            }
            ,
            e.prototype.importXMLBuilder = function(e) {
                return this.importDocument(e)
            }
            ,
            e
        }()
    }
    ).call(this)
}
, function(e, t, i) {
    var n = i(57)
      , r = "object" == typeof self && self && self.Object === Object && self
      , s = n || r || Function("return this")();
    e.exports = s
}
, function(e) {
    "use strict";
    var n, r = "object" == typeof Reflect ? Reflect : null, s = r && "function" == typeof r.apply ? r.apply : function(e, t, i) {
        return Function.prototype.apply.call(e, t, i)
    }
    ;
    n = r && "function" == typeof r.ownKeys ? r.ownKeys : Object.getOwnPropertySymbols ? function(e) {
        return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))
    }
    : function(e) {
        return Object.getOwnPropertyNames(e)
    }
    ;
    var a = Number.isNaN || function(e) {
        return e != e
    }
    ;
    function o() {
        o.init.call(this)
    }
    e.exports = o,
    o.EventEmitter = o,
    o.prototype._events = void 0,
    o.prototype._eventsCount = 0,
    o.prototype._maxListeners = void 0;
    var l = 10;
    function d(e) {
        if ("function" != typeof e)
            throw new TypeError("The \"listener\" argument must be of type Function. Received type " + typeof e)
    }
    function u(e) {
        return void 0 === e._maxListeners ? o.defaultMaxListeners : e._maxListeners
    }
    function c(e, t, i, n) {
        var r, s, a, o;
        if (d(i),
        void 0 === (s = e._events) ? (s = e._events = Object.create(null),
        e._eventsCount = 0) : (void 0 !== s.newListener && (e.emit("newListener", t, i.listener ? i.listener : i),
        s = e._events),
        a = s[t]),
        void 0 === a)
            a = s[t] = i,
            ++e._eventsCount;
        else if ("function" == typeof a ? a = s[t] = n ? [i, a] : [a, i] : n ? a.unshift(i) : a.push(i),
        (r = u(e)) > 0 && a.length > r && !a.warned) {
            a.warned = !0;
            var l = new Error("Possible EventEmitter memory leak detected. " + a.length + " " + String(t) + " listeners added. Use emitter.setMaxListeners() to increase limit");
            l.name = "MaxListenersExceededWarning",
            l.emitter = e,
            l.type = t,
            l.count = a.length,
            o = l,
            console && console.warn && console.warn(o)
        }
        return e
    }
    function h() {
        if (!this.fired)
            return this.target.removeListener(this.type, this.wrapFn),
            this.fired = !0,
            0 === arguments.length ? this.listener.call(this.target) : this.listener.apply(this.target, arguments)
    }
    function p(e, t, i) {
        var n = {
            fired: !1,
            wrapFn: void 0,
            target: e,
            type: t,
            listener: i
        }
          , r = h.bind(n);
        return r.listener = i,
        n.wrapFn = r,
        r
    }
    function _(e, t, i) {
        var n = e._events;
        if (void 0 === n)
            return [];
        var r = n[t];
        return void 0 === r ? [] : "function" == typeof r ? i ? [r.listener || r] : [r] : i ? function(e) {
            for (var t = new Array(e.length), i = 0; i < t.length; ++i) {
                t[i] = e[i].listener || e[i]
            }
            return t
        }(r) : g(r, r.length)
    }
    function f(e) {
        var t = this._events;
        if (void 0 !== t) {
            var i = t[e];
            if ("function" == typeof i)
                return 1;
            if (void 0 !== i)
                return i.length
        }
        return 0
    }
    function g(e, t) {
        for (var i = new Array(t), n = 0; n < t; ++n) {
            i[n] = e[n]
        }
        return i
    }
    Object.defineProperty(o, "defaultMaxListeners", {
        enumerable: !0,
        get: function get() {
            return l
        },
        set: function set(e) {
            if ("number" != typeof e || e < 0 || a(e))
                throw new RangeError("The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received " + e + ".");
            l = e
        }
    }),
    o.init = function() {
        void 0 !== this._events && this._events !== Object.getPrototypeOf(this)._events || (this._events = Object.create(null),
        this._eventsCount = 0),
        this._maxListeners = this._maxListeners || void 0
    }
    ,
    o.prototype.setMaxListeners = function(e) {
        if ("number" != typeof e || e < 0 || a(e))
            throw new RangeError("The value of \"n\" is out of range. It must be a non-negative number. Received " + e + ".");
        return this._maxListeners = e,
        this
    }
    ,
    o.prototype.getMaxListeners = function() {
        return u(this)
    }
    ,
    o.prototype.emit = function(e) {
        for (var t = [], i = 1; i < arguments.length; i++) {
            t.push(arguments[i])
        }
        var n = "error" === e
          , r = this._events;
        if (void 0 !== r)
            n = n && void 0 === r.error;
        else if (!n)
            return !1;
        if (n) {
            var a;
            if (t.length > 0 && (a = t[0]),
            a instanceof Error)
                throw a;
            var o = new Error("Unhandled error." + (a ? " (" + a.message + ")" : ""));
            throw o.context = a,
            o
        }
        var l = r[e];
        if (void 0 === l)
            return !1;
        if ("function" == typeof l)
            s(l, this, t);
        else {
            var d = l.length
              , u = g(l, d);
            for (i = 0; i < d; ++i) {
                s(u[i], this, t)
            }
        }
        return !0
    }
    ,
    o.prototype.addListener = function(e, t) {
        return c(this, e, t, !1)
    }
    ,
    o.prototype.on = o.prototype.addListener,
    o.prototype.prependListener = function(e, t) {
        return c(this, e, t, !0)
    }
    ,
    o.prototype.once = function(e, t) {
        return d(t),
        this.on(e, p(this, e, t)),
        this
    }
    ,
    o.prototype.prependOnceListener = function(e, t) {
        return d(t),
        this.prependListener(e, p(this, e, t)),
        this
    }
    ,
    o.prototype.removeListener = function(e, t) {
        var i, n, r, s, a;
        if (d(t),
        void 0 === (n = this._events))
            return this;
        if (void 0 === (i = n[e]))
            return this;
        if (i === t || i.listener === t)
            0 == --this._eventsCount ? this._events = Object.create(null) : (delete n[e],
            n.removeListener && this.emit("removeListener", e, i.listener || t));
        else if ("function" != typeof i) {
            for (r = -1,
            s = i.length - 1; s >= 0; s--) {
                if (i[s] === t || i[s].listener === t) {
                    a = i[s].listener,
                    r = s;
                    break
                }
            }
            if (r < 0)
                return this;
            0 === r ? i.shift() : function(e, t) {
                for (; t + 1 < e.length; t++) {
                    e[t] = e[t + 1]
                }
                e.pop()
            }(i, r),
            1 === i.length && (n[e] = i[0]),
            void 0 !== n.removeListener && this.emit("removeListener", e, a || t)
        }
        return this
    }
    ,
    o.prototype.off = o.prototype.removeListener,
    o.prototype.removeAllListeners = function(e) {
        var t, i, n;
        if (void 0 === (i = this._events))
            return this;
        if (void 0 === i.removeListener)
            return 0 === arguments.length ? (this._events = Object.create(null),
            this._eventsCount = 0) : void 0 !== i[e] && (0 == --this._eventsCount ? this._events = Object.create(null) : delete i[e]),
            this;
        if (0 === arguments.length) {
            var r, s = Object.keys(i);
            for (n = 0; n < s.length; ++n) {
                "removeListener" !== (r = s[n]) && this.removeAllListeners(r)
            }
            return this.removeAllListeners("removeListener"),
            this._events = Object.create(null),
            this._eventsCount = 0,
            this
        }
        if ("function" == typeof (t = i[e]))
            this.removeListener(e, t);
        else if (void 0 !== t)
            for (n = t.length - 1; n >= 0; n--) {
                this.removeListener(e, t[n])
            }
        return this
    }
    ,
    o.prototype.listeners = function(e) {
        return _(this, e, !0)
    }
    ,
    o.prototype.rawListeners = function(e) {
        return _(this, e, !1)
    }
    ,
    o.listenerCount = function(e, t) {
        return "function" == typeof e.listenerCount ? e.listenerCount(t) : f.call(e, t)
    }
    ,
    o.prototype.listenerCount = f,
    o.prototype.eventNames = function() {
        return this._eventsCount > 0 ? n(this._events) : []
    }
}
, function(e) {
    (function() {
        var t, i, n, r, s, a, o = [].slice, l = {}.hasOwnProperty;
        t = function() {
            var e, t, i, n, s, a;
            if (a = arguments[0],
            s = 2 <= arguments.length ? o.call(arguments, 1) : [],
            r(Object.assign))
                Object.assign.apply(null, arguments);
            else
                for (e = 0,
                i = s.length; e < i; e++) {
                    if (null != (n = s[e]))
                        for (t in n) {
                            l.call(n, t) && (a[t] = n[t])
                        }
                }
            return a
        }
        ,
        r = function(e) {
            return !!e && "[object Function]" === Object.prototype.toString.call(e)
        }
        ,
        s = function(e) {
            var t;
            return !!e && ("function" == (t = typeof e) || "object" === t)
        }
        ,
        i = function(e) {
            return r(Array.isArray) ? Array.isArray(e) : "[object Array]" === Object.prototype.toString.call(e)
        }
        ,
        n = function(e) {
            if (i(e))
                return !e.length;
            for (var t in e) {
                if (l.call(e, t))
                    return !1
            }
            return !0
        }
        ,
        a = function(e) {
            var t, i;
            return s(e) && (i = Object.getPrototypeOf(e)) && (t = i.constructor) && "function" == typeof t && t instanceof t && Function.prototype.toString.call(t) === Function.prototype.toString.call(Object)
        }
        ,
        e.exports.assign = t,
        e.exports.isFunction = r,
        e.exports.isObject = s,
        e.exports.isArray = i,
        e.exports.isEmpty = n,
        e.exports.isPlainObject = a
    }
    ).call(this)
}
, function(e, t) {
    "use strict";
    var n = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;
    function r(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }
    t.assign = function(e) {
        for (var t = Array.prototype.slice.call(arguments, 1); t.length; ) {
            var i = t.shift();
            if (i) {
                if ("object" != typeof i)
                    throw new TypeError(i + "must be non-object");
                for (var n in i) {
                    r(i, n) && (e[n] = i[n])
                }
            }
        }
        return e
    }
    ,
    t.shrinkBuf = function(e, t) {
        return e.length === t ? e : e.subarray ? e.subarray(0, t) : (e.length = t,
        e)
    }
    ;
    var s = {
        arraySet: function arraySet(e, t, i, n, r) {
            if (t.subarray && e.subarray)
                e.set(t.subarray(i, i + n), r);
            else
                for (var s = 0; s < n; s++) {
                    e[r + s] = t[i + s]
                }
        },
        flattenChunks: function flattenChunks(e) {
            var t, i, n, r, s, a;
            for (n = 0,
            t = 0,
            i = e.length; t < i; t++) {
                n += e[t].length
            }
            for (a = new Uint8Array(n),
            r = 0,
            t = 0,
            i = e.length; t < i; t++) {
                s = e[t],
                a.set(s, r),
                r += s.length
            }
            return a
        }
    }
      , a = {
        arraySet: function arraySet(e, t, i, n, r) {
            for (var s = 0; s < n; s++) {
                e[r + s] = t[i + s]
            }
        },
        flattenChunks: function flattenChunks(e) {
            return [].concat.apply([], e)
        }
    };
    t.setTyped = function(e) {
        e ? (t.Buf8 = Uint8Array,
        t.Buf16 = Uint16Array,
        t.Buf32 = Int32Array,
        t.assign(t, s)) : (t.Buf8 = Array,
        t.Buf16 = Array,
        t.Buf32 = Array,
        t.assign(t, a))
    }
    ,
    t.setTyped(n)
}
, function(e, t, i) {
    var n = i(107)
      , r = i(112);
    e.exports = function(e, t) {
        var i = r(e, t);
        return n(i) ? i : void 0
    }
}
, function(e) {
    e.exports = function(e) {
        var t = typeof e;
        return null != e && ("object" == t || "function" == t)
    }
}
, function(e, t, i) {
    var n = i(191);
    e.exports = function(e, t) {
        return n(e, t)
    }
}
, function(e) {
    e.exports = function(e) {
        return null != e && "object" == typeof e
    }
}
, function(e) {
    e.exports = function(e, t) {
        return e === t || e != e && t != t
    }
}
, function(e, t, i) {
    var n = i(39)
      , r = i(108)
      , s = i(109)
      , a = n ? n.toStringTag : void 0;
    e.exports = function(e) {
        return null == e ? void 0 === e ? "[object Undefined]" : "[object Null]" : a && a in Object(e) ? r(e) : s(e)
    }
}
, function(e) {
    var i = function() {
        return this
    }();
    try {
        i = i || new Function("return this")()
    } catch (e) {
        "object" == typeof window && (i = window)
    }
    e.exports = i
}
, function(e, t, i) {
    (function() {
        var t, n, r, s, a, o = {}.hasOwnProperty;
        a = i(5),
        s = a.isObject,
        r = a.isFunction,
        n = i(2),
        t = i(48),
        e.exports = function(e) {
            function i(e, t, n) {
                if (i.__super__.constructor.call(this, e),
                null == t)
                    throw new Error("Missing element name");
                this.name = this.stringify.eleName(t),
                this.attributes = {},
                null != n && this.attribute(n),
                e.isDocument && (this.isRoot = !0,
                this.documentObject = e,
                e.rootObject = this)
            }
            return function(e, t) {
                for (var i in t) {
                    o.call(t, i) && (e[i] = t[i])
                }
                function n() {
                    this.constructor = e
                }
                n.prototype = t.prototype,
                e.prototype = new n,
                e.__super__ = t.prototype
            }(i, e),
            i.prototype.clone = function() {
                var e, t, i, n;
                for (t in (i = Object.create(this)).isRoot && (i.documentObject = null),
                i.attributes = {},
                n = this.attributes) {
                    o.call(n, t) && (e = n[t],
                    i.attributes[t] = e.clone())
                }
                return i.children = [],
                this.children.forEach(function(e) {
                    var t;
                    return (t = e.clone()).parent = i,
                    i.children.push(t)
                }),
                i
            }
            ,
            i.prototype.attribute = function(e, i) {
                var n, a;
                if (null != e && (e = e.valueOf()),
                s(e))
                    for (n in e) {
                        o.call(e, n) && (a = e[n],
                        this.attribute(n, a))
                    }
                else
                    r(i) && (i = i.apply()),
                    this.options.skipNullAttributes && null == i || (this.attributes[e] = new t(this,e,i));
                return this
            }
            ,
            i.prototype.removeAttribute = function(e) {
                var t, i, n;
                if (null == e)
                    throw new Error("Missing attribute name");
                if (e = e.valueOf(),
                Array.isArray(e))
                    for (i = 0,
                    n = e.length; i < n; i++) {
                        t = e[i],
                        delete this.attributes[t]
                    }
                else
                    delete this.attributes[e];
                return this
            }
            ,
            i.prototype.toString = function(e) {
                return this.options.writer.set(e).element(this)
            }
            ,
            i.prototype.att = function(e, t) {
                return this.attribute(e, t)
            }
            ,
            i.prototype.a = function(e, t) {
                return this.attribute(e, t)
            }
            ,
            i
        }(n)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n = {}.hasOwnProperty;
        t = i(2),
        e.exports = function(e) {
            function t(e, i) {
                if (t.__super__.constructor.call(this, e),
                null == i)
                    throw new Error("Missing CDATA text");
                this.text = this.stringify.cdata(i)
            }
            return function(e, t) {
                for (var i in t) {
                    n.call(t, i) && (e[i] = t[i])
                }
                function r() {
                    this.constructor = e
                }
                r.prototype = t.prototype,
                e.prototype = new r,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.clone = function() {
                return Object.create(this)
            }
            ,
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).cdata(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n = {}.hasOwnProperty;
        t = i(2),
        e.exports = function(e) {
            function t(e, i) {
                if (t.__super__.constructor.call(this, e),
                null == i)
                    throw new Error("Missing comment text");
                this.text = this.stringify.comment(i)
            }
            return function(e, t) {
                for (var i in t) {
                    n.call(t, i) && (e[i] = t[i])
                }
                function r() {
                    this.constructor = e
                }
                r.prototype = t.prototype,
                e.prototype = new r,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.clone = function() {
                return Object.create(this)
            }
            ,
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).comment(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n, r = {}.hasOwnProperty;
        n = i(5).isObject,
        t = i(2),
        e.exports = function(e) {
            function t(e, i, r, s) {
                var a;
                t.__super__.constructor.call(this, e),
                n(i) && (i = (a = i).version,
                r = a.encoding,
                s = a.standalone),
                i || (i = "1.0"),
                this.version = this.stringify.xmlVersion(i),
                null != r && (this.encoding = this.stringify.xmlEncoding(r)),
                null != s && (this.standalone = this.stringify.xmlStandalone(s))
            }
            return function(e, t) {
                for (var i in t) {
                    r.call(t, i) && (e[i] = t[i])
                }
                function n() {
                    this.constructor = e
                }
                n.prototype = t.prototype,
                e.prototype = new n,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).declaration(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n, r, s, a, o, l = {}.hasOwnProperty;
        o = i(5).isObject,
        a = i(2),
        t = i(19),
        r = i(20),
        n = i(21),
        s = i(22),
        e.exports = function(e) {
            function i(e, t, n) {
                var r, s;
                i.__super__.constructor.call(this, e),
                this.documentObject = e,
                o(t) && (t = (r = t).pubID,
                n = r.sysID),
                null == n && (n = (s = [t, n])[0],
                t = s[1]),
                null != t && (this.pubID = this.stringify.dtdPubID(t)),
                null != n && (this.sysID = this.stringify.dtdSysID(n))
            }
            return function(e, t) {
                for (var i in t) {
                    l.call(t, i) && (e[i] = t[i])
                }
                function n() {
                    this.constructor = e
                }
                n.prototype = t.prototype,
                e.prototype = new n,
                e.__super__ = t.prototype
            }(i, e),
            i.prototype.element = function(e, t) {
                var i;
                return i = new n(this,e,t),
                this.children.push(i),
                this
            }
            ,
            i.prototype.attList = function(e, i, n, r, s) {
                var a;
                return a = new t(this,e,i,n,r,s),
                this.children.push(a),
                this
            }
            ,
            i.prototype.entity = function(e, t) {
                var i;
                return i = new r(this,!1,e,t),
                this.children.push(i),
                this
            }
            ,
            i.prototype.pEntity = function(e, t) {
                var i;
                return i = new r(this,!0,e,t),
                this.children.push(i),
                this
            }
            ,
            i.prototype.notation = function(e, t) {
                var i;
                return i = new s(this,e,t),
                this.children.push(i),
                this
            }
            ,
            i.prototype.toString = function(e) {
                return this.options.writer.set(e).docType(this)
            }
            ,
            i.prototype.ele = function(e, t) {
                return this.element(e, t)
            }
            ,
            i.prototype.att = function(e, t, i, n, r) {
                return this.attList(e, t, i, n, r)
            }
            ,
            i.prototype.ent = function(e, t) {
                return this.entity(e, t)
            }
            ,
            i.prototype.pent = function(e, t) {
                return this.pEntity(e, t)
            }
            ,
            i.prototype.not = function(e, t) {
                return this.notation(e, t)
            }
            ,
            i.prototype.up = function() {
                return this.root() || this.documentObject
            }
            ,
            i
        }(a)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n = {}.hasOwnProperty;
        t = i(2),
        e.exports = function(e) {
            function t(e, i, n, r, s, a) {
                if (t.__super__.constructor.call(this, e),
                null == i)
                    throw new Error("Missing DTD element name");
                if (null == n)
                    throw new Error("Missing DTD attribute name");
                if (!r)
                    throw new Error("Missing DTD attribute type");
                if (!s)
                    throw new Error("Missing DTD attribute default");
                if (0 !== s.indexOf("#") && (s = "#" + s),
                !s.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))
                    throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");
                if (a && !s.match(/^(#FIXED|#DEFAULT)$/))
                    throw new Error("Default value only applies to #FIXED or #DEFAULT");
                this.elementName = this.stringify.eleName(i),
                this.attributeName = this.stringify.attName(n),
                this.attributeType = this.stringify.dtdAttType(r),
                this.defaultValue = this.stringify.dtdAttDefault(a),
                this.defaultValueType = s
            }
            return function(e, t) {
                for (var i in t) {
                    n.call(t, i) && (e[i] = t[i])
                }
                function r() {
                    this.constructor = e
                }
                r.prototype = t.prototype,
                e.prototype = new r,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).dtdAttList(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n, r = {}.hasOwnProperty;
        n = i(5).isObject,
        t = i(2),
        e.exports = function(e) {
            function t(e, i, r, s) {
                if (t.__super__.constructor.call(this, e),
                null == r)
                    throw new Error("Missing entity name");
                if (null == s)
                    throw new Error("Missing entity value");
                if (this.pe = !!i,
                this.name = this.stringify.eleName(r),
                n(s)) {
                    if (!s.pubID && !s.sysID)
                        throw new Error("Public and/or system identifiers are required for an external entity");
                    if (s.pubID && !s.sysID)
                        throw new Error("System identifier is required for a public external entity");
                    if (null != s.pubID && (this.pubID = this.stringify.dtdPubID(s.pubID)),
                    null != s.sysID && (this.sysID = this.stringify.dtdSysID(s.sysID)),
                    null != s.nData && (this.nData = this.stringify.dtdNData(s.nData)),
                    this.pe && this.nData)
                        throw new Error("Notation declaration is not allowed in a parameter entity")
                } else
                    this.value = this.stringify.dtdEntityValue(s)
            }
            return function(e, t) {
                for (var i in t) {
                    r.call(t, i) && (e[i] = t[i])
                }
                function n() {
                    this.constructor = e
                }
                n.prototype = t.prototype,
                e.prototype = new n,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).dtdEntity(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n = {}.hasOwnProperty;
        t = i(2),
        e.exports = function(e) {
            function t(e, i, n) {
                if (t.__super__.constructor.call(this, e),
                null == i)
                    throw new Error("Missing DTD element name");
                n || (n = "(#PCDATA)"),
                Array.isArray(n) && (n = "(" + n.join(",") + ")"),
                this.name = this.stringify.eleName(i),
                this.value = this.stringify.dtdElementValue(n)
            }
            return function(e, t) {
                for (var i in t) {
                    n.call(t, i) && (e[i] = t[i])
                }
                function r() {
                    this.constructor = e
                }
                r.prototype = t.prototype,
                e.prototype = new r,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).dtdElement(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n = {}.hasOwnProperty;
        t = i(2),
        e.exports = function(e) {
            function t(e, i, n) {
                if (t.__super__.constructor.call(this, e),
                null == i)
                    throw new Error("Missing notation name");
                if (!n.pubID && !n.sysID)
                    throw new Error("Public or system identifiers are required for an external entity");
                this.name = this.stringify.eleName(i),
                null != n.pubID && (this.pubID = this.stringify.dtdPubID(n.pubID)),
                null != n.sysID && (this.sysID = this.stringify.dtdSysID(n.sysID))
            }
            return function(e, t) {
                for (var i in t) {
                    n.call(t, i) && (e[i] = t[i])
                }
                function r() {
                    this.constructor = e
                }
                r.prototype = t.prototype,
                e.prototype = new r,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).dtdNotation(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n = {}.hasOwnProperty;
        t = i(2),
        e.exports = function(e) {
            function t(e, i) {
                if (t.__super__.constructor.call(this, e),
                null == i)
                    throw new Error("Missing raw text");
                this.value = this.stringify.raw(i)
            }
            return function(e, t) {
                for (var i in t) {
                    n.call(t, i) && (e[i] = t[i])
                }
                function r() {
                    this.constructor = e
                }
                r.prototype = t.prototype,
                e.prototype = new r,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.clone = function() {
                return Object.create(this)
            }
            ,
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).raw(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n = {}.hasOwnProperty;
        t = i(2),
        e.exports = function(e) {
            function t(e, i) {
                if (t.__super__.constructor.call(this, e),
                null == i)
                    throw new Error("Missing element text");
                this.value = this.stringify.eleText(i)
            }
            return function(e, t) {
                for (var i in t) {
                    n.call(t, i) && (e[i] = t[i])
                }
                function r() {
                    this.constructor = e
                }
                r.prototype = t.prototype,
                e.prototype = new r,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.clone = function() {
                return Object.create(this)
            }
            ,
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).text(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n = {}.hasOwnProperty;
        t = i(2),
        e.exports = function(e) {
            function t(e, i, n) {
                if (t.__super__.constructor.call(this, e),
                null == i)
                    throw new Error("Missing instruction target");
                this.target = this.stringify.insTarget(i),
                n && (this.value = this.stringify.insValue(n))
            }
            return function(e, t) {
                for (var i in t) {
                    n.call(t, i) && (e[i] = t[i])
                }
                function r() {
                    this.constructor = e
                }
                r.prototype = t.prototype,
                e.prototype = new r,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.clone = function() {
                return Object.create(this)
            }
            ,
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).processingInstruction(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    var n = i(97)
      , r = i(98)
      , s = i(99)
      , a = i(100)
      , o = i(101);
    function l(e) {
        var t = -1
          , i = null == e ? 0 : e.length;
        for (this.clear(); ++t < i; ) {
            var n = e[t];
            this.set(n[0], n[1])
        }
    }
    l.prototype.clear = n,
    l.prototype.delete = r,
    l.prototype.get = s,
    l.prototype.has = a,
    l.prototype.set = o,
    e.exports = l
}
, function(e, t, i) {
    var n = i(11);
    e.exports = function(e, t) {
        for (var i = e.length; i--; ) {
            if (n(e[i][0], t))
                return i
        }
        return -1
    }
}
, function(e, t, i) {
    var n = i(7)(Object, "create");
    e.exports = n
}
, function(e, t, i) {
    var n = i(121);
    e.exports = function(e, t) {
        var i = e.__data__;
        return n(t) ? i["string" == typeof t ? "string" : "hash"] : i.map
    }
}
, function(e) {
    var i = Array.isArray;
    e.exports = i
}
, function(e, t, i) {
    var n = i(38)
      , r = i(66);
    e.exports = function(e) {
        return null != e && r(e.length) && !n(e)
    }
}
, function(e, t, i) {
    "use strict";
    !function e() {
        if ("undefined" != typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ && "function" == typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE) {
            try {
                __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)
            } catch (e) {
                console.error(e)
            }
        }
    }(),
    e.exports = i(157)
}
, function(e, t, i) {
    "use strict";
    i.d(t, "a", function() {
        return Oe
    }),
    i.d(t, "b", function() {
        return Me
    }),
    i.d(t, "c", function() {
        return De
    });
    var n = i(4)
      , r = function(e) {
        function t() {
            e.call(this),
            this._listeners = {}
        }
        return e && (t.__proto__ = e),
        t.prototype = Object.create(e && e.prototype),
        t.prototype.constructor = t,
        t.prototype.addEventListener = function(e, t) {
            this._listeners[e] ? this._listeners[e].indexOf(t) < 0 && this._listeners[e].push(t) : this._listeners[e] = [t]
        }
        ,
        t.prototype.removeEventListener = function(e, t) {
            if (this._listeners[e] && this._listeners[e].indexOf(t) >= 0)
                if (1 === this._listeners[e].length)
                    delete this._listeners[e];
                else {
                    var i = this._listeners[e].indexOf(t);
                    this._listeners[e].splice(i, 1)
                }
        }
        ,
        t.prototype.removeAllEventListeners = function() {
            this._listeners = {}
        }
        ,
        t.prototype.dispatchEvent = function(e) {
            var t = e.type;
            if (this._listeners[t])
                for (var i = 0, n = this._listeners[t]; i < n.length; i += 1) {
                    var r = n[i];
                    r.handleEvent ? r.handleEvent.call(r, e) : r.call(this, e)
                }
        }
        ,
        t
    }(i.n(n).a)
      , s = "video"
      , a = "audio"
      , o = "init"
      , l = {
        LOW: "low",
        MEDIUM: "medium",
        HIGH: "high",
        HD: "hd",
        AUTO: "auto"
    }
      , h = "fragment_missing"
      , p = "live"
      , _ = "vod"
      , f = "skip"
      , g = "fail"
      , m = "retry"
      , y = "next"
      , v = 8e3
      , E = 1e4
      , C = {
        WIFI: "wifi",
        FOUR_G: "4g",
        THREE_G: "3g",
        TWO_G: "2g",
        WIMAX: "wimax",
        UNKNOWN: "unknown"
    }
      , I = {
        wifi: 2e6,
        "4g": 3200,
        "3g": 3200,
        "2g": 3200,
        wimax: 3200
    }
      , R = {
        Player: {
            QOS_FRAGMENT: "qosfragment",
            BUFFERING_START: "bufferingstart",
            BUFFERING_END: "bufferingend",
            SEEKING_START: "seekingstart",
            SEEKING_END: "seekingend",
            DROPPED_FRAME: "droppedframe",
            FRAGMENT_UPDATE: "fragmentupdate",
            DOWNLOAD_CHANGE: "downloadchange",
            TRICKPLAY_START: "trickplaystart",
            TRICKPLAY_END: "trickplayend"
        },
        Plugin: {
            QUALITY_CHANGE: "qualitychange",
            DOWNLOAD_CHANGE: "downloadchange"
        }
    }
      , O = {
        ONE_SEC: 1e3,
        FIVE_SEC: 5e3,
        ONE_MIN: 6e4,
        FIVE_MIN: 3e5,
        TEN_MIN: 6e5,
        ONE_HOUR: 36e5,
        ONE_DAY: 864e5,
        INF: 1 / 0
    }
      , N = {
        DEFAULT_VERSION: "0.0.0",
        DEFAULT_GROUP_ID: -1,
        DEFAULT_CONTENT_BUNDLE_TYPE: _,
        DEFAULT_CDN_ORDER: []
    }
      , U = 0
      , B = "Hulu Chromecast"
      , F = "Hulu Web"
      , V = function(e) {
        this._corePlayback = e,
        this._pairedPlaybackEvents = {},
        this._unpairedPlaybackEvents = {},
        this.initializePariedBufferingEvent(),
        this.initializePariedSeekingEvent()
    }
      , H = {
        unpairedPlaybackEvents: {
            configurable: !0
        },
        pairedPlaybackEvents: {
            configurable: !0
        }
    };
    V.prototype.onEvent = function(e) {
        var t, i = e.type;
        if (e.audioBufferLength = this._corePlayback.getBufferedLengthInMilliseconds(a),
        e.videoBufferLength = this._corePlayback.getBufferedLengthInMilliseconds(s),
        e.contentPosition = this._corePlayback.getPlayPosInMilliseconds(),
        [R.Player.BUFFERING_START, R.Player.SEEKING_START].indexOf(i) >= 0)
            this._unpairedPlaybackEvents[i] = e;
        else if ([R.Player.BUFFERING_END, R.Player.SEEKING_END].indexOf(i) >= 0) {
            var n = (t = {},
            t[R.Player.BUFFERING_END] = R.Player.BUFFERING_START,
            t[R.Player.SEEKING_END] = R.Player.SEEKING_START,
            t)[i];
            if (!this._unpairedPlaybackEvents[n])
                return;
            this._pairedPlaybackEvents[n].push(this._unpairedPlaybackEvents[n]),
            this._pairedPlaybackEvents[i].push(e),
            delete this._unpairedPlaybackEvents[n]
        }
    }
    ,
    H.unpairedPlaybackEvents.get = function() {
        return this._unpairedPlaybackEvents
    }
    ,
    H.pairedPlaybackEvents.get = function() {
        return this._pairedPlaybackEvents
    }
    ,
    V.prototype.prepareAbrState = function(e, t, i, n) {
        if (!i || !e.getDecidedCdn().id)
            return "{}";
        var r = i.dataType
          , s = e.getDecidedCdn().id
          , a = this._corePlayback.getBufferedLengthInMilliseconds(r)
          , o = this._corePlayback.getTimestampInMilliseconds()
          , l = e.getDecidedRep(r)
          , d = e.getAvailableReps(s, r) || []
          , u = d.findIndex(function(e) {
            return e.representationId == l.representationId
        })
          , c = d.findIndex(function(e) {
            return e.representationId == i.representationId
        })
          , h = -1 != u && Math.abs(u - c) > 1;
        return {
            average_bandwidth: n,
            download_bandwidth: t.lastObservedBandwidth / 1024,
            rtt: t.estimateRoundTripTime,
            current_buffer_length: a,
            drastic_bitrate_changed: h,
            profile_bitrate: i && i.profile || 0,
            bitrate: Math.round(i && i.bandwidth / 1024 || 0),
            current_time: o,
            buffer_para: this.getAndCleanRebufferInfo(),
            seek_para: this.getAndCleanSeekInfo(),
            plugin_metrics: {}
        }
    }
    ,
    V.prototype.getAndCleanRebufferInfo = function() {
        if (!this._pairedPlaybackEvents.hasOwnProperty(R.Player.BUFFERING_START) || 0 == this._pairedPlaybackEvents[R.Player.BUFFERING_START].length)
            return {};
        var e = {
            content_position: this.getFieldList(this._pairedPlaybackEvents[R.Player.BUFFERING_START], function(e) {
                return Math.round(1e3 * e.contentPosition || 0)
            }),
            buffering_start_length_audio: this.getFieldList(this._pairedPlaybackEvents[R.Player.BUFFERING_START], function(e) {
                return e.audioBufferLength
            }),
            buffering_start_length_video: this.getFieldList(this._pairedPlaybackEvents[R.Player.BUFFERING_START], function(e) {
                return e.videoBufferLength
            }),
            buffering_start_time: this.getFieldList(this._pairedPlaybackEvents[R.Player.BUFFERING_START], function(e) {
                return e.timestampInMilliseconds
            }),
            buffering_end_length_audio: this.getFieldList(this._pairedPlaybackEvents[R.Player.BUFFERING_END], function(e) {
                return e.audioBufferLength
            }),
            buffering_end_length_video: this.getFieldList(this._pairedPlaybackEvents[R.Player.BUFFERING_END], function(e) {
                return e.videoBufferLength
            }),
            buffering_end_time: this.getFieldList(this._pairedPlaybackEvents[R.Player.BUFFERING_END], function(e) {
                return e.timestampInMilliseconds
            }),
            buffering_type: this.getFieldList(this._pairedPlaybackEvents[R.Player.BUFFERING_START], function(e) {
                return e.bufferingType
            })
        };
        return this.initializePariedBufferingEvent(),
        e
    }
    ,
    V.prototype.getFieldList = function(e, t) {
        return (e || []).map(function(e) {
            return t(e)
        })
    }
    ,
    V.prototype.getAndCleanSeekInfo = function() {
        if (!this._pairedPlaybackEvents.hasOwnProperty(R.Player.SEEKING_START) || 0 == this._pairedPlaybackEvents[R.Player.SEEKING_START].length)
            return {};
        var e = {
            content_position: this.getFieldList(this._pairedPlaybackEvents[R.Player.SEEKING_START], function(e) {
                return e.contentPosition
            }),
            seek_time: this.getFieldList(this._pairedPlaybackEvents[R.Player.SEEKING_START], function(e) {
                return e.timestampInMilliseconds
            }),
            seek_start_bufflength: this.getFieldList(this._pairedPlaybackEvents[R.Player.SEEKING_START], function(e) {
                return e.videoBufferLength
            }),
            seek_end_bufflength: this.getFieldList(this._pairedPlaybackEvents[R.Player.SEEKING_END], function(e) {
                return e.videoBufferLength
            })
        };
        return this.initializePariedSeekingEvent(),
        e
    }
    ,
    V.prototype.initializePariedBufferingEvent = function() {
        this._pairedPlaybackEvents[R.Player.BUFFERING_START] = [],
        this._pairedPlaybackEvents[R.Player.BUFFERING_END] = []
    }
    ,
    V.prototype.initializePariedSeekingEvent = function() {
        this._pairedPlaybackEvents[R.Player.SEEKING_START] = [],
        this._pairedPlaybackEvents[R.Player.SEEKING_END] = []
    }
    ,
    Object.defineProperties(V.prototype, H);
    var j = function(e, t) {
        this._corePlayback = e,
        this.setConfig(t)
    };
    j.prototype.setConfig = function(e) {
        this._pluginConfiguration = e
    }
    ,
    j.prototype.updateDownloadProgress = function() {
        return {}
    }
    ;
    var W = function(e, t, i) {
        this._corePlayback = e,
        this._sessionModel = t,
        this._pluginConfiguration = i || {},
        this._RTTCoefficient = 4
    };
    function G(e, t) {
        for (var i = e, n = 0; n < t.length; n++) {
            if (!i || !i.hasOwnProperty(t[n]))
                return null;
            i = i[t[n]]
        }
        return i
    }
    function K(e) {
        return null === e || 0 === Object.keys(e).length
    }
    W.prototype.selectAlgorithmQuality = function(e, t) {
        for (var i = t.estimateBandwidth, n = t.estimateRoundTripTime, r = e[0], s = null, a = (this._RTTCoefficient - n) / this._RTTCoefficient * i, o = 0, l = e; o < l.length; o += 1) {
            var d = l[o];
            if (!(d.safeBandwidth <= a))
                break;
            r = d
        }
        return r && (s = "it is the maximum one with the profile: " + r.profile + " bitrate: " + r.bandwidth + " safeBandwidth: " + (r.safeBandwidth / 1024).toFixed(0) + " that is small than the estimated bandwidth: " + (i / 1024).toFixed(0)),
        {
            candidate: r,
            reason: s
        }
    }
    ;
    var z = function(e, t, i) {
        var n, r;
        this._pluginConfiguration = i || {},
        this._corePlayback = e,
        this._sessionModel = t,
        this._continuousErrorCount = ((n = {})[s] = 0,
        n[a] = 0,
        n),
        this._continuousErrorStartTimestamp = ((r = {})[s] = null,
        r[a] = null,
        r)
    };
    z.prototype.selectDownloadSuccessAction = function(e) {
        var t = e.dataType;
        return this._continuousErrorCount[t] = 0,
        this._continuousErrorStartTimestamp[t] = null,
        {
            nextAction: y,
            reason: "Download next segment"
        }
    }
    ,
    z.prototype.selectDownloadFailureAction = function(e, t, i) {
        var n = e.cdn
          , r = e.representationId
          , s = e.dataType;
        if (this._continuousErrorStartTimestamp[s] || (this._continuousErrorStartTimestamp[s] = Date.now()),
        this._continuousErrorCount[s] += 1,
        n != i || r != t.representationId || this._sessionModel.inLowestVideoRep() && 0 === e.retryNumber)
            return {
                nextAction: m,
                reason: "download failure, retry on other CDN or profile"
            };
        if (this._corePlayback.isLive() && this._corePlayback.isLastSegment(s))
            return {
                nextAction: m,
                waitTimeInMillisecond: 1e3,
                reason: "last segment in live, keep retry"
            };
        var a = Date.now() - this._continuousErrorStartTimestamp[s];
        return this._corePlayback.isLive() || this._continuousErrorCount[s] < 8 && a < 10 ? {
            nextAction: f,
            reason: "Skip to download next segment"
        } : {
            nextAction: g,
            reason: "Continuous skip exceeds the threshold"
        }
    }
    ;
    var q = function(e, t, i) {
        var n;
        this._pluginConfiguration = i || {},
        this._corePlayback = e,
        this._sessionModel = t,
        this._continousSkipCount = ((n = {})[s] = 0,
        n[a] = 0,
        n)
    };
    q.prototype.selectDownloadSuccessAction = function(e) {
        return this._continousSkipCount[e.dataType] = 0,
        {
            nextAction: y,
            reason: "Download next segment"
        }
    }
    ,
    q.prototype.selectDownloadFailureAction = function(e) {
        return e.failureType === h ? {
            nextAction: f,
            reason: "fragment missing, skip"
        } : e.fragmentType === o ? this._sessionModel.inLowestVideoRep() ? e.retryNumber >= 6 ? {
            nextAction: g,
            reason: "Fail to download init segment in all cdn"
        } : {
            nextAction: m,
            reason: "Fail to download init segment lowest profile, retry 1 more time in current cdn"
        } : this._selectActionInTraversal(e) : this._sessionModel.inLowestVideoRep() ? e.retryNumber >= 1 ? this._decideFinalActionBeforeFail(e) : {
            nextAction: m,
            reason: "Fail to download media segment, retry lowest profile again"
        } : {
            nextAction: m,
            reason: "Fail to download media segment, retry another profile"
        }
    }
    ,
    q.prototype._selectActionInTraversal = function(e) {
        for (var t = this._sessionModel.getDecidedCdn().id, i = e.dataType, n = 0, r = this._sessionModel.getAvailableReps(t, i); n < r.length; n += 1) {
            if (r[n].initLoadStatus === U)
                return {
                    nextAction: m,
                    reason: "Retry other init segment"
                }
        }
        return {
            nextAction: g,
            reason: "All init segment download failed"
        }
    }
    ,
    q.prototype._decideFinalActionBeforeFail = function(e) {
        var t = e.dataType;
        return this._continousSkipCount[t] < 3 ? (this._continousSkipCount[t] += 1,
        {
            nextAction: f,
            reason: "Skip to download next segment"
        }) : this._corePlayback.getCorePlaybackBufferingState() === "not_buffering" ? {
            nextAction: m,
            reason: "playing, will retry before fail"
        } : {
            nextAction: g,
            reason: "continous skip exceeds threshold and rebuffering"
        }
    }
    ;
    var Y = function(e) {
        this._candidate = e.candidate,
        this._reason = e.reason || "",
        this._nextAction = e.nextAction || "",
        this._dataType = e.dataType || "",
        this._connectTimeoutInMillisecond = e.connectTimeoutInMillisecond || v,
        this._timeoutInMillisecond = e.timeoutInMillisecond || E,
        this._waitTimeInMillisecond = e.waitTimeInMillisecond || 0
    }
      , Q = {
        candidate: {
            configurable: !0
        },
        reason: {
            configurable: !0
        },
        nextAction: {
            configurable: !0
        },
        dataType: {
            configurable: !0
        },
        connectTimeoutInMillisecond: {
            configurable: !0
        },
        timeoutInMillisecond: {
            configurable: !0
        },
        waitTimeInMillisecond: {
            configurable: !0
        }
    };
    Q.candidate.get = function() {
        return this._candidate
    }
    ,
    Q.candidate.set = function(e) {
        this._candidate = e
    }
    ,
    Q.reason.get = function() {
        return this._reason
    }
    ,
    Q.reason.set = function(e) {
        this._reason = e
    }
    ,
    Q.nextAction.get = function() {
        return this._nextAction
    }
    ,
    Q.nextAction.set = function(e) {
        this._nextAction = e
    }
    ,
    Q.dataType.get = function() {
        return this._dataType
    }
    ,
    Q.dataType.set = function(e) {
        this._dataType = e
    }
    ,
    Q.connectTimeoutInMillisecond.get = function() {
        return this._connectTimeoutInMillisecond
    }
    ,
    Q.connectTimeoutInMillisecond.set = function(e) {
        this._connectTimeoutInMillisecond = e
    }
    ,
    Q.timeoutInMillisecond.get = function() {
        return this._timeoutInMillisecond
    }
    ,
    Q.timeoutInMillisecond.set = function(e) {
        this._timeoutInMillisecond = e
    }
    ,
    Q.waitTimeInMillisecond.set = function(e) {
        this._waitTimeInMillisecond = e
    }
    ,
    Q.waitTimeInMillisecond.get = function() {
        return this._waitTimeInMillisecond
    }
    ,
    Object.defineProperties(Y.prototype, Q);
    var $ = function(e, t, i) {
        this._pluginConfiguration = i || {},
        this._corePlayback = e,
        this._sessionModel = t,
        this._initQuality = this._pluginConfiguration.initQuality || 650,
        this._actionRule = null,
        this._qualityRules = [],
        this.setConfig(i)
    };
    $.prototype.setConfig = function(e) {
        if (!K(e)) {
            this._pluginConfiguration = e,
            this._initQuality = this._pluginConfiguration.initQuality || 650,
            this._actionRule = null,
            this._qualityRules = [],
            "player_error_handling" === e.actionRule ? this._actionRule = new z(this._corePlayback,this._sessionModel,this._pluginConfiguration) : this._actionRule = new q(this._corePlayback,this._sessionModel,this._pluginConfiguration);
            for (var t = 0, i = e.qualitySwitchRule; t < i.length; t += 1) {
                "bandwidth_quality_rule" === i[t] && this._qualityRules.push(new W(this._corePlayback,this._sessionModel,this._pluginConfiguration))
            }
        }
    }
    ,
    $.prototype.getPlaybackDecision = function(e, t, i) {
        var n = this._sessionModel.getDecidedCdn().id
          , r = this._sessionModel.getAvailableReps(n, e)
          , s = this._getAction(i)
          , a = this._getQuality(i, t, r)
          , o = this._getTimeout(a.candidate)
          , l = new Y({
            dataType: e,
            candidate: a.candidate,
            connectTimeoutInMillisecond: o.connectTimeoutInMillisecond,
            timeoutInMillisecond: o.timeoutInMillisecond,
            nextAction: s.nextAction,
            reason: a.reason + "||" + s.reason
        });
        return this._sessionModel.setDecidedRep(a.candidate),
        l
    }
    ,
    $.prototype.getDownloadFailureQuality = function(e, t, i) {
        var n = this._sessionModel.getDecidedCdn().id
          , r = this._sessionModel.getAvailableReps(n, e)
          , s = null
          , a = null;
        if ("player_error_handling" === this._pluginConfiguration.actionRule) {
            a = this._getQuality(i, t, r);
            var o = this._sessionModel.getDecidedCdn().id;
            s = this._getAction(i, a.candidate, o)
        } else
            switch ((s = this._getAction(i)).nextAction) {
            case m:
                a = !K(this._sessionModel.getDecidedRep(e)) && this._sessionModel.getDecidedRep(e).isLowestProfile ? this._selectSameQuality(e) : this._getQuality(i, t, r);
                break;
            case f:
                a = this._getQuality(i, t, r);
                break;
            case g:
                a = this._selectSameQuality(e);
                break;
            default:
                a = this._selectSameQuality(e);
            }
        var l = this._getTimeout(a.candidate)
          , d = new Y({
            dataType: e,
            candidate: a.candidate,
            connectTimeoutInMillisecond: l.connectTimeoutInMillisecond,
            timeoutInMillisecond: l.timeoutInMillisecond,
            waitTimeInMillisecond: s.waitTimeInMillisecond || 0,
            nextAction: s.nextAction,
            reason: a.reason + "||" + s.reason
        });
        return this._sessionModel.setDecidedRep(d.candidate),
        d
    }
    ,
    $.prototype._getAction = function(e, t, i) {
        return K(e) ? {
            nextAction: y,
            reason: "select the first action",
            waitTimeInMillisecond: 0
        } : e.successful ? this._actionRule.selectDownloadSuccessAction(e) : "player_error_handling" === this._pluginConfiguration.actionRule ? this._actionRule.selectDownloadFailureAction(e, t, i) : this._actionRule.selectDownloadFailureAction(e)
    }
    ,
    $.prototype._getQuality = function(e, t, i) {
        var n = null;
        if (0 === t.estimateBandwidth)
            n = this._selectDefaultQuality(i);
        else
            for (var r = 0; r < this._qualityRules.length; r++) {
                var s = this._qualityRules[r].selectAlgorithmQuality(i, t);
                n = this._getBestResult(n, s)
            }
        return n
    }
    ,
    $.prototype._getTimeout = function(e) {
        return {
            connectTimeoutInMillisecond: v,
            timeoutInMillisecond: e.isLowestProfile ? 12e3 : E
        }
    }
    ,
    $.prototype._getBestResult = function(e, t) {
        return t && t.candidate && (!e || e.candidate.bandwidth > t.candidate.bandwidth) && (e = t),
        e
    }
    ,
    $.prototype._selectDefaultQuality = function(e) {
        for (var t = e[0], i = Math.abs(t.profile - this._initQuality), n = 0, r = e; n < r.length; n += 1) {
            var s = r[n]
              , a = Math.abs(s.profile - this._initQuality);
            a < i && (i = a,
            t = s)
        }
        return {
            candidate: t,
            reason: "it is the profile closest to default init profile " + this._initQuality
        }
    }
    ,
    $.prototype._selectSameQuality = function(e) {
        return {
            candidate: this._sessionModel.getDecidedRep(e),
            reason: "the same quality is selected"
        }
    }
    ,
    $.prototype._selectQualityDownByRatio = function(e) {
        for (var t = this._sessionModel.getDecidedRep(s), i = this._sessionModel.getAvailableReps(this._sessionModel.getDecidedCdn().id, s), n = i[0], r = 0, a = i; r < a.length; r += 1) {
            var o = a[r];
            if (!(o.bandwidth < t.bandwidth * e))
                break;
            n = o
        }
        return n
    }
    ;
    var X = {
        DEBUG: 0,
        LOG: 1,
        INFO: 2,
        WARN: 3,
        ERROR: 4,
        NEVER: 5
    }
      , J = function(e) {
        this._logLevel = e,
        this._browser = this._getBrowser()
    }
      , Z = {
        LEVEL: {
            configurable: !0
        }
    };
    J.prototype.setLevel = function(e) {
        this._logLevel = e
    }
    ,
    J.prototype.debug = function() {
        for (var e = [], t = arguments.length; t--; ) {
            e[t] = arguments[t]
        }
        var i = this._stylish(e, "[DEBUG]");
        this._log(X.DEBUG, "debug", i)
    }
    ,
    J.prototype.log = function() {
        for (var e = [], t = arguments.length; t--; ) {
            e[t] = arguments[t]
        }
        var i = this._stylish(e, "[LOG]");
        this._log(X.LOG, "log", i)
    }
    ,
    J.prototype.info = function() {
        for (var e = [], t = arguments.length; t--; ) {
            e[t] = arguments[t]
        }
        var i = this._stylish(e, "[INFO]");
        this._log(X.INFO, "info", i)
    }
    ,
    J.prototype.warn = function() {
        for (var e = [], t = arguments.length; t--; ) {
            e[t] = arguments[t]
        }
        var i = this._stylish(e, "[WARN]");
        this._log(X.WARN, "warn", i)
    }
    ,
    J.prototype.error = function() {
        for (var e = [], t = arguments.length; t--; ) {
            e[t] = arguments[t]
        }
        var i = this._stylish(e, "[ERROR]");
        this._log(X.ERROR, "error", i)
    }
    ,
    J.prototype._log = function(e, t, i) {
        var n;
        e < this._logLevel || window.console && window.console[t] && window.console[t].apply && ("Safari" != this._browser ? (n = window.console)[t].apply(n, i) : i.every(function(e) {
            return "object" != typeof e
        }) ? window.console[t](i.join(" ")) : window.console[t](i))
    }
    ,
    J.prototype._getBrowser = function() {
        var e = window.navigator.userAgent;
        return e.includes("Edge") ? "Edge" : e.includes("Chrome") ? "Chrome" : e.includes("Safari") ? "Safari" : e.includes("Firefox") ? "Firefox" : e.includes("Trident") ? "IE" : "Other"
    }
    ,
    Z.LEVEL.get = function() {
        return X
    }
    ,
    J.prototype._stylish = function(e, t) {
        var i = e.length;
        if (0 !== i) {
            var n = e[i - 1];
            if ("string" == typeof n && (n.indexOf("color") > -1 || n.indexOf("background") > -1)) {
                for (var r = "%c%s ", s = ["color: black, background: white", t], a = 0; a < i - 1; a++) {
                    "object" != typeof e[a] ? (r += "%c%s ",
                    s.push(n),
                    s.push(e[a])) : (r += "%o ",
                    s.push(e[a]))
                }
                return [r].concat(s)
            }
            return [t].concat(e)
        }
    }
    ,
    Object.defineProperties(J.prototype, Z);
    var ee = new J(X.NEVER)
      , te = function(e, t) {
        t = t || {},
        this._pluginConfiguration = e || {},
        this._periodId = t.periodId,
        this._startTimestamp = t.startTimestamp,
        this._periodType = t.periodType,
        this._currentAdaptationSet = {},
        this._allReps = t.allReps,
        this._availableReps = {},
        this._allCdnInfos = t.allCdns,
        this._availableCdnInfos = [],
        this._cdnFromReps = {},
        this._decidedRep = {},
        this._decidedCdn = null,
        this._latestSucRep = {},
        this._latestSucCdn = null,
        this._inLowestVideoRep = !1,
        this._init()
    }
      , ie = {
        decidedRep: {
            configurable: !0
        },
        latestSucRep: {
            configurable: !0
        },
        decidedCdn: {
            configurable: !0
        },
        latestSucCdn: {
            configurable: !0
        },
        inLowestVideoRep: {
            configurable: !0
        },
        allReps: {
            configurable: !0
        },
        allCdnIds: {
            configurable: !0
        },
        allCdns: {
            configurable: !0
        },
        periodId: {
            configurable: !0
        },
        periodType: {
            configurable: !0
        },
        startTimestamp: {
            configurable: !0
        },
        cdnFromReps: {
            configurable: !0
        }
    };
    te.prototype.setCurrentAdaptationSet = function(e, t) {
        this._currentAdaptationSet[e] = t,
        this._updateAvailableReps()
    }
    ,
    te.prototype.markRepAvailability = function(e, t) {
        if (this._allReps[e.dataType] && this._allReps[e.dataType][e.cdn]) {
            var i = this._allReps[e.dataType][e.cdn].filter(function(t) {
                return t.representationId === e.representationId
            })[0];
            i && (i.availability = t)
        }
        this._updateAvailableReps()
    }
    ,
    te.prototype.markCdnAvailability = function(e, t, i) {
        var n, r = this._allCdnInfos.filter(function(t) {
            return t.id === e.id
        })[0];
        r && (r.availability = t,
        r.availabilityExpirationTime = Date.now() + i,
        t && (r.continuousFailureCount = ((n = {})[s] = 0,
        n[a] = 0,
        n))),
        this._updateAvailableCdns()
    }
    ,
    te.prototype.getAvailableReps = function(e, t) {
        var i = this
          , n = [];
        return e ? this._availableReps[t] && this._availableReps[t][e] ? this._availableReps[t][e] : (ee.error("Unexisting cdnId: ", e, " or dataType: ", t),
        n) : (this._availableCdnInfos.forEach(function(e) {
            n = n.concat(i._availableReps[t][e.id])
        }),
        n)
    }
    ,
    te.prototype.getAvailableCdnIds = function() {
        return (this._availableCdnInfos || []).map(function(e) {
            return e.id
        })
    }
    ,
    te.prototype.getAvailableCdns = function() {
        return this._availableCdnInfos
    }
    ,
    ie.decidedRep.set = function(e) {
        this._decidedRep[e.dataType] = e
    }
    ,
    ie.decidedRep.get = function() {
        return this._decidedRep
    }
    ,
    te.prototype.setLatestSucRep = function(e, t, i) {
        if (!this._latestSucRep[e] || this._latestSucRep[e].cdn !== t || this._latestSucRep[e].representationId !== i) {
            var n = this.findRepresentation(t, e, i);
            n ? this._latestSucRep[e] = n : ee.error("Unexisting rep found in setLatestSucRep: ", e, t, i)
        }
    }
    ,
    ie.latestSucRep.get = function() {
        return this._latestSucRep
    }
    ,
    ie.decidedCdn.set = function(e) {
        this._decidedCdn = e
    }
    ,
    ie.decidedCdn.get = function() {
        return this._decidedCdn
    }
    ,
    te.prototype.setLatestSucCdn = function(e, t) {
        if (!this._latestSucCdn || this._latestSucCdn.id !== e) {
            var i = this.findCdn(e);
            i ? (this._latestSucCdn = i,
            this._latestSucCdn.switchTimestamp = t) : ee.error("Unexisting cdn found in setLatestSucCdn: ", e)
        }
    }
    ,
    te.prototype.setMaxAllowedBitrateInKbps = function(e, t) {
        for (var i in this._allReps[e]) {
            this._allReps[e][i].forEach(function(e) {
                e.availability = e.bandwidth <= 1e3 * t
            })
        }
        this._updateAvailableReps()
    }
    ,
    ie.latestSucCdn.get = function() {
        return this._latestSucCdn
    }
    ,
    ie.inLowestVideoRep.get = function() {
        var e = this._decidedRep[s];
        return this._inLowestVideoRep = e === this._availableReps[s][e.cdn][0],
        this._inLowestVideoRep
    }
    ,
    ie.allReps.get = function() {
        return this._allReps
    }
    ,
    ie.allCdnIds.get = function() {
        return (this._allCdnInfos || []).map(function(e) {
            return e.id
        })
    }
    ,
    ie.allCdns.get = function() {
        return this._allCdnInfos
    }
    ,
    ie.periodId.set = function(e) {
        this._periodId = e
    }
    ,
    ie.periodId.get = function() {
        return this._periodId
    }
    ,
    ie.periodType.set = function(e) {
        this._periodType = e
    }
    ,
    ie.periodType.get = function() {
        return this._periodType
    }
    ,
    ie.startTimestamp.set = function(e) {
        this._startTimestamp = e
    }
    ,
    ie.startTimestamp.get = function() {
        return this._startTimestamp
    }
    ,
    ie.cdnFromReps.get = function() {
        return this._cdnFromReps
    }
    ,
    te.prototype.findRepresentation = function(e, t, i) {
        return this._allReps[t] && this._allReps[t][e] && this._allReps[t][e].filter(function(e) {
            return e.representationId === i
        })[0] || null
    }
    ,
    te.prototype.findCdn = function(e) {
        return this._allCdnInfos.filter(function(t) {
            return t.id === e
        })[0] || null
    }
    ,
    te.prototype._init = function() {
        this._updateAvailableReps(),
        this._updateAvailableCdns(),
        this._cdnFromReps = this._updateCdnFromReps(this._allReps)
    }
    ,
    te.prototype._updateAvailableReps = function() {
        var e = this
          , t = function(_t2) {
            for (var i in e._allReps[_t2]) {
                e._availableReps[_t2] = e._availableReps[_t2] || {},
                e._currentAdaptationSet[_t2] ? e._availableReps[_t2][i] = e._allReps[_t2][i].filter(function(i) {
                    return i.availability && i.adaptationSetId === e._currentAdaptationSet[_t2]
                }) : e._availableReps[_t2][i] = e._allReps[_t2][i].filter(function(e) {
                    return e.availability
                })
            }
        };
        for (var i in e._allReps) {
            t(i)
        }
    }
    ,
    te.prototype._updateAvailableCdns = function() {
        var e = this
          , t = Date.now();
        this._allCdnInfos.forEach(function(i) {
            !i.availability && t > i.availabilityExpirationTime && e.markCdnAvailability(i, !0, O.INF)
        }),
        this._availableCdnInfos = this._allCdnInfos.filter(function(e) {
            return e.availability
        })
    }
    ,
    te.prototype._updateCdnFromReps = function(e) {
        var t = {};
        for (var i in e) {
            for (var n in t[i] = [],
            e[i]) {
                t[i].indexOf(n) < 0 && t[i].push(n)
            }
        }
        return t
    }
    ,
    Object.defineProperties(te.prototype, ie);
    var ne = function(e, t) {
        e = e || {},
        this._representationId = e.representationId || "",
        this._adaptationSetId = e.adaptationSetId || "",
        this._dataType = e.dataType || "",
        this._bandwidth = e.bandwidth || 0,
        this._profile = e.profile || 0,
        this._cdn = e.cdn || "",
        this._language = e.language || "",
        this._width = e.width || 0,
        this._height = e.height || 0,
        this._sampleRate = e.sampleRate || 0,
        this._availability = e.availability || !0,
        this._isLowestProfile = e.isLowestProfile || !1,
        this._frameRate = this._getRoundFrameRate(e.frameRate) || 0,
        this._qualityType = this._getQualityType(this._height),
        this._safeFactor = this._getSafeFactor(this._qualityType, t.safeFactor),
        this._safeBandwidth = this._bandwidth * this._safeFactor,
        this._initLoadStatus = U
    }
      , re = {
        representationId: {
            configurable: !0
        },
        adaptationSetId: {
            configurable: !0
        },
        dataType: {
            configurable: !0
        },
        bandwidth: {
            configurable: !0
        },
        profile: {
            configurable: !0
        },
        cdn: {
            configurable: !0
        },
        language: {
            configurable: !0
        },
        width: {
            configurable: !0
        },
        height: {
            configurable: !0
        },
        sampleRate: {
            configurable: !0
        },
        frameRate: {
            configurable: !0
        },
        qualityType: {
            configurable: !0
        },
        availability: {
            configurable: !0
        },
        isLowestProfile: {
            configurable: !0
        },
        safeFactor: {
            configurable: !0
        },
        initLoadStatus: {
            configurable: !0
        },
        safeBandwidth: {
            configurable: !0
        }
    };
    re.representationId.get = function() {
        return this._representationId
    }
    ,
    re.adaptationSetId.get = function() {
        return this._adaptationSetId
    }
    ,
    re.dataType.get = function() {
        return this._dataType
    }
    ,
    re.bandwidth.get = function() {
        return this._bandwidth
    }
    ,
    re.profile.get = function() {
        return this._profile
    }
    ,
    re.cdn.get = function() {
        return this._cdn
    }
    ,
    re.language.get = function() {
        return this._language
    }
    ,
    re.width.get = function() {
        return this._width
    }
    ,
    re.height.get = function() {
        return this._height
    }
    ,
    re.sampleRate.get = function() {
        return this._sampleRate
    }
    ,
    re.frameRate.get = function() {
        return this._frameRate
    }
    ,
    re.qualityType.get = function() {
        return this._qualityType
    }
    ,
    re.availability.get = function() {
        return this._availability
    }
    ,
    re.availability.set = function(e) {
        this._availability = e
    }
    ,
    re.isLowestProfile.get = function() {
        return this._isLowestProfile
    }
    ,
    re.isLowestProfile.set = function(e) {
        this._isLowestProfile = e
    }
    ,
    re.safeFactor.get = function() {
        return this._safeFactor
    }
    ,
    re.initLoadStatus.set = function(e) {
        this._initLoadStatus = e
    }
    ,
    re.initLoadStatus.get = function() {
        return this._initLoadStatus
    }
    ,
    re.safeBandwidth.get = function() {
        return this._safeBandwidth
    }
    ,
    ne.prototype._getQualityType = function(e) {
        return e >= 600 ? l.HD : e >= 390 ? l.HIGH : e >= 300 ? l.MEDIUM : l.LOW
    }
    ,
    ne.prototype._getRoundFrameRate = function(e) {
        return e && "string" == typeof e && e.indexOf("/") > -1 ? Math.round(e.split("/")[0] / (e.split("/")[1] || 1)) : e ? Number(e) : e
    }
    ,
    ne.prototype._getSafeFactor = function(e, t) {
        for (var i = 0, n = 0, r = Object.keys(l); n < r.length; n += 1) {
            var s = r[n];
            if (e == l[s])
                break;
            i += 1
        }
        return t[i]
    }
    ,
    Object.defineProperties(ne.prototype, re);
    var se = function(e) {
        var t;
        e = e || {},
        this._id = e.id || "",
        this._availability = e.availability || !1,
        this._switchTimestamp = e.switchTimestamp || 0,
        this._availabilityExpirationTime = e._availabilityExpirationTime || O.INF,
        this._continuousFailureCount = ((t = {})[s] = 0,
        t[a] = 0,
        t)
    }
      , ae = {
        id: {
            configurable: !0
        },
        switchTimestamp: {
            configurable: !0
        },
        availabilityExpirationTime: {
            configurable: !0
        },
        availability: {
            configurable: !0
        },
        continuousFailureCount: {
            configurable: !0
        }
    };
    ae.id.set = function(e) {
        this._id = e
    }
    ,
    ae.id.get = function() {
        return this._id
    }
    ,
    ae.switchTimestamp.set = function(e) {
        this._switchTimestamp = e
    }
    ,
    ae.switchTimestamp.get = function() {
        return this._switchTimestamp
    }
    ,
    ae.availabilityExpirationTime.set = function(e) {
        this._availabilityExpirationTime = e
    }
    ,
    ae.availabilityExpirationTime.get = function() {
        return this._availabilityExpirationTime
    }
    ,
    ae.availability.set = function(e) {
        this._availability = e
    }
    ,
    ae.availability.get = function() {
        return this._availability
    }
    ,
    ae.continuousFailureCount.set = function(e) {
        this._continuousFailureCount = e
    }
    ,
    ae.continuousFailureCount.get = function() {
        return this._continuousFailureCount
    }
    ,
    Object.defineProperties(se.prototype, ae);
    var oe = function(e) {
        var t;
        this._pluginConfiguration = e || {},
        this._contentBundleType = "",
        this._maxAllowedBitrateInKbps = ((t = {})[s] = 1 / 0,
        t[a] = 1 / 0,
        t),
        this._periods = {},
        this._currentPeriod = null,
        this._networkMode = C.UNKNOWN,
        this.setConfig(e)
    }
      , le = {
        contentBundleType: {
            configurable: !0
        },
        periods: {
            configurable: !0
        },
        currentPeriod: {
            configurable: !0
        },
        networkMode: {
            configurable: !0
        },
        pluginConfiguration: {
            configurable: !0
        }
    };
    oe.prototype.setConfig = function(e) {
        K(e) || (this._pluginConfiguration = e)
    }
    ,
    oe.prototype.setPeriodSession = function(e, t) {
        for (var i = {}, n = [], r = [], s = 0, a = t; s < a.length; s += 1) {
            for (var o = a[s], l = 0, d = o.cdns; l < d.length; l += 1) {
                var u = d[l]
                  , c = new ne({
                    representationId: o.representationId,
                    adaptationSetId: o.adaptationSetId,
                    dataType: o.dataType,
                    bandwidth: o.bandwidth,
                    profile: o.profile,
                    cdn: u,
                    language: o.language,
                    width: o.width,
                    height: o.height,
                    sampleRate: o.sampleRate,
                    frameRate: o.frameRate,
                    availability: o.availability
                },this._pluginConfiguration);
                i[c.dataType] = i[c.dataType] || {},
                i[c.dataType][c.cdn] = i[c.dataType][c.cdn] || [],
                c.availability && i[c.dataType][c.cdn].indexOf(c) < 0 && i[c.dataType][c.cdn].push(c),
                c.availability && n.indexOf(c.cdn) < 0 && n.push(c.cdn)
            }
        }
        for (var h in i) {
            for (var p in i[h]) {
                i[h][p].sort(function(e, t) {
                    return e.bandwidth - t.bandwidth
                }),
                i[h][p][0].isLowestProfile = !0
            }
        }
        var _ = this._pluginConfiguration.cdnOrder.filter(function(e) {
            return n.indexOf(e) >= 0
        });
        0 === _.length && (_ = n);
        for (var f = function() {
            var e = m[g]
              , t = new se({
                id: e,
                availability: !0,
                availabilityExpirationTime: O.INF
            });
            void 0 === r.find(function(e) {
                return e.id === t.id
            }) && r.push(t)
        }, g = 0, m = _; g < m.length; g += 1) {
            f()
        }
        this._closeCurrentPeriod(),
        this._initNewPeriod(e, i, r),
        this._transBetweenPeriods()
    }
    ,
    oe.prototype.setCurrentAdaptationSet = function(e, t) {
        this._currentPeriod.setCurrentAdaptationSet(e, t)
    }
    ,
    oe.prototype.setNetworkMode = function(e) {
        for (var t = 0, i = Object.keys(C); t < i.length; t += 1) {
            var n = i[t];
            if (e === C[n]) {
                this._networkMode = e;
                break
            }
        }
        this._currentPeriod && this._currentPeriod.setMaxAllowedBitrateInKbps(s, I[this._networkMode])
    }
    ,
    oe.prototype.qosFragmentUpdate = function(e) {
        var t = e.periodId
          , i = e.dataType
          , n = e.cdn
          , r = e.representationId;
        this._periods[t] && e.successful && (this._periods[t].setLatestSucRep(i, n, r),
        this._periods[t].setLatestSucCdn(n, e.downloadStartTime))
    }
    ,
    oe.prototype.getAvailableReps = function(e, t, i) {
        void 0 === i && (i = null);
        var n = i || this._currentPeriod.periodId;
        return n ? this._periods[n].getAvailableReps(e, t) : (ee.error("Unexisting periodId: ", n),
        null)
    }
    ,
    oe.prototype.getAvailableCdns = function(e) {
        void 0 === e && (e = null);
        var t = e || this._currentPeriod.periodId;
        return t ? this._periods[t].getAvailableCdns() : (ee.error("Unexisting periodId: ", t),
        null)
    }
    ,
    oe.prototype.setDecidedRep = function(e, t) {
        void 0 === t && (t = null);
        var i = t || this._currentPeriod.periodId;
        if (!i)
            return ee.error("Unexisting periodId: ", i),
            null;
        this._periods[i].decidedRep = e
    }
    ,
    oe.prototype.getDecidedRep = function(e, t) {
        void 0 === t && (t = null);
        var i = t || this._currentPeriod.periodId;
        return i ? this._periods[i].decidedRep[e] : (ee.error("Unexisting periodId: ", i),
        null)
    }
    ,
    oe.prototype.setDecidedCdn = function(e, t) {
        void 0 === t && (t = null);
        var i = t || this._currentPeriod.periodId;
        if (!i)
            return ee.error("Unexisting periodId: ", i),
            null;
        this._periods[i].decidedCdn = e
    }
    ,
    oe.prototype.getDecidedCdn = function(e) {
        void 0 === e && (e = null);
        var t = e || this._currentPeriod.periodId;
        return t ? this._periods[t].decidedCdn : (ee.error("Unexisting periodId: ", t),
        null)
    }
    ,
    oe.prototype.getLatestSucRep = function(e, t) {
        void 0 === t && (t = null);
        var i = t || this._currentPeriod.periodId;
        return i ? this._periods[i].latestSucRep[e] : (ee.error("Unexisting periodId: ", i),
        null)
    }
    ,
    oe.prototype.getLatestSucCdn = function(e) {
        void 0 === e && (e = null);
        var t = e || this._currentPeriod && this._currentPeriod.periodId;
        return t ? this._periods[t].latestSucCdn : (ee.error("Unexisting periodId: ", t),
        null)
    }
    ,
    oe.prototype.inLowestVideoRep = function(e) {
        void 0 === e && (e = null);
        var t = e || this._currentPeriod && this._currentPeriod.periodId;
        return t ? this._periods[t].inLowestVideoRep : (ee.error("Unexisting periodId: ", t),
        !1)
    }
    ,
    oe.prototype.inFirstPeriod = function() {
        return 1 == Object.keys(this._periods).length
    }
    ,
    oe.prototype.findRepresentation = function(e, t, i, n) {
        void 0 === n && (n = null);
        var r = n || this._currentPeriod && this._currentPeriod.periodId;
        return r ? this._periods[r].findRepresentation(e, t, i) : (ee.error("Unexisting periodId: ", r),
        null)
    }
    ,
    oe.prototype.findCdn = function(e, t) {
        void 0 === t && (t = null);
        var i = t || this._currentPeriod && this._currentPeriod.periodId;
        return i ? this._periods[i].findCdn(e) : (ee.error("Unexisting periodId: ", i),
        null)
    }
    ,
    oe.prototype.markCdnAvailability = function(e, t, i, n) {
        void 0 === n && (n = null);
        var r = n || this._currentPeriod.periodId;
        r ? this._periods[r].markCdnAvailability(e, t, i) : ee.error("Unexisting periodId: ", r)
    }
    ,
    oe.prototype.markRepAvailability = function(e, t, i) {
        void 0 === i && (i = null);
        var n = i || this._currentPeriod.periodId;
        n ? this._periods[n].markRepAvailability(e, t) : ee.error("Unexisting periodId: ", n)
    }
    ,
    le.contentBundleType.set = function(e) {
        this._contentBundleType = e
    }
    ,
    le.contentBundleType.get = function() {
        return this._contentBundleType
    }
    ,
    oe.prototype.setMaxAllowedBitrateInKbps = function(e, t) {
        this._maxAllowedBitrateInKbps[e] = t,
        this._currentPeriod && (this._currentPeriod.setMaxAllowedBitrateInKbps(s, this._maxAllowedBitrateInKbps[s]),
        this._currentPeriod.setMaxAllowedBitrateInKbps(a, this._maxAllowedBitrateInKbps[a]))
    }
    ,
    oe.prototype.getMaxAllowedBitrateInKbps = function(e) {
        return this._maxAllowedBitrateInKbps[e]
    }
    ,
    le.periods.get = function() {
        return this._periods
    }
    ,
    le.currentPeriod.get = function() {
        return this._currentPeriod
    }
    ,
    le.networkMode.get = function() {
        return this._networkMode
    }
    ,
    le.pluginConfiguration.get = function() {
        return this._pluginConfiguration
    }
    ,
    oe.prototype._closeCurrentPeriod = function() {}
    ,
    oe.prototype._initNewPeriod = function(e, t, i) {
        this._periods[e.periodId] = new te(this._pluginConfiguration,Object.assign({
            periodId: e.periodId,
            startTimestamp: e.startTimestamp,
            periodType: e.periodType,
            allReps: t,
            allCdns: i
        })),
        this._currentPeriod = this._periods[e.periodId],
        this._currentPeriod.setMaxAllowedBitrateInKbps(s, this._maxAllowedBitrateInKbps[s]),
        this._currentPeriod.setMaxAllowedBitrateInKbps(a, this._maxAllowedBitrateInKbps[a])
    }
    ,
    oe.prototype._transBetweenPeriods = function() {}
    ,
    oe.prototype.getCurrentCdn = function() {
        return (this.currentPeriod.decidedCdn || {}).id || ""
    }
    ,
    Object.defineProperties(oe.prototype, le);
    var de = function(e, t) {
        this._pluginConfiguration = t,
        this._sessionModel = e,
        this._continuousFailure = {},
        this._lastStatusCode = 0
    };
    de.prototype.existCdnPerformanceIssue = function(e) {
        var t = !1
          , i = null
          , n = this._sessionModel.currentPeriod.allCdns.filter(function(t) {
            return t.id === e
        })[0]._continuousFailureCount || {};
        return n[s] && n[s] >= 2 ? (t = !0,
        i = "continuous download failure on lowest video stream") : n[a] && n[a] >= 2 && (t = !0,
        i = "continuous download failure on lowest audio stream"),
        {
            isCdnInIssue: t,
            reason: i
        }
    }
    ,
    de.prototype.notifyDownloadSuccess = function(e) {
        var t = e.cdn
          , i = e.dataType;
        this._sessionModel.currentPeriod.allCdns.filter(function(e) {
            return e.id === t
        })[0].continuousFailureCount[i] = 0
    }
    ,
    de.prototype.notifyDownloadFailure = function(e) {
        var t = e.cdn
          , i = e.dataType
          , n = e.retryNumber;
        n = n || 0;
        var r = this._sessionModel.currentPeriod.allCdns.filter(function(e) {
            return e.id === t
        })[0]._continuousFailureCount || {};
        (i === s && this._sessionModel.inLowestVideoRep() || i === a) && (r[i] += n + 1)
    }
    ,
    de.prototype.notifyRebufferStart = function() {}
    ;
    var ue = function(e, t, i) {
        this._pluginConfiguration = i,
        this._networkTrackerByCdn = e,
        this._bufferTrackerByType = t,
        this._bandwidthDangerThreshold = i.bandwidthDangerThreshold,
        this._qosFragmentEvent = null
    };
    ue.prototype.existCdnPerformanceIssue = function(e) {
        var t = this._networkTrackerByCdn[e].estimateBandwidth
          , i = this._qosFragmentEvent.dataType
          , n = this._bufferTrackerByType[i]
          , r = !1
          , s = null;
        return ee.debug("adapt cdn", "BufferBandwidthRule", "dataType =", i, "estBandwidth =", t, "buffer =", n._avgBufferLength, "isDanger =", n.inDanger, "historyBuffer =", n._historyBuffer, "background: yellow; color: black"),
        t < this._bandwidthDangerThreshold && this._bufferTrackerByType[i].inDanger && (r = !0,
        s = "buffer is in danger, bandwidth is lower than the threshold"),
        {
            isCdnInIssue: r,
            reason: s
        }
    }
    ,
    ue.prototype.notifyDownloadSuccess = function(e) {
        this._qosFragmentEvent = e
    }
    ,
    ue.prototype.notifyDownloadFailure = function(e) {
        this._qosFragmentEvent = e
    }
    ;
    var ce = function(e, t, i, n) {
        this._pluginConfiguration = n,
        this._sessionModel = i,
        this._networkTrackerByCdn = e,
        this._bufferTrackerByType = t,
        this._cdnSwitchRules = [],
        this._lastStatusCode = 0,
        this.setConfig(n)
    };
    ce.prototype.setConfig = function(e) {
        K(e) || (this._pluginConfiguration = e,
        this._cdnSwitchRules = [],
        this._pluginConfiguration.cdnFallback.indexOf("aggr1") >= 0 && this._cdnSwitchRules.push(new de(this._sessionModel,e)),
        this._pluginConfiguration.cdnFallback.indexOf("aggr2") >= 0 && this._cdnSwitchRules.push(new ue(this._networkTrackerByCdn,this._bufferTrackerByType,this._pluginConfiguration)))
    }
    ,
    ce.prototype.getPlaybackCdn = function(e) {
        var t = {}
          , i = this._sessionModel.getDecidedCdn()
          , n = i
          , r = null
          , s = !1
          , a = this._sessionModel.getAvailableCdns();
        if (0 === a.length)
            t = {
                cdn: i,
                reason: "no available cdn, keep using the same cdn " + i.id
            };
        else if (this._sessionModel.inFirstPeriod() && K(e))
            t = {
                cdn: a[0],
                reason: "init selection, select default cdn " + a[0].id
            };
        else if (!this._sessionModel.inFirstPeriod() && K(e))
            t = {
                cdn: a[0],
                reason: "period switch or seeking, select default cdn " + a[0].id
            };
        else if ("disable" === this._pluginConfiguration.cdnFallback)
            t = {
                cdn: a[0],
                reason: "disable CDN switch, select default cdn " + a[0].id
            };
        else {
            var o = a.indexOf(i);
            r = "keep using the same cdn " + i.id;
            for (var l = 0, d = this._cdnSwitchRules; l < d.length; l += 1) {
                var u = d[l].existCdnPerformanceIssue(i.id);
                if (u.isCdnInIssue) {
                    s = !0,
                    r = u.reason;
                    break
                }
            }
            if (s) {
                n = this._getNextAvailableCdn(a, o),
                r = r + ", switch from " + i.id + " to " + n.id;
                var c = this._pluginConfiguration.cdnInLoop ? this._pluginConfiguration.cdnSwitchTimeout : O.INF;
                this._sessionModel.currentPeriod.markCdnAvailability(i, !1, c),
                this._sessionModel.contentBundleType !== _ || !this._sessionModel.inLowestVideoRep() || 404 !== this._lastStatusCode && 403 !== this._lastStatusCode || this._sessionModel.currentPeriod.markRepAvailability(this._sessionModel.latestSucRep, !1)
            }
            t = {
                cdn: n,
                reason: r
            },
            ee.debug("getPlaybackCdn", "availableCdns =", a, "curCdnId =", i.id, "nextCdnId =", t.cdn.id)
        }
        return this._sessionModel.setDecidedCdn(t.cdn),
        t
    }
    ,
    ce.prototype.notifyDownloadSuccess = function(e) {
        this._lastStatusCode = e.statusCode;
        for (var t = 0, i = this._cdnSwitchRules; t < i.length; t += 1) {
            i[t].notifyDownloadSuccess(e)
        }
    }
    ,
    ce.prototype.notifyDownloadFailure = function(e) {
        this._lastStatusCode = e.statusCode;
        for (var t = 0, i = this._cdnSwitchRules; t < i.length; t += 1) {
            i[t].notifyDownloadFailure(e)
        }
    }
    ,
    ce.prototype._getNextAvailableCdn = function(e, t) {
        return this._pluginConfiguration.cdnInLoop ? e[(t + 1) % e.length] : t + 1 < e.length ? e[t + 1] : e[t]
    }
    ;
    var he = function(e) {
        this._fps = e,
        this._sumDroppedFrames = 0,
        this._sumTotalFrames = 0,
        this._droppedFrames = []
    };
    he.prototype.updateDroppedFrames = function(e, t, i) {
        for (; this._droppedFrames.length >= 30; ) {
            this._sumDroppedFrames -= this._droppedFrames[0].droppedFramesCount,
            this._sumTotalFrames -= this._droppedFrames[0].totalFramesCount,
            this._droppedFrames.shift()
        }
        this._droppedFrames.push({
            timestampInMilliseconds: e,
            droppedFramesCount: t,
            totalFramesCount: i
        }),
        this._sumDroppedFrames += t,
        this._sumTotalFrames += i
    }
    ,
    he.prototype.getSmoothDroppedFrameRatio = function() {
        return this._droppedFrames.length > 0 ? 1 * this._sumDroppedFrames / (this._sumTotalFrames + 24) : 0
    }
    ,
    he.prototype.size = function() {
        return this._droppedFrames.length
    }
    ;
    var pe = function(e, t) {
        this._pluginConfiguration = e,
        this._sessionModel = t,
        this._needIgnoredFrameStartTime = 0,
        this._droppedFramesCollectionByProfile = {}
    }
      , _e = {
        needIgnoredFrameStartTime: {
            configurable: !0
        }
    };
    pe.prototype.setConfig = function(e) {
        K(e) || (this._pluginConfiguration = e)
    }
    ,
    pe.prototype.receiveDroppedFrame = function(e) {
        var t = e.totalFramesCount > 30 ? 60 : 30;
        if (this._pluginConfiguration.fpsRule && !(t < 30)) {
            this._droppedFramesCollectionByProfile[t] || (this._droppedFramesCollectionByProfile[t] = new he(t));
            var i = this._droppedFramesCollectionByProfile[t];
            e.timestampInMilliseconds - this._needIgnoredFrameStartTime > 4e3 && i.updateDroppedFrames(e.timestampInMilliseconds, e.droppedFramesCount, e.totalFramesCount);
            var n = i.getSmoothDroppedFrameRatio();
            if (t > 30 && n >= Math.max(.1, 1 / i.size()))
                for (var r = this._sessionModel.getAvailableReps(null, s), a = 0; a < r.length; a++) {
                    (r[a].frameRate || 0) >= t && 720 === r[a].height && this._sessionModel.currentPeriod.markRepAvailability(r[a], !1)
                }
        }
    }
    ,
    pe.prototype.resetIgnoreFrameInternal = function(e) {
        this._needIgnoredFrameStartTime = e
    }
    ,
    _e.needIgnoredFrameStartTime.get = function() {
        return this._needIgnoredFrameStartTime
    }
    ,
    Object.defineProperties(pe.prototype, _e);
    var fe = function() {}
      , ge = {
        lastObservedBandwidth: {
            configurable: !0
        },
        predictedBandwidth: {
            configurable: !0
        },
        predictedRoundTripTime: {
            configurable: !0
        }
    };
    fe.prototype.notifyDownloadSuccess = function() {}
    ,
    fe.prototype.notifyDownloadFailure = function() {}
    ,
    fe.prototype.resetBootstrap = function() {}
    ,
    ge.lastObservedBandwidth.get = function() {
        return 0
    }
    ,
    ge.predictedBandwidth.get = function() {
        return 0
    }
    ,
    ge.predictedRoundTripTime.get = function() {
        return 0
    }
    ,
    Object.defineProperties(fe.prototype, ge);
    var me = function() {
        this._type = ""
    }
      , ye = {
        type: {
            configurable: !0
        }
    };
    ye.type.get = function() {
        return this._type
    }
    ,
    Object.defineProperties(me.prototype, ye);
    var ve = function(e) {
        function t(t) {
            e.call(this),
            t = t || {},
            this._representationId = t.representationId || "",
            this._adaptationSetId = t.adaptationSetId || "",
            this._size = t.size || 0,
            this._url = t.url || "",
            this._presentationTime = t.presentationTime || 0,
            this._dataType = t.dataType || "",
            this._fragmentType = t.fragmentType || "",
            this._cdn = t.cdn || "",
            this._duration = t.duration || 0,
            this._index = t.index || 0,
            this._byteStart = t.byteStart || 0,
            this._byteEnd = t.byteEnd || 0,
            this._periodId = t.periodId || "",
            this._profile = t.profile || "",
            this._bandwidth = t.bandwidth || 0,
            this._successful = t.successful || !1,
            this._failureReason = t.failureReason || "",
            this._failureType = t.failureType || "",
            this._statusCode = t.statusCode || 0,
            this._downloadStartTime = t.downloadStartTime || 0,
            this._downloadTimeToFirstByte = t.downloadTimeToFirstByte || 0,
            this._downloadTotalTime = t.downloadTotalTime || 0,
            this._retryNumber = t.retryNumber || 0,
            this._abrState = t.abrState || ""
        }
        e && (t.__proto__ = e),
        t.prototype = Object.create(e && e.prototype),
        t.prototype.constructor = t;
        var i = {
            type: {
                configurable: !0
            },
            representationId: {
                configurable: !0
            },
            adaptationSetId: {
                configurable: !0
            },
            size: {
                configurable: !0
            },
            url: {
                configurable: !0
            },
            presentationTime: {
                configurable: !0
            },
            dataType: {
                configurable: !0
            },
            fragmentType: {
                configurable: !0
            },
            cdn: {
                configurable: !0
            },
            duration: {
                configurable: !0
            },
            index: {
                configurable: !0
            },
            byteStart: {
                configurable: !0
            },
            byteEnd: {
                configurable: !0
            },
            periodId: {
                configurable: !0
            },
            profile: {
                configurable: !0
            },
            bandwidth: {
                configurable: !0
            },
            successful: {
                configurable: !0
            },
            failureReason: {
                configurable: !0
            },
            failureType: {
                configurable: !0
            },
            statusCode: {
                configurable: !0
            },
            downloadStartTime: {
                configurable: !0
            },
            downloadTimeToFirstByte: {
                configurable: !0
            },
            downloadTotalTime: {
                configurable: !0
            },
            retryNumber: {
                configurable: !0
            },
            abrState: {
                configurable: !0
            }
        };
        return i.type.get = function() {
            return R.Player.QOS_FRAGMENT
        }
        ,
        i.representationId.get = function() {
            return this._representationId
        }
        ,
        i.representationId.set = function(e) {
            this._representationId = e
        }
        ,
        i.adaptationSetId.get = function() {
            return this._adaptationSetId
        }
        ,
        i.adaptationSetId.set = function(e) {
            this._adaptationSetId = e
        }
        ,
        i.size.get = function() {
            return this._size
        }
        ,
        i.size.set = function(e) {
            this._size = e
        }
        ,
        i.url.get = function() {
            return this._url
        }
        ,
        i.url.set = function(e) {
            this._url = e
        }
        ,
        i.presentationTime.get = function() {
            return this._presentationTime
        }
        ,
        i.presentationTime.set = function(e) {
            this._presentationTime = e
        }
        ,
        i.dataType.get = function() {
            return this._dataType
        }
        ,
        i.dataType.set = function(e) {
            this._dataType = e
        }
        ,
        i.fragmentType.get = function() {
            return this._fragmentType
        }
        ,
        i.fragmentType.set = function(e) {
            this._fragmentType = e
        }
        ,
        i.cdn.get = function() {
            return this._cdn
        }
        ,
        i.cdn.set = function(e) {
            this._cdn = e
        }
        ,
        i.duration.get = function() {
            return this._duration
        }
        ,
        i.duration.set = function(e) {
            this._duration = e
        }
        ,
        i.index.get = function() {
            return this._index
        }
        ,
        i.index.set = function(e) {
            this._index = e
        }
        ,
        i.byteStart.get = function() {
            return this._byteStart
        }
        ,
        i.byteStart.set = function(e) {
            this._byteStart = e
        }
        ,
        i.byteEnd.get = function() {
            return this._byteEnd
        }
        ,
        i.byteEnd.set = function(e) {
            this._byteEnd = e
        }
        ,
        i.periodId.get = function() {
            return this._periodId
        }
        ,
        i.periodId.set = function(e) {
            this._periodId = e
        }
        ,
        i.profile.get = function() {
            return this._profile
        }
        ,
        i.profile.set = function(e) {
            this._profile = e
        }
        ,
        i.bandwidth.get = function() {
            return this._bandwidth
        }
        ,
        i.bandwidth.set = function(e) {
            this._bandwidth = e
        }
        ,
        i.successful.get = function() {
            return this._successful
        }
        ,
        i.successful.set = function(e) {
            this._successful = e
        }
        ,
        i.failureReason.get = function() {
            return this._failureReason
        }
        ,
        i.failureReason.set = function(e) {
            this._failureReason = e
        }
        ,
        i.failureType.get = function() {
            return this._failureType
        }
        ,
        i.failureType.set = function(e) {
            this._failureType = e
        }
        ,
        i.statusCode.get = function() {
            return this._statusCode
        }
        ,
        i.statusCode.set = function(e) {
            this._statusCode = e
        }
        ,
        i.downloadStartTime.get = function() {
            return this._downloadStartTime
        }
        ,
        i.downloadStartTime.set = function(e) {
            this._downloadStartTime = e
        }
        ,
        i.downloadTimeToFirstByte.get = function() {
            return this._downloadTimeToFirstByte
        }
        ,
        i.downloadTimeToFirstByte.set = function(e) {
            this._downloadTimeToFirstByte = e
        }
        ,
        i.downloadTotalTime.get = function() {
            return this._downloadTotalTime
        }
        ,
        i.downloadTotalTime.set = function(e) {
            this._downloadTotalTime = e
        }
        ,
        i.retryNumber.get = function() {
            return this._retryNumber
        }
        ,
        i.retryNumber.set = function(e) {
            this._retryNumber = e
        }
        ,
        i.abrState.get = function() {
            return this._abrState
        }
        ,
        i.abrState.set = function(e) {
            this._abrState = e
        }
        ,
        Object.defineProperties(t.prototype, i),
        t
    }(me)
      , Ee = function(e) {
        function t(t) {
            e.call(this, t),
            this._A = 1,
            this._B = 0,
            this._H = 1,
            this._P = 0,
            this._Q = 8e-4,
            this._R = .08,
            this._LENGTH_OF_HIST = 30,
            this._START_CUSUM = 10,
            this._DRIFT_UP = 3,
            this._DRIFT_DOWN = 3,
            this._THRESHOLD_UP = 1,
            this._THRESHOLD_DOWN = 1,
            this._WEIGHT_UP = 2,
            this._WEIGHT_DOWN = 2,
            this._SLICE_TIME = 4,
            this._cusumUp = 0,
            this._cusumDown = 0,
            this._bootstrapLength = 0,
            this._bootstrapTime = 0,
            this._bootstrapCount = 0,
            this._predictedStateEstimate = 0,
            this._currentStateEstimate = 0,
            this._predictedProbEstimate = 0,
            this._currentProbEstimate = this._P,
            this._innovation = 0,
            this._innovationCovariance = 0,
            this._estimateRTT = 0,
            this._lastObservedBandwidth = 0,
            this._weight = 0,
            this._maxMeaningfulBandwidth = 1e8,
            this._historyMetric = [],
            this._config = t
        }
        e && (t.__proto__ = e),
        t.prototype = Object.create(e && e.prototype),
        t.prototype.constructor = t;
        var i = {
            predictedBandwidth: {
                configurable: !0
            },
            lastObservedBandwidth: {
                configurable: !0
            },
            predictedRoundTripTime: {
                configurable: !0
            }
        };
        return t.prototype.notifyDownloadSuccess = function(e) {
            if (e instanceof ve) {
                var t = e.size
                  , i = e.downloadTotalTime
                  , n = e.downloadTimeToFirstByte
                  , r = 8 * t
                  , s = r / Math.min(this._maxMeaningfulBandwidth, r / ((i - n) / 1e3))
                  , a = r / s;
                if (!isNaN(a) && isFinite(a)) {
                    if (this._historyMetric.length > this._START_CUSUM ? this._updateCusum(a) : this._weight = 0,
                    this._bootstrapCount < 5)
                        this._bootstrapCount++,
                        this._bootstrapLength = .9 * this._bootstrapLength + r,
                        this._bootstrapTime = .9 * this._bootstrapTime + s,
                        this._currentStateEstimate = .8 * this._bootstrapLength / this._bootstrapTime;
                    else
                        for (var o = Math.floor(s / this._SLICE_TIME), l = 0; l <= o; l++) {
                            this._inputKalmanFilter(a)
                        }
                    this._historyMetric.push(a),
                    this._historyMetric.length > this._LENGTH_OF_HIST && this._historyMetric.shift(),
                    this.updateEstimateRTT(e.downloadTimeToFirstByte / 1e3),
                    this._lastObservedBandwidth = a
                }
            }
        }
        ,
        t.prototype.notifyDownloadFailure = function() {}
        ,
        t.prototype._updateCusum = function(e) {
            var t = this._standDeviation();
            this._weight = 0;
            var i = e - this._currentStateEstimate;
            i > 0 ? this._cusumUp = Math.max(this._cusumUp + i - this._DRIFT_UP * t, 0) : this._cusumDown = Math.min(this._cusumDown + i + this._DRIFT_DOWN * t, 0),
            this._cusumUp > this._THRESHOLD_UP * Math.max(t, 1) ? (this._weight = this._WEIGHT_UP,
            this._cusumUp = 0) : this._cusumDown < this._THRESHOLD_DOWN * Math.max(t, 1) * -1 && (this._weight = this._WEIGHT_DOWN,
            this._cusumDown = 0)
        }
        ,
        t.prototype.resetBootstrap = function(e) {
            this._bootstrapLength = 0,
            this._bootstrapTime = 0,
            this._bootstrapCount = 0,
            this._weight = 0,
            this._cusumUp = 0,
            this._cusumDown = 0,
            "number" == typeof e && e > 0 ? (this._historyMetric = [e],
            this._currentStateEstimate = e,
            this._lastObservedBandwidth = e) : this._historyMetric = []
        }
        ,
        t.prototype._inputKalmanFilter = function(e) {
            this._predictedStateEstimate = this._A * this._currentStateEstimate + 0 * this._B,
            this._predictedProbEstimate = this._A * this._currentProbEstimate * this._A + this._Q,
            this._innovation = e - this._H * this._predictedStateEstimate,
            this._innovationCovariance = this._H * this._predictedProbEstimate * this._H + this._R;
            var t = this._predictedProbEstimate * this._H / this._innovationCovariance;
            this._currentStateEstimate = this._predictedStateEstimate + t * this._innovation,
            this._currentProbEstimate = (1 - t * this._H) * this._predictedProbEstimate + this._weight * this._R
        }
        ,
        t.prototype._standDeviation = function() {
            if (null == this._historyMetric || this._historyMetric.length <= 1)
                return 0;
            var e = this._latestAverage(this._historyMetric.length)
              , t = this._historyMetric.reduce(function(t, i) {
                return t + (i - e) * (i - e)
            }, 0) / (this._historyMetric.length - 1);
            return Math.sqrt(t)
        }
        ,
        t.prototype._latestAverage = function(e) {
            if (e <= 0 || null == this._historyMetric || this._historyMetric.length <= 0)
                return 0;
            var t = Math.min(e, this._historyMetric.length);
            return this._historyMetric.slice(-t).reduce(function(e, t) {
                return e + t
            }, 0) / t
        }
        ,
        i.predictedBandwidth.get = function() {
            return this._currentStateEstimate
        }
        ,
        i.lastObservedBandwidth.get = function() {
            return this._lastObservedBandwidth
        }
        ,
        t.prototype.updateEstimateRTT = function(e) {
            this._estimateRTT = e
        }
        ,
        i.predictedRoundTripTime.get = function() {
            return this._estimateRTT
        }
        ,
        Object.defineProperties(t.prototype, i),
        t
    }(fe)
      , be = function(e, t) {
        this._cdn = e,
        this._pluginConfiguration = t,
        this._resetDownloadTime = 15,
        this._initDownloadTime = 2,
        this._maxHistoryLength = 10,
        this._abnormalCountThreshold = 3,
        this._bandwidthEstimateRules = [],
        this._estimateBandwidth = 0,
        this._initBandwidth = 0,
        this._estimateRoundTripTime = 0,
        this._bandwidthEstimateRules.push(new Ee(t)),
        this._LENGTH_OF_ABNORMAL_HIST = 10,
        this._abnormalCount = 0,
        this._historyAbnormalCondition = []
    }
      , Te = {
        config: {
            configurable: !0
        },
        initBandwidth: {
            configurable: !0
        },
        estimateBandwidth: {
            configurable: !0
        },
        estimateRoundTripTime: {
            configurable: !0
        },
        lastObservedBandwidth: {
            configurable: !0
        }
    };
    be.prototype.setConfig = function(e) {
        this._pluginConfiguration = e
    }
    ,
    Te.config.get = function() {
        return this._pluginConfiguration
    }
    ,
    be.prototype.setup = function(e) {
        e = e || {},
        this._estimateBandwidth = e.initBandwidth || 0,
        this._initBandwidth = e.initBandwidth || 0,
        this._estimateRoundTripTime = 0;
        for (var t = 0; t < this._bandwidthEstimateRules.length; t++) {
            var i = this._bandwidthEstimateRules[t];
            i.resetBootstrap(e.initBandwidth),
            (0 === t || this._estimateBandwidth > i.predictedBandwidth) && (this._estimateBandwidth = i.predictedBandwidth),
            (0 === t || this._estimateRoundTripTime < i.predictedRoundTripTime) && (this._estimateRoundTripTime = i.predictedRoundTripTime)
        }
    }
    ,
    be.prototype.resetBootstrap = function(e) {
        for (var t = 0, i = this._bandwidthEstimateRules; t < i.length; t += 1) {
            i[t].resetBootstrap(e)
        }
        for (var n = null, r = null, s = 0, a = this._bandwidthEstimateRules; s < a.length; s += 1) {
            var o = a[s];
            (null == n || n > o.predictedBandwidth) && (n = o.predictedBandwidth),
            (null == r || r < o.predictedRoundTripTime) && (r = o.predictedRoundTripTime)
        }
        this._estimateBandwidth = n || 0,
        this._estimateRoundTripTime = r || 0
    }
    ,
    Te.initBandwidth.get = function() {
        return this._initBandwidth
    }
    ,
    be.prototype.notifyDownloadSuccess = function(e) {
        if (e.dataType != a) {
            var t = this._isDownloadSampleAbnormal(e.size, e.downloadTotalTime, e.downloadTimeToFirstByte);
            if (this._appendDownloadAbnormalSample(t),
            !t || this._getAbnormalSamplesCount() >= this._abnormalCountThreshold) {
                for (var i = null, n = null, r = 0; r < this._bandwidthEstimateRules.length; r++) {
                    var s = this._bandwidthEstimateRules[r];
                    s.notifyDownloadSuccess(e),
                    (null == i || i > s.predictedBandwidth) && (i = s.predictedBandwidth),
                    (null == n || n < s.predictedRoundTripTime) && (n = s.predictedRoundTripTime)
                }
                this._estimateBandwidth = i || 0,
                this._estimateRoundTripTime = n || 0
            }
        }
    }
    ,
    be.prototype.notifyDownloadFailure = function() {}
    ,
    be.prototype._isDownloadSampleAbnormal = function(e, t, i) {
        return t - i < 200 || 8 * e < 4e4
    }
    ,
    be.prototype._getAbnormalSamplesCount = function() {
        return this._abnormalCount
    }
    ,
    be.prototype._appendDownloadAbnormalSample = function(e) {
        this._historyAbnormalCondition.push(e),
        this._abnormalCount += e ? 1 : 0,
        this._historyAbnormalCondition.length > this._LENGTH_OF_ABNORMAL_HIST && (this._abnormalCount -= this._historyAbnormalCondition.shift() ? 1 : 0)
    }
    ,
    Te.estimateBandwidth.get = function() {
        return this._estimateBandwidth
    }
    ,
    Te.estimateRoundTripTime.get = function() {
        return this._estimateRoundTripTime
    }
    ,
    Te.lastObservedBandwidth.get = function() {
        for (var e = 0, t = 0; t < this._bandwidthEstimateRules.length; t++) {
            (0 == t || e > this._bandwidthEstimateRules[t].lastObservedBandwidth) && (e = this._bandwidthEstimateRules[t].lastObservedBandwidth)
        }
        return e
    }
    ,
    Object.defineProperties(be.prototype, Te);
    var Se = function(e) {
        function t(t) {
            e.call(this),
            t = t || {},
            this._type = R.Plugin.QUALITY_CHANGE,
            this._reason = t.reason || "",
            this._nextAction = t.nextAction || "",
            this._dataType = t.dataType || "",
            this._representationId = t.representationId || "",
            this._adaptationSetId = t.adaptationSetId || "",
            this._cdn = t.cdn || "",
            this._waitTimeInMillisecond = t.waitTimeInMillisecond || 0,
            this._timeoutInMillisecond = t.timeoutInMillisecond || -1,
            this._connectTimeoutInMillisecond = t.connectTimeoutInMillisecond || -1,
            this._silenceTimeoutInMillisecond = t.silenceTimeoutInMillisecond || -1,
            this._abrState = t.abrState || "{}",
            this._isInitial = t.isInitial || !0,
            this._message = t.message || ""
        }
        e && (t.__proto__ = e),
        t.prototype = Object.create(e && e.prototype),
        t.prototype.constructor = t;
        var i = {
            type: {
                configurable: !0
            },
            reason: {
                configurable: !0
            },
            nextAction: {
                configurable: !0
            },
            dataType: {
                configurable: !0
            },
            representationId: {
                configurable: !0
            },
            adaptationSetId: {
                configurable: !0
            },
            cdn: {
                configurable: !0
            },
            waitTimeInMillisecond: {
                configurable: !0
            },
            timeoutInMillisecond: {
                configurable: !0
            },
            connectTimeoutInMillisecond: {
                configurable: !0
            },
            silenceTimeoutInMillisecond: {
                configurable: !0
            },
            abrState: {
                configurable: !0
            },
            isInitial: {
                configurable: !0
            },
            message: {
                configurable: !0
            }
        };
        return i.type.get = function() {
            return this._type
        }
        ,
        i.reason.get = function() {
            return this._reason
        }
        ,
        i.reason.set = function(e) {
            this._reason = e
        }
        ,
        i.nextAction.get = function() {
            return this._nextAction
        }
        ,
        i.nextAction.set = function(e) {
            this._nextAction = e
        }
        ,
        i.dataType.get = function() {
            return this._dataType
        }
        ,
        i.dataType.set = function(e) {
            this._dataType = e
        }
        ,
        i.representationId.get = function() {
            return this._representationId
        }
        ,
        i.representationId.set = function(e) {
            this._representationId = e
        }
        ,
        i.adaptationSetId.get = function() {
            return this._adaptationSetId
        }
        ,
        i.adaptationSetId.set = function(e) {
            this._adaptationSetId = e
        }
        ,
        i.cdn.get = function() {
            return this._cdn
        }
        ,
        i.cdn.set = function(e) {
            this._cdn = e
        }
        ,
        i.waitTimeInMillisecond.get = function() {
            return this._waitTimeInMillisecond
        }
        ,
        i.waitTimeInMillisecond.set = function(e) {
            this._waitTimeInMillisecond = e
        }
        ,
        i.timeoutInMillisecond.get = function() {
            return this._timeoutInMillisecond
        }
        ,
        i.timeoutInMillisecond.set = function(e) {
            this._timeoutInMillisecond = e
        }
        ,
        i.connectTimeoutInMillisecond.get = function() {
            return this._connectTimeoutInMillisecond
        }
        ,
        i.connectTimeoutInMillisecond.set = function(e) {
            this._connectTimeoutInMillisecond = e
        }
        ,
        i.silenceTimeoutInMillisecond.get = function() {
            return this._silenceTimeoutInMillisecond
        }
        ,
        i.silenceTimeoutInMillisecond.set = function(e) {
            this._silenceTimeoutInMillisecond = e
        }
        ,
        i.abrState.get = function() {
            return this._abrState
        }
        ,
        i.abrState.set = function(e) {
            this._abrState = e
        }
        ,
        i.isInitial.get = function() {
            return this._isInitial
        }
        ,
        i.isInitial.set = function(e) {
            this._isInitial = e
        }
        ,
        i.message.get = function() {
            return this._message
        }
        ,
        i.message.set = function(e) {
            this._message = e
        }
        ,
        Object.defineProperties(t.prototype, i),
        t
    }(me)
      , Ae = function(e) {
        this._version = G(e, ["version"]) || N.DEFAULT_VERSION,
        this._groupId = G(e, ["group_id"]) || N.DEFAULT_GROUP_ID,
        this._cdnOrder = G(e, ["cdn", "cdn_order"]) || N.DEFAULT_CDN_ORDER,
        this._isLive = G(e, ["isLive"]) || G(e, ["content_bundle_type"]) == p || !1,
        this._playerDevicePlatform = G(e, ["player_device_platform"]) || "",
        this._initQuality = G(e, ["abr_settings", "init_quality"]) || 1e3,
        this._initSafeFactor = G(e, ["abr_settings", "init_safe_factor"]) || 1,
        this._safeFactor = G(e, ["abr_settings", "safe_factor"]) || [1.5, 1.7, 1.9, 2],
        this._mediaRetryCount = G(e, ["abr_settings", "media_retry_count"]) || 1,
        this._initRetryCount = G(e, ["abr_settings", "init_retry_count"]) || 1,
        this._cdnFallback = G(e, ["abr_settings", "cdn_fallback"]) || "aggr1",
        this._cdnInLoop = G(e, ["abr_settings", "cdn_in_loop"]) || !1,
        this._fpsRule = G(e, ["abr_settings", "fps_rule"]) || !1,
        this._bufferDangerThreshold = G(e, ["abr_settings", "buffer_danger_threshold"]) || 5,
        this._bandwidthDangerThreshold = G(e, ["abr_settings", "bandwidth_danger_threshold"]) || 5e5,
        this._bufferWindowSize = G(e, ["abr_settings", "buffer_window_size"]) || 10,
        this._cdnSwitchTimeout = G(e, ["abr_settings", "cdn_switch_timeout"]) || O.FIVE_MIN,
        this._qualitySwitchRule = G(e, ["abr_settings", "quality_switch_rule"]) || ["bandwidth_quality_rule"],
        this._actionRule = G(e, ["abr_settings", "actionRule"]) || "player_error_handling",
        this._localStorage = !0,
        this._seekHandlingRule = G(e, ["abr_settings", "seekHandlingRule"]) || "not_adapt_quality",
        this._bufferHandlingRule = G(e, ["abr_settings", "bufferHandlingRule"]) || "reset_estimated_bandwidth"
    }
      , Pe = {
        localStorage: {
            configurable: !0
        },
        fpsRule: {
            configurable: !0
        },
        cdnInLoop: {
            configurable: !0
        },
        cdnFallback: {
            configurable: !0
        },
        initRetryCount: {
            configurable: !0
        },
        mediaRetryCount: {
            configurable: !0
        },
        safeFactor: {
            configurable: !0
        },
        initSafeFactor: {
            configurable: !0
        },
        initQuality: {
            configurable: !0
        },
        version: {
            configurable: !0
        },
        groupId: {
            configurable: !0
        },
        cdnOrder: {
            configurable: !0
        },
        isLive: {
            configurable: !0
        },
        contentBundleType: {
            configurable: !0
        },
        playerDevicePlatform: {
            configurable: !0
        },
        qualitySwitchRule: {
            configurable: !0
        },
        bufferDangerThreshold: {
            configurable: !0
        },
        bandwidthDangerThreshold: {
            configurable: !0
        },
        bufferWindowSize: {
            configurable: !0
        },
        cdnSwitchTimeout: {
            configurable: !0
        },
        actionRule: {
            configurable: !0
        },
        seekHandlingRule: {
            configurable: !0
        },
        bufferHandlingRule: {
            configurable: !0
        }
    };
    Pe.localStorage.set = function(e) {
        this._localStorage = e
    }
    ,
    Pe.localStorage.get = function() {
        return this._localStorage
    }
    ,
    Pe.fpsRule.get = function() {
        return this._fpsRule
    }
    ,
    Pe.fpsRule.set = function(e) {
        this._fpsRule = e
    }
    ,
    Pe.cdnInLoop.get = function() {
        return this._cdnInLoop
    }
    ,
    Pe.cdnInLoop.set = function(e) {
        this._cdnInLoop = e
    }
    ,
    Pe.cdnFallback.get = function() {
        return this._cdnFallback
    }
    ,
    Pe.cdnFallback.set = function(e) {
        this._cdnFallback = e
    }
    ,
    Pe.initRetryCount.get = function() {
        return this._initRetryCount
    }
    ,
    Pe.initRetryCount.set = function(e) {
        this._initRetryCount = e
    }
    ,
    Pe.mediaRetryCount.get = function() {
        return this._mediaRetryCount
    }
    ,
    Pe.mediaRetryCount.set = function(e) {
        this._mediaRetryCount = e
    }
    ,
    Pe.safeFactor.get = function() {
        return this._safeFactor
    }
    ,
    Pe.safeFactor.set = function(e) {
        this._safeFactor = e
    }
    ,
    Pe.initSafeFactor.get = function() {
        return this._initSafeFactor
    }
    ,
    Pe.initSafeFactor.set = function(e) {
        this._initSafeFactor = e
    }
    ,
    Pe.initQuality.get = function() {
        return this._initQuality
    }
    ,
    Pe.initQuality.set = function(e) {
        this._initQuality = e
    }
    ,
    Pe.version.get = function() {
        return this._version
    }
    ,
    Pe.version.set = function(e) {
        this._version = e
    }
    ,
    Pe.groupId.get = function() {
        return this._groupId
    }
    ,
    Pe.groupId.set = function(e) {
        this._groupId = e
    }
    ,
    Pe.cdnOrder.get = function() {
        return this._cdnOrder
    }
    ,
    Pe.cdnOrder.set = function(e) {
        this._cdnOrder = e.slice(0)
    }
    ,
    Pe.isLive.get = function() {
        return this._isLive
    }
    ,
    Pe.isLive.set = function(e) {
        this._isLive = e
    }
    ,
    Pe.contentBundleType.get = function() {
        return this._isLive ? p : _
    }
    ,
    Pe.contentBundleType.set = function(e) {
        this._isLive = e == p,
        this._updateByContentBundleType()
    }
    ,
    Pe.playerDevicePlatform.get = function() {
        return this._playerDevicePlatform
    }
    ,
    Pe.playerDevicePlatform.set = function(e) {
        this._playerDevicePlatform = e
    }
    ,
    Pe.qualitySwitchRule.set = function(e) {
        this._qualitySwitchRule = e
    }
    ,
    Pe.qualitySwitchRule.get = function() {
        return this._qualitySwitchRule
    }
    ,
    Pe.bufferDangerThreshold.set = function(e) {
        this._bufferDangerThreshold = e
    }
    ,
    Pe.bufferDangerThreshold.get = function() {
        return this._bufferDangerThreshold
    }
    ,
    Pe.bandwidthDangerThreshold.set = function(e) {
        this._bandwidthDangerThreshold = e
    }
    ,
    Pe.bandwidthDangerThreshold.get = function() {
        return this._bandwidthDangerThreshold
    }
    ,
    Pe.bufferWindowSize.set = function(e) {
        this._bufferWindowSize = e
    }
    ,
    Pe.bufferWindowSize.get = function() {
        return this._bufferWindowSize
    }
    ,
    Pe.cdnSwitchTimeout.set = function(e) {
        this._cdnSwitchTimeout = e
    }
    ,
    Pe.cdnSwitchTimeout.get = function() {
        return this._cdnSwitchTimeout
    }
    ,
    Pe.actionRule.set = function(e) {
        this._actionRule = e
    }
    ,
    Pe.actionRule.get = function() {
        return this._actionRule
    }
    ,
    Pe.seekHandlingRule.set = function(e) {
        this._seekHandlingRule = e
    }
    ,
    Pe.seekHandlingRule.get = function() {
        return this._seekHandlingRule
    }
    ,
    Pe.bufferHandlingRule.set = function(e) {
        this._bufferHandlingRule = e
    }
    ,
    Pe.bufferHandlingRule.get = function() {
        return this._bufferHandlingRule
    }
    ,
    Ae.prototype.toString = function() {
        return JSON.stringify({
            version: this._version,
            groupId: this._groupId,
            cdn: {
                cdn_order: this._cdnOrder
            }
        })
    }
    ,
    Ae.prototype._updateByContentBundleType = function() {}
    ,
    Ae.prototype._updateByGroupId = function() {}
    ,
    Object.defineProperties(Ae.prototype, Pe);
    var we = function(e) {
        function t(t) {
            e.call(this, t),
            this._cdnInLoop = !0,
            this._playerDevicePlatform = B,
            this._updateByContentBundleType(),
            this._updateByGroupId()
        }
        return e && (t.__proto__ = e),
        t.prototype = Object.create(e && e.prototype),
        t.prototype.constructor = t,
        t.prototype._updateByContentBundleType = function() {
            this.contentBundleType == p ? (this._cdnFallback = "aggr2",
            this._bufferWindowSize = 5) : (this._cdnFallback = "aggr1&aggr2",
            this._bufferWindowSize = 10)
        }
        ,
        t.prototype._updateByGroupId = function() {}
        ,
        t
    }(Ae)
      , ke = function(e) {
        function t(t) {
            e.call(this, t),
            this._playerDevicePlatform = F,
            this._updateByContentBundleType(),
            this._updateByGroupId()
        }
        return e && (t.__proto__ = e),
        t.prototype = Object.create(e && e.prototype),
        t.prototype.constructor = t,
        t.prototype._updateByContentBundleType = function() {
            this.contentBundleType == p ? (this._cdnFallback = "disable",
            this._fpsRule = !0) : this._cdnFallback = "aggr1"
        }
        ,
        t.prototype._updateByGroupId = function() {}
        ,
        t
    }(Ae)
      , Ce = function(e) {
        this._config = e || {},
        this._historyBuffer = [],
        this._windowSize = this._config.buffer_window_size || 10,
        this._dangerThreshold = this._config.buffer_danger_threshold || 5,
        this._sumBufferLength = 0,
        this._avgBufferLength = 0,
        this._estBufferLength = 0,
        this._inDanger = !1
    }
      , Ie = {
        inDanger: {
            configurable: !0
        },
        avgBufferLength: {
            configurable: !0
        }
    };
    Ce.prototype.setConfig = function(e) {
        this._config = e
    }
    ,
    Ce.prototype.reset = function() {
        this._historyBuffer = [],
        this._sumBufferLength = 0,
        this._avgBufferLength = 0,
        this._estBufferLength = 0,
        this._inDanger = !1
    }
    ,
    Ce.prototype.updateBuffer = function(e, t) {
        var i = {
            bufferLength: t,
            dateTimestamp: e
        };
        if (0 == this._historyBuffer.length)
            this._sumBufferLength = 0;
        else {
            var n = this._historyBuffer[this._historyBuffer.length - 1]
              , r = (i.dateTimestamp - n.dateTimestamp) / 1e3 * (i.bufferLength + n.bufferLength) / 2;
            this._sumBufferLength += r
        }
        for (this._historyBuffer.push(i); (i.dateTimestamp - this._historyBuffer[0].dateTimestamp) / 1e3 > this._windowSize; ) {
            var s = this._historyBuffer.shift()
              , a = this._historyBuffer[0]
              , o = {};
            (i.dateTimestamp - a.dateTimestamp) / 1e3 > this._windowSize ? o = a : (o.dateTimestamp = i.dateTimestamp - 1e3 * this._windowSize,
            o.bufferLength = s.bufferLength + (o.dateTimestamp - s.dateTimestamp) * (a.bufferLength - s.bufferLength) / (a.dateTimestamp - s.dateTimestamp),
            this._historyBuffer.unshift(o));
            var l = (o.dateTimestamp - s.dateTimestamp) / 1e3 * (o.bufferLength + s.bufferLength) / 2;
            this._sumBufferLength -= l
        }
        var d = (i.dateTimestamp - this._historyBuffer[0].dateTimestamp) / 1e3;
        1 == this._historyBuffer.length ? this._avgBufferLength = 0 : this._avgBufferLength = this._sumBufferLength / d,
        Math.abs(d - this._windowSize) < .01 ? this._inDanger = this._avgBufferLength < this._dangerThreshold : this._inDanger = !1
    }
    ,
    Ie.inDanger.get = function() {
        return this._inDanger
    }
    ,
    Ie.avgBufferLength.get = function() {
        return this._avgBufferLength
    }
    ,
    Object.defineProperties(Ce.prototype, Ie);
    var Re = function(e, t) {
        var i;
        this._corePlayback = e,
        this._sessionModel = t,
        this._historyCdnSwitchLog = [],
        this._networkTrackerLog = {},
        this._eventBank = ((i = {})[R.Player.QOS_FRAGMENT] = {},
        i[R.Plugin.QUALITY_CHANGE] = {},
        i)
    };
    Re.prototype.updateCdnSwitchLog = function(e, t) {
        var i = this._sessionModel.currentPeriod || {}
          , n = {
            data_type: t,
            cdn: e.cdn.id,
            timestamp: Date.now(),
            reason: e.reason,
            period_id: i.periodId,
            period_type: i.periodType,
            available_cdns: i.getAvailableCdnIds()
        };
        this._historyCdnSwitchLog.push(n),
        this._historyCdnSwitchLog.length > 5 && this._historyCdnSwitchLog.shift()
    }
    ,
    Re.prototype.onEvent = function(e) {
        this._eventBank[e.type] = this._eventBank[e.type] || {},
        e.type === R.Player.QOS_FRAGMENT ? this._eventBank[e.type][e.dataType] = {
            timestamp: Date.now(),
            fragment_type: e.fragmentType,
            download_time_to_first_byte: e.downloadTimeToFirstByte,
            representation_id: e.representationId,
            download_start_time: e.downloadStartTime,
            download_total_time: e.downloadTotalTime,
            size: e.size
        } : e.type === R.Plugin.QUALITY_CHANGE && (this._eventBank[e.type][e.dataType] = {
            representation_id: e.representationId,
            timestamp: Date.now(),
            cdn: e.cdn,
            next_action: e.nextAction,
            reason: e.reason
        })
    }
    ,
    Re.prototype.updateNetworkTrackerLog = function(e) {
        this._networkTrackerLog.estimateBandwidth = e.estimateBandwidth,
        this._networkTrackerLog.estimateRoundTripTime = e.estimateRoundTripTime
    }
    ,
    Re.prototype.getErrorLog = function() {
        var e = this._sessionModel.currentPeriod;
        return e ? {
            cdn: {
                all_cdns: this._sessionModel.pluginConfiguration.cdnOrder,
                video_available_cdns: e.getAvailableCdnIds(),
                audio_available_cdns: e.getAvailableCdnIds(),
                video_rep_cdns: e.cdnFromReps[s],
                audio_rep_cdns: e.cdnFromReps[a],
                switch_logs: this._historyCdnSwitchLog
            },
            period: {
                video: {
                    period_id: e.periodId,
                    period_type: e.periodType,
                    video_reps: this._generateRepLog(s)
                },
                audio: {
                    period_id: e.periodId,
                    period_type: e.periodType,
                    audio_reps: this._generateRepLog(a)
                }
            },
            quality_change: {
                video: this._eventBank[R.Plugin.QUALITY_CHANGE][s] || {},
                audio: this._eventBank[R.Plugin.QUALITY_CHANGE][a] || {}
            },
            fragment_update: {
                video: this._eventBank[R.Player.QOS_FRAGMENT][s] || {},
                audio: this._eventBank[R.Player.QOS_FRAGMENT][a] || {}
            },
            timestamp: Date.now(),
            video_buffer_length: this._corePlayback.getBufferedLengthInMilliseconds(s),
            audio_buffer_length: this._corePlayback.getBufferedLengthInMilliseconds(a),
            estimated_bandwidth: this._networkTrackerLog.estimateBandwidth,
            estimated_rtt: this._networkTrackerLog.estimateRoundTripTime,
            player_status: "",
            download_status: ""
        } : {}
    }
    ,
    Re.prototype._generateRepLog = function(e) {
        var t = []
          , i = (this._sessionModel.currentPeriod || {}).allReps || {};
        for (var n in i[e]) {
            for (var r = 0, a = i[e][n]; r < a.length; r += 1) {
                var o = a[r]
                  , l = {};
                l = e === s ? {
                    representation_id: o.representationId,
                    profile: o.profile,
                    bandwidth: o.bandwidth,
                    availability: o.availability,
                    width: o.width,
                    height: o.height,
                    frame_rate: o.frameRate,
                    cdn: o.cdn
                } : {
                    representation_id: o.representationId,
                    profile: o.profile,
                    bandwidth: o.bandwidth,
                    availability: o.availability,
                    cdn: o.cdn
                },
                t.push(l)
            }
        }
        return t
    }
    ;
    var De = function(e) {
        function t(t) {
            e.call(this),
            this.setCorePlayback(t),
            this._pluginConfiguration = {},
            this._historyBandwidth = {},
            this._abrStateTracker = new V(this._corePlayback),
            this._networkTrackerByCdn = {},
            this._bufferTrackerByType = {},
            this._sessionModel = new oe(this._pluginConfiguration),
            this._qualitySwitchHandler = new $(this._corePlayback,this._sessionModel,this._pluginConfiguration),
            this._downloadProgressHandler = new j(this._corePlayback,this._pluginConfiguration),
            this._cdnSwitchHandler = new ce(this._networkTrackerByCdn,this._bufferTrackerByType,this._sessionModel,this._pluginConfiguration),
            this._droppedFramesHandler = new pe(this._pluginConfiguration,this._sessionModel),
            this._logTracker = new Re(this._corePlayback,this._sessionModel),
            this._isInitialCdnSelection = !0
        }
        return e && (t.__proto__ = e),
        t.prototype = Object.create(e && e.prototype),
        t.prototype.constructor = t,
        t.prototype.setPluginContext = function(e) {
            this._historyBandwidth = Object.assign({}, e)
        }
        ,
        t.prototype.getPluginContext = function() {
            return Object.assign({}, this._historyBandwidth)
        }
        ,
        t.prototype.setCorePlayback = function(e) {
            this._corePlayback && this._removeEventListenersForCorePlayback(e),
            this._corePlayback = e,
            this._corePlayback && this._addEventListenersForCorePlayback(this._corePlayback)
        }
        ,
        t.prototype.setConfig = function(e) {
            if (!K(e)) {
                var t = Object.assign(e, {
                    isLive: this._corePlayback.isLive()
                });
                ee.debug("PluginHandler", "setConfig: config =", t, "background: green; color: white"),
                this._pluginConfiguration = this._createPluginConfiguration(t),
                ee.debug("PluginHandler", "pluginConfiguration =", this._pluginConfiguration),
                this._qualitySwitchHandler.setConfig(this._pluginConfiguration),
                this._downloadProgressHandler.setConfig(this._pluginConfiguration),
                this._sessionModel.setConfig(this._pluginConfiguration),
                this._cdnSwitchHandler.setConfig(this._pluginConfiguration),
                this._droppedFramesHandler.setConfig(this._pluginConfiguration);
                var i = Object.keys(this._networkTrackerByCdn);
                this._initBufferTracker(),
                this._initNetwortTracker();
                for (var n = 0, r = i; n < r.length; n += 1) {
                    var o = r[n];
                    this._networkTrackerByCdn[o].setConfig(this._pluginConfiguration)
                }
                for (var l = 0, d = [s, a]; l < d.length; l += 1) {
                    var u = d[l];
                    this._bufferTrackerByType[u].setConfig(this._pluginConfiguration)
                }
                this._isInitialCdnSelection = !0
            }
        }
        ,
        t.prototype.setPeriodSession = function(e, t) {
            ee.debug("PluginHandler", "setPeriodSession:", "periodId =", e.periodId, "reps =", t, "background: blue; color: white"),
            this._sessionModel.setPeriodSession(e, t),
            this._initNetwortTracker()
        }
        ,
        t.prototype.setCurrentAdaptationSet = function(e, t) {
            ee.debug("PluginHandler", "setCurrentAdaptationSet", ", adaptationSetId =", t),
            this._sessionModel.setCurrentAdaptationSet(e, t),
            this._adaptQuality(e, null)
        }
        ,
        t.prototype.setNetworkMode = function() {}
        ,
        t.prototype.getNetworkMode = function() {
            return ""
        }
        ,
        t.prototype.setMaxAllowedBitrateInKbps = function(e, t, i) {
            void 0 === i && (i = !1),
            this._sessionModel.setMaxAllowedBitrateInKbps(e, t),
            i && this._adaptQuality(e, null)
        }
        ,
        t.prototype.getPluginState = function() {
            return this._logTracker.getErrorLog()
        }
        ,
        t.prototype.handleEvent = function(e) {
            this._logTracker.onEvent(e),
            e.type == R.Player.BUFFERING_START ? (ee.debug("PluginHandler", "receive rebufferstart:", "bufferingType =", e.bufferingType, "background: red; color: yellow"),
            this._abrStateTracker.onEvent(e),
            e.bufferingType != "initializing" && e.bufferingType != "seeking" && this._ABTestForHandlingBuffering()) : e.type == R.Player.BUFFERING_END ? (ee.debug("PluginHandler", "receive rebufferend:", "bufferingType =", e.bufferingType, "background: red; color: yellow"),
            this._abrStateTracker.onEvent(e)) : e.type == R.Player.SEEKING_START ? (this._abrStateTracker.onEvent(e),
            this._droppedFramesHandler.resetIgnoreFrameInternal(e.timestampInMilliseconds),
            this._ABTestForHandlingSeeking()) : e.type == R.Player.SEEKING_END ? this._abrStateTracker.onEvent(e) : e.type == R.Player.QOS_FRAGMENT ? e.fragmentType != o && (e.dataType === s && ee.debug("PluginHandler", "receive qosfragment:", "dataType =", e.dataType, "cdn =", e.cdn, "successful =", e.successful, "size =", e.size, "downloadTotalTime =", e.downloadTotalTime, "rtt =", e.downloadTimeToFirstByte, "speed =", (8 * e.size * 1e3 / e.downloadTotalTime).toFixed(0), "b/s", "e =", e),
            this.qosfragmentUpdate(new ve(e))) : e.type == R.Player.FRAGMENT_UPDATE || e.type == R.Player.DROPPED_FRAME && this._receiveDroppedFrame(e)
        }
        ,
        t.prototype._ABTestForHandlingBuffering = function() {
            if ("reset_estimated_bandwidth" === this._pluginConfiguration.bufferHandlingRule) {
                var e = this._sessionModel.getDecidedCdn();
                this._resetEstimatedBandwidthByRatio(e.id, 1)
            }
        }
        ,
        t.prototype._ABTestForHandlingSeeking = function() {
            "adapt_quality" === this._pluginConfiguration.seekHandlingRule && (this._adaptQuality(s, null),
            this._adaptQuality(a, null))
        }
        ,
        t.prototype._receiveDroppedFrame = function(e) {
            this._droppedFramesHandler.receiveDroppedFrame(e)
        }
        ,
        t.prototype.qosfragmentUpdate = function(e) {
            this._sessionModel.qosFragmentUpdate(e),
            e.successful ? this._notifyDownloadSuccess(e) : this._notifyDownloadFailure(e)
        }
        ,
        t.prototype._notifyDownloadSuccess = function(e) {
            var t = e.cdn
              , i = e.dataType
              , n = e.representationId;
            this._sessionModel.currentPeriod.setLatestSucRep(i, t, n),
            this._bufferTrackerByType[i].updateBuffer(Date.now(), this._corePlayback.getBufferedLengthInMilliseconds(i) / 1e3),
            this._cdnSwitchHandler.notifyDownloadSuccess(e),
            this._networkTrackerByCdn[t].notifyDownloadSuccess(e),
            e.dataType == s && this._syncHistoryBandwidth(),
            this._adaptQuality(i, e)
        }
        ,
        t.prototype._notifyDownloadFailure = function(e) {
            ee.debug("PluginHandler", "download failure", "e =", e, "background: orangeRed ; color: white");
            var t = e.cdn
              , i = e.dataType;
            e.failureType != h && this._cdnSwitchHandler.notifyDownloadFailure(e),
            i === s && (e.failureType === "load_timeout" || e.failureType === "connect_timeout" ? this._resetEstimatedBandwidthByRatio(t, .5) : e.failureType === "error" && this._resetEstimatedBandwidthByRatio(t, 1)),
            this._bufferTrackerByType[i].updateBuffer(Date.now(), this._corePlayback.getBufferedLengthInMilliseconds(i) / 1e3),
            this._networkTrackerByCdn[t].notifyDownloadFailure(e),
            this._adaptQuality(i, e)
        }
        ,
        t.prototype._adaptQuality = function(e, t) {
            if (this._sessionModel.currentPeriod) {
                var i = this._sessionModel.getCurrentCdn()
                  , n = this._cdnSwitchHandler.getPlaybackCdn(t)
                  , r = n.cdn.id;
                if (null != r) {
                    var o = this._networkTrackerByCdn[r];
                    if (i && r != i) {
                        this._logTracker.updateCdnSwitchLog(n, e);
                        var l = this._networkTrackerByCdn[i].estimateBandwidth / 1024;
                        o.setup({
                            initBandwidth: l
                        }),
                        this._bufferTrackerByType[s].reset(),
                        this._bufferTrackerByType[a].reset()
                    }
                    if (0 != this._sessionModel.getAvailableReps(r, e).length) {
                        var d = null
                          , u = (d = null == t || t.successful ? this._qualitySwitchHandler.getPlaybackDecision(e, o, t) : this._qualitySwitchHandler.getDownloadFailureQuality(e, o, t)).candidate
                          , c = this._networkTrackerByCdn[r].estimateBandwidth / 1024
                          , h = new Se({
                            reason: (n.reason || "") + "||" + (d.reason || ""),
                            nextAction: d.nextAction,
                            dataType: d.dataType,
                            representationId: (u || {}).representationId,
                            adaptationSetId: (u || {}).adaptationSetId,
                            cdn: r,
                            connectTimeoutInMillisecond: d.connectTimeoutInMillisecond,
                            timeoutInMillisecond: d.timeoutInMillisecond,
                            silenceTimeoutInMillisecond: d.timeoutInMillisecond,
                            waitTimeInMillisecond: d.waitTimeInMillisecond || 0,
                            abrState: this._abrStateTracker.prepareAbrState(this._sessionModel, o, u, c),
                            isInitial: this._isInitialCdnSelection,
                            message: (n.reason || "") + "||" + (d.reason || "")
                        });
                        ee.debug("PluginHandler", "send qualitychange:", h, "background: green; color: white"),
                        this.dispatchEvent(h),
                        this._isInitialCdnSelection = !1,
                        this._logTracker.onEvent(h),
                        this._logTracker.updateNetworkTrackerLog(this._networkTrackerByCdn[r])
                    } else
                        ee.warn("no available reps for", e, "stream")
                } else
                    ee.error("PluginHandler", "No available cdn")
            } else
                ee.error("PluginHandler", "current period is null")
        }
        ,
        t.prototype._resetEstimatedBandwidthByRatio = function(e, t) {
            for (var i = this._sessionModel.getDecidedRep(s), n = this._sessionModel.getAvailableReps(e, s), r = n[0], a = 0, o = n; a < o.length; a += 1) {
                var l = o[a];
                if (!(l.bandwidth < i.bandwidth * t))
                    break;
                r = l
            }
            if (r.representationId != i.representationId) {
                var d = r.bandwidth * r.safeFactor;
                this._networkTrackerByCdn[e].resetBootstrap(.8 * d)
            } else {
                var u = this._networkTrackerByCdn[e].estimateBandwidth;
                this._networkTrackerByCdn[e].resetBootstrap(u / 2 * .8)
            }
        }
        ,
        t.prototype._initNetwortTracker = function() {
            for (var e = 0, t = this._pluginConfiguration.cdnOrder; e < t.length; e += 1) {
                var i = t[e];
                if (!this._networkTrackerByCdn[i]) {
                    var n = new be(i,this._pluginConfiguration)
                      , r = this._historyBandwidth.bandwidth * this._pluginConfiguration.initSafeFactor || 0;
                    n.setup({
                        initBandwidth: r
                    }),
                    this._networkTrackerByCdn[i] = n
                }
            }
            if (this._sessionModel.currentPeriod)
                for (var s = 0, a = this._sessionModel.getAvailableCdns(); s < a.length; s += 1) {
                    var o = a[s];
                    if (!this._networkTrackerByCdn[o.id]) {
                        var l = new be(o.id,this._pluginConfiguration)
                          , d = this._historyBandwidth.bandwidth * this._pluginConfiguration.initSafeFactor || 0;
                        l.setup({
                            initBandwidth: d
                        }),
                        this._networkTrackerByCdn[o.id] = l
                    }
                }
        }
        ,
        t.prototype._initBufferTracker = function() {
            this._bufferTrackerByType[s] = new Ce(this._pluginConfiguration),
            this._bufferTrackerByType[a] = new Ce(this._pluginConfiguration)
        }
        ,
        t.prototype._createPluginConfiguration = function(e) {
            return e && e.player_device_platform == F ? new ke(e) : e && e.player_device_platform == B ? new we(e) : (ee.warn("unexpected player_device_platform in config"),
            new Ae(e))
        }
        ,
        t.prototype._syncHistoryBandwidth = function() {
            if (this._pluginConfiguration.localStorage) {
                var e = this._sessionModel.getCurrentCdn()
                  , t = this._networkTrackerByCdn[e].estimateBandwidth
                  , i = this._historyBandwidth.timestamp || 0;
                Date.now() - i < 6e4 || (t > 0 && (this._historyBandwidth = {
                    timestamp: Date.now(),
                    bandwidth: t
                }),
                void 0 !== typeof window.localStorage && window.localStorage.setItem("history_bandwidth", JSON.stringify(this._historyBandwidth)))
            }
        }
        ,
        t.prototype._addEventListenersForCorePlayback = function(e) {
            for (var t = 0, i = Object.keys(R.Player); t < i.length; t += 1) {
                var n = i[t];
                e.addEventListener(R.Player[n], this)
            }
        }
        ,
        t.prototype._removeEventListenersForCorePlayback = function(e) {
            for (var t = 0, i = Object.keys(R.Player); t < i.length; t += 1) {
                var n = i[t];
                e.removeEventListener(R.Player[n], this)
            }
        }
        ,
        t
    }(r)
      , Le = "1.2.0"
      , Me = function() {
        this._pluginConfiguration = {
            version: Le,
            group_id: -1
        }
    };
    Me.prototype.setPluginConfiguration = function(e) {
        e && ("string" == typeof e && (e = JSON.parse(e)),
        this._pluginConfiguration = e,
        e.hasOwnProperty("group_id") && Le == e.version || (this._pluginConfiguration.group_id = -1,
        this._pluginConfiguration.version = Le))
    }
    ,
    Me.prototype.getPluginConfiguration = function() {
        return this._pluginConfiguration
    }
    ,
    Me.prototype.getConfiguration = function(e) {
        return e.mbrManifest = this._pluginConfiguration,
        e
    }
    ,
    Me.prototype.getPluginScript = function() {
        return null
    }
    ,
    Me.prototype.getPluginInterfaceVersion = function() {
        return Le
    }
    ;
    var Oe = function() {};
    Oe.prototype.getTimestampInMilliseconds = function() {}
    ,
    Oe.prototype.getPlatform = function() {}
    ,
    Oe.prototype.getPlayPosInMilliseconds = function() {}
    ,
    Oe.prototype.getMinBufferedLengthInMilliseconds = function() {}
    ,
    Oe.prototype.getBufferedLengthInMilliseconds = function() {}
    ,
    Oe.prototype.hasCurrentFragmentEnteredPipeline = function() {}
    ,
    Oe.prototype.isLive = function() {}
    ,
    Oe.prototype.getNextFragments = function() {}
    ,
    Oe.prototype.getAverageDuration = function() {}
    ,
    Oe.prototype.getHorizontalPhysicalPixels = function() {}
    ,
    Oe.prototype.getVerticalPhysicalPixels = function() {}
    ,
    Oe.prototype.getCurrentFPS = function() {}
    ,
    Oe.prototype.isLastSegment = function() {}
    ,
    Oe.prototype.getCorePlaybackBufferingState = function() {}
    ,
    Oe.prototype.addEventListener = function() {}
    ,
    Oe.prototype.removeEventListener = function() {}
}
, , function(e, t, i) {
    (function() {
        var t, n, r, s, a, o, l, d, u, c, h, p, _, f = {}.hasOwnProperty;
        l = i(17),
        d = i(18),
        t = i(15),
        n = i(16),
        u = i(14),
        h = i(23),
        p = i(24),
        c = i(25),
        r = i(19),
        s = i(21),
        a = i(20),
        o = i(22),
        _ = i(50),
        e.exports = function(e) {
            function i(e) {
                i.__super__.constructor.call(this, e)
            }
            return function(e, t) {
                for (var i in t) {
                    f.call(t, i) && (e[i] = t[i])
                }
                function n() {
                    this.constructor = e
                }
                n.prototype = t.prototype,
                e.prototype = new n,
                e.__super__ = t.prototype
            }(i, e),
            i.prototype.document = function(e) {
                var t, i, r, s, a;
                for (this.textispresent = !1,
                s = "",
                i = 0,
                r = (a = e.children).length; i < r; i++) {
                    t = a[i],
                    s += function() {
                        switch (!1) {
                        case !(t instanceof l):
                            return this.declaration(t);
                        case !(t instanceof d):
                            return this.docType(t);
                        case !(t instanceof n):
                            return this.comment(t);
                        case !(t instanceof c):
                            return this.processingInstruction(t);
                        default:
                            return this.element(t, 0);
                        }
                    }
                    .call(this)
                }
                return this.pretty && s.slice(-this.newline.length) === this.newline && (s = s.slice(0, -this.newline.length)),
                s
            }
            ,
            i.prototype.attribute = function(e) {
                return " " + e.name + "=\"" + e.value + "\""
            }
            ,
            i.prototype.cdata = function(e, t) {
                return this.space(t) + "<![CDATA[" + e.text + "]]>" + this.newline
            }
            ,
            i.prototype.comment = function(e, t) {
                return this.space(t) + "<!-- " + e.text + " -->" + this.newline
            }
            ,
            i.prototype.declaration = function(e, t) {
                var i;
                return i = this.space(t),
                i += "<?xml version=\"" + e.version + "\"",
                null != e.encoding && (i += " encoding=\"" + e.encoding + "\""),
                null != e.standalone && (i += " standalone=\"" + e.standalone + "\""),
                i += this.spacebeforeslash + "?>",
                i += this.newline
            }
            ,
            i.prototype.docType = function(e, i) {
                var l, d, u, h, p;
                if (i || (i = 0),
                h = this.space(i),
                h += "<!DOCTYPE " + e.root().name,
                e.pubID && e.sysID ? h += " PUBLIC \"" + e.pubID + "\" \"" + e.sysID + "\"" : e.sysID && (h += " SYSTEM \"" + e.sysID + "\""),
                e.children.length > 0) {
                    for (h += " [",
                    h += this.newline,
                    d = 0,
                    u = (p = e.children).length; d < u; d++) {
                        l = p[d],
                        h += function() {
                            switch (!1) {
                            case !(l instanceof r):
                                return this.dtdAttList(l, i + 1);
                            case !(l instanceof s):
                                return this.dtdElement(l, i + 1);
                            case !(l instanceof a):
                                return this.dtdEntity(l, i + 1);
                            case !(l instanceof o):
                                return this.dtdNotation(l, i + 1);
                            case !(l instanceof t):
                                return this.cdata(l, i + 1);
                            case !(l instanceof n):
                                return this.comment(l, i + 1);
                            case !(l instanceof c):
                                return this.processingInstruction(l, i + 1);
                            default:
                                throw new Error("Unknown DTD node type: " + l.constructor.name);
                            }
                        }
                        .call(this)
                    }
                    h += "]"
                }
                return h += this.spacebeforeslash + ">",
                h += this.newline
            }
            ,
            i.prototype.element = function(e, i) {
                var r, s, a, o, l, d, _, g, m, y, v, E, b;
                for (_ in i || (i = 0),
                b = !1,
                this.textispresent ? (this.newline = "",
                this.pretty = !1) : (this.newline = this.newlinedefault,
                this.pretty = this.prettydefault),
                g = "",
                g += (E = this.space(i)) + "<" + e.name,
                m = e.attributes) {
                    f.call(m, _) && (r = m[_],
                    g += this.attribute(r))
                }
                if (0 === e.children.length || e.children.every(function(e) {
                    return "" === e.value
                }))
                    this.allowEmpty ? g += "></" + e.name + ">" + this.newline : g += this.spacebeforeslash + "/>" + this.newline;
                else if (this.pretty && 1 === e.children.length && null != e.children[0].value)
                    g += ">",
                    g += e.children[0].value,
                    g += "</" + e.name + ">" + this.newline;
                else {
                    if (this.dontprettytextnodes)
                        for (a = 0,
                        l = (y = e.children).length; a < l; a++) {
                            if (null != (s = y[a]).value) {
                                this.textispresent++,
                                b = !0;
                                break
                            }
                        }
                    for (this.textispresent && (this.newline = "",
                    this.pretty = !1,
                    E = this.space(i)),
                    g += ">" + this.newline,
                    o = 0,
                    d = (v = e.children).length; o < d; o++) {
                        s = v[o],
                        g += function() {
                            switch (!1) {
                            case !(s instanceof t):
                                return this.cdata(s, i + 1);
                            case !(s instanceof n):
                                return this.comment(s, i + 1);
                            case !(s instanceof u):
                                return this.element(s, i + 1);
                            case !(s instanceof h):
                                return this.raw(s, i + 1);
                            case !(s instanceof p):
                                return this.text(s, i + 1);
                            case !(s instanceof c):
                                return this.processingInstruction(s, i + 1);
                            default:
                                throw new Error("Unknown XML node type: " + s.constructor.name);
                            }
                        }
                        .call(this)
                    }
                    b && this.textispresent--,
                    this.textispresent || (this.newline = this.newlinedefault,
                    this.pretty = this.prettydefault),
                    g += E + "</" + e.name + ">" + this.newline
                }
                return g
            }
            ,
            i.prototype.processingInstruction = function(e, t) {
                var i;
                return i = this.space(t) + "<?" + e.target,
                e.value && (i += " " + e.value),
                i += this.spacebeforeslash + "?>" + this.newline
            }
            ,
            i.prototype.raw = function(e, t) {
                return this.space(t) + e.value + this.newline
            }
            ,
            i.prototype.text = function(e, t) {
                return this.space(t) + e.value + this.newline
            }
            ,
            i.prototype.dtdAttList = function(e, t) {
                var i;
                return i = this.space(t) + "<!ATTLIST " + e.elementName + " " + e.attributeName + " " + e.attributeType,
                "#DEFAULT" !== e.defaultValueType && (i += " " + e.defaultValueType),
                e.defaultValue && (i += " \"" + e.defaultValue + "\""),
                i += this.spacebeforeslash + ">" + this.newline
            }
            ,
            i.prototype.dtdElement = function(e, t) {
                return this.space(t) + "<!ELEMENT " + e.name + " " + e.value + this.spacebeforeslash + ">" + this.newline
            }
            ,
            i.prototype.dtdEntity = function(e, t) {
                var i;
                return i = this.space(t) + "<!ENTITY",
                e.pe && (i += " %"),
                i += " " + e.name,
                e.value ? i += " \"" + e.value + "\"" : (e.pubID && e.sysID ? i += " PUBLIC \"" + e.pubID + "\" \"" + e.sysID + "\"" : e.sysID && (i += " SYSTEM \"" + e.sysID + "\""),
                e.nData && (i += " NDATA " + e.nData)),
                i += this.spacebeforeslash + ">" + this.newline
            }
            ,
            i.prototype.dtdNotation = function(e, t) {
                var i;
                return i = this.space(t) + "<!NOTATION " + e.name,
                e.pubID && e.sysID ? i += " PUBLIC \"" + e.pubID + "\" \"" + e.sysID + "\"" : e.pubID ? i += " PUBLIC \"" + e.pubID + "\"" : e.sysID && (i += " SYSTEM \"" + e.sysID + "\""),
                i += this.spacebeforeslash + ">" + this.newline
            }
            ,
            i.prototype.openNode = function(e, t) {
                var i, n, r, s;
                if (t || (t = 0),
                e instanceof u) {
                    for (n in r = this.space(t) + "<" + e.name,
                    s = e.attributes) {
                        f.call(s, n) && (i = s[n],
                        r += this.attribute(i))
                    }
                    return r += (e.children ? ">" : "/>") + this.newline
                }
                return r = this.space(t) + "<!DOCTYPE " + e.rootNodeName,
                e.pubID && e.sysID ? r += " PUBLIC \"" + e.pubID + "\" \"" + e.sysID + "\"" : e.sysID && (r += " SYSTEM \"" + e.sysID + "\""),
                r += (e.children ? " [" : ">") + this.newline
            }
            ,
            i.prototype.closeNode = function(e, t) {
                switch (t || (t = 0),
                !1) {
                case !(e instanceof u):
                    return this.space(t) + "</" + e.name + ">" + this.newline;
                case !(e instanceof d):
                    return this.space(t) + "]>" + this.newline;
                }
            }
            ,
            i
        }(_)
    }
    ).call(this)
}
, function(e) {
    "use strict";
    e.exports = {
        2: "need dictionary",
        1: "stream end",
        0: "",
        "-1": "file error",
        "-2": "stream error",
        "-3": "data error",
        "-4": "insufficient memory",
        "-5": "buffer error",
        "-6": "incompatible version"
    }
}
, function(e, t, i) {
    var n = i(7)(i(3), "Map");
    e.exports = n
}
, function(e, t, i) {
    var n = i(12)
      , r = i(8);
    e.exports = function(e) {
        if (!r(e))
            return !1;
        var t = n(e);
        return "[object Function]" == t || "[object GeneratorFunction]" == t || "[object AsyncFunction]" == t || "[object Proxy]" == t
    }
}
, function(e, t, i) {
    var n = i(3).Symbol;
    e.exports = n
}
, function(e, t, i) {
    var n = i(61);
    e.exports = function(e, t, i) {
        "__proto__" == t && n ? n(e, t, {
            configurable: !0,
            enumerable: !0,
            value: i,
            writable: !0
        }) : e[t] = i
    }
}
, function(e) {
    e.exports = function(e) {
        return e.webpackPolyfill || (e.deprecate = function() {}
        ,
        e.paths = [],
        e.children || (e.children = []),
        Object.defineProperty(e, "loaded", {
            enumerable: !0,
            get: function get() {
                return e.l
            }
        }),
        Object.defineProperty(e, "id", {
            enumerable: !0,
            get: function get() {
                return e.i
            }
        }),
        e.webpackPolyfill = 1),
        e
    }
}
, function(e) {
    var i = Object.prototype;
    e.exports = function(e) {
        var t = e && e.constructor;
        return e === ("function" == typeof t && t.prototype || i)
    }
}
, function(e, t, i) {
    (function(e) {
        var n = i(3)
          , r = i(136)
          , s = t && !t.nodeType && t
          , a = s && "object" == typeof e && e && !e.nodeType && e
          , o = a && a.exports === s ? n.Buffer : void 0
          , l = (o ? o.isBuffer : void 0) || r;
        e.exports = l
    }
    ).call(this, i(41)(e))
}
, function(e, t, i) {
    var n = i(138)
      , r = i(139)
      , s = i(140)
      , a = s && s.isTypedArray
      , o = a ? r(a) : n;
    e.exports = o
}
, function(e, t, i) {
    (function() {
        var t, n, r, s, a, o, l;
        l = i(5),
        a = l.assign,
        o = l.isFunction,
        t = i(85),
        n = i(86),
        s = i(35),
        r = i(87),
        e.exports.create = function(e, i, n, r) {
            var s, o;
            if (null == e)
                throw new Error("Root element needs a name");
            return r = a({}, i, n, r),
            o = (s = new t(r)).element(e),
            r.headless || (s.declaration(r),
            null == r.pubID && null == r.sysID || s.doctype(r)),
            o
        }
        ,
        e.exports.begin = function(e, i, r) {
            var s;
            return o(e) && (i = (s = [e, i])[0],
            r = s[1],
            e = {}),
            i ? new n(e,i,r) : new t(e)
        }
        ,
        e.exports.stringWriter = function(e) {
            return new s(e)
        }
        ,
        e.exports.streamWriter = function(e, t) {
            return new r(e,t)
        }
    }
    ).call(this)
}
, function(e, t) {
    var n;
    !function() {
        "use strict";
        var i = {}.hasOwnProperty;
        function r() {
            for (var e = [], t = 0; t < arguments.length; t++) {
                var n = arguments[t];
                if (n) {
                    var s = typeof n;
                    if ("string" === s || "number" === s)
                        e.push(n);
                    else if (Array.isArray(n) && n.length) {
                        var a = r.apply(null, n);
                        a && e.push(a)
                    } else if ("object" === s)
                        for (var o in n) {
                            i.call(n, o) && n[o] && e.push(o)
                        }
                }
            }
            return e.join(" ")
        }
        e.exports ? (r.default = r,
        e.exports = r) : void 0 === (n = function() {
            return r
        }
        .apply(t, [])) || (e.exports = n)
    }()
}
, , function(e) {
    (function() {
        e.exports = function() {
            function e(e, t, i) {
                if (this.options = e.options,
                this.stringify = e.stringify,
                null == t)
                    throw new Error("Missing attribute name of element " + e.name);
                if (null == i)
                    throw new Error("Missing attribute value for attribute " + t + " of element " + e.name);
                this.name = this.stringify.attName(t),
                this.value = this.stringify.attValue(i)
            }
            return e.prototype.clone = function() {
                return Object.create(this)
            }
            ,
            e.prototype.toString = function(e) {
                return this.options.writer.set(e).attribute(this)
            }
            ,
            e
        }()
    }
    ).call(this)
}
, function(e) {
    (function() {
        var t = {}.hasOwnProperty;
        e.exports = function() {
            function e(e) {
                var i, n, r, s, a;
                for (r in this.assertLegalChar = (i = this.assertLegalChar,
                n = this,
                function() {
                    return i.apply(n, arguments)
                }
                ),
                e || (e = {}),
                this.noDoubleEncoding = e.noDoubleEncoding,
                s = e.stringify || {}) {
                    t.call(s, r) && (a = s[r],
                    this[r] = a)
                }
            }
            return e.prototype.eleName = function(e) {
                return e = "" + e || "",
                this.assertLegalChar(e)
            }
            ,
            e.prototype.eleText = function(e) {
                return e = "" + e || "",
                this.assertLegalChar(this.elEscape(e))
            }
            ,
            e.prototype.cdata = function(e) {
                return e = (e = "" + e || "").replace("]]>", "]]]]><![CDATA[>"),
                this.assertLegalChar(e)
            }
            ,
            e.prototype.comment = function(e) {
                if ((e = "" + e || "").match(/--/))
                    throw new Error("Comment text cannot contain double-hypen: " + e);
                return this.assertLegalChar(e)
            }
            ,
            e.prototype.raw = function(e) {
                return "" + e || ""
            }
            ,
            e.prototype.attName = function(e) {
                return "" + e || ""
            }
            ,
            e.prototype.attValue = function(e) {
                return e = "" + e || "",
                this.attEscape(e)
            }
            ,
            e.prototype.insTarget = function(e) {
                return "" + e || ""
            }
            ,
            e.prototype.insValue = function(e) {
                if ((e = "" + e || "").match(/\?>/))
                    throw new Error("Invalid processing instruction value: " + e);
                return e
            }
            ,
            e.prototype.xmlVersion = function(e) {
                if (!(e = "" + e || "").match(/1\.[0-9]+/))
                    throw new Error("Invalid version number: " + e);
                return e
            }
            ,
            e.prototype.xmlEncoding = function(e) {
                if (!(e = "" + e || "").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))
                    throw new Error("Invalid encoding: " + e);
                return e
            }
            ,
            e.prototype.xmlStandalone = function(e) {
                return e ? "yes" : "no"
            }
            ,
            e.prototype.dtdPubID = function(e) {
                return "" + e || ""
            }
            ,
            e.prototype.dtdSysID = function(e) {
                return "" + e || ""
            }
            ,
            e.prototype.dtdElementValue = function(e) {
                return "" + e || ""
            }
            ,
            e.prototype.dtdAttType = function(e) {
                return "" + e || ""
            }
            ,
            e.prototype.dtdAttDefault = function(e) {
                return null != e ? "" + e || "" : e
            }
            ,
            e.prototype.dtdEntityValue = function(e) {
                return "" + e || ""
            }
            ,
            e.prototype.dtdNData = function(e) {
                return "" + e || ""
            }
            ,
            e.prototype.convertAttKey = "@",
            e.prototype.convertPIKey = "?",
            e.prototype.convertTextKey = "#text",
            e.prototype.convertCDataKey = "#cdata",
            e.prototype.convertCommentKey = "#comment",
            e.prototype.convertRawKey = "#raw",
            e.prototype.assertLegalChar = function(e) {
                var t;
                if (t = e.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))
                    throw new Error("Invalid character in string: " + e + " at index " + t.index);
                return e
            }
            ,
            e.prototype.elEscape = function(e) {
                var t;
                return t = this.noDoubleEncoding ? /(?!&\S+;)&/g : /&/g,
                e.replace(t, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\r/g, "&#xD;")
            }
            ,
            e.prototype.attEscape = function(e) {
                var t;
                return t = this.noDoubleEncoding ? /(?!&\S+;)&/g : /&/g,
                e.replace(t, "&amp;").replace(/</g, "&lt;").replace(/"/g, "&quot;").replace(/\t/g, "&#x9;").replace(/\n/g, "&#xA;").replace(/\r/g, "&#xD;")
            }
            ,
            e
        }()
    }
    ).call(this)
}
, function(e) {
    (function() {
        var t = {}.hasOwnProperty;
        e.exports = function() {
            function e(e) {
                var i, n, r, s, a, o, l, d, u;
                for (i in e || (e = {}),
                this.pretty = e.pretty || !1,
                this.allowEmpty = null != (n = e.allowEmpty) && n,
                this.pretty ? (this.indent = null != (r = e.indent) ? r : "  ",
                this.newline = null != (s = e.newline) ? s : "\n",
                this.offset = null != (a = e.offset) ? a : 0,
                this.dontprettytextnodes = null != (o = e.dontprettytextnodes) ? o : 0) : (this.indent = "",
                this.newline = "",
                this.offset = 0,
                this.dontprettytextnodes = 0),
                this.spacebeforeslash = null != (l = e.spacebeforeslash) ? l : "",
                !0 === this.spacebeforeslash && (this.spacebeforeslash = " "),
                this.newlinedefault = this.newline,
                this.prettydefault = this.pretty,
                d = e.writer || {}) {
                    t.call(d, i) && (u = d[i],
                    this[i] = u)
                }
            }
            return e.prototype.set = function(e) {
                var i, n, r;
                for (i in e || (e = {}),
                "pretty"in e && (this.pretty = e.pretty),
                "allowEmpty"in e && (this.allowEmpty = e.allowEmpty),
                this.pretty ? (this.indent = "indent"in e ? e.indent : "  ",
                this.newline = "newline"in e ? e.newline : "\n",
                this.offset = "offset"in e ? e.offset : 0,
                this.dontprettytextnodes = "dontprettytextnodes"in e ? e.dontprettytextnodes : 0) : (this.indent = "",
                this.newline = "",
                this.offset = 0,
                this.dontprettytextnodes = 0),
                this.spacebeforeslash = "spacebeforeslash"in e ? e.spacebeforeslash : "",
                !0 === this.spacebeforeslash && (this.spacebeforeslash = " "),
                this.newlinedefault = this.newline,
                this.prettydefault = this.pretty,
                n = e.writer || {}) {
                    t.call(n, i) && (r = n[i],
                    this[i] = r)
                }
                return this
            }
            ,
            e.prototype.space = function(e) {
                var t;
                return this.pretty && (t = (e || 0) + this.offset + 1) > 0 ? new Array(t).join(this.indent) : ""
            }
            ,
            e
        }()
    }
    ).call(this)
}
, function(e) {
    "use strict";
    e.exports = function(e, t, i, n) {
        for (var r = 65535 & e | 0, s = e >>> 16 & 65535 | 0, a = 0; 0 !== i; ) {
            i -= a = i > 2e3 ? 2e3 : i;
            do {
                s = s + (r = r + t[n++] | 0) | 0
            } while (--a);r %= 65521,
            s %= 65521
        }
        return r | s << 16 | 0
    }
}
, function(e) {
    "use strict";
    var n = function() {
        for (var e, t = [], i = 0; i < 256; i++) {
            e = i;
            for (var n = 0; n < 8; n++) {
                e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1
            }
            t[i] = e
        }
        return t
    }();
    e.exports = function(e, t, i, r) {
        e ^= -1;
        for (var o = r; o < r + i; o++) {
            e = e >>> 8 ^ n[255 & (e ^ t[o])]
        }
        return -1 ^ e
    }
}
, function(e, t, i) {
    "use strict";
    var n = i(6)
      , r = !0
      , s = !0;
    try {
        String.fromCharCode.apply(null, [0])
    } catch (e) {
        r = !1
    }
    try {
        String.fromCharCode.apply(null, new Uint8Array(1))
    } catch (e) {
        s = !1
    }
    for (var a = new n.Buf8(256), o = 0; o < 256; o++) {
        a[o] = o >= 252 ? 6 : o >= 248 ? 5 : o >= 240 ? 4 : o >= 224 ? 3 : o >= 192 ? 2 : 1
    }
    function l(e, t) {
        if (t < 65534 && (e.subarray && s || !e.subarray && r))
            return String.fromCharCode.apply(null, n.shrinkBuf(e, t));
        for (var i = "", a = 0; a < t; a++) {
            i += String.fromCharCode(e[a])
        }
        return i
    }
    a[254] = a[254] = 1,
    t.string2buf = function(e) {
        var t, i, r, s, a, o = e.length, l = 0;
        for (s = 0; s < o; s++) {
            55296 == (64512 & (i = e.charCodeAt(s))) && s + 1 < o && 56320 == (64512 & (r = e.charCodeAt(s + 1))) && (i = 65536 + (i - 55296 << 10) + (r - 56320),
            s++),
            l += i < 128 ? 1 : i < 2048 ? 2 : i < 65536 ? 3 : 4
        }
        for (t = new n.Buf8(l),
        a = 0,
        s = 0; a < l; s++) {
            55296 == (64512 & (i = e.charCodeAt(s))) && s + 1 < o && 56320 == (64512 & (r = e.charCodeAt(s + 1))) && (i = 65536 + (i - 55296 << 10) + (r - 56320),
            s++),
            i < 128 ? t[a++] = i : i < 2048 ? (t[a++] = 192 | i >>> 6,
            t[a++] = 128 | 63 & i) : i < 65536 ? (t[a++] = 224 | i >>> 12,
            t[a++] = 128 | i >>> 6 & 63,
            t[a++] = 128 | 63 & i) : (t[a++] = 240 | i >>> 18,
            t[a++] = 128 | i >>> 12 & 63,
            t[a++] = 128 | i >>> 6 & 63,
            t[a++] = 128 | 63 & i)
        }
        return t
    }
    ,
    t.buf2binstring = function(e) {
        return l(e, e.length)
    }
    ,
    t.binstring2buf = function(e) {
        for (var t = new n.Buf8(e.length), i = 0, r = t.length; i < r; i++) {
            t[i] = e.charCodeAt(i)
        }
        return t
    }
    ,
    t.buf2string = function(e, t) {
        var i, n, r, s, o = t || e.length, d = new Array(2 * o);
        for (n = 0,
        i = 0; i < o; ) {
            if ((r = e[i++]) < 128)
                d[n++] = r;
            else if ((s = a[r]) > 4)
                d[n++] = 65533,
                i += s - 1;
            else {
                for (r &= 2 === s ? 31 : 3 === s ? 15 : 7; s > 1 && i < o; ) {
                    r = r << 6 | 63 & e[i++],
                    s--
                }
                s > 1 ? d[n++] = 65533 : r < 65536 ? d[n++] = r : (r -= 65536,
                d[n++] = 55296 | r >> 10 & 1023,
                d[n++] = 56320 | 1023 & r)
            }
        }
        return l(d, n)
    }
    ,
    t.utf8border = function(e, t) {
        var i;
        for ((t = t || e.length) > e.length && (t = e.length),
        i = t - 1; i >= 0 && 128 == (192 & e[i]); ) {
            i--
        }
        return i < 0 || 0 === i ? t : i + a[e[i]] > t ? i : t
    }
}
, function(e) {
    "use strict";
    e.exports = function() {
        this.input = null,
        this.next_in = 0,
        this.avail_in = 0,
        this.total_in = 0,
        this.output = null,
        this.next_out = 0,
        this.avail_out = 0,
        this.total_out = 0,
        this.msg = "",
        this.state = null,
        this.data_type = 2,
        this.adler = 0
    }
}
, function(e) {
    "use strict";
    e.exports = {
        Z_NO_FLUSH: 0,
        Z_PARTIAL_FLUSH: 1,
        Z_SYNC_FLUSH: 2,
        Z_FULL_FLUSH: 3,
        Z_FINISH: 4,
        Z_BLOCK: 5,
        Z_TREES: 6,
        Z_OK: 0,
        Z_STREAM_END: 1,
        Z_NEED_DICT: 2,
        Z_ERRNO: -1,
        Z_STREAM_ERROR: -2,
        Z_DATA_ERROR: -3,
        Z_BUF_ERROR: -5,
        Z_NO_COMPRESSION: 0,
        Z_BEST_SPEED: 1,
        Z_BEST_COMPRESSION: 9,
        Z_DEFAULT_COMPRESSION: -1,
        Z_FILTERED: 1,
        Z_HUFFMAN_ONLY: 2,
        Z_RLE: 3,
        Z_FIXED: 4,
        Z_DEFAULT_STRATEGY: 0,
        Z_BINARY: 0,
        Z_TEXT: 1,
        Z_UNKNOWN: 2,
        Z_DEFLATED: 8
    }
}
, function(e, t, i) {
    var n = i(26)
      , r = i(102)
      , s = i(103)
      , a = i(104)
      , o = i(105)
      , l = i(106);
    function d(e) {
        var t = this.__data__ = new n(e);
        this.size = t.size
    }
    d.prototype.clear = r,
    d.prototype.delete = s,
    d.prototype.get = a,
    d.prototype.has = o,
    d.prototype.set = l,
    e.exports = d
}
, function(e, t, i) {
    (function(t) {
        var i = "object" == typeof t && t && t.Object === Object && t;
        e.exports = i
    }
    ).call(this, i(13))
}
, function(e) {
    var i = Function.prototype.toString;
    e.exports = function(e) {
        if (null != e) {
            try {
                return i.call(e)
            } catch (e) {}
            try {
                return e + ""
            } catch (e) {}
        }
        return ""
    }
}
, function(e, t, i) {
    var n = i(113)
      , r = i(120)
      , s = i(122)
      , a = i(123)
      , o = i(124);
    function l(e) {
        var t = -1
          , i = null == e ? 0 : e.length;
        for (this.clear(); ++t < i; ) {
            var n = e[t];
            this.set(n[0], n[1])
        }
    }
    l.prototype.clear = n,
    l.prototype.delete = r,
    l.prototype.get = s,
    l.prototype.has = a,
    l.prototype.set = o,
    e.exports = l
}
, function(e, t, i) {
    var n = i(40)
      , r = i(11);
    e.exports = function(e, t, i) {
        (void 0 !== i && !r(e[t], i) || void 0 === i && !(t in e)) && n(e, t, i)
    }
}
, function(e, t, i) {
    var n = i(7)
      , r = function() {
        try {
            var e = n(Object, "defineProperty");
            return e({}, "", {}),
            e
        } catch (e) {}
    }();
    e.exports = r
}
, function(e, t, i) {
    var n = i(3).Uint8Array;
    e.exports = n
}
, function(e, t, i) {
    var n = i(64)(Object.getPrototypeOf, Object);
    e.exports = n
}
, function(e) {
    e.exports = function(e, t) {
        return function(i) {
            return e(t(i))
        }
    }
}
, function(e, t, i) {
    var n = i(134)
      , r = i(10)
      , s = Object.prototype
      , a = s.hasOwnProperty
      , o = s.propertyIsEnumerable
      , l = n(function() {
        return arguments
    }()) ? n : function(e) {
        return r(e) && a.call(e, "callee") && !o.call(e, "callee")
    }
    ;
    e.exports = l
}
, function(e) {
    e.exports = function(e) {
        return "number" == typeof e && e > -1 && e % 1 == 0 && e <= 9007199254740991
    }
}
, function(e) {
    e.exports = function(e, t) {
        if (("constructor" !== t || "function" != typeof e[t]) && "__proto__" != t)
            return e[t]
    }
}
, function(e, t, i) {
    var n = i(69)
      , r = i(145)
      , s = i(31);
    e.exports = function(e) {
        return s(e) ? n(e, !0) : r(e)
    }
}
, function(e, t, i) {
    var n = i(144)
      , r = i(65)
      , s = i(30)
      , a = i(43)
      , o = i(70)
      , l = i(44)
      , d = Object.prototype.hasOwnProperty;
    e.exports = function(e, t) {
        var i = s(e)
          , u = !i && r(e)
          , c = !i && !u && a(e)
          , h = !i && !u && !c && l(e)
          , p = i || u || c || h
          , _ = p ? n(e.length, String) : []
          , f = _.length;
        for (var g in e) {
            !t && !d.call(e, g) || p && ("length" == g || c && ("offset" == g || "parent" == g) || h && ("buffer" == g || "byteLength" == g || "byteOffset" == g) || o(g, f)) || _.push(g)
        }
        return _
    }
}
, function(e) {
    e.exports = function(e, t) {
        var n = typeof e;
        return !!(t = null == t ? 9007199254740991 : t) && ("number" == n || "symbol" != n && /^(?:0|[1-9]\d*)$/.test(e)) && e > -1 && e % 1 == 0 && e < t
    }
}
, function(e) {
    e.exports = function(e) {
        return e
    }
}
, function(e) {
    "use strict";
    var n = Object.getOwnPropertySymbols
      , r = Object.prototype.hasOwnProperty
      , s = Object.prototype.propertyIsEnumerable;
    function a(e) {
        if (null == e)
            throw new TypeError("Object.assign cannot be called with null or undefined");
        return Object(e)
    }
    e.exports = function() {
        try {
            if (!Object.assign)
                return !1;
            var e = new String("abc");
            if (e[5] = "de",
            "5" === Object.getOwnPropertyNames(e)[0])
                return !1;
            for (var t = {}, i = 0; i < 10; i++) {
                t["_" + String.fromCharCode(i)] = i
            }
            if ("0123456789" !== Object.getOwnPropertyNames(t).map(function(e) {
                return t[e]
            }).join(""))
                return !1;
            var n = {};
            return "abcdefghijklmnopqrst".split("").forEach(function(e) {
                n[e] = e
            }),
            "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, n)).join("")
        } catch (e) {
            return !1
        }
    }() ? Object.assign : function(e) {
        for (var i, o, l = a(e), d = 1; d < arguments.length; d++) {
            for (var u in i = Object(arguments[d])) {
                r.call(i, u) && (l[u] = i[u])
            }
            if (n) {
                o = n(i);
                for (var c = 0; c < o.length; c++) {
                    s.call(i, o[c]) && (l[o[c]] = i[o[c]])
                }
            }
        }
        return l
    }
}
, function(e, t, i) {
    var n = i(193)
      , r = i(196)
      , s = i(197);
    e.exports = function(e, t, i, a, o, l) {
        var d = 1 & i
          , u = e.length
          , c = t.length;
        if (u != c && !(d && c > u))
            return !1;
        var h = l.get(e);
        if (h && l.get(t))
            return h == t;
        var p = -1
          , _ = !0
          , f = 2 & i ? new n : void 0;
        for (l.set(e, t),
        l.set(t, e); ++p < u; ) {
            var g = e[p]
              , m = t[p];
            if (a)
                var y = d ? a(m, g, p, t, e, l) : a(g, m, p, e, t, l);
            if (void 0 !== y) {
                if (y)
                    continue;
                _ = !1;
                break
            }
            if (f) {
                if (!r(t, function(e, t) {
                    if (!s(f, t) && (g === e || o(g, e, i, a, l)))
                        return f.push(t)
                })) {
                    _ = !1;
                    break
                }
            } else if (g !== m && !o(g, m, i, a, l)) {
                _ = !1;
                break
            }
        }
        return l.delete(e),
        l.delete(t),
        _
    }
}
, function(e, t, i) {
    (function(t, i) {
        var n;
        n = function() {
            "use strict";
            function e(e) {
                return "function" == typeof e
            }
            var n = Array.isArray ? Array.isArray : function(e) {
                return "[object Array]" === Object.prototype.toString.call(e)
            }
              , r = 0
              , s = void 0
              , a = void 0
              , o = function(e, t) {
                _[r] = e,
                _[r + 1] = t,
                2 === (r += 2) && (a ? a(f) : E())
            }
              , l = "undefined" != typeof window ? window : void 0
              , d = l || {}
              , u = d.MutationObserver || d.WebKitMutationObserver
              , c = "undefined" == typeof self && void 0 !== t && "[object process]" === {}.toString.call(t)
              , h = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel;
            function p() {
                var e = setTimeout;
                return function() {
                    return e(f, 1)
                }
            }
            var _ = new Array(1e3);
            function f() {
                for (var e = 0; e < r; e += 2) {
                    (0,
                    _[e])(_[e + 1]),
                    _[e] = void 0,
                    _[e + 1] = void 0
                }
                r = 0
            }
            var g, m, y, v, E = void 0;
            function b(e, t) {
                var i = this
                  , n = new this.constructor(A);
                void 0 === n[S] && O(n);
                var r = i._state;
                if (r) {
                    var s = arguments[r - 1];
                    o(function() {
                        return L(r, n, s, i._result)
                    })
                } else
                    R(i, n, e, t);
                return n
            }
            function T(e) {
                if (e && "object" == typeof e && e.constructor === this)
                    return e;
                var t = new this(A);
                return w(t, e),
                t
            }
            c ? E = function() {
                return t.nextTick(f)
            }
            : u ? (m = 0,
            y = new u(f),
            v = document.createTextNode(""),
            y.observe(v, {
                characterData: !0
            }),
            E = function() {
                v.data = m = ++m % 2
            }
            ) : h ? ((g = new MessageChannel).port1.onmessage = f,
            E = function() {
                return g.port2.postMessage(0)
            }
            ) : E = void 0 === l ? function() {
                try {
                    var e = Function("return this")().require("vertx");
                    return void 0 !== (s = e.runOnLoop || e.runOnContext) ? function() {
                        s(f)
                    }
                    : p()
                } catch (e) {
                    return p()
                }
            }() : p();
            var S = Math.random().toString(36).substring(2);
            function A() {}
            function P(t, i, n) {
                i.constructor === t.constructor && n === b && i.constructor.resolve === T ? function(e, t) {
                    1 === t._state ? C(e, t._result) : 2 === t._state ? I(e, t._result) : R(t, void 0, function(t) {
                        return w(e, t)
                    }, function(t) {
                        return I(e, t)
                    })
                }(t, i) : void 0 === n ? C(t, i) : e(n) ? function(e, t, i) {
                    o(function(e) {
                        var n = !1
                          , r = function(e, t, i, n) {
                            try {
                                e.call(t, i, n)
                            } catch (e) {
                                return e
                            }
                        }(i, t, function(i) {
                            n || (n = !0,
                            t !== i ? w(e, i) : C(e, i))
                        }, function(t) {
                            n || (n = !0,
                            I(e, t))
                        }, e._label);
                        !n && r && (n = !0,
                        I(e, r))
                    }, e)
                }(t, i, n) : C(t, i)
            }
            function w(e, t) {
                if (e === t)
                    I(e, new TypeError("You cannot resolve a promise with itself"));
                else if (r = typeof (n = t),
                null === n || "object" !== r && "function" !== r)
                    C(e, t);
                else {
                    var i = void 0;
                    try {
                        i = t.then
                    } catch (t) {
                        return void I(e, t)
                    }
                    P(e, t, i)
                }
                var n, r
            }
            function k(e) {
                e._onerror && e._onerror(e._result),
                D(e)
            }
            function C(e, t) {
                void 0 === e._state && (e._result = t,
                e._state = 1,
                0 !== e._subscribers.length && o(D, e))
            }
            function I(e, t) {
                void 0 === e._state && (e._state = 2,
                e._result = t,
                o(k, e))
            }
            function R(e, t, i, n) {
                var r = e._subscribers
                  , s = r.length;
                e._onerror = null,
                r[s] = t,
                r[s + 1] = i,
                r[s + 2] = n,
                0 === s && e._state && o(D, e)
            }
            function D(e) {
                var t = e._subscribers
                  , i = e._state;
                if (0 !== t.length) {
                    for (var n = void 0, r = void 0, s = e._result, a = 0; a < t.length; a += 3) {
                        n = t[a],
                        r = t[a + i],
                        n ? L(i, n, r, s) : r(s)
                    }
                    e._subscribers.length = 0
                }
            }
            function L(t, i, n, r) {
                var s = e(n)
                  , a = void 0
                  , o = void 0
                  , l = !0;
                if (s) {
                    try {
                        a = n(r)
                    } catch (e) {
                        l = !1,
                        o = e
                    }
                    if (i === a)
                        return void I(i, new TypeError("A promises callback cannot return that same promise."))
                } else
                    a = r;
                void 0 !== i._state || (s && l ? w(i, a) : !1 === l ? I(i, o) : 1 === t ? C(i, a) : 2 === t && I(i, a))
            }
            var M = 0;
            function O(e) {
                e[S] = M++,
                e._state = void 0,
                e._result = void 0,
                e._subscribers = []
            }
            var x = function() {
                function e(e, t) {
                    this._instanceConstructor = e,
                    this.promise = new e(A),
                    this.promise[S] || O(this.promise),
                    n(t) ? (this.length = t.length,
                    this._remaining = t.length,
                    this._result = new Array(this.length),
                    0 === this.length ? C(this.promise, this._result) : (this.length = this.length || 0,
                    this._enumerate(t),
                    0 === this._remaining && C(this.promise, this._result))) : I(this.promise, new Error("Array Methods must be provided an Array"))
                }
                return e.prototype._enumerate = function(e) {
                    for (var t = 0; void 0 === this._state && t < e.length; t++) {
                        this._eachEntry(e[t], t)
                    }
                }
                ,
                e.prototype._eachEntry = function(e, t) {
                    var i = this._instanceConstructor
                      , n = i.resolve;
                    if (n === T) {
                        var r = void 0
                          , s = void 0
                          , a = !1;
                        try {
                            r = e.then
                        } catch (e) {
                            a = !0,
                            s = e
                        }
                        if (r === b && void 0 !== e._state)
                            this._settledAt(e._state, t, e._result);
                        else if ("function" != typeof r)
                            this._remaining--,
                            this._result[t] = e;
                        else if (i === N) {
                            var o = new i(A);
                            a ? I(o, s) : P(o, e, r),
                            this._willSettleAt(o, t)
                        } else
                            this._willSettleAt(new i(function(t) {
                                return t(e)
                            }
                            ), t)
                    } else
                        this._willSettleAt(n(e), t)
                }
                ,
                e.prototype._settledAt = function(e, t, i) {
                    var n = this.promise;
                    void 0 === n._state && (this._remaining--,
                    2 === e ? I(n, i) : this._result[t] = i),
                    0 === this._remaining && C(n, this._result)
                }
                ,
                e.prototype._willSettleAt = function(e, t) {
                    var i = this;
                    R(e, void 0, function(e) {
                        return i._settledAt(1, t, e)
                    }, function(e) {
                        return i._settledAt(2, t, e)
                    })
                }
                ,
                e
            }()
              , N = function() {
                function t(e) {
                    this[S] = M++,
                    this._result = this._state = void 0,
                    this._subscribers = [],
                    A !== e && ("function" != typeof e && function() {
                        throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
                    }(),
                    this instanceof t ? function(e, t) {
                        try {
                            t(function(t) {
                                w(e, t)
                            }, function(t) {
                                I(e, t)
                            })
                        } catch (t) {
                            I(e, t)
                        }
                    }(this, e) : function() {
                        throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
                    }())
                }
                return t.prototype.catch = function(e) {
                    return this.then(null, e)
                }
                ,
                t.prototype.finally = function(t) {
                    var i = this.constructor;
                    return e(t) ? this.then(function(e) {
                        return i.resolve(t()).then(function() {
                            return e
                        })
                    }, function(e) {
                        return i.resolve(t()).then(function() {
                            throw e
                        })
                    }) : this.then(t, t)
                }
                ,
                t
            }();
            return N.prototype.then = b,
            N.all = function(e) {
                return new x(this,e).promise
            }
            ,
            N.race = function(e) {
                var t = this;
                return n(e) ? new t(function(i, n) {
                    for (var r = e.length, s = 0; s < r; s++) {
                        t.resolve(e[s]).then(i, n)
                    }
                }
                ) : new t(function(e, t) {
                    return t(new TypeError("You must pass an array to race."))
                }
                )
            }
            ,
            N.resolve = T,
            N.reject = function(e) {
                var t = new this(A);
                return I(t, e),
                t
            }
            ,
            N._setScheduler = function(e) {
                a = e
            }
            ,
            N._setAsap = function(e) {
                o = e
            }
            ,
            N._asap = o,
            N.polyfill = function() {
                var e = void 0;
                if (void 0 !== i)
                    e = i;
                else if ("undefined" != typeof self)
                    e = self;
                else
                    try {
                        e = Function("return this")()
                    } catch (e) {
                        throw new Error("polyfill failed because global object is unavailable in this environment")
                    }
                var t = e.Promise;
                if (t) {
                    var n = null;
                    try {
                        n = Object.prototype.toString.call(t.resolve())
                    } catch (e) {}
                    if ("[object Promise]" === n && !t.cast)
                        return
                }
                e.Promise = N
            }
            ,
            N.Promise = N,
            N
        }
        ,
        e.exports = n()
    }
    ).call(this, i(84), i(13))
}
, function(e, t, i) {
    "use strict";
    var n = {};
    (0,
    i(6).assign)(n, i(88), i(91), i(55)),
    e.exports = n
}
, function(e, t, i) {
    var n = i(96)
      , r = i(147)(function(e, t, i) {
        n(e, t, i)
    });
    e.exports = r
}
, , , , , , , function(e, t, i) {
    i(222),
    e.exports = i(221)
}
, function(e) {
    var i, n, r = e.exports = {};
    function s() {
        throw new Error("setTimeout has not been defined")
    }
    function a() {
        throw new Error("clearTimeout has not been defined")
    }
    function o(e) {
        if (i === setTimeout)
            return setTimeout(e, 0);
        if ((i === s || !i) && setTimeout)
            return i = setTimeout,
            setTimeout(e, 0);
        try {
            return i(e, 0)
        } catch (t) {
            try {
                return i.call(null, e, 0)
            } catch (t) {
                return i.call(this, e, 0)
            }
        }
    }
    !function() {
        try {
            i = "function" == typeof setTimeout ? setTimeout : s
        } catch (e) {
            i = s
        }
        try {
            n = "function" == typeof clearTimeout ? clearTimeout : a
        } catch (e) {
            n = a
        }
    }();
    var l, d = [], u = !1, c = -1;
    function h() {
        u && l && (u = !1,
        l.length ? d = l.concat(d) : c = -1,
        d.length && p())
    }
    function p() {
        if (!u) {
            var e = o(h);
            u = !0;
            for (var t = d.length; t; ) {
                for (l = d,
                d = []; ++c < t; ) {
                    l && l[c].run()
                }
                c = -1,
                t = d.length
            }
            l = null,
            u = !1,
            function(e) {
                if (n === clearTimeout)
                    return clearTimeout(e);
                if ((n === a || !n) && clearTimeout)
                    return n = clearTimeout,
                    clearTimeout(e);
                try {
                    n(e)
                } catch (t) {
                    try {
                        return n.call(null, e)
                    } catch (t) {
                        return n.call(this, e)
                    }
                }
            }(e)
        }
    }
    function _(e, t) {
        this.fun = e,
        this.array = t
    }
    function f() {}
    r.nextTick = function(e) {
        var t = new Array(arguments.length - 1);
        if (arguments.length > 1)
            for (var i = 1; i < arguments.length; i++) {
                t[i - 1] = arguments[i]
            }
        d.push(new _(e,t)),
        1 !== d.length || u || o(p)
    }
    ,
    _.prototype.run = function() {
        this.fun.apply(null, this.array)
    }
    ,
    r.title = "browser",
    r.browser = !0,
    r.env = {},
    r.argv = [],
    r.version = "",
    r.versions = {},
    r.on = f,
    r.addListener = f,
    r.once = f,
    r.off = f,
    r.removeListener = f,
    r.removeAllListeners = f,
    r.emit = f,
    r.prependListener = f,
    r.prependOnceListener = f,
    r.listeners = function() {
        return []
    }
    ,
    r.binding = function() {
        throw new Error("process.binding is not supported")
    }
    ,
    r.cwd = function() {
        return "/"
    }
    ,
    r.chdir = function() {
        throw new Error("process.chdir is not supported")
    }
    ,
    r.umask = function() {
        return 0
    }
}
, function(e, t, i) {
    (function() {
        var t, n, r, s, a = {}.hasOwnProperty;
        s = i(5).isPlainObject,
        t = i(2),
        r = i(49),
        n = i(35),
        e.exports = function(e) {
            function t(e) {
                t.__super__.constructor.call(this, null),
                e || (e = {}),
                e.writer || (e.writer = new n),
                this.options = e,
                this.stringify = new r(e),
                this.isDocument = !0
            }
            return function(e, t) {
                for (var i in t) {
                    a.call(t, i) && (e[i] = t[i])
                }
                function n() {
                    this.constructor = e
                }
                n.prototype = t.prototype,
                e.prototype = new n,
                e.__super__ = t.prototype
            }(t, e),
            t.prototype.end = function(e) {
                var t;
                return e ? s(e) && (t = e,
                e = this.options.writer.set(t)) : e = this.options.writer,
                e.document(this)
            }
            ,
            t.prototype.toString = function(e) {
                return this.options.writer.set(e).document(this)
            }
            ,
            t
        }(t)
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n, r, s, a, o, l, d, u, c, h, p, _, f, g, m, y, v, E, b = {}.hasOwnProperty;
        E = i(5),
        y = E.isObject,
        m = E.isFunction,
        v = E.isPlainObject,
        c = i(14),
        n = i(15),
        r = i(16),
        p = i(23),
        g = i(24),
        h = i(25),
        d = i(17),
        u = i(18),
        s = i(19),
        o = i(20),
        a = i(21),
        l = i(22),
        t = i(48),
        f = i(49),
        _ = i(35),
        e.exports = function() {
            function e(e, t, i) {
                var n;
                e || (e = {}),
                e.writer ? v(e.writer) && (n = e.writer,
                e.writer = new _(n)) : e.writer = new _(e),
                this.options = e,
                this.writer = e.writer,
                this.stringify = new f(e),
                this.onDataCallback = t || function() {}
                ,
                this.onEndCallback = i || function() {}
                ,
                this.currentNode = null,
                this.currentLevel = -1,
                this.openTags = {},
                this.documentStarted = !1,
                this.documentCompleted = !1,
                this.root = null
            }
            return e.prototype.node = function(e, t, i) {
                var n;
                if (null == e)
                    throw new Error("Missing node name");
                if (this.root && -1 === this.currentLevel)
                    throw new Error("Document can only have one root node");
                return this.openCurrent(),
                e = e.valueOf(),
                null == t && (t = {}),
                t = t.valueOf(),
                y(t) || (i = (n = [t, i])[0],
                t = n[1]),
                this.currentNode = new c(this,e,t),
                this.currentNode.children = !1,
                this.currentLevel++,
                this.openTags[this.currentLevel] = this.currentNode,
                null != i && this.text(i),
                this
            }
            ,
            e.prototype.element = function(e, t, i) {
                return this.currentNode && this.currentNode instanceof u ? this.dtdElement.apply(this, arguments) : this.node(e, t, i)
            }
            ,
            e.prototype.attribute = function(e, i) {
                var n, r;
                if (!this.currentNode || this.currentNode.children)
                    throw new Error("att() can only be used immediately after an ele() call in callback mode");
                if (null != e && (e = e.valueOf()),
                y(e))
                    for (n in e) {
                        b.call(e, n) && (r = e[n],
                        this.attribute(n, r))
                    }
                else
                    m(i) && (i = i.apply()),
                    this.options.skipNullAttributes && null == i || (this.currentNode.attributes[e] = new t(this,e,i));
                return this
            }
            ,
            e.prototype.text = function(e) {
                var t;
                return this.openCurrent(),
                t = new g(this,e),
                this.onData(this.writer.text(t, this.currentLevel + 1)),
                this
            }
            ,
            e.prototype.cdata = function(e) {
                var t;
                return this.openCurrent(),
                t = new n(this,e),
                this.onData(this.writer.cdata(t, this.currentLevel + 1)),
                this
            }
            ,
            e.prototype.comment = function(e) {
                var t;
                return this.openCurrent(),
                t = new r(this,e),
                this.onData(this.writer.comment(t, this.currentLevel + 1)),
                this
            }
            ,
            e.prototype.raw = function(e) {
                var t;
                return this.openCurrent(),
                t = new p(this,e),
                this.onData(this.writer.raw(t, this.currentLevel + 1)),
                this
            }
            ,
            e.prototype.instruction = function(e, t) {
                var i, n, r, s, a;
                if (this.openCurrent(),
                null != e && (e = e.valueOf()),
                null != t && (t = t.valueOf()),
                Array.isArray(e))
                    for (i = 0,
                    s = e.length; i < s; i++) {
                        n = e[i],
                        this.instruction(n)
                    }
                else if (y(e))
                    for (n in e) {
                        b.call(e, n) && (r = e[n],
                        this.instruction(n, r))
                    }
                else
                    m(t) && (t = t.apply()),
                    a = new h(this,e,t),
                    this.onData(this.writer.processingInstruction(a, this.currentLevel + 1));
                return this
            }
            ,
            e.prototype.declaration = function(e, t, i) {
                var n;
                if (this.openCurrent(),
                this.documentStarted)
                    throw new Error("declaration() must be the first node");
                return n = new d(this,e,t,i),
                this.onData(this.writer.declaration(n, this.currentLevel + 1)),
                this
            }
            ,
            e.prototype.doctype = function(e, t, i) {
                if (this.openCurrent(),
                null == e)
                    throw new Error("Missing root node name");
                if (this.root)
                    throw new Error("dtd() must come before the root node");
                return this.currentNode = new u(this,t,i),
                this.currentNode.rootNodeName = e,
                this.currentNode.children = !1,
                this.currentLevel++,
                this.openTags[this.currentLevel] = this.currentNode,
                this
            }
            ,
            e.prototype.dtdElement = function(e, t) {
                var i;
                return this.openCurrent(),
                i = new a(this,e,t),
                this.onData(this.writer.dtdElement(i, this.currentLevel + 1)),
                this
            }
            ,
            e.prototype.attList = function(e, t, i, n, r) {
                var a;
                return this.openCurrent(),
                a = new s(this,e,t,i,n,r),
                this.onData(this.writer.dtdAttList(a, this.currentLevel + 1)),
                this
            }
            ,
            e.prototype.entity = function(e, t) {
                var i;
                return this.openCurrent(),
                i = new o(this,!1,e,t),
                this.onData(this.writer.dtdEntity(i, this.currentLevel + 1)),
                this
            }
            ,
            e.prototype.pEntity = function(e, t) {
                var i;
                return this.openCurrent(),
                i = new o(this,!0,e,t),
                this.onData(this.writer.dtdEntity(i, this.currentLevel + 1)),
                this
            }
            ,
            e.prototype.notation = function(e, t) {
                var i;
                return this.openCurrent(),
                i = new l(this,e,t),
                this.onData(this.writer.dtdNotation(i, this.currentLevel + 1)),
                this
            }
            ,
            e.prototype.up = function() {
                if (this.currentLevel < 0)
                    throw new Error("The document node has no parent");
                return this.currentNode ? (this.currentNode.children ? this.closeNode(this.currentNode) : this.openNode(this.currentNode),
                this.currentNode = null) : this.closeNode(this.openTags[this.currentLevel]),
                delete this.openTags[this.currentLevel],
                this.currentLevel--,
                this
            }
            ,
            e.prototype.end = function() {
                for (; this.currentLevel >= 0; ) {
                    this.up()
                }
                return this.onEnd()
            }
            ,
            e.prototype.openCurrent = function() {
                if (this.currentNode)
                    return this.currentNode.children = !0,
                    this.openNode(this.currentNode)
            }
            ,
            e.prototype.openNode = function(e) {
                if (!e.isOpen)
                    return !this.root && 0 === this.currentLevel && e instanceof c && (this.root = e),
                    this.onData(this.writer.openNode(e, this.currentLevel)),
                    e.isOpen = !0
            }
            ,
            e.prototype.closeNode = function(e) {
                if (!e.isClosed)
                    return this.onData(this.writer.closeNode(e, this.currentLevel)),
                    e.isClosed = !0
            }
            ,
            e.prototype.onData = function(e) {
                return this.documentStarted = !0,
                this.onDataCallback(e)
            }
            ,
            e.prototype.onEnd = function() {
                return this.documentCompleted = !0,
                this.onEndCallback()
            }
            ,
            e.prototype.ele = function() {
                return this.element.apply(this, arguments)
            }
            ,
            e.prototype.nod = function(e, t, i) {
                return this.node(e, t, i)
            }
            ,
            e.prototype.txt = function(e) {
                return this.text(e)
            }
            ,
            e.prototype.dat = function(e) {
                return this.cdata(e)
            }
            ,
            e.prototype.com = function(e) {
                return this.comment(e)
            }
            ,
            e.prototype.ins = function(e, t) {
                return this.instruction(e, t)
            }
            ,
            e.prototype.dec = function(e, t, i) {
                return this.declaration(e, t, i)
            }
            ,
            e.prototype.dtd = function(e, t, i) {
                return this.doctype(e, t, i)
            }
            ,
            e.prototype.e = function(e, t, i) {
                return this.element(e, t, i)
            }
            ,
            e.prototype.n = function(e, t, i) {
                return this.node(e, t, i)
            }
            ,
            e.prototype.t = function(e) {
                return this.text(e)
            }
            ,
            e.prototype.d = function(e) {
                return this.cdata(e)
            }
            ,
            e.prototype.c = function(e) {
                return this.comment(e)
            }
            ,
            e.prototype.r = function(e) {
                return this.raw(e)
            }
            ,
            e.prototype.i = function(e, t) {
                return this.instruction(e, t)
            }
            ,
            e.prototype.att = function() {
                return this.currentNode && this.currentNode instanceof u ? this.attList.apply(this, arguments) : this.attribute.apply(this, arguments)
            }
            ,
            e.prototype.a = function() {
                return this.currentNode && this.currentNode instanceof u ? this.attList.apply(this, arguments) : this.attribute.apply(this, arguments)
            }
            ,
            e.prototype.ent = function(e, t) {
                return this.entity(e, t)
            }
            ,
            e.prototype.pent = function(e, t) {
                return this.pEntity(e, t)
            }
            ,
            e.prototype.not = function(e, t) {
                return this.notation(e, t)
            }
            ,
            e
        }()
    }
    ).call(this)
}
, function(e, t, i) {
    (function() {
        var t, n, r, s, a, o, l, d, u, c, h, p, _, f = {}.hasOwnProperty;
        l = i(17),
        d = i(18),
        t = i(15),
        n = i(16),
        u = i(14),
        h = i(23),
        p = i(24),
        c = i(25),
        r = i(19),
        s = i(21),
        a = i(20),
        o = i(22),
        _ = i(50),
        e.exports = function(e) {
            function i(e, t) {
                i.__super__.constructor.call(this, t),
                this.stream = e
            }
            return function(e, t) {
                for (var i in t) {
                    f.call(t, i) && (e[i] = t[i])
                }
                function n() {
                    this.constructor = e
                }
                n.prototype = t.prototype,
                e.prototype = new n,
                e.__super__ = t.prototype
            }(i, e),
            i.prototype.document = function(e) {
                var t, i, r, s, a, o, u, h;
                for (i = 0,
                s = (o = e.children).length; i < s; i++) {
                    (t = o[i]).isLastRootNode = !1
                }
                for (e.children[e.children.length - 1].isLastRootNode = !0,
                h = [],
                r = 0,
                a = (u = e.children).length; r < a; r++) {
                    switch (t = u[r],
                    !1) {
                    case !(t instanceof l):
                        h.push(this.declaration(t));
                        break;
                    case !(t instanceof d):
                        h.push(this.docType(t));
                        break;
                    case !(t instanceof n):
                        h.push(this.comment(t));
                        break;
                    case !(t instanceof c):
                        h.push(this.processingInstruction(t));
                        break;
                    default:
                        h.push(this.element(t));
                    }
                }
                return h
            }
            ,
            i.prototype.attribute = function(e) {
                return this.stream.write(" " + e.name + "=\"" + e.value + "\"")
            }
            ,
            i.prototype.cdata = function(e, t) {
                return this.stream.write(this.space(t) + "<![CDATA[" + e.text + "]]>" + this.endline(e))
            }
            ,
            i.prototype.comment = function(e, t) {
                return this.stream.write(this.space(t) + "<!-- " + e.text + " -->" + this.endline(e))
            }
            ,
            i.prototype.declaration = function(e, t) {
                return this.stream.write(this.space(t)),
                this.stream.write("<?xml version=\"" + e.version + "\""),
                null != e.encoding && this.stream.write(" encoding=\"" + e.encoding + "\""),
                null != e.standalone && this.stream.write(" standalone=\"" + e.standalone + "\""),
                this.stream.write(this.spacebeforeslash + "?>"),
                this.stream.write(this.endline(e))
            }
            ,
            i.prototype.docType = function(e, i) {
                var l, d, u, h;
                if (i || (i = 0),
                this.stream.write(this.space(i)),
                this.stream.write("<!DOCTYPE " + e.root().name),
                e.pubID && e.sysID ? this.stream.write(" PUBLIC \"" + e.pubID + "\" \"" + e.sysID + "\"") : e.sysID && this.stream.write(" SYSTEM \"" + e.sysID + "\""),
                e.children.length > 0) {
                    for (this.stream.write(" ["),
                    this.stream.write(this.endline(e)),
                    d = 0,
                    u = (h = e.children).length; d < u; d++) {
                        switch (l = h[d],
                        !1) {
                        case !(l instanceof r):
                            this.dtdAttList(l, i + 1);
                            break;
                        case !(l instanceof s):
                            this.dtdElement(l, i + 1);
                            break;
                        case !(l instanceof a):
                            this.dtdEntity(l, i + 1);
                            break;
                        case !(l instanceof o):
                            this.dtdNotation(l, i + 1);
                            break;
                        case !(l instanceof t):
                            this.cdata(l, i + 1);
                            break;
                        case !(l instanceof n):
                            this.comment(l, i + 1);
                            break;
                        case !(l instanceof c):
                            this.processingInstruction(l, i + 1);
                            break;
                        default:
                            throw new Error("Unknown DTD node type: " + l.constructor.name);
                        }
                    }
                    this.stream.write("]")
                }
                return this.stream.write(this.spacebeforeslash + ">"),
                this.stream.write(this.endline(e))
            }
            ,
            i.prototype.element = function(e, i) {
                var r, s, a, o, l, d, _, g;
                for (l in i || (i = 0),
                g = this.space(i),
                this.stream.write(g + "<" + e.name),
                d = e.attributes) {
                    f.call(d, l) && (r = d[l],
                    this.attribute(r))
                }
                if (0 === e.children.length || e.children.every(function(e) {
                    return "" === e.value
                }))
                    this.allowEmpty ? this.stream.write("></" + e.name + ">") : this.stream.write(this.spacebeforeslash + "/>");
                else if (this.pretty && 1 === e.children.length && null != e.children[0].value)
                    this.stream.write(">"),
                    this.stream.write(e.children[0].value),
                    this.stream.write("</" + e.name + ">");
                else {
                    for (this.stream.write(">" + this.newline),
                    a = 0,
                    o = (_ = e.children).length; a < o; a++) {
                        switch (s = _[a],
                        !1) {
                        case !(s instanceof t):
                            this.cdata(s, i + 1);
                            break;
                        case !(s instanceof n):
                            this.comment(s, i + 1);
                            break;
                        case !(s instanceof u):
                            this.element(s, i + 1);
                            break;
                        case !(s instanceof h):
                            this.raw(s, i + 1);
                            break;
                        case !(s instanceof p):
                            this.text(s, i + 1);
                            break;
                        case !(s instanceof c):
                            this.processingInstruction(s, i + 1);
                            break;
                        default:
                            throw new Error("Unknown XML node type: " + s.constructor.name);
                        }
                    }
                    this.stream.write(g + "</" + e.name + ">")
                }
                return this.stream.write(this.endline(e))
            }
            ,
            i.prototype.processingInstruction = function(e, t) {
                return this.stream.write(this.space(t) + "<?" + e.target),
                e.value && this.stream.write(" " + e.value),
                this.stream.write(this.spacebeforeslash + "?>" + this.endline(e))
            }
            ,
            i.prototype.raw = function(e, t) {
                return this.stream.write(this.space(t) + e.value + this.endline(e))
            }
            ,
            i.prototype.text = function(e, t) {
                return this.stream.write(this.space(t) + e.value + this.endline(e))
            }
            ,
            i.prototype.dtdAttList = function(e, t) {
                return this.stream.write(this.space(t) + "<!ATTLIST " + e.elementName + " " + e.attributeName + " " + e.attributeType),
                "#DEFAULT" !== e.defaultValueType && this.stream.write(" " + e.defaultValueType),
                e.defaultValue && this.stream.write(" \"" + e.defaultValue + "\""),
                this.stream.write(this.spacebeforeslash + ">" + this.endline(e))
            }
            ,
            i.prototype.dtdElement = function(e, t) {
                return this.stream.write(this.space(t) + "<!ELEMENT " + e.name + " " + e.value),
                this.stream.write(this.spacebeforeslash + ">" + this.endline(e))
            }
            ,
            i.prototype.dtdEntity = function(e, t) {
                return this.stream.write(this.space(t) + "<!ENTITY"),
                e.pe && this.stream.write(" %"),
                this.stream.write(" " + e.name),
                e.value ? this.stream.write(" \"" + e.value + "\"") : (e.pubID && e.sysID ? this.stream.write(" PUBLIC \"" + e.pubID + "\" \"" + e.sysID + "\"") : e.sysID && this.stream.write(" SYSTEM \"" + e.sysID + "\""),
                e.nData && this.stream.write(" NDATA " + e.nData)),
                this.stream.write(this.spacebeforeslash + ">" + this.endline(e))
            }
            ,
            i.prototype.dtdNotation = function(e, t) {
                return this.stream.write(this.space(t) + "<!NOTATION " + e.name),
                e.pubID && e.sysID ? this.stream.write(" PUBLIC \"" + e.pubID + "\" \"" + e.sysID + "\"") : e.pubID ? this.stream.write(" PUBLIC \"" + e.pubID + "\"") : e.sysID && this.stream.write(" SYSTEM \"" + e.sysID + "\""),
                this.stream.write(this.spacebeforeslash + ">" + this.endline(e))
            }
            ,
            i.prototype.endline = function(e) {
                return e.isLastRootNode ? "" : this.newline
            }
            ,
            i
        }(_)
    }
    ).call(this)
}
, function(e, t, i) {
    "use strict";
    var n = i(89)
      , r = i(6)
      , s = i(53)
      , a = i(36)
      , o = i(54)
      , l = Object.prototype.toString;
    function d(e) {
        if (!(this instanceof d))
            return new d(e);
        this.options = r.assign({
            level: -1,
            method: 8,
            chunkSize: 16384,
            windowBits: 15,
            memLevel: 8,
            strategy: 0,
            to: ""
        }, e || {});
        var t = this.options;
        t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16),
        this.err = 0,
        this.msg = "",
        this.ended = !1,
        this.chunks = [],
        this.strm = new o,
        this.strm.avail_out = 0;
        var i = n.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy);
        if (0 !== i)
            throw new Error(a[i]);
        if (t.header && n.deflateSetHeader(this.strm, t.header),
        t.dictionary) {
            var u;
            if (u = "string" == typeof t.dictionary ? s.string2buf(t.dictionary) : "[object ArrayBuffer]" === l.call(t.dictionary) ? new Uint8Array(t.dictionary) : t.dictionary,
            0 !== (i = n.deflateSetDictionary(this.strm, u)))
                throw new Error(a[i]);
            this._dict_set = !0
        }
    }
    function u(e, t) {
        var i = new d(t);
        if (i.push(e, !0),
        i.err)
            throw i.msg || a[i.err];
        return i.result
    }
    d.prototype.push = function(e, t) {
        var i, a, o = this.strm, d = this.options.chunkSize;
        if (this.ended)
            return !1;
        a = t === ~~t ? t : !0 === t ? 4 : 0,
        "string" == typeof e ? o.input = s.string2buf(e) : "[object ArrayBuffer]" === l.call(e) ? o.input = new Uint8Array(e) : o.input = e,
        o.next_in = 0,
        o.avail_in = o.input.length;
        do {
            if (0 === o.avail_out && (o.output = new r.Buf8(d),
            o.next_out = 0,
            o.avail_out = d),
            1 !== (i = n.deflate(o, a)) && 0 !== i)
                return this.onEnd(i),
                this.ended = !0,
                !1;
            0 !== o.avail_out && (0 !== o.avail_in || 4 !== a && 2 !== a) || ("string" === this.options.to ? this.onData(s.buf2binstring(r.shrinkBuf(o.output, o.next_out))) : this.onData(r.shrinkBuf(o.output, o.next_out)))
        } while ((o.avail_in > 0 || 0 === o.avail_out) && 1 !== i);return 4 === a ? (i = n.deflateEnd(this.strm),
        this.onEnd(i),
        this.ended = !0,
        0 === i) : 2 !== a || (this.onEnd(0),
        o.avail_out = 0,
        !0)
    }
    ,
    d.prototype.onData = function(e) {
        this.chunks.push(e)
    }
    ,
    d.prototype.onEnd = function(e) {
        0 === e && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = r.flattenChunks(this.chunks)),
        this.chunks = [],
        this.err = e,
        this.msg = this.strm.msg
    }
    ,
    t.Deflate = d,
    t.deflate = u,
    t.deflateRaw = function(e, t) {
        return (t = t || {}).raw = !0,
        u(e, t)
    }
    ,
    t.gzip = function(e, t) {
        return (t = t || {}).gzip = !0,
        u(e, t)
    }
}
, function(e, t, i) {
    "use strict";
    var n, r = i(6), s = i(90), a = i(51), o = i(52), l = i(36);
    function d(e, t) {
        return e.msg = l[t],
        t
    }
    function u(e) {
        return (e << 1) - (e > 4 ? 9 : 0)
    }
    function c(e) {
        for (var t = e.length; --t >= 0; ) {
            e[t] = 0
        }
    }
    function h(e) {
        var t = e.state
          , i = t.pending;
        i > e.avail_out && (i = e.avail_out),
        0 !== i && (r.arraySet(e.output, t.pending_buf, t.pending_out, i, e.next_out),
        e.next_out += i,
        t.pending_out += i,
        e.total_out += i,
        e.avail_out -= i,
        t.pending -= i,
        0 === t.pending && (t.pending_out = 0))
    }
    function p(e, t) {
        s._tr_flush_block(e, e.block_start >= 0 ? e.block_start : -1, e.strstart - e.block_start, t),
        e.block_start = e.strstart,
        h(e.strm)
    }
    function _(e, t) {
        e.pending_buf[e.pending++] = t
    }
    function f(e, t) {
        e.pending_buf[e.pending++] = t >>> 8 & 255,
        e.pending_buf[e.pending++] = 255 & t
    }
    function g(e, t) {
        var i, n, r = e.max_chain_length, s = e.strstart, a = e.prev_length, o = e.nice_match, l = e.strstart > e.w_size - 262 ? e.strstart - (e.w_size - 262) : 0, d = e.window, u = e.w_mask, c = e.prev, h = e.strstart + 258, p = d[s + a - 1], _ = d[s + a];
        e.prev_length >= e.good_match && (r >>= 2),
        o > e.lookahead && (o = e.lookahead);
        do {
            if (d[(i = t) + a] === _ && d[i + a - 1] === p && d[i] === d[s] && d[++i] === d[s + 1]) {
                s += 2,
                i++;
                do {} while (d[++s] === d[++i] && d[++s] === d[++i] && d[++s] === d[++i] && d[++s] === d[++i] && d[++s] === d[++i] && d[++s] === d[++i] && d[++s] === d[++i] && d[++s] === d[++i] && s < h);if (n = 258 - (h - s),
                s = h - 258,
                n > a) {
                    if (e.match_start = t,
                    a = n,
                    n >= o)
                        break;
                    p = d[s + a - 1],
                    _ = d[s + a]
                }
            }
        } while ((t = c[t & u]) > l && 0 != --r);return a <= e.lookahead ? a : e.lookahead
    }
    function m(e) {
        var t, i, n, s, l, d, u, c, h, p, _ = e.w_size;
        do {
            if (s = e.window_size - e.lookahead - e.strstart,
            e.strstart >= _ + (_ - 262)) {
                r.arraySet(e.window, e.window, _, _, 0),
                e.match_start -= _,
                e.strstart -= _,
                e.block_start -= _,
                t = i = e.hash_size;
                do {
                    n = e.head[--t],
                    e.head[t] = n >= _ ? n - _ : 0
                } while (--i);t = i = _;
                do {
                    n = e.prev[--t],
                    e.prev[t] = n >= _ ? n - _ : 0
                } while (--i);s += _
            }
            if (0 === e.strm.avail_in)
                break;
            if (d = e.strm,
            u = e.window,
            c = e.strstart + e.lookahead,
            h = s,
            p = void 0,
            (p = d.avail_in) > h && (p = h),
            i = 0 === p ? 0 : (d.avail_in -= p,
            r.arraySet(u, d.input, d.next_in, p, c),
            1 === d.state.wrap ? d.adler = a(d.adler, u, p, c) : 2 === d.state.wrap && (d.adler = o(d.adler, u, p, c)),
            d.next_in += p,
            d.total_in += p,
            p),
            e.lookahead += i,
            e.lookahead + e.insert >= 3)
                for (l = e.strstart - e.insert,
                e.ins_h = e.window[l],
                e.ins_h = (e.ins_h << e.hash_shift ^ e.window[l + 1]) & e.hash_mask; e.insert && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[l + 3 - 1]) & e.hash_mask,
                e.prev[l & e.w_mask] = e.head[e.ins_h],
                e.head[e.ins_h] = l,
                l++,
                e.insert--,
                !(e.lookahead + e.insert < 3)); ) {}
        } while (e.lookahead < 262 && 0 !== e.strm.avail_in)
    }
    function y(e, t) {
        for (var i, n; ; ) {
            if (e.lookahead < 262) {
                if (m(e),
                e.lookahead < 262 && 0 === t)
                    return 1;
                if (0 === e.lookahead)
                    break
            }
            if (i = 0,
            e.lookahead >= 3 && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask,
            i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
            e.head[e.ins_h] = e.strstart),
            0 !== i && e.strstart - i <= e.w_size - 262 && (e.match_length = g(e, i)),
            e.match_length >= 3) {
                if (n = s._tr_tally(e, e.strstart - e.match_start, e.match_length - 3),
                e.lookahead -= e.match_length,
                e.match_length <= e.max_lazy_match && e.lookahead >= 3) {
                    e.match_length--;
                    do {
                        e.strstart++,
                        e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask,
                        i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
                        e.head[e.ins_h] = e.strstart
                    } while (0 != --e.match_length);e.strstart++
                } else
                    e.strstart += e.match_length,
                    e.match_length = 0,
                    e.ins_h = e.window[e.strstart],
                    e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 1]) & e.hash_mask;
            } else
                n = s._tr_tally(e, 0, e.window[e.strstart]),
                e.lookahead--,
                e.strstart++;
            if (n && (p(e, !1),
            0 === e.strm.avail_out))
                return 1
        }
        return e.insert = e.strstart < 2 ? e.strstart : 2,
        4 === t ? (p(e, !0),
        0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (p(e, !1),
        0 === e.strm.avail_out) ? 1 : 2
    }
    function v(e, t) {
        for (var i, n, r; ; ) {
            if (e.lookahead < 262) {
                if (m(e),
                e.lookahead < 262 && 0 === t)
                    return 1;
                if (0 === e.lookahead)
                    break
            }
            if (i = 0,
            e.lookahead >= 3 && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask,
            i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
            e.head[e.ins_h] = e.strstart),
            e.prev_length = e.match_length,
            e.prev_match = e.match_start,
            e.match_length = 2,
            0 !== i && e.prev_length < e.max_lazy_match && e.strstart - i <= e.w_size - 262 && (e.match_length = g(e, i),
            e.match_length <= 5 && (1 === e.strategy || 3 === e.match_length && e.strstart - e.match_start > 4096) && (e.match_length = 2)),
            e.prev_length >= 3 && e.match_length <= e.prev_length) {
                r = e.strstart + e.lookahead - 3,
                n = s._tr_tally(e, e.strstart - 1 - e.prev_match, e.prev_length - 3),
                e.lookahead -= e.prev_length - 1,
                e.prev_length -= 2;
                do {
                    ++e.strstart <= r && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 3 - 1]) & e.hash_mask,
                    i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
                    e.head[e.ins_h] = e.strstart)
                } while (0 != --e.prev_length);if (e.match_available = 0,
                e.match_length = 2,
                e.strstart++,
                n && (p(e, !1),
                0 === e.strm.avail_out))
                    return 1
            } else if (e.match_available) {
                if ((n = s._tr_tally(e, 0, e.window[e.strstart - 1])) && p(e, !1),
                e.strstart++,
                e.lookahead--,
                0 === e.strm.avail_out)
                    return 1
            } else
                e.match_available = 1,
                e.strstart++,
                e.lookahead--
        }
        return e.match_available && (n = s._tr_tally(e, 0, e.window[e.strstart - 1]),
        e.match_available = 0),
        e.insert = e.strstart < 2 ? e.strstart : 2,
        4 === t ? (p(e, !0),
        0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (p(e, !1),
        0 === e.strm.avail_out) ? 1 : 2
    }
    function E(e, t, i, n, r) {
        this.good_length = e,
        this.max_lazy = t,
        this.nice_length = i,
        this.max_chain = n,
        this.func = r
    }
    function b() {
        this.strm = null,
        this.status = 0,
        this.pending_buf = null,
        this.pending_buf_size = 0,
        this.pending_out = 0,
        this.pending = 0,
        this.wrap = 0,
        this.gzhead = null,
        this.gzindex = 0,
        this.method = 8,
        this.last_flush = -1,
        this.w_size = 0,
        this.w_bits = 0,
        this.w_mask = 0,
        this.window = null,
        this.window_size = 0,
        this.prev = null,
        this.head = null,
        this.ins_h = 0,
        this.hash_size = 0,
        this.hash_bits = 0,
        this.hash_mask = 0,
        this.hash_shift = 0,
        this.block_start = 0,
        this.match_length = 0,
        this.prev_match = 0,
        this.match_available = 0,
        this.strstart = 0,
        this.match_start = 0,
        this.lookahead = 0,
        this.prev_length = 0,
        this.max_chain_length = 0,
        this.max_lazy_match = 0,
        this.level = 0,
        this.strategy = 0,
        this.good_match = 0,
        this.nice_match = 0,
        this.dyn_ltree = new r.Buf16(1146),
        this.dyn_dtree = new r.Buf16(122),
        this.bl_tree = new r.Buf16(78),
        c(this.dyn_ltree),
        c(this.dyn_dtree),
        c(this.bl_tree),
        this.l_desc = null,
        this.d_desc = null,
        this.bl_desc = null,
        this.bl_count = new r.Buf16(16),
        this.heap = new r.Buf16(573),
        c(this.heap),
        this.heap_len = 0,
        this.heap_max = 0,
        this.depth = new r.Buf16(573),
        c(this.depth),
        this.l_buf = 0,
        this.lit_bufsize = 0,
        this.last_lit = 0,
        this.d_buf = 0,
        this.opt_len = 0,
        this.static_len = 0,
        this.matches = 0,
        this.insert = 0,
        this.bi_buf = 0,
        this.bi_valid = 0
    }
    function T(e) {
        var t;
        return e && e.state ? (e.total_in = e.total_out = 0,
        e.data_type = 2,
        (t = e.state).pending = 0,
        t.pending_out = 0,
        t.wrap < 0 && (t.wrap = -t.wrap),
        t.status = t.wrap ? 42 : 113,
        e.adler = 2 === t.wrap ? 0 : 1,
        t.last_flush = 0,
        s._tr_init(t),
        0) : d(e, -2)
    }
    function S(e) {
        var t, i = T(e);
        return 0 === i && ((t = e.state).window_size = 2 * t.w_size,
        c(t.head),
        t.max_lazy_match = n[t.level].max_lazy,
        t.good_match = n[t.level].good_length,
        t.nice_match = n[t.level].nice_length,
        t.max_chain_length = n[t.level].max_chain,
        t.strstart = 0,
        t.block_start = 0,
        t.lookahead = 0,
        t.insert = 0,
        t.match_length = t.prev_length = 2,
        t.match_available = 0,
        t.ins_h = 0),
        i
    }
    function A(e, t, i, n, s, a) {
        if (!e)
            return -2;
        var o = 1;
        if (-1 === t && (t = 6),
        n < 0 ? (o = 0,
        n = -n) : n > 15 && (o = 2,
        n -= 16),
        s < 1 || s > 9 || 8 !== i || n < 8 || n > 15 || t < 0 || t > 9 || a < 0 || a > 4)
            return d(e, -2);
        8 === n && (n = 9);
        var l = new b;
        return e.state = l,
        l.strm = e,
        l.wrap = o,
        l.gzhead = null,
        l.w_bits = n,
        l.w_size = 1 << l.w_bits,
        l.w_mask = l.w_size - 1,
        l.hash_bits = s + 7,
        l.hash_size = 1 << l.hash_bits,
        l.hash_mask = l.hash_size - 1,
        l.hash_shift = ~~((l.hash_bits + 3 - 1) / 3),
        l.window = new r.Buf8(2 * l.w_size),
        l.head = new r.Buf16(l.hash_size),
        l.prev = new r.Buf16(l.w_size),
        l.lit_bufsize = 1 << s + 6,
        l.pending_buf_size = 4 * l.lit_bufsize,
        l.pending_buf = new r.Buf8(l.pending_buf_size),
        l.d_buf = 1 * l.lit_bufsize,
        l.l_buf = 3 * l.lit_bufsize,
        l.level = t,
        l.strategy = a,
        l.method = i,
        S(e)
    }
    n = [new E(0,0,0,0,function(e, t) {
        var i = 65535;
        for (i > e.pending_buf_size - 5 && (i = e.pending_buf_size - 5); ; ) {
            if (e.lookahead <= 1) {
                if (m(e),
                0 === e.lookahead && 0 === t)
                    return 1;
                if (0 === e.lookahead)
                    break
            }
            e.strstart += e.lookahead,
            e.lookahead = 0;
            var n = e.block_start + i;
            if ((0 === e.strstart || e.strstart >= n) && (e.lookahead = e.strstart - n,
            e.strstart = n,
            p(e, !1),
            0 === e.strm.avail_out))
                return 1;
            if (e.strstart - e.block_start >= e.w_size - 262 && (p(e, !1),
            0 === e.strm.avail_out))
                return 1
        }
        return e.insert = 0,
        4 === t ? (p(e, !0),
        0 === e.strm.avail_out ? 3 : 4) : (e.strstart > e.block_start && (p(e, !1),
        e.strm.avail_out),
        1)
    }
    ), new E(4,4,8,4,y), new E(4,5,16,8,y), new E(4,6,32,32,y), new E(4,4,16,16,v), new E(8,16,32,32,v), new E(8,16,128,128,v), new E(8,32,128,256,v), new E(32,128,258,1024,v), new E(32,258,258,4096,v)],
    t.deflateInit = function(e, t) {
        return A(e, t, 8, 15, 8, 0)
    }
    ,
    t.deflateInit2 = A,
    t.deflateReset = S,
    t.deflateResetKeep = T,
    t.deflateSetHeader = function(e, t) {
        return e && e.state ? 2 !== e.state.wrap ? -2 : (e.state.gzhead = t,
        0) : -2
    }
    ,
    t.deflate = function(e, t) {
        var i, r, a, l;
        if (!e || !e.state || t > 5 || t < 0)
            return e ? d(e, -2) : -2;
        if (r = e.state,
        !e.output || !e.input && 0 !== e.avail_in || 666 === r.status && 4 !== t)
            return d(e, 0 === e.avail_out ? -5 : -2);
        if (r.strm = e,
        i = r.last_flush,
        r.last_flush = t,
        42 === r.status)
            if (2 === r.wrap)
                e.adler = 0,
                _(r, 31),
                _(r, 139),
                _(r, 8),
                r.gzhead ? (_(r, (r.gzhead.text ? 1 : 0) + (r.gzhead.hcrc ? 2 : 0) + (r.gzhead.extra ? 4 : 0) + (r.gzhead.name ? 8 : 0) + (r.gzhead.comment ? 16 : 0)),
                _(r, 255 & r.gzhead.time),
                _(r, r.gzhead.time >> 8 & 255),
                _(r, r.gzhead.time >> 16 & 255),
                _(r, r.gzhead.time >> 24 & 255),
                _(r, 9 === r.level ? 2 : r.strategy >= 2 || r.level < 2 ? 4 : 0),
                _(r, 255 & r.gzhead.os),
                r.gzhead.extra && r.gzhead.extra.length && (_(r, 255 & r.gzhead.extra.length),
                _(r, r.gzhead.extra.length >> 8 & 255)),
                r.gzhead.hcrc && (e.adler = o(e.adler, r.pending_buf, r.pending, 0)),
                r.gzindex = 0,
                r.status = 69) : (_(r, 0),
                _(r, 0),
                _(r, 0),
                _(r, 0),
                _(r, 0),
                _(r, 9 === r.level ? 2 : r.strategy >= 2 || r.level < 2 ? 4 : 0),
                _(r, 3),
                r.status = 113);
            else {
                var g = 8 + (r.w_bits - 8 << 4) << 8;
                g |= (r.strategy >= 2 || r.level < 2 ? 0 : r.level < 6 ? 1 : 6 === r.level ? 2 : 3) << 6,
                0 !== r.strstart && (g |= 32),
                g += 31 - g % 31,
                r.status = 113,
                f(r, g),
                0 !== r.strstart && (f(r, e.adler >>> 16),
                f(r, 65535 & e.adler)),
                e.adler = 1
            }
        if (69 === r.status)
            if (r.gzhead.extra) {
                for (a = r.pending; r.gzindex < (65535 & r.gzhead.extra.length) && (r.pending !== r.pending_buf_size || (r.gzhead.hcrc && r.pending > a && (e.adler = o(e.adler, r.pending_buf, r.pending - a, a)),
                h(e),
                a = r.pending,
                r.pending !== r.pending_buf_size)); ) {
                    _(r, 255 & r.gzhead.extra[r.gzindex]),
                    r.gzindex++
                }
                r.gzhead.hcrc && r.pending > a && (e.adler = o(e.adler, r.pending_buf, r.pending - a, a)),
                r.gzindex === r.gzhead.extra.length && (r.gzindex = 0,
                r.status = 73)
            } else
                r.status = 73;
        if (73 === r.status)
            if (r.gzhead.name) {
                a = r.pending;
                do {
                    if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > a && (e.adler = o(e.adler, r.pending_buf, r.pending - a, a)),
                    h(e),
                    a = r.pending,
                    r.pending === r.pending_buf_size)) {
                        l = 1;
                        break
                    }
                    l = r.gzindex < r.gzhead.name.length ? 255 & r.gzhead.name.charCodeAt(r.gzindex++) : 0,
                    _(r, l)
                } while (0 !== l);r.gzhead.hcrc && r.pending > a && (e.adler = o(e.adler, r.pending_buf, r.pending - a, a)),
                0 === l && (r.gzindex = 0,
                r.status = 91)
            } else
                r.status = 91;
        if (91 === r.status)
            if (r.gzhead.comment) {
                a = r.pending;
                do {
                    if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > a && (e.adler = o(e.adler, r.pending_buf, r.pending - a, a)),
                    h(e),
                    a = r.pending,
                    r.pending === r.pending_buf_size)) {
                        l = 1;
                        break
                    }
                    l = r.gzindex < r.gzhead.comment.length ? 255 & r.gzhead.comment.charCodeAt(r.gzindex++) : 0,
                    _(r, l)
                } while (0 !== l);r.gzhead.hcrc && r.pending > a && (e.adler = o(e.adler, r.pending_buf, r.pending - a, a)),
                0 === l && (r.status = 103)
            } else
                r.status = 103;
        if (103 === r.status && (r.gzhead.hcrc ? (r.pending + 2 > r.pending_buf_size && h(e),
        r.pending + 2 <= r.pending_buf_size && (_(r, 255 & e.adler),
        _(r, e.adler >> 8 & 255),
        e.adler = 0,
        r.status = 113)) : r.status = 113),
        0 !== r.pending) {
            if (h(e),
            0 === e.avail_out)
                return r.last_flush = -1,
                0
        } else if (0 === e.avail_in && u(t) <= u(i) && 4 !== t)
            return d(e, -5);
        if (666 === r.status && 0 !== e.avail_in)
            return d(e, -5);
        if (0 !== e.avail_in || 0 !== r.lookahead || 0 !== t && 666 !== r.status) {
            var y = 2 === r.strategy ? function(e, t) {
                for (var i; ; ) {
                    if (0 === e.lookahead && (m(e),
                    0 === e.lookahead)) {
                        if (0 === t)
                            return 1;
                        break
                    }
                    if (e.match_length = 0,
                    i = s._tr_tally(e, 0, e.window[e.strstart]),
                    e.lookahead--,
                    e.strstart++,
                    i && (p(e, !1),
                    0 === e.strm.avail_out))
                        return 1
                }
                return e.insert = 0,
                4 === t ? (p(e, !0),
                0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (p(e, !1),
                0 === e.strm.avail_out) ? 1 : 2
            }(r, t) : 3 === r.strategy ? function(e, t) {
                for (var i, n, r, a, o = e.window; ; ) {
                    if (e.lookahead <= 258) {
                        if (m(e),
                        e.lookahead <= 258 && 0 === t)
                            return 1;
                        if (0 === e.lookahead)
                            break
                    }
                    if (e.match_length = 0,
                    e.lookahead >= 3 && e.strstart > 0 && (n = o[r = e.strstart - 1]) === o[++r] && n === o[++r] && n === o[++r]) {
                        a = e.strstart + 258;
                        do {} while (n === o[++r] && n === o[++r] && n === o[++r] && n === o[++r] && n === o[++r] && n === o[++r] && n === o[++r] && n === o[++r] && r < a);e.match_length = 258 - (a - r),
                        e.match_length > e.lookahead && (e.match_length = e.lookahead)
                    }
                    if (e.match_length >= 3 ? (i = s._tr_tally(e, 1, e.match_length - 3),
                    e.lookahead -= e.match_length,
                    e.strstart += e.match_length,
                    e.match_length = 0) : (i = s._tr_tally(e, 0, e.window[e.strstart]),
                    e.lookahead--,
                    e.strstart++),
                    i && (p(e, !1),
                    0 === e.strm.avail_out))
                        return 1
                }
                return e.insert = 0,
                4 === t ? (p(e, !0),
                0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (p(e, !1),
                0 === e.strm.avail_out) ? 1 : 2
            }(r, t) : n[r.level].func(r, t);
            if (3 !== y && 4 !== y || (r.status = 666),
            1 === y || 3 === y)
                return 0 === e.avail_out && (r.last_flush = -1),
                0;
            if (2 === y && (1 === t ? s._tr_align(r) : 5 !== t && (s._tr_stored_block(r, 0, 0, !1),
            3 === t && (c(r.head),
            0 === r.lookahead && (r.strstart = 0,
            r.block_start = 0,
            r.insert = 0))),
            h(e),
            0 === e.avail_out))
                return r.last_flush = -1,
                0
        }
        return 4 !== t ? 0 : r.wrap <= 0 ? 1 : (2 === r.wrap ? (_(r, 255 & e.adler),
        _(r, e.adler >> 8 & 255),
        _(r, e.adler >> 16 & 255),
        _(r, e.adler >> 24 & 255),
        _(r, 255 & e.total_in),
        _(r, e.total_in >> 8 & 255),
        _(r, e.total_in >> 16 & 255),
        _(r, e.total_in >> 24 & 255)) : (f(r, e.adler >>> 16),
        f(r, 65535 & e.adler)),
        h(e),
        r.wrap > 0 && (r.wrap = -r.wrap),
        0 !== r.pending ? 0 : 1)
    }
    ,
    t.deflateEnd = function(e) {
        var t;
        return e && e.state ? 42 !== (t = e.state.status) && 69 !== t && 73 !== t && 91 !== t && 103 !== t && 113 !== t && 666 !== t ? d(e, -2) : (e.state = null,
        113 === t ? d(e, -3) : 0) : -2
    }
    ,
    t.deflateSetDictionary = function(e, t) {
        var i, n, s, o, l, d, u, h, p = t.length;
        if (!e || !e.state)
            return -2;
        if (2 === (o = (i = e.state).wrap) || 1 === o && 42 !== i.status || i.lookahead)
            return -2;
        for (1 === o && (e.adler = a(e.adler, t, p, 0)),
        i.wrap = 0,
        p >= i.w_size && (0 === o && (c(i.head),
        i.strstart = 0,
        i.block_start = 0,
        i.insert = 0),
        h = new r.Buf8(i.w_size),
        r.arraySet(h, t, p - i.w_size, i.w_size, 0),
        t = h,
        p = i.w_size),
        l = e.avail_in,
        d = e.next_in,
        u = e.input,
        e.avail_in = p,
        e.next_in = 0,
        e.input = t,
        m(i); i.lookahead >= 3; ) {
            n = i.strstart,
            s = i.lookahead - 2;
            do {
                i.ins_h = (i.ins_h << i.hash_shift ^ i.window[n + 3 - 1]) & i.hash_mask,
                i.prev[n & i.w_mask] = i.head[i.ins_h],
                i.head[i.ins_h] = n,
                n++
            } while (--s);i.strstart = n,
            i.lookahead = 2,
            m(i)
        }
        return i.strstart += i.lookahead,
        i.block_start = i.strstart,
        i.insert = i.lookahead,
        i.lookahead = 0,
        i.match_length = i.prev_length = 2,
        i.match_available = 0,
        e.next_in = d,
        e.input = u,
        e.avail_in = l,
        i.wrap = o,
        0
    }
    ,
    t.deflateInfo = "pako deflate (from Nodeca project)"
}
, function(e, t, i) {
    "use strict";
    var n = i(6);
    function r(e) {
        for (var t = e.length; --t >= 0; ) {
            e[t] = 0
        }
    }
    var s = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]
      , a = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]
      , o = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]
      , l = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]
      , d = new Array(576);
    r(d);
    var u = new Array(60);
    r(u);
    var c = new Array(512);
    r(c);
    var h = new Array(256);
    r(h);
    var p = new Array(29);
    r(p);
    var _, f, g, m = new Array(30);
    function y(e, t, i, n, r) {
        this.static_tree = e,
        this.extra_bits = t,
        this.extra_base = i,
        this.elems = n,
        this.max_length = r,
        this.has_stree = e && e.length
    }
    function v(e, t) {
        this.dyn_tree = e,
        this.max_code = 0,
        this.stat_desc = t
    }
    function E(e) {
        return e < 256 ? c[e] : c[256 + (e >>> 7)]
    }
    function b(e, t) {
        e.pending_buf[e.pending++] = 255 & t,
        e.pending_buf[e.pending++] = t >>> 8 & 255
    }
    function T(e, t, i) {
        e.bi_valid > 16 - i ? (e.bi_buf |= t << e.bi_valid & 65535,
        b(e, e.bi_buf),
        e.bi_buf = t >> 16 - e.bi_valid,
        e.bi_valid += i - 16) : (e.bi_buf |= t << e.bi_valid & 65535,
        e.bi_valid += i)
    }
    function S(e, t, i) {
        T(e, i[2 * t], i[2 * t + 1])
    }
    function A(e, t) {
        var i = 0;
        do {
            i |= 1 & e,
            e >>>= 1,
            i <<= 1
        } while (--t > 0);return i >>> 1
    }
    function P(e, t, i) {
        var n, r, s = new Array(16), a = 0;
        for (n = 1; n <= 15; n++) {
            s[n] = a = a + i[n - 1] << 1
        }
        for (r = 0; r <= t; r++) {
            var o = e[2 * r + 1];
            0 !== o && (e[2 * r] = A(s[o]++, o))
        }
    }
    function w(e) {
        var t;
        for (t = 0; t < 286; t++) {
            e.dyn_ltree[2 * t] = 0
        }
        for (t = 0; t < 30; t++) {
            e.dyn_dtree[2 * t] = 0
        }
        for (t = 0; t < 19; t++) {
            e.bl_tree[2 * t] = 0
        }
        e.dyn_ltree[512] = 1,
        e.opt_len = e.static_len = 0,
        e.last_lit = e.matches = 0
    }
    function k(e) {
        e.bi_valid > 8 ? b(e, e.bi_buf) : e.bi_valid > 0 && (e.pending_buf[e.pending++] = e.bi_buf),
        e.bi_buf = 0,
        e.bi_valid = 0
    }
    function C(e, t, i, n) {
        var r = 2 * t
          , s = 2 * i;
        return e[r] < e[s] || e[r] === e[s] && n[t] <= n[i]
    }
    function I(e, t, i) {
        for (var n = e.heap[i], r = i << 1; r <= e.heap_len && (r < e.heap_len && C(t, e.heap[r + 1], e.heap[r], e.depth) && r++,
        !C(t, n, e.heap[r], e.depth)); ) {
            e.heap[i] = e.heap[r],
            i = r,
            r <<= 1
        }
        e.heap[i] = n
    }
    function R(e, t, i) {
        var n, r, o, l, d = 0;
        if (0 !== e.last_lit)
            do {
                n = e.pending_buf[e.d_buf + 2 * d] << 8 | e.pending_buf[e.d_buf + 2 * d + 1],
                r = e.pending_buf[e.l_buf + d],
                d++,
                0 === n ? S(e, r, t) : (S(e, (o = h[r]) + 256 + 1, t),
                0 !== (l = s[o]) && T(e, r -= p[o], l),
                S(e, o = E(--n), i),
                0 !== (l = a[o]) && T(e, n -= m[o], l))
            } while (d < e.last_lit);S(e, 256, t)
    }
    function D(e, t) {
        var i, n, r, s = t.dyn_tree, a = t.stat_desc.static_tree, o = t.stat_desc.has_stree, l = t.stat_desc.elems, d = -1;
        for (e.heap_len = 0,
        e.heap_max = 573,
        i = 0; i < l; i++) {
            0 !== s[2 * i] ? (e.heap[++e.heap_len] = d = i,
            e.depth[i] = 0) : s[2 * i + 1] = 0
        }
        for (; e.heap_len < 2; ) {
            s[2 * (r = e.heap[++e.heap_len] = d < 2 ? ++d : 0)] = 1,
            e.depth[r] = 0,
            e.opt_len--,
            o && (e.static_len -= a[2 * r + 1])
        }
        for (t.max_code = d,
        i = e.heap_len >> 1; i >= 1; i--) {
            I(e, s, i)
        }
        r = l;
        do {
            i = e.heap[1],
            e.heap[1] = e.heap[e.heap_len--],
            I(e, s, 1),
            n = e.heap[1],
            e.heap[--e.heap_max] = i,
            e.heap[--e.heap_max] = n,
            s[2 * r] = s[2 * i] + s[2 * n],
            e.depth[r] = (e.depth[i] >= e.depth[n] ? e.depth[i] : e.depth[n]) + 1,
            s[2 * i + 1] = s[2 * n + 1] = r,
            e.heap[1] = r++,
            I(e, s, 1)
        } while (e.heap_len >= 2);e.heap[--e.heap_max] = e.heap[1],
        function(e, t) {
            var i, n, r, s, a, o, l = t.dyn_tree, d = t.max_code, u = t.stat_desc.static_tree, c = t.stat_desc.has_stree, h = t.stat_desc.extra_bits, p = t.stat_desc.extra_base, _ = t.stat_desc.max_length, f = 0;
            for (s = 0; s <= 15; s++) {
                e.bl_count[s] = 0
            }
            for (l[2 * e.heap[e.heap_max] + 1] = 0,
            i = e.heap_max + 1; i < 573; i++) {
                (s = l[2 * l[2 * (n = e.heap[i]) + 1] + 1] + 1) > _ && (s = _,
                f++),
                l[2 * n + 1] = s,
                n > d || (e.bl_count[s]++,
                a = 0,
                n >= p && (a = h[n - p]),
                o = l[2 * n],
                e.opt_len += o * (s + a),
                c && (e.static_len += o * (u[2 * n + 1] + a)))
            }
            if (0 !== f) {
                do {
                    for (s = _ - 1; 0 === e.bl_count[s]; ) {
                        s--
                    }
                    e.bl_count[s]--,
                    e.bl_count[s + 1] += 2,
                    e.bl_count[_]--,
                    f -= 2
                } while (f > 0);for (s = _; 0 !== s; s--) {
                    for (n = e.bl_count[s]; 0 !== n; ) {
                        (r = e.heap[--i]) > d || (l[2 * r + 1] !== s && (e.opt_len += (s - l[2 * r + 1]) * l[2 * r],
                        l[2 * r + 1] = s),
                        n--)
                    }
                }
            }
        }(e, t),
        P(s, d, e.bl_count)
    }
    function L(e, t, i) {
        var n, r, s = -1, a = t[1], o = 0, l = 7, d = 4;
        for (0 === a && (l = 138,
        d = 3),
        t[2 * (i + 1) + 1] = 65535,
        n = 0; n <= i; n++) {
            r = a,
            a = t[2 * (n + 1) + 1],
            ++o < l && r === a || (o < d ? e.bl_tree[2 * r] += o : 0 !== r ? (r !== s && e.bl_tree[2 * r]++,
            e.bl_tree[32]++) : o <= 10 ? e.bl_tree[34]++ : e.bl_tree[36]++,
            o = 0,
            s = r,
            0 === a ? (l = 138,
            d = 3) : r === a ? (l = 6,
            d = 3) : (l = 7,
            d = 4))
        }
    }
    function M(e, t, i) {
        var n, r, s = -1, a = t[1], o = 0, l = 7, d = 4;
        for (0 === a && (l = 138,
        d = 3),
        n = 0; n <= i; n++) {
            if (r = a,
            a = t[2 * (n + 1) + 1],
            !(++o < l && r === a)) {
                if (o < d)
                    do {
                        S(e, r, e.bl_tree)
                    } while (0 != --o);
                else
                    0 !== r ? (r !== s && (S(e, r, e.bl_tree),
                    o--),
                    S(e, 16, e.bl_tree),
                    T(e, o - 3, 2)) : o <= 10 ? (S(e, 17, e.bl_tree),
                    T(e, o - 3, 3)) : (S(e, 18, e.bl_tree),
                    T(e, o - 11, 7));
                o = 0,
                s = r,
                0 === a ? (l = 138,
                d = 3) : r === a ? (l = 6,
                d = 3) : (l = 7,
                d = 4)
            }
        }
    }
    r(m);
    var O = !1;
    function x(e, t, i, r) {
        T(e, 0 + (r ? 1 : 0), 3),
        function(e, t, i, r) {
            k(e),
            r && (b(e, i),
            b(e, ~i)),
            n.arraySet(e.pending_buf, e.window, t, i, e.pending),
            e.pending += i
        }(e, t, i, !0)
    }
    t._tr_init = function(e) {
        O || (!function() {
            var e, t, i, n, r, l = new Array(16);
            for (i = 0,
            n = 0; n < 28; n++) {
                for (p[n] = i,
                e = 0; e < 1 << s[n]; e++) {
                    h[i++] = n
                }
            }
            for (h[i - 1] = n,
            r = 0,
            n = 0; n < 16; n++) {
                for (m[n] = r,
                e = 0; e < 1 << a[n]; e++) {
                    c[r++] = n
                }
            }
            for (r >>= 7; n < 30; n++) {
                for (m[n] = r << 7,
                e = 0; e < 1 << a[n] - 7; e++) {
                    c[256 + r++] = n
                }
            }
            for (t = 0; t <= 15; t++) {
                l[t] = 0
            }
            for (e = 0; e <= 143; ) {
                d[2 * e + 1] = 8,
                e++,
                l[8]++
            }
            for (; e <= 255; ) {
                d[2 * e + 1] = 9,
                e++,
                l[9]++
            }
            for (; e <= 279; ) {
                d[2 * e + 1] = 7,
                e++,
                l[7]++
            }
            for (; e <= 287; ) {
                d[2 * e + 1] = 8,
                e++,
                l[8]++
            }
            for (P(d, 287, l),
            e = 0; e < 30; e++) {
                u[2 * e + 1] = 5,
                u[2 * e] = A(e, 5)
            }
            _ = new y(d,s,257,286,15),
            f = new y(u,a,0,30,15),
            g = new y(new Array(0),o,0,19,7)
        }(),
        O = !0),
        e.l_desc = new v(e.dyn_ltree,_),
        e.d_desc = new v(e.dyn_dtree,f),
        e.bl_desc = new v(e.bl_tree,g),
        e.bi_buf = 0,
        e.bi_valid = 0,
        w(e)
    }
    ,
    t._tr_stored_block = x,
    t._tr_flush_block = function(e, t, i, n) {
        var r, s, a = 0;
        e.level > 0 ? (2 === e.strm.data_type && (e.strm.data_type = function(e) {
            var t, i = 4093624447;
            for (t = 0; t <= 31; t++,
            i >>>= 1) {
                if (1 & i && 0 !== e.dyn_ltree[2 * t])
                    return 0
            }
            if (0 !== e.dyn_ltree[18] || 0 !== e.dyn_ltree[20] || 0 !== e.dyn_ltree[26])
                return 1;
            for (t = 32; t < 256; t++) {
                if (0 !== e.dyn_ltree[2 * t])
                    return 1
            }
            return 0
        }(e)),
        D(e, e.l_desc),
        D(e, e.d_desc),
        a = function(e) {
            var t;
            for (L(e, e.dyn_ltree, e.l_desc.max_code),
            L(e, e.dyn_dtree, e.d_desc.max_code),
            D(e, e.bl_desc),
            t = 18; t >= 3 && 0 === e.bl_tree[2 * l[t] + 1]; t--) {}
            return e.opt_len += 3 * (t + 1) + 5 + 5 + 4,
            t
        }(e),
        r = e.opt_len + 3 + 7 >>> 3,
        (s = e.static_len + 3 + 7 >>> 3) <= r && (r = s)) : r = s = i + 5,
        i + 4 <= r && -1 !== t ? x(e, t, i, n) : 4 === e.strategy || s === r ? (T(e, 2 + (n ? 1 : 0), 3),
        R(e, d, u)) : (T(e, 4 + (n ? 1 : 0), 3),
        function(e, t, i, n) {
            var r;
            for (T(e, t - 257, 5),
            T(e, i - 1, 5),
            T(e, n - 4, 4),
            r = 0; r < n; r++) {
                T(e, e.bl_tree[2 * l[r] + 1], 3)
            }
            M(e, e.dyn_ltree, t - 1),
            M(e, e.dyn_dtree, i - 1)
        }(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, a + 1),
        R(e, e.dyn_ltree, e.dyn_dtree)),
        w(e),
        n && k(e)
    }
    ,
    t._tr_tally = function(e, t, i) {
        return e.pending_buf[e.d_buf + 2 * e.last_lit] = t >>> 8 & 255,
        e.pending_buf[e.d_buf + 2 * e.last_lit + 1] = 255 & t,
        e.pending_buf[e.l_buf + e.last_lit] = 255 & i,
        e.last_lit++,
        0 === t ? e.dyn_ltree[2 * i]++ : (e.matches++,
        t--,
        e.dyn_ltree[2 * (h[i] + 256 + 1)]++,
        e.dyn_dtree[2 * E(t)]++),
        e.last_lit === e.lit_bufsize - 1
    }
    ,
    t._tr_align = function(e) {
        T(e, 2, 3),
        S(e, 256, d),
        function(e) {
            16 === e.bi_valid ? (b(e, e.bi_buf),
            e.bi_buf = 0,
            e.bi_valid = 0) : e.bi_valid >= 8 && (e.pending_buf[e.pending++] = 255 & e.bi_buf,
            e.bi_buf >>= 8,
            e.bi_valid -= 8)
        }(e)
    }
}
, function(e, t, i) {
    "use strict";
    var n = i(92)
      , r = i(6)
      , s = i(53)
      , a = i(55)
      , o = i(36)
      , l = i(54)
      , d = i(95)
      , u = Object.prototype.toString;
    function c(e) {
        if (!(this instanceof c))
            return new c(e);
        this.options = r.assign({
            chunkSize: 16384,
            windowBits: 0,
            to: ""
        }, e || {});
        var t = this.options;
        t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits,
        0 === t.windowBits && (t.windowBits = -15)),
        !(t.windowBits >= 0 && t.windowBits < 16) || e && e.windowBits || (t.windowBits += 32),
        t.windowBits > 15 && t.windowBits < 48 && 0 == (15 & t.windowBits) && (t.windowBits |= 15),
        this.err = 0,
        this.msg = "",
        this.ended = !1,
        this.chunks = [],
        this.strm = new l,
        this.strm.avail_out = 0;
        var i = n.inflateInit2(this.strm, t.windowBits);
        if (i !== a.Z_OK)
            throw new Error(o[i]);
        if (this.header = new d,
        n.inflateGetHeader(this.strm, this.header),
        t.dictionary && ("string" == typeof t.dictionary ? t.dictionary = s.string2buf(t.dictionary) : "[object ArrayBuffer]" === u.call(t.dictionary) && (t.dictionary = new Uint8Array(t.dictionary)),
        t.raw && (i = n.inflateSetDictionary(this.strm, t.dictionary)) !== a.Z_OK))
            throw new Error(o[i])
    }
    function h(e, t) {
        var i = new c(t);
        if (i.push(e, !0),
        i.err)
            throw i.msg || o[i.err];
        return i.result
    }
    c.prototype.push = function(e, t) {
        var i, o, l, d, c, h = this.strm, p = this.options.chunkSize, _ = this.options.dictionary, f = !1;
        if (this.ended)
            return !1;
        o = t === ~~t ? t : !0 === t ? a.Z_FINISH : a.Z_NO_FLUSH,
        "string" == typeof e ? h.input = s.binstring2buf(e) : "[object ArrayBuffer]" === u.call(e) ? h.input = new Uint8Array(e) : h.input = e,
        h.next_in = 0,
        h.avail_in = h.input.length;
        do {
            if (0 === h.avail_out && (h.output = new r.Buf8(p),
            h.next_out = 0,
            h.avail_out = p),
            (i = n.inflate(h, a.Z_NO_FLUSH)) === a.Z_NEED_DICT && _ && (i = n.inflateSetDictionary(this.strm, _)),
            i === a.Z_BUF_ERROR && !0 === f && (i = a.Z_OK,
            f = !1),
            i !== a.Z_STREAM_END && i !== a.Z_OK)
                return this.onEnd(i),
                this.ended = !0,
                !1;
            h.next_out && (0 !== h.avail_out && i !== a.Z_STREAM_END && (0 !== h.avail_in || o !== a.Z_FINISH && o !== a.Z_SYNC_FLUSH) || ("string" === this.options.to ? (l = s.utf8border(h.output, h.next_out),
            d = h.next_out - l,
            c = s.buf2string(h.output, l),
            h.next_out = d,
            h.avail_out = p - d,
            d && r.arraySet(h.output, h.output, l, d, 0),
            this.onData(c)) : this.onData(r.shrinkBuf(h.output, h.next_out)))),
            0 === h.avail_in && 0 === h.avail_out && (f = !0)
        } while ((h.avail_in > 0 || 0 === h.avail_out) && i !== a.Z_STREAM_END);return i === a.Z_STREAM_END && (o = a.Z_FINISH),
        o === a.Z_FINISH ? (i = n.inflateEnd(this.strm),
        this.onEnd(i),
        this.ended = !0,
        i === a.Z_OK) : o !== a.Z_SYNC_FLUSH || (this.onEnd(a.Z_OK),
        h.avail_out = 0,
        !0)
    }
    ,
    c.prototype.onData = function(e) {
        this.chunks.push(e)
    }
    ,
    c.prototype.onEnd = function(e) {
        e === a.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = r.flattenChunks(this.chunks)),
        this.chunks = [],
        this.err = e,
        this.msg = this.strm.msg
    }
    ,
    t.Inflate = c,
    t.inflate = h,
    t.inflateRaw = function(e, t) {
        return (t = t || {}).raw = !0,
        h(e, t)
    }
    ,
    t.ungzip = h
}
, function(e, t, i) {
    "use strict";
    var n = i(6)
      , r = i(51)
      , s = i(52)
      , a = i(93)
      , o = i(94);
    function l(e) {
        return (e >>> 24 & 255) + (e >>> 8 & 65280) + ((65280 & e) << 8) + ((255 & e) << 24)
    }
    function d() {
        this.mode = 0,
        this.last = !1,
        this.wrap = 0,
        this.havedict = !1,
        this.flags = 0,
        this.dmax = 0,
        this.check = 0,
        this.total = 0,
        this.head = null,
        this.wbits = 0,
        this.wsize = 0,
        this.whave = 0,
        this.wnext = 0,
        this.window = null,
        this.hold = 0,
        this.bits = 0,
        this.length = 0,
        this.offset = 0,
        this.extra = 0,
        this.lencode = null,
        this.distcode = null,
        this.lenbits = 0,
        this.distbits = 0,
        this.ncode = 0,
        this.nlen = 0,
        this.ndist = 0,
        this.have = 0,
        this.next = null,
        this.lens = new n.Buf16(320),
        this.work = new n.Buf16(288),
        this.lendyn = null,
        this.distdyn = null,
        this.sane = 0,
        this.back = 0,
        this.was = 0
    }
    function u(e) {
        var t;
        return e && e.state ? (t = e.state,
        e.total_in = e.total_out = t.total = 0,
        e.msg = "",
        t.wrap && (e.adler = 1 & t.wrap),
        t.mode = 1,
        t.last = 0,
        t.havedict = 0,
        t.dmax = 32768,
        t.head = null,
        t.hold = 0,
        t.bits = 0,
        t.lencode = t.lendyn = new n.Buf32(852),
        t.distcode = t.distdyn = new n.Buf32(592),
        t.sane = 1,
        t.back = -1,
        0) : -2
    }
    function c(e) {
        var t;
        return e && e.state ? ((t = e.state).wsize = 0,
        t.whave = 0,
        t.wnext = 0,
        u(e)) : -2
    }
    function h(e, t) {
        var i, n;
        return e && e.state ? (n = e.state,
        t < 0 ? (i = 0,
        t = -t) : (i = 1 + (t >> 4),
        t < 48 && (t &= 15)),
        t && (t < 8 || t > 15) ? -2 : (null !== n.window && n.wbits !== t && (n.window = null),
        n.wrap = i,
        n.wbits = t,
        c(e))) : -2
    }
    function p(e, t) {
        var i, n;
        return e ? (n = new d,
        e.state = n,
        n.window = null,
        0 !== (i = h(e, t)) && (e.state = null),
        i) : -2
    }
    var _, f, g = !0;
    function m(e) {
        if (g) {
            var t;
            for (_ = new n.Buf32(512),
            f = new n.Buf32(32),
            t = 0; t < 144; ) {
                e.lens[t++] = 8
            }
            for (; t < 256; ) {
                e.lens[t++] = 9
            }
            for (; t < 280; ) {
                e.lens[t++] = 7
            }
            for (; t < 288; ) {
                e.lens[t++] = 8
            }
            for (o(1, e.lens, 0, 288, _, 0, e.work, {
                bits: 9
            }),
            t = 0; t < 32; ) {
                e.lens[t++] = 5
            }
            o(2, e.lens, 0, 32, f, 0, e.work, {
                bits: 5
            }),
            g = !1
        }
        e.lencode = _,
        e.lenbits = 9,
        e.distcode = f,
        e.distbits = 5
    }
    function y(e, t, i, r) {
        var s, a = e.state;
        return null === a.window && (a.wsize = 1 << a.wbits,
        a.wnext = 0,
        a.whave = 0,
        a.window = new n.Buf8(a.wsize)),
        r >= a.wsize ? (n.arraySet(a.window, t, i - a.wsize, a.wsize, 0),
        a.wnext = 0,
        a.whave = a.wsize) : ((s = a.wsize - a.wnext) > r && (s = r),
        n.arraySet(a.window, t, i - r, s, a.wnext),
        (r -= s) ? (n.arraySet(a.window, t, i - r, r, 0),
        a.wnext = r,
        a.whave = a.wsize) : (a.wnext += s,
        a.wnext === a.wsize && (a.wnext = 0),
        a.whave < a.wsize && (a.whave += s))),
        0
    }
    t.inflateReset = c,
    t.inflateReset2 = h,
    t.inflateResetKeep = u,
    t.inflateInit = function(e) {
        return p(e, 15)
    }
    ,
    t.inflateInit2 = p,
    t.inflate = function(e, t) {
        var i, d, u, c, h, p, _, f, g, v, E, b, T, S, A, P, w, k, C, I, R, D, L, M, O = 0, x = new n.Buf8(4), N = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
        if (!e || !e.state || !e.output || !e.input && 0 !== e.avail_in)
            return -2;
        12 === (i = e.state).mode && (i.mode = 13),
        h = e.next_out,
        u = e.output,
        _ = e.avail_out,
        c = e.next_in,
        d = e.input,
        p = e.avail_in,
        f = i.hold,
        g = i.bits,
        v = p,
        E = _,
        D = 0;
        e: for (; ; ) {
            switch (i.mode) {
            case 1:
                if (0 === i.wrap) {
                    i.mode = 13;
                    break
                }
                for (; g < 16; ) {
                    if (0 === p)
                        break e;
                    p--,
                    f += d[c++] << g,
                    g += 8
                }
                if (2 & i.wrap && 35615 === f) {
                    i.check = 0,
                    x[0] = 255 & f,
                    x[1] = f >>> 8 & 255,
                    i.check = s(i.check, x, 2, 0),
                    f = 0,
                    g = 0,
                    i.mode = 2;
                    break
                }
                if (i.flags = 0,
                i.head && (i.head.done = !1),
                !(1 & i.wrap) || (((255 & f) << 8) + (f >> 8)) % 31) {
                    e.msg = "incorrect header check",
                    i.mode = 30;
                    break
                }
                if (8 != (15 & f)) {
                    e.msg = "unknown compression method",
                    i.mode = 30;
                    break
                }
                if (g -= 4,
                R = 8 + (15 & (f >>>= 4)),
                0 === i.wbits)
                    i.wbits = R;
                else if (R > i.wbits) {
                    e.msg = "invalid window size",
                    i.mode = 30;
                    break
                }
                i.dmax = 1 << R,
                e.adler = i.check = 1,
                i.mode = 512 & f ? 10 : 12,
                f = 0,
                g = 0;
                break;
            case 2:
                for (; g < 16; ) {
                    if (0 === p)
                        break e;
                    p--,
                    f += d[c++] << g,
                    g += 8
                }
                if (i.flags = f,
                8 != (255 & i.flags)) {
                    e.msg = "unknown compression method",
                    i.mode = 30;
                    break
                }
                if (57344 & i.flags) {
                    e.msg = "unknown header flags set",
                    i.mode = 30;
                    break
                }
                i.head && (i.head.text = f >> 8 & 1),
                512 & i.flags && (x[0] = 255 & f,
                x[1] = f >>> 8 & 255,
                i.check = s(i.check, x, 2, 0)),
                f = 0,
                g = 0,
                i.mode = 3;
            case 3:
                for (; g < 32; ) {
                    if (0 === p)
                        break e;
                    p--,
                    f += d[c++] << g,
                    g += 8
                }
                i.head && (i.head.time = f),
                512 & i.flags && (x[0] = 255 & f,
                x[1] = f >>> 8 & 255,
                x[2] = f >>> 16 & 255,
                x[3] = f >>> 24 & 255,
                i.check = s(i.check, x, 4, 0)),
                f = 0,
                g = 0,
                i.mode = 4;
            case 4:
                for (; g < 16; ) {
                    if (0 === p)
                        break e;
                    p--,
                    f += d[c++] << g,
                    g += 8
                }
                i.head && (i.head.xflags = 255 & f,
                i.head.os = f >> 8),
                512 & i.flags && (x[0] = 255 & f,
                x[1] = f >>> 8 & 255,
                i.check = s(i.check, x, 2, 0)),
                f = 0,
                g = 0,
                i.mode = 5;
            case 5:
                if (1024 & i.flags) {
                    for (; g < 16; ) {
                        if (0 === p)
                            break e;
                        p--,
                        f += d[c++] << g,
                        g += 8
                    }
                    i.length = f,
                    i.head && (i.head.extra_len = f),
                    512 & i.flags && (x[0] = 255 & f,
                    x[1] = f >>> 8 & 255,
                    i.check = s(i.check, x, 2, 0)),
                    f = 0,
                    g = 0
                } else
                    i.head && (i.head.extra = null);
                i.mode = 6;
            case 6:
                if (1024 & i.flags && ((b = i.length) > p && (b = p),
                b && (i.head && (R = i.head.extra_len - i.length,
                i.head.extra || (i.head.extra = new Array(i.head.extra_len)),
                n.arraySet(i.head.extra, d, c, b, R)),
                512 & i.flags && (i.check = s(i.check, d, b, c)),
                p -= b,
                c += b,
                i.length -= b),
                i.length))
                    break e;
                i.length = 0,
                i.mode = 7;
            case 7:
                if (2048 & i.flags) {
                    if (0 === p)
                        break e;
                    b = 0;
                    do {
                        R = d[c + b++],
                        i.head && R && i.length < 65536 && (i.head.name += String.fromCharCode(R))
                    } while (R && b < p);if (512 & i.flags && (i.check = s(i.check, d, b, c)),
                    p -= b,
                    c += b,
                    R)
                        break e
                } else
                    i.head && (i.head.name = null);
                i.length = 0,
                i.mode = 8;
            case 8:
                if (4096 & i.flags) {
                    if (0 === p)
                        break e;
                    b = 0;
                    do {
                        R = d[c + b++],
                        i.head && R && i.length < 65536 && (i.head.comment += String.fromCharCode(R))
                    } while (R && b < p);if (512 & i.flags && (i.check = s(i.check, d, b, c)),
                    p -= b,
                    c += b,
                    R)
                        break e
                } else
                    i.head && (i.head.comment = null);
                i.mode = 9;
            case 9:
                if (512 & i.flags) {
                    for (; g < 16; ) {
                        if (0 === p)
                            break e;
                        p--,
                        f += d[c++] << g,
                        g += 8
                    }
                    if (f !== (65535 & i.check)) {
                        e.msg = "header crc mismatch",
                        i.mode = 30;
                        break
                    }
                    f = 0,
                    g = 0
                }
                i.head && (i.head.hcrc = i.flags >> 9 & 1,
                i.head.done = !0),
                e.adler = i.check = 0,
                i.mode = 12;
                break;
            case 10:
                for (; g < 32; ) {
                    if (0 === p)
                        break e;
                    p--,
                    f += d[c++] << g,
                    g += 8
                }
                e.adler = i.check = l(f),
                f = 0,
                g = 0,
                i.mode = 11;
            case 11:
                if (0 === i.havedict)
                    return e.next_out = h,
                    e.avail_out = _,
                    e.next_in = c,
                    e.avail_in = p,
                    i.hold = f,
                    i.bits = g,
                    2;
                e.adler = i.check = 1,
                i.mode = 12;
            case 12:
                if (5 === t || 6 === t)
                    break e;
            case 13:
                if (i.last) {
                    f >>>= 7 & g,
                    g -= 7 & g,
                    i.mode = 27;
                    break
                }
                for (; g < 3; ) {
                    if (0 === p)
                        break e;
                    p--,
                    f += d[c++] << g,
                    g += 8
                }
                switch (i.last = 1 & f,
                g -= 1,
                3 & (f >>>= 1)) {
                case 0:
                    i.mode = 14;
                    break;
                case 1:
                    if (m(i),
                    i.mode = 20,
                    6 === t) {
                        f >>>= 2,
                        g -= 2;
                        break e
                    }
                    break;
                case 2:
                    i.mode = 17;
                    break;
                case 3:
                    e.msg = "invalid block type",
                    i.mode = 30;
                }
                f >>>= 2,
                g -= 2;
                break;
            case 14:
                for (f >>>= 7 & g,
                g -= 7 & g; g < 32; ) {
                    if (0 === p)
                        break e;
                    p--,
                    f += d[c++] << g,
                    g += 8
                }
                if ((65535 & f) != (f >>> 16 ^ 65535)) {
                    e.msg = "invalid stored block lengths",
                    i.mode = 30;
                    break
                }
                if (i.length = 65535 & f,
                f = 0,
                g = 0,
                i.mode = 15,
                6 === t)
                    break e;
            case 15:
                i.mode = 16;
            case 16:
                if (b = i.length) {
                    if (b > p && (b = p),
                    b > _ && (b = _),
                    0 === b)
                        break e;
                    n.arraySet(u, d, c, b, h),
                    p -= b,
                    c += b,
                    _ -= b,
                    h += b,
                    i.length -= b;
                    break
                }
                i.mode = 12;
                break;
            case 17:
                for (; g < 14; ) {
                    if (0 === p)
                        break e;
                    p--,
                    f += d[c++] << g,
                    g += 8
                }
                if (i.nlen = 257 + (31 & f),
                f >>>= 5,
                g -= 5,
                i.ndist = 1 + (31 & f),
                f >>>= 5,
                g -= 5,
                i.ncode = 4 + (15 & f),
                f >>>= 4,
                g -= 4,
                i.nlen > 286 || i.ndist > 30) {
                    e.msg = "too many length or distance symbols",
                    i.mode = 30;
                    break
                }
                i.have = 0,
                i.mode = 18;
            case 18:
                for (; i.have < i.ncode; ) {
                    for (; g < 3; ) {
                        if (0 === p)
                            break e;
                        p--,
                        f += d[c++] << g,
                        g += 8
                    }
                    i.lens[N[i.have++]] = 7 & f,
                    f >>>= 3,
                    g -= 3
                }
                for (; i.have < 19; ) {
                    i.lens[N[i.have++]] = 0
                }
                if (i.lencode = i.lendyn,
                i.lenbits = 7,
                L = {
                    bits: i.lenbits
                },
                D = o(0, i.lens, 0, 19, i.lencode, 0, i.work, L),
                i.lenbits = L.bits,
                D) {
                    e.msg = "invalid code lengths set",
                    i.mode = 30;
                    break
                }
                i.have = 0,
                i.mode = 19;
            case 19:
                for (; i.have < i.nlen + i.ndist; ) {
                    for (; P = (O = i.lencode[f & (1 << i.lenbits) - 1]) >>> 16 & 255,
                    w = 65535 & O,
                    !((A = O >>> 24) <= g); ) {
                        if (0 === p)
                            break e;
                        p--,
                        f += d[c++] << g,
                        g += 8
                    }
                    if (w < 16)
                        f >>>= A,
                        g -= A,
                        i.lens[i.have++] = w;
                    else {
                        if (16 === w) {
                            for (M = A + 2; g < M; ) {
                                if (0 === p)
                                    break e;
                                p--,
                                f += d[c++] << g,
                                g += 8
                            }
                            if (f >>>= A,
                            g -= A,
                            0 === i.have) {
                                e.msg = "invalid bit length repeat",
                                i.mode = 30;
                                break
                            }
                            R = i.lens[i.have - 1],
                            b = 3 + (3 & f),
                            f >>>= 2,
                            g -= 2
                        } else if (17 === w) {
                            for (M = A + 3; g < M; ) {
                                if (0 === p)
                                    break e;
                                p--,
                                f += d[c++] << g,
                                g += 8
                            }
                            g -= A,
                            R = 0,
                            b = 3 + (7 & (f >>>= A)),
                            f >>>= 3,
                            g -= 3
                        } else {
                            for (M = A + 7; g < M; ) {
                                if (0 === p)
                                    break e;
                                p--,
                                f += d[c++] << g,
                                g += 8
                            }
                            g -= A,
                            R = 0,
                            b = 11 + (127 & (f >>>= A)),
                            f >>>= 7,
                            g -= 7
                        }
                        if (i.have + b > i.nlen + i.ndist) {
                            e.msg = "invalid bit length repeat",
                            i.mode = 30;
                            break
                        }
                        for (; b--; ) {
                            i.lens[i.have++] = R
                        }
                    }
                }
                if (30 === i.mode)
                    break;
                if (0 === i.lens[256]) {
                    e.msg = "invalid code -- missing end-of-block",
                    i.mode = 30;
                    break
                }
                if (i.lenbits = 9,
                L = {
                    bits: i.lenbits
                },
                D = o(1, i.lens, 0, i.nlen, i.lencode, 0, i.work, L),
                i.lenbits = L.bits,
                D) {
                    e.msg = "invalid literal/lengths set",
                    i.mode = 30;
                    break
                }
                if (i.distbits = 6,
                i.distcode = i.distdyn,
                L = {
                    bits: i.distbits
                },
                D = o(2, i.lens, i.nlen, i.ndist, i.distcode, 0, i.work, L),
                i.distbits = L.bits,
                D) {
                    e.msg = "invalid distances set",
                    i.mode = 30;
                    break
                }
                if (i.mode = 20,
                6 === t)
                    break e;
            case 20:
                i.mode = 21;
            case 21:
                if (p >= 6 && _ >= 258) {
                    e.next_out = h,
                    e.avail_out = _,
                    e.next_in = c,
                    e.avail_in = p,
                    i.hold = f,
                    i.bits = g,
                    a(e, E),
                    h = e.next_out,
                    u = e.output,
                    _ = e.avail_out,
                    c = e.next_in,
                    d = e.input,
                    p = e.avail_in,
                    f = i.hold,
                    g = i.bits,
                    12 === i.mode && (i.back = -1);
                    break
                }
                for (i.back = 0; P = (O = i.lencode[f & (1 << i.lenbits) - 1]) >>> 16 & 255,
                w = 65535 & O,
                !((A = O >>> 24) <= g); ) {
                    if (0 === p)
                        break e;
                    p--,
                    f += d[c++] << g,
                    g += 8
                }
                if (P && 0 == (240 & P)) {
                    for (k = A,
                    C = P,
                    I = w; P = (O = i.lencode[I + ((f & (1 << k + C) - 1) >> k)]) >>> 16 & 255,
                    w = 65535 & O,
                    !(k + (A = O >>> 24) <= g); ) {
                        if (0 === p)
                            break e;
                        p--,
                        f += d[c++] << g,
                        g += 8
                    }
                    f >>>= k,
                    g -= k,
                    i.back += k
                }
                if (f >>>= A,
                g -= A,
                i.back += A,
                i.length = w,
                0 === P) {
                    i.mode = 26;
                    break
                }
                if (32 & P) {
                    i.back = -1,
                    i.mode = 12;
                    break
                }
                if (64 & P) {
                    e.msg = "invalid literal/length code",
                    i.mode = 30;
                    break
                }
                i.extra = 15 & P,
                i.mode = 22;
            case 22:
                if (i.extra) {
                    for (M = i.extra; g < M; ) {
                        if (0 === p)
                            break e;
                        p--,
                        f += d[c++] << g,
                        g += 8
                    }
                    i.length += f & (1 << i.extra) - 1,
                    f >>>= i.extra,
                    g -= i.extra,
                    i.back += i.extra
                }
                i.was = i.length,
                i.mode = 23;
            case 23:
                for (; P = (O = i.distcode[f & (1 << i.distbits) - 1]) >>> 16 & 255,
                w = 65535 & O,
                !((A = O >>> 24) <= g); ) {
                    if (0 === p)
                        break e;
                    p--,
                    f += d[c++] << g,
                    g += 8
                }
                if (0 == (240 & P)) {
                    for (k = A,
                    C = P,
                    I = w; P = (O = i.distcode[I + ((f & (1 << k + C) - 1) >> k)]) >>> 16 & 255,
                    w = 65535 & O,
                    !(k + (A = O >>> 24) <= g); ) {
                        if (0 === p)
                            break e;
                        p--,
                        f += d[c++] << g,
                        g += 8
                    }
                    f >>>= k,
                    g -= k,
                    i.back += k
                }
                if (f >>>= A,
                g -= A,
                i.back += A,
                64 & P) {
                    e.msg = "invalid distance code",
                    i.mode = 30;
                    break
                }
                i.offset = w,
                i.extra = 15 & P,
                i.mode = 24;
            case 24:
                if (i.extra) {
                    for (M = i.extra; g < M; ) {
                        if (0 === p)
                            break e;
                        p--,
                        f += d[c++] << g,
                        g += 8
                    }
                    i.offset += f & (1 << i.extra) - 1,
                    f >>>= i.extra,
                    g -= i.extra,
                    i.back += i.extra
                }
                if (i.offset > i.dmax) {
                    e.msg = "invalid distance too far back",
                    i.mode = 30;
                    break
                }
                i.mode = 25;
            case 25:
                if (0 === _)
                    break e;
                if (b = E - _,
                i.offset > b) {
                    if ((b = i.offset - b) > i.whave && i.sane) {
                        e.msg = "invalid distance too far back",
                        i.mode = 30;
                        break
                    }
                    b > i.wnext ? (b -= i.wnext,
                    T = i.wsize - b) : T = i.wnext - b,
                    b > i.length && (b = i.length),
                    S = i.window
                } else
                    S = u,
                    T = h - i.offset,
                    b = i.length;
                b > _ && (b = _),
                _ -= b,
                i.length -= b;
                do {
                    u[h++] = S[T++]
                } while (--b);0 === i.length && (i.mode = 21);
                break;
            case 26:
                if (0 === _)
                    break e;
                u[h++] = i.length,
                _--,
                i.mode = 21;
                break;
            case 27:
                if (i.wrap) {
                    for (; g < 32; ) {
                        if (0 === p)
                            break e;
                        p--,
                        f |= d[c++] << g,
                        g += 8
                    }
                    if (E -= _,
                    e.total_out += E,
                    i.total += E,
                    E && (e.adler = i.check = i.flags ? s(i.check, u, E, h - E) : r(i.check, u, E, h - E)),
                    E = _,
                    (i.flags ? f : l(f)) !== i.check) {
                        e.msg = "incorrect data check",
                        i.mode = 30;
                        break
                    }
                    f = 0,
                    g = 0
                }
                i.mode = 28;
            case 28:
                if (i.wrap && i.flags) {
                    for (; g < 32; ) {
                        if (0 === p)
                            break e;
                        p--,
                        f += d[c++] << g,
                        g += 8
                    }
                    if (f !== (4294967295 & i.total)) {
                        e.msg = "incorrect length check",
                        i.mode = 30;
                        break
                    }
                    f = 0,
                    g = 0
                }
                i.mode = 29;
            case 29:
                D = 1;
                break e;
            case 30:
                D = -3;
                break e;
            case 31:
                return -4;
            case 32:
            default:
                return -2;
            }
        }
        return e.next_out = h,
        e.avail_out = _,
        e.next_in = c,
        e.avail_in = p,
        i.hold = f,
        i.bits = g,
        (i.wsize || E !== e.avail_out && i.mode < 30 && (i.mode < 27 || 4 !== t)) && y(e, e.output, e.next_out, E - e.avail_out) ? (i.mode = 31,
        -4) : (v -= e.avail_in,
        E -= e.avail_out,
        e.total_in += v,
        e.total_out += E,
        i.total += E,
        i.wrap && E && (e.adler = i.check = i.flags ? s(i.check, u, E, e.next_out - E) : r(i.check, u, E, e.next_out - E)),
        e.data_type = i.bits + (i.last ? 64 : 0) + (12 === i.mode ? 128 : 0) + (20 === i.mode || 15 === i.mode ? 256 : 0),
        (0 === v && 0 === E || 4 === t) && 0 === D && (D = -5),
        D)
    }
    ,
    t.inflateEnd = function(e) {
        if (!e || !e.state)
            return -2;
        var t = e.state;
        return t.window && (t.window = null),
        e.state = null,
        0
    }
    ,
    t.inflateGetHeader = function(e, t) {
        var i;
        return e && e.state ? 0 == (2 & (i = e.state).wrap) ? -2 : (i.head = t,
        t.done = !1,
        0) : -2
    }
    ,
    t.inflateSetDictionary = function(e, t) {
        var i, n = t.length;
        return e && e.state ? 0 !== (i = e.state).wrap && 11 !== i.mode ? -2 : 11 === i.mode && r(1, t, n, 0) !== i.check ? -3 : y(e, t, n, n) ? (i.mode = 31,
        -4) : (i.havedict = 1,
        0) : -2
    }
    ,
    t.inflateInfo = "pako inflate (from Nodeca project)"
}
, function(e) {
    "use strict";
    e.exports = function(e, t) {
        var i, n, r, s, a, o, l, d, u, c, h, p, _, f, g, m, y, v, E, b, T, S, A, P, w;
        i = e.state,
        n = e.next_in,
        P = e.input,
        r = n + (e.avail_in - 5),
        s = e.next_out,
        w = e.output,
        a = s - (t - e.avail_out),
        o = s + (e.avail_out - 257),
        l = i.dmax,
        d = i.wsize,
        u = i.whave,
        c = i.wnext,
        h = i.window,
        p = i.hold,
        _ = i.bits,
        f = i.lencode,
        g = i.distcode,
        m = (1 << i.lenbits) - 1,
        y = (1 << i.distbits) - 1;
        e: do {
            _ < 15 && (p += P[n++] << _,
            _ += 8,
            p += P[n++] << _,
            _ += 8),
            v = f[p & m];
            t: for (; ; ) {
                if (p >>>= E = v >>> 24,
                _ -= E,
                0 === (E = v >>> 16 & 255))
                    w[s++] = 65535 & v;
                else {
                    if (!(16 & E)) {
                        if (0 == (64 & E)) {
                            v = f[(65535 & v) + (p & (1 << E) - 1)];
                            continue t
                        }
                        if (32 & E) {
                            i.mode = 12;
                            break e
                        }
                        e.msg = "invalid literal/length code",
                        i.mode = 30;
                        break e
                    }
                    b = 65535 & v,
                    (E &= 15) && (_ < E && (p += P[n++] << _,
                    _ += 8),
                    b += p & (1 << E) - 1,
                    p >>>= E,
                    _ -= E),
                    _ < 15 && (p += P[n++] << _,
                    _ += 8,
                    p += P[n++] << _,
                    _ += 8),
                    v = g[p & y];
                    i: for (; ; ) {
                        if (p >>>= E = v >>> 24,
                        _ -= E,
                        !(16 & (E = v >>> 16 & 255))) {
                            if (0 == (64 & E)) {
                                v = g[(65535 & v) + (p & (1 << E) - 1)];
                                continue i
                            }
                            e.msg = "invalid distance code",
                            i.mode = 30;
                            break e
                        }
                        if (T = 65535 & v,
                        _ < (E &= 15) && (p += P[n++] << _,
                        (_ += 8) < E && (p += P[n++] << _,
                        _ += 8)),
                        (T += p & (1 << E) - 1) > l) {
                            e.msg = "invalid distance too far back",
                            i.mode = 30;
                            break e
                        }
                        if (p >>>= E,
                        _ -= E,
                        T > (E = s - a)) {
                            if ((E = T - E) > u && i.sane) {
                                e.msg = "invalid distance too far back",
                                i.mode = 30;
                                break e
                            }
                            if (S = 0,
                            A = h,
                            0 === c) {
                                if (S += d - E,
                                E < b) {
                                    b -= E;
                                    do {
                                        w[s++] = h[S++]
                                    } while (--E);S = s - T,
                                    A = w
                                }
                            } else if (c < E) {
                                if (S += d + c - E,
                                (E -= c) < b) {
                                    b -= E;
                                    do {
                                        w[s++] = h[S++]
                                    } while (--E);if (S = 0,
                                    c < b) {
                                        b -= E = c;
                                        do {
                                            w[s++] = h[S++]
                                        } while (--E);S = s - T,
                                        A = w
                                    }
                                }
                            } else if (S += c - E,
                            E < b) {
                                b -= E;
                                do {
                                    w[s++] = h[S++]
                                } while (--E);S = s - T,
                                A = w
                            }
                            for (; b > 2; ) {
                                w[s++] = A[S++],
                                w[s++] = A[S++],
                                w[s++] = A[S++],
                                b -= 3
                            }
                            b && (w[s++] = A[S++],
                            b > 1 && (w[s++] = A[S++]))
                        } else {
                            S = s - T;
                            do {
                                w[s++] = w[S++],
                                w[s++] = w[S++],
                                w[s++] = w[S++],
                                b -= 3
                            } while (b > 2);b && (w[s++] = w[S++],
                            b > 1 && (w[s++] = w[S++]))
                        }
                        break
                    }
                }
                break
            }
        } while (n < r && s < o);n -= b = _ >> 3,
        p &= (1 << (_ -= b << 3)) - 1,
        e.next_in = n,
        e.next_out = s,
        e.avail_in = n < r ? r - n + 5 : 5 - (n - r),
        e.avail_out = s < o ? o - s + 257 : 257 - (s - o),
        i.hold = p,
        i.bits = _
    }
}
, function(e, t, i) {
    "use strict";
    var n = i(6)
      , r = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]
      , s = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]
      , a = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]
      , o = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
    e.exports = function(e, t, i, l, d, u, c, h) {
        var p, _, f, g, m, y, v, E, b, T = h.bits, S = 0, A = 0, P = 0, w = 0, k = 0, C = 0, I = 0, R = 0, D = 0, L = 0, M = null, O = 0, x = new n.Buf16(16), N = new n.Buf16(16), U = null, B = 0;
        for (S = 0; S <= 15; S++) {
            x[S] = 0
        }
        for (A = 0; A < l; A++) {
            x[t[i + A]]++
        }
        for (k = T,
        w = 15; w >= 1 && 0 === x[w]; w--) {}
        if (k > w && (k = w),
        0 === w)
            return d[u++] = 20971520,
            d[u++] = 20971520,
            h.bits = 1,
            0;
        for (P = 1; P < w && 0 === x[P]; P++) {}
        for (k < P && (k = P),
        R = 1,
        S = 1; S <= 15; S++) {
            if (R <<= 1,
            (R -= x[S]) < 0)
                return -1
        }
        if (R > 0 && (0 === e || 1 !== w))
            return -1;
        for (N[1] = 0,
        S = 1; S < 15; S++) {
            N[S + 1] = N[S] + x[S]
        }
        for (A = 0; A < l; A++) {
            0 !== t[i + A] && (c[N[t[i + A]]++] = A)
        }
        if (0 === e ? (M = U = c,
        y = 19) : 1 === e ? (M = r,
        O -= 257,
        U = s,
        B -= 257,
        y = 256) : (M = a,
        U = o,
        y = -1),
        L = 0,
        A = 0,
        S = P,
        m = u,
        C = k,
        I = 0,
        f = -1,
        g = (D = 1 << k) - 1,
        1 === e && D > 852 || 2 === e && D > 592)
            return 1;
        for (; ; ) {
            v = S - I,
            c[A] < y ? (E = 0,
            b = c[A]) : c[A] > y ? (E = U[B + c[A]],
            b = M[O + c[A]]) : (E = 96,
            b = 0),
            p = 1 << S - I,
            P = _ = 1 << C;
            do {
                d[m + (L >> I) + (_ -= p)] = v << 24 | E << 16 | b | 0
            } while (0 !== _);for (p = 1 << S - 1; L & p; ) {
                p >>= 1
            }
            if (0 !== p ? (L &= p - 1,
            L += p) : L = 0,
            A++,
            0 == --x[S]) {
                if (S === w)
                    break;
                S = t[i + c[A]]
            }
            if (S > k && (L & g) !== f) {
                for (0 === I && (I = k),
                m += P,
                R = 1 << (C = S - I); C + I < w && !((R -= x[C + I]) <= 0); ) {
                    C++,
                    R <<= 1
                }
                if (D += 1 << C,
                1 === e && D > 852 || 2 === e && D > 592)
                    return 1;
                d[f = L & g] = k << 24 | C << 16 | m - u | 0
            }
        }
        return 0 !== L && (d[m + L] = S - I << 24 | 64 << 16 | 0),
        h.bits = k,
        0
    }
}
, function(e) {
    "use strict";
    e.exports = function() {
        this.text = 0,
        this.time = 0,
        this.xflags = 0,
        this.os = 0,
        this.extra = null,
        this.extra_len = 0,
        this.name = "",
        this.comment = "",
        this.hcrc = 0,
        this.done = !1
    }
}
, function(e, t, i) {
    var n = i(56)
      , r = i(60)
      , s = i(125)
      , a = i(127)
      , o = i(8)
      , l = i(68)
      , d = i(67);
    e.exports = function e(t, i, u, c, h) {
        t !== i && s(i, function(s, l) {
            if (h || (h = new n),
            o(s))
                a(t, i, l, u, e, c, h);
            else {
                var p = c ? c(d(t, l), s, l + "", t, i, h) : void 0;
                void 0 === p && (p = s),
                r(t, l, p)
            }
        }, l)
    }
}
, function(e) {
    e.exports = function() {
        this.__data__ = [],
        this.size = 0
    }
}
, function(e, t, i) {
    var n = i(27)
      , r = Array.prototype.splice;
    e.exports = function(e) {
        var t = this.__data__
          , i = n(t, e);
        return !(i < 0) && (i == t.length - 1 ? t.pop() : r.call(t, i, 1),
        --this.size,
        !0)
    }
}
, function(e, t, i) {
    var n = i(27);
    e.exports = function(e) {
        var t = this.__data__
          , i = n(t, e);
        return i < 0 ? void 0 : t[i][1]
    }
}
, function(e, t, i) {
    var n = i(27);
    e.exports = function(e) {
        return n(this.__data__, e) > -1
    }
}
, function(e, t, i) {
    var n = i(27);
    e.exports = function(e, t) {
        var i = this.__data__
          , r = n(i, e);
        return r < 0 ? (++this.size,
        i.push([e, t])) : i[r][1] = t,
        this
    }
}
, function(e, t, i) {
    var n = i(26);
    e.exports = function() {
        this.__data__ = new n,
        this.size = 0
    }
}
, function(e) {
    e.exports = function(e) {
        var t = this.__data__
          , i = t.delete(e);
        return this.size = t.size,
        i
    }
}
, function(e) {
    e.exports = function(e) {
        return this.__data__.get(e)
    }
}
, function(e) {
    e.exports = function(e) {
        return this.__data__.has(e)
    }
}
, function(e, t, i) {
    var n = i(26)
      , r = i(37)
      , s = i(59);
    e.exports = function(e, t) {
        var i = this.__data__;
        if (i instanceof n) {
            var a = i.__data__;
            if (!r || a.length < 199)
                return a.push([e, t]),
                this.size = ++i.size,
                this;
            i = this.__data__ = new s(a)
        }
        return i.set(e, t),
        this.size = i.size,
        this
    }
}
, function(e, t, i) {
    var n = i(38)
      , r = i(110)
      , s = i(8)
      , a = i(58)
      , l = Function.prototype
      , d = Object.prototype
      , u = l.toString
      , c = d.hasOwnProperty
      , h = RegExp("^" + u.call(c).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
    e.exports = function(e) {
        return !(!s(e) || r(e)) && (n(e) ? h : /^\[object .+?Constructor\]$/).test(a(e))
    }
}
, function(e, t, i) {
    var n = i(39)
      , r = Object.prototype
      , s = r.hasOwnProperty
      , a = r.toString
      , o = n ? n.toStringTag : void 0;
    e.exports = function(e) {
        var t = s.call(e, o)
          , i = e[o];
        try {
            e[o] = void 0;
            var n = !0
        } catch (e) {}
        var r = a.call(e);
        return n && (t ? e[o] = i : delete e[o]),
        r
    }
}
, function(e) {
    var i = Object.prototype.toString;
    e.exports = function(e) {
        return i.call(e)
    }
}
, function(e, t, i) {
    var n, r = i(111), s = (n = /[^.]+$/.exec(r && r.keys && r.keys.IE_PROTO || "")) ? "Symbol(src)_1." + n : "";
    e.exports = function(e) {
        return !!s && s in e
    }
}
, function(e, t, i) {
    var n = i(3)["__core-js_shared__"];
    e.exports = n
}
, function(e) {
    e.exports = function(e, t) {
        return null == e ? void 0 : e[t]
    }
}
, function(e, t, i) {
    var n = i(114)
      , r = i(26)
      , s = i(37);
    e.exports = function() {
        this.size = 0,
        this.__data__ = {
            hash: new n,
            map: new (s || r),
            string: new n
        }
    }
}
, function(e, t, i) {
    var n = i(115)
      , r = i(116)
      , s = i(117)
      , a = i(118)
      , o = i(119);
    function l(e) {
        var t = -1
          , i = null == e ? 0 : e.length;
        for (this.clear(); ++t < i; ) {
            var n = e[t];
            this.set(n[0], n[1])
        }
    }
    l.prototype.clear = n,
    l.prototype.delete = r,
    l.prototype.get = s,
    l.prototype.has = a,
    l.prototype.set = o,
    e.exports = l
}
, function(e, t, i) {
    var n = i(28);
    e.exports = function() {
        this.__data__ = n ? n(null) : {},
        this.size = 0
    }
}
, function(e) {
    e.exports = function(e) {
        var t = this.has(e) && delete this.__data__[e];
        return this.size -= t ? 1 : 0,
        t
    }
}
, function(e, t, i) {
    var n = i(28)
      , r = Object.prototype.hasOwnProperty;
    e.exports = function(e) {
        var t = this.__data__;
        if (n) {
            var i = t[e];
            return "__lodash_hash_undefined__" === i ? void 0 : i
        }
        return r.call(t, e) ? t[e] : void 0
    }
}
, function(e, t, i) {
    var n = i(28)
      , r = Object.prototype.hasOwnProperty;
    e.exports = function(e) {
        var t = this.__data__;
        return n ? void 0 !== t[e] : r.call(t, e)
    }
}
, function(e, t, i) {
    var n = i(28);
    e.exports = function(e, t) {
        var i = this.__data__;
        return this.size += this.has(e) ? 0 : 1,
        i[e] = n && void 0 === t ? "__lodash_hash_undefined__" : t,
        this
    }
}
, function(e, t, i) {
    var n = i(29);
    e.exports = function(e) {
        var t = n(this, e).delete(e);
        return this.size -= t ? 1 : 0,
        t
    }
}
, function(e) {
    e.exports = function(e) {
        var t = typeof e;
        return "string" == t || "number" == t || "symbol" == t || "boolean" == t ? "__proto__" !== e : null === e
    }
}
, function(e, t, i) {
    var n = i(29);
    e.exports = function(e) {
        return n(this, e).get(e)
    }
}
, function(e, t, i) {
    var n = i(29);
    e.exports = function(e) {
        return n(this, e).has(e)
    }
}
, function(e, t, i) {
    var n = i(29);
    e.exports = function(e, t) {
        var i = n(this, e)
          , r = i.size;
        return i.set(e, t),
        this.size += i.size == r ? 0 : 1,
        this
    }
}
, function(e, t, i) {
    var n = i(126)();
    e.exports = n
}
, function(e) {
    e.exports = function(e) {
        return function(t, i, n) {
            for (var r = -1, s = Object(t), a = n(t), o = a.length; o--; ) {
                var l = a[e ? o : ++r];
                if (!1 === i(s[l], l, s))
                    break
            }
            return t
        }
    }
}
, function(e, t, i) {
    var n = i(60)
      , r = i(128)
      , s = i(129)
      , a = i(131)
      , o = i(132)
      , l = i(65)
      , d = i(30)
      , u = i(135)
      , c = i(43)
      , h = i(38)
      , p = i(8)
      , _ = i(137)
      , f = i(44)
      , g = i(67)
      , m = i(141);
    e.exports = function(e, t, i, y, v, E, b) {
        var T = g(e, i)
          , S = g(t, i)
          , A = b.get(S);
        if (A)
            n(e, i, A);
        else {
            var P = E ? E(T, S, i + "", e, t, b) : void 0
              , w = void 0 === P;
            if (w) {
                var k = d(S)
                  , C = !k && c(S)
                  , I = !k && !C && f(S);
                P = S,
                k || C || I ? d(T) ? P = T : u(T) ? P = a(T) : C ? (w = !1,
                P = r(S, !0)) : I ? (w = !1,
                P = s(S, !0)) : P = [] : _(S) || l(S) ? (P = T,
                l(T) ? P = m(T) : p(T) && !h(T) || (P = o(S))) : w = !1
            }
            w && (b.set(S, P),
            v(P, S, y, E, b),
            b.delete(S)),
            n(e, i, P)
        }
    }
}
, function(e, t, i) {
    (function(e) {
        var n = i(3)
          , r = t && !t.nodeType && t
          , s = r && "object" == typeof e && e && !e.nodeType && e
          , a = s && s.exports === r ? n.Buffer : void 0
          , o = a ? a.allocUnsafe : void 0;
        e.exports = function(e, t) {
            if (t)
                return e.slice();
            var i = e.length
              , n = o ? o(i) : new e.constructor(i);
            return e.copy(n),
            n
        }
    }
    ).call(this, i(41)(e))
}
, function(e, t, i) {
    var n = i(130);
    e.exports = function(e, t) {
        var i = t ? n(e.buffer) : e.buffer;
        return new e.constructor(i,e.byteOffset,e.length)
    }
}
, function(e, t, i) {
    var n = i(62);
    e.exports = function(e) {
        var t = new e.constructor(e.byteLength);
        return new n(t).set(new n(e)),
        t
    }
}
, function(e) {
    e.exports = function(e, t) {
        var i = -1
          , n = e.length;
        for (t || (t = Array(n)); ++i < n; ) {
            t[i] = e[i]
        }
        return t
    }
}
, function(e, t, i) {
    var n = i(133)
      , r = i(63)
      , s = i(42);
    e.exports = function(e) {
        return "function" != typeof e.constructor || s(e) ? {} : n(r(e))
    }
}
, function(e, t, i) {
    var n = i(8)
      , r = Object.create
      , s = function() {
        function e() {}
        return function(t) {
            if (!n(t))
                return {};
            if (r)
                return r(t);
            e.prototype = t;
            var i = new e;
            return e.prototype = void 0,
            i
        }
    }();
    e.exports = s
}
, function(e, t, i) {
    var n = i(12)
      , r = i(10);
    e.exports = function(e) {
        return r(e) && "[object Arguments]" == n(e)
    }
}
, function(e, t, i) {
    var n = i(31)
      , r = i(10);
    e.exports = function(e) {
        return r(e) && n(e)
    }
}
, function(e) {
    e.exports = function() {
        return !1
    }
}
, function(e, t, i) {
    var n = i(12)
      , r = i(63)
      , s = i(10)
      , a = Function.prototype
      , o = Object.prototype
      , l = a.toString
      , d = o.hasOwnProperty
      , u = l.call(Object);
    e.exports = function(e) {
        if (!s(e) || "[object Object]" != n(e))
            return !1;
        var t = r(e);
        if (null === t)
            return !0;
        var i = d.call(t, "constructor") && t.constructor;
        return "function" == typeof i && i instanceof i && l.call(i) == u
    }
}
, function(e, t, i) {
    var n = i(12)
      , r = i(66)
      , s = i(10)
      , a = {};
    a["[object Float32Array]"] = a["[object Float64Array]"] = a["[object Int8Array]"] = a["[object Int16Array]"] = a["[object Int32Array]"] = a["[object Uint8Array]"] = a["[object Uint8ClampedArray]"] = a["[object Uint16Array]"] = a["[object Uint32Array]"] = !0,
    a["[object Arguments]"] = a["[object Array]"] = a["[object ArrayBuffer]"] = a["[object Boolean]"] = a["[object DataView]"] = a["[object Date]"] = a["[object Error]"] = a["[object Function]"] = a["[object Map]"] = a["[object Number]"] = a["[object Object]"] = a["[object RegExp]"] = a["[object Set]"] = a["[object String]"] = a["[object WeakMap]"] = !1,
    e.exports = function(e) {
        return s(e) && r(e.length) && !!a[n(e)]
    }
}
, function(e) {
    e.exports = function(e) {
        return function(t) {
            return e(t)
        }
    }
}
, function(e, t, i) {
    (function(e) {
        var n = i(57)
          , r = t && !t.nodeType && t
          , s = r && "object" == typeof e && e && !e.nodeType && e
          , a = s && s.exports === r && n.process
          , o = function() {
            try {
                var e = s && s.require && s.require("util").types;
                return e || a && a.binding && a.binding("util")
            } catch (e) {}
        }();
        e.exports = o
    }
    ).call(this, i(41)(e))
}
, function(e, t, i) {
    var n = i(142)
      , r = i(68);
    e.exports = function(e) {
        return n(e, r(e))
    }
}
, function(e, t, i) {
    var n = i(143)
      , r = i(40);
    e.exports = function(e, t, i, s) {
        var a = !i;
        i || (i = {});
        for (var o = -1, l = t.length; ++o < l; ) {
            var d = t[o]
              , u = s ? s(i[d], e[d], d, i, e) : void 0;
            void 0 === u && (u = e[d]),
            a ? r(i, d, u) : n(i, d, u)
        }
        return i
    }
}
, function(e, t, i) {
    var n = i(40)
      , r = i(11)
      , s = Object.prototype.hasOwnProperty;
    e.exports = function(e, t, i) {
        var a = e[t];
        s.call(e, t) && r(a, i) && (void 0 !== i || t in e) || n(e, t, i)
    }
}
, function(e) {
    e.exports = function(e, t) {
        for (var i = -1, n = Array(e); ++i < e; ) {
            n[i] = t(i)
        }
        return n
    }
}
, function(e, t, i) {
    var n = i(8)
      , r = i(42)
      , s = i(146)
      , a = Object.prototype.hasOwnProperty;
    e.exports = function(e) {
        if (!n(e))
            return s(e);
        var t = r(e)
          , i = [];
        for (var o in e) {
            ("constructor" != o || !t && a.call(e, o)) && i.push(o)
        }
        return i
    }
}
, function(e) {
    e.exports = function(e) {
        var t = [];
        if (null != e)
            for (var i in Object(e)) {
                t.push(i)
            }
        return t
    }
}
, function(e, t, i) {
    var n = i(148)
      , r = i(155);
    e.exports = function(e) {
        return n(function(t, i) {
            var n = -1
              , s = i.length
              , a = s > 1 ? i[s - 1] : void 0
              , o = s > 2 ? i[2] : void 0;
            for (a = e.length > 3 && "function" == typeof a ? (s--,
            a) : void 0,
            o && r(i[0], i[1], o) && (a = s < 3 ? void 0 : a,
            s = 1),
            t = Object(t); ++n < s; ) {
                var l = i[n];
                l && e(t, l, n, a)
            }
            return t
        })
    }
}
, function(e, t, i) {
    var n = i(71)
      , r = i(149)
      , s = i(151);
    e.exports = function(e, t) {
        return s(r(e, t, n), e + "")
    }
}
, function(e, t, i) {
    var n = i(150)
      , r = Math.max;
    e.exports = function(e, t, i) {
        return t = r(void 0 === t ? e.length - 1 : t, 0),
        function() {
            for (var s = arguments, a = -1, o = r(s.length - t, 0), l = Array(o); ++a < o; ) {
                l[a] = s[t + a]
            }
            a = -1;
            for (var d = Array(t + 1); ++a < t; ) {
                d[a] = s[a]
            }
            return d[t] = i(l),
            n(e, this, d)
        }
    }
}
, function(e) {
    e.exports = function(e, t, i) {
        switch (i.length) {
        case 0:
            return e.call(t);
        case 1:
            return e.call(t, i[0]);
        case 2:
            return e.call(t, i[0], i[1]);
        case 3:
            return e.call(t, i[0], i[1], i[2]);
        }
        return e.apply(t, i)
    }
}
, function(e, t, i) {
    var n = i(152)
      , r = i(154)(n);
    e.exports = r
}
, function(e, t, i) {
    var n = i(153)
      , r = i(61)
      , s = i(71)
      , a = r ? function(e, t) {
        return r(e, "toString", {
            configurable: !0,
            enumerable: !1,
            value: n(t),
            writable: !0
        })
    }
    : s;
    e.exports = a
}
, function(e) {
    e.exports = function(e) {
        return function() {
            return e
        }
    }
}
, function(e) {
    var i = Date.now;
    e.exports = function(e) {
        var t = 0
          , n = 0;
        return function() {
            var r = i()
              , s = 16 - (r - n);
            if (n = r,
            s > 0) {
                if (++t >= 800)
                    return arguments[0]
            } else
                t = 0;
            return e.apply(void 0, arguments)
        }
    }
}
, function(e, t, i) {
    var n = i(11)
      , r = i(31)
      , s = i(70)
      , a = i(8);
    e.exports = function(e, t, i) {
        if (!a(i))
            return !1;
        var o = typeof t;
        return !!("number" == o ? r(i) && s(t, i.length) : "string" == o && t in i) && n(i[t], e)
    }
}
, function(e, t, i) {
    "use strict";
    var n = i(72)
      , r = "function" == typeof Symbol && Symbol.for
      , s = r ? Symbol.for("react.element") : 60103
      , a = r ? Symbol.for("react.portal") : 60106
      , o = r ? Symbol.for("react.fragment") : 60107
      , l = r ? Symbol.for("react.strict_mode") : 60108
      , d = r ? Symbol.for("react.profiler") : 60114
      , u = r ? Symbol.for("react.provider") : 60109
      , c = r ? Symbol.for("react.context") : 60110
      , h = r ? Symbol.for("react.concurrent_mode") : 60111
      , p = r ? Symbol.for("react.forward_ref") : 60112
      , _ = r ? Symbol.for("react.suspense") : 60113
      , f = r ? Symbol.for("react.memo") : 60115
      , g = r ? Symbol.for("react.lazy") : 60116
      , m = "function" == typeof Symbol && Symbol.iterator;
    function y(e, t, i, n, r, s, a, o) {
        if (!e) {
            if (e = void 0,
            void 0 === t)
                e = Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
            else {
                var l = [i, n, r, s, a, o]
                  , d = 0;
                (e = Error(t.replace(/%s/g, function() {
                    return l[d++]
                }))).name = "Invariant Violation"
            }
            throw e.framesToPop = 1,
            e
        }
    }
    function v(e) {
        for (var t = arguments.length - 1, i = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, n = 0; n < t; n++) {
            i += "&args[]=" + encodeURIComponent(arguments[n + 1])
        }
        y(!1, "Minified React error #" + e + "; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ", i)
    }
    var E = {
        isMounted: function isMounted() {
            return !1
        },
        enqueueForceUpdate: function enqueueForceUpdate() {},
        enqueueReplaceState: function enqueueReplaceState() {},
        enqueueSetState: function enqueueSetState() {}
    }
      , b = {};
    function T(e, t, i) {
        this.props = e,
        this.context = t,
        this.refs = b,
        this.updater = i || E
    }
    function S() {}
    function A(e, t, i) {
        this.props = e,
        this.context = t,
        this.refs = b,
        this.updater = i || E
    }
    T.prototype.isReactComponent = {},
    T.prototype.setState = function(e, t) {
        "object" != typeof e && "function" != typeof e && null != e && v("85"),
        this.updater.enqueueSetState(this, e, t, "setState")
    }
    ,
    T.prototype.forceUpdate = function(e) {
        this.updater.enqueueForceUpdate(this, e, "forceUpdate")
    }
    ,
    S.prototype = T.prototype;
    var P = A.prototype = new S;
    P.constructor = A,
    n(P, T.prototype),
    P.isPureReactComponent = !0;
    var w = {
        current: null
    }
      , k = {
        current: null
    }
      , C = Object.prototype.hasOwnProperty
      , I = {
        key: !0,
        ref: !0,
        __self: !0,
        __source: !0
    };
    function R(e, t, i) {
        var n = void 0
          , r = {}
          , a = null
          , o = null;
        if (null != t)
            for (n in void 0 !== t.ref && (o = t.ref),
            void 0 !== t.key && (a = "" + t.key),
            t) {
                C.call(t, n) && !I.hasOwnProperty(n) && (r[n] = t[n])
            }
        var l = arguments.length - 2;
        if (1 === l)
            r.children = i;
        else if (1 < l) {
            for (var d = Array(l), u = 0; u < l; u++) {
                d[u] = arguments[u + 2]
            }
            r.children = d
        }
        if (e && e.defaultProps)
            for (n in l = e.defaultProps) {
                void 0 === r[n] && (r[n] = l[n])
            }
        return {
            $$typeof: s,
            type: e,
            key: a,
            ref: o,
            props: r,
            _owner: k.current
        }
    }
    function D(e) {
        return "object" == typeof e && null !== e && e.$$typeof === s
    }
    var L = /\/+/g
      , M = [];
    function O(e, t, i, n) {
        if (M.length) {
            var r = M.pop();
            return r.result = e,
            r.keyPrefix = t,
            r.func = i,
            r.context = n,
            r.count = 0,
            r
        }
        return {
            result: e,
            keyPrefix: t,
            func: i,
            context: n,
            count: 0
        }
    }
    function x(e) {
        e.result = null,
        e.keyPrefix = null,
        e.func = null,
        e.context = null,
        e.count = 0,
        10 > M.length && M.push(e)
    }
    function N(e, t, i) {
        return null == e ? 0 : function e(t, i, n, r) {
            var o = typeof t;
            "undefined" !== o && "boolean" !== o || (t = null);
            var l = !1;
            if (null === t)
                l = !0;
            else
                switch (o) {
                case "string":
                case "number":
                    l = !0;
                    break;
                case "object":
                    switch (t.$$typeof) {
                    case s:
                    case a:
                        l = !0;
                    }
                }
            if (l)
                return n(r, t, "" === i ? "." + U(t, 0) : i),
                1;
            if (l = 0,
            i = "" === i ? "." : i + ":",
            Array.isArray(t))
                for (var d = 0; d < t.length; d++) {
                    var u = i + U(o = t[d], d);
                    l += e(o, u, n, r)
                }
            else if (null === t || "object" != typeof t ? u = null : u = "function" == typeof (u = m && t[m] || t["@@iterator"]) ? u : null,
            "function" == typeof u)
                for (t = u.call(t),
                d = 0; !(o = t.next()).done; ) {
                    l += e(o = o.value, u = i + U(o, d++), n, r)
                }
            else
                "object" === o && v("31", "[object Object]" === (n = "" + t) ? "object with keys {" + Object.keys(t).join(", ") + "}" : n, "");
            return l
        }(e, "", t, i)
    }
    function U(e, t) {
        return "object" == typeof e && null !== e && null != e.key ? function(e) {
            var t = {
                "=": "=0",
                ":": "=2"
            };
            return "$" + ("" + e).replace(/[=:]/g, function(e) {
                return t[e]
            })
        }(e.key) : t.toString(36)
    }
    function B(e, t) {
        e.func.call(e.context, t, e.count++)
    }
    function F(e, t, i) {
        var n = e.result
          , r = e.keyPrefix;
        e = e.func.call(e.context, t, e.count++),
        Array.isArray(e) ? V(e, n, i, function(e) {
            return e
        }) : null != e && (D(e) && (e = function(e, t) {
            return {
                $$typeof: s,
                type: e.type,
                key: t,
                ref: e.ref,
                props: e.props,
                _owner: e._owner
            }
        }(e, r + (!e.key || t && t.key === e.key ? "" : ("" + e.key).replace(L, "$&/") + "/") + i)),
        n.push(e))
    }
    function V(e, t, i, n, r) {
        var s = "";
        null != i && (s = ("" + i).replace(L, "$&/") + "/"),
        N(e, F, t = O(t, s, n, r)),
        x(t)
    }
    function H() {
        var e = w.current;
        return null === e && v("321"),
        e
    }
    var j = {
        Children: {
            map: function map(e, t, i) {
                if (null == e)
                    return e;
                var n = [];
                return V(e, n, null, t, i),
                n
            },
            forEach: function forEach(e, t, i) {
                if (null == e)
                    return e;
                N(e, B, t = O(null, null, t, i)),
                x(t)
            },
            count: function count(e) {
                return N(e, function() {
                    return null
                }, null)
            },
            toArray: function toArray(e) {
                var t = [];
                return V(e, t, null, function(e) {
                    return e
                }),
                t
            },
            only: function only(e) {
                return D(e) || v("143"),
                e
            }
        },
        createRef: function createRef() {
            return {
                current: null
            }
        },
        Component: T,
        PureComponent: A,
        createContext: function createContext(e, t) {
            return void 0 === t && (t = null),
            (e = {
                $$typeof: c,
                _calculateChangedBits: t,
                _currentValue: e,
                _currentValue2: e,
                _threadCount: 0,
                Provider: null,
                Consumer: null
            }).Provider = {
                $$typeof: u,
                _context: e
            },
            e.Consumer = e
        },
        forwardRef: function forwardRef(e) {
            return {
                $$typeof: p,
                render: e
            }
        },
        lazy: function lazy(e) {
            return {
                $$typeof: g,
                _ctor: e,
                _status: -1,
                _result: null
            }
        },
        memo: function memo(e, t) {
            return {
                $$typeof: f,
                type: e,
                compare: void 0 === t ? null : t
            }
        },
        useCallback: function useCallback(e, t) {
            return H().useCallback(e, t)
        },
        useContext: function useContext(e, t) {
            return H().useContext(e, t)
        },
        useEffect: function useEffect(e, t) {
            return H().useEffect(e, t)
        },
        useImperativeHandle: function useImperativeHandle(e, t, i) {
            return H().useImperativeHandle(e, t, i)
        },
        useDebugValue: function useDebugValue() {},
        useLayoutEffect: function useLayoutEffect(e, t) {
            return H().useLayoutEffect(e, t)
        },
        useMemo: function useMemo(e, t) {
            return H().useMemo(e, t)
        },
        useReducer: function useReducer(e, t, i) {
            return H().useReducer(e, t, i)
        },
        useRef: function useRef(e) {
            return H().useRef(e)
        },
        useState: function useState(e) {
            return H().useState(e)
        },
        Fragment: o,
        StrictMode: l,
        Suspense: _,
        createElement: R,
        cloneElement: function cloneElement(e, t, i) {
            null == e && v("267", e);
            var r = void 0
              , a = n({}, e.props)
              , o = e.key
              , l = e.ref
              , d = e._owner;
            if (null != t) {
                void 0 !== t.ref && (l = t.ref,
                d = k.current),
                void 0 !== t.key && (o = "" + t.key);
                var u = void 0;
                for (r in e.type && e.type.defaultProps && (u = e.type.defaultProps),
                t) {
                    C.call(t, r) && !I.hasOwnProperty(r) && (a[r] = void 0 === t[r] && void 0 !== u ? u[r] : t[r])
                }
            }
            if (1 === (r = arguments.length - 2))
                a.children = i;
            else if (1 < r) {
                u = Array(r);
                for (var c = 0; c < r; c++) {
                    u[c] = arguments[c + 2]
                }
                a.children = u
            }
            return {
                $$typeof: s,
                type: e.type,
                key: o,
                ref: l,
                props: a,
                _owner: d
            }
        },
        createFactory: function createFactory(e) {
            var t = R.bind(null, e);
            return t.type = e,
            t
        },
        isValidElement: D,
        version: "16.8.6",
        unstable_ConcurrentMode: h,
        unstable_Profiler: d,
        __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: {
            ReactCurrentDispatcher: w,
            ReactCurrentOwner: k,
            assign: n
        }
    }
      , W = {
        default: j
    }
      , G = W && j || W;
    e.exports = G.default || G
}
, function(e, t, i) {
    "use strict";
    var n = i(0)
      , r = i(72)
      , s = i(158);
    function a(e, t, i, n, r, s, a, o) {
        if (!e) {
            if (e = void 0,
            void 0 === t)
                e = Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
            else {
                var l = [i, n, r, s, a, o]
                  , d = 0;
                (e = Error(t.replace(/%s/g, function() {
                    return l[d++]
                }))).name = "Invariant Violation"
            }
            throw e.framesToPop = 1,
            e
        }
    }
    function o(e) {
        for (var t = arguments.length - 1, i = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, n = 0; n < t; n++) {
            i += "&args[]=" + encodeURIComponent(arguments[n + 1])
        }
        a(!1, "Minified React error #" + e + "; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ", i)
    }
    function l(e, t, i) {
        var d = Array.prototype.slice.call(arguments, 3);
        try {
            t.apply(i, d)
        } catch (e) {
            this.onError(e)
        }
    }
    n || o("227");
    var d = !1
      , u = null
      , c = !1
      , h = null
      , p = {
        onError: function onError(e) {
            d = !0,
            u = e
        }
    };
    function _() {
        d = !1,
        u = null,
        l.apply(p, arguments)
    }
    var f = null
      , g = {};
    function m() {
        if (f)
            for (var e in g) {
                var t = g[e]
                  , i = f.indexOf(e);
                if (-1 < i || o("96", e),
                !v[i])
                    for (var n in t.extractEvents || o("97", e),
                    v[i] = t,
                    i = t.eventTypes) {
                        var r = void 0
                          , s = i[n]
                          , a = t
                          , l = n;
                        E.hasOwnProperty(l) && o("99", l),
                        E[l] = s;
                        var d = s.phasedRegistrationNames;
                        if (d) {
                            for (r in d) {
                                d.hasOwnProperty(r) && y(d[r], a, l)
                            }
                            r = !0
                        } else
                            s.registrationName ? (y(s.registrationName, a, l),
                            r = !0) : r = !1;
                        r || o("98", n, e)
                    }
            }
    }
    function y(e, t, i) {
        b[e] && o("100", e),
        b[e] = t,
        T[e] = t.eventTypes[i].dependencies
    }
    var v = []
      , E = {}
      , b = {}
      , T = {}
      , S = null
      , A = null
      , P = null;
    function w(e, t, i) {
        var n = e.type || "unknown-event";
        e.currentTarget = P(i),
        function() {
            if (_.apply(this, arguments),
            d) {
                if (d) {
                    var f = u;
                    d = !1,
                    u = null
                } else
                    o("198"),
                    f = void 0;
                c || (c = !0,
                h = f)
            }
        }(n, t, void 0, e),
        e.currentTarget = null
    }
    function k(e, t) {
        return null == t && o("30"),
        null == e ? t : Array.isArray(e) ? Array.isArray(t) ? (e.push.apply(e, t),
        e) : (e.push(t),
        e) : Array.isArray(t) ? [e].concat(t) : [e, t]
    }
    function C(e, t, i) {
        Array.isArray(e) ? e.forEach(t, i) : e && t.call(i, e)
    }
    var I = null;
    function R(e) {
        if (e) {
            var t = e._dispatchListeners
              , i = e._dispatchInstances;
            if (Array.isArray(t))
                for (var n = 0; n < t.length && !e.isPropagationStopped(); n++) {
                    w(e, t[n], i[n])
                }
            else
                t && w(e, t, i);
            e._dispatchListeners = null,
            e._dispatchInstances = null,
            e.isPersistent() || e.constructor.release(e)
        }
    }
    var D = {
        injectEventPluginOrder: function injectEventPluginOrder(e) {
            f && o("101"),
            f = Array.prototype.slice.call(e),
            m()
        },
        injectEventPluginsByName: function injectEventPluginsByName(e) {
            var t, i = !1;
            for (t in e) {
                if (e.hasOwnProperty(t)) {
                    var n = e[t];
                    g.hasOwnProperty(t) && g[t] === n || (g[t] && o("102", t),
                    g[t] = n,
                    i = !0)
                }
            }
            i && m()
        }
    };
    function L(e, t) {
        var i = e.stateNode;
        if (!i)
            return null;
        var n = S(i);
        if (!n)
            return null;
        i = n[t];
        e: switch (t) {
        case "onClick":
        case "onClickCapture":
        case "onDoubleClick":
        case "onDoubleClickCapture":
        case "onMouseDown":
        case "onMouseDownCapture":
        case "onMouseMove":
        case "onMouseMoveCapture":
        case "onMouseUp":
        case "onMouseUpCapture":
            (n = !n.disabled) || (n = !("button" === (e = e.type) || "input" === e || "select" === e || "textarea" === e)),
            e = !n;
            break e;
        default:
            e = !1;
        }
        return e ? null : (i && "function" != typeof i && o("231", t, typeof i),
        i)
    }
    function M(e) {
        if (null !== e && (I = k(I, e)),
        e = I,
        I = null,
        e && (C(e, R),
        I && o("95"),
        c))
            throw e = h,
            c = !1,
            h = null,
            e
    }
    var O = Math.random().toString(36).slice(2)
      , x = "__reactInternalInstance$" + O
      , N = "__reactEventHandlers$" + O;
    function U(e) {
        if (e[x])
            return e[x];
        for (; !e[x]; ) {
            if (!e.parentNode)
                return null;
            e = e.parentNode
        }
        return 5 === (e = e[x]).tag || 6 === e.tag ? e : null
    }
    function B(e) {
        return !(e = e[x]) || 5 !== e.tag && 6 !== e.tag ? null : e
    }
    function F(e) {
        if (5 === e.tag || 6 === e.tag)
            return e.stateNode;
        o("33")
    }
    function V(e) {
        return e[N] || null
    }
    function H(e) {
        do {
            e = e.return
        } while (e && 5 !== e.tag);return e || null
    }
    function j(e, t, i) {
        (t = L(e, i.dispatchConfig.phasedRegistrationNames[t])) && (i._dispatchListeners = k(i._dispatchListeners, t),
        i._dispatchInstances = k(i._dispatchInstances, e))
    }
    function W(e) {
        if (e && e.dispatchConfig.phasedRegistrationNames) {
            for (var t = e._targetInst, i = []; t; ) {
                i.push(t),
                t = H(t)
            }
            for (t = i.length; 0 < t--; ) {
                j(i[t], "captured", e)
            }
            for (t = 0; t < i.length; t++) {
                j(i[t], "bubbled", e)
            }
        }
    }
    function G(e, t, i) {
        e && i && i.dispatchConfig.registrationName && (t = L(e, i.dispatchConfig.registrationName)) && (i._dispatchListeners = k(i._dispatchListeners, t),
        i._dispatchInstances = k(i._dispatchInstances, e))
    }
    function K(e) {
        e && e.dispatchConfig.registrationName && G(e._targetInst, null, e)
    }
    function z(e) {
        C(e, W)
    }
    var q = !("undefined" == typeof window || !window.document || !window.document.createElement);
    function Y(e, t) {
        var i = {};
        return i[e.toLowerCase()] = t.toLowerCase(),
        i["Webkit" + e] = "webkit" + t,
        i["Moz" + e] = "moz" + t,
        i
    }
    var Q = {
        animationend: Y("Animation", "AnimationEnd"),
        animationiteration: Y("Animation", "AnimationIteration"),
        animationstart: Y("Animation", "AnimationStart"),
        transitionend: Y("Transition", "TransitionEnd")
    }
      , $ = {}
      , X = {};
    function J(e) {
        if ($[e])
            return $[e];
        if (!Q[e])
            return e;
        var t, i = Q[e];
        for (t in i) {
            if (i.hasOwnProperty(t) && t in X)
                return $[e] = i[t]
        }
        return e
    }
    q && (X = document.createElement("div").style,
    "AnimationEvent"in window || (delete Q.animationend.animation,
    delete Q.animationiteration.animation,
    delete Q.animationstart.animation),
    "TransitionEvent"in window || delete Q.transitionend.transition);
    var Z = J("animationend")
      , ee = J("animationiteration")
      , te = J("animationstart")
      , ie = J("transitionend")
      , ne = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ")
      , re = null
      , se = null
      , ae = null;
    function oe() {
        if (ae)
            return ae;
        var e, t, i = se, n = i.length, r = "value"in re ? re.value : re.textContent, s = r.length;
        for (e = 0; e < n && i[e] === r[e]; e++) {}
        var a = n - e;
        for (t = 1; t <= a && i[n - t] === r[s - t]; t++) {}
        return ae = r.slice(e, 1 < t ? 1 - t : void 0)
    }
    function le() {
        return !0
    }
    function de() {
        return !1
    }
    function ue(e, t, i, n) {
        for (var r in this.dispatchConfig = e,
        this._targetInst = t,
        this.nativeEvent = i,
        e = this.constructor.Interface) {
            e.hasOwnProperty(r) && ((t = e[r]) ? this[r] = t(i) : "target" === r ? this.target = n : this[r] = i[r])
        }
        return this.isDefaultPrevented = (null != i.defaultPrevented ? i.defaultPrevented : !1 === i.returnValue) ? le : de,
        this.isPropagationStopped = de,
        this
    }
    function ce(e, t, i, n) {
        if (this.eventPool.length) {
            var r = this.eventPool.pop();
            return this.call(r, e, t, i, n),
            r
        }
        return new this(e,t,i,n)
    }
    function he(e) {
        e instanceof this || o("279"),
        e.destructor(),
        10 > this.eventPool.length && this.eventPool.push(e)
    }
    function pe(e) {
        e.eventPool = [],
        e.getPooled = ce,
        e.release = he
    }
    r(ue.prototype, {
        preventDefault: function preventDefault() {
            this.defaultPrevented = !0;
            var e = this.nativeEvent;
            e && (e.preventDefault ? e.preventDefault() : "unknown" != typeof e.returnValue && (e.returnValue = !1),
            this.isDefaultPrevented = le)
        },
        stopPropagation: function stopPropagation() {
            var e = this.nativeEvent;
            e && (e.stopPropagation ? e.stopPropagation() : "unknown" != typeof e.cancelBubble && (e.cancelBubble = !0),
            this.isPropagationStopped = le)
        },
        persist: function persist() {
            this.isPersistent = le
        },
        isPersistent: de,
        destructor: function destructor() {
            var e, t = this.constructor.Interface;
            for (e in t) {
                this[e] = null
            }
            this.nativeEvent = this._targetInst = this.dispatchConfig = null,
            this.isPropagationStopped = this.isDefaultPrevented = de,
            this._dispatchInstances = this._dispatchListeners = null
        }
    }),
    ue.Interface = {
        type: null,
        target: null,
        currentTarget: function currentTarget() {
            return null
        },
        eventPhase: null,
        bubbles: null,
        cancelable: null,
        timeStamp: function timeStamp(e) {
            return e.timeStamp || Date.now()
        },
        defaultPrevented: null,
        isTrusted: null
    },
    ue.extend = function(e) {
        function t() {}
        function i() {
            return n.apply(this, arguments)
        }
        var n = this;
        t.prototype = n.prototype;
        var s = new t;
        return r(s, i.prototype),
        i.prototype = s,
        i.prototype.constructor = i,
        i.Interface = r({}, n.Interface, e),
        i.extend = n.extend,
        pe(i),
        i
    }
    ,
    pe(ue);
    var _e = ue.extend({
        data: null
    })
      , fe = ue.extend({
        data: null
    })
      , ge = [9, 13, 27, 32]
      , me = q && "CompositionEvent"in window
      , ye = null;
    q && "documentMode"in document && (ye = document.documentMode);
    var ve = q && "TextEvent"in window && !ye
      , Ee = q && (!me || ye && 8 < ye && 11 >= ye)
      , be = String.fromCharCode(32)
      , Te = {
        beforeInput: {
            phasedRegistrationNames: {
                bubbled: "onBeforeInput",
                captured: "onBeforeInputCapture"
            },
            dependencies: ["compositionend", "keypress", "textInput", "paste"]
        },
        compositionEnd: {
            phasedRegistrationNames: {
                bubbled: "onCompositionEnd",
                captured: "onCompositionEndCapture"
            },
            dependencies: "blur compositionend keydown keypress keyup mousedown".split(" ")
        },
        compositionStart: {
            phasedRegistrationNames: {
                bubbled: "onCompositionStart",
                captured: "onCompositionStartCapture"
            },
            dependencies: "blur compositionstart keydown keypress keyup mousedown".split(" ")
        },
        compositionUpdate: {
            phasedRegistrationNames: {
                bubbled: "onCompositionUpdate",
                captured: "onCompositionUpdateCapture"
            },
            dependencies: "blur compositionupdate keydown keypress keyup mousedown".split(" ")
        }
    }
      , Se = !1;
    function Ae(e, t) {
        switch (e) {
        case "keyup":
            return -1 !== ge.indexOf(t.keyCode);
        case "keydown":
            return 229 !== t.keyCode;
        case "keypress":
        case "mousedown":
        case "blur":
            return !0;
        default:
            return !1;
        }
    }
    function Pe(e) {
        return "object" == typeof (e = e.detail) && "data"in e ? e.data : null
    }
    var we = !1;
    var Ce = null
      , Ie = null
      , Re = null;
    function De(e) {
        if (e = A(e)) {
            "function" != typeof Ce && o("280");
            var t = S(e.stateNode);
            Ce(e.stateNode, e.type, t)
        }
    }
    function Le(e) {
        Ie ? Re ? Re.push(e) : Re = [e] : Ie = e
    }
    function Me() {
        if (Ie) {
            var e = Ie
              , t = Re;
            if (Re = Ie = null,
            De(e),
            t)
                for (e = 0; e < t.length; e++) {
                    De(t[e])
                }
        }
    }
    function Oe(e, t) {
        return e(t)
    }
    function xe(e, t, i) {
        return e(t, i)
    }
    function Ne() {}
    var Ue = !1;
    function Be(e, t) {
        if (Ue)
            return e(t);
        Ue = !0;
        try {
            return Oe(e, t)
        } finally {
            Ue = !1,
            (null !== Ie || null !== Re) && (Ne(),
            Me())
        }
    }
    var Fe = {
        color: !0,
        date: !0,
        datetime: !0,
        "datetime-local": !0,
        email: !0,
        month: !0,
        number: !0,
        password: !0,
        range: !0,
        search: !0,
        tel: !0,
        text: !0,
        time: !0,
        url: !0,
        week: !0
    };
    function Ve(e) {
        var t = e && e.nodeName && e.nodeName.toLowerCase();
        return "input" === t ? !!Fe[e.type] : "textarea" === t
    }
    function He(e) {
        return (e = e.target || e.srcElement || window).correspondingUseElement && (e = e.correspondingUseElement),
        3 === e.nodeType ? e.parentNode : e
    }
    function je(e) {
        if (!q)
            return !1;
        var t = ((e = "on" + e)in document);
        return t || ((t = document.createElement("div")).setAttribute(e, "return;"),
        t = "function" == typeof t[e]),
        t
    }
    function We(e) {
        var t = e.type;
        return (e = e.nodeName) && "input" === e.toLowerCase() && ("checkbox" === t || "radio" === t)
    }
    function Ge(e) {
        e._valueTracker || (e._valueTracker = function(e) {
            var t = We(e) ? "checked" : "value"
              , i = Object.getOwnPropertyDescriptor(e.constructor.prototype, t)
              , n = "" + e[t];
            if (!e.hasOwnProperty(t) && void 0 !== i && "function" == typeof i.get && "function" == typeof i.set) {
                var r = i.get
                  , s = i.set;
                return Object.defineProperty(e, t, {
                    configurable: !0,
                    get: function get() {
                        return r.call(this)
                    },
                    set: function set(e) {
                        n = "" + e,
                        s.call(this, e)
                    }
                }),
                Object.defineProperty(e, t, {
                    enumerable: i.enumerable
                }),
                {
                    getValue: function getValue() {
                        return n
                    },
                    setValue: function setValue(e) {
                        n = "" + e
                    },
                    stopTracking: function stopTracking() {
                        e._valueTracker = null,
                        delete e[t]
                    }
                }
            }
        }(e))
    }
    function Ke(e) {
        if (!e)
            return !1;
        var t = e._valueTracker;
        if (!t)
            return !0;
        var i = t.getValue()
          , n = "";
        return e && (n = We(e) ? e.checked ? "true" : "false" : e.value),
        (e = n) !== i && (t.setValue(e),
        !0)
    }
    var ze = n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;
    ze.hasOwnProperty("ReactCurrentDispatcher") || (ze.ReactCurrentDispatcher = {
        current: null
    });
    var Ye = "function" == typeof Symbol && Symbol.for
      , Qe = Ye ? Symbol.for("react.element") : 60103
      , $e = Ye ? Symbol.for("react.portal") : 60106
      , Xe = Ye ? Symbol.for("react.fragment") : 60107
      , Je = Ye ? Symbol.for("react.strict_mode") : 60108
      , Ze = Ye ? Symbol.for("react.profiler") : 60114
      , et = Ye ? Symbol.for("react.provider") : 60109
      , tt = Ye ? Symbol.for("react.context") : 60110
      , it = Ye ? Symbol.for("react.concurrent_mode") : 60111
      , nt = Ye ? Symbol.for("react.forward_ref") : 60112
      , rt = Ye ? Symbol.for("react.suspense") : 60113
      , st = Ye ? Symbol.for("react.memo") : 60115
      , at = Ye ? Symbol.for("react.lazy") : 60116
      , ot = "function" == typeof Symbol && Symbol.iterator;
    function lt(e) {
        return null === e || "object" != typeof e ? null : "function" == typeof (e = ot && e[ot] || e["@@iterator"]) ? e : null
    }
    function dt(e) {
        if (null == e)
            return null;
        if ("function" == typeof e)
            return e.displayName || e.name || null;
        if ("string" == typeof e)
            return e;
        switch (e) {
        case it:
            return "ConcurrentMode";
        case Xe:
            return "Fragment";
        case $e:
            return "Portal";
        case Ze:
            return "Profiler";
        case Je:
            return "StrictMode";
        case rt:
            return "Suspense";
        }
        if ("object" == typeof e)
            switch (e.$$typeof) {
            case tt:
                return "Context.Consumer";
            case et:
                return "Context.Provider";
            case nt:
                var t = e.render;
                return t = t.displayName || t.name || "",
                e.displayName || ("" !== t ? "ForwardRef(" + t + ")" : "ForwardRef");
            case st:
                return dt(e.type);
            case at:
                if (e = 1 === e._status ? e._result : null)
                    return dt(e);
            }
        return null
    }
    function ut(e) {
        var t = "";
        do {
            e: switch (e.tag) {
            case 3:
            case 4:
            case 6:
            case 7:
            case 10:
            case 9:
                var i = "";
                break e;
            default:
                var n = e._debugOwner
                  , r = e._debugSource
                  , s = dt(e.type);
                i = null,
                n && (i = dt(n.type)),
                n = s,
                s = "",
                r ? s = " (at " + r.fileName.replace(/^(.*)[\\\/]/, "") + ":" + r.lineNumber + ")" : i && (s = " (created by " + i + ")"),
                i = "\n    in " + (n || "Unknown") + s;
            }
            t += i,
            e = e.return
        } while (e);return t
    }
    var ht = Object.prototype.hasOwnProperty
      , pt = {}
      , _t = {};
    function ft(e, t, i, n, r) {
        this.acceptsBooleans = 2 === t || 3 === t || 4 === t,
        this.attributeName = n,
        this.attributeNamespace = r,
        this.mustUseProperty = i,
        this.propertyName = e,
        this.type = t
    }
    var gt = {};
    "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e) {
        gt[e] = new ft(e,0,!1,e,null)
    }),
    [["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach(function(e) {
        var t = e[0];
        gt[t] = new ft(t,1,!1,e[1],null)
    }),
    ["contentEditable", "draggable", "spellCheck", "value"].forEach(function(e) {
        gt[e] = new ft(e,2,!1,e.toLowerCase(),null)
    }),
    ["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach(function(e) {
        gt[e] = new ft(e,2,!1,e,null)
    }),
    "allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e) {
        gt[e] = new ft(e,3,!1,e.toLowerCase(),null)
    }),
    ["checked", "multiple", "muted", "selected"].forEach(function(e) {
        gt[e] = new ft(e,3,!0,e,null)
    }),
    ["capture", "download"].forEach(function(e) {
        gt[e] = new ft(e,4,!1,e,null)
    }),
    ["cols", "rows", "size", "span"].forEach(function(e) {
        gt[e] = new ft(e,6,!1,e,null)
    }),
    ["rowSpan", "start"].forEach(function(e) {
        gt[e] = new ft(e,5,!1,e.toLowerCase(),null)
    });
    var mt = /[\-:]([a-z])/g;
    function yt(e) {
        return e[1].toUpperCase()
    }
    function vt(e, t, i, n) {
        var r = gt.hasOwnProperty(t) ? gt[t] : null;
        (null !== r ? 0 === r.type : !n && 2 < t.length && ("o" === t[0] || "O" === t[0]) && ("n" === t[1] || "N" === t[1])) || (function(e, t, i, n) {
            if (null == t || function(e, t, i, n) {
                if (null !== i && 0 === i.type)
                    return !1;
                switch (typeof t) {
                case "function":
                case "symbol":
                    return !0;
                case "boolean":
                    return !n && (null !== i ? !i.acceptsBooleans : "data-" !== (e = e.toLowerCase().slice(0, 5)) && "aria-" !== e);
                default:
                    return !1;
                }
            }(e, t, i, n))
                return !0;
            if (n)
                return !1;
            if (null !== i)
                switch (i.type) {
                case 3:
                    return !t;
                case 4:
                    return !1 === t;
                case 5:
                    return isNaN(t);
                case 6:
                    return isNaN(t) || 1 > t;
                }
            return !1
        }(t, i, r, n) && (i = null),
        n || null === r ? function(e) {
            return !!ht.call(_t, e) || !ht.call(pt, e) && (/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/.test(e) ? _t[e] = !0 : (pt[e] = !0,
            !1))
        }(t) && (null === i ? e.removeAttribute(t) : e.setAttribute(t, "" + i)) : r.mustUseProperty ? e[r.propertyName] = null === i ? 3 !== r.type && "" : i : (t = r.attributeName,
        n = r.attributeNamespace,
        null === i ? e.removeAttribute(t) : (i = 3 === (r = r.type) || 4 === r && !0 === i ? "" : "" + i,
        n ? e.setAttributeNS(n, t, i) : e.setAttribute(t, i))))
    }
    function Et(e) {
        switch (typeof e) {
        case "boolean":
        case "number":
        case "object":
        case "string":
        case "undefined":
            return e;
        default:
            return "";
        }
    }
    function bt(e, t) {
        var i = t.checked;
        return r({}, t, {
            defaultChecked: void 0,
            defaultValue: void 0,
            value: void 0,
            checked: null != i ? i : e._wrapperState.initialChecked
        })
    }
    function Tt(e, t) {
        var i = null == t.defaultValue ? "" : t.defaultValue
          , n = null != t.checked ? t.checked : t.defaultChecked;
        i = Et(null != t.value ? t.value : i),
        e._wrapperState = {
            initialChecked: n,
            initialValue: i,
            controlled: "checkbox" === t.type || "radio" === t.type ? null != t.checked : null != t.value
        }
    }
    function St(e, t) {
        null != (t = t.checked) && vt(e, "checked", t, !1)
    }
    function At(e, t) {
        St(e, t);
        var i = Et(t.value)
          , n = t.type;
        if (null != i)
            "number" === n ? (0 === i && "" === e.value || e.value != i) && (e.value = "" + i) : e.value !== "" + i && (e.value = "" + i);
        else if ("submit" === n || "reset" === n)
            return void e.removeAttribute("value");
        t.hasOwnProperty("value") ? wt(e, t.type, i) : t.hasOwnProperty("defaultValue") && wt(e, t.type, Et(t.defaultValue)),
        null == t.checked && null != t.defaultChecked && (e.defaultChecked = !!t.defaultChecked)
    }
    function Pt(e, t, i) {
        if (t.hasOwnProperty("value") || t.hasOwnProperty("defaultValue")) {
            var n = t.type;
            if (!("submit" !== n && "reset" !== n || void 0 !== t.value && null !== t.value))
                return;
            t = "" + e._wrapperState.initialValue,
            i || t === e.value || (e.value = t),
            e.defaultValue = t
        }
        "" !== (i = e.name) && (e.name = ""),
        e.defaultChecked = !e.defaultChecked,
        e.defaultChecked = !!e._wrapperState.initialChecked,
        "" !== i && (e.name = i)
    }
    function wt(e, t, i) {
        "number" === t && e.ownerDocument.activeElement === e || (null == i ? e.defaultValue = "" + e._wrapperState.initialValue : e.defaultValue !== "" + i && (e.defaultValue = "" + i))
    }
    "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e) {
        var t = e.replace(mt, yt);
        gt[t] = new ft(t,1,!1,e,null)
    }),
    "xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e) {
        var t = e.replace(mt, yt);
        gt[t] = new ft(t,1,!1,e,"http://www.w3.org/1999/xlink")
    }),
    ["xml:base", "xml:lang", "xml:space"].forEach(function(e) {
        var t = e.replace(mt, yt);
        gt[t] = new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")
    }),
    ["tabIndex", "crossOrigin"].forEach(function(e) {
        gt[e] = new ft(e,1,!1,e.toLowerCase(),null)
    });
    var kt = {
        change: {
            phasedRegistrationNames: {
                bubbled: "onChange",
                captured: "onChangeCapture"
            },
            dependencies: "blur change click focus input keydown keyup selectionchange".split(" ")
        }
    };
    function Ct(e, t, i) {
        return (e = ue.getPooled(kt.change, e, t, i)).type = "change",
        Le(i),
        z(e),
        e
    }
    var It = null
      , Rt = null;
    function Dt(e) {
        M(e)
    }
    function Lt(e) {
        if (Ke(F(e)))
            return e
    }
    function Mt(e, t) {
        if ("change" === e)
            return t
    }
    var Ot = !1;
    function xt() {
        It && (It.detachEvent("onpropertychange", Nt),
        Rt = It = null)
    }
    function Nt(e) {
        "value" === e.propertyName && Lt(Rt) && Be(Dt, e = Ct(Rt, e, He(e)))
    }
    function Ut(e, t, i) {
        "focus" === e ? (xt(),
        Rt = i,
        (It = t).attachEvent("onpropertychange", Nt)) : "blur" === e && xt()
    }
    function Bt(e) {
        if ("selectionchange" === e || "keyup" === e || "keydown" === e)
            return Lt(Rt)
    }
    function Ft(e, t) {
        if ("click" === e)
            return Lt(t)
    }
    function Vt(e, t) {
        if ("input" === e || "change" === e)
            return Lt(t)
    }
    q && (Ot = je("input") && (!document.documentMode || 9 < document.documentMode));
    var Ht = {
        eventTypes: kt,
        _isInputEventSupported: Ot,
        extractEvents: function extractEvents(e, t, i, n) {
            var r = t ? F(t) : window
              , s = void 0
              , a = void 0
              , o = r.nodeName && r.nodeName.toLowerCase();
            if ("select" === o || "input" === o && "file" === r.type ? s = Mt : Ve(r) ? Ot ? s = Vt : (s = Bt,
            a = Ut) : (o = r.nodeName) && "input" === o.toLowerCase() && ("checkbox" === r.type || "radio" === r.type) && (s = Ft),
            s && (s = s(e, t)))
                return Ct(s, i, n);
            a && a(e, r, t),
            "blur" === e && (e = r._wrapperState) && e.controlled && "number" === r.type && wt(r, "number", r.value)
        }
    }
      , jt = ue.extend({
        view: null,
        detail: null
    })
      , Wt = {
        Alt: "altKey",
        Control: "ctrlKey",
        Meta: "metaKey",
        Shift: "shiftKey"
    };
    function Gt(e) {
        var t = this.nativeEvent;
        return t.getModifierState ? t.getModifierState(e) : !!(e = Wt[e]) && !!t[e]
    }
    function Kt() {
        return Gt
    }
    var zt = 0
      , qt = 0
      , Yt = !1
      , Qt = !1
      , $t = jt.extend({
        screenX: null,
        screenY: null,
        clientX: null,
        clientY: null,
        pageX: null,
        pageY: null,
        ctrlKey: null,
        shiftKey: null,
        altKey: null,
        metaKey: null,
        getModifierState: Kt,
        button: null,
        buttons: null,
        relatedTarget: function relatedTarget(e) {
            return e.relatedTarget || (e.fromElement === e.srcElement ? e.toElement : e.fromElement)
        },
        movementX: function movementX(e) {
            if ("movementX"in e)
                return e.movementX;
            var t = zt;
            return zt = e.screenX,
            Yt ? "mousemove" === e.type ? e.screenX - t : 0 : (Yt = !0,
            0)
        },
        movementY: function movementY(e) {
            if ("movementY"in e)
                return e.movementY;
            var t = qt;
            return qt = e.screenY,
            Qt ? "mousemove" === e.type ? e.screenY - t : 0 : (Qt = !0,
            0)
        }
    })
      , Xt = $t.extend({
        pointerId: null,
        width: null,
        height: null,
        pressure: null,
        tangentialPressure: null,
        tiltX: null,
        tiltY: null,
        twist: null,
        pointerType: null,
        isPrimary: null
    })
      , Jt = {
        mouseEnter: {
            registrationName: "onMouseEnter",
            dependencies: ["mouseout", "mouseover"]
        },
        mouseLeave: {
            registrationName: "onMouseLeave",
            dependencies: ["mouseout", "mouseover"]
        },
        pointerEnter: {
            registrationName: "onPointerEnter",
            dependencies: ["pointerout", "pointerover"]
        },
        pointerLeave: {
            registrationName: "onPointerLeave",
            dependencies: ["pointerout", "pointerover"]
        }
    };
    function ei(e, t) {
        return e === t && (0 !== e || 1 / e == 1 / t) || e != e && t != t
    }
    var ti = Object.prototype.hasOwnProperty;
    function ii(e, t) {
        if (ei(e, t))
            return !0;
        if ("object" != typeof e || null === e || "object" != typeof t || null === t)
            return !1;
        var i = Object.keys(e)
          , n = Object.keys(t);
        if (i.length !== n.length)
            return !1;
        for (n = 0; n < i.length; n++) {
            if (!ti.call(t, i[n]) || !ei(e[i[n]], t[i[n]]))
                return !1
        }
        return !0
    }
    function ni(e) {
        var t = e;
        if (e.alternate)
            for (; t.return; ) {
                t = t.return
            }
        else {
            if (0 != (2 & t.effectTag))
                return 1;
            for (; t.return; ) {
                if (0 != (2 & (t = t.return).effectTag))
                    return 1
            }
        }
        return 3 === t.tag ? 2 : 3
    }
    function ri(e) {
        2 !== ni(e) && o("188")
    }
    function si(e) {
        if (!(e = function(e) {
            var t = e.alternate;
            if (!t)
                return 3 === (t = ni(e)) && o("188"),
                1 === t ? null : e;
            for (var i = e, n = t; ; ) {
                var r = i.return
                  , s = r ? r.alternate : null;
                if (!r || !s)
                    break;
                if (r.child === s.child) {
                    for (var a = r.child; a; ) {
                        if (a === i)
                            return ri(r),
                            e;
                        if (a === n)
                            return ri(r),
                            t;
                        a = a.sibling
                    }
                    o("188")
                }
                if (i.return !== n.return)
                    i = r,
                    n = s;
                else {
                    a = !1;
                    for (var l = r.child; l; ) {
                        if (l === i) {
                            a = !0,
                            i = r,
                            n = s;
                            break
                        }
                        if (l === n) {
                            a = !0,
                            n = r,
                            i = s;
                            break
                        }
                        l = l.sibling
                    }
                    if (!a) {
                        for (l = s.child; l; ) {
                            if (l === i) {
                                a = !0,
                                i = s,
                                n = r;
                                break
                            }
                            if (l === n) {
                                a = !0,
                                n = s,
                                i = r;
                                break
                            }
                            l = l.sibling
                        }
                        a || o("189")
                    }
                }
                i.alternate !== n && o("190")
            }
            return 3 !== i.tag && o("188"),
            i.stateNode.current === i ? e : t
        }(e)))
            return null;
        for (var t = e; ; ) {
            if (5 === t.tag || 6 === t.tag)
                return t;
            if (t.child)
                t.child.return = t,
                t = t.child;
            else {
                if (t === e)
                    break;
                for (; !t.sibling; ) {
                    if (!t.return || t.return === e)
                        return null;
                    t = t.return
                }
                t.sibling.return = t.return,
                t = t.sibling
            }
        }
        return null
    }
    var ai = ue.extend({
        animationName: null,
        elapsedTime: null,
        pseudoElement: null
    })
      , oi = ue.extend({
        clipboardData: function clipboardData(e) {
            return "clipboardData"in e ? e.clipboardData : window.clipboardData
        }
    })
      , li = jt.extend({
        relatedTarget: null
    });
    function di(e) {
        var t = e.keyCode;
        return "charCode"in e ? 0 === (e = e.charCode) && 13 === t && (e = 13) : e = t,
        10 === e && (e = 13),
        32 <= e || 13 === e ? e : 0
    }
    var ui = {
        Esc: "Escape",
        Spacebar: " ",
        Left: "ArrowLeft",
        Up: "ArrowUp",
        Right: "ArrowRight",
        Down: "ArrowDown",
        Del: "Delete",
        Win: "OS",
        Menu: "ContextMenu",
        Apps: "ContextMenu",
        Scroll: "ScrollLock",
        MozPrintableKey: "Unidentified"
    }
      , ci = {
        8: "Backspace",
        9: "Tab",
        12: "Clear",
        13: "Enter",
        16: "Shift",
        17: "Control",
        18: "Alt",
        19: "Pause",
        20: "CapsLock",
        27: "Escape",
        32: " ",
        33: "PageUp",
        34: "PageDown",
        35: "End",
        36: "Home",
        37: "ArrowLeft",
        38: "ArrowUp",
        39: "ArrowRight",
        40: "ArrowDown",
        45: "Insert",
        46: "Delete",
        112: "F1",
        113: "F2",
        114: "F3",
        115: "F4",
        116: "F5",
        117: "F6",
        118: "F7",
        119: "F8",
        120: "F9",
        121: "F10",
        122: "F11",
        123: "F12",
        144: "NumLock",
        145: "ScrollLock",
        224: "Meta"
    }
      , hi = jt.extend({
        key: function key(e) {
            if (e.key) {
                var t = ui[e.key] || e.key;
                if ("Unidentified" !== t)
                    return t
            }
            return "keypress" === e.type ? 13 === (e = di(e)) ? "Enter" : String.fromCharCode(e) : "keydown" === e.type || "keyup" === e.type ? ci[e.keyCode] || "Unidentified" : ""
        },
        location: null,
        ctrlKey: null,
        shiftKey: null,
        altKey: null,
        metaKey: null,
        repeat: null,
        locale: null,
        getModifierState: Kt,
        charCode: function charCode(e) {
            return "keypress" === e.type ? di(e) : 0
        },
        keyCode: function keyCode(e) {
            return "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0
        },
        which: function which(e) {
            return "keypress" === e.type ? di(e) : "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0
        }
    })
      , pi = $t.extend({
        dataTransfer: null
    })
      , _i = jt.extend({
        touches: null,
        targetTouches: null,
        changedTouches: null,
        altKey: null,
        metaKey: null,
        ctrlKey: null,
        shiftKey: null,
        getModifierState: Kt
    })
      , fi = ue.extend({
        propertyName: null,
        elapsedTime: null,
        pseudoElement: null
    })
      , gi = $t.extend({
        deltaX: function deltaX(e) {
            return "deltaX"in e ? e.deltaX : "wheelDeltaX"in e ? -e.wheelDeltaX : 0
        },
        deltaY: function deltaY(e) {
            return "deltaY"in e ? e.deltaY : "wheelDeltaY"in e ? -e.wheelDeltaY : "wheelDelta"in e ? -e.wheelDelta : 0
        },
        deltaZ: null,
        deltaMode: null
    })
      , yi = {}
      , vi = {};
    function Ei(e, t) {
        var i = e[0]
          , n = "on" + ((e = e[1])[0].toUpperCase() + e.slice(1));
        t = {
            phasedRegistrationNames: {
                bubbled: n,
                captured: n + "Capture"
            },
            dependencies: [i],
            isInteractive: t
        },
        yi[e] = t,
        vi[i] = t
    }
    [["blur", "blur"], ["cancel", "cancel"], ["click", "click"], ["close", "close"], ["contextmenu", "contextMenu"], ["copy", "copy"], ["cut", "cut"], ["auxclick", "auxClick"], ["dblclick", "doubleClick"], ["dragend", "dragEnd"], ["dragstart", "dragStart"], ["drop", "drop"], ["focus", "focus"], ["input", "input"], ["invalid", "invalid"], ["keydown", "keyDown"], ["keypress", "keyPress"], ["keyup", "keyUp"], ["mousedown", "mouseDown"], ["mouseup", "mouseUp"], ["paste", "paste"], ["pause", "pause"], ["play", "play"], ["pointercancel", "pointerCancel"], ["pointerdown", "pointerDown"], ["pointerup", "pointerUp"], ["ratechange", "rateChange"], ["reset", "reset"], ["seeked", "seeked"], ["submit", "submit"], ["touchcancel", "touchCancel"], ["touchend", "touchEnd"], ["touchstart", "touchStart"], ["volumechange", "volumeChange"]].forEach(function(e) {
        Ei(e, !0)
    }),
    [["abort", "abort"], [Z, "animationEnd"], [ee, "animationIteration"], [te, "animationStart"], ["canplay", "canPlay"], ["canplaythrough", "canPlayThrough"], ["drag", "drag"], ["dragenter", "dragEnter"], ["dragexit", "dragExit"], ["dragleave", "dragLeave"], ["dragover", "dragOver"], ["durationchange", "durationChange"], ["emptied", "emptied"], ["encrypted", "encrypted"], ["ended", "ended"], ["error", "error"], ["gotpointercapture", "gotPointerCapture"], ["load", "load"], ["loadeddata", "loadedData"], ["loadedmetadata", "loadedMetadata"], ["loadstart", "loadStart"], ["lostpointercapture", "lostPointerCapture"], ["mousemove", "mouseMove"], ["mouseout", "mouseOut"], ["mouseover", "mouseOver"], ["playing", "playing"], ["pointermove", "pointerMove"], ["pointerout", "pointerOut"], ["pointerover", "pointerOver"], ["progress", "progress"], ["scroll", "scroll"], ["seeking", "seeking"], ["stalled", "stalled"], ["suspend", "suspend"], ["timeupdate", "timeUpdate"], ["toggle", "toggle"], ["touchmove", "touchMove"], [ie, "transitionEnd"], ["waiting", "waiting"], ["wheel", "wheel"]].forEach(function(e) {
        Ei(e, !1)
    });
    var bi = {
        eventTypes: yi,
        isInteractiveTopLevelEventType: function isInteractiveTopLevelEventType(e) {
            return void 0 !== (e = vi[e]) && !0 === e.isInteractive
        },
        extractEvents: function extractEvents(e, t, i, n) {
            var r = vi[e];
            if (!r)
                return null;
            switch (e) {
            case "keypress":
                if (0 === di(i))
                    return null;
            case "keydown":
            case "keyup":
                e = hi;
                break;
            case "blur":
            case "focus":
                e = li;
                break;
            case "click":
                if (2 === i.button)
                    return null;
            case "auxclick":
            case "dblclick":
            case "mousedown":
            case "mousemove":
            case "mouseup":
            case "mouseout":
            case "mouseover":
            case "contextmenu":
                e = $t;
                break;
            case "drag":
            case "dragend":
            case "dragenter":
            case "dragexit":
            case "dragleave":
            case "dragover":
            case "dragstart":
            case "drop":
                e = pi;
                break;
            case "touchcancel":
            case "touchend":
            case "touchmove":
            case "touchstart":
                e = _i;
                break;
            case Z:
            case ee:
            case te:
                e = ai;
                break;
            case ie:
                e = fi;
                break;
            case "scroll":
                e = jt;
                break;
            case "wheel":
                e = gi;
                break;
            case "copy":
            case "cut":
            case "paste":
                e = oi;
                break;
            case "gotpointercapture":
            case "lostpointercapture":
            case "pointercancel":
            case "pointerdown":
            case "pointermove":
            case "pointerout":
            case "pointerover":
            case "pointerup":
                e = Xt;
                break;
            default:
                e = ue;
            }
            return z(t = e.getPooled(r, t, i, n)),
            t
        }
    }
      , Ti = bi.isInteractiveTopLevelEventType
      , Si = [];
    function Ai(e) {
        var t = e.targetInst
          , i = t;
        do {
            if (!i) {
                e.ancestors.push(i);
                break
            }
            var n;
            for (n = i; n.return; ) {
                n = n.return
            }
            if (!(n = 3 !== n.tag ? null : n.stateNode.containerInfo))
                break;
            e.ancestors.push(i),
            i = U(n)
        } while (i);for (i = 0; i < e.ancestors.length; i++) {
            t = e.ancestors[i];
            var r = He(e.nativeEvent);
            n = e.topLevelType;
            for (var s = e.nativeEvent, a = null, o = 0; o < v.length; o++) {
                var l = v[o];
                l && (l = l.extractEvents(n, t, s, r)) && (a = k(a, l))
            }
            M(a)
        }
    }
    var Pi = !0;
    function wi(e, t) {
        if (!t)
            return null;
        var i = (Ti(e) ? Ci : Ii).bind(null, e);
        t.addEventListener(e, i, !1)
    }
    function ki(e, t) {
        if (!t)
            return null;
        var i = (Ti(e) ? Ci : Ii).bind(null, e);
        t.addEventListener(e, i, !0)
    }
    function Ci(e, t) {
        xe(Ii, e, t)
    }
    function Ii(e, t) {
        if (Pi) {
            var i = He(t);
            if (null === (i = U(i)) || "number" != typeof i.tag || 2 === ni(i) || (i = null),
            Si.length) {
                var n = Si.pop();
                n.topLevelType = e,
                n.nativeEvent = t,
                n.targetInst = i,
                e = n
            } else
                e = {
                    topLevelType: e,
                    nativeEvent: t,
                    targetInst: i,
                    ancestors: []
                };
            try {
                Be(Ai, e)
            } finally {
                e.topLevelType = null,
                e.nativeEvent = null,
                e.targetInst = null,
                e.ancestors.length = 0,
                10 > Si.length && Si.push(e)
            }
        }
    }
    var Ri = {}
      , Di = 0
      , Li = "_reactListenersID" + ("" + Math.random()).slice(2);
    function Mi(e) {
        return Object.prototype.hasOwnProperty.call(e, Li) || (e[Li] = Di++,
        Ri[e[Li]] = {}),
        Ri[e[Li]]
    }
    function Oi(e) {
        if (void 0 === (e = e || ("undefined" != typeof document ? document : void 0)))
            return null;
        try {
            return e.activeElement || e.body
        } catch (t) {
            return e.body
        }
    }
    function xi(e) {
        for (; e && e.firstChild; ) {
            e = e.firstChild
        }
        return e
    }
    function Ni(e, t) {
        var i, n = xi(e);
        for (e = 0; n; ) {
            if (3 === n.nodeType) {
                if (i = e + n.textContent.length,
                e <= t && i >= t)
                    return {
                        node: n,
                        offset: t - e
                    };
                e = i
            }
            e: {
                for (; n; ) {
                    if (n.nextSibling) {
                        n = n.nextSibling;
                        break e
                    }
                    n = n.parentNode
                }
                n = void 0
            }
            n = xi(n)
        }
    }
    function Ui() {
        for (var e = window, t = Oi(); t instanceof e.HTMLIFrameElement; ) {
            try {
                var i = "string" == typeof t.contentWindow.location.href
            } catch (e) {
                i = !1
            }
            if (!i)
                break;
            t = Oi((e = t.contentWindow).document)
        }
        return t
    }
    function Bi(e) {
        var t = e && e.nodeName && e.nodeName.toLowerCase();
        return t && ("input" === t && ("text" === e.type || "search" === e.type || "tel" === e.type || "url" === e.type || "password" === e.type) || "textarea" === t || "true" === e.contentEditable)
    }
    function Fi(e) {
        var t = Ui()
          , i = e.focusedElem
          , n = e.selectionRange;
        if (t !== i && i && i.ownerDocument && function e(t, i) {
            return !(!t || !i) && (t === i || (!t || 3 !== t.nodeType) && (i && 3 === i.nodeType ? e(t, i.parentNode) : "contains"in t ? t.contains(i) : !!t.compareDocumentPosition && !!(16 & t.compareDocumentPosition(i))))
        }(i.ownerDocument.documentElement, i)) {
            if (null !== n && Bi(i))
                if (t = n.start,
                void 0 === (e = n.end) && (e = t),
                "selectionStart"in i)
                    i.selectionStart = t,
                    i.selectionEnd = Math.min(e, i.value.length);
                else if ((e = (t = i.ownerDocument || document) && t.defaultView || window).getSelection) {
                    e = e.getSelection();
                    var r = i.textContent.length
                      , s = Math.min(n.start, r);
                    n = void 0 === n.end ? s : Math.min(n.end, r),
                    !e.extend && s > n && (r = n,
                    n = s,
                    s = r),
                    r = Ni(i, s);
                    var a = Ni(i, n);
                    r && a && (1 !== e.rangeCount || e.anchorNode !== r.node || e.anchorOffset !== r.offset || e.focusNode !== a.node || e.focusOffset !== a.offset) && ((t = t.createRange()).setStart(r.node, r.offset),
                    e.removeAllRanges(),
                    s > n ? (e.addRange(t),
                    e.extend(a.node, a.offset)) : (t.setEnd(a.node, a.offset),
                    e.addRange(t)))
                }
            for (t = [],
            e = i; e = e.parentNode; ) {
                1 === e.nodeType && t.push({
                    element: e,
                    left: e.scrollLeft,
                    top: e.scrollTop
                })
            }
            for ("function" == typeof i.focus && i.focus(),
            i = 0; i < t.length; i++) {
                (e = t[i]).element.scrollLeft = e.left,
                e.element.scrollTop = e.top
            }
        }
    }
    var Vi = q && "documentMode"in document && 11 >= document.documentMode
      , Hi = {
        select: {
            phasedRegistrationNames: {
                bubbled: "onSelect",
                captured: "onSelectCapture"
            },
            dependencies: "blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")
        }
    }
      , ji = null
      , Wi = null
      , Gi = null
      , Ki = !1;
    function zi(e, t) {
        var i = t.window === t ? t.document : 9 === t.nodeType ? t : t.ownerDocument;
        return Ki || null == ji || ji !== Oi(i) ? null : ("selectionStart"in (i = ji) && Bi(i) ? i = {
            start: i.selectionStart,
            end: i.selectionEnd
        } : i = {
            anchorNode: (i = (i.ownerDocument && i.ownerDocument.defaultView || window).getSelection()).anchorNode,
            anchorOffset: i.anchorOffset,
            focusNode: i.focusNode,
            focusOffset: i.focusOffset
        },
        Gi && ii(Gi, i) ? null : (Gi = i,
        (e = ue.getPooled(Hi.select, Wi, e, t)).type = "select",
        e.target = ji,
        z(e),
        e))
    }
    function Yi(e, t) {
        return e = r({
            children: void 0
        }, t),
        (t = function(e) {
            var t = "";
            return n.Children.forEach(e, function(e) {
                null != e && (t += e)
            }),
            t
        }(t.children)) && (e.children = t),
        e
    }
    function Qi(e, t, i, n) {
        if (e = e.options,
        t) {
            t = {};
            for (var r = 0; r < i.length; r++) {
                t["$" + i[r]] = !0
            }
            for (i = 0; i < e.length; i++) {
                r = t.hasOwnProperty("$" + e[i].value),
                e[i].selected !== r && (e[i].selected = r),
                r && n && (e[i].defaultSelected = !0)
            }
        } else {
            for (i = "" + Et(i),
            t = null,
            r = 0; r < e.length; r++) {
                if (e[r].value === i)
                    return e[r].selected = !0,
                    void (n && (e[r].defaultSelected = !0));
                null !== t || e[r].disabled || (t = e[r])
            }
            null !== t && (t.selected = !0)
        }
    }
    function $i(e, t) {
        return null != t.dangerouslySetInnerHTML && o("91"),
        r({}, t, {
            value: void 0,
            defaultValue: void 0,
            children: "" + e._wrapperState.initialValue
        })
    }
    function Xi(e, t) {
        var i = t.value;
        null == i && (i = t.defaultValue,
        null != (t = t.children) && (null != i && o("92"),
        Array.isArray(t) && (1 >= t.length || o("93"),
        t = t[0]),
        i = t),
        null == i && (i = "")),
        e._wrapperState = {
            initialValue: Et(i)
        }
    }
    function Ji(e, t) {
        var i = Et(t.value)
          , n = Et(t.defaultValue);
        null != i && ((i = "" + i) !== e.value && (e.value = i),
        null == t.defaultValue && e.defaultValue !== i && (e.defaultValue = i)),
        null != n && (e.defaultValue = "" + n)
    }
    function Zi(e) {
        var t = e.textContent;
        t === e._wrapperState.initialValue && (e.value = t)
    }
    D.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),
    S = V,
    A = B,
    P = F,
    D.injectEventPluginsByName({
        SimpleEventPlugin: bi,
        EnterLeaveEventPlugin: {
            eventTypes: Jt,
            extractEvents: function extractEvents(e, t, i, n) {
                var r = "mouseover" === e || "pointerover" === e
                  , s = "mouseout" === e || "pointerout" === e;
                if (r && (i.relatedTarget || i.fromElement) || !s && !r)
                    return null;
                if (r = n.window === n ? n : (r = n.ownerDocument) ? r.defaultView || r.parentWindow : window,
                s ? (s = t,
                t = (t = i.relatedTarget || i.toElement) ? U(t) : null) : s = null,
                s === t)
                    return null;
                var a = void 0
                  , o = void 0
                  , l = void 0
                  , d = void 0;
                "mouseout" === e || "mouseover" === e ? (a = $t,
                o = Jt.mouseLeave,
                l = Jt.mouseEnter,
                d = "mouse") : "pointerout" !== e && "pointerover" !== e || (a = Xt,
                o = Jt.pointerLeave,
                l = Jt.pointerEnter,
                d = "pointer");
                var u = null == s ? r : F(s);
                if (r = null == t ? r : F(t),
                (e = a.getPooled(o, s, i, n)).type = d + "leave",
                e.target = u,
                e.relatedTarget = r,
                (i = a.getPooled(l, t, i, n)).type = d + "enter",
                i.target = r,
                i.relatedTarget = u,
                n = t,
                s && n)
                    e: {
                        for (r = n,
                        d = 0,
                        a = t = s; a; a = H(a)) {
                            d++
                        }
                        for (a = 0,
                        l = r; l; l = H(l)) {
                            a++
                        }
                        for (; 0 < d - a; ) {
                            t = H(t),
                            d--
                        }
                        for (; 0 < a - d; ) {
                            r = H(r),
                            a--
                        }
                        for (; d--; ) {
                            if (t === r || t === r.alternate)
                                break e;
                            t = H(t),
                            r = H(r)
                        }
                        t = null
                    }
                else
                    t = null;
                for (r = t,
                t = []; s && s !== r && (null === (d = s.alternate) || d !== r); ) {
                    t.push(s),
                    s = H(s)
                }
                for (s = []; n && n !== r && (null === (d = n.alternate) || d !== r); ) {
                    s.push(n),
                    n = H(n)
                }
                for (n = 0; n < t.length; n++) {
                    G(t[n], "bubbled", e)
                }
                for (n = s.length; 0 < n--; ) {
                    G(s[n], "captured", i)
                }
                return [e, i]
            }
        },
        ChangeEventPlugin: Ht,
        SelectEventPlugin: {
            eventTypes: Hi,
            extractEvents: function extractEvents(e, t, i, n) {
                var r, s = n.window === n ? n.document : 9 === n.nodeType ? n : n.ownerDocument;
                if (!(r = !s)) {
                    e: {
                        s = Mi(s),
                        r = T.onSelect;
                        for (var a = 0; a < r.length; a++) {
                            var o = r[a];
                            if (!s.hasOwnProperty(o) || !s[o]) {
                                s = !1;
                                break e
                            }
                        }
                        s = !0
                    }
                    r = !s
                }
                if (r)
                    return null;
                switch (s = t ? F(t) : window,
                e) {
                case "focus":
                    (Ve(s) || "true" === s.contentEditable) && (ji = s,
                    Wi = t,
                    Gi = null);
                    break;
                case "blur":
                    Gi = Wi = ji = null;
                    break;
                case "mousedown":
                    Ki = !0;
                    break;
                case "contextmenu":
                case "mouseup":
                case "dragend":
                    return Ki = !1,
                    zi(i, n);
                case "selectionchange":
                    if (Vi)
                        break;
                case "keydown":
                case "keyup":
                    return zi(i, n);
                }
                return null
            }
        },
        BeforeInputEventPlugin: {
            eventTypes: Te,
            extractEvents: function extractEvents(e, t, i, n) {
                var r = void 0
                  , s = void 0;
                if (me)
                    e: {
                        switch (e) {
                        case "compositionstart":
                            r = Te.compositionStart;
                            break e;
                        case "compositionend":
                            r = Te.compositionEnd;
                            break e;
                        case "compositionupdate":
                            r = Te.compositionUpdate;
                            break e;
                        }
                        r = void 0
                    }
                else
                    we ? Ae(e, i) && (r = Te.compositionEnd) : "keydown" === e && 229 === i.keyCode && (r = Te.compositionStart);
                return r ? (Ee && "ko" !== i.locale && (we || r !== Te.compositionStart ? r === Te.compositionEnd && we && (s = oe()) : (se = "value"in (re = n) ? re.value : re.textContent,
                we = !0)),
                r = _e.getPooled(r, t, i, n),
                s ? r.data = s : null !== (s = Pe(i)) && (r.data = s),
                z(r),
                s = r) : s = null,
                (e = ve ? function(e, t) {
                    switch (e) {
                    case "compositionend":
                        return Pe(t);
                    case "keypress":
                        return 32 !== t.which ? null : (Se = !0,
                        be);
                    case "textInput":
                        return (e = t.data) === be && Se ? null : e;
                    default:
                        return null;
                    }
                }(e, i) : function(e, t) {
                    if (we)
                        return "compositionend" === e || !me && Ae(e, t) ? (e = oe(),
                        ae = se = re = null,
                        we = !1,
                        e) : null;
                    switch (e) {
                    case "paste":
                        return null;
                    case "keypress":
                        if (!(t.ctrlKey || t.altKey || t.metaKey) || t.ctrlKey && t.altKey) {
                            if (t.char && 1 < t.char.length)
                                return t.char;
                            if (t.which)
                                return String.fromCharCode(t.which)
                        }
                        return null;
                    case "compositionend":
                        return Ee && "ko" !== t.locale ? null : t.data;
                    default:
                        return null;
                    }
                }(e, i)) ? ((t = fe.getPooled(Te.beforeInput, t, i, n)).data = e,
                z(t)) : t = null,
                null === s ? t : null === t ? s : [s, t]
            }
        }
    });
    var en = "http://www.w3.org/1999/xhtml";
    function nn(e) {
        switch (e) {
        case "svg":
            return "http://www.w3.org/2000/svg";
        case "math":
            return "http://www.w3.org/1998/Math/MathML";
        default:
            return "http://www.w3.org/1999/xhtml";
        }
    }
    function rn(e, t) {
        return null == e || "http://www.w3.org/1999/xhtml" === e ? nn(t) : "http://www.w3.org/2000/svg" === e && "foreignObject" === t ? "http://www.w3.org/1999/xhtml" : e
    }
    var sn = void 0
      , an = function(e) {
        return "undefined" != typeof MSApp && MSApp.execUnsafeLocalFunction ? function(t, i) {
            MSApp.execUnsafeLocalFunction(function() {
                return e(t, i)
            })
        }
        : e
    }(function(e, t) {
        if (e.namespaceURI !== "http://www.w3.org/2000/svg" || "innerHTML"in e)
            e.innerHTML = t;
        else {
            for ((sn = sn || document.createElement("div")).innerHTML = "<svg>" + t + "</svg>",
            t = sn.firstChild; e.firstChild; ) {
                e.removeChild(e.firstChild)
            }
            for (; t.firstChild; ) {
                e.appendChild(t.firstChild)
            }
        }
    });
    function on(e, t) {
        if (t) {
            var i = e.firstChild;
            if (i && i === e.lastChild && 3 === i.nodeType)
                return void (i.nodeValue = t)
        }
        e.textContent = t
    }
    var ln = {
        animationIterationCount: !0,
        borderImageOutset: !0,
        borderImageSlice: !0,
        borderImageWidth: !0,
        boxFlex: !0,
        boxFlexGroup: !0,
        boxOrdinalGroup: !0,
        columnCount: !0,
        columns: !0,
        flex: !0,
        flexGrow: !0,
        flexPositive: !0,
        flexShrink: !0,
        flexNegative: !0,
        flexOrder: !0,
        gridArea: !0,
        gridRow: !0,
        gridRowEnd: !0,
        gridRowSpan: !0,
        gridRowStart: !0,
        gridColumn: !0,
        gridColumnEnd: !0,
        gridColumnSpan: !0,
        gridColumnStart: !0,
        fontWeight: !0,
        lineClamp: !0,
        lineHeight: !0,
        opacity: !0,
        order: !0,
        orphans: !0,
        tabSize: !0,
        widows: !0,
        zIndex: !0,
        zoom: !0,
        fillOpacity: !0,
        floodOpacity: !0,
        stopOpacity: !0,
        strokeDasharray: !0,
        strokeDashoffset: !0,
        strokeMiterlimit: !0,
        strokeOpacity: !0,
        strokeWidth: !0
    }
      , dn = ["Webkit", "ms", "Moz", "O"];
    function un(e, t, i) {
        return null == t || "boolean" == typeof t || "" === t ? "" : i || "number" != typeof t || 0 === t || ln.hasOwnProperty(e) && ln[e] ? ("" + t).trim() : t + "px"
    }
    function cn(e, t) {
        for (var i in e = e.style,
        t) {
            if (t.hasOwnProperty(i)) {
                var n = 0 === i.indexOf("--")
                  , r = un(i, t[i], n);
                "float" === i && (i = "cssFloat"),
                n ? e.setProperty(i, r) : e[i] = r
            }
        }
    }
    Object.keys(ln).forEach(function(e) {
        dn.forEach(function(t) {
            t = t + e.charAt(0).toUpperCase() + e.substring(1),
            ln[t] = ln[e]
        })
    });
    var hn = r({
        menuitem: !0
    }, {
        area: !0,
        base: !0,
        br: !0,
        col: !0,
        embed: !0,
        hr: !0,
        img: !0,
        input: !0,
        keygen: !0,
        link: !0,
        meta: !0,
        param: !0,
        source: !0,
        track: !0,
        wbr: !0
    });
    function pn(e, t) {
        t && (hn[e] && (null != t.children || null != t.dangerouslySetInnerHTML) && o("137", e, ""),
        null != t.dangerouslySetInnerHTML && (null != t.children && o("60"),
        "object" == typeof t.dangerouslySetInnerHTML && "__html"in t.dangerouslySetInnerHTML || o("61")),
        null != t.style && "object" != typeof t.style && o("62", ""))
    }
    function _n(e, t) {
        if (-1 === e.indexOf("-"))
            return "string" == typeof t.is;
        switch (e) {
        case "annotation-xml":
        case "color-profile":
        case "font-face":
        case "font-face-src":
        case "font-face-uri":
        case "font-face-format":
        case "font-face-name":
        case "missing-glyph":
            return !1;
        default:
            return !0;
        }
    }
    function fn(e, t) {
        var i = Mi(e = 9 === e.nodeType || 11 === e.nodeType ? e : e.ownerDocument);
        t = T[t];
        for (var n = 0; n < t.length; n++) {
            var r = t[n];
            if (!i.hasOwnProperty(r) || !i[r]) {
                switch (r) {
                case "scroll":
                    ki("scroll", e);
                    break;
                case "focus":
                case "blur":
                    ki("focus", e),
                    ki("blur", e),
                    i.blur = !0,
                    i.focus = !0;
                    break;
                case "cancel":
                case "close":
                    je(r) && ki(r, e);
                    break;
                case "invalid":
                case "submit":
                case "reset":
                    break;
                default:
                    -1 === ne.indexOf(r) && wi(r, e);
                }
                i[r] = !0
            }
        }
    }
    function gn() {}
    var mn = null
      , yn = null;
    function vn(e, t) {
        switch (e) {
        case "button":
        case "input":
        case "select":
        case "textarea":
            return !!t.autoFocus;
        }
        return !1
    }
    function En(e, t) {
        return "textarea" === e || "option" === e || "noscript" === e || "string" == typeof t.children || "number" == typeof t.children || "object" == typeof t.dangerouslySetInnerHTML && null !== t.dangerouslySetInnerHTML && null != t.dangerouslySetInnerHTML.__html
    }
    var bn = "function" == typeof setTimeout ? setTimeout : void 0
      , Tn = "function" == typeof clearTimeout ? clearTimeout : void 0
      , Sn = s.unstable_scheduleCallback
      , An = s.unstable_cancelCallback;
    function Pn(e) {
        for (e = e.nextSibling; e && 1 !== e.nodeType && 3 !== e.nodeType; ) {
            e = e.nextSibling
        }
        return e
    }
    function wn(e) {
        for (e = e.firstChild; e && 1 !== e.nodeType && 3 !== e.nodeType; ) {
            e = e.nextSibling
        }
        return e
    }
    new Set;
    var kn = []
      , Cn = -1;
    function In(e) {
        0 > Cn || (e.current = kn[Cn],
        kn[Cn] = null,
        Cn--)
    }
    function Rn(e, t) {
        Cn++,
        kn[Cn] = e.current,
        e.current = t
    }
    var Dn = {}
      , Ln = {
        current: Dn
    }
      , Mn = {
        current: !1
    }
      , On = Dn;
    function xn(e, t) {
        var i = e.type.contextTypes;
        if (!i)
            return Dn;
        var n = e.stateNode;
        if (n && n.__reactInternalMemoizedUnmaskedChildContext === t)
            return n.__reactInternalMemoizedMaskedChildContext;
        var r, s = {};
        for (r in i) {
            s[r] = t[r]
        }
        return n && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = t,
        e.__reactInternalMemoizedMaskedChildContext = s),
        s
    }
    function Nn(e) {
        return null != (e = e.childContextTypes)
    }
    function Un() {
        In(Mn),
        In(Ln)
    }
    function Bn() {
        In(Mn),
        In(Ln)
    }
    function Fn(e, t, i) {
        Ln.current !== Dn && o("168"),
        Rn(Ln, t),
        Rn(Mn, i)
    }
    function Vn(e, t, i) {
        var n = e.stateNode;
        if (e = t.childContextTypes,
        "function" != typeof n.getChildContext)
            return i;
        for (var s in n = n.getChildContext()) {
            s in e || o("108", dt(t) || "Unknown", s)
        }
        return r({}, i, n)
    }
    function Hn(e) {
        var t = e.stateNode;
        return t = t && t.__reactInternalMemoizedMergedChildContext || Dn,
        On = Ln.current,
        Rn(Ln, t),
        Rn(Mn, Mn.current),
        !0
    }
    function jn(e, t, i) {
        var n = e.stateNode;
        n || o("169"),
        i ? (t = Vn(e, t, On),
        n.__reactInternalMemoizedMergedChildContext = t,
        In(Mn),
        In(Ln),
        Rn(Ln, t)) : In(Mn),
        Rn(Mn, i)
    }
    var Wn = null
      , Gn = null;
    function Kn(e) {
        return function(t) {
            try {
                return e(t)
            } catch (e) {}
        }
    }
    function zn(e, t, i, n) {
        this.tag = e,
        this.key = i,
        this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null,
        this.index = 0,
        this.ref = null,
        this.pendingProps = t,
        this.contextDependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null,
        this.mode = n,
        this.effectTag = 0,
        this.lastEffect = this.firstEffect = this.nextEffect = null,
        this.childExpirationTime = this.expirationTime = 0,
        this.alternate = null
    }
    function qn(e, t, i, n) {
        return new zn(e,t,i,n)
    }
    function Yn(e) {
        return !(!(e = e.prototype) || !e.isReactComponent)
    }
    function Qn(e, t) {
        var i = e.alternate;
        return null === i ? ((i = qn(e.tag, t, e.key, e.mode)).elementType = e.elementType,
        i.type = e.type,
        i.stateNode = e.stateNode,
        i.alternate = e,
        e.alternate = i) : (i.pendingProps = t,
        i.effectTag = 0,
        i.nextEffect = null,
        i.firstEffect = null,
        i.lastEffect = null),
        i.childExpirationTime = e.childExpirationTime,
        i.expirationTime = e.expirationTime,
        i.child = e.child,
        i.memoizedProps = e.memoizedProps,
        i.memoizedState = e.memoizedState,
        i.updateQueue = e.updateQueue,
        i.contextDependencies = e.contextDependencies,
        i.sibling = e.sibling,
        i.index = e.index,
        i.ref = e.ref,
        i
    }
    function $n(e, t, i, n, r, s) {
        var a = 2;
        if (n = e,
        "function" == typeof e)
            Yn(e) && (a = 1);
        else if ("string" == typeof e)
            a = 5;
        else
            e: switch (e) {
            case Xe:
                return Xn(i.children, r, s, t);
            case it:
                return Jn(i, 3 | r, s, t);
            case Je:
                return Jn(i, 2 | r, s, t);
            case Ze:
                return (e = qn(12, i, t, 4 | r)).elementType = Ze,
                e.type = Ze,
                e.expirationTime = s,
                e;
            case rt:
                return (e = qn(13, i, t, r)).elementType = rt,
                e.type = rt,
                e.expirationTime = s,
                e;
            default:
                if ("object" == typeof e && null !== e)
                    switch (e.$$typeof) {
                    case et:
                        a = 10;
                        break e;
                    case tt:
                        a = 9;
                        break e;
                    case nt:
                        a = 11;
                        break e;
                    case st:
                        a = 14;
                        break e;
                    case at:
                        a = 16,
                        n = null;
                        break e;
                    }
                o("130", null == e ? e : typeof e, "");
            }
        return (t = qn(a, i, t, r)).elementType = e,
        t.type = n,
        t.expirationTime = s,
        t
    }
    function Xn(e, t, i, n) {
        return (e = qn(7, e, n, t)).expirationTime = i,
        e
    }
    function Jn(e, t, i, n) {
        return e = qn(8, e, n, t),
        t = 0 == (1 & t) ? Je : it,
        e.elementType = t,
        e.type = t,
        e.expirationTime = i,
        e
    }
    function Zn(e, t, i) {
        return (e = qn(6, e, null, t)).expirationTime = i,
        e
    }
    function er(e, t, i) {
        return (t = qn(4, null !== e.children ? e.children : [], e.key, t)).expirationTime = i,
        t.stateNode = {
            containerInfo: e.containerInfo,
            pendingChildren: null,
            implementation: e.implementation
        },
        t
    }
    function tr(e, t) {
        e.didError = !1;
        var i = e.earliestPendingTime;
        0 === i ? e.earliestPendingTime = e.latestPendingTime = t : i < t ? e.earliestPendingTime = t : e.latestPendingTime > t && (e.latestPendingTime = t),
        rr(t, e)
    }
    function ir(e, t) {
        e.didError = !1,
        e.latestPingedTime >= t && (e.latestPingedTime = 0);
        var i = e.earliestPendingTime
          , n = e.latestPendingTime;
        i === t ? e.earliestPendingTime = n === t ? e.latestPendingTime = 0 : n : n === t && (e.latestPendingTime = i),
        i = e.earliestSuspendedTime,
        n = e.latestSuspendedTime,
        0 === i ? e.earliestSuspendedTime = e.latestSuspendedTime = t : i < t ? e.earliestSuspendedTime = t : n > t && (e.latestSuspendedTime = t),
        rr(t, e)
    }
    function nr(e, t) {
        var i = e.earliestPendingTime;
        return i > t && (t = i),
        (e = e.earliestSuspendedTime) > t && (t = e),
        t
    }
    function rr(e, t) {
        var i = t.earliestSuspendedTime
          , n = t.latestSuspendedTime
          , r = t.earliestPendingTime
          , s = t.latestPingedTime;
        0 === (r = 0 !== r ? r : s) && (0 === e || n < e) && (r = n),
        0 !== (e = r) && i > e && (e = i),
        t.nextExpirationTimeToWorkOn = r,
        t.expirationTime = e
    }
    function sr(e, t) {
        if (e && e.defaultProps)
            for (var i in t = r({}, t),
            e = e.defaultProps) {
                void 0 === t[i] && (t[i] = e[i])
            }
        return t
    }
    var ar = new n.Component().refs;
    function or(e, t, i, n) {
        i = null == (i = i(n, t = e.memoizedState)) ? t : r({}, t, i),
        e.memoizedState = i,
        null !== (n = e.updateQueue) && 0 === e.expirationTime && (n.baseState = i)
    }
    var lr = {
        isMounted: function isMounted(e) {
            return !!(e = e._reactInternalFiber) && 2 === ni(e)
        },
        enqueueSetState: function enqueueSetState(e, t, i) {
            e = e._reactInternalFiber;
            var n = go()
              , r = Hs(n = Va(n, e));
            r.payload = t,
            null != i && (r.callback = i),
            Oa(),
            Ws(e, r),
            Ga(e, n)
        },
        enqueueReplaceState: function enqueueReplaceState(e, t, i) {
            e = e._reactInternalFiber;
            var n = go()
              , r = Hs(n = Va(n, e));
            r.tag = Ns,
            r.payload = t,
            null != i && (r.callback = i),
            Oa(),
            Ws(e, r),
            Ga(e, n)
        },
        enqueueForceUpdate: function enqueueForceUpdate(e, t) {
            e = e._reactInternalFiber;
            var i = go()
              , n = Hs(i = Va(i, e));
            n.tag = Us,
            null != t && (n.callback = t),
            Oa(),
            Ws(e, n),
            Ga(e, i)
        }
    };
    function dr(e, t, i, n, r, s, a) {
        return "function" == typeof (e = e.stateNode).shouldComponentUpdate ? e.shouldComponentUpdate(n, s, a) : !t.prototype || !t.prototype.isPureReactComponent || !ii(i, n) || !ii(r, s)
    }
    function ur(e, t, i) {
        var n = !1
          , r = Dn
          , s = t.contextType;
        return "object" == typeof s && null !== s ? s = xs(s) : (r = Nn(t) ? On : Ln.current,
        s = (n = null != (n = t.contextTypes)) ? xn(e, r) : Dn),
        t = new t(i,s),
        e.memoizedState = null !== t.state && void 0 !== t.state ? t.state : null,
        t.updater = lr,
        e.stateNode = t,
        t._reactInternalFiber = e,
        n && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = r,
        e.__reactInternalMemoizedMaskedChildContext = s),
        t
    }
    function cr(e, t, i, n) {
        e = t.state,
        "function" == typeof t.componentWillReceiveProps && t.componentWillReceiveProps(i, n),
        "function" == typeof t.UNSAFE_componentWillReceiveProps && t.UNSAFE_componentWillReceiveProps(i, n),
        t.state !== e && lr.enqueueReplaceState(t, t.state, null)
    }
    function hr(e, t, i, n) {
        var r = e.stateNode;
        r.props = i,
        r.state = e.memoizedState,
        r.refs = ar;
        var s = t.contextType;
        "object" == typeof s && null !== s ? r.context = xs(s) : (s = Nn(t) ? On : Ln.current,
        r.context = xn(e, s)),
        null !== (s = e.updateQueue) && (qs(e, s, i, r, n),
        r.state = e.memoizedState),
        "function" == typeof (s = t.getDerivedStateFromProps) && (or(e, t, s, i),
        r.state = e.memoizedState),
        "function" == typeof t.getDerivedStateFromProps || "function" == typeof r.getSnapshotBeforeUpdate || "function" != typeof r.UNSAFE_componentWillMount && "function" != typeof r.componentWillMount || (t = r.state,
        "function" == typeof r.componentWillMount && r.componentWillMount(),
        "function" == typeof r.UNSAFE_componentWillMount && r.UNSAFE_componentWillMount(),
        t !== r.state && lr.enqueueReplaceState(r, r.state, null),
        null !== (s = e.updateQueue) && (qs(e, s, i, r, n),
        r.state = e.memoizedState)),
        "function" == typeof r.componentDidMount && (e.effectTag |= 4)
    }
    var pr = Array.isArray;
    function _r(e, t, i) {
        if (null !== (e = i.ref) && "function" != typeof e && "object" != typeof e) {
            if (i._owner) {
                i = i._owner;
                var n = void 0;
                i && (1 !== i.tag && o("309"),
                n = i.stateNode),
                n || o("147", e);
                var r = "" + e;
                return null !== t && null !== t.ref && "function" == typeof t.ref && t.ref._stringRef === r ? t.ref : ((t = function(e) {
                    var t = n.refs;
                    t === ar && (t = n.refs = {}),
                    null === e ? delete t[r] : t[r] = e
                }
                )._stringRef = r,
                t)
            }
            "string" != typeof e && o("284"),
            i._owner || o("290", e)
        }
        return e
    }
    function fr(e, t) {
        "textarea" !== e.type && o("31", "[object Object]" === Object.prototype.toString.call(t) ? "object with keys {" + Object.keys(t).join(", ") + "}" : t, "")
    }
    function gr(e) {
        function t(t, i) {
            if (e) {
                var n = t.lastEffect;
                null !== n ? (n.nextEffect = i,
                t.lastEffect = i) : t.firstEffect = t.lastEffect = i,
                i.nextEffect = null,
                i.effectTag = 8
            }
        }
        function i(i, n) {
            if (!e)
                return null;
            for (; null !== n; ) {
                t(i, n),
                n = n.sibling
            }
            return null
        }
        function n(e, t) {
            for (e = new Map; null !== t; ) {
                null !== t.key ? e.set(t.key, t) : e.set(t.index, t),
                t = t.sibling
            }
            return e
        }
        function r(e, t) {
            return (e = Qn(e, t)).index = 0,
            e.sibling = null,
            e
        }
        function s(t, i, n) {
            return t.index = n,
            e ? null !== (n = t.alternate) ? (n = n.index) < i ? (t.effectTag = 2,
            i) : n : (t.effectTag = 2,
            i) : i
        }
        function a(t) {
            return e && null === t.alternate && (t.effectTag = 2),
            t
        }
        function l(e, t, i, n) {
            return null === t || 6 !== t.tag ? ((t = Zn(i, e.mode, n)).return = e,
            t) : ((t = r(t, i)).return = e,
            t)
        }
        function d(e, t, i, n) {
            return null !== t && t.elementType === i.type ? ((n = r(t, i.props)).ref = _r(e, t, i),
            n.return = e,
            n) : ((n = $n(i.type, i.key, i.props, null, e.mode, n)).ref = _r(e, t, i),
            n.return = e,
            n)
        }
        function u(e, t, i, n) {
            return null === t || 4 !== t.tag || t.stateNode.containerInfo !== i.containerInfo || t.stateNode.implementation !== i.implementation ? ((t = er(i, e.mode, n)).return = e,
            t) : ((t = r(t, i.children || [])).return = e,
            t)
        }
        function c(e, t, i, n, s) {
            return null === t || 7 !== t.tag ? ((t = Xn(i, e.mode, n, s)).return = e,
            t) : ((t = r(t, i)).return = e,
            t)
        }
        function h(e, t, i) {
            if ("string" == typeof t || "number" == typeof t)
                return (t = Zn("" + t, e.mode, i)).return = e,
                t;
            if ("object" == typeof t && null !== t) {
                switch (t.$$typeof) {
                case Qe:
                    return (i = $n(t.type, t.key, t.props, null, e.mode, i)).ref = _r(e, null, t),
                    i.return = e,
                    i;
                case $e:
                    return (t = er(t, e.mode, i)).return = e,
                    t;
                }
                if (pr(t) || lt(t))
                    return (t = Xn(t, e.mode, i, null)).return = e,
                    t;
                fr(e, t)
            }
            return null
        }
        function p(e, t, i, n) {
            var r = null !== t ? t.key : null;
            if ("string" == typeof i || "number" == typeof i)
                return null !== r ? null : l(e, t, "" + i, n);
            if ("object" == typeof i && null !== i) {
                switch (i.$$typeof) {
                case Qe:
                    return i.key === r ? i.type === Xe ? c(e, t, i.props.children, n, r) : d(e, t, i, n) : null;
                case $e:
                    return i.key === r ? u(e, t, i, n) : null;
                }
                if (pr(i) || lt(i))
                    return null !== r ? null : c(e, t, i, n, null);
                fr(e, i)
            }
            return null
        }
        function _(e, t, i, n, r) {
            if ("string" == typeof n || "number" == typeof n)
                return l(t, e = e.get(i) || null, "" + n, r);
            if ("object" == typeof n && null !== n) {
                switch (n.$$typeof) {
                case Qe:
                    return e = e.get(null === n.key ? i : n.key) || null,
                    n.type === Xe ? c(t, e, n.props.children, r, n.key) : d(t, e, n, r);
                case $e:
                    return u(t, e = e.get(null === n.key ? i : n.key) || null, n, r);
                }
                if (pr(n) || lt(n))
                    return c(t, e = e.get(i) || null, n, r, null);
                fr(t, n)
            }
            return null
        }
        function f(r, a, o, l) {
            for (var d = null, u = null, c = a, f = a = 0, g = null; null !== c && f < o.length; f++) {
                c.index > f ? (g = c,
                c = null) : g = c.sibling;
                var m = p(r, c, o[f], l);
                if (null === m) {
                    null === c && (c = g);
                    break
                }
                e && c && null === m.alternate && t(r, c),
                a = s(m, a, f),
                null === u ? d = m : u.sibling = m,
                u = m,
                c = g
            }
            if (f === o.length)
                return i(r, c),
                d;
            if (null === c) {
                for (; f < o.length; f++) {
                    (c = h(r, o[f], l)) && (a = s(c, a, f),
                    null === u ? d = c : u.sibling = c,
                    u = c)
                }
                return d
            }
            for (c = n(r, c); f < o.length; f++) {
                (g = _(c, r, f, o[f], l)) && (e && null !== g.alternate && c.delete(null === g.key ? f : g.key),
                a = s(g, a, f),
                null === u ? d = g : u.sibling = g,
                u = g)
            }
            return e && c.forEach(function(e) {
                return t(r, e)
            }),
            d
        }
        function g(r, a, l, d) {
            var u = lt(l);
            "function" != typeof u && o("150"),
            null == (l = u.call(l)) && o("151");
            for (var c = u = null, f = a, g = a = 0, m = null, y = l.next(); null !== f && !y.done; g++,
            y = l.next()) {
                f.index > g ? (m = f,
                f = null) : m = f.sibling;
                var v = p(r, f, y.value, d);
                if (null === v) {
                    f || (f = m);
                    break
                }
                e && f && null === v.alternate && t(r, f),
                a = s(v, a, g),
                null === c ? u = v : c.sibling = v,
                c = v,
                f = m
            }
            if (y.done)
                return i(r, f),
                u;
            if (null === f) {
                for (; !y.done; g++,
                y = l.next()) {
                    null !== (y = h(r, y.value, d)) && (a = s(y, a, g),
                    null === c ? u = y : c.sibling = y,
                    c = y)
                }
                return u
            }
            for (f = n(r, f); !y.done; g++,
            y = l.next()) {
                null !== (y = _(f, r, g, y.value, d)) && (e && null !== y.alternate && f.delete(null === y.key ? g : y.key),
                a = s(y, a, g),
                null === c ? u = y : c.sibling = y,
                c = y)
            }
            return e && f.forEach(function(e) {
                return t(r, e)
            }),
            u
        }
        return function(e, n, s, l) {
            var d = "object" == typeof s && null !== s && s.type === Xe && null === s.key;
            d && (s = s.props.children);
            var u = "object" == typeof s && null !== s;
            if (u)
                switch (s.$$typeof) {
                case Qe:
                    e: {
                        for (u = s.key,
                        d = n; null !== d; ) {
                            if (d.key === u) {
                                if (7 === d.tag ? s.type === Xe : d.elementType === s.type) {
                                    i(e, d.sibling),
                                    (n = r(d, s.type === Xe ? s.props.children : s.props)).ref = _r(e, d, s),
                                    n.return = e,
                                    e = n;
                                    break e
                                }
                                i(e, d);
                                break
                            }
                            t(e, d),
                            d = d.sibling
                        }
                        s.type === Xe ? ((n = Xn(s.props.children, e.mode, l, s.key)).return = e,
                        e = n) : ((l = $n(s.type, s.key, s.props, null, e.mode, l)).ref = _r(e, n, s),
                        l.return = e,
                        e = l)
                    }
                    return a(e);
                case $e:
                    e: {
                        for (d = s.key; null !== n; ) {
                            if (n.key === d) {
                                if (4 === n.tag && n.stateNode.containerInfo === s.containerInfo && n.stateNode.implementation === s.implementation) {
                                    i(e, n.sibling),
                                    (n = r(n, s.children || [])).return = e,
                                    e = n;
                                    break e
                                }
                                i(e, n);
                                break
                            }
                            t(e, n),
                            n = n.sibling
                        }
                        (n = er(s, e.mode, l)).return = e,
                        e = n
                    }
                    return a(e);
                }
            if ("string" == typeof s || "number" == typeof s)
                return s = "" + s,
                null !== n && 6 === n.tag ? (i(e, n.sibling),
                (n = r(n, s)).return = e,
                e = n) : (i(e, n),
                (n = Zn(s, e.mode, l)).return = e,
                e = n),
                a(e);
            if (pr(s))
                return f(e, n, s, l);
            if (lt(s))
                return g(e, n, s, l);
            if (u && fr(e, s),
            void 0 === s && !d)
                switch (e.tag) {
                case 1:
                case 0:
                    o("152", (l = e.type).displayName || l.name || "Component");
                }
            return i(e, n)
        }
    }
    var mr = gr(!0)
      , yr = gr(!1)
      , vr = {}
      , Er = {
        current: vr
    }
      , br = {
        current: vr
    }
      , Tr = {
        current: vr
    };
    function Sr(e) {
        return e === vr && o("174"),
        e
    }
    function Ar(e, t) {
        Rn(Tr, t),
        Rn(br, e),
        Rn(Er, vr);
        var i = t.nodeType;
        switch (i) {
        case 9:
        case 11:
            t = (t = t.documentElement) ? t.namespaceURI : rn(null, "");
            break;
        default:
            t = rn(t = (i = 8 === i ? t.parentNode : t).namespaceURI || null, i = i.tagName);
        }
        In(Er),
        Rn(Er, t)
    }
    function Pr() {
        In(Er),
        In(br),
        In(Tr)
    }
    function wr(e) {
        Sr(Tr.current);
        var t = Sr(Er.current)
          , i = rn(t, e.type);
        t !== i && (Rn(br, e),
        Rn(Er, i))
    }
    function kr(e) {
        br.current === e && (In(Er),
        In(br))
    }
    var Cr = ze.ReactCurrentDispatcher
      , Ir = 0
      , Rr = null
      , Dr = null
      , Lr = null
      , Mr = null
      , Or = null
      , xr = null
      , Nr = 0
      , Ur = null
      , Br = 0
      , Fr = !1
      , Vr = null
      , Hr = 0;
    function jr() {
        o("321")
    }
    function Wr(e, t) {
        if (null === t)
            return !1;
        for (var i = 0; i < t.length && i < e.length; i++) {
            if (!ei(e[i], t[i]))
                return !1
        }
        return !0
    }
    function Gr(e, t, i, n, r, s) {
        if (Ir = s,
        Rr = t,
        Lr = null !== e ? e.memoizedState : null,
        Cr.current = null === Lr ? ns : rs,
        t = i(n, r),
        Fr) {
            do {
                Fr = !1,
                Hr += 1,
                Lr = null !== e ? e.memoizedState : null,
                xr = Mr,
                Ur = Or = Dr = null,
                Cr.current = rs,
                t = i(n, r)
            } while (Fr);Vr = null,
            Hr = 0
        }
        return Cr.current = is,
        (e = Rr).memoizedState = Mr,
        e.expirationTime = Nr,
        e.updateQueue = Ur,
        e.effectTag |= Br,
        e = null !== Dr && null !== Dr.next,
        Ir = 0,
        xr = Or = Mr = Lr = Dr = Rr = null,
        Nr = 0,
        Ur = null,
        Br = 0,
        e && o("300"),
        t
    }
    function Kr() {
        Cr.current = is,
        Ir = 0,
        xr = Or = Mr = Lr = Dr = Rr = null,
        Nr = 0,
        Ur = null,
        Br = 0,
        Fr = !1,
        Vr = null,
        Hr = 0
    }
    function zr() {
        var e = {
            memoizedState: null,
            baseState: null,
            queue: null,
            baseUpdate: null,
            next: null
        };
        return null === Or ? Mr = Or = e : Or = Or.next = e,
        Or
    }
    function qr() {
        if (null !== xr)
            xr = (Or = xr).next,
            Lr = null !== (Dr = Lr) ? Dr.next : null;
        else {
            null === Lr && o("310");
            var e = {
                memoizedState: (Dr = Lr).memoizedState,
                baseState: Dr.baseState,
                queue: Dr.queue,
                baseUpdate: Dr.baseUpdate,
                next: null
            };
            Or = null === Or ? Mr = e : Or.next = e,
            Lr = Dr.next
        }
        return Or
    }
    function Yr(e, t) {
        return "function" == typeof t ? t(e) : t
    }
    function Qr(e) {
        var t = qr()
          , i = t.queue;
        if (null === i && o("311"),
        i.lastRenderedReducer = e,
        0 < Hr) {
            var n = i.dispatch;
            if (null !== Vr) {
                var r = Vr.get(i);
                if (void 0 !== r) {
                    Vr.delete(i);
                    var s = t.memoizedState;
                    do {
                        s = e(s, r.action),
                        r = r.next
                    } while (null !== r);return ei(s, t.memoizedState) || (fs = !0),
                    t.memoizedState = s,
                    t.baseUpdate === i.last && (t.baseState = s),
                    i.lastRenderedState = s,
                    [s, n]
                }
            }
            return [t.memoizedState, n]
        }
        n = i.last;
        var a = t.baseUpdate;
        if (s = t.baseState,
        null !== a ? (null !== n && (n.next = null),
        n = a.next) : n = null !== n ? n.next : null,
        null !== n) {
            var l = r = null
              , d = n
              , u = !1;
            do {
                var c = d.expirationTime;
                c < Ir ? (u || (u = !0,
                l = a,
                r = s),
                c > Nr && (Nr = c)) : s = d.eagerReducer === e ? d.eagerState : e(s, d.action),
                a = d,
                d = d.next
            } while (null !== d && d !== n);u || (l = a,
            r = s),
            ei(s, t.memoizedState) || (fs = !0),
            t.memoizedState = s,
            t.baseUpdate = l,
            t.baseState = r,
            i.lastRenderedState = s
        }
        return [t.memoizedState, i.dispatch]
    }
    function $r(e, t, i, n) {
        return e = {
            tag: e,
            create: t,
            destroy: i,
            deps: n,
            next: null
        },
        null === Ur ? (Ur = {
            lastEffect: null
        }).lastEffect = e.next = e : null === (t = Ur.lastEffect) ? Ur.lastEffect = e.next = e : (i = t.next,
        t.next = e,
        e.next = i,
        Ur.lastEffect = e),
        e
    }
    function Xr(e, t, i, n) {
        var r = zr();
        Br |= e,
        r.memoizedState = $r(t, i, void 0, void 0 === n ? null : n)
    }
    function Jr(e, t, i, n) {
        var r = qr();
        n = void 0 === n ? null : n;
        var s = void 0;
        if (null !== Dr) {
            var a = Dr.memoizedState;
            if (s = a.destroy,
            null !== n && Wr(n, a.deps))
                return void $r(0, i, s, n)
        }
        Br |= e,
        r.memoizedState = $r(t, i, s, n)
    }
    function Zr(e, t) {
        return "function" == typeof t ? (e = e(),
        t(e),
        function() {
            t(null)
        }
        ) : null != t ? (e = e(),
        t.current = e,
        function() {
            t.current = null
        }
        ) : void 0
    }
    function es() {}
    function ts(e, t, i) {
        25 > Hr || o("301");
        var n = e.alternate;
        if (e === Rr || null !== n && n === Rr) {
            if (Fr = !0,
            e = {
                expirationTime: Ir,
                action: i,
                eagerReducer: null,
                eagerState: null,
                next: null
            },
            null === Vr && (Vr = new Map),
            void 0 === (i = Vr.get(t)))
                Vr.set(t, e);
            else {
                for (t = i; null !== t.next; ) {
                    t = t.next
                }
                t.next = e
            }
        } else {
            Oa();
            var r = go()
              , s = {
                expirationTime: r = Va(r, e),
                action: i,
                eagerReducer: null,
                eagerState: null,
                next: null
            }
              , a = t.last;
            if (null === a)
                s.next = s;
            else {
                var l = a.next;
                null !== l && (s.next = l),
                a.next = s
            }
            if (t.last = s,
            0 === e.expirationTime && (null === n || 0 === n.expirationTime) && null !== (n = t.lastRenderedReducer))
                try {
                    var d = t.lastRenderedState
                      , u = n(d, i);
                    if (s.eagerReducer = n,
                    s.eagerState = u,
                    ei(u, d))
                        return
                } catch (e) {}
            Ga(e, r)
        }
    }
    var is = {
        readContext: xs,
        useCallback: jr,
        useContext: jr,
        useEffect: jr,
        useImperativeHandle: jr,
        useLayoutEffect: jr,
        useMemo: jr,
        useReducer: jr,
        useRef: jr,
        useState: jr,
        useDebugValue: jr
    }
      , ns = {
        readContext: xs,
        useCallback: function useCallback(e, t) {
            return zr().memoizedState = [e, void 0 === t ? null : t],
            e
        },
        useContext: xs,
        useEffect: function useEffect(e, t) {
            return Xr(516, 192, e, t)
        },
        useImperativeHandle: function useImperativeHandle(e, t, i) {
            return i = null != i ? i.concat([e]) : null,
            Xr(4, 36, Zr.bind(null, t, e), i)
        },
        useLayoutEffect: function useLayoutEffect(e, t) {
            return Xr(4, 36, e, t)
        },
        useMemo: function useMemo(e, t) {
            var i = zr();
            return t = void 0 === t ? null : t,
            e = e(),
            i.memoizedState = [e, t],
            e
        },
        useReducer: function useReducer(e, t, i) {
            var n = zr();
            return t = void 0 !== i ? i(t) : t,
            n.memoizedState = n.baseState = t,
            e = (e = n.queue = {
                last: null,
                dispatch: null,
                lastRenderedReducer: e,
                lastRenderedState: t
            }).dispatch = ts.bind(null, Rr, e),
            [n.memoizedState, e]
        },
        useRef: function useRef(e) {
            return e = {
                current: e
            },
            zr().memoizedState = e
        },
        useState: function useState(e) {
            var t = zr();
            return "function" == typeof e && (e = e()),
            t.memoizedState = t.baseState = e,
            e = (e = t.queue = {
                last: null,
                dispatch: null,
                lastRenderedReducer: Yr,
                lastRenderedState: e
            }).dispatch = ts.bind(null, Rr, e),
            [t.memoizedState, e]
        },
        useDebugValue: es
    }
      , rs = {
        readContext: xs,
        useCallback: function useCallback(e, t) {
            var i = qr();
            t = void 0 === t ? null : t;
            var n = i.memoizedState;
            return null !== n && null !== t && Wr(t, n[1]) ? n[0] : (i.memoizedState = [e, t],
            e)
        },
        useContext: xs,
        useEffect: function useEffect(e, t) {
            return Jr(516, 192, e, t)
        },
        useImperativeHandle: function useImperativeHandle(e, t, i) {
            return i = null != i ? i.concat([e]) : null,
            Jr(4, 36, Zr.bind(null, t, e), i)
        },
        useLayoutEffect: function useLayoutEffect(e, t) {
            return Jr(4, 36, e, t)
        },
        useMemo: function useMemo(e, t) {
            var i = qr();
            t = void 0 === t ? null : t;
            var n = i.memoizedState;
            return null !== n && null !== t && Wr(t, n[1]) ? n[0] : (e = e(),
            i.memoizedState = [e, t],
            e)
        },
        useReducer: Qr,
        useRef: function useRef() {
            return qr().memoizedState
        },
        useState: function useState() {
            return Qr(Yr)
        },
        useDebugValue: es
    }
      , ss = null
      , as = null
      , os = !1;
    function ls(e, t) {
        var i = qn(5, null, null, 0);
        i.elementType = "DELETED",
        i.type = "DELETED",
        i.stateNode = t,
        i.return = e,
        i.effectTag = 8,
        null !== e.lastEffect ? (e.lastEffect.nextEffect = i,
        e.lastEffect = i) : e.firstEffect = e.lastEffect = i
    }
    function ds(e, t) {
        switch (e.tag) {
        case 5:
            var i = e.type;
            return null !== (t = 1 !== t.nodeType || i.toLowerCase() !== t.nodeName.toLowerCase() ? null : t) && (e.stateNode = t,
            !0);
        case 6:
            return null !== (t = "" === e.pendingProps || 3 !== t.nodeType ? null : t) && (e.stateNode = t,
            !0);
        case 13:
        default:
            return !1;
        }
    }
    function us(e) {
        if (os) {
            var t = as;
            if (t) {
                var i = t;
                if (!ds(e, t)) {
                    if (!(t = Pn(i)) || !ds(e, t))
                        return e.effectTag |= 2,
                        os = !1,
                        void (ss = e);
                    ls(ss, i)
                }
                ss = e,
                as = wn(t)
            } else
                e.effectTag |= 2,
                os = !1,
                ss = e
        }
    }
    function cs(e) {
        for (e = e.return; null !== e && 5 !== e.tag && 3 !== e.tag && 18 !== e.tag; ) {
            e = e.return
        }
        ss = e
    }
    function hs(e) {
        if (e !== ss)
            return !1;
        if (!os)
            return cs(e),
            os = !0,
            !1;
        var t = e.type;
        if (5 !== e.tag || "head" !== t && "body" !== t && !En(t, e.memoizedProps))
            for (t = as; t; ) {
                ls(e, t),
                t = Pn(t)
            }
        return cs(e),
        as = ss ? Pn(e.stateNode) : null,
        !0
    }
    function ps() {
        as = ss = null,
        os = !1
    }
    var _s = ze.ReactCurrentOwner
      , fs = !1;
    function gs(e, t, i, n) {
        t.child = null === e ? yr(t, null, i, n) : mr(t, e.child, i, n)
    }
    function ms(e, t, i, n, r) {
        i = i.render;
        var s = t.ref;
        return Os(t, r),
        n = Gr(e, t, i, n, s, r),
        null === e || fs ? (t.effectTag |= 1,
        gs(e, t, n, r),
        t.child) : (t.updateQueue = e.updateQueue,
        t.effectTag &= -517,
        e.expirationTime <= r && (e.expirationTime = 0),
        ws(e, t, r))
    }
    function ys(e, t, i, n, r, s) {
        if (null === e) {
            var a = i.type;
            return "function" != typeof a || Yn(a) || void 0 !== a.defaultProps || null !== i.compare || void 0 !== i.defaultProps ? ((e = $n(i.type, null, n, null, t.mode, s)).ref = t.ref,
            e.return = t,
            t.child = e) : (t.tag = 15,
            t.type = a,
            vs(e, t, a, n, r, s))
        }
        return a = e.child,
        r < s && (r = a.memoizedProps,
        (i = null !== (i = i.compare) ? i : ii)(r, n) && e.ref === t.ref) ? ws(e, t, s) : (t.effectTag |= 1,
        (e = Qn(a, n)).ref = t.ref,
        e.return = t,
        t.child = e)
    }
    function vs(e, t, i, n, r, s) {
        return null !== e && ii(e.memoizedProps, n) && e.ref === t.ref && (fs = !1,
        r < s) ? ws(e, t, s) : bs(e, t, i, n, s)
    }
    function Es(e, t) {
        var i = t.ref;
        (null === e && null !== i || null !== e && e.ref !== i) && (t.effectTag |= 128)
    }
    function bs(e, t, i, n, r) {
        var s = Nn(i) ? On : Ln.current;
        return s = xn(t, s),
        Os(t, r),
        i = Gr(e, t, i, n, s, r),
        null === e || fs ? (t.effectTag |= 1,
        gs(e, t, i, r),
        t.child) : (t.updateQueue = e.updateQueue,
        t.effectTag &= -517,
        e.expirationTime <= r && (e.expirationTime = 0),
        ws(e, t, r))
    }
    function Ts(e, t, i, n, r) {
        if (Nn(i)) {
            var s = !0;
            Hn(t)
        } else
            s = !1;
        if (Os(t, r),
        null === t.stateNode)
            null !== e && (e.alternate = null,
            t.alternate = null,
            t.effectTag |= 2),
            ur(t, i, n),
            hr(t, i, n, r),
            n = !0;
        else if (null === e) {
            var a = t.stateNode
              , o = t.memoizedProps;
            a.props = o;
            var l = a.context
              , d = i.contextType;
            "object" == typeof d && null !== d ? d = xs(d) : d = xn(t, d = Nn(i) ? On : Ln.current);
            var u = i.getDerivedStateFromProps
              , c = "function" == typeof u || "function" == typeof a.getSnapshotBeforeUpdate;
            c || "function" != typeof a.UNSAFE_componentWillReceiveProps && "function" != typeof a.componentWillReceiveProps || (o !== n || l !== d) && cr(t, a, n, d),
            Bs = !1;
            var h = t.memoizedState;
            l = a.state = h;
            var p = t.updateQueue;
            null !== p && (qs(t, p, n, a, r),
            l = t.memoizedState),
            o !== n || h !== l || Mn.current || Bs ? ("function" == typeof u && (or(t, i, u, n),
            l = t.memoizedState),
            (o = Bs || dr(t, i, o, n, h, l, d)) ? (c || "function" != typeof a.UNSAFE_componentWillMount && "function" != typeof a.componentWillMount || ("function" == typeof a.componentWillMount && a.componentWillMount(),
            "function" == typeof a.UNSAFE_componentWillMount && a.UNSAFE_componentWillMount()),
            "function" == typeof a.componentDidMount && (t.effectTag |= 4)) : ("function" == typeof a.componentDidMount && (t.effectTag |= 4),
            t.memoizedProps = n,
            t.memoizedState = l),
            a.props = n,
            a.state = l,
            a.context = d,
            n = o) : ("function" == typeof a.componentDidMount && (t.effectTag |= 4),
            n = !1)
        } else
            a = t.stateNode,
            o = t.memoizedProps,
            a.props = t.type === t.elementType ? o : sr(t.type, o),
            l = a.context,
            "object" == typeof (d = i.contextType) && null !== d ? d = xs(d) : d = xn(t, d = Nn(i) ? On : Ln.current),
            (c = "function" == typeof (u = i.getDerivedStateFromProps) || "function" == typeof a.getSnapshotBeforeUpdate) || "function" != typeof a.UNSAFE_componentWillReceiveProps && "function" != typeof a.componentWillReceiveProps || (o !== n || l !== d) && cr(t, a, n, d),
            Bs = !1,
            l = t.memoizedState,
            h = a.state = l,
            null !== (p = t.updateQueue) && (qs(t, p, n, a, r),
            h = t.memoizedState),
            o !== n || l !== h || Mn.current || Bs ? ("function" == typeof u && (or(t, i, u, n),
            h = t.memoizedState),
            (u = Bs || dr(t, i, o, n, l, h, d)) ? (c || "function" != typeof a.UNSAFE_componentWillUpdate && "function" != typeof a.componentWillUpdate || ("function" == typeof a.componentWillUpdate && a.componentWillUpdate(n, h, d),
            "function" == typeof a.UNSAFE_componentWillUpdate && a.UNSAFE_componentWillUpdate(n, h, d)),
            "function" == typeof a.componentDidUpdate && (t.effectTag |= 4),
            "function" == typeof a.getSnapshotBeforeUpdate && (t.effectTag |= 256)) : ("function" != typeof a.componentDidUpdate || o === e.memoizedProps && l === e.memoizedState || (t.effectTag |= 4),
            "function" != typeof a.getSnapshotBeforeUpdate || o === e.memoizedProps && l === e.memoizedState || (t.effectTag |= 256),
            t.memoizedProps = n,
            t.memoizedState = h),
            a.props = n,
            a.state = h,
            a.context = d,
            n = u) : ("function" != typeof a.componentDidUpdate || o === e.memoizedProps && l === e.memoizedState || (t.effectTag |= 4),
            "function" != typeof a.getSnapshotBeforeUpdate || o === e.memoizedProps && l === e.memoizedState || (t.effectTag |= 256),
            n = !1);
        return Ss(e, t, i, n, s, r)
    }
    function Ss(e, t, i, n, r, s) {
        Es(e, t);
        var a = 0 != (64 & t.effectTag);
        if (!n && !a)
            return r && jn(t, i, !1),
            ws(e, t, s);
        n = t.stateNode,
        _s.current = t;
        var o = a && "function" != typeof i.getDerivedStateFromError ? null : n.render();
        return t.effectTag |= 1,
        null !== e && a ? (t.child = mr(t, e.child, null, s),
        t.child = mr(t, null, o, s)) : gs(e, t, o, s),
        t.memoizedState = n.state,
        r && jn(t, i, !0),
        t.child
    }
    function As(e) {
        var t = e.stateNode;
        t.pendingContext ? Fn(0, t.pendingContext, t.pendingContext !== t.context) : t.context && Fn(0, t.context, !1),
        Ar(e, t.containerInfo)
    }
    function Ps(e, t, i) {
        var n = t.mode
          , r = t.pendingProps
          , s = t.memoizedState;
        if (0 == (64 & t.effectTag)) {
            s = null;
            var a = !1
        } else
            s = {
                timedOutAt: null !== s ? s.timedOutAt : 0
            },
            a = !0,
            t.effectTag &= -65;
        if (null === e) {
            if (a) {
                var o = r.fallback;
                e = Xn(null, n, 0, null),
                0 == (1 & t.mode) && (e.child = null !== t.memoizedState ? t.child.child : t.child),
                n = Xn(o, n, i, null),
                e.sibling = n,
                (i = e).return = n.return = t
            } else
                i = n = yr(t, null, r.children, i);
        } else
            null !== e.memoizedState ? (o = (n = e.child).sibling,
            a ? (i = r.fallback,
            r = Qn(n, n.pendingProps),
            0 == (1 & t.mode) && (a = null !== t.memoizedState ? t.child.child : t.child) !== n.child && (r.child = a),
            n = r.sibling = Qn(o, i, o.expirationTime),
            i = r,
            r.childExpirationTime = 0,
            i.return = n.return = t) : i = n = mr(t, n.child, r.children, i)) : (o = e.child,
            a ? (a = r.fallback,
            (r = Xn(null, n, 0, null)).child = o,
            0 == (1 & t.mode) && (r.child = null !== t.memoizedState ? t.child.child : t.child),
            (n = r.sibling = Xn(a, n, i, null)).effectTag |= 2,
            i = r,
            r.childExpirationTime = 0,
            i.return = n.return = t) : n = i = mr(t, o, r.children, i)),
            t.stateNode = e.stateNode;
        return t.memoizedState = s,
        t.child = i,
        n
    }
    function ws(e, t, i) {
        if (null !== e && (t.contextDependencies = e.contextDependencies),
        t.childExpirationTime < i)
            return null;
        if (null !== e && t.child !== e.child && o("153"),
        null !== t.child) {
            for (i = Qn(e = t.child, e.pendingProps, e.expirationTime),
            t.child = i,
            i.return = t; null !== e.sibling; ) {
                e = e.sibling,
                (i = i.sibling = Qn(e, e.pendingProps, e.expirationTime)).return = t
            }
            i.sibling = null
        }
        return t.child
    }
    function ks(e, t, i) {
        var n = t.expirationTime;
        if (null !== e) {
            if (e.memoizedProps !== t.pendingProps || Mn.current)
                fs = !0;
            else if (n < i) {
                switch (fs = !1,
                t.tag) {
                case 3:
                    As(t),
                    ps();
                    break;
                case 5:
                    wr(t);
                    break;
                case 1:
                    Nn(t.type) && Hn(t);
                    break;
                case 4:
                    Ar(t, t.stateNode.containerInfo);
                    break;
                case 10:
                    Ls(t, t.memoizedProps.value);
                    break;
                case 13:
                    if (null !== t.memoizedState)
                        return 0 !== (n = t.child.childExpirationTime) && n >= i ? Ps(e, t, i) : null !== (t = ws(e, t, i)) ? t.sibling : null;
                }
                return ws(e, t, i)
            }
        } else
            fs = !1;
        switch (t.expirationTime = 0,
        t.tag) {
        case 2:
            n = t.elementType,
            null !== e && (e.alternate = null,
            t.alternate = null,
            t.effectTag |= 2),
            e = t.pendingProps;
            var r = xn(t, Ln.current);
            if (Os(t, i),
            r = Gr(null, t, n, e, r, i),
            t.effectTag |= 1,
            "object" == typeof r && null !== r && "function" == typeof r.render && void 0 === r.$$typeof) {
                if (t.tag = 1,
                Kr(),
                Nn(n)) {
                    var s = !0;
                    Hn(t)
                } else
                    s = !1;
                t.memoizedState = null !== r.state && void 0 !== r.state ? r.state : null;
                var a = n.getDerivedStateFromProps;
                "function" == typeof a && or(t, n, a, e),
                r.updater = lr,
                t.stateNode = r,
                r._reactInternalFiber = t,
                hr(t, n, e, i),
                t = Ss(null, t, n, !0, s, i)
            } else
                t.tag = 0,
                gs(null, t, r, i),
                t = t.child;
            return t;
        case 16:
            switch (r = t.elementType,
            null !== e && (e.alternate = null,
            t.alternate = null,
            t.effectTag |= 2),
            s = t.pendingProps,
            e = function(e) {
                var t = e._result;
                switch (e._status) {
                case 1:
                    return t;
                case 2:
                case 0:
                    throw t;
                default:
                    switch (e._status = 0,
                    (t = (t = e._ctor)()).then(function(t) {
                        0 === e._status && (t = t.default,
                        e._status = 1,
                        e._result = t)
                    }, function(t) {
                        0 === e._status && (e._status = 2,
                        e._result = t)
                    }),
                    e._status) {
                    case 1:
                        return e._result;
                    case 2:
                        throw e._result;
                    }
                    throw e._result = t,
                    t;
                }
            }(r),
            t.type = e,
            r = t.tag = function(e) {
                if ("function" == typeof e)
                    return Yn(e) ? 1 : 0;
                if (null != e) {
                    if ((e = e.$$typeof) === nt)
                        return 11;
                    if (e === st)
                        return 14
                }
                return 2
            }(e),
            s = sr(e, s),
            a = void 0,
            r) {
            case 0:
                a = bs(null, t, e, s, i);
                break;
            case 1:
                a = Ts(null, t, e, s, i);
                break;
            case 11:
                a = ms(null, t, e, s, i);
                break;
            case 14:
                a = ys(null, t, e, sr(e.type, s), n, i);
                break;
            default:
                o("306", e, "");
            }
            return a;
        case 0:
            return n = t.type,
            r = t.pendingProps,
            bs(e, t, n, r = t.elementType === n ? r : sr(n, r), i);
        case 1:
            return n = t.type,
            r = t.pendingProps,
            Ts(e, t, n, r = t.elementType === n ? r : sr(n, r), i);
        case 3:
            return As(t),
            null === (n = t.updateQueue) && o("282"),
            r = null !== (r = t.memoizedState) ? r.element : null,
            qs(t, n, t.pendingProps, null, i),
            (n = t.memoizedState.element) === r ? (ps(),
            t = ws(e, t, i)) : (r = t.stateNode,
            (r = (null === e || null === e.child) && r.hydrate) && (as = wn(t.stateNode.containerInfo),
            ss = t,
            r = os = !0),
            r ? (t.effectTag |= 2,
            t.child = yr(t, null, n, i)) : (gs(e, t, n, i),
            ps()),
            t = t.child),
            t;
        case 5:
            return wr(t),
            null === e && us(t),
            n = t.type,
            r = t.pendingProps,
            s = null !== e ? e.memoizedProps : null,
            a = r.children,
            En(n, r) ? a = null : null !== s && En(n, s) && (t.effectTag |= 16),
            Es(e, t),
            1 !== i && 1 & t.mode && r.hidden ? (t.expirationTime = t.childExpirationTime = 1,
            t = null) : (gs(e, t, a, i),
            t = t.child),
            t;
        case 6:
            return null === e && us(t),
            null;
        case 13:
            return Ps(e, t, i);
        case 4:
            return Ar(t, t.stateNode.containerInfo),
            n = t.pendingProps,
            null === e ? t.child = mr(t, null, n, i) : gs(e, t, n, i),
            t.child;
        case 11:
            return n = t.type,
            r = t.pendingProps,
            ms(e, t, n, r = t.elementType === n ? r : sr(n, r), i);
        case 7:
            return gs(e, t, t.pendingProps, i),
            t.child;
        case 8:
        case 12:
            return gs(e, t, t.pendingProps.children, i),
            t.child;
        case 10:
            e: {
                if (n = t.type._context,
                r = t.pendingProps,
                a = t.memoizedProps,
                Ls(t, s = r.value),
                null !== a) {
                    var l = a.value;
                    if (0 === (s = ei(l, s) ? 0 : 0 | ("function" == typeof n._calculateChangedBits ? n._calculateChangedBits(l, s) : 1073741823))) {
                        if (a.children === r.children && !Mn.current) {
                            t = ws(e, t, i);
                            break e
                        }
                    } else
                        for (null !== (l = t.child) && (l.return = t); null !== l; ) {
                            var d = l.contextDependencies;
                            if (null !== d) {
                                a = l.child;
                                for (var u = d.first; null !== u; ) {
                                    if (u.context === n && 0 != (u.observedBits & s)) {
                                        1 === l.tag && ((u = Hs(i)).tag = Us,
                                        Ws(l, u)),
                                        l.expirationTime < i && (l.expirationTime = i),
                                        null !== (u = l.alternate) && u.expirationTime < i && (u.expirationTime = i),
                                        u = i;
                                        for (var c = l.return; null !== c; ) {
                                            var h = c.alternate;
                                            if (c.childExpirationTime < u)
                                                c.childExpirationTime = u,
                                                null !== h && h.childExpirationTime < u && (h.childExpirationTime = u);
                                            else {
                                                if (!(null !== h && h.childExpirationTime < u))
                                                    break;
                                                h.childExpirationTime = u
                                            }
                                            c = c.return
                                        }
                                        d.expirationTime < i && (d.expirationTime = i);
                                        break
                                    }
                                    u = u.next
                                }
                            } else
                                a = 10 === l.tag && l.type === t.type ? null : l.child;
                            if (null !== a)
                                a.return = l;
                            else
                                for (a = l; null !== a; ) {
                                    if (a === t) {
                                        a = null;
                                        break
                                    }
                                    if (null !== (l = a.sibling)) {
                                        l.return = a.return,
                                        a = l;
                                        break
                                    }
                                    a = a.return
                                }
                            l = a
                        }
                }
                gs(e, t, r.children, i),
                t = t.child
            }
            return t;
        case 9:
            return r = t.type,
            n = (s = t.pendingProps).children,
            Os(t, i),
            n = n(r = xs(r, s.unstable_observedBits)),
            t.effectTag |= 1,
            gs(e, t, n, i),
            t.child;
        case 14:
            return s = sr(r = t.type, t.pendingProps),
            ys(e, t, r, s = sr(r.type, s), n, i);
        case 15:
            return vs(e, t, t.type, t.pendingProps, n, i);
        case 17:
            return n = t.type,
            r = t.pendingProps,
            r = t.elementType === n ? r : sr(n, r),
            null !== e && (e.alternate = null,
            t.alternate = null,
            t.effectTag |= 2),
            t.tag = 1,
            Nn(n) ? (e = !0,
            Hn(t)) : e = !1,
            Os(t, i),
            ur(t, n, r),
            hr(t, n, r, i),
            Ss(null, t, n, !0, e, i);
        }
        o("156")
    }
    var Cs = {
        current: null
    }
      , Is = null
      , Rs = null
      , Ds = null;
    function Ls(e, t) {
        var i = e.type._context;
        Rn(Cs, i._currentValue),
        i._currentValue = t
    }
    function Ms(e) {
        var t = Cs.current;
        In(Cs),
        e.type._context._currentValue = t
    }
    function Os(e, t) {
        Is = e,
        Ds = Rs = null;
        var i = e.contextDependencies;
        null !== i && i.expirationTime >= t && (fs = !0),
        e.contextDependencies = null
    }
    function xs(e, t) {
        return Ds !== e && !1 !== t && 0 !== t && ("number" == typeof t && 1073741823 !== t || (Ds = e,
        t = 1073741823),
        t = {
            context: e,
            observedBits: t,
            next: null
        },
        null === Rs ? (null === Is && o("308"),
        Rs = t,
        Is.contextDependencies = {
            first: t,
            expirationTime: 0
        }) : Rs = Rs.next = t),
        e._currentValue
    }
    var Ns = 1
      , Us = 2
      , Bs = !1;
    function Fs(e) {
        return {
            baseState: e,
            firstUpdate: null,
            lastUpdate: null,
            firstCapturedUpdate: null,
            lastCapturedUpdate: null,
            firstEffect: null,
            lastEffect: null,
            firstCapturedEffect: null,
            lastCapturedEffect: null
        }
    }
    function Vs(e) {
        return {
            baseState: e.baseState,
            firstUpdate: e.firstUpdate,
            lastUpdate: e.lastUpdate,
            firstCapturedUpdate: null,
            lastCapturedUpdate: null,
            firstEffect: null,
            lastEffect: null,
            firstCapturedEffect: null,
            lastCapturedEffect: null
        }
    }
    function Hs(e) {
        return {
            expirationTime: e,
            tag: 0,
            payload: null,
            callback: null,
            next: null,
            nextEffect: null
        }
    }
    function js(e, t) {
        null === e.lastUpdate ? e.firstUpdate = e.lastUpdate = t : (e.lastUpdate.next = t,
        e.lastUpdate = t)
    }
    function Ws(e, t) {
        var i = e.alternate;
        if (null === i) {
            var n = e.updateQueue
              , r = null;
            null === n && (n = e.updateQueue = Fs(e.memoizedState))
        } else
            n = e.updateQueue,
            r = i.updateQueue,
            null === n ? null === r ? (n = e.updateQueue = Fs(e.memoizedState),
            r = i.updateQueue = Fs(i.memoizedState)) : n = e.updateQueue = Vs(r) : null === r && (r = i.updateQueue = Vs(n));
        null === r || n === r ? js(n, t) : null === n.lastUpdate || null === r.lastUpdate ? (js(n, t),
        js(r, t)) : (js(n, t),
        r.lastUpdate = t)
    }
    function Gs(e, t) {
        var i = e.updateQueue;
        null === (i = null === i ? e.updateQueue = Fs(e.memoizedState) : Ks(e, i)).lastCapturedUpdate ? i.firstCapturedUpdate = i.lastCapturedUpdate = t : (i.lastCapturedUpdate.next = t,
        i.lastCapturedUpdate = t)
    }
    function Ks(e, t) {
        var i = e.alternate;
        return null !== i && t === i.updateQueue && (t = e.updateQueue = Vs(t)),
        t
    }
    function zs(e, t, i, n, s, a) {
        switch (i.tag) {
        case Ns:
            return "function" == typeof (e = i.payload) ? e.call(a, n, s) : e;
        case 3:
            e.effectTag = -2049 & e.effectTag | 64;
        case 0:
            if (null == (s = "function" == typeof (e = i.payload) ? e.call(a, n, s) : e))
                break;
            return r({}, n, s);
        case Us:
            Bs = !0;
        }
        return n
    }
    function qs(e, t, i, n, r) {
        Bs = !1;
        for (var s = (t = Ks(e, t)).baseState, a = null, o = 0, l = t.firstUpdate, d = s; null !== l; ) {
            var u = l.expirationTime;
            u < r ? (null === a && (a = l,
            s = d),
            o < u && (o = u)) : (d = zs(e, 0, l, d, i, n),
            null !== l.callback && (e.effectTag |= 32,
            l.nextEffect = null,
            null === t.lastEffect ? t.firstEffect = t.lastEffect = l : (t.lastEffect.nextEffect = l,
            t.lastEffect = l))),
            l = l.next
        }
        for (u = null,
        l = t.firstCapturedUpdate; null !== l; ) {
            var c = l.expirationTime;
            c < r ? (null === u && (u = l,
            null === a && (s = d)),
            o < c && (o = c)) : (d = zs(e, 0, l, d, i, n),
            null !== l.callback && (e.effectTag |= 32,
            l.nextEffect = null,
            null === t.lastCapturedEffect ? t.firstCapturedEffect = t.lastCapturedEffect = l : (t.lastCapturedEffect.nextEffect = l,
            t.lastCapturedEffect = l))),
            l = l.next
        }
        null === a && (t.lastUpdate = null),
        null === u ? t.lastCapturedUpdate = null : e.effectTag |= 32,
        null === a && null === u && (s = d),
        t.baseState = s,
        t.firstUpdate = a,
        t.firstCapturedUpdate = u,
        e.expirationTime = o,
        e.memoizedState = d
    }
    function Ys(e, t, i) {
        null !== t.firstCapturedUpdate && (null !== t.lastUpdate && (t.lastUpdate.next = t.firstCapturedUpdate,
        t.lastUpdate = t.lastCapturedUpdate),
        t.firstCapturedUpdate = t.lastCapturedUpdate = null),
        Qs(t.firstEffect, i),
        t.firstEffect = t.lastEffect = null,
        Qs(t.firstCapturedEffect, i),
        t.firstCapturedEffect = t.lastCapturedEffect = null
    }
    function Qs(e, t) {
        for (; null !== e; ) {
            var i = e.callback;
            if (null !== i) {
                e.callback = null;
                "function" != typeof i && o("191", i),
                i.call(t)
            }
            e = e.nextEffect
        }
    }
    function $s(e, t) {
        return {
            value: e,
            source: t,
            stack: ut(t)
        }
    }
    function Xs(e) {
        e.effectTag |= 4
    }
    var Js, Zs, ea;
    Js = function(e, t) {
        for (var i = t.child; null !== i; ) {
            if (5 === i.tag || 6 === i.tag)
                e.appendChild(i.stateNode);
            else if (4 !== i.tag && null !== i.child) {
                i.child.return = i,
                i = i.child;
                continue
            }
            if (i === t)
                break;
            for (; null === i.sibling; ) {
                if (null === i.return || i.return === t)
                    return;
                i = i.return
            }
            i.sibling.return = i.return,
            i = i.sibling
        }
    }
    ,
    Zs = function(e, t, i, n, s) {
        var a = e.memoizedProps;
        if (a !== n) {
            var o = t.stateNode;
            switch (Sr(Er.current),
            e = null,
            i) {
            case "input":
                a = bt(o, a),
                n = bt(o, n),
                e = [];
                break;
            case "option":
                a = Yi(o, a),
                n = Yi(o, n),
                e = [];
                break;
            case "select":
                a = r({}, a, {
                    value: void 0
                }),
                n = r({}, n, {
                    value: void 0
                }),
                e = [];
                break;
            case "textarea":
                a = $i(o, a),
                n = $i(o, n),
                e = [];
                break;
            default:
                "function" != typeof a.onClick && "function" == typeof n.onClick && (o.onclick = gn);
            }
            pn(i, n),
            o = i = void 0;
            var l = null;
            for (i in a) {
                if (!n.hasOwnProperty(i) && a.hasOwnProperty(i) && null != a[i])
                    if ("style" === i) {
                        var d = a[i];
                        for (o in d) {
                            d.hasOwnProperty(o) && (l || (l = {}),
                            l[o] = "")
                        }
                    } else
                        "dangerouslySetInnerHTML" !== i && "children" !== i && "suppressContentEditableWarning" !== i && "suppressHydrationWarning" !== i && "autoFocus" !== i && (b.hasOwnProperty(i) ? e || (e = []) : (e = e || []).push(i, null))
            }
            for (i in n) {
                var u = n[i];
                if (d = null != a ? a[i] : void 0,
                n.hasOwnProperty(i) && u !== d && (null != u || null != d))
                    if ("style" === i) {
                        if (d) {
                            for (o in d) {
                                !d.hasOwnProperty(o) || u && u.hasOwnProperty(o) || (l || (l = {}),
                                l[o] = "")
                            }
                            for (o in u) {
                                u.hasOwnProperty(o) && d[o] !== u[o] && (l || (l = {}),
                                l[o] = u[o])
                            }
                        } else
                            l || (e || (e = []),
                            e.push(i, l)),
                            l = u;
                    } else
                        "dangerouslySetInnerHTML" === i ? (u = u ? u.__html : void 0,
                        d = d ? d.__html : void 0,
                        null != u && d !== u && (e = e || []).push(i, "" + u)) : "children" === i ? d === u || "string" != typeof u && "number" != typeof u || (e = e || []).push(i, "" + u) : "suppressContentEditableWarning" !== i && "suppressHydrationWarning" !== i && (b.hasOwnProperty(i) ? (null != u && fn(s, i),
                        e || d === u || (e = [])) : (e = e || []).push(i, u))
            }
            l && (e = e || []).push("style", l),
            s = e,
            (t.updateQueue = s) && Xs(t)
        }
    }
    ,
    ea = function(e, t, i, n) {
        i !== n && Xs(t)
    }
    ;
    var ta = "function" == typeof WeakSet ? WeakSet : Set;
    function ia(e, t) {
        var i = t.source
          , n = t.stack;
        null === n && null !== i && (n = ut(i)),
        null !== i && dt(i.type),
        t = t.value,
        null !== e && 1 === e.tag && dt(e.type);
        try {
            console.error(t)
        } catch (e) {
            setTimeout(function() {
                throw e
            })
        }
    }
    function na(e) {
        var t = e.ref;
        if (null !== t)
            if ("function" == typeof t)
                try {
                    t(null)
                } catch (t) {
                    Fa(e, t)
                }
            else
                t.current = null
    }
    function ra(e, t, i) {
        if (null !== (i = null !== (i = i.updateQueue) ? i.lastEffect : null)) {
            var n = i = i.next;
            do {
                if (0 != (n.tag & e)) {
                    var r = n.destroy;
                    n.destroy = void 0,
                    void 0 !== r && r()
                }
                0 != (n.tag & t) && (r = n.create,
                n.destroy = r()),
                n = n.next
            } while (n !== i)
        }
    }
    function sa(e) {
        switch ("function" == typeof Gn && Gn(e),
        e.tag) {
        case 0:
        case 11:
        case 14:
        case 15:
            var t = e.updateQueue;
            if (null !== t && null !== (t = t.lastEffect)) {
                var i = t = t.next;
                do {
                    var n = i.destroy;
                    if (void 0 !== n) {
                        var r = e;
                        try {
                            n()
                        } catch (e) {
                            Fa(r, e)
                        }
                    }
                    i = i.next
                } while (i !== t)
            }
            break;
        case 1:
            if (na(e),
            "function" == typeof (t = e.stateNode).componentWillUnmount)
                try {
                    t.props = e.memoizedProps,
                    t.state = e.memoizedState,
                    t.componentWillUnmount()
                } catch (t) {
                    Fa(e, t)
                }
            break;
        case 5:
            na(e);
            break;
        case 4:
            la(e);
        }
    }
    function aa(e) {
        return 5 === e.tag || 3 === e.tag || 4 === e.tag
    }
    function oa(e) {
        e: {
            for (var t = e.return; null !== t; ) {
                if (aa(t)) {
                    var i = t;
                    break e
                }
                t = t.return
            }
            o("160"),
            i = void 0
        }
        var n = t = void 0;
        switch (i.tag) {
        case 5:
            t = i.stateNode,
            n = !1;
            break;
        case 3:
        case 4:
            t = i.stateNode.containerInfo,
            n = !0;
            break;
        default:
            o("161");
        }
        16 & i.effectTag && (on(t, ""),
        i.effectTag &= -17);
        e: t: for (i = e; ; ) {
            for (; null === i.sibling; ) {
                if (null === i.return || aa(i.return)) {
                    i = null;
                    break e
                }
                i = i.return
            }
            for (i.sibling.return = i.return,
            i = i.sibling; 5 !== i.tag && 6 !== i.tag && 18 !== i.tag; ) {
                if (2 & i.effectTag)
                    continue t;
                if (null === i.child || 4 === i.tag)
                    continue t;
                i.child.return = i,
                i = i.child
            }
            if (!(2 & i.effectTag)) {
                i = i.stateNode;
                break e
            }
        }
        for (var r = e; ; ) {
            if (5 === r.tag || 6 === r.tag) {
                if (i) {
                    if (n) {
                        var s = t
                          , a = r.stateNode
                          , l = i;
                        8 === s.nodeType ? s.parentNode.insertBefore(a, l) : s.insertBefore(a, l)
                    } else
                        t.insertBefore(r.stateNode, i);
                } else
                    n ? (a = t,
                    l = r.stateNode,
                    8 === a.nodeType ? (s = a.parentNode).insertBefore(l, a) : (s = a).appendChild(l),
                    null != (a = a._reactRootContainer) || null !== s.onclick || (s.onclick = gn)) : t.appendChild(r.stateNode);
            } else if (4 !== r.tag && null !== r.child) {
                r.child.return = r,
                r = r.child;
                continue
            }
            if (r === e)
                break;
            for (; null === r.sibling; ) {
                if (null === r.return || r.return === e)
                    return;
                r = r.return
            }
            r.sibling.return = r.return,
            r = r.sibling
        }
    }
    function la(e) {
        for (var t = e, i = !1, n = void 0, r = void 0; ; ) {
            if (!i) {
                i = t.return;
                e: for (; ; ) {
                    switch (null === i && o("160"),
                    i.tag) {
                    case 5:
                        n = i.stateNode,
                        r = !1;
                        break e;
                    case 3:
                    case 4:
                        n = i.stateNode.containerInfo,
                        r = !0;
                        break e;
                    }
                    i = i.return
                }
                i = !0
            }
            if (5 === t.tag || 6 === t.tag) {
                e: for (var s = t, a = s; ; ) {
                    if (sa(a),
                    null !== a.child && 4 !== a.tag)
                        a.child.return = a,
                        a = a.child;
                    else {
                        if (a === s)
                            break;
                        for (; null === a.sibling; ) {
                            if (null === a.return || a.return === s)
                                break e;
                            a = a.return
                        }
                        a.sibling.return = a.return,
                        a = a.sibling
                    }
                }
                r ? (s = n,
                a = t.stateNode,
                8 === s.nodeType ? s.parentNode.removeChild(a) : s.removeChild(a)) : n.removeChild(t.stateNode)
            } else if (4 === t.tag) {
                if (null !== t.child) {
                    n = t.stateNode.containerInfo,
                    r = !0,
                    t.child.return = t,
                    t = t.child;
                    continue
                }
            } else if (sa(t),
            null !== t.child) {
                t.child.return = t,
                t = t.child;
                continue
            }
            if (t === e)
                break;
            for (; null === t.sibling; ) {
                if (null === t.return || t.return === e)
                    return;
                4 === (t = t.return).tag && (i = !1)
            }
            t.sibling.return = t.return,
            t = t.sibling
        }
    }
    function da(e, t) {
        switch (t.tag) {
        case 0:
        case 11:
        case 14:
        case 15:
            ra(4, 8, t);
            break;
        case 1:
            break;
        case 5:
            var i = t.stateNode;
            if (null != i) {
                var n = t.memoizedProps;
                e = null !== e ? e.memoizedProps : n;
                var r = t.type
                  , s = t.updateQueue;
                t.updateQueue = null,
                null !== s && function(e, t, i, n, r) {
                    e[N] = r,
                    "input" === i && "radio" === r.type && null != r.name && St(e, r),
                    _n(i, n),
                    n = _n(i, r);
                    for (var s = 0; s < t.length; s += 2) {
                        var a = t[s]
                          , o = t[s + 1];
                        "style" === a ? cn(e, o) : "dangerouslySetInnerHTML" === a ? an(e, o) : "children" === a ? on(e, o) : vt(e, a, o, n)
                    }
                    switch (i) {
                    case "input":
                        At(e, r);
                        break;
                    case "textarea":
                        Ji(e, r);
                        break;
                    case "select":
                        t = e._wrapperState.wasMultiple,
                        e._wrapperState.wasMultiple = !!r.multiple,
                        null != (i = r.value) ? Qi(e, !!r.multiple, i, !1) : t !== !!r.multiple && (null != r.defaultValue ? Qi(e, !!r.multiple, r.defaultValue, !0) : Qi(e, !!r.multiple, r.multiple ? [] : "", !1));
                    }
                }(i, s, r, e, n)
            }
            break;
        case 6:
            null === t.stateNode && o("162"),
            t.stateNode.nodeValue = t.memoizedProps;
            break;
        case 3:
        case 12:
            break;
        case 13:
            if (i = t.memoizedState,
            n = void 0,
            e = t,
            null === i ? n = !1 : (n = !0,
            e = t.child,
            0 === i.timedOutAt && (i.timedOutAt = go())),
            null !== e && function(e, t) {
                for (var i = e; ; ) {
                    if (5 === i.tag) {
                        var n = i.stateNode;
                        if (t)
                            n.style.display = "none";
                        else {
                            n = i.stateNode;
                            var r = i.memoizedProps.style;
                            r = null != r && r.hasOwnProperty("display") ? r.display : null,
                            n.style.display = un("display", r)
                        }
                    } else if (6 === i.tag)
                        i.stateNode.nodeValue = t ? "" : i.memoizedProps;
                    else {
                        if (13 === i.tag && null !== i.memoizedState) {
                            (n = i.child.sibling).return = i,
                            i = n;
                            continue
                        }
                        if (null !== i.child) {
                            i.child.return = i,
                            i = i.child;
                            continue
                        }
                    }
                    if (i === e)
                        break;
                    for (; null === i.sibling; ) {
                        if (null === i.return || i.return === e)
                            return;
                        i = i.return
                    }
                    i.sibling.return = i.return,
                    i = i.sibling
                }
            }(e, n),
            null !== (i = t.updateQueue)) {
                t.updateQueue = null;
                var a = t.stateNode;
                null === a && (a = t.stateNode = new ta),
                i.forEach(function(e) {
                    var i = ja.bind(null, t, e);
                    a.has(e) || (a.add(e),
                    e.then(i, i))
                })
            }
            break;
        case 17:
            break;
        default:
            o("163");
        }
    }
    var ua = "function" == typeof WeakMap ? WeakMap : Map;
    function ca(e, t, i) {
        (i = Hs(i)).tag = 3,
        i.payload = {
            element: null
        };
        var n = t.value;
        return i.callback = function() {
            wo(n),
            ia(e, t)
        }
        ,
        i
    }
    function ha(e, t, i) {
        (i = Hs(i)).tag = 3;
        var n = e.type.getDerivedStateFromError;
        if ("function" == typeof n) {
            var r = t.value;
            i.payload = function() {
                return n(r)
            }
        }
        var s = e.stateNode;
        return null !== s && "function" == typeof s.componentDidCatch && (i.callback = function() {
            "function" != typeof n && (null === Ca ? Ca = new Set([this]) : Ca.add(this));
            var i = t.value
              , r = t.stack;
            ia(e, t),
            this.componentDidCatch(i, {
                componentStack: null !== r ? r : ""
            })
        }
        ),
        i
    }
    function pa(e) {
        switch (e.tag) {
        case 1:
            Nn(e.type) && Un();
            var t = e.effectTag;
            return 2048 & t ? (e.effectTag = -2049 & t | 64,
            e) : null;
        case 3:
            return Pr(),
            Bn(),
            0 != (64 & (t = e.effectTag)) && o("285"),
            e.effectTag = -2049 & t | 64,
            e;
        case 5:
            return kr(e),
            null;
        case 13:
            return 2048 & (t = e.effectTag) ? (e.effectTag = -2049 & t | 64,
            e) : null;
        case 18:
            return null;
        case 4:
            return Pr(),
            null;
        case 10:
            return Ms(e),
            null;
        default:
            return null;
        }
    }
    var _a = ze.ReactCurrentDispatcher
      , fa = ze.ReactCurrentOwner
      , ga = 1073741822
      , ma = !1
      , ya = null
      , va = null
      , Ea = 0
      , ba = -1
      , Ta = !1
      , Sa = null
      , Aa = !1
      , Pa = null
      , wa = null
      , ka = null
      , Ca = null;
    function Ia() {
        if (null !== ya)
            for (var e = ya.return; null !== e; ) {
                var t = e;
                switch (t.tag) {
                case 1:
                    var i = t.type.childContextTypes;
                    null != i && Un();
                    break;
                case 3:
                    Pr(),
                    Bn();
                    break;
                case 5:
                    kr(t);
                    break;
                case 4:
                    Pr();
                    break;
                case 10:
                    Ms(t);
                }
                e = e.return
            }
        va = null,
        Ea = 0,
        ba = -1,
        Ta = !1,
        ya = null
    }
    function Ra() {
        for (; null !== Sa; ) {
            var e = Sa.effectTag;
            if (16 & e && on(Sa.stateNode, ""),
            128 & e) {
                var t = Sa.alternate;
                null !== t && null !== (t = t.ref) && ("function" == typeof t ? t(null) : t.current = null)
            }
            switch (14 & e) {
            case 2:
                oa(Sa),
                Sa.effectTag &= -3;
                break;
            case 6:
                oa(Sa),
                Sa.effectTag &= -3,
                da(Sa.alternate, Sa);
                break;
            case 4:
                da(Sa.alternate, Sa);
                break;
            case 8:
                la(e = Sa),
                e.return = null,
                e.child = null,
                e.memoizedState = null,
                e.updateQueue = null,
                null !== (e = e.alternate) && (e.return = null,
                e.child = null,
                e.memoizedState = null,
                e.updateQueue = null);
            }
            Sa = Sa.nextEffect
        }
    }
    function Da() {
        for (; null !== Sa; ) {
            if (256 & Sa.effectTag)
                e: {
                    var e = Sa.alternate
                      , t = Sa;
                    switch (t.tag) {
                    case 0:
                    case 11:
                    case 15:
                        ra(2, 0, t);
                        break e;
                    case 1:
                        if (256 & t.effectTag && null !== e) {
                            var i = e.memoizedProps
                              , n = e.memoizedState;
                            t = (e = t.stateNode).getSnapshotBeforeUpdate(t.elementType === t.type ? i : sr(t.type, i), n),
                            e.__reactInternalSnapshotBeforeUpdate = t
                        }
                        break e;
                    case 3:
                    case 5:
                    case 6:
                    case 4:
                    case 17:
                        break e;
                    default:
                        o("163");
                    }
                }
            Sa = Sa.nextEffect
        }
    }
    function La(e, t) {
        for (; null !== Sa; ) {
            var i = Sa.effectTag;
            if (36 & i) {
                var n = Sa.alternate
                  , r = Sa
                  , s = t;
                switch (r.tag) {
                case 0:
                case 11:
                case 15:
                    ra(16, 32, r);
                    break;
                case 1:
                    var a = r.stateNode;
                    if (4 & r.effectTag)
                        if (null === n)
                            a.componentDidMount();
                        else {
                            var l = r.elementType === r.type ? n.memoizedProps : sr(r.type, n.memoizedProps);
                            a.componentDidUpdate(l, n.memoizedState, a.__reactInternalSnapshotBeforeUpdate)
                        }
                    null !== (n = r.updateQueue) && Ys(0, n, a);
                    break;
                case 3:
                    if (null !== (n = r.updateQueue)) {
                        if (a = null,
                        null !== r.child)
                            switch (r.child.tag) {
                            case 5:
                                a = r.child.stateNode;
                                break;
                            case 1:
                                a = r.child.stateNode;
                            }
                        Ys(0, n, a)
                    }
                    break;
                case 5:
                    s = r.stateNode,
                    null === n && 4 & r.effectTag && vn(r.type, r.memoizedProps) && s.focus();
                    break;
                case 6:
                case 4:
                case 12:
                case 13:
                case 17:
                    break;
                default:
                    o("163");
                }
            }
            128 & i && null !== (r = Sa.ref) && (s = Sa.stateNode,
            "function" == typeof r ? r(s) : r.current = s),
            512 & i && (Pa = e),
            Sa = Sa.nextEffect
        }
    }
    function Ma(e, t) {
        ka = wa = Pa = null;
        var i = $a;
        $a = !0;
        do {
            if (512 & t.effectTag) {
                var n = !1
                  , r = void 0;
                try {
                    var s = t;
                    ra(128, 0, s),
                    ra(0, 64, s)
                } catch (e) {
                    n = !0,
                    r = e
                }
                n && Fa(t, r)
            }
            t = t.nextEffect
        } while (null !== t);$a = i,
        0 !== (i = e.expirationTime) && mo(e, i),
        io || $a || To(1073741823, !1)
    }
    function Oa() {
        null !== wa && An(wa),
        null !== ka && ka()
    }
    function xa(e, t) {
        Aa = ma = !0,
        e.current === t && o("177");
        var i = e.pendingCommitExpirationTime;
        0 === i && o("261"),
        e.pendingCommitExpirationTime = 0;
        var n = t.expirationTime
          , r = t.childExpirationTime;
        for (function(e, t) {
            if (e.didError = !1,
            0 === t)
                e.earliestPendingTime = 0,
                e.latestPendingTime = 0,
                e.earliestSuspendedTime = 0,
                e.latestSuspendedTime = 0,
                e.latestPingedTime = 0;
            else {
                t < e.latestPingedTime && (e.latestPingedTime = 0);
                var i = e.latestPendingTime;
                0 !== i && (i > t ? e.earliestPendingTime = e.latestPendingTime = 0 : e.earliestPendingTime > t && (e.earliestPendingTime = e.latestPendingTime)),
                0 === (i = e.earliestSuspendedTime) ? tr(e, t) : t < e.latestSuspendedTime ? (e.earliestSuspendedTime = 0,
                e.latestSuspendedTime = 0,
                e.latestPingedTime = 0,
                tr(e, t)) : t > i && tr(e, t)
            }
            rr(0, e)
        }(e, r > n ? r : n),
        fa.current = null,
        n = void 0,
        1 < t.effectTag ? null !== t.lastEffect ? (t.lastEffect.nextEffect = t,
        n = t.firstEffect) : n = t : n = t.firstEffect,
        mn = Pi,
        yn = function() {
            var e = Ui();
            if (Bi(e)) {
                if (("selectionStart"in e))
                    var t = {
                        start: e.selectionStart,
                        end: e.selectionEnd
                    };
                else
                    e: {
                        var i = (t = (t = e.ownerDocument) && t.defaultView || window).getSelection && t.getSelection();
                        if (i && 0 !== i.rangeCount) {
                            t = i.anchorNode;
                            var n = i.anchorOffset
                              , r = i.focusNode;
                            i = i.focusOffset;
                            try {
                                t.nodeType,
                                r.nodeType
                            } catch (e) {
                                t = null;
                                break e
                            }
                            var s = 0
                              , a = -1
                              , o = -1
                              , l = 0
                              , d = 0
                              , u = e
                              , c = null;
                            t: for (; ; ) {
                                for (var h; u !== t || 0 !== n && 3 !== u.nodeType || (a = s + n),
                                u !== r || 0 !== i && 3 !== u.nodeType || (o = s + i),
                                3 === u.nodeType && (s += u.nodeValue.length),
                                null !== (h = u.firstChild); ) {
                                    c = u,
                                    u = h
                                }
                                for (; ; ) {
                                    if (u === e)
                                        break t;
                                    if (c === t && ++l === n && (a = s),
                                    c === r && ++d === i && (o = s),
                                    null !== (h = u.nextSibling))
                                        break;
                                    c = (u = c).parentNode
                                }
                                u = h
                            }
                            t = -1 === a || -1 === o ? null : {
                                start: a,
                                end: o
                            }
                        } else
                            t = null
                    }
                t = t || {
                    start: 0,
                    end: 0
                }
            } else
                t = null;
            return {
                focusedElem: e,
                selectionRange: t
            }
        }(),
        Pi = !1,
        Sa = n; null !== Sa; ) {
            r = !1;
            var a = void 0;
            try {
                Da()
            } catch (e) {
                r = !0,
                a = e
            }
            r && (null === Sa && o("178"),
            Fa(Sa, a),
            null !== Sa && (Sa = Sa.nextEffect))
        }
        for (Sa = n; null !== Sa; ) {
            r = !1,
            a = void 0;
            try {
                Ra()
            } catch (e) {
                r = !0,
                a = e
            }
            r && (null === Sa && o("178"),
            Fa(Sa, a),
            null !== Sa && (Sa = Sa.nextEffect))
        }
        for (Fi(yn),
        yn = null,
        Pi = !!mn,
        mn = null,
        e.current = t,
        Sa = n; null !== Sa; ) {
            r = !1,
            a = void 0;
            try {
                La(e, i)
            } catch (e) {
                r = !0,
                a = e
            }
            r && (null === Sa && o("178"),
            Fa(Sa, a),
            null !== Sa && (Sa = Sa.nextEffect))
        }
        if (null !== n && null !== Pa) {
            var l = Ma.bind(null, e, n);
            wa = s.unstable_runWithPriority(s.unstable_NormalPriority, function() {
                return Sn(l)
            }),
            ka = l
        }
        ma = Aa = !1,
        "function" == typeof Wn && Wn(t.stateNode),
        i = t.expirationTime,
        0 === (t = (t = t.childExpirationTime) > i ? t : i) && (Ca = null),
        function(e, t) {
            e.expirationTime = t,
            e.finishedWork = null
        }(e, t)
    }
    function Na(e) {
        for (; ; ) {
            var t = e.alternate
              , i = e.return
              , n = e.sibling;
            if (0 == (1024 & e.effectTag)) {
                ya = e;
                e: {
                    var s = t
                      , a = Ea
                      , l = (t = e).pendingProps;
                    switch (t.tag) {
                    case 2:
                    case 16:
                        break;
                    case 15:
                    case 0:
                        break;
                    case 1:
                        Nn(t.type) && Un();
                        break;
                    case 3:
                        Pr(),
                        Bn(),
                        (l = t.stateNode).pendingContext && (l.context = l.pendingContext,
                        l.pendingContext = null),
                        null !== s && null !== s.child || (hs(t),
                        t.effectTag &= -3);
                        break;
                    case 5:
                        kr(t);
                        var d = Sr(Tr.current);
                        if (a = t.type,
                        null !== s && null != t.stateNode)
                            Zs(s, t, a, l, d),
                            s.ref !== t.ref && (t.effectTag |= 128);
                        else if (l) {
                            var u = Sr(Er.current);
                            if (hs(t)) {
                                s = (l = t).stateNode;
                                var c = l.type
                                  , h = l.memoizedProps
                                  , p = d;
                                switch (s[x] = l,
                                s[N] = h,
                                a = void 0,
                                d = c) {
                                case "iframe":
                                case "object":
                                    wi("load", s);
                                    break;
                                case "video":
                                case "audio":
                                    for (c = 0; c < ne.length; c++) {
                                        wi(ne[c], s)
                                    }
                                    break;
                                case "source":
                                    wi("error", s);
                                    break;
                                case "img":
                                case "image":
                                case "link":
                                    wi("error", s),
                                    wi("load", s);
                                    break;
                                case "form":
                                    wi("reset", s),
                                    wi("submit", s);
                                    break;
                                case "details":
                                    wi("toggle", s);
                                    break;
                                case "input":
                                    Tt(s, h),
                                    wi("invalid", s),
                                    fn(p, "onChange");
                                    break;
                                case "select":
                                    s._wrapperState = {
                                        wasMultiple: !!h.multiple
                                    },
                                    wi("invalid", s),
                                    fn(p, "onChange");
                                    break;
                                case "textarea":
                                    Xi(s, h),
                                    wi("invalid", s),
                                    fn(p, "onChange");
                                }
                                for (a in pn(d, h),
                                c = null,
                                h) {
                                    h.hasOwnProperty(a) && (u = h[a],
                                    "children" === a ? "string" == typeof u ? s.textContent !== u && (c = ["children", u]) : "number" == typeof u && s.textContent !== "" + u && (c = ["children", "" + u]) : b.hasOwnProperty(a) && null != u && fn(p, a))
                                }
                                switch (d) {
                                case "input":
                                    Ge(s),
                                    Pt(s, h, !0);
                                    break;
                                case "textarea":
                                    Ge(s),
                                    Zi(s);
                                    break;
                                case "select":
                                case "option":
                                    break;
                                default:
                                    "function" == typeof h.onClick && (s.onclick = gn);
                                }
                                a = c,
                                l.updateQueue = a,
                                (l = null !== a) && Xs(t)
                            } else {
                                h = t,
                                p = a,
                                s = l,
                                c = 9 === d.nodeType ? d : d.ownerDocument,
                                u === en && (u = nn(p)),
                                u === en ? "script" === p ? ((s = c.createElement("div")).innerHTML = "<script></script>",
                                c = s.removeChild(s.firstChild)) : "string" == typeof s.is ? c = c.createElement(p, {
                                    is: s.is
                                }) : (c = c.createElement(p),
                                "select" === p && (p = c,
                                s.multiple ? p.multiple = !0 : s.size && (p.size = s.size))) : c = c.createElementNS(u, p),
                                (s = c)[x] = h,
                                s[N] = l,
                                Js(s, t),
                                p = s;
                                var _ = d
                                  , f = _n(c = a, h = l);
                                switch (c) {
                                case "iframe":
                                case "object":
                                    wi("load", p),
                                    d = h;
                                    break;
                                case "video":
                                case "audio":
                                    for (d = 0; d < ne.length; d++) {
                                        wi(ne[d], p)
                                    }
                                    d = h;
                                    break;
                                case "source":
                                    wi("error", p),
                                    d = h;
                                    break;
                                case "img":
                                case "image":
                                case "link":
                                    wi("error", p),
                                    wi("load", p),
                                    d = h;
                                    break;
                                case "form":
                                    wi("reset", p),
                                    wi("submit", p),
                                    d = h;
                                    break;
                                case "details":
                                    wi("toggle", p),
                                    d = h;
                                    break;
                                case "input":
                                    Tt(p, h),
                                    d = bt(p, h),
                                    wi("invalid", p),
                                    fn(_, "onChange");
                                    break;
                                case "option":
                                    d = Yi(p, h);
                                    break;
                                case "select":
                                    p._wrapperState = {
                                        wasMultiple: !!h.multiple
                                    },
                                    d = r({}, h, {
                                        value: void 0
                                    }),
                                    wi("invalid", p),
                                    fn(_, "onChange");
                                    break;
                                case "textarea":
                                    Xi(p, h),
                                    d = $i(p, h),
                                    wi("invalid", p),
                                    fn(_, "onChange");
                                    break;
                                default:
                                    d = h;
                                }
                                pn(c, d),
                                u = void 0;
                                var g = c
                                  , m = p
                                  , y = d;
                                for (u in y) {
                                    if (y.hasOwnProperty(u)) {
                                        var v = y[u];
                                        "style" === u ? cn(m, v) : "dangerouslySetInnerHTML" === u ? null != (v = v ? v.__html : void 0) && an(m, v) : "children" === u ? "string" == typeof v ? ("textarea" !== g || "" !== v) && on(m, v) : "number" == typeof v && on(m, "" + v) : "suppressContentEditableWarning" !== u && "suppressHydrationWarning" !== u && "autoFocus" !== u && (b.hasOwnProperty(u) ? null != v && fn(_, u) : null != v && vt(m, u, v, f))
                                    }
                                }
                                switch (c) {
                                case "input":
                                    Ge(p),
                                    Pt(p, h, !1);
                                    break;
                                case "textarea":
                                    Ge(p),
                                    Zi(p);
                                    break;
                                case "option":
                                    null != h.value && p.setAttribute("value", "" + Et(h.value));
                                    break;
                                case "select":
                                    (d = p).multiple = !!h.multiple,
                                    null != (p = h.value) ? Qi(d, !!h.multiple, p, !1) : null != h.defaultValue && Qi(d, !!h.multiple, h.defaultValue, !0);
                                    break;
                                default:
                                    "function" == typeof d.onClick && (p.onclick = gn);
                                }
                                (l = vn(a, l)) && Xs(t),
                                t.stateNode = s
                            }
                            null !== t.ref && (t.effectTag |= 128)
                        } else
                            null === t.stateNode && o("166");
                        break;
                    case 6:
                        s && null != t.stateNode ? ea(0, t, s.memoizedProps, l) : ("string" != typeof l && null === t.stateNode && o("166"),
                        s = Sr(Tr.current),
                        Sr(Er.current),
                        hs(t) ? (a = (l = t).stateNode,
                        s = l.memoizedProps,
                        a[x] = l,
                        (l = a.nodeValue !== s) && Xs(t)) : (a = t,
                        (l = (9 === s.nodeType ? s : s.ownerDocument).createTextNode(l))[x] = t,
                        a.stateNode = l));
                        break;
                    case 11:
                        break;
                    case 13:
                        if (l = t.memoizedState,
                        0 != (64 & t.effectTag)) {
                            t.expirationTime = a,
                            ya = t;
                            break e
                        }
                        l = null !== l,
                        a = null !== s && null !== s.memoizedState,
                        null !== s && !l && a && null !== (s = s.child.sibling) && (null !== (d = t.firstEffect) ? (t.firstEffect = s,
                        s.nextEffect = d) : (t.firstEffect = t.lastEffect = s,
                        s.nextEffect = null),
                        s.effectTag = 8),
                        (l || a) && (t.effectTag |= 4);
                        break;
                    case 7:
                    case 8:
                    case 12:
                        break;
                    case 4:
                        Pr();
                        break;
                    case 10:
                        Ms(t);
                        break;
                    case 9:
                    case 14:
                        break;
                    case 17:
                        Nn(t.type) && Un();
                        break;
                    case 18:
                        break;
                    default:
                        o("156");
                    }
                    ya = null
                }
                if (t = e,
                1 === Ea || 1 !== t.childExpirationTime) {
                    for (l = 0,
                    a = t.child; null !== a; ) {
                        (s = a.expirationTime) > l && (l = s),
                        (d = a.childExpirationTime) > l && (l = d),
                        a = a.sibling
                    }
                    t.childExpirationTime = l
                }
                if (null !== ya)
                    return ya;
                null !== i && 0 == (1024 & i.effectTag) && (null === i.firstEffect && (i.firstEffect = e.firstEffect),
                null !== e.lastEffect && (null !== i.lastEffect && (i.lastEffect.nextEffect = e.firstEffect),
                i.lastEffect = e.lastEffect),
                1 < e.effectTag && (null !== i.lastEffect ? i.lastEffect.nextEffect = e : i.firstEffect = e,
                i.lastEffect = e))
            } else {
                if (null !== (e = pa(e)))
                    return e.effectTag &= 1023,
                    e;
                null !== i && (i.firstEffect = i.lastEffect = null,
                i.effectTag |= 1024)
            }
            if (null !== n)
                return n;
            if (null === i)
                break;
            e = i
        }
        return null
    }
    function Ua(e) {
        var t = ks(e.alternate, e, Ea);
        return e.memoizedProps = e.pendingProps,
        null === t && (t = Na(e)),
        fa.current = null,
        t
    }
    function Ba(e, t) {
        ma && o("243"),
        Oa(),
        ma = !0;
        var i = _a.current;
        _a.current = is;
        var n = e.nextExpirationTimeToWorkOn;
        n === Ea && e === va && null !== ya || (Ia(),
        Ea = n,
        ya = Qn((va = e).current, null),
        e.pendingCommitExpirationTime = 0);
        for (var r = !1; ; ) {
            try {
                if (t)
                    for (; null !== ya && !Eo(); ) {
                        ya = Ua(ya)
                    }
                else
                    for (; null !== ya; ) {
                        ya = Ua(ya)
                    }
            } catch (t) {
                if (Ds = Rs = Is = null,
                Kr(),
                null === ya)
                    r = !0,
                    wo(t);
                else {
                    null === ya && o("271");
                    var s = ya
                      , a = s.return;
                    if (null !== a) {
                        e: {
                            var l = e
                              , d = a
                              , u = s
                              , c = t;
                            if (a = Ea,
                            u.effectTag |= 1024,
                            u.firstEffect = u.lastEffect = null,
                            null !== c && "object" == typeof c && "function" == typeof c.then) {
                                var h = c;
                                c = d;
                                var p = -1
                                  , _ = -1;
                                do {
                                    if (13 === c.tag) {
                                        var f = c.alternate;
                                        if (null !== f && null !== (f = f.memoizedState)) {
                                            _ = 10 * (1073741822 - f.timedOutAt);
                                            break
                                        }
                                        "number" == typeof (f = c.pendingProps.maxDuration) && (0 >= f ? p = 0 : (-1 === p || f < p) && (p = f))
                                    }
                                    c = c.return
                                } while (null !== c);c = d;
                                do {
                                    if ((f = 13 === c.tag) && (f = void 0 !== c.memoizedProps.fallback && null === c.memoizedState),
                                    f) {
                                        if (null === (d = c.updateQueue) ? ((d = new Set).add(h),
                                        c.updateQueue = d) : d.add(h),
                                        0 == (1 & c.mode)) {
                                            c.effectTag |= 64,
                                            u.effectTag &= -1957,
                                            1 === u.tag && (null === u.alternate ? u.tag = 17 : ((a = Hs(1073741823)).tag = Us,
                                            Ws(u, a))),
                                            u.expirationTime = 1073741823;
                                            break e
                                        }
                                        d = a;
                                        var g = (u = l).pingCache;
                                        null === g ? (g = u.pingCache = new ua,
                                        f = new Set,
                                        g.set(h, f)) : void 0 === (f = g.get(h)) && (f = new Set,
                                        g.set(h, f)),
                                        f.has(d) || (f.add(d),
                                        u = Ha.bind(null, u, h, d),
                                        h.then(u, u)),
                                        -1 === p ? l = 1073741823 : (-1 === _ && (_ = 10 * (1073741822 - nr(l, a)) - 5e3),
                                        l = _ + p),
                                        0 <= l && ba < l && (ba = l),
                                        c.effectTag |= 2048,
                                        c.expirationTime = a;
                                        break e
                                    }
                                    c = c.return
                                } while (null !== c);c = Error((dt(u.type) || "A React component") + " suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display." + ut(u))
                            }
                            Ta = !0,
                            c = $s(c, u),
                            l = d;
                            do {
                                switch (l.tag) {
                                case 3:
                                    l.effectTag |= 2048,
                                    l.expirationTime = a,
                                    Gs(l, a = ca(l, c, a));
                                    break e;
                                case 1:
                                    if (p = c,
                                    _ = l.type,
                                    u = l.stateNode,
                                    0 == (64 & l.effectTag) && ("function" == typeof _.getDerivedStateFromError || null !== u && "function" == typeof u.componentDidCatch && (null === Ca || !Ca.has(u)))) {
                                        l.effectTag |= 2048,
                                        l.expirationTime = a,
                                        Gs(l, a = ha(l, p, a));
                                        break e
                                    }
                                }
                                l = l.return
                            } while (null !== l)
                        }
                        ya = Na(s);
                        continue
                    }
                    r = !0,
                    wo(t)
                }
            }
            break
        }
        if (ma = !1,
        _a.current = i,
        Ds = Rs = Is = null,
        Kr(),
        r)
            va = null,
            e.finishedWork = null;
        else if (null !== ya)
            e.finishedWork = null;
        else {
            if (null === (i = e.current.alternate) && o("281"),
            va = null,
            Ta) {
                if (r = e.latestPendingTime,
                s = e.latestSuspendedTime,
                a = e.latestPingedTime,
                0 !== r && r < n || 0 !== s && s < n || 0 !== a && a < n)
                    return ir(e, n),
                    void _o(e, i, n, e.expirationTime, -1);
                if (!e.didError && t)
                    return e.didError = !0,
                    n = e.nextExpirationTimeToWorkOn = n,
                    t = e.expirationTime = 1073741823,
                    void _o(e, i, n, t, -1)
            }
            t && -1 !== ba ? (ir(e, n),
            (t = 10 * (1073741822 - nr(e, n))) < ba && (ba = t),
            t = 10 * (1073741822 - go()),
            t = ba - t,
            _o(e, i, n, e.expirationTime, 0 > t ? 0 : t)) : (e.pendingCommitExpirationTime = n,
            e.finishedWork = i)
        }
    }
    function Fa(e, t) {
        for (var i = e.return; null !== i; ) {
            switch (i.tag) {
            case 1:
                var n = i.stateNode;
                if ("function" == typeof i.type.getDerivedStateFromError || "function" == typeof n.componentDidCatch && (null === Ca || !Ca.has(n)))
                    return Ws(i, e = ha(i, e = $s(t, e), 1073741823)),
                    void Ga(i, 1073741823);
                break;
            case 3:
                return Ws(i, e = ca(i, e = $s(t, e), 1073741823)),
                void Ga(i, 1073741823);
            }
            i = i.return
        }
        3 === e.tag && (Ws(e, i = ca(e, i = $s(t, e), 1073741823)),
        Ga(e, 1073741823))
    }
    function Va(e, t) {
        var i = s.unstable_getCurrentPriorityLevel()
          , n = void 0;
        if (0 == (1 & t.mode))
            n = 1073741823;
        else if (ma && !Aa)
            n = Ea;
        else {
            switch (i) {
            case s.unstable_ImmediatePriority:
                n = 1073741823;
                break;
            case s.unstable_UserBlockingPriority:
                n = 1073741822 - 10 * (1 + ((1073741822 - e + 15) / 10 | 0));
                break;
            case s.unstable_NormalPriority:
                n = 1073741822 - 25 * (1 + ((1073741822 - e + 500) / 25 | 0));
                break;
            case s.unstable_LowPriority:
            case s.unstable_IdlePriority:
                n = 1;
                break;
            default:
                o("313");
            }
            null !== va && n === Ea && --n
        }
        return i === s.unstable_UserBlockingPriority && (0 === Za || n < Za) && (Za = n),
        n
    }
    function Ha(e, t, i) {
        var n = e.pingCache;
        null !== n && n.delete(t),
        null !== va && Ea === i ? va = null : (t = e.earliestSuspendedTime,
        n = e.latestSuspendedTime,
        0 !== t && i <= t && i >= n && (e.didError = !1,
        (0 === (t = e.latestPingedTime) || t > i) && (e.latestPingedTime = i),
        rr(i, e),
        0 !== (i = e.expirationTime) && mo(e, i)))
    }
    function ja(e, t) {
        var i = e.stateNode;
        null !== i && i.delete(t),
        null !== (e = Wa(e, t = Va(t = go(), e))) && (tr(e, t),
        0 !== (t = e.expirationTime) && mo(e, t))
    }
    function Wa(e, t) {
        e.expirationTime < t && (e.expirationTime = t);
        var i = e.alternate;
        null !== i && i.expirationTime < t && (i.expirationTime = t);
        var n = e.return
          , r = null;
        if (null === n && 3 === e.tag)
            r = e.stateNode;
        else
            for (; null !== n; ) {
                if (i = n.alternate,
                n.childExpirationTime < t && (n.childExpirationTime = t),
                null !== i && i.childExpirationTime < t && (i.childExpirationTime = t),
                null === n.return && 3 === n.tag) {
                    r = n.stateNode;
                    break
                }
                n = n.return
            }
        return r
    }
    function Ga(e, t) {
        null !== (e = Wa(e, t)) && (!ma && 0 !== Ea && t > Ea && Ia(),
        tr(e, t),
        ma && !Aa && va === e || mo(e, e.expirationTime),
        uo > lo && (uo = 0,
        o("185")))
    }
    function Ka(e, t, i, n, r) {
        return s.unstable_runWithPriority(s.unstable_ImmediatePriority, function() {
            return e(t, i, n, r)
        })
    }
    var za = null
      , qa = null
      , Ya = 0
      , Qa = void 0
      , $a = !1
      , Xa = null
      , Ja = 0
      , Za = 0
      , eo = !1
      , to = null
      , io = !1
      , no = !1
      , ro = null
      , so = s.unstable_now()
      , ao = 1073741822 - (so / 10 | 0)
      , oo = ao
      , lo = 50
      , uo = 0
      , co = null;
    function ho() {
        ao = 1073741822 - ((s.unstable_now() - so) / 10 | 0)
    }
    function po(e, t) {
        if (0 !== Ya) {
            if (t < Ya)
                return;
            null !== Qa && s.unstable_cancelCallback(Qa)
        }
        Ya = t,
        e = s.unstable_now() - so,
        Qa = s.unstable_scheduleCallback(bo, {
            timeout: 10 * (1073741822 - t) - e
        })
    }
    function _o(e, t, i, n, r) {
        e.expirationTime = n,
        0 !== r || Eo() ? 0 < r && (e.timeoutHandle = bn(fo.bind(null, e, t, i), r)) : (e.pendingCommitExpirationTime = i,
        e.finishedWork = t)
    }
    function fo(e, t, i) {
        e.pendingCommitExpirationTime = i,
        e.finishedWork = t,
        ho(),
        oo = ao,
        So(e, i)
    }
    function go() {
        return $a || (yo(),
        0 !== Ja && 1 !== Ja || (ho(),
        oo = ao)),
        oo
    }
    function mo(e, t) {
        null === e.nextScheduledRoot ? (e.expirationTime = t,
        null === qa ? (za = qa = e,
        e.nextScheduledRoot = e) : (qa = qa.nextScheduledRoot = e).nextScheduledRoot = za) : t > e.expirationTime && (e.expirationTime = t),
        $a || (io ? no && (Xa = e,
        Ja = 1073741823,
        Ao(e, 1073741823, !1)) : 1073741823 === t ? To(1073741823, !1) : po(e, t))
    }
    function yo() {
        var e = 0
          , t = null;
        if (null !== qa)
            for (var i = qa, n = za; null !== n; ) {
                var r = n.expirationTime;
                if (0 === r) {
                    if ((null === i || null === qa) && o("244"),
                    n === n.nextScheduledRoot) {
                        za = qa = n.nextScheduledRoot = null;
                        break
                    }
                    if (n === za)
                        za = r = n.nextScheduledRoot,
                        qa.nextScheduledRoot = r,
                        n.nextScheduledRoot = null;
                    else {
                        if (n === qa) {
                            (qa = i).nextScheduledRoot = za,
                            n.nextScheduledRoot = null;
                            break
                        }
                        i.nextScheduledRoot = n.nextScheduledRoot,
                        n.nextScheduledRoot = null
                    }
                    n = i.nextScheduledRoot
                } else {
                    if (r > e && (e = r,
                    t = n),
                    n === qa)
                        break;
                    if (1073741823 === e)
                        break;
                    i = n,
                    n = n.nextScheduledRoot
                }
            }
        Xa = t,
        Ja = e
    }
    var vo = !1;
    function Eo() {
        return !!vo || !!s.unstable_shouldYield() && (vo = !0)
    }
    function bo() {
        try {
            if (!Eo() && null !== za) {
                ho();
                var e = za;
                do {
                    var t = e.expirationTime;
                    0 !== t && ao <= t && (e.nextExpirationTimeToWorkOn = ao),
                    e = e.nextScheduledRoot
                } while (e !== za)
            }
            To(0, !0)
        } finally {
            vo = !1
        }
    }
    function To(e, t) {
        if (yo(),
        t)
            for (ho(),
            oo = ao; null !== Xa && 0 !== Ja && e <= Ja && !(vo && ao > Ja); ) {
                Ao(Xa, Ja, ao > Ja),
                yo(),
                ho(),
                oo = ao
            }
        else
            for (; null !== Xa && 0 !== Ja && e <= Ja; ) {
                Ao(Xa, Ja, !1),
                yo()
            }
        if (t && (Ya = 0,
        Qa = null),
        0 !== Ja && po(Xa, Ja),
        uo = 0,
        co = null,
        null !== ro)
            for (e = ro,
            ro = null,
            t = 0; t < e.length; t++) {
                var i = e[t];
                try {
                    i._onComplete()
                } catch (e) {
                    eo || (eo = !0,
                    to = e)
                }
            }
        if (eo)
            throw e = to,
            to = null,
            eo = !1,
            e
    }
    function So(e, t) {
        $a && o("253"),
        Xa = e,
        Ja = t,
        Ao(e, t, !1),
        To(1073741823, !1)
    }
    function Ao(e, t, i) {
        if ($a && o("245"),
        $a = !0,
        i) {
            var n = e.finishedWork;
            null !== n ? Po(e, n, t) : (e.finishedWork = null,
            -1 !== (n = e.timeoutHandle) && (e.timeoutHandle = -1,
            Tn(n)),
            Ba(e, i),
            null !== (n = e.finishedWork) && (Eo() ? e.finishedWork = n : Po(e, n, t)))
        } else
            null !== (n = e.finishedWork) ? Po(e, n, t) : (e.finishedWork = null,
            -1 !== (n = e.timeoutHandle) && (e.timeoutHandle = -1,
            Tn(n)),
            Ba(e, i),
            null !== (n = e.finishedWork) && Po(e, n, t));
        $a = !1
    }
    function Po(e, t, i) {
        var n = e.firstBatch;
        if (null !== n && n._expirationTime >= i && (null === ro ? ro = [n] : ro.push(n),
        n._defer))
            return e.finishedWork = t,
            void (e.expirationTime = 0);
        e.finishedWork = null,
        e === co ? uo++ : (co = e,
        uo = 0),
        s.unstable_runWithPriority(s.unstable_ImmediatePriority, function() {
            xa(e, t)
        })
    }
    function wo(e) {
        null === Xa && o("246"),
        Xa.expirationTime = 0,
        eo || (eo = !0,
        to = e)
    }
    function ko(e, t) {
        var i = io;
        io = !0;
        try {
            return e(t)
        } finally {
            (io = i) || $a || To(1073741823, !1)
        }
    }
    function Co(e, t) {
        if (io && !no) {
            no = !0;
            try {
                return e(t)
            } finally {
                no = !1
            }
        }
        return e(t)
    }
    function Io(e, t, i) {
        io || $a || 0 === Za || (To(Za, !1),
        Za = 0);
        var n = io;
        io = !0;
        try {
            return s.unstable_runWithPriority(s.unstable_UserBlockingPriority, function() {
                return e(t, i)
            })
        } finally {
            (io = n) || $a || To(1073741823, !1)
        }
    }
    function Ro(e, t, i, n, r) {
        var s = t.current;
        e: if (i) {
            t: {
                2 === ni(i = i._reactInternalFiber) && 1 === i.tag || o("170");
                var a = i;
                do {
                    switch (a.tag) {
                    case 3:
                        a = a.stateNode.context;
                        break t;
                    case 1:
                        if (Nn(a.type)) {
                            a = a.stateNode.__reactInternalMemoizedMergedChildContext;
                            break t
                        }
                    }
                    a = a.return
                } while (null !== a);o("171"),
                a = void 0
            }
            if (1 === i.tag) {
                var l = i.type;
                if (Nn(l)) {
                    i = Vn(i, l, a);
                    break e
                }
            }
            i = a
        } else
            i = Dn;
        return null === t.context ? t.context = i : t.pendingContext = i,
        t = r,
        (r = Hs(n)).payload = {
            element: e
        },
        null !== (t = void 0 === t ? null : t) && (r.callback = t),
        Oa(),
        Ws(s, r),
        Ga(s, n),
        n
    }
    function Do(e, t, i, n) {
        var r = t.current;
        return Ro(e, t, i, r = Va(go(), r), n)
    }
    function Lo(e) {
        if (!(e = e.current).child)
            return null;
        switch (e.child.tag) {
        case 5:
        default:
            return e.child.stateNode;
        }
    }
    function Mo(e, t, i) {
        var n = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;
        return {
            $$typeof: $e,
            key: null == n ? null : "" + n,
            children: e,
            containerInfo: t,
            implementation: i
        }
    }
    function Oo(e) {
        var t = 1073741822 - 25 * (1 + ((1073741822 - go() + 500) / 25 | 0));
        t >= ga && (t = ga - 1),
        this._expirationTime = ga = t,
        this._root = e,
        this._callbacks = this._next = null,
        this._hasChildren = this._didComplete = !1,
        this._children = null,
        this._defer = !0
    }
    function xo() {
        this._callbacks = null,
        this._didCommit = !1,
        this._onCommit = this._onCommit.bind(this)
    }
    function No(e, t, i) {
        e = {
            current: t = qn(3, null, null, t ? 3 : 0),
            containerInfo: e,
            pendingChildren: null,
            pingCache: null,
            earliestPendingTime: 0,
            latestPendingTime: 0,
            earliestSuspendedTime: 0,
            latestSuspendedTime: 0,
            latestPingedTime: 0,
            didError: !1,
            pendingCommitExpirationTime: 0,
            finishedWork: null,
            timeoutHandle: -1,
            context: null,
            pendingContext: null,
            hydrate: i,
            nextExpirationTimeToWorkOn: 0,
            expirationTime: 0,
            firstBatch: null,
            nextScheduledRoot: null
        },
        this._internalRoot = t.stateNode = e
    }
    function Uo(e) {
        return !(!e || 1 !== e.nodeType && 9 !== e.nodeType && 11 !== e.nodeType && (8 !== e.nodeType || " react-mount-point-unstable " !== e.nodeValue))
    }
    function Bo(e, t, i, n, r) {
        var s = i._reactRootContainer;
        if (s) {
            if ("function" == typeof r) {
                var a = r;
                r = function() {
                    var e = Lo(s._internalRoot);
                    a.call(e)
                }
            }
            null != e ? s.legacy_renderSubtreeIntoContainer(e, t, r) : s.render(t, r)
        } else {
            if (s = i._reactRootContainer = function(e, t) {
                if (t || (t = !(!(t = e ? 9 === e.nodeType ? e.documentElement : e.firstChild : null) || 1 !== t.nodeType || !t.hasAttribute("data-reactroot"))),
                !t)
                    for (var i; i = e.lastChild; ) {
                        e.removeChild(i)
                    }
                return new No(e,!1,t)
            }(i, n),
            "function" == typeof r) {
                var o = r;
                r = function() {
                    var e = Lo(s._internalRoot);
                    o.call(e)
                }
            }
            Co(function() {
                null != e ? s.legacy_renderSubtreeIntoContainer(e, t, r) : s.render(t, r)
            })
        }
        return Lo(s._internalRoot)
    }
    function Fo(e, t) {
        var i = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;
        return Uo(t) || o("200"),
        Mo(e, t, null, i)
    }
    Ce = function(e, t, i) {
        switch (t) {
        case "input":
            if (At(e, i),
            t = i.name,
            "radio" === i.type && null != t) {
                for (i = e; i.parentNode; ) {
                    i = i.parentNode
                }
                for (i = i.querySelectorAll("input[name=" + JSON.stringify("" + t) + "][type=\"radio\"]"),
                t = 0; t < i.length; t++) {
                    var n = i[t];
                    if (n !== e && n.form === e.form) {
                        var r = V(n);
                        r || o("90"),
                        Ke(n),
                        At(n, r)
                    }
                }
            }
            break;
        case "textarea":
            Ji(e, i);
            break;
        case "select":
            null != (t = i.value) && Qi(e, !!i.multiple, t, !1);
        }
    }
    ,
    Oo.prototype.render = function(e) {
        this._defer || o("250"),
        this._hasChildren = !0,
        this._children = e;
        var t = this._root._internalRoot
          , i = this._expirationTime
          , n = new xo;
        return Ro(e, t, null, i, n._onCommit),
        n
    }
    ,
    Oo.prototype.then = function(e) {
        if (this._didComplete)
            e();
        else {
            var t = this._callbacks;
            null === t && (t = this._callbacks = []),
            t.push(e)
        }
    }
    ,
    Oo.prototype.commit = function() {
        var e = this._root._internalRoot
          , t = e.firstBatch;
        if (this._defer && null !== t || o("251"),
        this._hasChildren) {
            var i = this._expirationTime;
            if (t !== this) {
                this._hasChildren && (i = this._expirationTime = t._expirationTime,
                this.render(this._children));
                for (var n = null, r = t; r !== this; ) {
                    n = r,
                    r = r._next
                }
                null === n && o("251"),
                n._next = r._next,
                this._next = t,
                e.firstBatch = this
            }
            this._defer = !1,
            So(e, i),
            t = this._next,
            this._next = null,
            null !== (t = e.firstBatch = t) && t._hasChildren && t.render(t._children)
        } else
            this._next = null,
            this._defer = !1
    }
    ,
    Oo.prototype._onComplete = function() {
        if (!this._didComplete) {
            this._didComplete = !0;
            var e = this._callbacks;
            if (null !== e)
                for (var t = 0; t < e.length; t++) {
                    (0,
                    e[t])()
                }
        }
    }
    ,
    xo.prototype.then = function(e) {
        if (this._didCommit)
            e();
        else {
            var t = this._callbacks;
            null === t && (t = this._callbacks = []),
            t.push(e)
        }
    }
    ,
    xo.prototype._onCommit = function() {
        if (!this._didCommit) {
            this._didCommit = !0;
            var e = this._callbacks;
            if (null !== e)
                for (var t = 0; t < e.length; t++) {
                    var i = e[t];
                    "function" != typeof i && o("191", i),
                    i()
                }
        }
    }
    ,
    No.prototype.render = function(e, t) {
        var i = this._internalRoot
          , n = new xo;
        return null !== (t = void 0 === t ? null : t) && n.then(t),
        Do(e, i, null, n._onCommit),
        n
    }
    ,
    No.prototype.unmount = function(e) {
        var t = this._internalRoot
          , i = new xo;
        return null !== (e = void 0 === e ? null : e) && i.then(e),
        Do(null, t, null, i._onCommit),
        i
    }
    ,
    No.prototype.legacy_renderSubtreeIntoContainer = function(e, t, i) {
        var n = this._internalRoot
          , r = new xo;
        return null !== (i = void 0 === i ? null : i) && r.then(i),
        Do(t, n, e, r._onCommit),
        r
    }
    ,
    No.prototype.createBatch = function() {
        var e = new Oo(this)
          , t = e._expirationTime
          , i = this._internalRoot
          , n = i.firstBatch;
        if (null === n)
            i.firstBatch = e,
            e._next = null;
        else {
            for (i = null; null !== n && n._expirationTime >= t; ) {
                i = n,
                n = n._next
            }
            e._next = n,
            null !== i && (i._next = e)
        }
        return e
    }
    ,
    Oe = ko,
    xe = Io,
    Ne = function() {
        $a || 0 === Za || (To(Za, !1),
        Za = 0)
    }
    ;
    var Vo, Ho, jo = {
        createPortal: Fo,
        findDOMNode: function findDOMNode(e) {
            if (null == e)
                return null;
            if (1 === e.nodeType)
                return e;
            var t = e._reactInternalFiber;
            return void 0 === t && ("function" == typeof e.render ? o("188") : o("268", Object.keys(e))),
            e = null === (e = si(t)) ? null : e.stateNode
        },
        hydrate: function hydrate(e, t, i) {
            return Uo(t) || o("200"),
            Bo(null, e, t, !0, i)
        },
        render: function render(e, t, i) {
            return Uo(t) || o("200"),
            Bo(null, e, t, !1, i)
        },
        unstable_renderSubtreeIntoContainer: function unstable_renderSubtreeIntoContainer(e, t, i, n) {
            return Uo(i) || o("200"),
            (null == e || void 0 === e._reactInternalFiber) && o("38"),
            Bo(e, t, i, !1, n)
        },
        unmountComponentAtNode: function unmountComponentAtNode(e) {
            return Uo(e) || o("40"),
            !!e._reactRootContainer && (Co(function() {
                Bo(null, null, e, !1, function() {
                    e._reactRootContainer = null
                })
            }),
            !0)
        },
        unstable_createPortal: function unstable_createPortal() {
            return Fo.apply(void 0, arguments)
        },
        unstable_batchedUpdates: ko,
        unstable_interactiveUpdates: Io,
        flushSync: function flushSync(e, t) {
            $a && o("187");
            var i = io;
            io = !0;
            try {
                return Ka(e, t)
            } finally {
                io = i,
                To(1073741823, !1)
            }
        },
        unstable_createRoot: function unstable_createRoot(e, t) {
            return Uo(e) || o("299", "unstable_createRoot"),
            new No(e,!0,null != t && !0 === t.hydrate)
        },
        unstable_flushControlled: function unstable_flushControlled(e) {
            var t = io;
            io = !0;
            try {
                Ka(e)
            } finally {
                (io = t) || $a || To(1073741823, !1)
            }
        },
        __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: {
            Events: [B, F, V, D.injectEventPluginsByName, E, z, function(e) {
                C(e, K)
            }
            , Le, Me, Ii, M]
        }
    };
    Ho = (Vo = {
        findFiberByHostInstance: U,
        bundleType: 0,
        version: "16.8.6",
        rendererPackageName: "react-dom"
    }).findFiberByHostInstance,
    function(e) {
        if ("undefined" == typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)
            return !1;
        var t = __REACT_DEVTOOLS_GLOBAL_HOOK__;
        if (t.isDisabled || !t.supportsFiber)
            return !0;
        try {
            var i = t.inject(e);
            Wn = Kn(function(e) {
                return t.onCommitFiberRoot(i, e)
            }),
            Gn = Kn(function(e) {
                return t.onCommitFiberUnmount(i, e)
            })
        } catch (e) {}
    }(r({}, Vo, {
        overrideProps: null,
        currentDispatcherRef: ze.ReactCurrentDispatcher,
        findHostInstanceByFiber: function findHostInstanceByFiber(e) {
            return null === (e = si(e)) ? null : e.stateNode
        },
        findFiberByHostInstance: function findFiberByHostInstance(e) {
            return Ho ? Ho(e) : null
        }
    }));
    var Wo = {
        default: jo
    }
      , Go = Wo && jo || Wo;
    e.exports = Go.default || Go
}
, function(e, t, i) {
    "use strict";
    e.exports = i(159)
}
, function(e, t, i) {
    "use strict";
    (function(e) {
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var i = null
          , n = !1
          , r = 3
          , s = -1
          , a = -1
          , o = !1
          , l = !1;
        function d() {
            if (!o) {
                var e = i.expirationTime;
                l ? S() : l = !0,
                _T(h, e)
            }
        }
        function u() {
            var e = i
              , t = i.next;
            if (i === t)
                i = null;
            else {
                var n = i.previous;
                i = n.next = t,
                t.previous = n
            }
            e.next = e.previous = null,
            n = e.callback,
            t = e.expirationTime,
            e = e.priorityLevel;
            var s = r
              , o = a;
            r = e,
            a = t;
            try {
                var l = n()
            } finally {
                r = s,
                a = o
            }
            if ("function" == typeof l)
                if (l = {
                    callback: l,
                    priorityLevel: e,
                    expirationTime: t,
                    next: null,
                    previous: null
                },
                null === i)
                    i = l.next = l.previous = l;
                else {
                    n = null,
                    e = i;
                    do {
                        if (e.expirationTime >= t) {
                            n = e;
                            break
                        }
                        e = e.next
                    } while (e !== i);null === n ? n = i : n === i && (i = l,
                    d()),
                    (t = n.previous).next = n.previous = l,
                    l.next = n,
                    l.previous = t
                }
        }
        function c() {
            if (-1 === s && null !== i && 1 === i.priorityLevel) {
                o = !0;
                try {
                    do {
                        u()
                    } while (null !== i && 1 === i.priorityLevel)
                } finally {
                    o = !1,
                    null !== i ? d() : l = !1
                }
            }
        }
        function h(e) {
            o = !0;
            var r = n;
            n = e;
            try {
                if (e)
                    for (; null !== i; ) {
                        var s = t.unstable_now();
                        if (!(i.expirationTime <= s))
                            break;
                        do {
                            u()
                        } while (null !== i && i.expirationTime <= s)
                    }
                else if (null !== i)
                    do {
                        u()
                    } while (null !== i && !A())
            } finally {
                o = !1,
                n = r,
                null !== i ? d() : l = !1,
                c()
            }
        }
        var p, _, f = Date, g = "function" == typeof setTimeout ? setTimeout : void 0, m = "function" == typeof clearTimeout ? clearTimeout : void 0, y = "function" == typeof requestAnimationFrame ? requestAnimationFrame : void 0, v = "function" == typeof cancelAnimationFrame ? cancelAnimationFrame : void 0;
        function E(e) {
            p = y(function(t) {
                m(_),
                e(t)
            }),
            _ = g(function() {
                v(p),
                e(t.unstable_now())
            }, 100)
        }
        if ("object" == typeof performance && "function" == typeof performance.now) {
            var b = performance;
            t.unstable_now = function() {
                return b.now()
            }
        } else
            t.unstable_now = function() {
                return f.now()
            }
            ;
        var _T, S, A, P = null;
        if ("undefined" != typeof window ? P = window : void 0 !== e && (P = e),
        P && P._schedMock) {
            var w = P._schedMock;
            _T = w[0],
            S = w[1],
            A = w[2],
            t.unstable_now = w[3]
        } else if ("undefined" == typeof window || "function" != typeof MessageChannel) {
            var k = null
              , C = function(e) {
                if (null !== k)
                    try {
                        k(e)
                    } finally {
                        k = null
                    }
            };
            _T = function T(e) {
                null !== k ? setTimeout(_T, 0, e) : (k = e,
                setTimeout(C, 0, !1))
            }
            ,
            S = function() {
                k = null
            }
            ,
            A = function() {
                return !1
            }
        } else {
            "undefined" != typeof console && ("function" != typeof y && console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
            "function" != typeof v && console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));
            var I = null
              , R = !1
              , D = -1
              , L = !1
              , M = !1
              , O = 0
              , x = 33
              , N = 33;
            A = function() {
                return O <= t.unstable_now()
            }
            ;
            var U = new MessageChannel
              , B = U.port2;
            U.port1.onmessage = function() {
                R = !1;
                var e = I
                  , i = D;
                I = null,
                D = -1;
                var n = t.unstable_now()
                  , r = !1;
                if (0 >= O - n) {
                    if (!(-1 !== i && i <= n))
                        return L || (L = !0,
                        E(F)),
                        I = e,
                        void (D = i);
                    r = !0
                }
                if (null !== e) {
                    M = !0;
                    try {
                        e(r)
                    } finally {
                        M = !1
                    }
                }
            }
            ;
            var F = function(e) {
                if (null !== I) {
                    E(F);
                    var t = e - O + N;
                    t < N && x < N ? (8 > t && (t = 8),
                    N = t < x ? x : t) : x = t,
                    O = e + N,
                    R || (R = !0,
                    B.postMessage(void 0))
                } else
                    L = !1
            };
            _T = function(e, t) {
                I = e,
                D = t,
                M || 0 > t ? B.postMessage(void 0) : L || (L = !0,
                E(F))
            }
            ,
            S = function() {
                I = null,
                R = !1,
                D = -1
            }
        }
        t.unstable_ImmediatePriority = 1,
        t.unstable_UserBlockingPriority = 2,
        t.unstable_NormalPriority = 3,
        t.unstable_IdlePriority = 5,
        t.unstable_LowPriority = 4,
        t.unstable_runWithPriority = function(e, i) {
            switch (e) {
            case 1:
            case 2:
            case 3:
            case 4:
            case 5:
                break;
            default:
                e = 3;
            }
            var n = r
              , a = s;
            r = e,
            s = t.unstable_now();
            try {
                return i()
            } finally {
                r = n,
                s = a,
                c()
            }
        }
        ,
        t.unstable_next = function(e) {
            switch (r) {
            case 1:
            case 2:
            case 3:
                var i = 3;
                break;
            default:
                i = r;
            }
            var n = r
              , a = s;
            r = i,
            s = t.unstable_now();
            try {
                return e()
            } finally {
                r = n,
                s = a,
                c()
            }
        }
        ,
        t.unstable_scheduleCallback = function(e, n) {
            var a = -1 !== s ? s : t.unstable_now();
            if ("object" == typeof n && null !== n && "number" == typeof n.timeout)
                n = a + n.timeout;
            else
                switch (r) {
                case 1:
                    n = a + -1;
                    break;
                case 2:
                    n = a + 250;
                    break;
                case 5:
                    n = a + 1073741823;
                    break;
                case 4:
                    n = a + 1e4;
                    break;
                default:
                    n = a + 5e3;
                }
            if (e = {
                callback: e,
                priorityLevel: r,
                expirationTime: n,
                next: null,
                previous: null
            },
            null === i)
                i = e.next = e.previous = e,
                d();
            else {
                a = null;
                var o = i;
                do {
                    if (o.expirationTime > n) {
                        a = o;
                        break
                    }
                    o = o.next
                } while (o !== i);null === a ? a = i : a === i && (i = e,
                d()),
                (n = a.previous).next = a.previous = e,
                e.next = a,
                e.previous = n
            }
            return e
        }
        ,
        t.unstable_cancelCallback = function(e) {
            var t = e.next;
            if (null !== t) {
                if (t === e)
                    i = null;
                else {
                    e === i && (i = t);
                    var n = e.previous;
                    n.next = t,
                    t.previous = n
                }
                e.next = e.previous = null
            }
        }
        ,
        t.unstable_wrapCallback = function(e) {
            var i = r;
            return function() {
                var n = r
                  , a = s;
                r = i,
                s = t.unstable_now();
                try {
                    return e.apply(this, arguments)
                } finally {
                    r = n,
                    s = a,
                    c()
                }
            }
        }
        ,
        t.unstable_getCurrentPriorityLevel = function() {
            return r
        }
        ,
        t.unstable_shouldYield = function() {
            return !n && (null !== i && i.expirationTime < a || A())
        }
        ,
        t.unstable_continueExecution = function() {
            null !== i && d()
        }
        ,
        t.unstable_pauseExecution = function() {}
        ,
        t.unstable_getFirstCallbackNode = function() {
            return i
        }
    }
    ).call(this, i(13))
}
, function(e, t, i) {
    var n = {
        "./10_LEFT_hover.svg": 161,
        "./10_RIGHT_hover.svg": 162,
        "./ad-choices.svg": 163,
        "./add_icon.svg": 164,
        "./arrow.svg": 165,
        "./attch_to_player.svg": 166,
        "./check.svg": 167,
        "./close_button.svg": 168,
        "./detach_from_player.svg": 169,
        "./down_arrow.svg": 170,
        "./error-icon.svg": 171,
        "./exit_full_screen_hover.svg": 172,
        "./full_screen_hover.svg": 173,
        "./go_to_icon.svg": 174,
        "./icon_back.svg": 175,
        "./left_arrow.svg": 176,
        "./live_badge.svg": 177,
        "./live_guide.svg": 178,
        "./live_lighting.svg": 179,
        "./pause_hover.svg": 180,
        "./play_hover.svg": 181,
        "./play_next.svg": 182,
        "./recorded_badge.svg": 183,
        "./reload.svg": 184,
        "./settings_hover.svg": 185,
        "./volume_1_hover.svg": 186,
        "./volume_2_hover.svg": 187,
        "./volume_3_hover.svg": 188,
        "./volume_4_hover.svg": 189,
        "./will_record_badge.svg": 190
    };
    function r(e) {
        var t = s(e);
        return i(t)
    }
    function s(e) {
        if (!i.o(n, e)) {
            var t = new Error("Cannot find module '" + e + "'");
            throw t.code = "MODULE_NOT_FOUND",
            t
        }
        return n[e]
    }
    r.keys = function() {
        return Object.keys(n)
    }
    ,
    r.resolve = s,
    e.exports = r,
    r.id = 160
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\" style=\"background:#262930\"><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M11.142 21h1.218V10.99h-1.134l-2.324 1.68v1.134l2.24-1.61V21zm7.7-.882c1.75 0 2.646-1.344 2.646-3.878v-.56c0-2.324-.98-3.836-2.674-3.836s-2.702 1.4-2.702 3.864v.56c0 2.534 1.064 3.85 2.73 3.85zm0 1.008c-2.394 0-3.976-1.932-3.976-4.844v-.56c0-2.954 1.498-4.858 3.948-4.858 2.464 0 3.906 1.974 3.906 4.83v.56c0 2.912-1.414 4.872-3.878 4.872z\" fill=\"#FFF\"></path><path stroke=\"#FFF\" stroke-width=\"2\" d=\"M4.333 1.393v5.415H9.86\"></path><path d=\"M0 16c0 8.837 7.163 16 16 16 8.836 0 16-7.163 16-16S24.836 0 16 0A15.972 15.972 0 003.382 6.161l1.576 1.23A13.972 13.972 0 0116 2c7.732 0 14 6.268 14 14s-6.268 14-14 14S2 23.732 2 16H0z\" fill=\"#FFF\" fill-rule=\"nonzero\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\" style=\"background:#262930\"><g fill=\"none\" fill-rule=\"evenodd\"><path stroke=\"#FFF\" stroke-width=\"2\" d=\"M27.667 1.393v5.415H22.14\"></path><path d=\"M32 16c0 8.837-7.163 16-16 16-8.836 0-16-7.163-16-16S7.164 0 16 0c4.991 0 9.605 2.302 12.618 6.161l-1.576 1.23A13.972 13.972 0 0016 2C8.268 2 2 8.268 2 16s6.268 14 14 14 14-6.268 14-14h2z\" fill=\"#FFF\" fill-rule=\"nonzero\"></path><path d=\"M11.142 21h1.218V10.99h-1.134l-2.324 1.68v1.134l2.24-1.61V21zm7.7-.882c1.75 0 2.646-1.344 2.646-3.878v-.56c0-2.324-.98-3.836-2.674-3.836s-2.702 1.4-2.702 3.864v.56c0 2.534 1.064 3.85 2.73 3.85zm0 1.008c-2.394 0-3.976-1.932-3.976-4.844v-.56c0-2.954 1.498-4.858 3.948-4.858 2.464 0 3.906 1.974 3.906 4.83v.56c0 2.912-1.414 4.872-3.878 4.872z\" fill=\"#FFF\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg fill=\"#00aecd\" width=\"32\" height=\"32\" viewBox=\"0 0 15 15\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4.2 11.3q-.9.5-.9-.55V4.1q0-1 1-.6L10.4 7q1.6.5 0 1l-3.75 2V7.75a.65.65 0 10-1.3 0v3a.9.9 0 001.3.8L12.7 8.2q1-.7 0-1.5L3.3 1.6q-1.1-.3-1.5.9v10q.4 1.4 1.5.8l1.5-.8a.3.3 0 10-.6-1.2z\"></path></svg>"
}
, function(e) {
    e.exports = "<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11 11H0v2h11v11h2V13h11v-2H13V0h-2v11z\" fill-rule=\"nonzero\" fill=\"#FFF\"></path></svg>"
}
, function(e) {
    e.exports = "<svg width=\"36\" height=\"25\" viewBox=\"0 0 36 25\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path d=\"M12 10.269L2.113.683 1.409 0 0 1.366l.704.683 10.459 10.14.352.34L12 13l.704-.683L23.296 2.05 24 1.366 22.591 0l-.704.683L12 10.269z\" id=\"id-0a\"></path></defs><use fill=\"#FFF\" xlink:href=\"#id-0a\" transform=\"translate(6 6)\" stroke=\"#FFF\" stroke-width=\"2\" fill-rule=\"evenodd\" stroke-linecap=\"square\"></use></svg>"
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"24\" viewBox=\"0 0 32 24\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path id=\"id-1a\" d=\"M4 3h2v19H4z\"></path><path id=\"id-2b\" d=\"M4 2h28v2H4z\"></path><path id=\"id-3c\" d=\"M0 21h32v2H0z\"></path><path id=\"id-4d\" d=\"M30 4h2v19h-2z\"></path></defs><g fill=\"none\" fill-rule=\"evenodd\"><g transform=\"translate(0 -2)\"><use fill=\"#D8D8D8\" xlink:href=\"#id-1a\"></use><path stroke=\"#FFF\" d=\"M4.5 3.5h1v18h-1z\"></path></g><g transform=\"translate(0 -2)\"><use fill=\"#FFF\" xlink:href=\"#id-2b\"></use><path stroke=\"#FFF\" d=\"M4.5 2.5h27v1h-27z\"></path></g><g transform=\"translate(0 -2)\"><use fill=\"#FFF\" xlink:href=\"#id-3c\"></use><path stroke=\"#FFF\" d=\"M.5 21.5h31v1H.5z\"></path></g><g stroke=\"#FFF\" stroke-width=\"1.5\"><path d=\"M19.466 12.433l5.724-5.96M25.19 11.32V6.475h-4.656\"></path></g><g transform=\"translate(0 -2)\"><use fill=\"#FFF\" xlink:href=\"#id-4d\"></use><path stroke=\"#FFF\" d=\"M30.5 4.5h1v18h-1z\"></path></g><path fill=\"#FFF\" d=\"M0 13h18v11H0z\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"16\" height=\"13\" viewBox=\"0 0 16 13\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M6.77 9.347l6.317-7.94a1.062 1.062 0 011.515-.16c.462.382.532 1.075.157 1.547l-7 8.8a1.062 1.062 0 01-1.52.155L1.392 7.674a1.116 1.116 0 01-.146-1.548 1.062 1.062 0 011.515-.15l4.01 3.371z\" fill=\"#2DBD9D\" fill-rule=\"nonzero\"></path></svg>"
}
, function(e) {
    e.exports = "<svg width=\"24\" height=\"22\" viewBox=\"0 0 24 22\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M1.845 0L1 .845 11.155 11 1 21.155l.845.845L12 11.845 22.155 22l.845-.845L12.845 11 23 .845 22.155 0 12 10.155z\" fill-rule=\"nonzero\" stroke=\"#FFF\" fill=\"#FFF\"></path></svg>"
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"24\" viewBox=\"0 0 32 24\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path id=\"id-5a\" d=\"M4 3h2v19H4z\"></path><path id=\"id-6b\" d=\"M4 2h28v2H4z\"></path><path id=\"id-7c\" d=\"M0 21h32v2H0z\"></path><path id=\"id-8d\" d=\"M30 4h2v19h-2z\"></path></defs><g fill=\"none\" fill-rule=\"evenodd\"><g transform=\"translate(0 -2)\"><use fill=\"#D8D8D8\" xlink:href=\"#id-5a\"></use><path stroke=\"#FFF\" d=\"M4.5 3.5h1v18h-1z\"></path></g><g transform=\"translate(0 -2)\"><use fill=\"#FFF\" xlink:href=\"#id-6b\"></use><path stroke=\"#FFF\" d=\"M4.5 2.5h27v1h-27z\"></path></g><g transform=\"translate(0 -2)\"><use fill=\"#FFF\" xlink:href=\"#id-7c\"></use><path stroke=\"#FFF\" d=\"M.5 21.5h31v1H.5z\"></path></g><g stroke=\"#FFF\" stroke-width=\"1.5\"><path d=\"M27.534 4.567l-5.724 5.96M21.81 5.68v4.846h4.656\"></path></g><g transform=\"translate(0 -2)\"><use fill=\"#FFF\" xlink:href=\"#id-8d\"></use><path stroke=\"#FFF\" d=\"M30.5 4.5h1v18h-1z\"></path></g><path fill=\"#FFF\" d=\"M0 13h18v11H0z\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"36\" height=\"25\" viewBox=\"0 0 36 25\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><filter x=\"-37.5%\" y=\"-69.2%\" width=\"175%\" height=\"238.5%\" filterUnits=\"objectBoundingBox\" id=\"id-9a\"><feOffset in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset><feGaussianBlur stdDeviation=\"3\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur><feComposite in=\"shadowBlurOuter1\" in2=\"SourceAlpha\" operator=\"out\" result=\"shadowBlurOuter1\"></feComposite><feColorMatrix values=\"0 0 0 0 0.368627451 0 0 0 0 0.396078431 0 0 0 0 0.450980392 0 0 0 0.8 0\" in=\"shadowBlurOuter1\"></feColorMatrix></filter><path d=\"M12 10.269L2.113.683 1.409 0 0 1.366l.704.683 10.459 10.14.352.34L12 13l.704-.683L23.296 2.05 24 1.366 22.591 0l-.704.683L12 10.269z\" id=\"id-10b\"></path></defs><g transform=\"translate(6 6)\" fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"square\"><use fill=\"#000\" filter=\"url(#id-9a)\" xlink:href=\"#id-10b\"></use><use fill=\"#FFF\" xlink:href=\"#id-10b\"></use></g></svg>"
}
, function(e) {
    e.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"56\" height=\"56\" viewBox=\"0 0 56 56\"><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M56 28c0 15.464-12.536 28-28 28S0 43.464 0 28 12.536 0 28 0s28 12.536 28 28z\"></path><path stroke=\"#FFF\" stroke-width=\"2\" d=\"M28 55c14.912 0 27-12.088 27-27S42.912 1 28 1 1 13.088 1 28s12.088 27 27 27z\" opacity=\".7\"></path><g fill=\"#FFF\" transform=\"rotate(180 15 19)\"><path d=\"M1.125 6.625h1.75v14h-1.75z\"></path><circle cx=\"2\" cy=\"2.25\" r=\"1.75\"></circle></g></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"24\" viewBox=\"0 0 32 24\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M9 9V0H7v5.563L1.719.28.28 1.72 5.563 7H0v2h9zm23 0V7h-5.563l5.282-5.281L30.28.28 25 5.563V0h-2v9h9zM9 24v-9H0v2h5.563L.28 22.281 1.72 23.72 7 18.437V24h2zm16 0v-5.563l5.281 5.282 1.438-1.438L26.437 17H32v-2h-9v9h2z\" fill-rule=\"nonzero\" fill=\"#FFF\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"24\" viewBox=\"0 0 32 24\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M0 0v9h2V3.437L7.281 8.72 8.72 7.28 3.438 2H9V0H0zm23 0v2h5.563L23.28 7.281 24.72 8.72 30 3.438V9h2V0h-9zM0 15v9h9v-2H3.437l5.282-5.281L7.28 15.28 2 20.562V15H0zm30 0v5.563l-5.281-5.282-1.438 1.438L28.563 22H23v2h9v-9h-2z\" fill-rule=\"nonzero\" fill=\"#FFF\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"25\" height=\"22\" viewBox=\"0 0 25 22\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20.286 10H0v2h20.3L12 20.3l1.414 1.414 10.707-10.707L13.414.3 12 1.714 20.286 10z\" fill-rule=\"nonzero\" fill=\"#FFF\"></path></svg>"
}
, function(e) {
    e.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" style=\"background:0 0\" viewBox=\"0 0 32 32\"><path fill=\"#FFF\" d=\"M14.959 4L4.705 15.195 4 16l.705.805L14.959 28l1.474-1.61-8.492-9.27H28v-2.24H7.941l8.492-9.27z\"></path></svg>"
}
, function(e) {
    e.exports = "<svg width=\"13\" height=\"24\" viewBox=\"0 0 13 24\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"#FFF\" fill-rule=\"evenodd\" stroke-linecap=\"square\"><path d=\"M2.731 12l9.586-9.887.683-.704L11.634 0l-.683.704L.811 11.163l-.34.352L0 12l.683.704L10.95 23.296l.683.704L13 22.591l-.683-.704L2.731 12z\"></path><path d=\"M2.731 12l9.586-9.887.683-.704L11.634 0l-.683.704L.811 11.163l-.34.352L0 12l.683.704L10.95 23.296l.683.704L13 22.591l-.683-.704L2.731 12z\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"63\" height=\"24\" viewBox=\"0 0 63 24\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><path fill=\"rgba(41, 44, 51, 0.5)\" d=\"M0 0h63v24H0z\"></path><text font-family=\"Graphik-Semibold, Graphik\" font-size=\"12\" font-weight=\"500\" letter-spacing=\"1\" fill=\"#FFF\"><tspan x=\"26\" y=\"16\">LIVE</tspan></text><path fill=\"#2DBD9D\" d=\"M10.667 19L20 12l-5.333-1.75L17.333 5 8 12l5.333 1.75z\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"32\" viewBox=\"0 0 32 14\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path id=\"id-11a\" d=\"M6 0h26v2H6z\"></path><path id=\"id-12b\" d=\"M6 6h26v2H6z\"></path><path id=\"id-13c\" d=\"M6 12h26v2H6z\"></path></defs><g fill=\"none\" fill-rule=\"evenodd\"><g><use fill=\"#FFF\" xlink:href=\"#id-11a\"></use><path stroke=\"#FFF\" d=\"M6.5.5h25v1h-25z\"></path></g><g><use fill=\"#FFF\" xlink:href=\"#id-12b\"></use><path stroke=\"#FFF\" d=\"M6.5 6.5h25v1h-25z\"></path></g><g><use fill=\"#FFF\" xlink:href=\"#id-13c\"></use><path stroke=\"#FFF\" d=\"M6.5 12.5h25v1h-25z\"></path></g><path fill=\"#FFF\" d=\"M0 0h2v2H0zM0 6h2v2H0zM0 12h2v2H0z\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"12\" height=\"14\" viewBox=\"0 0 12 14\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#FFF\" d=\"M2.667 14L12 7 6.667 5.25 9.333 0 0 7l5.333 1.75z\"></path></svg>"
}
, function(e) {
    e.exports = "<svg width=\"24\" height=\"32\" viewBox=\"0 0 44 56\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path id=\"id-20a\" d=\"M33 0h11.2v56H33z\"></path><path id=\"id-21b\" d=\"M0 0h11.2v56H0z\"></path></defs><g fill=\"none\" fill-rule=\"evenodd\"><g><use fill=\"#FFF\" xlink:href=\"#id-20a\"></use><path stroke=\"#FFF\" d=\"M33.5.5h10.2v55H33.5z\"></path></g><g><use fill=\"#FFF\" xlink:href=\"#id-21b\"></use><path stroke=\"#FFF\" d=\"M.5.5h10.2v55H.5z\"></path></g></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"24\" height=\"32\" viewBox=\"0 0 44 56\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><path id=\"id-19a\" d=\"M44 28L0 56V0z\"></path></defs><g fill=\"none\" fill-rule=\"evenodd\"><use fill=\"#FFF\" xlink:href=\"#id-19a\"></use><path stroke=\"#FFF\" stroke-width=\"2.5\" d=\"M41.672 28L1.25 2.278v51.446L41.672 28z\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"48\" height=\"48\" viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><defs><filter x=\"-17.5%\" y=\"-12.5%\" width=\"135%\" height=\"135%\" filterUnits=\"objectBoundingBox\" id=\"id-14a\"><feOffset dy=\"2\" in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset><feGaussianBlur stdDeviation=\"2\" in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\"></feGaussianBlur><feColorMatrix values=\"0 0 0 0 0.368627451 0 0 0 0 0.396078431 0 0 0 0 0.450980392 0 0 0 0.2 0\" in=\"shadowBlurOuter1\"></feColorMatrix></filter><path d=\"M16.25 19.205V12.5h-2.5v15h2.5v-6.704L26.786 27.5v-15L16.25 19.205zM40 20c0 11.046-8.955 20-20 20C8.954 40 0 31.046 0 20S8.954 0 20 0c11.045 0 20 8.954 20 20z\" id=\"id-15b\"></path></defs><g transform=\"matrix(-1 0 0 1 44 2)\" fill=\"none\" fill-rule=\"evenodd\"><use fill=\"#000\" filter=\"url(#id-14a)\" xlink:href=\"#id-15b\"></use><use fill=\"#FFF\" xlink:href=\"#id-15b\"></use></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"60\" height=\"24\" viewBox=\"0 0 60 24\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><path fill=\"#ED0048\" d=\"M0 0h60v24H0z\"></path><text font-family=\"Graphik-Semibold, Graphik\" font-size=\"12\" font-weight=\"500\" letter-spacing=\"1\" fill=\"#FFF\"><tspan x=\"25.574\" y=\"16\">REC</tspan></text><path stroke=\"#FFF\" stroke-width=\"2\" d=\"M8.852 13.06L12.264 16l6.425-9\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" style=\"background:#262930\" viewBox=\"0 0 32 32\"><g stroke=\"#FFF\" stroke-width=\"2\" fill=\"none\" fill-rule=\"evenodd\"><path d=\"M29.992 10.78c-2.563-6.466-9.835-11.225-17.41-9.195C6.988 3.083 3.08 7.735 2.235 13.13\"></path><path stroke-linecap=\"square\" d=\"M30.171 3.4v7.314m-7.314 0h7.314\"></path><path d=\"M2 20.6c2.04 7.613 9.843 11.845 17.419 9.815 5.592-1.498 9.501-6.15 10.345-11.545\"></path><path stroke-linecap=\"square\" d=\"M1.829 28.6v-7.314m7.314 0H1.829\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M13.371 2.895L15.104.113s.872.229 1.693.577c.822.349 1.068.5 1.563.805l-.797 3.176a9.584 9.584 0 011.87 1.89l3.188-.734S23.723 8.097 24 9.34l-2.87 1.442a9.202 9.202 0 01-.026 2.653l2.783 1.732a12.14 12.14 0 01-1.382 3.255l-3.178-.797a9.246 9.246 0 01-1.894 1.859l.743 3.193A12.181 12.181 0 0114.895 24l-1.683-2.81a9.215 9.215 0 01-2.654-.025l-1.733 2.782a12.381 12.381 0 01-1.693-.577c-.545-.231-1.068-.5-1.564-.804l.798-3.177a9.246 9.246 0 01-1.86-1.893l-3.177.739A12.295 12.295 0 010 14.952l2.8-1.675a9.196 9.196 0 01.025-2.653L.042 8.892a12.14 12.14 0 011.382-3.255l3.178.797a9.261 9.261 0 011.893-1.859l-.742-3.193A12.319 12.319 0 019.273 0l1.444 2.87a9.209 9.209 0 012.654.025zM7 12a5 5 0 1010 0 5 5 0 00-10 0z\" fill=\"#FEFEFE\" fill-rule=\"evenodd\"></path></svg>"
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" style=\"background:#262930\"><defs><path d=\"M14.97 23.453l-7.775-6.79a.518.518 0 00-.34-.126H1.064s.002-6.537 0-6.582h5.424c.132 0 .258-.05.352-.137l8.13-7.624v21.26zM6.28 9.014L0 9v8.477h6.66S14.97 25 16 25.8c0 0 .033-25.787 0-25.8-.186-.071-9.72 9.014-9.72 9.014z\" id=\"id-16a\"></path></defs><g fill=\"none\" fill-rule=\"evenodd\"><path fill=\"#FFF\" d=\"M15.33 4.14L6.663 12H0l.696 8h5.966l8.743 7.383z\"></path><g transform=\"translate(0 3)\"><use fill=\"#FFF\" xlink:href=\"#id-16a\"></use><path stroke=\"#FFF\" stroke-width=\".5\" d=\"M14.805 23.641l-7.774-6.79a.268.268 0 00-.175-.064H.813v-.25-1.696-1.595-3.28l-.012-.261h5.686a.267.267 0 00.181-.07l8.552-8.018v22.386l-.415-.362zM.25 9.224V17.212l6.41.015.168.065.398.36a1619.967 1619.967 0 004.257 3.835l.066.059c2.006 1.798 3.477 3.104 4.202 3.722a20119.022 20119.022 0 00.013-21.233 1236.223 1236.223 0 00-.007-3.534L15.7.549c-.262.227-.632.56-1.102.99-.83.758-1.95 1.8-3.286 3.057l-.099.093a1020.626 1020.626 0 00-4.76 4.506l-.174.07L.25 9.25v-.027z\"></path></g><g stroke=\"#FFF\" fill=\"#FFF\"><path d=\"M20.6 10.934a.536.536 0 00-.741.115.513.513 0 00.117.727c1.12.8 2.455 2.174 2.455 4.175 0 2.003-1.335 3.376-2.455 4.175a.515.515 0 00-.118.728.534.534 0 00.741.115c1.865-1.33 2.893-3.113 2.893-5.018 0-1.903-1.028-3.685-2.893-5.017\"></path></g></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" style=\"background:#262930\"><defs><path d=\"M14.97 23.453l-7.775-6.79a.518.518 0 00-.34-.126H1.064s.002-6.537 0-6.582h5.424c.132 0 .258-.05.352-.137l8.13-7.624v21.26zM6.28 9.014L0 9v8.477h6.66S14.97 25 16 25.8c0 0 .033-25.787 0-25.8-.186-.071-9.72 9.014-9.72 9.014z\" id=\"id-17a\"></path></defs><g fill=\"none\" fill-rule=\"evenodd\"><path fill=\"#FFF\" d=\"M15.33 4.14L6.663 12H0l.696 8h5.966l8.743 7.383z\"></path><g transform=\"translate(0 3)\"><use fill=\"#FFF\" xlink:href=\"#id-17a\"></use><path stroke=\"#FFF\" stroke-width=\".5\" d=\"M14.805 23.641l-7.774-6.79a.268.268 0 00-.175-.064H.813v-.25-1.696-1.595-3.28l-.012-.261h5.686a.267.267 0 00.181-.07l8.552-8.018v22.386l-.415-.362zM.25 9.224V17.212l6.41.015.168.065.398.36a1619.967 1619.967 0 004.257 3.835l.066.059c2.006 1.798 3.477 3.104 4.202 3.722a20119.022 20119.022 0 00.013-21.233 1236.223 1236.223 0 00-.007-3.534L15.7.549c-.262.227-.632.56-1.102.99-.83.758-1.95 1.8-3.286 3.057l-.099.093a1020.626 1020.626 0 00-4.76 4.506l-.174.07L.25 9.25v-.027z\"></path></g><g stroke=\"#FFF\" fill=\"#FFF\"><path d=\"M23.3 7.67a.538.538 0 00-.747.07.515.515 0 00.071.734c2.32 1.88 3.818 4.815 3.818 7.477 0 2.656-1.499 5.592-3.818 7.478a.514.514 0 00-.07.733.536.536 0 00.747.07c2.552-2.077 4.202-5.327 4.202-8.28 0-2.96-1.65-6.211-4.204-8.281\"></path><path d=\"M20.6 10.934a.536.536 0 00-.741.115.513.513 0 00.117.727c1.12.8 2.455 2.174 2.455 4.175 0 2.003-1.335 3.376-2.455 4.175a.515.515 0 00-.118.728.534.534 0 00.741.115c1.865-1.33 2.893-3.113 2.893-5.018 0-1.903-1.028-3.685-2.893-5.017\"></path></g></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" style=\"background:#262930\"><defs><path d=\"M14.97 23.453l-7.775-6.79a.518.518 0 00-.34-.126H1.064s.002-6.537 0-6.582h5.424c.132 0 .258-.05.352-.137l8.13-7.624v21.26zM6.28 9.014L0 9v8.477h6.66S14.97 25 16 25.8c0 0 .033-25.787 0-25.8-.186-.071-9.72 9.014-9.72 9.014z\" id=\"id-18a\"></path></defs><g fill=\"none\" fill-rule=\"evenodd\"><path fill=\"#FFF\" d=\"M15.33 4.14L6.663 12H0l.696 8h5.966l8.743 7.383z\"></path><g transform=\"translate(0 3)\"><use fill=\"#FFF\" xlink:href=\"#id-18a\"></use><path stroke=\"#FFF\" stroke-width=\".5\" d=\"M14.805 23.641l-7.774-6.79a.268.268 0 00-.175-.064H.813v-.25-1.696-1.595-3.28l-.012-.261h5.686a.267.267 0 00.181-.07l8.552-8.018v22.386l-.415-.362zM.25 9.224V17.212l6.41.015.168.065.398.36a1619.967 1619.967 0 004.257 3.835l.066.059c2.006 1.798 3.477 3.104 4.202 3.722a20119.022 20119.022 0 00.013-21.233 1236.223 1236.223 0 00-.007-3.534L15.7.549c-.262.227-.632.56-1.102.99-.83.758-1.95 1.8-3.286 3.057l-.099.093a1020.626 1020.626 0 00-4.76 4.506l-.174.07L.25 9.25v-.027z\"></path></g><g stroke=\"#FFF\" fill=\"#FFF\"><path d=\"M26.653 5.054a.538.538 0 00-.748.05.514.514 0 00.05.735c2.86 2.454 4.5 6.14 4.5 10.112 0 3.973-1.64 7.659-4.5 10.113a.514.514 0 00-.05.735.534.534 0 00.748.05c3.09-2.653 4.862-6.625 4.862-10.898s-1.772-8.245-4.862-10.897\"></path><path d=\"M23.3 7.67a.538.538 0 00-.747.07.515.515 0 00.071.734c2.32 1.88 3.818 4.815 3.818 7.477 0 2.656-1.499 5.592-3.818 7.478a.514.514 0 00-.07.733.536.536 0 00.747.07c2.552-2.077 4.202-5.327 4.202-8.28 0-2.96-1.65-6.211-4.204-8.281\"></path><path d=\"M20.6 10.934a.536.536 0 00-.741.115.513.513 0 00.117.727c1.12.8 2.455 2.174 2.455 4.175 0 2.003-1.335 3.376-2.455 4.175a.515.515 0 00-.118.728.534.534 0 00.741.115c1.865-1.33 2.893-3.113 2.893-5.018 0-1.903-1.028-3.685-2.893-5.017\"></path></g></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\" style=\"background:#262930\"><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M.012 12L0 11.86h6.444C7.702 10.662 15.829 2.935 16 3c.033.013 0 25.8 0 25.8-1.03-.8-9.34-8.322-9.34-8.322H0V12h.012z\" fill=\"#FFF\"></path><path d=\"M27.207 16l3.89-3.89-.708-.706-3.889 3.889-3.89-3.89-.706.708L25.793 16l-3.89 3.89.708.706 3.889-3.889 3.89 3.89.706-.708L27.207 16z\" stroke=\"#FCFCFC\" fill=\"#FCFCFC\"></path></g></svg>"
}
, function(e) {
    e.exports = "<svg width=\"100\" height=\"24\" viewBox=\"0 0 100 24\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><path fill=\"#ED0048\" d=\"M0 0h100v24H0z\"></path><text font-family=\"Graphik-Semibold, Graphik\" font-size=\"12\" font-weight=\"500\" letter-spacing=\"1\" fill=\"#FFF\"><tspan x=\"30\" y=\"16\">WILL REC</tspan></text><g transform=\"translate(8 5)\"><circle stroke=\"#FFF\" stroke-width=\"1.5\" cx=\"7.5\" cy=\"7.5\" r=\"6.75\"></circle><path fill=\"#FFF\" d=\"M6.429 4.286H7.5V7.5H6.429z\"></path><path fill=\"#FFF\" d=\"M6.429 4.286H7.5V7.5H6.429z\"></path><path fill=\"#FFF\" d=\"M9.704 8.485l-.473.818-2.72-1.717.472-.818z\"></path><path fill=\"#FFF\" d=\"M9.704 8.485l-.473.818-2.72-1.717.472-.818z\"></path><path fill=\"#FFF\" d=\"M9.704 8.485l-.473.818-2.72-1.717.472-.818z\"></path></g><g transform=\"translate(8 5)\"><circle stroke=\"#FFF\" stroke-width=\"1.5\" cx=\"7.5\" cy=\"7.5\" r=\"6.75\"></circle><path fill=\"#FFF\" d=\"M6.429 4.286H7.5V7.5H6.429z\"></path><path fill=\"#FFF\" d=\"M6.429 4.286H7.5V7.5H6.429z\"></path><path fill=\"#FFF\" d=\"M9.704 8.485l-.473.818-2.72-1.717.472-.818z\"></path><path fill=\"#FFF\" d=\"M9.704 8.485l-.473.818-2.72-1.717.472-.818z\"></path><path fill=\"#FFF\" d=\"M9.704 8.485l-.473.818-2.72-1.717.472-.818z\"></path></g></g></svg>"
}
, function(e, t, i) {
    var n = i(192)
      , r = i(10);
    e.exports = function e(t, i, s, a, o) {
        return t === i || (null == t || null == i || !r(t) && !r(i) ? t != t && i != i : n(t, i, s, a, e, o))
    }
}
, function(e, t, i) {
    var n = i(56)
      , r = i(73)
      , s = i(198)
      , a = i(201)
      , o = i(211)
      , l = i(30)
      , d = i(43)
      , u = i(44)
      , c = "[object Object]"
      , h = Object.prototype.hasOwnProperty;
    e.exports = function(e, t, i, p, _, f) {
        var g = l(e)
          , m = l(t)
          , y = g ? "[object Array]" : o(e)
          , v = m ? "[object Array]" : o(t)
          , E = (y = "[object Arguments]" == y ? c : y) == c
          , b = (v = "[object Arguments]" == v ? c : v) == c
          , T = y == v;
        if (T && d(e)) {
            if (!d(t))
                return !1;
            g = !0,
            E = !1
        }
        if (T && !E)
            return f || (f = new n),
            g || u(e) ? r(e, t, i, p, _, f) : s(e, t, y, i, p, _, f);
        if (!(1 & i)) {
            var S = E && h.call(e, "__wrapped__")
              , A = b && h.call(t, "__wrapped__");
            if (S || A) {
                var P = S ? e.value() : e
                  , w = A ? t.value() : t;
                return f || (f = new n),
                _(P, w, i, p, f)
            }
        }
        return !!T && (f || (f = new n),
        a(e, t, i, p, _, f))
    }
}
, function(e, t, i) {
    var n = i(59)
      , r = i(194)
      , s = i(195);
    function a(e) {
        var t = -1
          , i = null == e ? 0 : e.length;
        for (this.__data__ = new n; ++t < i; ) {
            this.add(e[t])
        }
    }
    a.prototype.add = a.prototype.push = r,
    a.prototype.has = s,
    e.exports = a
}
, function(e) {
    e.exports = function(e) {
        return this.__data__.set(e, "__lodash_hash_undefined__"),
        this
    }
}
, function(e) {
    e.exports = function(e) {
        return this.__data__.has(e)
    }
}
, function(e) {
    e.exports = function(e, t) {
        for (var i = -1, n = null == e ? 0 : e.length; ++i < n; ) {
            if (t(e[i], i, e))
                return !0
        }
        return !1
    }
}
, function(e) {
    e.exports = function(e, t) {
        return e.has(t)
    }
}
, function(e, t, i) {
    var n = i(39)
      , r = i(62)
      , s = i(11)
      , a = i(73)
      , o = i(199)
      , l = i(200)
      , d = n ? n.prototype : void 0
      , u = d ? d.valueOf : void 0;
    e.exports = function(e, t, i, n, d, c, h) {
        switch (i) {
        case "[object DataView]":
            if (e.byteLength != t.byteLength || e.byteOffset != t.byteOffset)
                return !1;
            e = e.buffer,
            t = t.buffer;
        case "[object ArrayBuffer]":
            return !(e.byteLength != t.byteLength || !c(new r(e), new r(t)));
        case "[object Boolean]":
        case "[object Date]":
        case "[object Number]":
            return s(+e, +t);
        case "[object Error]":
            return e.name == t.name && e.message == t.message;
        case "[object RegExp]":
        case "[object String]":
            return e == t + "";
        case "[object Map]":
            var p = o;
        case "[object Set]":
            var _ = 1 & n;
            if (p || (p = l),
            e.size != t.size && !_)
                return !1;
            var f = h.get(e);
            if (f)
                return f == t;
            n |= 2,
            h.set(e, t);
            var g = a(p(e), p(t), n, d, c, h);
            return h.delete(e),
            g;
        case "[object Symbol]":
            if (u)
                return u.call(e) == u.call(t);
        }
        return !1
    }
}
, function(e) {
    e.exports = function(e) {
        var t = -1
          , i = Array(e.size);
        return e.forEach(function(e, n) {
            i[++t] = [n, e]
        }),
        i
    }
}
, function(e) {
    e.exports = function(e) {
        var t = -1
          , i = Array(e.size);
        return e.forEach(function(e) {
            i[++t] = e
        }),
        i
    }
}
, function(e, t, i) {
    var n = i(202)
      , r = Object.prototype.hasOwnProperty;
    e.exports = function(e, t, i, s, a, o) {
        var l = 1 & i
          , d = n(e)
          , u = d.length;
        if (u != n(t).length && !l)
            return !1;
        for (var c = u; c--; ) {
            var h = d[c];
            if (!(l ? h in t : r.call(t, h)))
                return !1
        }
        var p = o.get(e);
        if (p && o.get(t))
            return p == t;
        var _ = !0;
        o.set(e, t),
        o.set(t, e);
        for (var f = l; ++c < u; ) {
            var g = e[h = d[c]]
              , m = t[h];
            if (s)
                var y = l ? s(m, g, h, t, e, o) : s(g, m, h, e, t, o);
            if (!(void 0 === y ? g === m || a(g, m, i, s, o) : y)) {
                _ = !1;
                break
            }
            f || (f = "constructor" == h)
        }
        if (_ && !f) {
            var v = e.constructor
              , E = t.constructor;
            v == E || !("constructor"in e) || !("constructor"in t) || "function" == typeof v && v instanceof v && "function" == typeof E && E instanceof E || (_ = !1)
        }
        return o.delete(e),
        o.delete(t),
        _
    }
}
, function(e, t, i) {
    var n = i(203)
      , r = i(205)
      , s = i(208);
    e.exports = function(e) {
        return n(e, s, r)
    }
}
, function(e, t, i) {
    var n = i(204)
      , r = i(30);
    e.exports = function(e, t, i) {
        var s = t(e);
        return r(e) ? s : n(s, i(e))
    }
}
, function(e) {
    e.exports = function(e, t) {
        for (var i = -1, n = t.length, r = e.length; ++i < n; ) {
            e[r + i] = t[i]
        }
        return e
    }
}
, function(e, t, i) {
    var n = i(206)
      , r = i(207)
      , s = Object.prototype.propertyIsEnumerable
      , a = Object.getOwnPropertySymbols
      , o = a ? function(e) {
        return null == e ? [] : (e = Object(e),
        n(a(e), function(t) {
            return s.call(e, t)
        }))
    }
    : r;
    e.exports = o
}
, function(e) {
    e.exports = function(e, t) {
        for (var i = -1, n = null == e ? 0 : e.length, r = 0, s = []; ++i < n; ) {
            var a = e[i];
            t(a, i, e) && (s[r++] = a)
        }
        return s
    }
}
, function(e) {
    e.exports = function() {
        return []
    }
}
, function(e, t, i) {
    var n = i(69)
      , r = i(209)
      , s = i(31);
    e.exports = function(e) {
        return s(e) ? n(e) : r(e)
    }
}
, function(e, t, i) {
    var n = i(42)
      , r = i(210)
      , s = Object.prototype.hasOwnProperty;
    e.exports = function(e) {
        if (!n(e))
            return r(e);
        var t = [];
        for (var i in Object(e)) {
            s.call(e, i) && "constructor" != i && t.push(i)
        }
        return t
    }
}
, function(e, t, i) {
    var n = i(64)(Object.keys, Object);
    e.exports = n
}
, function(e, t, i) {
    var n = i(212)
      , r = i(37)
      , s = i(213)
      , a = i(214)
      , o = i(215)
      , l = i(12)
      , d = i(58)
      , u = d(n)
      , c = d(r)
      , h = d(s)
      , p = d(a)
      , _ = d(o)
      , f = l;
    (n && "[object DataView]" != f(new n(new ArrayBuffer(1))) || r && "[object Map]" != f(new r) || s && "[object Promise]" != f(s.resolve()) || a && "[object Set]" != f(new a) || o && "[object WeakMap]" != f(new o)) && (f = function(e) {
        var t = l(e)
          , i = "[object Object]" == t ? e.constructor : void 0
          , n = i ? d(i) : "";
        if (n)
            switch (n) {
            case u:
                return "[object DataView]";
            case c:
                return "[object Map]";
            case h:
                return "[object Promise]";
            case p:
                return "[object Set]";
            case _:
                return "[object WeakMap]";
            }
        return t
    }
    ),
    e.exports = f
}
, function(e, t, i) {
    var n = i(7)(i(3), "DataView");
    e.exports = n
}
, function(e, t, i) {
    var n = i(7)(i(3), "Promise");
    e.exports = n
}
, function(e, t, i) {
    var n = i(7)(i(3), "Set");
    e.exports = n
}
, function(e, t, i) {
    var n = i(7)(i(3), "WeakMap");
    e.exports = n
}
, function() {}
, function() {}
, function(e, t, i) {
    e.exports = i(219)()
}
, function(e, t, i) {
    "use strict";
    var n = i(220);
    function r() {}
    function s() {}
    s.resetWarningCache = r,
    e.exports = function() {
        function e(e, t, i, r, s, a) {
            if (a !== n) {
                var o = new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");
                throw o.name = "Invariant Violation",
                o
            }
        }
        function t() {
            return e
        }
        e.isRequired = e;
        var i = {
            array: e,
            bool: e,
            func: e,
            number: e,
            object: e,
            string: e,
            symbol: e,
            any: e,
            arrayOf: t,
            element: e,
            elementType: e,
            instanceOf: t,
            node: e,
            objectOf: t,
            oneOf: t,
            oneOfType: t,
            shape: t,
            exact: t,
            checkPropTypes: s,
            resetWarningCache: r
        };
        return i.PropTypes = i,
        i
    }
}
, function(e) {
    "use strict";
    e.exports = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"
}
, function() {}
, function(e, t, i) {
    "use strict";
    i.r(t),
    i.d(t, "default", function() {
        return gd
    });
    var n = {};
    i.r(n),
    i.d(n, "setViewMode", function() {
        return ps
    }),
    i.d(n, "setViewModeToNormal", function() {
        return _s
    }),
    i.d(n, "setViewModeToFullScreen", function() {
        return fs
    }),
    i.d(n, "setViewModeToMinimized", function() {
        return gs
    });
    var r = {};
    i.r(r),
    i.d(r, "startPlayer", function() {
        return ys
    }),
    i.d(r, "closePlayer", function() {
        return vs
    }),
    i.d(r, "setCastMode", function() {
        return Es
    }),
    i.d(r, "setUserInteractionTime", function() {
        return bs
    });
    var s = {};
    i.r(s),
    i.d(s, "showLongTimeTips", function() {
        return Ss
    }),
    i.d(s, "hideLongTimeTips", function() {
        return As
    }),
    i.d(s, "showLoadingView", function() {
        return Ps
    }),
    i.d(s, "hideLoadingView", function() {
        return ws
    }),
    i.d(s, "showCaptionStylePanel", function() {
        return ks
    }),
    i.d(s, "hideCaptionStylePanel", function() {
        return Cs
    }),
    i.d(s, "showControlBar", function() {
        return Is
    }),
    i.d(s, "hideControlBar", function() {
        return Rs
    });
    var a = {};
    i.r(a),
    i.d(a, "setPlayerError", function() {
        return Ds
    });
    var o = {};
    i.r(o),
    i.d(o, "setEndCredit", function() {
        return Ms
    }),
    i.d(o, "setEndedReplay", function() {
        return Os
    });
    var l = {};
    i.r(l),
    i.d(l, "setPlayerResolution", function() {
        return xs
    }),
    i.d(l, "setPlayerScalePoint", function() {
        return Ns
    });
    var d = {};
    i.r(d),
    i.d(d, "setCaptionDefaultOn", function() {
        return Vs
    }),
    i.d(d, "setCaptionDefaultLanguage", function() {
        return Bs
    }),
    i.d(d, "setAllLanguages", function() {
        return Fs
    }),
    i.d(d, "setCurrentCaptionText", function() {
        return Hs
    }),
    i.d(d, "turnOnCaption", function() {
        return Ws
    }),
    i.d(d, "turnOffCaption", function() {
        return js
    });
    var u = {};
    i.r(u),
    i.d(u, "setUserData", function() {
        return Gs
    });
    var c = {};
    i.r(c),
    i.d(c, "setCaptionStyle", function() {
        return zs
    }),
    i.d(c, "setCaptionTextColor", function() {
        return qs
    }),
    i.d(c, "setCaptionTextOpaque", function() {
        return Ys
    }),
    i.d(c, "setCaptionBackgroundColor", function() {
        return Qs
    }),
    i.d(c, "setCaptionBackgroundOpaque", function() {
        return $s
    }),
    i.d(c, "setCaptionFont", function() {
        return Xs
    }),
    i.d(c, "setCaptionFontSize", function() {
        return Js
    }),
    i.d(c, "setCaptionFontList", function() {
        return Zs
    }),
    i.d(c, "setCaptionTransitionMode", function() {
        return ea
    }),
    i.d(c, "setCaptionEffect", function() {
        return ta
    });
    i(47);
    var h = i(4)
      , p = i.n(h);
    var _ = function(_p$a) {
        _inheritsLoose(_, _p$a);
        function _() {
            var _this;
            _this = _p$a.call(this) || this,
            _this.on("error", function() {});
            return _this
        }
        return _
    }(p.a);
    _.prototype.off = p.a.prototype.removeListener,
    _.prototype.trigger = p.a.prototype.emit;
    var f = _;
    var g = function() {
        function g(e) {
            this._data = e,
            this._serialize(),
            this.has = this.has.bind(this)
        }
        var _proto = g.prototype;
        _proto._serialize = function _serialize() {
            var _this2 = this;
            Object.keys(this._data).forEach(function(e) {
                _this2[e] = !0
            })
        }
        ;
        _proto.get = function get() {
            return this._data
        }
        ;
        _proto.has = function has(e) {
            var _this3 = this;
            return /string/i.test(typeof e) && (e = e.split(",")),
            !!Array.isArray(e) && e.every(function(e) {
                return _this3[e = e.trim()]
            })
        }
        ;
        return g
    }();
    var m = function(_f) {
        _inheritsLoose(m, _f);
        function m() {
            var _this4;
            _this4 = _f.call(this) || this,
            _this4._updateEventName = "update",
            _this4.setMaxListeners(30),
            _this4._data = {};
            return _this4
        }
        var _proto2 = m.prototype;
        _proto2.set = function set(e) {
            var t = Object.assign({}, this._data);
            this._data = e || {},
            this.notify(t, Object.assign({}, t, e, {
                isReset: !0
            }))
        }
        ;
        _proto2.get = function get() {
            return this._data
        }
        ;
        _proto2.create = function create(e) {
            var t = Object.create(Object.getPrototypeOf(this));
            return t._data = e,
            t
        }
        ;
        _proto2.notify = function notify(e, t) {
            var i = Object.assign({}, this._data);
            this.trigger(this._updateEventName, i, e || i, new g(t))
        }
        ;
        _proto2.update = function update(e) {
            var t = Object.assign({}, this._data);
            Object.assign(this._data, e),
            this.notify(t, e)
        }
        ;
        _proto2.onUpdated = function onUpdated(e) {
            this.on(this._updateEventName, e)
        }
        ;
        _proto2.offUpdated = function offUpdated(e) {
            this.off(this._updateEventName, e)
        }
        ;
        m.defineProxyProperties = function defineProxyProperties(e) {
            Object.keys(e).forEach(function(t) {
                var i = e[t];
                e[t] = {
                    configurable: !0,
                    get: function get() {
                        return this._data[t]
                    },
                    set: i ? function(e) {
                        this.update({
                            [t]: e
                        })
                    }
                    : void 0
                }
            }),
            Object.defineProperties(this.prototype, e)
        }
        ;
        return m
    }(f);
    var y = function() {
        function y() {
            this._store = {}
        }
        var _proto3 = y.prototype;
        _proto3.getItem = function getItem(e) {
            return this._store[e]
        }
        ;
        _proto3.setItem = function setItem(e, t) {
            return this._store[e] = t
        }
        ;
        return y
    }();
    var v = function() {
        function v(e) {
            if (this._store = e,
            !e)
                return new y
        }
        var _proto4 = v.prototype;
        _proto4.getItem = function getItem(e, t) {
            var i = this._store.getItem(e);
            if (null == i)
                return t;
            try {
                return JSON.parse(i)
            } catch (e) {
                return null
            }
        }
        ;
        _proto4.setItem = function setItem(e, t) {
            try {
                this._store.setItem(e, JSON.stringify(t))
            } catch (e) {}
        }
        ;
        return v
    }();
    var E = new v(window.localStorage)
      , b = new v(window.sessionStorage);
    var T = E;
    var S = {
        init: function init() {
            this.browser = this.searchString(this.dataBrowser) || "Unknown",
            this.version = this.searchVersion(navigator.userAgent) || this.searchVersion(navigator.appVersion) || "Unknown",
            this.OS = this.searchString(this.dataOS) || "Unknown",
            this.OSVersion = this.searchOSVersion(navigator.userAgent) || "Unknown"
        },
        searchString: function searchString(e) {
            for (var _t3 = 0; _t3 < e.length; _t3++) {
                var _i2 = e[_t3].string
                  , _n2 = e[_t3].prop;
                if (this.versionSearchString = e[_t3].versionSearch || e[_t3].identity,
                _i2) {
                    if (-1 != _i2.indexOf(e[_t3].subString))
                        return e[_t3].identity
                } else if (_n2)
                    return e[_t3].identity
            }
        },
        searchVersion: function searchVersion(e) {
            var t = e.indexOf(this.versionSearchString);
            if (-1 != t)
                return parseFloat(e.substring(t + this.versionSearchString.length + 1))
        },
        searchOSVersion: function searchOSVersion(e) {
            var t = null;
            if (/^Mozilla\/\d+\.\d+ \(([^)]+)\)/.test(e)) {
                var _e3 = RegExp.$1;
                t = /Windows NT ([^;]+)/.test(_e3) || /Mac OS X ([^;]+)/.test(_e3) ? RegExp.$1 : _e3
            }
            return t
        },
        dataBrowser: [{
            string: navigator.userAgent,
            subString: "Edge",
            identity: "Edge"
        }, {
            string: navigator.userAgent,
            subString: "Chrome",
            identity: "Chrome"
        }, {
            string: navigator.userAgent,
            subString: "OmniWeb",
            versionSearch: "OmniWeb/",
            identity: "OmniWeb"
        }, {
            string: navigator.vendor,
            subString: "Apple",
            identity: "Safari",
            versionSearch: "Version"
        }, {
            prop: window.opera,
            identity: "Opera"
        }, {
            string: navigator.vendor,
            subString: "iCab",
            identity: "iCab"
        }, {
            string: navigator.vendor,
            subString: "KDE",
            identity: "Konqueror"
        }, {
            string: navigator.userAgent,
            subString: "Firefox",
            identity: "Firefox"
        }, {
            string: navigator.vendor,
            subString: "Camino",
            identity: "Camino"
        }, {
            string: navigator.userAgent,
            subString: "Netscape",
            identity: "Netscape"
        }, {
            string: navigator.userAgent,
            subString: "MSIE",
            identity: "Explorer",
            versionSearch: "MSIE"
        }, {
            string: navigator.userAgent,
            subString: "Trident",
            identity: "Explorer",
            versionSearch: "rv"
        }, {
            string: navigator.userAgent,
            subString: "Gecko",
            identity: "Mozilla",
            versionSearch: "rv"
        }, {
            string: navigator.userAgent,
            subString: "Mozilla",
            identity: "Netscape",
            versionSearch: "Mozilla"
        }],
        dataOS: [{
            string: navigator.platform,
            subString: "Win",
            identity: "Windows"
        }, {
            string: navigator.platform,
            subString: "Mac",
            identity: "Mac"
        }, {
            string: navigator.userAgent,
            subString: "iPhone",
            identity: "iPhone/iPod"
        }, {
            string: navigator.userAgent,
            subString: "iPad",
            identity: "iPad"
        }, {
            string: navigator.platform,
            subString: "Linux",
            identity: "Linux"
        }]
    };
    S.init();
    var A = {
        os: S.OS,
        osVersion: S.OSVersion,
        browser: S.browser,
        version: S.version
    };
    "Unknown" != A.browser && (A[A.browser.toLowerCase()] = !0),
    A.chrome || A.safari ? (A.webkit = !0,
    A.safari = !0) : A.firefox ? A.mozilla = !0 : A.explorer && (A.msie = !0);
    var P = A;
    var C = !0
      , H = "include";
    var W = {
        APP_NAME: "Hulu Web",
        IS_PROD: !0,
        IS_QA: !1,
        IS_SMOKE: !1,
        IS_EMBED: !1,
        ENV: "prod",
        SITE_HOST_URL: "https://www.hulu.com",
        FIXED_VERSION: "3.0",
        COMPILED_VERSION: "306317",
        PLAYER_VERSION: "web-1.31.0-306317",
        APP_VERSION: "1.31.0",
        DISTRO: "hulu",
        DISTRO_PLATFORM: "hulu",
        THIRD_PARTY_BEACON_PLATFORM: "hulu",
        COMSCORE_BEACON_PLATFORM: "PC",
        LANGUAGE: "en",
        OS: [P.os, P.osVersion].join(" "),
        CLIENT: [P.browser, P.version].join(" "),
        BROWSER: P.browser,
        DEVICE_PLATFORM: "HTML",
        REGION: "US",
        PLAYER_TYPE: "site",
        ORIGIN: [window.location.protocol, window.location.host].join("//"),
        USE_SSL: "https:" == window.location.protocol,
        HOST: window.location.host,
        DEVICE_ID: 1,
        DEEJAY_DEVICE_ID: 190,
        DEEJAY_DEVICE_ID_FAIRPLAY: 191,
        MBR_DEBUG: !1,
        FADE_OUT_TIME: 200,
        FADE_IN_TIME: 200,
        DEEJAY_KEY_VERSION: 1,
        DEEJAY_KEY: "6ebfc84f3c304217b20fd9a66cb5957f",
        DELAY_FADE_OUT_TIME: 3e3,
        MAX_BUFFERED_SECS: 60,
        MAX_BUFFERED_KILOBYTES: null,
        IS_HAAP: !1,
        DONUT_ENABLE: !1,
        FLIGHT_NAME: "player",
        ANT_ENABLE: !1,
        KEY_SYSTEMS: ["com.apple.fps.1_0", "com.widevine.alpha", "com.microsoft.playready.software", "com.microsoft.playready", "com.youtube.playready", "webkit-org.w3.clearkey", "org.w3.clearkey"],
        HEIMDALL_VERSION: "3.4",
        COOKIE_ENABLE: C,
        FETCH_CREDENTIALS: H,
        XLINK_ENABLE: !1,
        ALL_CDN_ENABLE: !0,
        COLLAPSE_BREAKS: !1,
        STREAM_TYPE: "all",
        PLAYER_FRAMEWORK_VERSION: "1.4.3",
        updateDistro: function updateDistro(e) {
            this.DISTRO = e,
            this.IS_HAAP = -1 != ["fbc", "fbctest", "southpark"].indexOf(this.DISTRO.toLowerCase())
        },
        updateDistroPlatfrom: function updateDistroPlatfrom(e) {
            this.DISTRO_PLATFORM = e
        },
        updateIsEmbed: function updateIsEmbed(e) {
            this.IS_EMBED = e
        },
        updateFairPlay: function updateFairPlay() {
            this.DEEJAY_DEVICE_ID = this.DEEJAY_DEVICE_ID_FAIRPLAY
        },
        consumeAppConfiguration(e) {
            this.IS_NONSUB = Boolean(e.isNonSub),
            this.ENABLE_AD_OPS = Boolean(e.enabledAdsOverride) || !this.IS_PROD,
            this.LIVE_GUIDE_V2_ENABLED = !0
        }
    };
    var G = i(1);
    var K = void 0 !== document.cookie;
    var z = {
        Keys: {
            COMPUTER_GUID: "guid",
            BEACON_SEQ: "beacon_seq",
            VISIT: "HULU_VISIT",
            PROFILE_ID: "_hulu_pid"
        },
        getCookie: function getCookie(e) {
            if (K = K || void 0 !== document.cookie,
            null != e && K) {
                var _t4 = document.cookie.split(";");
                for (var _i3 = 0; _i3 < _t4.length; _i3++) {
                    var _n3 = _t4[_i3].split("=");
                    if (_n3.length > 1 && e.toLowerCase() == decodeURIComponent(_n3[0].toLowerCase().trim()))
                        return decodeURIComponent(_n3[1].trim())
                }
            }
            return null
        },
        setCookie: function setCookie(e, t, i) {
            if (!K)
                return;
            if (void 0 === t)
                return G.c.warn("the cookie value is not defined correctly!"),
                !1;
            i || (i = {});
            var n = z._getSubDomain();
            if (t = encodeURIComponent(e) + "=" + encodeURIComponent(t),
            !i.sessionOnly) {
                var _e4 = new Date;
                i.seconds ? _e4.setTime(_e4.getTime() + 1e3 * i.seconds) : _e4.setMonth(_e4.getMonth() + 1),
                t += "; expires=" + _e4.toUTCString()
            }
            var r = i.path;
            return r || (r = "/"),
            t += "; path=" + r,
            null != n && (t += "; domain=" + n),
            document.cookie = t,
            !0
        },
        _getSubDomain: function _getSubDomain() {
            var e = null;
            return e = W.IS_PROD ? ".hulu.com" : ".huluqa.com",
            e
        }
    }
      , q = [];
    var Y = -1;
    var Q = {
        encode: function encode(e) {
            return (encodeURIComponent || escape)(e)
        },
        decode: function decode(e) {
            return (decodeURIComponent || unescape)(e)
        },
        toPercentage: function toPercentage(e) {
            return (100 * e).toFixed(3) + "%"
        },
        formatCalc: function formatCalc(e, t) {
            return "calc(" + Q.toPercentage(e) + " - " + t + "px)"
        },
        updateComputerGuid: function updateComputerGuid(e) {
            return e = e || z.getCookie(z.Keys.COMPUTER_GUID) || Q.generateGuid(),
            z.setCookie(z.Keys.COMPUTER_GUID, e, {
                seconds: 31536e4
            }),
            e
        },
        generateGuid: function generateGuid() {
            var e = "";
            for (var _t5 = 0; _t5 < 8; _t5++) {
                e += Q.generateShortRandomString(),
                _t5 >= 1 && _t5 <= 4 && (e += "-")
            }
            return e.toUpperCase()
        },
        uuid(e) {
            var t = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g, function(e) {
                var t = 16 * Math.random() | 0;
                return ("x" === e ? t : 3 & t | 8).toString(16)
            });
            return e ? t.substr(0, e) : t
        },
        generateShortRandomString: function generateShortRandomString() {
            return (65536 * (1 + Math.random()) | 0).toString(16).substring(1)
        },
        isNullOrEmpty: function isNullOrEmpty(e) {
            return "" == e || null == e || null == e
        },
        isFairPlayHlsSupported: function isFairPlayHlsSupported() {
            return window.WebKitMediaKeys && window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0", "video/mp4")
        },
        getHostName: function getHostName(e) {
            return (e = (e = e.replace("http://", "")).replace("https://", "")).indexOf("/") < 0 ? e : e.substring(0, e.indexOf("/"))
        },
        getParameterInUrlByName: function getParameterInUrlByName(e, t) {
            t || (t = window.location.href),
            e = e.replace(/[[\]]/g, "\\$&");
            var i = new RegExp("[?&]" + e + "(=([^&#]*)|&|#|$)","i").exec(t);
            return i ? i[2] ? decodeURIComponent(i[2].replace(/\+/g, " ")) : "" : null
        },
        pingImage: function pingImage(e, t) {
            var i = Q.getReuseImageElement();
            i.removeAttribute("src"),
            i.crossOrigin = t ? null : "anonymous",
            i.src = e
        },
        getReuseImageElement: function getReuseImageElement() {
            Y++,
            Y >= 50 && (Y = 0);
            var e = q[Y];
            return e || (e = new Image,
            q[Y] = e),
            e
        },
        loadImage: function loadImage(e, t) {
            if (t === void 0) {
                t = 1
            }
            return new Promise(function(i, n) {
                if (!e)
                    return void n(new Error("src missing"));
                var r = new Image
                  , s = function() {
                    return i(e)
                }
                  , a = function(i) {
                    t < 1 ? (r.onload = null,
                    r.onerror = null,
                    n(i)) : (t--,
                    r = new Image,
                    r.onload = s,
                    r.onerror = a,
                    r.src = e)
                };
                r.onload = s,
                r.onerror = a,
                r.src = e
            }
            )
        },
        getCacheBuster: function getCacheBuster() {
            return new Date().getTime().toString() + "_" + Math.round(1e3 * Math.random())
        },
        formatFrameRate: function formatFrameRate(e) {
            if (e && "string" == typeof e) {
                var _e$split$map = e.split("/").map(function(e) {
                    return parseInt(e, 10)
                })
                  , _e$split$map2 = _slicedToArray(_e$split$map, 2)
                  , _t6 = _e$split$map2[0]
                  , _i4 = _e$split$map2[1];
                return _t6 / (_i4 || 1)
            }
            return e || 0
        },
        getOffset: function getOffset(e) {
            return {
                top: e.top + window.pageYOffset - document.documentElement.clientTop,
                left: e.left + window.pageXOffset - document.documentElement.clientLeft
            }
        },
        param: function param(e) {
            if (e === void 0) {
                e = {}
            }
            return Object.keys(e).sort().reduce(function(t, i) {
                var n = e[i];
                return null != n && t.push(encodeURIComponent(i) + "=" + encodeURIComponent(n)),
                t
            }, []).join("&")
        },
        hashCode: function hashCode(e) {
            var t = 0;
            for (var _i5 = 0; _i5 < e.length; _i5++) {
                t = (t << 5) - t + e.charCodeAt(_i5),
                t &= t
            }
            return t
        }
    };
    var $ = new (function(_m) {
        _inheritsLoose(_class, _m);
        function _class() {
            var _this5;
            _this5 = _m.call(this) || this,
            _this5._data = {
                isLiveTV: !1,
                computerGuid: Q.updateComputerGuid(),
                sessionGuid: Q.generateGuid(),
                deviceAdId: Q.generateGuid(),
                limitAdTracking: !1,
                instanceId: Q.generateGuid(),
                donutAssignments: "",
                pageUrl: document.location.href,
                abRules: {}
            };
            var e = b.getItem("hulu$sauron_device_identifier");
            e || (e = _this5.computerGuid + ":" + Q.generateShortRandomString(),
            b.setItem("hulu$sauron_device_identifier", e)),
            _this5.update({
                sauronDeviceIdentifier: e
            });
            return _this5
        }
        _createClass(_class, [{
            key: "computerGuid",
            get: function get() {
                return this._data.computerGuid
            }
        }, {
            key: "sessionGuid",
            get: function get() {
                return this._data.sessionGuid
            }
        }, {
            key: "sauronDeviceIdentifier",
            get: function get() {
                return this._data.sauronDeviceIdentifier
            }
        }, {
            key: "latitude",
            get: function get() {
                return this._data.latitude
            }
        }, {
            key: "longitude",
            get: function get() {
                return this._data.longitude
            }
        }, {
            key: "deviceAdId",
            get: function get() {
                return this._data.deviceAdId
            }
        }, {
            key: "limitAdTracking",
            get: function get() {
                return this._data.limitAdTracking
            }
        }, {
            key: "collectionId",
            get: function get() {
                return this._data.collectionId
            }
        }, {
            key: "eabId",
            get: function get() {
                return this._data.eabId
            }
        }, {
            key: "entityId",
            get: function get() {
                return this.eabId.split("::")[1]
            }
        }, {
            key: "assetId",
            get: function get() {
                return this.eabId.split("::")[2]
            }
        }, {
            key: "bundleId",
            get: function get() {
                return this.eabId.split("::")[3]
            }
        }, {
            key: "channelId",
            get: function get() {
                return this._data.channelId
            }
        }, {
            key: "donutAssignments",
            get: function get() {
                return this._data.donutAssignments
            }
        }, {
            key: "referralUrl",
            get: function get() {
                return this._data.referralUrl
            }
        }, {
            key: "pageUrl",
            get: function get() {
                return this._data.pageUrl
            }
        }, {
            key: "pointerMonitorState",
            get: function get() {
                return this._data.pointerMonitorState
            },
            set: function set(e) {
                this.update({
                    pointerMonitorState: e
                })
            }
        }, {
            key: "isLiveTV",
            get: function get() {
                return this._data.isLiveTV
            }
        }, {
            key: "instanceId",
            get: function get() {
                return this._data.instanceId
            }
        }, {
            key: "abRules",
            get: function get() {
                return this._data.abRules || {}
            }
        }]);
        return _class
    }(m));
    var X = Object.assign({
        SAMPLE_AD_START: "TrackingConstants.Type.SAMPLE_AD_START",
        SAMPLE_AD_STOPPED: "TrackingConstants.Type.SAMPLE_AD_STOPPED",
        SAMPLE_AD_GET_ASSET: "TrackingConstants.Type.SAMPLE_AD_GET_ASSET",
        SAMPLE_AD_GET_PLAYLIST: "TrackingConstants.Type.SAMPLE_AD_GET_PLAYLIST",
        SAMPLE_FETCH_VAST_URL: "TrackingConstants.Type.SAMPLE_FETCH_VAST_URL",
        SAMPLE_POD_START: "TrackingConstants.Type.SAMPLE_POD_START",
        SAMPLE_POD_COMPLETE: "TrackingConstants.Type.SAMPLE_POD_COMPLETE",
        HIT_REQUEST_FAILED: "TrackingConstants.Type.HIT_REQUEST_FAILED",
        SESSION_END: "TrackingConstants.Type.SESSION_END",
        RELOAD_APP_RESUME: "TrackingConstants.Type.RELOAD_APP_RESUME",
        UNEXPECTED_EXECUTION: "TrackingConstants.Type.UNEXPECTED_EXECUTION",
        AD_GET_PLAYLIST_ERROR: "TrackingConstants.Type.AD_GET_PLAYLIST_ERROR",
        AD_GET_ASSET_ERROR: "TrackingConstants.Type.AD_GET_ASSET_ERROR",
        AD_ERROR_EVENT_WHEN_PLAYBACK: "TrackingConstants.Type.AD_ERROR_EVENT_WHEN_PLAYBACK",
        AD_VPAID_EVENT_TIMEOUT: "TrackingConstants.Type.AD_VPAID_EVENT_TIMEOUT",
        AD_LINEAR_TYPE_NOT_SUPPORT: "TrackingConstants.Type.AD_LINEAR_TYPE_NOT_SUPPORT",
        FETCH_VAST_URL_ERROR: "TrackingConstants.Type.FETCH_VAST_URL_ERROR",
        LINEAR_COMPLETE_TIMEOUT: "TrackingConstants.Type.LINEAR_COMPLETE_TIMEOUT"
    }, G.b.TrackingEvent)
      , J = {
        UNKNOWN: "unknown",
        RUNTIME: "runtime",
        PLAYLIST: "playlist",
        METADATA: "metadata",
        MANIFEST: "manifest",
        CDN: "cdn",
        DRM: "drm",
        ACCESS: "access",
        ADS: "ads",
        SAMPLE: "sample"
    }
      , Z = [{
        type: X.SAMPLE_AD_START,
        category: J.SAMPLE,
        message: "SAMPLE_AD_START"
    }, {
        type: X.SAMPLE_AD_STOPPED,
        category: J.SAMPLE,
        message: "SAMPLE_AD_STOPPED"
    }, {
        type: X.SAMPLE_AD_GET_PLAYLIST,
        category: J.SAMPLE,
        message: "SAMPLE_AD_GET_PLAYLIST"
    }, {
        type: X.SAMPLE_AD_GET_ASSET,
        category: J.SAMPLE,
        message: "SAMPLE_AD_GET_ASSET"
    }, {
        type: X.SAMPLE_FETCH_VAST_URL,
        category: J.SAMPLE,
        message: "SAMPLE_FETCH_VAST_URL"
    }, {
        type: X.SAMPLE_POD_START,
        category: J.SAMPLE,
        message: "SAMPLE_POD_START"
    }, {
        type: X.SAMPLE_POD_COMPLETE,
        category: J.SAMPLE,
        message: "SAMPLE_POD_COMPLETE"
    }, {
        type: X.HIT_REQUEST_FAILED,
        category: J.ACCESS,
        message: "HIT_REQUEST_FAILED"
    }, {
        type: X.SESSION_END,
        category: J.ACCESS,
        message: "SESSION_END"
    }, {
        type: X.RELOAD_APP_RESUME,
        category: J.ACCESS,
        message: "RELOAD_APP_RESUME"
    }, {
        type: X.UNEXPECTED_EXECUTION,
        category: J.ACCESS,
        message: "UNEXPECTED_EXECUTION"
    }, {
        type: X.AD_GET_PLAYLIST_ERROR,
        category: J.ADS,
        message: "AD_GET_PLAYLIST_ERROR"
    }, {
        type: X.AD_GET_ASSET_ERROR,
        category: J.ADS,
        message: "AD_GET_ASSET_ERROR"
    }, {
        type: X.AD_ERROR_EVENT_WHEN_PLAYBACK,
        category: J.ADS,
        message: "AD_ERROR_EVENT_WHEN_PLAYBACK"
    }, {
        type: X.AD_VPAID_EVENT_TIMEOUT,
        category: J.ADS,
        message: "AD_VPAID_EVENT_TIMEOUT"
    }, {
        type: X.AD_LINEAR_TYPE_NOT_SUPPORT,
        category: J.ADS,
        message: "AD_LINEAR_TYPE_NOT_SUPPORT"
    }, {
        type: X.FETCH_VAST_URL_ERROR,
        category: J.ADS,
        message: "FETCH_VAST_URL_ERROR"
    }, {
        type: X.LINEAR_COMPLETE_TIMEOUT,
        category: J.ADS,
        message: "LINEAR_COMPLETE_TIMEOUT"
    }];
    var ee = {
        INFO: "info",
        WARN: "warn",
        ERROR: "error"
    }
      , te = {
        RETRY: "retry",
        STOP_PLAYBACK_IMMEDIATELY: "stop_playback_immediately",
        REAUTH_AND_RETRY: "reauth_and_retry",
        DO_NOTHING: "do_nothing",
        ONLY_REPORT: "only_report"
    }
      , ie = {
        OK: "Ok"
    }
      , ne = {
        Type: X,
        TrackingEventCategory: J,
        Configs: function() {
            var t = {};
            for (var _len = arguments.length, e = new Array(_len), _key = 0; _key < _len; _key++) {
                e[_key] = arguments[_key]
            }
            for (var _i6 = 0, _e5 = e; _i6 < _e5.length; _i6++) {
                var _i7 = _e5[_i6];
                t[_i7.type] = _i7
            }
            return t
        }
        .apply(void 0, Z)
    }
      , re = {
        [G.g.MPD_FORMAT_ERROR]: "hulu:client:playback:manifest:error:no-variants",
        [G.g.MPD_EXPIRED]: "hulu:client:playback:manifest:error:auth",
        [G.g.DASH_STREAM_ERROR]: "hulu:client:playback:player:error:dash_stream_error",
        [G.g.MEDIA_ABORTED_ERROR]: "hulu:client:playback:runtime:error:media_aborted_error",
        [G.g.MEDIA_DECODE_ERROR]: "hulu:client:playback:runtime:error:media_decode_error",
        [G.g.MEDIA_SRC_NOT_SUPPORTED_ERROR]: "hulu:client:playback:runtime:error:media_src_not_supported_error",
        [G.g.MEDIA_ENCRYPTED_ERROR]: "hulu:client:playback:runtime:error:media_encrypted_error",
        [G.g.MEDIA_UNKNOWN_ERROR]: "hulu:client:playback:runtime:error:media_unknown_error",
        [G.g.MEDIA_NETWORK_ERROR]: "hulu:client:playback:player:error:media_network_error",
        [G.g.SOURCE_BUFFER_APPEND_ERROR]: "hulu:client:playback:player:error:source_buffer_append_error",
        [G.g.MPD_LOAD_FAILURE]: "hulu:client:playback:manifest:error",
        [G.g.MEDIA_TIMEOUT_ERROR]: "hulu:client:playback:runtime:error:media_timeout_error",
        [G.g.MEDIA_KEY_MESSAGE_ERROR]: "hulu:client:playback:cdm:error:media_key_message_error",
        [G.g.OUTPUT_NON_HDCP_ERROR]: "hulu:client:playback:cdm:error:output_non_hdcp_error",
        [G.g.EME_UNAVAILABLE_ERROR]: "hulu:client:playback:cdm:error:eme_unavailable_error",
        [G.g.MEDIA_KEY_UNSUPPORTED_ERROR]: "hulu:client:playback:cdm:unavailable:media_key_unsupported_error",
        [G.g.CDM_UNAVAILABLE_ERROR]: "hulu:client:playback:cdm:unavailable:cdm_unavailable_error",
        [G.g.CDM_DEPRECATED_BROWSER]: "hulu:client:playback:cdm:error:invalid-version",
        [G.g.MEDIA_KEY_REQUEST_ERROR]: "hulu:client:playback:license:error:media_key_request_error",
        [G.g.MEDIA_KEY_LICENSE_URL_ERROR]: "hulu:client:playback:license:error:media_key_license_url_error"
    };
    var se = new (function(_m2) {
        _inheritsLoose(_class2, _m2);
        function _class2() {
            var _this6;
            _this6 = _m2.call(this) || this,
            _this6._data = {
                id: null,
                name: null,
                originalErrorName: null,
                category: null,
                subCategory: null,
                message: null,
                level: null,
                logs: null,
                stackTrace: null,
                entitlementFailure: null,
                extraParams: null,
                isReportToEMUIndex: !1
            };
            return _this6
        }
        var _proto5 = _class2.prototype;
        _proto5.reportToEMUIndex = function reportToEMUIndex(e, t, i) {
            e && this.update({
                id: e.errorId,
                name: e.unifiedErrorName,
                originalErrorName: e.originalErrorName,
                category: e.category,
                subCategory: e.subCategory,
                level: e.level,
                message: e.message || "",
                logs: e.logs,
                extraParams: Object.assign({}, e.rawError, t, e.extraParams),
                stackTrace: i || e.stackTrace || "",
                entitlementFailure: e.entitlementFailure || !1,
                isReportToEMUIndex: !0,
                fatal: e.isFatal
            })
        }
        ;
        _proto5.reportToPlayerIndex = function reportToPlayerIndex(e, t, i) {
            var n = ne.Configs[e] || {}
              , r = Q.generateGuid();
            this.update({
                id: r,
                name: e,
                originalErrorName: null,
                category: n && n.category,
                subCategory: "",
                message: t && t.message || n && n.message,
                level: "info",
                logs: t,
                extraParams: t,
                stackTrace: i || "",
                entitlementFailure: !1,
                isReportToEMUIndex: !1,
                fatal: !1
            })
        }
        ;
        return _class2
    }(m));
    var ae = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
      , oe = {}
      , le = oe.util = {
        rotl: function rotl(e, t) {
            return e << t | e >>> 32 - t
        },
        rotr: function rotr(e, t) {
            return e << 32 - t | e >>> t
        },
        endian: function endian(e) {
            if (e.constructor == Number)
                return 16711935 & le.rotl(e, 8) | 4278255360 & le.rotl(e, 24);
            for (var t = 0; t < e.length; t++) {
                e[t] = le.endian(e[t])
            }
            return e
        },
        randomBytes: function randomBytes(e) {
            for (var t = []; e > 0; e--) {
                t.push(Math.floor(256 * Math.random()))
            }
            return t
        },
        bytesToWords: function bytesToWords(e) {
            for (var t = [], i = 0, n = 0; i < e.length; i++,
            n += 8) {
                t[n >>> 5] |= (255 & e[i]) << 24 - n % 32
            }
            return t
        },
        wordsToBytes: function wordsToBytes(e) {
            for (var t = [], i = 0; i < 32 * e.length; i += 8) {
                t.push(e[i >>> 5] >>> 24 - i % 32 & 255)
            }
            return t
        },
        bytesToHex: function bytesToHex(e) {
            for (var t = [], i = 0; i < e.length; i++) {
                t.push((e[i] >>> 4).toString(16)),
                t.push((15 & e[i]).toString(16))
            }
            return t.join("")
        },
        hexToBytes: function hexToBytes(e) {
            for (var t = [], i = 0; i < e.length; i += 2) {
                t.push(parseInt(e.substr(i, 2), 16))
            }
            return t
        },
        bytesToBase64: function bytesToBase64(e) {
            if ("function" == typeof btoa)
                return btoa(ue.bytesToString(e));
            for (var t = [], i = 0; i < e.length; i += 3) {
                for (var n = e[i] << 16 | e[i + 1] << 8 | e[i + 2], r = 0; r < 4; r++) {
                    8 * i + 6 * r <= 8 * e.length ? t.push(ae.charAt(n >>> 6 * (3 - r) & 63)) : t.push("=")
                }
            }
            return t.join("")
        },
        base64ToBytes: function base64ToBytes(e) {
            if ("function" == typeof atob)
                return ue.stringToBytes(atob(e));
            e = e.replace(/[^A-Z0-9+\/]/gi, "");
            for (var t = [], i = 0, n = 0; i < e.length; n = ++i % 4) {
                0 !== n && t.push((ae.indexOf(e.charAt(i - 1)) & Math.pow(2, -2 * n + 8) - 1) << 2 * n | ae.indexOf(e.charAt(i)) >>> 6 - 2 * n)
            }
            return t
        }
    };
    oe.mode = {},
    oe.mode.ECB = {
        encrypt: function encrypt(e, t) {
            for (var i = 4 * e._blocksize, n = i - t.length % i, r = 0; r < n; r++) {
                t.push(n)
            }
            for (var s = 0; s < t.length; s += i) {
                e._encryptblock(t, s)
            }
        },
        decrypt: function decrypt(e, t, i) {
            for (var n = 4 * e._blocksize, r = 0; r < t.length; r += n) {
                e._decryptblock(t, r)
            }
            if (!i)
                for (var s = t[t.length - 1], a = 0; a < s; a++) {
                    t.pop()
                }
        }
    },
    oe.mode.CBC7 = {
        encrypt: function encrypt(e, t, i) {
            for (var n = 4 * e._blocksize, r = n - t.length % n, s = 0; s < r; s++) {
                t.push(r)
            }
            for (var a = 0; a < t.length; a += n) {
                if (0 == a)
                    for (s = 0; s < n; s++) {
                        t[s] ^= i[s]
                    }
                else
                    for (s = 0; s < n; s++) {
                        t[a + s] ^= t[a + s - n]
                    }
                e._encryptblock(t, a)
            }
        },
        decrypt: function decrypt(e, t, i, n) {
            for (var r = 4 * e._blocksize, s = 0; s < t.length; s += r) {
                var a = t.slice(s, s + r);
                if (e._decryptblock(t, s),
                0 == s)
                    for (var o = 0; o < r; o++) {
                        t[o] ^= i[o]
                    }
                else
                    for (o = 0; o < r; o++) {
                        t[s + o] ^= l[o]
                    }
                var l = a
            }
            if (n) {
                var d = t[t.length - 1];
                for (o = 0; o < d; o++) {
                    t.pop()
                }
            }
        }
    };
    var de = oe.charenc = {};
    de.UTF8 = {
        stringToBytes: function stringToBytes(e) {
            return ue.stringToBytes(unescape(encodeURIComponent(e)))
        },
        bytesToString: function bytesToString(e) {
            return decodeURIComponent(escape(ue.bytesToString(e)))
        }
    };
    for (var ue = de.Binary = {
        stringToBytes: function stringToBytes(e) {
            for (var t = [], i = 0; i < e.length; i++) {
                t.push(255 & e.charCodeAt(i))
            }
            return t
        },
        bytesToString: function bytesToString(e) {
            for (var t = [], i = 0; i < e.length; i++) {
                t.push(String.fromCharCode(e[i]))
            }
            return t.join("")
        }
    }, ce = [99, 124, 119, 123, 242, 107, 111, 197, 48, 1, 103, 43, 254, 215, 171, 118, 202, 130, 201, 125, 250, 89, 71, 240, 173, 212, 162, 175, 156, 164, 114, 192, 183, 253, 147, 38, 54, 63, 247, 204, 52, 165, 229, 241, 113, 216, 49, 21, 4, 199, 35, 195, 24, 150, 5, 154, 7, 18, 128, 226, 235, 39, 178, 117, 9, 131, 44, 26, 27, 110, 90, 160, 82, 59, 214, 179, 41, 227, 47, 132, 83, 209, 0, 237, 32, 252, 177, 91, 106, 203, 190, 57, 74, 76, 88, 207, 208, 239, 170, 251, 67, 77, 51, 133, 69, 249, 2, 127, 80, 60, 159, 168, 81, 163, 64, 143, 146, 157, 56, 245, 188, 182, 218, 33, 16, 255, 243, 210, 205, 12, 19, 236, 95, 151, 68, 23, 196, 167, 126, 61, 100, 93, 25, 115, 96, 129, 79, 220, 34, 42, 144, 136, 70, 238, 184, 20, 222, 94, 11, 219, 224, 50, 58, 10, 73, 6, 36, 92, 194, 211, 172, 98, 145, 149, 228, 121, 231, 200, 55, 109, 141, 213, 78, 169, 108, 86, 244, 234, 101, 122, 174, 8, 186, 120, 37, 46, 28, 166, 180, 198, 232, 221, 116, 31, 75, 189, 139, 138, 112, 62, 181, 102, 72, 3, 246, 14, 97, 53, 87, 185, 134, 193, 29, 158, 225, 248, 152, 17, 105, 217, 142, 148, 155, 30, 135, 233, 206, 85, 40, 223, 140, 161, 137, 13, 191, 230, 66, 104, 65, 153, 45, 15, 176, 84, 187, 22], he = [], pe = 0; pe < 256; pe++) {
        he[ce[pe]] = pe
    }
    var _e = []
      , fe = []
      , ge = []
      , me = []
      , ye = []
      , ve = [];
    function Ee(e, t) {
        for (var i = 0, n = 0; n < 8; n++) {
            1 & t && (i ^= e);
            var r = 128 & e;
            e = e << 1 & 255,
            r && (e ^= 27),
            t >>>= 1
        }
        return i
    }
    for (pe = 0; pe < 256; pe++) {
        _e[pe] = Ee(pe, 2),
        fe[pe] = Ee(pe, 3),
        ge[pe] = Ee(pe, 9),
        me[pe] = Ee(pe, 11),
        ye[pe] = Ee(pe, 13),
        ve[pe] = Ee(pe, 14)
    }
    var be, Te, Se, Ae = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];
    var Pe = {
        encrypt: function encrypt(e, t, i) {
            var n = oe.charenc.UTF8.stringToBytes(e)
              , r = oe.util.randomBytes(4 * Pe._blocksize)
              , s = t.constructor == String ? oe.PBKDF2(t, r, 32, {
                asBytes: !0
            }) : t
              , a = i && i.mode || oe.mode.OFB;
            return Pe._init(s),
            a.encrypt(Pe, n, r),
            i && "hex" === i.returnType ? {
                iv: oe.util.bytesToHex(r),
                ciphertext: oe.util.bytesToHex(n)
            } : {
                iv: oe.util.bytesToBase64(r),
                ciphertext: oe.util.bytesToBase64(n)
            }
        },
        decrypt: function decrypt(e, t, i) {
            var n, r;
            i.mode != oe.mode.ECB && (n = e.splice(0, 4 * Pe._blocksize)),
            r = t.constructor == String ? oe.PBKDF2(t, n, 32, {
                asBytes: !0
            }) : t;
            var s = i && i.mode || oe.mode.OFB;
            return Pe._init(r),
            s.decrypt(Pe, e, n, i.usePkcs7),
            e
        },
        _blocksize: 4,
        _encryptblock: function _encryptblock(e, t) {
            var i, n, r = [[], [], [], []];
            for (i = 0; i < Pe._blocksize; i++) {
                for (n = 0; n < 4; n++) {
                    r[i][n] = e[t + 4 * n + i]
                }
            }
            for (i = 0; i < 4; i++) {
                for (n = 0; n < 4; n++) {
                    r[i][n] ^= Se[n][i]
                }
            }
            for (var s = 1; s < Te; s++) {
                for (i = 0; i < 4; i++) {
                    for (n = 0; n < 4; n++) {
                        r[i][n] = ce[r[i][n]]
                    }
                }
                for (r[1].push(r[1].shift()),
                r[2].push(r[2].shift()),
                r[2].push(r[2].shift()),
                r[3].unshift(r[3].pop()),
                n = 0; n < 4; n++) {
                    var a = r[0][n]
                      , o = r[1][n]
                      , l = r[2][n]
                      , d = r[3][n];
                    r[0][n] = _e[a] ^ fe[o] ^ l ^ d,
                    r[1][n] = a ^ _e[o] ^ fe[l] ^ d,
                    r[2][n] = a ^ o ^ _e[l] ^ fe[d],
                    r[3][n] = fe[a] ^ o ^ l ^ _e[d]
                }
                for (i = 0; i < 4; i++) {
                    for (n = 0; n < 4; n++) {
                        r[i][n] ^= Se[4 * s + n][i]
                    }
                }
            }
            for (i = 0; i < 4; i++) {
                for (n = 0; n < 4; n++) {
                    r[i][n] = ce[r[i][n]]
                }
            }
            for (r[1].push(r[1].shift()),
            r[2].push(r[2].shift()),
            r[2].push(r[2].shift()),
            r[3].unshift(r[3].pop()),
            i = 0; i < 4; i++) {
                for (n = 0; n < 4; n++) {
                    r[i][n] ^= Se[4 * Te + n][i]
                }
            }
            for (i = 0; i < Pe._blocksize; i++) {
                for (n = 0; n < 4; n++) {
                    e[t + 4 * n + i] = r[i][n]
                }
            }
        },
        _decryptblock: function _decryptblock(e, t) {
            var i, n, r = [[], [], [], []];
            for (i = 0; i < Pe._blocksize; i++) {
                for (n = 0; n < 4; n++) {
                    r[i][n] = e[t + 4 * n + i]
                }
            }
            for (i = 0; i < 4; i++) {
                for (n = 0; n < 4; n++) {
                    r[i][n] ^= Se[4 * Te + n][i]
                }
            }
            for (var s = 1; s < Te; s++) {
                for (r[1].unshift(r[1].pop()),
                r[2].push(r[2].shift()),
                r[2].push(r[2].shift()),
                r[3].push(r[3].shift()),
                i = 0; i < 4; i++) {
                    for (n = 0; n < 4; n++) {
                        r[i][n] = he[r[i][n]]
                    }
                }
                for (i = 0; i < 4; i++) {
                    for (n = 0; n < 4; n++) {
                        r[i][n] ^= Se[4 * (Te - s) + n][i]
                    }
                }
                for (n = 0; n < 4; n++) {
                    var a = r[0][n]
                      , o = r[1][n]
                      , l = r[2][n]
                      , d = r[3][n];
                    r[0][n] = ve[a] ^ me[o] ^ ye[l] ^ ge[d],
                    r[1][n] = ge[a] ^ ve[o] ^ me[l] ^ ye[d],
                    r[2][n] = ye[a] ^ ge[o] ^ ve[l] ^ me[d],
                    r[3][n] = me[a] ^ ye[o] ^ ge[l] ^ ve[d]
                }
            }
            for (r[1].unshift(r[1].pop()),
            r[2].push(r[2].shift()),
            r[2].push(r[2].shift()),
            r[3].push(r[3].shift()),
            i = 0; i < 4; i++) {
                for (n = 0; n < 4; n++) {
                    r[i][n] = he[r[i][n]]
                }
            }
            for (i = 0; i < 4; i++) {
                for (n = 0; n < 4; n++) {
                    r[i][n] ^= Se[n][i]
                }
            }
            for (i = 0; i < Pe._blocksize; i++) {
                for (n = 0; n < 4; n++) {
                    e[t + 4 * n + i] = r[i][n]
                }
            }
        },
        _init: function _init(e) {
            be = e.length / 4,
            Te = be + 6,
            Pe._keyexpansion(e)
        },
        _keyexpansion: function _keyexpansion(e) {
            var t;
            for (Se = [],
            t = 0; t < be; t++) {
                Se[t] = [e[4 * t], e[4 * t + 1], e[4 * t + 2], e[4 * t + 3]]
            }
            for (t = be; t < Pe._blocksize * (Te + 1); t++) {
                var i = [Se[t - 1][0], Se[t - 1][1], Se[t - 1][2], Se[t - 1][3]];
                t % be == 0 ? (i.push(i.shift()),
                i[0] = ce[i[0]],
                i[1] = ce[i[1]],
                i[2] = ce[i[2]],
                i[3] = ce[i[3]],
                i[0] ^= Ae[t / be]) : be > 6 && t % be == 4 && (i[0] = ce[i[0]],
                i[1] = ce[i[1]],
                i[2] = ce[i[2]],
                i[3] = ce[i[3]]),
                Se[t] = [Se[t - be][0] ^ i[0], Se[t - be][1] ^ i[1], Se[t - be][2] ^ i[2], Se[t - be][3] ^ i[3]]
            }
        }
    };
    function ke(e) {
        return De(Le(Re(e), 8 * e.length))
    }
    function Ce(e) {
        for (var t, i = "0123456789abcdef", n = "", r = 0; r < e.length; r++) {
            t = e.charCodeAt(r),
            n += i.charAt(t >>> 4 & 15) + i.charAt(15 & t)
        }
        return n
    }
    function Ie(e) {
        for (var t, i, n = "", r = -1; ++r < e.length; ) {
            t = e.charCodeAt(r),
            i = r + 1 < e.length ? e.charCodeAt(r + 1) : 0,
            55296 <= t && t <= 56319 && 56320 <= i && i <= 57343 && (t = 65536 + ((1023 & t) << 10) + (1023 & i),
            r++),
            t <= 127 ? n += String.fromCharCode(t) : t <= 2047 ? n += String.fromCharCode(192 | t >>> 6 & 31, 128 | 63 & t) : t <= 65535 ? n += String.fromCharCode(224 | t >>> 12 & 15, 128 | t >>> 6 & 63, 128 | 63 & t) : t <= 2097151 && (n += String.fromCharCode(240 | t >>> 18 & 7, 128 | t >>> 12 & 63, 128 | t >>> 6 & 63, 128 | 63 & t))
        }
        return n
    }
    function Re(e) {
        for (var t = Array(e.length >> 2), i = 0; i < t.length; i++) {
            t[i] = 0
        }
        for (i = 0; i < 8 * e.length; i += 8) {
            t[i >> 5] |= (255 & e.charCodeAt(i / 8)) << i % 32
        }
        return t
    }
    function De(e) {
        for (var t = "", i = 0; i < 32 * e.length; i += 8) {
            t += String.fromCharCode(e[i >> 5] >>> i % 32 & 255)
        }
        return t
    }
    function Le(e, t) {
        e[t >> 5] |= 128 << t % 32,
        e[14 + (t + 64 >>> 9 << 4)] = t;
        for (var i = 1732584193, n = -271733879, r = -1732584194, s = 271733878, a = 0; a < e.length; a += 16) {
            var o = i
              , l = n
              , d = r
              , u = s;
            i = Oe(i, n, r, s, e[a + 0], 7, -680876936),
            s = Oe(s, i, n, r, e[a + 1], 12, -389564586),
            r = Oe(r, s, i, n, e[a + 2], 17, 606105819),
            n = Oe(n, r, s, i, e[a + 3], 22, -1044525330),
            i = Oe(i, n, r, s, e[a + 4], 7, -176418897),
            s = Oe(s, i, n, r, e[a + 5], 12, 1200080426),
            r = Oe(r, s, i, n, e[a + 6], 17, -1473231341),
            n = Oe(n, r, s, i, e[a + 7], 22, -45705983),
            i = Oe(i, n, r, s, e[a + 8], 7, 1770035416),
            s = Oe(s, i, n, r, e[a + 9], 12, -1958414417),
            r = Oe(r, s, i, n, e[a + 10], 17, -42063),
            n = Oe(n, r, s, i, e[a + 11], 22, -1990404162),
            i = Oe(i, n, r, s, e[a + 12], 7, 1804603682),
            s = Oe(s, i, n, r, e[a + 13], 12, -40341101),
            r = Oe(r, s, i, n, e[a + 14], 17, -1502002290),
            i = xe(i, n = Oe(n, r, s, i, e[a + 15], 22, 1236535329), r, s, e[a + 1], 5, -165796510),
            s = xe(s, i, n, r, e[a + 6], 9, -1069501632),
            r = xe(r, s, i, n, e[a + 11], 14, 643717713),
            n = xe(n, r, s, i, e[a + 0], 20, -373897302),
            i = xe(i, n, r, s, e[a + 5], 5, -701558691),
            s = xe(s, i, n, r, e[a + 10], 9, 38016083),
            r = xe(r, s, i, n, e[a + 15], 14, -660478335),
            n = xe(n, r, s, i, e[a + 4], 20, -405537848),
            i = xe(i, n, r, s, e[a + 9], 5, 568446438),
            s = xe(s, i, n, r, e[a + 14], 9, -1019803690),
            r = xe(r, s, i, n, e[a + 3], 14, -187363961),
            n = xe(n, r, s, i, e[a + 8], 20, 1163531501),
            i = xe(i, n, r, s, e[a + 13], 5, -1444681467),
            s = xe(s, i, n, r, e[a + 2], 9, -51403784),
            r = xe(r, s, i, n, e[a + 7], 14, 1735328473),
            i = Ne(i, n = xe(n, r, s, i, e[a + 12], 20, -1926607734), r, s, e[a + 5], 4, -378558),
            s = Ne(s, i, n, r, e[a + 8], 11, -2022574463),
            r = Ne(r, s, i, n, e[a + 11], 16, 1839030562),
            n = Ne(n, r, s, i, e[a + 14], 23, -35309556),
            i = Ne(i, n, r, s, e[a + 1], 4, -1530992060),
            s = Ne(s, i, n, r, e[a + 4], 11, 1272893353),
            r = Ne(r, s, i, n, e[a + 7], 16, -155497632),
            n = Ne(n, r, s, i, e[a + 10], 23, -1094730640),
            i = Ne(i, n, r, s, e[a + 13], 4, 681279174),
            s = Ne(s, i, n, r, e[a + 0], 11, -358537222),
            r = Ne(r, s, i, n, e[a + 3], 16, -722521979),
            n = Ne(n, r, s, i, e[a + 6], 23, 76029189),
            i = Ne(i, n, r, s, e[a + 9], 4, -640364487),
            s = Ne(s, i, n, r, e[a + 12], 11, -421815835),
            r = Ne(r, s, i, n, e[a + 15], 16, 530742520),
            i = Ue(i, n = Ne(n, r, s, i, e[a + 2], 23, -995338651), r, s, e[a + 0], 6, -198630844),
            s = Ue(s, i, n, r, e[a + 7], 10, 1126891415),
            r = Ue(r, s, i, n, e[a + 14], 15, -1416354905),
            n = Ue(n, r, s, i, e[a + 5], 21, -57434055),
            i = Ue(i, n, r, s, e[a + 12], 6, 1700485571),
            s = Ue(s, i, n, r, e[a + 3], 10, -1894986606),
            r = Ue(r, s, i, n, e[a + 10], 15, -1051523),
            n = Ue(n, r, s, i, e[a + 1], 21, -2054922799),
            i = Ue(i, n, r, s, e[a + 8], 6, 1873313359),
            s = Ue(s, i, n, r, e[a + 15], 10, -30611744),
            r = Ue(r, s, i, n, e[a + 6], 15, -1560198380),
            n = Ue(n, r, s, i, e[a + 13], 21, 1309151649),
            i = Ue(i, n, r, s, e[a + 4], 6, -145523070),
            s = Ue(s, i, n, r, e[a + 11], 10, -1120210379),
            r = Ue(r, s, i, n, e[a + 2], 15, 718787259),
            n = Ue(n, r, s, i, e[a + 9], 21, -343485551),
            i = Be(i, o),
            n = Be(n, l),
            r = Be(r, d),
            s = Be(s, u)
        }
        return [i, n, r, s]
    }
    function Me(e, t, i, n, r, s) {
        return Be((a = Be(Be(t, e), Be(n, s))) << (o = r) | a >>> 32 - o, i);
        var a, o
    }
    function Oe(e, t, i, n, r, s, a) {
        return Me(t & i | ~t & n, e, t, r, s, a)
    }
    function xe(e, t, i, n, r, s, a) {
        return Me(t & n | i & ~n, e, t, r, s, a)
    }
    function Ne(e, t, i, n, r, s, a) {
        return Me(t ^ i ^ n, e, t, r, s, a)
    }
    function Ue(e, t, i, n, r, s, a) {
        return Me(i ^ (t | ~n), e, t, r, s, a)
    }
    function Be(e, t) {
        var i = (65535 & e) + (65535 & t);
        return (e >> 16) + (t >> 16) + (i >> 16) << 16 | 65535 & i
    }
    var Fe = {
        hexMD5: function(e) {
            return Ce(ke(Ie(e)))
        }
    }
      , Ve = "https://emu.hulu.com/api/v1/error/mapping"
      , He = (W.IS_QA ? "https://player.huluqa.com" : "https://player.hulu.com") + "/site/dash/" + (W.IS_SMOKE ? "smoke/" : "") + "errorMapping.json";
    var je = function() {
        function je(e, t) {
            this._data = {},
            this._data.unifiedErrorName = e,
            t && (t.details && (this._data.category = t.details.category || null,
            this._data.sub_category = t.details.sub_category || null,
            this._data.level = t.details.level || null,
            this._data.entitlement_failure = t.details.entitlement_failure || !1),
            t.action && (this._data.action = t.action.type || null,
            this._data.retry = t.action.retry || null),
            t.messaging && (this._data.heading = t.messaging.heading || null,
            this._data.description = t.messaging.description || null,
            this._data.vx_code = t.messaging.vx_code || null,
            this._data.help_url = t.messaging.help_url || null))
        }
        _createClass(je, [{
            key: "unifiedErrorName",
            get: function get() {
                return this._data.unifiedErrorName
            }
        }, {
            key: "category",
            get: function get() {
                return this._data.category
            }
        }, {
            key: "subCategory",
            get: function get() {
                return this._data.sub_category
            }
        }, {
            key: "level",
            get: function get() {
                return this._data.level
            }
        }, {
            key: "entitlementFailure",
            get: function get() {
                return this._data.entitlement_failure
            }
        }, {
            key: "action",
            get: function get() {
                return this._data.action
            }
        }, {
            key: "retry",
            get: function get() {
                return this._data.retry
            }
        }, {
            key: "heading",
            get: function get() {
                return this._data.heading
            }
        }, {
            key: "description",
            get: function get() {
                return this._data.description
            }
        }, {
            key: "vxCode",
            get: function get() {
                return this._data.vx_code
            }
        }, {
            key: "helpUrl",
            get: function get() {
                return this._data.help_url
            }
        }]);
        return je
    }();
    var We = new (function() {
        function _class3() {
            this._errorMap = null,
            this._isReady = !1
        }
        var _proto6 = _class3.prototype;
        _proto6.init = function init() {
            this._fetchErrorMap()
        }
        ;
        _proto6._fetchErrorMap = function _fetchErrorMap() {
            var _this7 = this;
            var e = !1
              , t = null;
            var i = {
                retryCount: 2,
                timeoutMs: 15e3
            };
            this._fetchJson(Ve, null, i).then(function(e) {
                return e
            }, function(n) {
                return e = !0,
                t = n,
                _this7._fetchJson(He, null, i)
            }).then(function(e) {
                _this7._parseErrorMap(e)
            }).then(function() {
                _this7._isReady = !0,
                e && _this7._reportEmuMapDownloadErr(t)
            })
        }
        ;
        _proto6._fetchJson = function _fetchJson(e, t, i) {
            return Object(G.i)(e, t, i).then(function(e) {
                return e.ok ? e.json() : Promise.reject(e)
            })
        }
        ;
        _proto6._parseErrorMap = function _parseErrorMap(e) {
            var _this8 = this;
            this._errorMap = {},
            Object.keys(e).forEach(function(t) {
                _this8._errorMap[t] = new je(t,e[t])
            })
        }
        ;
        _proto6._reportEmuMapDownloadErr = function _reportEmuMapDownloadErr(e) {
            var t = new ze("hulu:client:error-map:load-failure");
            t.rawError = e || {},
            t.extraParams.url = Ve,
            se.reportToEMUIndex(t)
        }
        ;
        _proto6.query = function query(e) {
            if ("string" != typeof e || null === this._errorMap)
                return null;
            for (; "" !== e; ) {
                if (this._errorMap.hasOwnProperty(e))
                    return this._errorMap[e];
                e = e.substr(0, e.lastIndexOf(":"))
            }
            return null
        }
        ;
        _createClass(_class3, [{
            key: "errorMap",
            get: function get() {
                return this._errorMap
            }
        }, {
            key: "isReady",
            get: function get() {
                return this._isReady
            }
        }]);
        return _class3
    }());
    var Ge = {
        ar: "Arabic",
        bn: "Bengali",
        bg: "Bulgarian",
        zh: "Chinese",
        hr: "Croatian",
        cs: "Czech",
        da: "Danish",
        nl: "Dutch",
        en: "English",
        et: "Estonian",
        fa: "Farsi (persian)",
        fi: "Finnish",
        fr: "French",
        de: "German",
        he: "Hebrew",
        hi: "Hindi",
        hu: "Hungarian",
        id: "Indonesian",
        it: "Italian",
        ja: "Japanese",
        ks: "Kashmiri",
        ko: "Korean",
        no: "Norwegian",
        pl: "Polish",
        pt: "Portuguese",
        ro: "Romanian",
        ru: "Russian",
        sr: "Serbian",
        sl: "Slovenian",
        es: "Spanish",
        sv: "Swedish",
        th: "Thai"
    };
    var Ke = {
        LOADING: "Loading",
        LONG_TIME_TIPS: {
            TITLE: "Still there?",
            MESSAGE: "We'd hate for you to miss your show, so we wanted to see if you're still around.",
            CONTINUE: "Yes, continue watching"
        },
        LIVE_RECORDING: "LIVE (REC)",
        HELP_URL: "For more information please visit ",
        ERROR_CODE: "Hulu Error Code: ",
        ERROR_ID: "Unique Error ID: ",
        ERROR_TIME: "Local Time of Error: ",
        UNAVAILABLE_ACTION_FEEDBACK: {
            AD_SEEK: "Rewinding and fast-forwarding during commercials is not allowed for this video.",
            NO_SO_RIGHTS_SEEK: "Seeking is disabled during content without start over rights.",
            SEEK_REGION_UNAVAILABLE: "Playing this part of the video is not allowed."
        },
        GO_LIVE: "GO LIVE",
        GENERAL_ERROR_HEADING: "Error playing video",
        GENERAL_ERROR_DESCRIPTION: "We encountered an error playing this video. Please try restarting the video or select something else to watch."
    };
    var ze = function() {
        function ze(e, t) {
            var i = t || We.query(e) || {};
            this._errorId = Q.generateGuid(),
            this._time = new Date().getTime(),
            this._originalErrorName = e || null,
            this._unifiedErrorName = i.unifiedErrorName,
            this._category = i.category || "",
            this._subCategory = i.subCategory || "",
            this._level = i.level || "",
            this._entitlementFailure = i.entitlementFailure || !1,
            this._action = i.action || null,
            this._retry = _objectSpread({}, i.retry) || null,
            this._heading = i.heading || "",
            this._description = i.description || "",
            this._vxCode = i.vxCode || null,
            this._helpUrl = i.helpUrl || null,
            this.message = "",
            this.logs = "",
            this.stackTrace = "",
            this.rawError = {},
            this.extraParams = {},
            this.checkUnknownAction()
        }
        var _proto7 = ze.prototype;
        _proto7.makeItFatal = function makeItFatal() {
            this._action = te.STOP_PLAYBACK_IMMEDIATELY,
            this._heading = this._heading || Ke.GENERAL_ERROR_HEADING,
            this._description = this._description || Ke.GENERAL_ERROR_DESCRIPTION
        }
        ;
        _proto7.checkUnknownAction = function checkUnknownAction() {
            var e = !0;
            for (var _t7 in te) {
                if (this._action === te[_t7]) {
                    e = !1;
                    break
                }
            }
            e && (this.logs = "reset " + this._unifiedErrorName + " to hulu:client:error-map:unknown-action",
            this._unifiedErrorName = "hulu:client:error-map:unknown-action")
        }
        ;
        _createClass(ze, [{
            key: "errorId",
            get: function get() {
                return this._errorId
            }
        }, {
            key: "time",
            get: function get() {
                return this._time
            }
        }, {
            key: "originalErrorName",
            get: function get() {
                return this._originalErrorName
            }
        }, {
            key: "unifiedErrorName",
            get: function get() {
                return this._unifiedErrorName
            }
        }, {
            key: "category",
            get: function get() {
                return this._category
            }
        }, {
            key: "subCategory",
            get: function get() {
                return this._subCategory
            }
        }, {
            key: "level",
            get: function get() {
                return this._level
            }
        }, {
            key: "entitlementFailure",
            get: function get() {
                return this._entitlementFailure
            }
        }, {
            key: "action",
            get: function get() {
                return this._action
            }
        }, {
            key: "retry",
            get: function get() {
                return this._retry
            }
        }, {
            key: "heading",
            get: function get() {
                return this._heading
            }
        }, {
            key: "description",
            get: function get() {
                return this._description
            }
        }, {
            key: "vxCode",
            get: function get() {
                return this._vxCode
            }
        }, {
            key: "helpUrl",
            get: function get() {
                return this._helpUrl
            }
        }, {
            key: "isFatal",
            get: function get() {
                var e = this.rawError.type && void 0 !== re[this.rawError.type]
                  , t = this._level === ee.ERROR && (this._action === te.STOP_PLAYBACK_IMMEDIATELY || this._retry && this._retry.fallback === te.STOP_PLAYBACK_IMMEDIATELY);
                return e || t
            }
        }, {
            key: "shouldReport",
            get: function get() {
                return this.isFatal || this._action !== te.DO_NOTHING
            }
        }]);
        return ze
    }();
    var qe = new (function(_m3) {
        _inheritsLoose(_class4, _m3);
        function _class4() {
            var _this9;
            _this9 = _m3.call(this) || this,
            _this9.backgroundCondition = function() {
                return !1
            }
            ,
            _this9._data = {
                error: null
            };
            return _this9
        }
        var _proto8 = _class4.prototype;
        _proto8.reset = function reset() {
            this.update({
                error: null
            })
        }
        ;
        _createClass(_class4, [{
            key: "error",
            get: function get() {
                return this._data.error
            },
            set: function set(e) {
                this.backgroundCondition() || this.update({
                    error: e
                })
            }
        }]);
        return _class4
    }(m));
    function Ye() {
        return document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement
    }
    var Qe = {
        getFullscreenElement: Ye,
        requestFullscreen: function requestFullscreen(e) {
            var t = e.requestFullscreen || e.mozRequestFullScreen || e.webkitRequestFullscreen || e.msRequestFullscreen;
            t && t.apply(e, [e.webkitRequestFullscreen ? Element.ALLOW_KEYBOARD_INPUT : null])
        },
        cancelFullscreen: function cancelFullscreen() {
            var e = document.exitFullscreen || document.mozCancelFullScreen || document.webkitCancelFullScreen || document.msExitFullscreen;
            Ye() && e && e.apply(document)
        },
        isTouchScreen: "ontouchstart"in window || navigator.maxTouchPoints
    };
    var $e = {
        URL: function URL(e) {
            var t = document.createElement("a");
            return t.href = e,
            t
        },
        searchJSON: function searchJSON(e) {
            return function(e, t) {
                if (!e)
                    return {};
                var i = {};
                return e.replace(t, function(e, t, n, r) {
                    i[t] = r
                }),
                i
            }(e, new RegExp("([^?=&]+)(=([^&]*))?","g"))
        },
        open: function open(e) {
            e && (Qe.cancelFullscreen(),
            window.open(e, "_blank"))
        }
    }
      , Xe = function() {
        throw new Error("no retry logic is provided")
    }
      , Je = function() {
        return We.query("hulu:client:error-map:undefined")
    }
      , Ze = function(e, t) {
        e.hci_code = t
    }
      , et = function(e) {
        return e && e.hci_code || null
    }
      , tt = function(e, t, i) {
        return Object(G.i)(e, t, i).then(function(t) {
            return function(e, t, i) {
                return new Promise(function(n, r) {
                    if (e.ok)
                        n(e);
                    else {
                        var _n4 = e.status
                          , _s2 = "hulu:client:network:error:request:" + (i && i.method || "GET").toLowerCase() + ":" + _n4
                          , _a2 = new ze(_s2);
                        se.reportToEMUIndex(_a2),
                        e.json().then(function(e) {
                            e = Object.assign({
                                url: t,
                                status: _n4
                            }, e),
                            r(e)
                        }).catch(function() {
                            var t = null;
                            try {
                                e.assertOK()
                            } catch (e) {
                                t = e
                            }
                            r(t)
                        })
                    }
                }
                )
            }(t, e, i)
        })
    }
      , it = function(e, t) {
        if (e === void 0) {
            e = Xe
        }
        if (t === void 0) {
            t = Je
        }
        var i = []
          , n = !1
          , r = null
          , s = null
          , a = null;
        return new Promise(function(o, l) {
            var d = function() {
                clearTimeout(s),
                We.isReady ? e().then(function(e) {
                    o(e)
                }).catch(function(e) {
                    if (r = function(e, t) {
                        var i = et(e) || t(e);
                        return We.query(i.toLowerCase()) || We.query("hulu:client:error-map:undefined")
                    }(e, t),
                    function(e) {
                        return e && (e.action === te.RETRY || e.action === te.REAUTH_AND_RETRY)
                    }(r) && !n && (i = function(e) {
                        var t = []
                          , i = e.retry.interval
                          , n = e.retry.spacing;
                        for (var _r2 = 0; _r2 < e.retry.count; _r2++) {
                            0 === _r2 ? t.push(i) : t.push("linear" === n ? i : i * t[_r2 - 1])
                        }
                        return t
                    }(r),
                    n = !0),
                    i.length > 0) {
                        var _e6 = i.shift();
                        setTimeout(d, 1e3 * _e6)
                    } else
                        a = new ze(null,r),
                        a.logs = JSON.stringify(e),
                        a.stackTrace = e.stack || "",
                        a.message = function(e) {
                            if (!e || null == e.status || !e.url)
                                return "";
                            var t = e.url
                              , i = e.status
                              , n = $e.URL(t).hostname;
                            return n ? n + ":" + i : ""
                        }(e),
                        a.rawError = e,
                        l(a)
                }) : s = setTimeout(d, 300)
            };
            d()
        }
        )
    }
      , nt = W.IS_QA ? "https://play.huluqa.com/config" : "https://play.hulu.com/config"
      , rt = "hulu:client:configuration:error"
      , st = {
        FETCH: rt,
        TIMEOUT: rt + ":timeout",
        INVALID: rt + ":invalid"
    };
    var at = new (function(_m4) {
        _inheritsLoose(_class5, _m4);
        function _class5() {
            var _this10;
            _this10 = _m4.call(this) || this,
            _this10._configPromise = Promise.resolve(_assertThisInitialized(_this10));
            return _this10
        }
        var _proto9 = _class5.prototype;
        _proto9.loadConfig = function loadConfig() {
            var _this11 = this;
            return this._configPromise = this._configPromise.then(function() {
                return _this11.isExpired ? Promise.reject() : _this11
            }).catch(function() {
                return _this11._actualLoadConfig()
            })
        }
        ;
        _proto9._actualLoadConfig = function _actualLoadConfig() {
            var _this12 = this;
            var e = this._getRequestParams();
            return this._configPromise = this._fetchAndParseRawConfig(e).catch(function(t) {
                if (e && (t.extraParams.playlistConfigUrl = nt,
                t.extraParams.playlistConfigBody = JSON.stringify(e)),
                !_this12.isValid)
                    return t.makeItFatal(),
                    Promise.reject(t);
                se.reportToEMUIndex(t)
            }),
            this._configPromise
        }
        ;
        _proto9._getRequestParams = function _getRequestParams() {
            var e = Math.floor(1e6 * Math.random())
              , t = W.DEEJAY_KEY + "," + W.DEEJAY_DEVICE_ID + "," + W.DEEJAY_KEY_VERSION + "," + e;
            return t = Fe.hexMD5(t),
            {
                rv: e,
                encrypted_nonce: t,
                device: W.DEEJAY_DEVICE_ID,
                device_id: $.computerGuid,
                language: W.LANGUAGE,
                region: W.REGION,
                version: W.DEEJAY_KEY_VERSION,
                badging: !0
            }
        }
        ;
        _proto9._fetchAndParseRawConfig = function _fetchAndParseRawConfig(e) {
            var _this13 = this;
            return it(function() {
                return tt(nt, {
                    method: "POST",
                    headers: {
                        "Content-type": "application/x-www-form-urlencoded"
                    },
                    body: Q.param(e)
                }).then(function(e) {
                    return e.text()
                }).then(function(e) {
                    return _this13._parseRawConfig(e)
                })
            }, function(e) {
                var t = st.FETCH;
                if (e && "FetchError" === e.name)
                    switch (e.type) {
                    case "connect_timeout":
                    case "load_timeout":
                        t = st.TIMEOUT;
                    }
                return t
            }).catch(function(e) {
                var t = e.unifiedErrorName === st.INVALID ? "deejay:fail to parse raw deejay config" : "deejay:fail to fetch raw deejay config";
                return e.message = e.message || t,
                Promise.reject(e)
            })
        }
        ;
        _proto9._parseRawConfig = function _parseRawConfig(e) {
            try {
                var _t8 = oe.util.hexToBytes(W.DEEJAY_KEY)
                  , _i8 = this._parseResponse(e, _t8);
                return _i8.lastUpdate = new Date,
                this.set(_i8),
                Promise.resolve()
            } catch (e) {
                return Ze(e, st.INVALID),
                Promise.reject(e)
            }
        }
        ;
        _proto9._parseResponse = function _parseResponse(e, t) {
            var i = oe.util.hexToBytes(e)
              , n = oe.util.hexToBytes("00000000000000000000000000000000").concat(i)
              , r = Pe.decrypt(n, t, {
                mode: oe.mode.CBC7,
                usePkcs7: !0
            })
              , s = oe.charenc.UTF8.bytesToString(r);
            return JSON.parse(s)
        }
        ;
        _createClass(_class5, [{
            key: "adServer",
            get: function get() {
                return this._data.ad_server
            }
        }, {
            key: "autoplayIdleTimeout",
            get: function get() {
                return this._data.autoplay_idle_timeout || 144e5
            }
        }, {
            key: "beaconHost",
            get: function get() {
                return this._data.beacon
            }
        }, {
            key: "qosBeaconHost",
            get: function get() {
                return this._data.qos_beacon
            }
        }, {
            key: "iballHost",
            get: function get() {
                return this._data.iball
            }
        }, {
            key: "key",
            get: function get() {
                return this._data.key
            }
        }, {
            key: "keyId",
            get: function get() {
                return this._data.key_id
            }
        }, {
            key: "liveLinearThreshold",
            get: function get() {
                return this._data.live_linear_threshold
            }
        }, {
            key: "playlistEndpoint",
            get: function get() {
                return this._data.playlist_endpoint
            }
        }, {
            key: "programExtensionCheckRange",
            get: function get() {
                return this._data.program_extension_check_offset
            }
        }, {
            key: "programExtensionCheckOffset",
            get: function get() {
                return this._data.program_extension_check_range
            }
        }, {
            key: "sauronEndpoint",
            get: function get() {
                return this._data.sauron_endpoint
            }
        }, {
            key: "sauronAccessToken",
            get: function get() {
                return this._data.sauron_access_token
            }
        }, {
            key: "progressReportInterval",
            get: function get() {
                return this._data.player_progress_report_interval
            }
        }, {
            key: "metricsAgent",
            get: function get() {
                return this._data.product_instrumentation_v2 ? this._data.product_instrumentation_v2.metrics_agent : null
            }
        }, {
            key: "adobeAgent",
            get: function get() {
                return this._data.product_instrumentation_v2 ? this._data.product_instrumentation_v2.adobe_agent : null
            }
        }, {
            key: "instrumentRateLimit",
            get: function get() {
                return this._data.product_instrumentation_v2 && this._data.product_instrumentation_v2.rate_limiting || {}
            }
        }, {
            key: "isValid",
            get: function get() {
                return !!this._data.lastUpdate
            }
        }, {
            key: "isExpired",
            get: function get() {
                return !this._data.lastUpdate || new Date - this._data.lastUpdate > 1e3 * this._data.key_expiration / 2
            }
        }, {
            key: "playbackRequestRetries",
            get: function get() {
                return null != this._data.playback_request_retries ? this._data.playback_request_retries : 3
            }
        }, {
            key: "playbackRequestTimeout",
            get: function get() {
                return null != this._data.playback_request_timeout ? this._data.playback_request_timeout : 1e4
            }
        }]);
        return _class5
    }(m));
    var ot = function() {
        function ot() {}
        ot.parseDate = function parseDate(e) {
            if (!e || "" == e)
                return null;
            try {
                return new Date(e)
            } catch (e) {}
        }
        ;
        ot.formatDateToTime = function formatDateToTime(e, t) {
            if (!(e instanceof Date))
                return "";
            var i = e.getHours()
              , n = e.getMinutes()
              , r = n ? ":" + ("0" + n).slice(-2) : "";
            if (t)
                return ("0" + i).slice(-2) + r;
            {
                return (i % 12 || "12") + r + (i >= 12 ? "PM" : "AM")
            }
        }
        ;
        ot.formatSecondsAsTimeCode = function formatSecondsAsTimeCode(e) {
            (isNaN(e) || e < 0) && (e = 0);
            var t = Math.floor(e / 3600)
              , i = Math.floor(e % 3600 / 60)
              , n = Math.floor(e % 3600 % 60)
              , r = 0 == t ? "" : t + ":";
            return r += (i < 10 && r.length > 0 ? "0" + i : i) + ":",
            r += n < 10 ? "0" + n : n,
            r
        }
        ;
        ot.formatFriendlyTime = function formatFriendlyTime(e) {
            return null == e ? null : e >= 60 ? Math.round(e / 60) + " min" : Math.round(e) + " sec"
        }
        ;
        ot.convertTimeCodeToSeconds = function convertTimeCodeToSeconds(e, t) {
            var i = e.split(/:|;/);
            return 3600 * parseInt(i[0]) + 60 * parseInt(i[1]) + parseInt(i[2]) + (t > 0 ? parseInt(i[3]) / t : 0)
        }
        ;
        ot.formatDate = function formatDate(e, t) {
            if (null == e)
                return "";
            var i = {
                "M+": e.getMonth() + 1,
                "d+": e.getDate(),
                "h+": e.getHours(),
                "m+": e.getMinutes(),
                "s+": e.getSeconds(),
                "q+": Math.floor((e.getMonth() + 3) / 3),
                S: e.getMilliseconds()
            };
            /(y+)/.test(t) && (t = t.replace(RegExp.$1, (e.getFullYear() + "").substr(4 - RegExp.$1.length)));
            for (var _e8 in i) {
                new RegExp("(" + _e8 + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[_e8] : ("00" + i[_e8]).substr(("" + i[_e8]).length)))
            }
            return t
        }
        ;
        return ot
    }();
    var lt = function() {
        function lt(e) {
            var _this14 = this;
            var t = e || {};
            this._data = t,
            this._contentEabId = t.content_eab_id,
            this._streamUrl = t.stream_url,
            this._dashPrServer = t.dash_pr_server,
            this._dashWvServer = t.dash_wv_server,
            this._fpCert = t.fp_cert,
            this._fpServer = t.fp_server,
            this._bufferWindowSize = t.buffer_window_size / 1e3 || 3600,
            this._mbrManifest = JSON.parse(t.mbr_manifest || null),
            this._initialPosition = t.initial_position >= 0 ? t.initial_position / 1e3 : -1,
            this._stormflowId = t.stormflow_id,
            null != t.recording_offset && (this._recordingOffset = t.recording_offset / 1e3),
            this._breaks = t.breaks;
            var i = t.pause_ads || {};
            this._pauseAdsOpportunityImpression = i.opportunityImpression || [],
            this._pauseAdsMiniSpan = i.minSecondsBetweenAds || 300,
            this._pauseAdsCreatives = i.creatives || [];
            var n = t.video_metadata || {};
            this._ratingBugBig = n.rating_bug_big,
            this._ratingBugSmall = n.rating_bug_small,
            this._endCreditTime = ot.convertTimeCodeToSeconds(n.end_credits_time || "", n.frame_rate) || -1,
            this._aspectRatio = n.aspect_ratio,
            this._hasBug = "false" !== n.has_bug,
            this._audioLanguage = n.language,
            this._audioTracks = (t.audio_tracks || []).map(function(e) {
                return {
                    kind: _this14.audioRoleToKind(e.role),
                    language: e.language
                }
            })
        }
        var _proto10 = lt.prototype;
        _proto10.audioRoleToKind = function audioRoleToKind(e) {
            return {
                primary: "main",
                narration: "descriptions",
                commentary: "commentary"
            }[e] || e
        }
        ;
        _proto10.get = function get() {
            return this._data
        }
        ;
        _createClass(lt, [{
            key: "aspectRatio",
            get: function get() {
                return this._aspectRatio
            }
        }, {
            key: "audioLanguage",
            get: function get() {
                return this._audioLanguage
            }
        }, {
            key: "audioTracks",
            get: function get() {
                return this._audioTracks
            }
        }, {
            key: "breaks",
            get: function get() {
                return this._breaks
            }
        }, {
            key: "contentEabId",
            get: function get() {
                return this._contentEabId
            }
        }, {
            key: "endCreditTime",
            get: function get() {
                return this._endCreditTime
            }
        }, {
            key: "streamUrl",
            get: function get() {
                return this._streamUrl
            }
        }, {
            key: "dashWvServer",
            get: function get() {
                return this._dashWvServer
            }
        }, {
            key: "dashPrServer",
            get: function get() {
                return this._dashPrServer
            }
        }, {
            key: "fpCert",
            get: function get() {
                return this._fpCert
            }
        }, {
            key: "fpServer",
            get: function get() {
                return this._fpServer
            }
        }, {
            key: "stormflowId",
            get: function get() {
                return this._stormflowId
            }
        }, {
            key: "ratingBugBig",
            get: function get() {
                return this._ratingBugBig
            }
        }, {
            key: "ratingBugSmall",
            get: function get() {
                return this._ratingBugSmall
            }
        }, {
            key: "hasBug",
            get: function get() {
                return this._hasBug
            }
        }, {
            key: "initialPosition",
            get: function get() {
                return this._initialPosition
            }
        }, {
            key: "recordingOffset",
            get: function get() {
                return this._recordingOffset
            }
        }, {
            key: "bufferWindowSize",
            get: function get() {
                return this._bufferWindowSize
            }
        }, {
            key: "mbrManifest",
            get: function get() {
                return this._mbrManifest
            }
        }, {
            key: "pauseAdsMiniSpan",
            get: function get() {
                return 1e3 * this._pauseAdsMiniSpan
            }
        }, {
            key: "pauseAdsCreatives",
            get: function get() {
                return this._pauseAdsCreatives
            }
        }, {
            key: "pauseAdsOpportunityImpression",
            get: function get() {
                return this._pauseAdsOpportunityImpression
            }
        }]);
        return lt
    }();
    var dt = {
        AD_UNIT_TYPE_AD_SELECTOR_SLATE: "Ad Selector Slate",
        AD_UNIT_TYPE_AD_SELECTOR_VIDEO: "Ad Selector Video",
        AD_UNIT_TYPE_AD_TAILOR_INTERSTITIAL: "Ad Tailor Interstitial",
        AD_UNIT_TYPE_AD_TAILOR_SURVEY: "Ad Tailor Survey",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_AD_SELECTOR: "Branded Canvas w/ Ad Selector",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_AD_SELECTOR_VIDEO: "Branded Canvas w/ Ad Selector Video",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_INTERSTITIAL_SLATE: "Branded Canvas w/ Interstitial Slate",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_PREMIUM_SHORT_SLATE: "Branded Canvas w/ Premium Short Slate",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_PREMIUM_SLATE: "Branded Canvas w/ Premium Slate",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_PREMIUM_TRAILER_SLATE: "Branded Canvas w/ Premium Trailer Slate",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_SHORT_SLATE: "Branded Canvas w/ Short Slate",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_SLATE: "Branded Canvas w/ Slate",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_TRAILER_SELECTOR: "Branded Canvas w/ Trailer Selector",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_TRAILER_SLATE: "Branded Canvas w/ Trailer Slate",
        AD_UNIT_TYPE_BRANDED_CANVAS_WITH_VIDEO: "Branded Canvas w/ Video",
        AD_UNIT_TYPE_BRANDED_FILM_SLATE: "Branded Film Slate",
        AD_UNIT_TYPE_BRANDED_SHORT_SLATE: "Branded Short Slate",
        AD_UNIT_TYPE_BRANDED_SLATE: "Branded Slate",
        AD_UNIT_TYPE_BRANDED_TRAILER_SLATE: "Branded Trailer Slate",
        AD_UNIT_TYPE_DEDICATED_CANVAS: "Dedicated Canvas",
        AD_UNIT_TYPE_DETACHED_BRANDED_CANVAS: "Detached Branded Canvas",
        AD_UNIT_TYPE_DETACHED_FAN_CONNECT: "Detached Fan Connect",
        AD_UNIT_TYPE_DETACHED_PREMIUM_BRANDED_CANVAS: "Detached Premium Branded Canvas",
        AD_UNIT_TYPE_END_CARD: "End Card",
        AD_UNIT_TYPE_HULU_PLUS_INTERSTITIAL: "Hulu Plus Interstitial",
        AD_UNIT_TYPE_INSTREAM_BLOCKBUSTER: "InStream Blockbuster",
        AD_UNIT_TYPE_MOAT_AD: "Moat Ad",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_AD_SELECTOR: "Premium Branded Canvas w/ Ad Selector",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_AD_SELECTOR_VIDEO: "Premium Branded Canvas w/ Ad Selector Video",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_INTERSTITIAL_SLATE: "Premium Branded Canvas w/ Interstitial Slate",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_PREMIUM_SHORT_SLATE: "Premium Branded Canvas w/ Premium Short Slate",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_PREMIUM_SLATE: "Premium Branded Canvas w/ Premium Slate",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_PREMIUM_TRAILER_SLATE: "Premium Branded Canvas w/ Premium Trailer Slate",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_SHORT_SLATE: "Premium Branded Canvas w/ Short Slate",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_SLATE: "Premium Branded Canvas w/ Slate",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_TRAILER_SELECTOR: "Premium Branded Canvas w/ Trailer Selector",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_TRAILER_SLATE: "Premium Branded Canvas w/ Trailer Slate",
        AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_VIDEO: "Premium Branded Canvas w/ Video",
        AD_UNIT_TYPE_PREMIUM_BRANDED_SHORT_SLATE: "Premium Branded Short Slate",
        AD_UNIT_TYPE_PREMIUM_BRANDED_SLATE: "Premium Branded Slate",
        AD_UNIT_TYPE_PREMIUM_BRANDED_TRAILER_SLATE: "Premium Branded Trailer Slate",
        AD_UNIT_TYPE_PREMIUM_END_CARD: "Premium End Card",
        AD_UNIT_TYPE_PRODUCT_INTERSTITIAL_SLATE: "Product Interstitial Slate",
        AD_UNIT_TYPE_VAST_AD: "Vast Ad",
        AD_UNIT_TYPE_VIDEO_COMMERCIAL: "Video Commercial",
        AD_UNIT_TYPE_VIDEO_TRAILER_SELECTOR: "Video Trailer Selector",
        AD_UNIT_TYPE_VIDEO_TRAILER_SELECTOR_WITH_INTERSTITIAL: "Video Trailer Selector w/ Interstitial",
        AD_UNIT_TYPE_VPAID_VAST_AD: "Vpaid Vast Ad",
        AdInteractionType: {
            Video: "Video",
            MultiAdChoice: "MultiAdChoice",
            FilmSelector: "FilmSelector",
            Banner: "Banner",
            ProductInterstitialSlate: "ProductInterstitialSlate"
        },
        ShareSite: {
            MySpace: "MySpace",
            Facebook: "Facebook",
            Digg: "Digg",
            WindowsLive: "WindowsLive",
            Twitter: "Twitter",
            Delicious: "Delicious",
            Reddit: "Reddit",
            YahooBuzz: "YahooBuzz",
            Undefined: "Undefined"
        },
        POD_TYPES: {
            PREROLL: "preroll",
            AD_BREAK: "adbreak",
            POSTROLL: "postroll"
        },
        ASSET_TYPES: {
            VIDEO: "video",
            SWF: "swf",
            JS: "js",
            POSTER: "poster"
        },
        BITRATES: {
            VIDEO_LOW_BITRATE: 2e5,
            VIDEO_MEDIUM_BITRATE: 4e5,
            VIDEO_HIGH_BITRATE: 65e4,
            VIDEO_1M_BITRATE: 1e6,
            VIDEO_1_5M_BITRATE: 15e5,
            VIDEO_2M_BITRATE: 2e6
        },
        METADATA_KEYS: {
            SWAPPED_IN_AUDIT: "swapped_in_audit",
            SWAPPED_OUT_AUDIT: "swapped_out_audit",
            ACTION_BUTTONS: "actionButtons",
            MULTI_BRAND: "MultiBrand",
            AD_CHOICES_AUDIT_URL: "adChoicesAuditUrl",
            AD_CHOICES_CLICK_THRU: "adChoicesClickThru",
            AD_CHOICES_SALT: "^pandaran_brewmaster^",
            AD_CHOICES_VENDOR: "adChoicesVendor",
            ACTION_BUTTONS_LOCATION_HULU: "hulu"
        },
        REGIONS: {
            BRANDED_SKIN: "brandedSkin",
            SELECTOR_VIDEO: "selector_video",
            COMPANION_BANNER: "companionBanner",
            END_CARD: "endCard",
            ACTION_BAR: "actionBar",
            FAN_CONNECT: "fanConnect"
        },
        VPAID: {
            AD_EXIT_WITH_AD_FREE: "exitWithAdFree",
            AD_EXIT_WITH_SKIP_AD_BREAK: "exitWithSkipAdBreak"
        },
        LINEAR_TYPE: {
            VIDEO: "video",
            AD_BLOCKER: "ad-blocker",
            AD_SELECTOR: "ad-selector",
            MOVIE_SELECTOR: "movie-selector",
            BLANK: "blank",
            UNKOWN: "unkown",
            MOAT: "moat",
            VPAID_VAST: "vpaid-vast",
            SKIP: "skip"
        },
        AD_STATES: {
            INIT: "INIT",
            LOADED: "LOADED",
            PLAYING: "PLAYING",
            PAUSED: "PAUSED",
            STOPPED: "STOPPED"
        },
        NO_ADS_PACKAGE_IDS: [17, 18]
    };
    var ut = {
        BundleTypes: {
            LIVE: "LIVE",
            LOOKBACK: "LOOKBACK",
            RECORDED: "RECORDED",
            VOD: "VOD"
        },
        EntityTypes: {
            EPISODE: "episode",
            MOVIE: "movie",
            NETWORK: "network",
            SERIES: "series",
            SPORTS_EPISODE: "sports_episode",
            EXTRA: "extra"
        },
        RestrictionLevels: {
            KIDS_APPROPRIATE: "kid_appropriate"
        }
    };
    function ct(e, t) {
        return e + "_" + t
    }
    var ht = function(_m5) {
        _inheritsLoose(ht, _m5);
        function ht() {
            var _this15;
            _this15 = _m5.call(this) || this,
            _this15._data = {
                adFeedback: "",
                adUserState: "",
                externalId: "unknown_profile_id",
                isKids: !1,
                isNoah: !1,
                isPremiumPSL: !1,
                packageIds: [],
                planId: 1,
                profileId: "-1",
                socialIdentityIds: [],
                userId: "-1",
                userPGID: 1,
                userToken: null
            };
            return _this15
        }
        var _proto11 = ht.prototype;
        _proto11.parseUserData = function parseUserData(e) {
            var t = {};
            if (e && e.profile) {
                var _i9 = e.profile;
                t.profileId = _i9.id || "-1",
                t.externalId = _i9.external_id || "unknown_profile_id",
                t.isKids = _i9.is_kids || !1,
                t.userId = e.userId || "-1"
            } else
                t.profileId = z.getCookie("_hulu_pid") || "-1",
                t.userId = z.getCookie("_hulu_uid") || "-1",
                t.externalId = z.getCookie("_hulu_e_uid") || "unknown_profile_id",
                t.isKids = z.getCookie("_hulu_is_p_kids") && "0" != z.getCookie("_hulu_is_p_kids") || !1;
            if (e && e.subscription) {
                var _i10 = e.subscription;
                t.planId = _i10.plan_id || 1,
                t.userPGID = _i10.pgid || 1,
                t.packageIds = _i10.package_ids || [],
                t.isPremiumPSL = !!((_i10.features || {}).PSL || {}).skip_ads,
                t.isNoah = !(!_i10.features || !_i10.features.NOAH)
            }
            this.update(t),
            this.updateFromLocalStorage()
        }
        ;
        _proto11.updateFromLocalStorage = function updateFromLocalStorage() {
            var e = T.getItem("hulu$user_ad_state", {})
              , t = e && e[this.userId] ? e[this.userId] : "";
            this.update({
                adUserState: t
            })
        }
        ;
        _proto11.postfixProfileId = function postfixProfileId(e) {
            return ct(e, this._data.profileId)
        }
        ;
        _createClass(ht, [{
            key: "adUserState",
            set: function set(e) {
                this._data.adUserState = e;
                var t = T.getItem("hulu$user_ad_state", {});
                t[this.userId] = e,
                T.setItem("hulu$user_ad_state", t)
            },
            get: function get() {
                return this._data.adUserState
            }
        }, {
            key: "isSubscriber",
            get: function get() {
                var e = this._data.userPGID;
                return e && 2 & e
            }
        }, {
            key: "isLiveSubscriber",
            get: function get() {
                var e = this._data.packageIds;
                return e && -1 != e.indexOf("16")
            }
        }, {
            key: "userToken",
            get: function get() {
                return this._data.userToken
            }
        }]);
        return ht
    }(m);
    ht.defineProxyProperties({
        adFeedback: !1,
        externalId: !1,
        isNoah: !1,
        isPremiumPSL: !1,
        packageIds: !1,
        planId: !1,
        profileId: !1,
        socialIdentityIds: !1,
        userId: !1,
        userPGID: !1,
        userToken: !0
    });
    var pt = new ht
      , _t = i(34)
      , ft = i.n(_t);
    var gt = "https://discover." + (W.IS_QA ? "huluqa" : "hulu") + ".com/content"
      , mt = "hulu:metadata:error";
    var vt = new (function() {
        function _class6() {}
        var _proto12 = _class6.prototype;
        _proto12.requestEntities = function requestEntities(e) {
            var t = this._generateUrl("/entity", {
                language: W.LANGUAGE,
                device_context_id: W.DEVICE_ID,
                eab_ids: e.join(",")
            });
            return this._fetchWithAuth(t).then(function(e) {
                return e.assertOK().json()
            })
        }
        ;
        _proto12.requestFlipTray = function requestFlipTray(e) {
            var _this16 = this;
            var t = {
                current_eab: $.eabId,
                include_genres: !0
            };
            if (null != e && e !== $.eabId)
                t.previous_eab = e;
            else {
                var _e9 = Rt.previousLiveEntity;
                _e9 && _e9.bundle && _e9.bundle.eabId !== $.eabId && (t.previous_eab = _e9.bundle.eabId)
            }
            null != $.latitude && null != $.longitude && (t.lat = $.latitude,
            t.long = $.longitude);
            var i = this._generateUrl("/fliptray", t);
            return this._requestAndRetry({
                asyncActionFn: function asyncActionFn() {
                    return _this16._fetchWithAuth(i)
                },
                errorParseFn: function errorParseFn() {
                    return mt
                },
                message: "HeimdallService: request flip tray error",
                url: i
            })
        }
        ;
        _proto12.requestUpNext = function requestUpNext() {
            var e = {
                current_eab: $.eabId
            };
            null != $.latitude && null != $.longitude && (e.lat = $.latitude,
            e.long = $.longitude),
            null != $.collectionId && (e.collection_id = $.collectionId);
            var t = this._generateUrl("/browse/upnext", e);
            return this._fetchWithAuth(t).then(function(e) {
                return e.assertOK().json()
            })
        }
        ;
        _proto12.requestGoLive = function requestGoLive() {
            var _this17 = this;
            var e = {};
            null != $.latitude && null != $.longitude && (e.lat = $.latitude,
            e.long = $.longitude);
            var t = this._generateUrl("/golive", e);
            return this._requestAndRetry({
                asyncActionFn: function asyncActionFn() {
                    return _this17._fetchWithAuth(t)
                },
                errorParseFn: function errorParseFn() {
                    return mt
                },
                message: "HeimdallService:request go live error",
                url: t
            })
        }
        ;
        _proto12.requestNetworksWithPageUrl = function requestNetworksWithPageUrl(e) {
            return this._fetchWithAuth(e).then(function(e) {
                return e.assertOK().json()
            })
        }
        ;
        _proto12.requestUpnextFlipTrayProgram = function requestUpnextFlipTrayProgram(e, t) {
            var _this18 = this;
            var i = {
                current_eab: e,
                channel_id: t
            };
            null != $.latitude && null != $.longitude && (i.lat = $.latitude,
            i.long = $.longitude);
            var n = this._generateUrl("/fliptray/collections/upnext", i);
            return this._requestAndRetry({
                asyncActionFn: function asyncActionFn() {
                    return _this18._fetchWithAuth(n)
                },
                errorParseFn: function errorParseFn() {
                    return mt
                },
                message: "HeimdallService:request fliptray upnext error",
                url: n
            })
        }
        ;
        _proto12.requestLiveEntityPoll = function requestLiveEntityPoll(e, t) {
            var i = {
                channel_id: e,
                language: W.LANGUAGE
            };
            W.COOKIE_ENABLE || (i.user_token = pt.userToken);
            var n = {};
            t && (n["If-None-Match"] = t);
            var r = this._generateUrl("/entity/poll", i);
            return it(function() {
                return Object(G.i)(r, {
                    headers: n,
                    credentials: W.FETCH_CREDENTIALS
                })
            }, function() {
                return "hulu:metadata:entity:poll:error"
            })
        }
        ;
        _proto12._fetchWithAuth = function _fetchWithAuth(e) {
            var t = {};
            return W.COOKIE_ENABLE || (t.Authorization = "Bearer " + pt.userToken),
            tt(e, {
                headers: t,
                credentials: W.FETCH_CREDENTIALS
            })
        }
        ;
        _proto12._generateUrl = function _generateUrl(e, t) {
            var i = W.HEIMDALL_VERSION.split(".");
            return t.schema = i[1] || 0,
            t.referral_host = W.HOST,
            gt + "/v" + i[0] + e + "?" + ft.a.param(t)
        }
        ;
        _proto12._requestAndRetry = function _requestAndRetry(e) {
            var t = e.asyncActionFn
              , i = e.errorParseFn
              , n = e.message
              , r = e.url;
            return it(t, i).then(function(e) {
                return e.json()
            }).catch(function(e) {
                return e.message = e.message || n,
                e.extraParams.requestUrl = r,
                Promise.reject(e)
            })
        }
        ;
        return _class6
    }());
    var Et = function() {
        function Et(e) {
            var t = e || {};
            this._startDate = ot.parseDate(t.start_date),
            this._endDate = ot.parseDate(t.end_date),
            this._airingStartDate = ot.parseDate(t.airing_start_date),
            this._airingEndDate = ot.parseDate(t.airing_end_date),
            this._isAvailable = t.is_available || !1,
            this._unavalabilityReasonId = t.unavalability_reason_id,
            this._stormflowId = t.stormflow_id
        }
        _createClass(Et, [{
            key: "startDate",
            get: function get() {
                return this._startDate
            }
        }, {
            key: "endDate",
            get: function get() {
                return this._endDate
            },
            set: function set(e) {
                this._endDate = e
            }
        }, {
            key: "airingStartDate",
            get: function get() {
                return this._airingStartDate
            }
        }, {
            key: "airingEndDate",
            get: function get() {
                return this._airingEndDate
            }
        }, {
            key: "isAvailable",
            get: function get() {
                return this._isAvailable
            }
        }, {
            key: "unavalabilityReasonId",
            get: function get() {
                return this._unavalabilityReasonId
            }
        }, {
            key: "stormflowId",
            get: function get() {
                return this._stormflowId
            }
        }, {
            key: "isAvailableNow",
            get: function get() {
                if (!this.startDate)
                    return !1;
                var e = new Date;
                return e >= this.startDate && (!this.endDate || e <= this.endDate)
            }
        }]);
        return Et
    }();
    var bt = function() {
        function bt(e) {
            this._rawData = e;
            var t = e || {};
            this._eabId = t.eab_id,
            this._id = t.id,
            this._duration = this._parseNumber(t.duration),
            this._bundleType = t.bundle_type,
            this._language = t.language && t.language.code,
            this._openCreditEndPos = this._parseNumber(t.open_credit_end_pos),
            this._closeCreditStartPos = this._parseNumber(t.close_credit_start_pos),
            this._channelId = t.channel_id,
            this._channelName = t.channel_name,
            this._networkId = t.network_id,
            this._networkName = t.network_name,
            this._startover = t.rights && t.rights.startover,
            this._allETag = t.all_etag,
            this._airingsETag = t.airings_etag,
            this._rightsETag = t.rights_etag,
            this._streamETag = t.stream_etag,
            this._airingsTtl = t.airings_ttl,
            this._rightsTtl = t.rights_ttl,
            this._streamTtl = t.stream_ttl,
            this._geoRightType = t.geo_right_type,
            this._geokDaId = t.geok_da_id,
            this._packageId = t.package_id,
            this._vendorName = t.vendor_name,
            this._cpId = t.cp_id,
            t.availability && (this._availability = new Et(t.availability))
        }
        var _proto13 = bt.prototype;
        _proto13._parseNumber = function _parseNumber(e) {
            return null != e ? Number(e) : -1
        }
        ;
        _createClass(bt, [{
            key: "eabId",
            get: function get() {
                return this._eabId
            }
        }, {
            key: "id",
            get: function get() {
                return this._id
            }
        }, {
            key: "duration",
            get: function get() {
                return this._duration
            },
            set: function set(e) {
                this._duration = e
            }
        }, {
            key: "bundleType",
            get: function get() {
                return this._bundleType
            }
        }, {
            key: "availability",
            get: function get() {
                return this._availability
            }
        }, {
            key: "networkId",
            get: function get() {
                return this._networkId
            }
        }, {
            key: "networkName",
            get: function get() {
                return this._networkName
            }
        }, {
            key: "channelId",
            get: function get() {
                return this._channelId
            }
        }, {
            key: "channelName",
            get: function get() {
                return this._channelName
            }
        }, {
            key: "isLiveContent",
            get: function get() {
                return this._bundleType === ut.BundleTypes.LIVE
            }
        }, {
            key: "isVODContent",
            get: function get() {
                return this._bundleType === ut.BundleTypes.VOD
            }
        }, {
            key: "isRecordedContent",
            get: function get() {
                return this._bundleType === ut.BundleTypes.RECORDED
            }
        }, {
            key: "isLookbackContent",
            get: function get() {
                return this._bundleType === ut.BundleTypes.LOOKBACK
            }
        }, {
            key: "isLiveNow",
            get: function get() {
                return this.isLiveContent && this._availability && this._availability.isAvailableNow
            }
        }, {
            key: "startover",
            get: function get() {
                return this._startover
            }
        }, {
            key: "allETag",
            get: function get() {
                return this._allETag
            }
        }, {
            key: "airingsETag",
            get: function get() {
                return this._airingsETag
            }
        }, {
            key: "airingsTtl",
            get: function get() {
                return this._airingsTtl
            }
        }, {
            key: "rightsETag",
            get: function get() {
                return this._rightsETag
            }
        }, {
            key: "rightsTtl",
            get: function get() {
                return this._rightsTtl
            }
        }, {
            key: "streamETag",
            get: function get() {
                return this._streamETag
            }
        }, {
            key: "streamTtl",
            get: function get() {
                return this._streamTtl
            }
        }, {
            key: "rawData",
            get: function get() {
                return this._rawData
            }
        }, {
            key: "packageId",
            get: function get() {
                return this._packageId
            }
        }, {
            key: "vendorName",
            get: function get() {
                return this._vendorName
            }
        }, {
            key: "cpId",
            get: function get() {
                return this._cpId
            }
        }]);
        return bt
    }();
    var Tt = function() {
        function Tt(e) {
            var t = e || {};
            this._rawData = e,
            this._type = t._type,
            this._id = t.id,
            this._name = t.name,
            this._href = t.href,
            this._description = t.description || "",
            this._genreNames = t.genre_names || [],
            this._premiereDate = t.premiere_date,
            this._baseVideoImageUrl = null,
            this._duration = t.duration,
            this._rating = (t.rating || {}).code,
            this._contentId = t.content_id,
            this._siteId = t.site_id,
            this._metricsAssetName = t.metrics_info && t.metrics_info.metrics_asset_name,
            this._metricsExternalIds = t.metrics_info && t.metrics_info.external_identifiers,
            this._recoTags = t.metrics_info && t.metrics_info.reco_tags,
            this._restrictionLevel = t.restriction_level;
            var i = t.artwork;
            if (i) {
                var _e10 = i["video.horizontal.hero"] || i["video.horizontal.hero_16:9"] || i["detail.horizontal.hero"] || i["detail.horizontal.hero_16:9"];
                _e10 && (this._baseVideoImageUrl = _e10.path)
            }
            var n = t.primary_branding && t.primary_branding.artwork;
            if (n) {
                this._vendorNetowkLogoMetadata = n["brand.logo"],
                this._watermarkNetowkLogoMetadata = n["brand.watermark"];
                var _e11 = n["brand.watermark.top.right"];
                _e11 && (this._baseNetowkLogoUrl = _e11.path)
            }
            var r = t.series_artwork;
            if (r) {
                var _e12 = r["detail.horizontal.hero"] || r["detail.horizontal.hero_16:9"] || r["program.tile"];
                _e12 && (this._seriesVideoImageUrl = _e12.path)
            }
            this._artworkVersion = this._parseArtworkVersion(this._baseVideoImageUrl || this._seriesVideoImageUrl || this._baseNetowkLogoUrl),
            t.bundle && (this._bundle = new bt(t.bundle))
        }
        var _proto14 = Tt.prototype;
        _proto14.getVideoImageBySize = function getVideoImageBySize(e) {
            var t = null;
            return this._baseVideoImageUrl ? t = this._baseVideoImageUrl + "&size=" + e + "&format=jpeg" : this._seriesVideoImageUrl && (t = this._seriesVideoImageUrl + "&size=" + e + "&format=jpeg"),
            t && this._artworkVersion >= 3 && pt.userToken && (t += "&user_token=" + pt.userToken),
            t
        }
        ;
        _proto14.getNetworkLogoBySize = function getNetworkLogoBySize(e) {
            var t = null;
            return this._baseNetowkLogoUrl && (t = this._baseNetowkLogoUrl + "&size=" + e + "&format=png"),
            t && this._artworkVersion >= 3 && pt.userToken && (t += "&user_token=" + pt.userToken),
            t
        }
        ;
        _proto14.getNetworkLogoFromMetaByWH = function getNetworkLogoFromMetaByWH(e, t) {
            if (e) {
                var _i11, _n5 = e.width, _r3 = e.height, _s3 = e.path;
                return _i11 = _n5 > _r3 ? t + "x" + Math.floor(_r3 / _n5 * t) : Math.floor(_n5 / _r3 * t) + "x" + t,
                _s3 + "&size=" + _i11 + "&format=png"
            }
            return null
        }
        ;
        _proto14.getVendorNetworkLogoByWH = function getVendorNetworkLogoByWH(e) {
            return this.getNetworkLogoFromMetaByWH(this._vendorNetowkLogoMetadata, e)
        }
        ;
        _proto14.getWatermarkNetworkLogoByWH = function getWatermarkNetworkLogoByWH(e) {
            return this.getNetworkLogoFromMetaByWH(this._watermarkNetowkLogoMetadata, e)
        }
        ;
        _proto14.getExternalIdByNamespace = function getExternalIdByNamespace(e) {
            if (!this._metricsExternalIds)
                return null;
            var t = this._metricsExternalIds.find(function(t) {
                return t.namespace == e
            });
            return t && t.id
        }
        ;
        _proto14._parseArtworkVersion = function _parseArtworkVersion(e) {
            var t = 2;
            if (e) {
                var _i12 = e.match(/\/v(\d+)\/artwork\//);
                _i12 && _i12.length >= 2 && (t = parseInt(_i12[1]))
            }
            return t
        }
        ;
        _createClass(Tt, [{
            key: "rawData",
            get: function get() {
                return this._rawData
            }
        }, {
            key: "type",
            get: function get() {
                return this._type
            }
        }, {
            key: "id",
            get: function get() {
                return this._id
            }
        }, {
            key: "name",
            get: function get() {
                return this._name
            }
        }, {
            key: "href",
            get: function get() {
                return this._href
            }
        }, {
            key: "description",
            get: function get() {
                return this._description
            }
        }, {
            key: "bundle",
            get: function get() {
                return this._bundle
            },
            set: function set(e) {
                null == e || e instanceof bt ? (this._bundle = e,
                this._rawData.bundle = e && e.rawData) : (this._bundle = new bt(e),
                this._rawData.bundle = e)
            }
        }, {
            key: "metricsAssetName",
            get: function get() {
                return this._metricsAssetName
            }
        }, {
            key: "recoTags",
            get: function get() {
                return this._recoTags
            }
        }, {
            key: "isLive",
            get: function get() {
                return null != this.bundle && this.bundle.isLiveContent
            }
        }, {
            key: "isVod",
            get: function get() {
                return null != this.bundle && this.bundle.isVODContent
            }
        }, {
            key: "isRecorded",
            get: function get() {
                return null != this.bundle && this.bundle.isRecordedContent
            }
        }, {
            key: "duration",
            get: function get() {
                return this._duration
            }
        }, {
            key: "durationText",
            get: function get() {
                return ot.formatFriendlyTime(this.bundle.duration)
            }
        }, {
            key: "rating",
            get: function get() {
                return this._rating
            }
        }, {
            key: "liveAirText",
            get: function get() {
                if (this.bundle && this.bundle.availability) {
                    var _e13 = ot.formatDateToTime(this.bundle.availability.airingStartDate)
                      , _t9 = ot.formatDateToTime(this.bundle.availability.airingEndDate);
                    return _e13.slice(-2) == _t9.slice(-2) && (_e13 = _e13.slice(0, -2)),
                    _e13 + "-" + _t9
                }
                return ""
            }
        }, {
            key: "formatRemainingTime",
            get: function get() {
                if (this.bundle && this.bundle.availability) {
                    var _e14 = new Date(this.bundle.availability.airingStartDate)
                      , _t10 = new Date(this.bundle.availability.airingEndDate)
                      , _i13 = new Date;
                    if (_i13 < _e14 || _i13 > _t10)
                        return "";
                    return ot.formatFriendlyTime((_t10 - _i13) / 1e3)
                }
                return ""
            }
        }, {
            key: "titleInfos",
            get: function get() {
                var e = this.isLive ? this.liveAirText : this.durationText
                  , t = this.bundle ? this.bundle.networkName : null;
                return {
                    primaryTitle: this.name,
                    secondaryTitle: "",
                    tertiaryTitle: [e, t, this.rating].filter(function(e) {
                        return !!e
                    }).join("  \u2022  "),
                    quaternaryTitle: ""
                }
            }
        }, {
            key: "genreNames",
            get: function get() {
                return this._genreNames
            }
        }, {
            key: "contentId",
            get: function get() {
                return this._contentId
            }
        }, {
            key: "siteId",
            get: function get() {
                return this._siteId
            }
        }, {
            key: "premiereDate",
            get: function get() {
                return this._premiereDate
            }
        }, {
            key: "premiereYear",
            get: function get() {
                return this._premiereDate ? this._premiereDate.split("-")[0] : null
            }
        }, {
            key: "restrictionLevel",
            get: function get() {
                return this._restrictionLevel
            }
        }]);
        return Tt
    }();
    var St = function(_Tt) {
        _inheritsLoose(St, _Tt);
        function St(e) {
            var _this19 = _Tt.call(this, e) || this;
            var t = e || {};
            _this19._seriesId = t.series_id,
            _this19._seriesName = t.series_name,
            _this19._season = _this19._parseNumber(t.season),
            _this19._number = _this19._parseNumber(t.number);
            return _this19
        }
        var _proto15 = St.prototype;
        _proto15._parseNumber = function _parseNumber(e) {
            return null != e ? Number(e) : -1
        }
        ;
        _createClass(St, [{
            key: "seriesName",
            get: function get() {
                return this._seriesName
            }
        }, {
            key: "seriesId",
            get: function get() {
                return this._seriesId
            }
        }, {
            key: "number",
            get: function get() {
                return this._number
            }
        }, {
            key: "season",
            get: function get() {
                return this._season
            }
        }, {
            key: "titleInfos",
            get: function get() {
                var e = this.season > 0 && this.number > 0 ? "S" + this.season + " E" + this.number : ""
                  , t = this.isLive ? this.liveAirText : this.durationText
                  , i = this.bundle ? this.bundle.networkName : null;
                return {
                    primaryTitle: this.seriesName,
                    secondaryTitle: [this.name, e].filter(function(e) {
                        return !!e
                    }).join("  \u2022  "),
                    tertiaryTitle: [t, i, this.rating].filter(function(e) {
                        return !!e
                    }).join("  \u2022  "),
                    quaternaryTitle: [this.seriesName, e].filter(function(e) {
                        return !!e
                    }).join("  \u2022  ")
                }
            }
        }]);
        return St
    }(Tt);
    var At = function e() {
        return {
            then: e,
            catch: e
        }
    }();
    var Pt = function(_Tt2) {
        _inheritsLoose(Pt, _Tt2);
        function Pt(e) {
            var _this20 = _Tt2.call(this, e) || this;
            _this20._parseEpisodes((e || {}).episodes);
            return _this20
        }
        var _proto16 = Pt.prototype;
        _proto16._parseEpisodes = function _parseEpisodes(e) {
            if (this._episodes = [],
            e) {
                for (var _iterator = _createForOfIteratorHelperLoose(e), _step; !(_step = _iterator()).done; ) {
                    var _t11 = _step.value;
                    this._episodes.push(new St(_t11))
                }
            }
        }
        ;
        _createClass(Pt, [{
            key: "episodes",
            get: function get() {
                return this._episodes
            }
        }, {
            key: "bundle",
            get: function get() {
                return !this._bundle && this._episodes && this._episodes[0] ? this._episodes[0].bundle : this._bundle
            },
            set: function set(e) {
                null == e || e instanceof bt ? (this._bundle = e,
                this._rawData.bundle = e && e.rawData) : (this._bundle = new bt(e),
                this._rawData.bundle = e)
            }
        }, {
            key: "titleInfos",
            get: function get() {
                var e = this.isLive ? this.liveAirText : this.durationText
                  , t = this.bundle ? this.bundle.networkName : null;
                return {
                    primaryTitle: this.name,
                    secondaryTitle: "",
                    tertiaryTitle: [e, t, this.rating].filter(function(e) {
                        return !!e
                    }).join(" | "),
                    quaternaryTitle: ""
                }
            }
        }]);
        return Pt
    }(Tt);
    var wt = function(_St) {
        _inheritsLoose(wt, _St);
        function wt(e) {
            var _this21;
            _this21 = _St.call(this, e) || this,
            _this21._teams = e.teams,
            _this21._leagueName = e.league_name;
            return _this21
        }
        _createClass(wt, [{
            key: "leagueName",
            get: function get() {
                return this._leagueName
            }
        }, {
            key: "titleInfos",
            get: function get() {
                var e = this.name
                  , t = this.isLive ? this.liveAirText : this.durationText
                  , i = this.bundle ? this.bundle.networkName : null;
                return this._teams && this._teams.length >= 2 && (e = this._teams[0].name + " vs " + this._teams[1].name),
                {
                    primaryTitle: e,
                    secondaryTitle: this.leagueName,
                    tertiaryTitle: [t, i].filter(function(e) {
                        return !!e
                    }).join("  \u2022  "),
                    quaternaryTitle: ""
                }
            }
        }]);
        return wt
    }(St);
    var Rt = new (function(_m6) {
        _inheritsLoose(_class7, _m6);
        function _class7() {
            return _m6.apply(this, arguments) || this
        }
        var _proto17 = _class7.prototype;
        _proto17.loadEntity = function loadEntity(e) {
            var _this22 = this;
            return it(function() {
                return vt.requestEntities([$.eabId]).then(function(e) {
                    try {
                        var _t12 = _this22.parseEntityFromRawData(e.items && e.items[0]);
                        if (_t12 && _t12.bundle)
                            return _t12;
                        throw new Error("invalid entity")
                    } catch (e) {
                        return Ze(e, "hulu:client:playback:metadata:entity:error:invalid"),
                        Promise.reject(e)
                    }
                })
            }, function(e) {
                if (e && "FetchError" === e.name)
                    switch (e.type) {
                    case "connect_timeout":
                    case "load_timeout":
                        return "hulu:client:playback:metadata:entity:error:timeout";
                    }
                return "hulu:metadata:entity:error"
            }).then(function(t) {
                if (_this22.entity = t,
                e.isCancellationRequested)
                    return At
            })
        }
        ;
        _proto17.reset = function reset() {
            this.set({})
        }
        ;
        _proto17.updateBundleEndTime = function updateBundleEndTime(e) {
            var t = this.entity.bundle;
            t.availability.endDate = new Date(e),
            t.duration = (e - t.availability.startDate) / 1e3,
            this.entity = this.entity,
            Kt.duration = t.duration
        }
        ;
        _proto17.parseEntityFromRawData = function parseEntityFromRawData(e) {
            if (!e)
                return null;
            var t = null;
            switch (e._type) {
            case ut.EntityTypes.SERIES:
                t = new Pt(e);
                break;
            case ut.EntityTypes.EPISODE:
                t = new St(e);
                break;
            case ut.EntityTypes.SPORTS_EPISODE:
                t = new wt(e);
                break;
            default:
                t = new Tt(e);
            }
            return t
        }
        ;
        _createClass(_class7, [{
            key: "entity",
            set: function set(e) {
                !e || e instanceof Tt || (e = this.parseEntityFromRawData(e)),
                this.update({
                    entity: e
                })
            },
            get: function get() {
                return this._data.entity
            }
        }, {
            key: "nextEntity",
            set: function set(e) {
                !e || e instanceof Tt || (e = this.parseEntityFromRawData(e)),
                this.update({
                    nextEntity: e
                })
            },
            get: function get() {
                return this._data.nextEntity
            }
        }, {
            key: "previousLiveEntity",
            set: function set(e) {
                !e || e instanceof Tt || (e = this.parseEntityFromRawData(e)),
                this.update({
                    previousLiveEntity: e
                })
            },
            get: function get() {
                return this._data.previousLiveEntity
            }
        }]);
        return _class7
    }(m));
    var Dt = "flip_tray_autoplay"
      , Lt = "flip_tray_user_action"
      , Mt = "automatic_stream_switch"
      , Ot = "user_initiated"
      , xt = "up_next";
    var Ut = {
        PLAYLIST_CALL_OFFSET: 5,
        PROGRAM_ROLLOVER_T_MINUS: 30,
        LIVE_LINEAR_THRESHOLD: 60,
        EPSILON: .001,
        SEEK_EPSILON: 1,
        BLACKOUT_PLAYLIST_DELAY: 15,
        STREAM_CHANGED_PLAYLIST_DELAY: 15,
        RolloverActions: {
            SIMPLE: "simple",
            SIMPLE_NONLINEAR: "simplenonlinear",
            RELOAD: "reload",
            PLAYLIST_ERROR: "playlisterror",
            UPNEXT_ERROR: "upnexterror"
        },
        NavigateTypes: {
            VIDEO: "video",
            NETWORK: "network",
            DETAILS: "details"
        },
        ViewModeTypes: {
            FULLSCREEN: "fullscreen",
            NORMAL: "normal",
            MINIMIZED: "minimized"
        }
    };
    var Bt = new (function(_m7) {
        _inheritsLoose(_class8, _m7);
        function _class8() {
            var _this23;
            _this23 = _m7.call(this) || this,
            _this23._data = {
                startTime: 0
            };
            return _this23
        }
        var _proto18 = _class8.prototype;
        _proto18.appToPlayer = function appToPlayer(e) {
            return Kt.isLive ? e + this._data.startTime : e
        }
        ;
        _proto18.appToUx = function appToUx(e) {
            if (!Wt.useManifestBreaks || Kt.isLive)
                return e;
            {
                var _t13 = 0;
                for (var _iterator2 = _createForOfIteratorHelperLoose(Wt.adBreaks), _step2; !(_step2 = _iterator2()).done; ) {
                    var _i14 = _step2.value;
                    if (e < _i14.start)
                        break;
                    e < _i14.end ? _t13 += e - _i14.start : _t13 += _i14.end - _i14.start
                }
                return e - _t13
            }
        }
        ;
        _proto18.playerToApp = function playerToApp(e) {
            return Kt.isLive ? Math.max(e - this._data.startTime, 0) : e
        }
        ;
        _proto18.playerToUx = function playerToUx(e) {
            return this.appToUx(this.playerToApp(e))
        }
        ;
        _proto18.uxToApp = function uxToApp(e) {
            if (!Wt.useManifestBreaks || Kt.isLive)
                return e;
            for (var _iterator3 = _createForOfIteratorHelperLoose(Wt.adBreaks), _step3; !(_step3 = _iterator3()).done; ) {
                var _t14 = _step3.value;
                if (e < _t14.start)
                    break;
                e += _t14.end - _t14.start
            }
            return e
        }
        ;
        _proto18.uxToPlayer = function uxToPlayer(e) {
            return this.appToPlayer(this.uxToApp(e))
        }
        ;
        _proto18.uxToUtc = function uxToUtc(e) {
            return this._data.startTime + this.uxToApp(e)
        }
        ;
        return _class8
    }(m));
    var Ft = {
        CONTENT: "content",
        INSERTED_AD: "inserted-ad",
        BURNED_IN_AD: "burned-in-ad",
        INTRO: "intro",
        POST_INTRO: "post-intro",
        UNKNOWN: "unknown"
    };
    var Wt = new (function(_m8) {
        _inheritsLoose(_class9, _m8);
        function _class9() {
            var _this24;
            _this24 = _m8.call(this) || this,
            _this24._data = {
                useBurnInAds: !1,
                adBreaks: [],
                cuePoints: []
            };
            return _this24
        }
        var _proto19 = _class9.prototype;
        _proto19._createAdCuePoint = function _createAdCuePoint(e, t) {
            return {
                time: t,
                data: {
                    type: Ft.INSERTED_AD,
                    pod: e
                }
            }
        }
        ;
        _proto19.updateFromDeejay = function updateFromDeejay(e) {
            var _this25 = this;
            if (W.XLINK_ENABLE && Kt.isVod || Rt.entity && Rt.entity.bundle && dt.NO_ADS_PACKAGE_IDS.includes(Rt.entity.bundle.packageId))
                this.update({
                    useBurnInAds: !1,
                    cuePoints: [],
                    adBreaks: []
                });
            else if (e.use_manifest_breaks)
                this.update({
                    useBurnInAds: !0,
                    cuePoints: [],
                    adBreaks: []
                });
            else {
                var _t15 = e.ad_break_times || []
                  , _i15 = [this._createAdCuePoint(0, 0), this._createAdCuePoint(1, 0)];
                _i15.push.apply(_i15, _t15.map(function(e, t) {
                    return _this25._createAdCuePoint(t + 2, e / 1e3)
                })),
                this.update({
                    useBurnInAds: !1,
                    cuePoints: _i15,
                    adBreaks: _i15.map(function(e, t) {
                        return {
                            start: e.time,
                            end: e.time,
                            index: t
                        }
                    })
                })
            }
        }
        ;
        _proto19.isAdPeriod = function isAdPeriod(e) {
            var t = e.assetIdentifier;
            return (e.segmentType || {}).value === "ad" || null === t || t.value === "assetAd" || t.value === "huluAd"
        }
        ;
        _proto19.updatePeriods = function updatePeriods(e) {
            if (null == e)
                return;
            if (!this.useManifestBreaks)
                return;
            var t = []
              , i = -1 / 0;
            for (var _iterator4 = _createForOfIteratorHelperLoose(e.periods), _step4; !(_step4 = _iterator4()).done; ) {
                var _n7 = _step4.value;
                if (!this.isAdPeriod(_n7))
                    continue;
                if (Kt.isLive && null != _n7.duration && _n7.start + _n7.duration < Bt.get().startTime)
                    continue;
                var _e15 = Bt.playerToApp(_n7.start)
                  , _r4 = Bt.playerToApp(_n7.start + (_n7.duration || 0))
                  , _s4 = !1;
                Kt.isLive && null == _n7.duration && (_s4 = !0,
                _r4 = Kt.seekableWindow.end),
                _e15 < i + Ut.EPSILON && (!W.XLINK_ENABLE || this.useBurnInAds) ? (t[t.length - 1].end = _r4,
                t[t.length - 1].incomplete = _s4) : t.push({
                    start: _e15,
                    end: _r4,
                    index: t.length,
                    incomplete: _s4,
                    segments: []
                });
                var _a3 = t[t.length - 1].segments;
                _a3.push({
                    start: _e15,
                    end: _r4,
                    incomplete: _s4,
                    index: _a3.length
                }),
                i = _r4
            }
            this.update({
                adBreaks: t
            })
        }
        ;
        _proto19.updateIncompleteBreak = function updateIncompleteBreak(e) {
            if (!Kt.isLive)
                return;
            var t = this._data.adBreaks[this._data.adBreaks.length - 1];
            t && t.incomplete && this.updatePeriods(e)
        }
        ;
        _proto19.findLastCrossedBreak = function findLastCrossedBreak(e, t) {
            if (t <= e)
                return null;
            var i = this._data.adBreaks;
            for (var _n8 = i.length - 1; _n8 >= 0 && !(i[_n8].start < e); --_n8) {
                if (i[_n8].start < t)
                    return i[_n8]
            }
            return null
        }
        ;
        _proto19.findContainingBreak = function findContainingBreak(e) {
            if (!this.useManifestBreaks)
                return null;
            var t = this._data.adBreaks;
            for (var _i16 = 0; _i16 < t.length && !(t[_i16].start > e + Ut.EPSILON); ++_i16) {
                if (t[_i16].end > e - Ut.EPSILON)
                    return t[_i16]
            }
            return null
        }
        ;
        _createClass(_class9, [{
            key: "useManifestBreaks",
            get: function get() {
                return this.useBurnInAds || W.XLINK_ENABLE
            }
        }, {
            key: "useBurnInAds",
            get: function get() {
                return this._data.useBurnInAds
            }
        }, {
            key: "adBreaks",
            get: function get() {
                return this._data.adBreaks
            }
        }, {
            key: "cuePoints",
            get: function get() {
                return this._data.cuePoints
            }
        }, {
            key: "adBreakTime",
            get: function get() {
                var e = this.findContainingBreak(Kt.currentTime);
                var t = 0
                  , i = 0;
                return e && e.incomplete && (t = e.end - e.start,
                i = e.end - Kt.currentTime),
                {
                    duration: t,
                    remaining: i
                }
            }
        }]);
        return _class9
    }(m));
    var Gt = function(_m9) {
        _inheritsLoose(Gt, _m9);
        function Gt() {
            var _this26;
            _this26 = _m9.call(this) || this,
            _this26._data = {
                buffered: {},
                currentTime: 0,
                positionInPeriod: 0,
                duration: 0,
                mediaType: Ft.CONTENT,
                lastMediaType: Ft.UNKNOWN,
                isActive: !1,
                isLive: !1,
                isVod: !1,
                paused: !1,
                playbackJoinPos: -1,
                recordingOffset: -1,
                startPosition: -1,
                totalPlayedTime: 0,
                lastContentPlayedDuration: 0,
                lastRecoredPlayedDuration: 0,
                adConsumed: !1,
                volume: T.getItem("hulu$volume", 1),
                maxVideoWidth: 0,
                maxVideoHeight: 0,
                videoWidth: 0,
                videoHeight: 0,
                muted: T.getItem("hulu$muted", !1),
                bitrate: 0,
                maxBitrate: 1 / 0,
                cdn: "",
                seekableWindow: {
                    start: 0,
                    end: 0
                },
                manifest: {},
                mbrGroupId: -1,
                mbrVersion: "0.0.0",
                videoResolution: "",
                videoFrameRate: "",
                videoCodec: "",
                videoBitrate: 0,
                audioBitrate: 0,
                audioChannelMap: "",
                audioCodec: "",
                audioLanguage: "",
                audioKind: "main",
                chapters: [],
                segmentType: "",
                deviceCapabilities: {},
                deviceCapabilitiesPromise: Promise.resolve({}),
                audioTracks: [],
                hevcFailure: T.getItem("hulu$hevc_failure", null),
                hevcDisabledForSession: !1,
                drmState: {
                    supportWideVine: !1,
                    supportHDCP: !1
                }
            },
            _this26.playedVideoCount = 0;
            return _this26
        }
        var _proto20 = Gt.prototype;
        _proto20.reset = function reset() {
            this.update({
                isActive: !1,
                totalPlayedTime: 0,
                currentTime: 0,
                lastRecoredPlayedDuration: 0,
                startPosition: -1,
                cdn: "",
                mbrGroupId: -1,
                audioLanguage: "",
                audioKind: "main",
                hevcDisabledForSession: !1,
                maxVideoWidth: 0,
                maxVideoHeight: 0
            })
        }
        ;
        _proto20.updateProgress = function updateProgress(e) {
            var t = e - this.currentTime;
            t > 0 && t < 1 && (this.totalPlayedTime += t),
            this.currentTime = e
        }
        ;
        _proto20.updateDeviceCapabilities = function updateDeviceCapabilities(e) {
            var _this27 = this;
            var t = {}
              , i = ["h264", "hevc", "ec3"].map(function(i) {
                return e.getDeviceCapability(i).then(function(e) {
                    t[i] = e
                }, function() {
                    t[i] = null
                })
            });
            this._data.deviceCapabilitiesPromise = Promise.all(i).then(function() {
                _this27._data.deviceCapabilities = t
            })
        }
        ;
        _proto20.accumulateHEVCError = function accumulateHEVCError() {
            this._data.hevcDisabledForSession = !0;
            var e = this._data.hevcFailure || {};
            e.continuousTimes = (e.continuousTimes || 0) + 1,
            e.timestamp = Date.now(),
            this._data.hevcFailure = e,
            T.setItem("hulu$hevc_failure", e)
        }
        ;
        _proto20.checkHEVCRecordExpired = function checkHEVCRecordExpired() {
            this._data.hevcFailure && this._data.hevcFailure.timestamp < Date.now() - 6048e5 && (this._data.hevcFailure = null,
            T.setItem("hulu$hevc_failure", null))
        }
        ;
        _createClass(Gt, [{
            key: "manifest",
            get: function get() {
                return this._data.manifest
            },
            set: function set(e) {
                this.update({
                    manifest: e || {}
                })
            }
        }, {
            key: "chapters",
            get: function get() {
                return this._data.chapters
            },
            set: function set(e) {
                this.update({
                    chapters: e || []
                })
            }
        }, {
            key: "buffered",
            get: function get() {
                return this._data.buffered
            },
            set: function set(e) {
                this.update({
                    buffered: e || {}
                })
            }
        }, {
            key: "bitrate",
            get: function get() {
                return this._data.bitrate
            },
            set: function set(e) {
                this.update({
                    bitrate: e || 0
                })
            }
        }, {
            key: "maxBitrate",
            get: function get() {
                return this._data.maxBitrate
            },
            set: function set(e) {
                this._data.maxBitrate = e || 1 / 0
            }
        }, {
            key: "cdn",
            get: function get() {
                return this._data.cdn
            },
            set: function set(e) {
                this.update({
                    cdn: e || ""
                })
            }
        }, {
            key: "duration",
            get: function get() {
                return this._data.duration
            },
            set: function set(e) {
                this.update({
                    duration: e || 0
                })
            }
        }, {
            key: "currentTime",
            get: function get() {
                return this._data.currentTime
            },
            set: function set(e) {
                this.update({
                    currentTime: e || 0
                })
            }
        }, {
            key: "positionInPeriod",
            get: function get() {
                return this._data.positionInPeriod
            },
            set: function set(e) {
                this.update({
                    positionInPeriod: e || 0
                })
            }
        }, {
            key: "volume",
            set: function set(e) {
                e = Math.min(1, Math.max(0, e)),
                T.setItem("hulu$volume", e),
                this.update({
                    volume: e
                })
            },
            get: function get() {
                return this._data.volume
            }
        }, {
            key: "muted",
            set: function set(e) {
                e = !!e,
                T.setItem("hulu$muted", e),
                this.update({
                    muted: e
                })
            },
            get: function get() {
                return this._data.muted
            }
        }, {
            key: "playVolume",
            get: function get() {
                return this._data.muted ? 0 : this._data.volume
            }
        }, {
            key: "nextCuePoint",
            get: function get() {
                return this._data.nextCuePoint
            },
            set: function set(e) {
                this.update({
                    nextCuePoint: e
                })
            }
        }, {
            key: "currentCuePoint",
            get: function get() {
                return this._data.currentCuePoint
            },
            set: function set(e) {
                this.update({
                    currentCuePoint: e
                })
            }
        }, {
            key: "mediaType",
            get: function get() {
                return this._data.mediaType
            },
            set: function set(e) {
                this._data.lastMediaType = this.mediaType,
                this.update({
                    mediaType: e
                }),
                e == Ft.CONTENT ? this.lastContentPlayedDuration = this.totalPlayedTime : this.adConsumed = !0
            }
        }, {
            key: "lastMediaType",
            get: function get() {
                return this._data.lastMediaType
            }
        }, {
            key: "seekableWindow",
            get: function get() {
                return this._data.seekableWindow
            },
            set: function set(e) {
                var t = Rt.entity;
                if (0 == e.length || null == t)
                    this.update({
                        seekableWindow: {
                            start: 0,
                            end: 0
                        }
                    });
                else {
                    var _i17 = Bt.playerToApp(e.start(0))
                      , _n9 = Bt.playerToApp(e.end(0));
                    t.isLive ? (this._data.playbackJoinPos < 0 && this.update({
                        playbackJoinPos: _n9
                    }),
                    t.bundle.startover || (_i17 = this.isRecording ? Math.max(_i17, this._data.recordingOffset) : Math.max(_i17, this._data.playbackJoinPos, _n9 - ei.playlist.bufferWindowSize))) : this.isPartialPSL && (_i17 = Math.max(_i17, this._data.recordingOffset)),
                    this.update({
                        seekableWindow: {
                            start: _i17,
                            end: _n9
                        }
                    })
                }
            }
        }, {
            key: "isRecording",
            get: function get() {
                return this._data.recordingOffset >= 0 && Rt.entity && Rt.entity.isLive
            },
            set: function set(e) {
                e && this.isLive && this.update({
                    recordingOffset: Math.max(this.seekableWindow && this.seekableWindow.start || 0, 0)
                })
            }
        }, {
            key: "isPartialPSL",
            get: function get() {
                return this._data.recordingOffset > 0 && Rt.entity.bundle.isRecordedContent
            }
        }, {
            key: "liveEdge",
            get: function get() {
                return this._data.seekableWindow.end
            }
        }, {
            key: "isLive",
            get: function get() {
                return this._data.isLive
            }
        }, {
            key: "isVod",
            get: function get() {
                return this._data.isVod
            }
        }, {
            key: "paused",
            set: function set(e) {
                this.update({
                    paused: e
                })
            },
            get: function get() {
                return this._data.paused
            }
        }, {
            key: "videoResolution",
            get: function get() {
                return this.videoWidth + "x" + this.videoHeight
            }
        }, {
            key: "maxVideoResolution",
            get: function get() {
                return this.maxVideoWidth + "x" + this.maxVideoHeight
            }
        }, {
            key: "maxVideoWidth",
            set: function set(e) {
                return this.update({
                    maxVideoWidth: e
                })
            },
            get: function get() {
                return this._data.maxVideoWidth
            }
        }, {
            key: "videoWidth",
            set: function set(e) {
                return this.update({
                    videoWidth: e
                })
            },
            get: function get() {
                return this._data.videoWidth
            }
        }, {
            key: "maxVideoHeight",
            set: function set(e) {
                return this.update({
                    maxVideoHeight: e
                })
            },
            get: function get() {
                return this._data.maxVideoHeight
            }
        }, {
            key: "videoHeight",
            set: function set(e) {
                return this.update({
                    videoHeight: e
                })
            },
            get: function get() {
                return this._data.videoHeight
            }
        }, {
            key: "videoFrameRate",
            set: function set(e) {
                this.update({
                    videoFrameRate: e
                })
            },
            get: function get() {
                return this._data.videoFrameRate || 0
            }
        }, {
            key: "videoCodec",
            set: function set(e) {
                this.update({
                    videoCodec: e
                })
            },
            get: function get() {
                return this._data.videoCodec
            }
        }, {
            key: "videoBitrate",
            set: function set(e) {
                this.update({
                    videoBitrate: e || 0
                })
            },
            get: function get() {
                return this._data.videoBitrate
            }
        }, {
            key: "audioBitrate",
            set: function set(e) {
                this.update({
                    audioBitrate: e || 0
                })
            },
            get: function get() {
                return this._data.audioBitrate
            }
        }, {
            key: "audioChannelMap",
            set: function set(e) {
                this.update({
                    audioChannelMap: e
                })
            },
            get: function get() {
                return this._data.audioChannelMap
            }
        }, {
            key: "audioCodec",
            set: function set(e) {
                this.update({
                    audioCodec: e
                })
            },
            get: function get() {
                return this._data.audioCodec
            }
        }, {
            key: "mbrVersion",
            set: function set(e) {
                this._data.mbrVersion = e
            },
            get: function get() {
                return this._data.mbrVersion
            }
        }, {
            key: "mbrGroupId",
            set: function set(e) {
                this._data.mbrGroupId = e
            },
            get: function get() {
                return this._data.mbrGroupId
            }
        }, {
            key: "isHls",
            get: function get() {
                if (ei.playlist && ei.playlist.streamUrl) {
                    var _e16 = ei.playlist.streamUrl;
                    if (/\.m3u8/gi.test(_e16))
                        return !0
                }
                return !1
            }
        }, {
            key: "startPosition",
            set: function set(e) {
                this.update({
                    startPosition: e
                })
            },
            get: function get() {
                return this._data.startPosition
            }
        }, {
            key: "chapterPosition",
            get: function get() {
                var _this28 = this;
                var e = Wt.adBreaks.map(function(e) {
                    return e.start
                });
                return e[0] === e[1] && e.shift(),
                e.push(this.duration),
                e.findIndex(function(e) {
                    return e >= _this28.currentTime
                })
            }
        }, {
            key: "activeAudioTrack",
            get: function get() {
                var _this29 = this;
                var e = this._data.audioTracks;
                if (e) {
                    var _t16 = e.filter(function(e) {
                        return "main" === e.kind
                    })[0] || e[0]
                      , _i18 = e.find(function(e) {
                        return e.language === _this29.audioLanguage && e.kind === _this29.audioKind
                    })
                      , _n10 = {
                        language: this.audioLanguage,
                        kind: this.audioKind
                    };
                    return _i18 || _n10 || _t16 || {}
                }
                return {}
            }
        }, {
            key: "drmState",
            get: function get() {
                return this._data.drmState
            }
        }, {
            key: "hevcDisabledForSession",
            get: function get() {
                return this._data.hevcDisabledForSession
            }
        }, {
            key: "hevcDisabledForDevice",
            get: function get() {
                return !!this._data.hevcFailure && !(this._data.hevcFailure.continuousTimes < 3)
            }
        }]);
        return Gt
    }(m);
    Gt.defineProxyProperties({
        adConsumed: !0,
        isActive: !0,
        totalPlayedTime: !0,
        lastContentPlayedDuration: !0,
        lastRecoredPlayedDuration: !0,
        segmentType: !0,
        deviceCapabilities: !1,
        deviceCapabilitiesPromise: !1,
        audioLanguage: !0,
        audioKind: !0,
        audioTracks: !0
    });
    var Kt = new Gt;
    var zt = new (function() {
        function _class10() {
            this._pingStart = !1,
            this._sauronItem = null
        }
        var _proto21 = _class10.prototype;
        _proto21.startPing = function startPing(e) {
            var _this30 = this;
            if (!W.IS_NONSUB) {
                if (!e) {
                    var _t17 = ei.playlist.get();
                    e = {
                        sauronId: _t17.sauron_id,
                        sauronToken: _t17.sauron_token,
                        sauronTokenTtl: _t17.sauron_token_ttl
                    }
                }
                this.clearForSession(),
                this._pingStart = !0,
                this._sauronItem = {
                    id: e.sauronId,
                    token: e.sauronToken
                },
                this._pingTimer = setTimeout(function() {
                    return _this30._ping()
                }, parseInt(e.sauronTokenTtl) / 2 * 1e3)
            }
        }
        ;
        _proto21.updateSauronData = function updateSauronData(e) {
            W.IS_NONSUB || this._pingStart && this.startPing(e)
        }
        ;
        _proto21.clearForDevice = function clearForDevice() {
            return !at.isValid || W.IS_NONSUB ? Promise.resolve() : this._clear(this._generateUrl(""), {
                method: "DELETE",
                headers: {
                    "Content-type": "application/x-www-form-urlencoded"
                },
                body: this._createFormDataBody({
                    access_token: at.sauronAccessToken,
                    device_identifier: $.computerGuid
                }),
                credentials: W.FETCH_CREDENTIALS
            })
        }
        ;
        _proto21.clearForSession = function clearForSession(e) {
            if (!at.isValid || W.IS_NONSUB)
                return Promise.resolve();
            if (null == this._sauronItem)
                return Promise.resolve();
            var t = this._generateUrl("/" + this._sauronItem.id + "/delete")
              , i = this._createFormDataBody({
                access_token: at.sauronAccessToken
            });
            if (e) {
                var _e17 = !1;
                if (navigator.sendBeacon) {
                    var _n11 = new Blob([i],{
                        type: "application/x-www-form-urlencoded"
                    });
                    _e17 = navigator.sendBeacon(t, _n11)
                }
                if (!_e17) {
                    var _e18 = new XMLHttpRequest;
                    _e18.open("POST", t, !1),
                    _e18.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
                    _e18.send(i)
                }
                return Promise.resolve()
            }
            return this._clear(t, {
                method: "POST",
                headers: {
                    "Content-type": "application/x-www-form-urlencoded"
                },
                body: i,
                credentials: W.FETCH_CREDENTIALS
            })
        }
        ;
        _proto21._ping = function _ping() {
            var _this31 = this;
            var e = this._generateUrl("/" + this._sauronItem.id + "/update")
              , t = {
                method: "POST",
                headers: {
                    "Content-type": "application/x-www-form-urlencoded"
                },
                body: this._createFormDataBody({
                    access_token: at.sauronAccessToken,
                    key_version: 0
                }),
                credentials: W.FETCH_CREDENTIALS
            };
            tt(e, t, {
                timeoutMs: 1e4
            }).then(function(e) {
                return e.assertOK().json()
            }).then(function(e) {
                null != _this31._sauronItem && (_this31._sauronItem.id = e.sauron_id,
                _this31._sauronItem.token = e.sauron_token,
                _this31._pingTimer = setTimeout(function() {
                    return _this31._ping()
                }, parseInt(e.sauron_token_ttl) / 2 * 1e3))
            }).catch(function(e) {
                null != _this31._sauronItem && (_this31._handleSessionUpdateError(e),
                _this31._requestNewTokenFromDeejay())
            })
        }
        ;
        _proto21._handleSessionUpdateError = function _handleSessionUpdateError(e) {
            var t = new ze("hulu:client:playback:view-tracking:error");
            t.rawError = e,
            qe.error = t
        }
        ;
        _proto21._clear = function _clear(e, t) {
            return clearTimeout(this._pingTimer),
            this._pingStart = !1,
            this._pingTimer = null,
            this._sauronItem = null,
            Object(G.i)(e, t, {
                timeoutMs: 1e4
            }).then(function(e) {
                return e.assertOK()
            }).then(function() {
                G.c.info("SauronModel.VIEW_TOKEN_CLEARED")
            }).catch(function() {
                G.c.warn("SauronModel.VIEW_TOKEN_CLEAR_FAILURE")
            })
        }
        ;
        _proto21._requestNewTokenFromDeejay = function _requestNewTokenFromDeejay() {
            var _this32 = this;
            var e = new G.a;
            ei.loadPlaylist(!0, e.token).catch(function(e) {
                null != _this32._sauronItem && (qe.error = e)
            })
        }
        ;
        _proto21._createFormDataBody = function _createFormDataBody(e) {
            W.COOKIE_ENABLE || (e.user_token = pt.userToken);
            var t = "";
            for (var _i19 in e) {
                t += _i19 + "=" + Q.encode(e[_i19]) + "&"
            }
            return t.slice(0, -1)
        }
        ;
        _proto21._generateUrl = function _generateUrl(e) {
            return at.sauronEndpoint + "/v1/views" + e
        }
        ;
        return _class10
    }());
    var $t = "hulu:client:playback:playlist:error:decryption"
      , Jt = [{
        initDataTypes: ["cenc"],
        audioCapabilities: [{
            contentType: "audio/mp4; codecs=mp4a.40.2",
            robustness: ""
        }],
        videoCapabilities: [{
            contentType: "video/mp4; codecs=avc1.64001E",
            robustness: ""
        }]
    }];
    var Zt = new (function() {
        function _class11() {}
        var _proto22 = _class11.prototype;
        _proto22.loadPlaylist = function loadPlaylist(e, t, i, n) {
            var _this33 = this;
            var r = null
              , s = !1;
            return Promise.all([at.loadConfig(), Kt.deviceCapabilitiesPromise.catch(function() {
                return {}
            }), this._checkHDCPForWideVine().then(function(e) {
                var t = e.supportWideVine
                  , i = e.supportHDCP;
                Kt.drmState.supportWideVine = t,
                Kt.drmState.supportHDCP = i,
                s = _this33._shouldLimitSizeToSupportHDCPForWV(t, i)
            })]).then(function() {
                return r = _this33._getRequestParams(e, t, i, s),
                _this33._actualLoadAndDecryptPlaylist(r, n)
            }).then(function(e) {
                return zt.updateSauronData({
                    sauronId: e.sauron_id,
                    sauronToken: e.sauron_token,
                    sauronTokenTtl: e.sauron_token_ttl
                }),
                e
            }).catch(function(e) {
                if (r) {
                    var _r5 = r
                      , _t18 = _r5.playlistUrl
                      , _i20 = _r5.playlistBody;
                    e.extraParams.playlistUrl = _t18,
                    e.extraParams.playlistBody = JSON.stringify(_i20)
                }
                return Promise.reject(e)
            })
        }
        ;
        _proto22._getRequestParams = function _getRequestParams(e, t, i, n) {
            var r = {
                device_identifier: $.sauronDeviceIdentifier,
                deejay_device_id: W.DEEJAY_DEVICE_ID,
                version: W.DEEJAY_KEY_VERSION,
                all_cdn: W.ALL_CDN_ENABLE,
                content_eab_id: e,
                region: W.REGION,
                xlink_support: W.XLINK_ENABLE,
                device_ad_id: $.deviceAdId,
                limit_ad_tracking: $.limitAdTracking,
                ignore_kids_block: i,
                language: W.LANGUAGE,
                guid: $.computerGuid,
                rv: Math.floor(1e6 * Math.random()),
                kv: at.keyId
            };
            return W.COOKIE_ENABLE || (r.token = pt.userToken),
            null != t && (r.channel_id = t),
            r.play_intent = ei.playIntent,
            null != $.latitude && null != $.longitude && "-1" != $.latitude && "-1" != $.longitude && (r.lat = $.latitude,
            r.long = $.longitude),
            r = Object.assign(r, this._buildPlaybackConfig(n)),
            {
                playlistUrl: at.playlistEndpoint + "/v4/playlist",
                playlistBody: JSON.stringify(r)
            }
        }
        ;
        _proto22._actualLoadAndDecryptPlaylist = function _actualLoadAndDecryptPlaylist(e, t) {
            var _this34 = this;
            var i = e.playlistUrl
              , n = e.playlistBody;
            return it(function() {
                return tt(i, {
                    method: "POST",
                    headers: {
                        "Content-type": "application/json"
                    },
                    credentials: W.FETCH_CREDENTIALS,
                    body: n
                }).then(function(e) {
                    return e.text()
                }).then(function(e) {
                    return _this34._parseRawPlaylist(e, at.key)
                })
            }, t ? function(e) {
                var t = et(e) || "hulu:client:playback:live:playlist:error:timeout";
                if (e.code) {
                    var _t19 = e.code;
                    if (/^(BYA-.)|(DJA-.)|(IFS-.)/i.test(_t19))
                        return "hulu:playstack:error:" + _t19.toLowerCase()
                }
                return t
            }
            : function(e) {
                var t = et(e) || "hulu:playstack:error";
                if (e && "FetchError" === e.name)
                    switch (e.type) {
                    case "connect_timeout":
                    case "load_timeout":
                        t = "hulu:client:playback:playlist:error:timeout";
                    }
                if (e.code) {
                    var _t20 = e.code;
                    if (/^(BYA-.)|(DJA-.)|(IFS-.)/i.test(_t20))
                        return "hulu:playstack:error:" + _t20.toLowerCase()
                }
                return t
            }
            ).catch(function(e) {
                var t = e.unifiedErrorName === $t ? "deejay:parse deejay playlist error" : "deejay:fetch playlist error";
                return e.message = e.message || t,
                Promise.reject(e)
            })
        }
        ;
        _proto22._buildPlaybackConfig = function _buildPlaybackConfig(e) {
            var t = Q.isFairPlayHlsSupported()
              , i = {
                version: 2,
                manifest: {
                    multiple_cdns: !t && W.ALL_CDN_ENABLE,
                    patch_updates: !0,
                    hulu_types: !0,
                    live_dai: !t,
                    secondary_audio: !0
                }
            };
            var n = [];
            var r = Kt.deviceCapabilities.hevc
              , a = $.abRules.isH265Enabled && !Kt.hevcDisabledForDevice && !Kt.hevcDisabledForSession
              , o = e ? 1024 : 1280
              , l = e ? 546 : 720;
            !t && r && a && n.push({
                type: "H265",
                width: Math.min(r.width, o),
                height: Math.min(r.height, l),
                framerate: r.framerate,
                level: (r.level / 30).toString(),
                tier: "MAIN",
                profile: r.profile
            });
            var d = Kt.deviceCapabilities.h264;
            if (d) {
                var _e19 = $.abRules.is720p60Enabled;
                n.push({
                    type: "H264",
                    width: Math.min(d.width, o),
                    height: Math.min(d.height, l),
                    framerate: _e19 ? d.framerate : 30,
                    level: (_e19 ? d.level / 10 : 3.1).toString(),
                    profile: d.profile
                })
            }
            return n.length > 0 && (i.video = {
                codecs: {
                    values: n
                }
            }),
            Kt.deviceCapabilities.ec3 && (i.audio = {
                codecs: {
                    values: [{
                        type: "EC3"
                    }, {
                        type: "AAC"
                    }]
                }
            },
            t && (i.segments = {
                values: [{
                    type: "FMP4",
                    encryption: {
                        mode: "CBCS",
                        type: "CENC"
                    },
                    muxed: !1,
                    https: !0
                }, {
                    type: "MPEGTS",
                    encryption: {
                        mode: "CBCS",
                        type: "SAMPLE_AES"
                    },
                    muxed: !0,
                    https: !0
                }]
            })),
            {
                playback: i
            }
        }
        ;
        _proto22._parseRawPlaylist = function _parseRawPlaylist(e, t) {
            var i = null;
            try {
                var _n12 = oe.util.hexToBytes(W.DEEJAY_KEY)
                  , _r6 = oe.util.hexToBytes(t);
                if (_n12.length == _r6.length)
                    for (var _e20 = 0; _e20 < _n12.length; ++_e20) {
                        _n12[_e20] = _n12[_e20] ^ _r6[_e20]
                    }
                return i = this._parseResponse(e, _n12),
                this._validateMetadata(i),
                this._processMetadata(i),
                Promise.resolve(i)
            } catch (e) {
                return et(e) || Ze(e, $t),
                Promise.reject(e)
            }
        }
        ;
        _proto22._parseResponse = function _parseResponse(e, t) {
            var i = oe.util.hexToBytes(e)
              , n = oe.util.hexToBytes("00000000000000000000000000000000").concat(i)
              , r = Pe.decrypt(n, t, {
                mode: oe.mode.CBC7,
                usePkcs7: !0
            })
              , s = oe.charenc.UTF8.bytesToString(r);
            return JSON.parse(s)
        }
        ;
        _proto22._validateMetadata = function _validateMetadata(e) {
            if (!(e.license_url || e.dash_wv_server || e.dash_pr_server || e.fp_cert || e.fp_server)) {
                var _e21 = new Error("deejay:metadata does not contain license url");
                throw Ze(_e21, "hulu:client:playback:playlist:error:invalid-essential"),
                _e21
            }
            return e
        }
        ;
        _proto22._processMetadata = function _processMetadata(e) {
            Q.isFairPlayHlsSupported() && e.license_url && !e.fp_server ? (e.fp_server = e.license_url,
            e.fp_cert = "https://ads-v-darwin.hulustream.com/public/fairplay_cert.der") : e.license_url && !e.dash_wv_server && (e.dash_wv_server = e.license_url,
            e.dash_pr_server = e.license_url.replace("dash_wv_license", "dash_pr_license"))
        }
        ;
        _proto22._checkHDCPForWideVine = function _checkHDCPForWideVine() {
            var e = !1
              , t = !1;
            return new Promise(function(i) {
                if ("function" != typeof navigator.requestMediaKeySystemAccess)
                    return i({
                        supportWideVine: e,
                        supportHDCP: t
                    });
                navigator.requestMediaKeySystemAccess("com.widevine.alpha", Jt).catch(function() {
                    return i({
                        supportWideVine: e,
                        supportHDCP: t
                    })
                }).then(function(t) {
                    return e = !0,
                    t.createMediaKeys()
                }).then(function(n) {
                    return n.getStatusForPolicy({
                        minHdcpVersion: "1.4"
                    }).then(function(n) {
                        return "usable" === n && (t = !0),
                        i({
                            supportWideVine: e,
                            supportHDCP: t
                        })
                    })
                }).catch(function() {
                    return i({
                        supportWideVine: e,
                        supportHDCP: t
                    })
                })
            }
            )
        }
        ;
        _proto22._shouldLimitSizeToSupportHDCPForWV = function _shouldLimitSizeToSupportHDCPForWV(e, t) {
            return !(!e || e && t)
        }
        ;
        return _class11
    }());
    var ei = new (function(_m10) {
        _inheritsLoose(_class12, _m10);
        function _class12() {
            var _this35;
            _this35 = _m10.call(this) || this,
            _this35._playIntent = "resume";
            return _this35
        }
        var _proto23 = _class12.prototype;
        _proto23.loadPlaylist = function loadPlaylist(e, t) {
            var _this36 = this;
            return Zt.loadPlaylist($.eabId, $.channelId, e).then(function(e) {
                if (t.isCancellationRequested)
                    return At;
                _this36.playlist = new lt(e)
            })
        }
        ;
        _proto23.loadUpnextPlaylist = function loadUpnextPlaylist(e, t, i) {
            var _this37 = this;
            return Zt.loadPlaylist(e, t, !0, !0).then(function(e) {
                if (i.isCancellationRequested)
                    return At;
                _this37.upnextPlaylist = new lt(e)
            })
        }
        ;
        _createClass(_class12, [{
            key: "playlist",
            set: function set(e) {
                this.update({
                    playlist: e
                })
            },
            get: function get() {
                return this._data.playlist
            }
        }, {
            key: "upnextPlaylist",
            set: function set(e) {
                this.update({
                    upnextPlaylist: e
                })
            },
            get: function get() {
                return this._data.upnextPlaylist
            }
        }, {
            key: "playIntent",
            set: function set(e) {
                this._playIntent = null != e ? e : this._playIntent
            },
            get: function get() {
                return this._playIntent
            }
        }]);
        return _class12
    }(m));
    var ti = {
        ScalePoint: {
            S320: 320,
            S480: 480,
            S768: 768,
            S1024: 1024,
            S1440: 1440,
            S1600: 1600,
            S3840: 3840
        }
    };
    var ii = function(_m11) {
        _inheritsLoose(ii, _m11);
        function ii() {
            var _this38;
            _this38 = _m11.call(this) || this,
            _this38._data = {
                scalePoint: ti.ScalePoint.S1600,
                viewMode: Ut.ViewModeTypes.NORMAL,
                width: 0,
                height: 0
            },
            _this38._deviceWdith = window.screen.availWidth * window.devicePixelRatio,
            _this38._deviceHeight = window.screen.availHeight * window.devicePixelRatio;
            return _this38
        }
        _createClass(ii, [{
            key: "videoWidth",
            get: function get() {
                return this._data.videoWidth
            }
        }, {
            key: "videoHeight",
            get: function get() {
                return this._data.videoHeight
            }
        }, {
            key: "deviceWidth",
            get: function get() {
                return this._deviceWdith
            }
        }, {
            key: "deviceHeight",
            get: function get() {
                return this._deviceHeight
            }
        }, {
            key: "width",
            get: function get() {
                return this._data.width
            }
        }, {
            key: "height",
            get: function get() {
                return this._data.height
            }
        }, {
            key: "externalViewMode",
            get: function get() {
                return this._data.viewMode === Ut.ViewModeTypes.FULLSCREEN ? "fullscreen" : "normal"
            }
        }, {
            key: "isFullscreen",
            get: function get() {
                return this._data.viewMode === Ut.ViewModeTypes.FULLSCREEN
            }
        }, {
            key: "isNormal",
            get: function get() {
                return this._data.viewMode === Ut.ViewModeTypes.NORMAL
            }
        }, {
            key: "isMinimized",
            get: function get() {
                return this._data.viewMode === Ut.ViewModeTypes.MINIMIZED
            }
        }]);
        return ii
    }(m);
    ii.defineProxyProperties({
        viewMode: !1,
        scalePoint: !0
    });
    var ni = new ii;
    var ri = function() {
        function ri() {
            this.id = 0,
            this.adTitle = "",
            this.adFeedId = -1,
            this.adFeedbackId = -1,
            this.adName = "",
            this.adUnitId = -2,
            this.adUnitType = "",
            this.addOnInformation = "",
            this.advertiserId = -1,
            this.auditParams = {},
            this.brand = "",
            this.companionAds = {},
            this.clickParams = {},
            this.detachedCompanionAds = "",
            this.flightId = -1,
            this.freePassToken = "",
            this.hideAdRelevance = !1,
            this.isAdBlocker = !1,
            this.impressions = [],
            this.isBlankAd = !1,
            this.isMature = !1,
            this.isPlusUpsell = !1,
            this.isSharable = !1,
            this.isSwappable = !1,
            this.isViewability = !1,
            this.errorAudit = null,
            this.linear = null,
            this.playlist = null,
            this.recommendationTracking = "",
            this.slotIndex = 0,
            this.swapToken = "",
            this.vastUrl = "",
            this.adBlockerErrorType = "",
            this.adBlockerOriginType = "",
            this.isSafeResponse = !1,
            this.adUIMode = "",
            this.resetBeaconFired()
        }
        var _proto24 = ri.prototype;
        _proto24.isBeaconFired = function isBeaconFired(e) {
            var t = this._beaconFired[e];
            return t || (this._beaconFired[e] = !0),
            t
        }
        ;
        _proto24.resetBeaconFired = function resetBeaconFired() {
            this._beaconFired = {}
        }
        ;
        return ri
    }();
    var si = function() {
        this.auditParams = {},
        this.baseAssetId = -1,
        this.clickParams = {},
        this.clickThrough = "",
        this.creativeId = -1,
        this.metadata = {},
        this.staticResources = {},
        this.trackingEvents = {},
        this.placementId = -1
    };
    var ai = function(_si) {
        _inheritsLoose(ai, _si);
        function ai() {
            var _this39;
            _this39 = _si.call(this) || this,
            _this39.mediaFiles = {},
            _this39.adParameters = "",
            _this39.adSelectorOptions = {},
            _this39.adSelectorRandom = !1,
            _this39.adSelectorTitleLogo = null,
            _this39.customClicksEvents = {},
            _this39.clickTrackings = [],
            _this39.duration = -2,
            _this39.skipOffset = -1;
            return _this39
        }
        return ai
    }(si);
    var oi = function() {
        this.pod = -100,
        this.adType = "",
        this.adUnits = [],
        this.cdns = [],
        this.spareAds = [],
        this.auditParams = {},
        this.timestamp = 0,
        this.sessionState = "",
        this.userState = "",
        this.adTargetingRawValues = "",
        this.adTargetingUserInfo = "",
        this.isSafeResponse = !1,
        this.rawVAST = "",
        this.upid = ""
    };
    var li = [dt.AD_UNIT_TYPE_BRANDED_CANVAS_WITH_PREMIUM_SHORT_SLATE, dt.AD_UNIT_TYPE_BRANDED_CANVAS_WITH_PREMIUM_SLATE, dt.AD_UNIT_TYPE_BRANDED_CANVAS_WITH_PREMIUM_TRAILER_SLATE, dt.AD_UNIT_TYPE_BRANDED_CANVAS_WITH_SHORT_SLATE, dt.AD_UNIT_TYPE_BRANDED_CANVAS_WITH_SLATE, dt.AD_UNIT_TYPE_BRANDED_CANVAS_WITH_TRAILER_SLATE, dt.AD_UNIT_TYPE_BRANDED_FILM_SLATE, dt.AD_UNIT_TYPE_BRANDED_SHORT_SLATE, dt.AD_UNIT_TYPE_BRANDED_SLATE, dt.AD_UNIT_TYPE_BRANDED_TRAILER_SLATE, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_PREMIUM_SHORT_SLATE, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_PREMIUM_SLATE, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_PREMIUM_TRAILER_SLATE, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_SHORT_SLATE, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_SLATE, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_TRAILER_SLATE, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_SHORT_SLATE, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_SLATE, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_TRAILER_SLATE]
      , di = [dt.AD_UNIT_TYPE_AD_SELECTOR_SLATE, dt.AD_UNIT_TYPE_BRANDED_CANVAS_WITH_AD_SELECTOR, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_AD_SELECTOR]
      , ui = [dt.AD_UNIT_TYPE_AD_TAILOR_SURVEY, dt.AD_UNIT_TYPE_AD_TAILOR_INTERSTITIAL]
      , ci = [dt.AD_UNIT_TYPE_BRANDED_CANVAS_WITH_TRAILER_SELECTOR, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_TRAILER_SELECTOR, dt.AD_UNIT_TYPE_VIDEO_TRAILER_SELECTOR, dt.AD_UNIT_TYPE_VIDEO_TRAILER_SELECTOR_WITH_INTERSTITIAL]
      , hi = [dt.AD_UNIT_TYPE_BRANDED_CANVAS_WITH_INTERSTITIAL_SLATE, dt.AD_UNIT_TYPE_HULU_PLUS_INTERSTITIAL, dt.AD_UNIT_TYPE_PREMIUM_BRANDED_CANVAS_WITH_INTERSTITIAL_SLATE, dt.AD_UNIT_TYPE_PRODUCT_INTERSTITIAL_SLATE, dt.AD_UNIT_TYPE_VIDEO_TRAILER_SELECTOR_WITH_INTERSTITIAL];
    var pi = function() {
        function pi() {}
        pi.isBlankAdUnit = function isBlankAdUnit(e) {
            if (e.isBlankAd)
                return !0;
            if (e.linear && e.linear.mediaFiles) {
                for (var _t21 in e.linear.mediaFiles) {
                    var _i21 = e.linear.mediaFiles[_t21];
                    if (/blankbrand|blankfree|blankmissed|blankoverlay|blankpaid|blankslate|blankvid|emptyslate/.test(_i21.sourceUrl))
                        return !0
                }
                return !1
            }
            return !0
        }
        ;
        pi.createSafeEmptyAd = function createSafeEmptyAd() {
            var e = new ri;
            return e.isSafeResponse = !0,
            e
        }
        ;
        pi.createAdBlocker = function createAdBlocker(e) {
            var t = new ri;
            return t.linear = new ai,
            t.isAdBlocker = !0,
            t.adUnitType = "Ad Blocker",
            e && e.linear && e.linear.duration > 0 ? t.linear.duration = e.linear.duration : t.linear.duration = 60,
            t.playlist = e ? e.playlist : null,
            t.slotIndex = e ? e.slotIndex : 0,
            t
        }
        ;
        pi.createAdBlockerPlaylist = function createAdBlockerPlaylist(e) {
            var t = new oi
              , i = pi.createAdBlocker();
            return t.pod = e,
            t.adUnits = [i],
            i.playlist = t,
            i.slotIndex = 0,
            t
        }
        ;
        pi.isBrandedSlate = function isBrandedSlate(e) {
            return li.indexOf(e) > -1
        }
        ;
        pi.isAdSelectorSlate = function isAdSelectorSlate(e) {
            return di.indexOf(e) > -1
        }
        ;
        pi.isAdTailorSurvey = function isAdTailorSurvey(e) {
            return ui.indexOf(e) > -1
        }
        ;
        pi.isTrailerSelector = function isTrailerSelector(e) {
            return ci.indexOf(e) > -1
        }
        ;
        pi.isPIS = function isPIS(e) {
            return hi.indexOf(e) > -1
        }
        ;
        pi.getVPAIDUrl = function getVPAIDUrl(e) {
            for (var _t22 in e) {
                var _i22 = e[_t22];
                if ("VPAID" == _i22.apiFramework && "application/javascript" == _i22.type)
                    return _i22.sourceUrl
            }
            return null
        }
        ;
        pi.getMP4MediaFiles = function getMP4MediaFiles(e) {
            var t = [];
            for (var _i23 in e) {
                var _n13 = e[_i23];
                _n13.sourceUrl && _n13.sourceUrl.match(/^[^?]*\.mp4(\?|$)/) && t.push({
                    id: _n13.id,
                    bitrate: _n13.bitrate,
                    width: _n13.width,
                    height: _n13.height,
                    sourceUrl: _n13.sourceUrl
                })
            }
            return t
        }
        ;
        pi.getJSMediaFiles = function getJSMediaFiles(e) {
            var t = [];
            for (var _i24 in e) {
                var _n14 = e[_i24];
                (_n14.sourceUrl && _n14.sourceUrl.match(/^[^?]*\.js(\?|#|$)/) || "application/javascript" == _n14.type) && t.push({
                    id: _n14.id,
                    bitrate: _n14.bitrate,
                    width: _n14.width,
                    height: _n14.height,
                    sourceUrl: _n14.sourceUrl
                })
            }
            return t
        }
        ;
        pi.getMediaFileByBitrate = function getMediaFileByBitrate(e, t) {
            e.sort(function(e, t) {
                return e.bitrate < t.bitrate ? -1 : e.bitrate > t.bitrate ? 1 : 0
            });
            var i = -1
              , n = -1;
            for (var _r7 = 0; _r7 < e.length; ++_r7) {
                e[_r7].bitrate <= t && n < e[_r7].bitrate && (n = e[_r7].bitrate,
                i = _r7)
            }
            return -1 === i && (i = 0),
            e[i]
        }
        ;
        pi.createTrailerVideoAdUnit = function createTrailerVideoAdUnit(e) {
            var t = e.companionAds[dt.REGIONS.SELECTOR_VIDEO]
              , i = new ri
              , n = new ai;
            return Object.assign(i, e),
            n.duration = t.duration,
            n.mediaFiles = t.trailerSelectorMediaFiles,
            n.baseAssetId = t.baseAssetId,
            n.clickParams = t.clickParams,
            n.clickThrough = t.clickThrough,
            n.clickTrackings = t.clickTrackings,
            n.creativeId = t.creativeId,
            n.metadata = t.metadata,
            n.staticResources = t.staticResources,
            n.trackingEvents = t.trackingEvents,
            n.placementId = t.placementId,
            n.adParameters = t.adParameters,
            i.linear = n,
            i.isTrailerSelectorVideo = !0,
            i.resetBeaconFired(),
            i
        }
        ;
        pi.createTrailerVideoPlaylist = function createTrailerVideoPlaylist(e, t) {
            var i = new oi;
            Object.assign(i, t.playlist);
            var n = this.createTrailerVideoAdUnit(t);
            return n.playlist = i,
            n.slotIndex = 0,
            i.pod = e,
            i.adUnits = [n],
            i
        }
        ;
        pi.isNonShareableAdUnit = function isNonShareableAdUnit(e) {
            return this.isPIS(e) || this.isBrandedSlate(e) || this.isAdSelectorSlate(e)
        }
        ;
        pi.shrinkVAST = function shrinkVAST(e) {
            var t = e || "";
            return t = t.replace(/<SessionState.*\/>/g, ""),
            t = t.replace(/<UserState.*\/>/g, ""),
            t = t.replace(/<AdTargetingUserInfo.*\/>/g, ""),
            t = t.replace(/<AuditParam.*\/>/g, ""),
            t = t.replace(/<Tracking.*http(s)?:\/\/t2.hulu(qa)?.com.*<\/Tracking>/g, ""),
            t
        }
        ;
        return pi
    }();
    var _i = pi;
    var fi = function() {
        this.URL = "",
        this.URLParams = {},
        this.httpMethod = "",
        this.clickBehavior = "",
        this.clickTracks = [],
        this.successMsg = "",
        this.failureMsg = ""
    };
    var gi = function() {
        this.label = "",
        this.location = "",
        this.action = null
    };
    var mi = function() {
        this.index = null,
        this.adGroupId = null,
        this.brand = null,
        this.clickAudit = null,
        this.defaultAudit = null,
        this.label = null,
        this.thumbnail = null,
        this.tracking = null,
        this.trackingEvents = {}
    };
    var yi = function() {
        this.name = "",
        this.host = ""
    };
    var vi = function(_si2) {
        _inheritsLoose(vi, _si2);
        function vi() {
            var _this40;
            _this40 = _si2.call(this) || this,
            _this40.id = "",
            _this40.width = -1,
            _this40.height = -1,
            _this40.trailerSelectorMediaFiles = {},
            _this40.duration = -2;
            return _this40
        }
        return vi
    }(si);
    var Ei = function() {
        this.id = null,
        this.bitrate = null,
        this.width = null,
        this.height = null,
        this.sourceUrl = null,
        this.type = null,
        this.apiFramework = null
    };
    var bi = function() {
        this.adUnitId = -2,
        this.name = "",
        this.brand = "",
        this.thumbnail = ""
    };
    var Ti = function() {
        this.id = "",
        this.creativeType = "",
        this.sourceUrl = ""
    };
    var Si = function() {
        this.event = "",
        this.multiBrand = !1,
        this.trackingUrl = ""
    };
    var Ai = function() {
        function Ai() {}
        var _proto25 = Ai.prototype;
        _proto25._parseDuration = function _parseDuration(e) {
            this._log("_parseDuration");
            var t = 0;
            return (e = e || "0").split(":").forEach(function(e) {
                t = 60 * t + parseFloat(e)
            }),
            t < 500 ? t : t / 1e3
        }
        ;
        _proto25._parseSkipOffset = function _parseSkipOffset(e) {
            if (this._log("_parseSkipOffset"),
            !e)
                return -1;
            var t = 0;
            return e.split(":").forEach(function(e) {
                t = 60 * t + parseInt(e)
            }),
            isNaN(t) && (t = -1),
            t
        }
        ;
        _proto25._parseCDNs = function _parseCDNs(e) {
            this._log("_parseCDNs");
            var t = [];
            return e.find("Cdn").each(function(e, i) {
                i = ft()(i);
                var n = new yi;
                n.name = i.attr("name"),
                n.host = i.attr("host"),
                t.push(n)
            }),
            t
        }
        ;
        _proto25._parseTrackingEvents = function _parseTrackingEvents(e) {
            this._log("_parseTrackingEvents");
            var t = {};
            return e.find("Tracking").each(function(e, i) {
                i = ft()(i);
                var n = new Si
                  , r = i.attr("event");
                n.event = r,
                n.trackingUrl = i.text().trim(),
                n.multiBrand = "true" == i.attr("MultiBrand"),
                t.hasOwnProperty(r) || (t[r] = []),
                t[n.event].push(n)
            }),
            t
        }
        ;
        _proto25._parseCustomClickEvents = function _parseCustomClickEvents(e) {
            this._log("_parseCustomClickEvents");
            var t = {};
            return e.find("CustomClick").each(function(e, i) {
                var n = (i = ft()(i)).attr("event");
                t.hasOwnProperty(n) || (t[n] = []),
                t[n].push(i.text().trim())
            }),
            t
        }
        ;
        _proto25._parseClickTrackings = function _parseClickTrackings(e) {
            this._log("_parseClickTrackings");
            var t = [];
            return e.find("ClickTracking").each(function(e, i) {
                i = ft()(i),
                t.push(i.text().trim())
            }),
            t
        }
        ;
        _proto25._parseCompanionClickTrackings = function _parseCompanionClickTrackings(e) {
            this._log("_parseCompanionClickTrackings");
            var t = [];
            return e.find("CompanionClickTracking").each(function(e, i) {
                i = ft()(i),
                t.push(i.text().trim())
            }),
            t
        }
        ;
        _proto25._parseStaticResource = function _parseStaticResource(e, t) {
            this._log("_parseStaticResource");
            var i = new Ti;
            return i.id = e.attr("id") || t || "",
            i.creativeType = e.attr("creativeType"),
            i.sourceUrl = e.text().trim(),
            i
        }
        ;
        _proto25._parseAdSelectorOptions = function _parseAdSelectorOptions(e) {
            var _this41 = this;
            this._log("_parseAdSelectorOptions");
            var t = {};
            return e.find("Option").each(function(e, i) {
                i = ft()(i);
                var n = new mi;
                n.index = parseInt(i.attr("index")),
                n.adGroupId = parseInt(i.attr("value")),
                n.defaultAudit = i.attr("default_audit"),
                n.clickAudit = i.attr("click_audit"),
                n.label = i.attr("label"),
                n.thumbnail = i.attr("thumbnail"),
                n.brand = i.attr("brand"),
                n.tracking = i.attr("tracking"),
                n.trackingEvents = _this41._parseTrackingEvents(i.find("TrackingEvents")),
                t[n.index] = n
            }),
            t
        }
        ;
        _proto25._parseKeyValueParams = function _parseKeyValueParams(e) {
            this._log("_parseKeyValueParams");
            var t = {};
            return e.each(function(e, i) {
                var n = (i = ft()(i)).attr("key")
                  , r = i.attr("value");
                t[n] = r
            }),
            t
        }
        ;
        _proto25._parseMediaFiles = function _parseMediaFiles(e) {
            this._log("_parseMediaFiles");
            var t = {};
            return e.find("MediaFile").each(function(e, i) {
                i = ft()(i);
                var n = new Ei;
                n.id = i.attr("id"),
                n.bitrate = parseInt(i.attr("bitrate")),
                n.width = parseInt(i.attr("width")),
                n.height = parseInt(i.attr("height")),
                n.sourceUrl = i.text().trim(),
                n.type = i.attr("type"),
                n.apiFramework = i.attr("apiFramework"),
                t[n.id] = n
            }),
            t
        }
        ;
        _proto25._unescapeXML = function _unescapeXML(e) {
            return e.replace(/&amp;/g, "&").replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&quot;/g, "\"").replace(/&#039;/g, "'")
        }
        ;
        _proto25._parseActionButton = function _parseActionButton(e) {
            var t = {};
            e = this._unescapeXML(e);
            var i = JSON.parse(e);
            for (var _e22 in i) {
                var _n15 = i[_e22]
                  , _r8 = _n15.action
                  , _s5 = new gi
                  , _a4 = new fi;
                _a4.URL = _r8.URL,
                _a4.URLParams = Object.assign({}, _r8.URLParams),
                _a4.httpMethod = _r8.httpMethod,
                _a4.clickBehavior = _r8.clickBehavior,
                _a4.clickTracks = _r8.clickTracks,
                _a4.successMsg = _r8.successMsg,
                _a4.failureMsg = _r8.failureMsg,
                _s5.action = _a4,
                _s5.location = _n15.location,
                _s5.label = _n15.label,
                t[_s5.location] = _s5
            }
            return t
        }
        ;
        _proto25._parseLinear = function _parseLinear(e, t) {
            var _this42 = this;
            this._log("_parseLinear");
            var i = new ai;
            if (i.skipOffset = this._parseSkipOffset(e.attr("skipoffset")),
            i.duration = this._parseDuration(e.find("Duration").text()),
            i.clickThrough = e.find("VideoClicks ClickThrough").text().trim(),
            i.clickTrackings = this._parseClickTrackings(e.find("VideoClicks")),
            i.mediaFiles = this._parseMediaFiles(e.find("MediaFiles")),
            i.adParameters = e.find("AdParameters").text(),
            e.find("StaticResources StaticResource").each(function(e, t) {
                t = ft()(t);
                var n = _this42._parseStaticResource(t);
                i.staticResources[n.id] = n
            }),
            _i.isTrailerSelector(t) && (i.customClicksEvents = this._parseCustomClickEvents(e.find("VideoClicks"))),
            _i.isAdSelectorSlate(t)) {
                var _t23 = e.find("Extensions AdSelectorOptions");
                i.adSelectorRandom = "true" === _t23.attr("random"),
                i.adSelectorTitleLogo = _t23.attr("titleLogo"),
                i.adSelectorOptions = this._parseAdSelectorOptions(_t23)
            }
            return this._updateCreative(e, i),
            i.metadata[dt.METADATA_KEYS.ACTION_BUTTONS] && (i.metadata[dt.METADATA_KEYS.ACTION_BUTTONS] = this._parseActionButton(i.metadata[dt.METADATA_KEYS.ACTION_BUTTONS])),
            i
        }
        ;
        _proto25._parseCompanion = function _parseCompanion(e) {
            var _this43 = this;
            this._log("_parseCompanion");
            var t, i = new vi;
            return i.id = e.attr("id"),
            i.width = parseInt(e.attr("width")),
            i.height = parseInt(e.attr("height")),
            i.clickThrough = e.find("CompanionClickThrough").text().trim(),
            i.clickTrackings = this._parseCompanionClickTrackings(e),
            i.trailerSelectorMediaFiles = this._parseMediaFiles(e.find("MediaFiles")),
            i.adParameters = e.find("AdParameters").text(),
            t = this._parseStaticResource(e.find("StaticResource"), i.id),
            i.staticResources[t.id] = t,
            e.find("StaticResources StaticResource").each(function(e, n) {
                n = ft()(n),
                t = _this43._parseStaticResource(n, i.id),
                i.staticResources[t.id] = t
            }),
            e.find("Duration").length > 0 ? i.duration = this._parseDuration(e.find("Duration").text()) : e.find("Extensions Duration").length > 0 && (i.duration = this._parseDuration(e.find("Extensions Duration").text())),
            this._updateCreative(e, i),
            i
        }
        ;
        _proto25._getAdImpressions = function _getAdImpressions(e) {
            var _this44 = this;
            var t = [];
            return e.find("Impression").each(function(e, i) {
                var n = i.textContent;
                n = n.trim(),
                n = _this44._replaceUPID(n),
                t.push(n)
            }),
            t
        }
        ;
        _proto25._replaceUPID = function _replaceUPID(e) {
            var t = new Date().getTime() + Math.round(1e3 * Math.random());
            return e.replace(/\${upid}/gi, t)
        }
        ;
        _proto25._parseAdUnit = function _parseAdUnit(e) {
            var _this45 = this;
            var t = new ri
              , i = e.find(">Extensions");
            return t.adTitle = e.find("AdTitle").text(),
            t.brand = i.find("Brand").text(),
            t.advertiserId = i.find("AdvertiserId").text(),
            t.agencyId = i.find("AgencyId").text(),
            t.adFeedId = i.find("AdFeedId").text(),
            t.adFeedbackId = i.find("AdFeedbackId").text(),
            t.flightId = i.find("FlightId").text(),
            t.adUnitId = i.find("AdUnitId").text(),
            t.isViewability = i.find("IsViewability").length > 0,
            t.adUnitType = i.find("AdUnitType").text(),
            t.isSharable = i.find("Shareable").length > 0 && !_i.isNonShareableAdUnit(t.adUnitType),
            t.freePassToken = i.find("FreePass").text(),
            t.adUIMode = i.find("AdUIMode").text(),
            t.isSwappable = i.find("Swappable").length > 0,
            t.hideAdRelevance = i.find("HideAdRelevance").length > 0,
            t.recommendationTracking = i.find("RecommendationTracking").text(),
            t.addOnInformation = i.find("AddOnInformation").text(),
            t.detachedCompanionAds = i.find("DetachedCompanionAds").text(),
            t.swapToken = i.find("SwapToken").text(),
            t.isBlankAd = i.find("IsBlankAd").length > 0,
            t.isPlusUpsell = i.find("IsPlusUpsell").length > 0,
            t.errorAudit = e.find(">Error").text(),
            t.impressions = this._getAdImpressions(e),
            i.find("AuditParam").each(function(e, i) {
                i = ft()(i),
                t.auditParams[i.attr("key")] = i.attr("value")
            }),
            e.find("Creatives Creative").each(function(e, i) {
                if ((i = ft()(i)).find("Linear").length > 0) {
                    t.linear = _this45._parseLinear(i.find("Linear"), t.adUnitType);
                    var _e23 = ["Vast Url", "Vpaid Url HTML5", "Vpaid Url SWF", "Innovid Vast Url", "Brightline Vast Url"];
                    for (var _i25 = 0; _i25 < _e23.length; _i25++) {
                        var _n16 = _e23[_i25];
                        if (t.linear.mediaFiles.hasOwnProperty(_n16)) {
                            t.vastUrl = t.linear.mediaFiles[_n16].sourceUrl;
                            break
                        }
                    }
                }
                i.find("CompanionAds").length > 0 && i.find("CompanionAds Companion").each(function(e, i) {
                    var n = _this45._parseCompanion(ft()(i));
                    t.companionAds[n.id] = n
                })
            }),
            t
        }
        ;
        _proto25._updateCreative = function _updateCreative(e, t) {
            t.auditParams = this._parseKeyValueParams(e.find("Extensions AuditParam")),
            t.clickParams = this._parseKeyValueParams(e.find("Extensions ClickParam")),
            t.baseAssetId = parseInt(e.find("Extensions BaseAssetId").text()) || -1,
            t.creativeId = parseInt(e.find("Extensions CreativeId").text()),
            t.metadata = this._parseKeyValueParams(e.find("Extensions Metadata")),
            t.trackingEvents = this._parseTrackingEvents(e.find("TrackingEvents")),
            t.placementId = parseInt(e.find("Extensions PlacementId").text())
        }
        ;
        _proto25._parseSpareAd = function _parseSpareAd(e) {
            var t = new bi;
            return t.adUnitId = e.attr("id"),
            t.name = e.attr("name"),
            t.brand = e.attr("brand"),
            t.thumbnail = e.attr("thumbnail"),
            t
        }
        ;
        _proto25.parse = function parse(e) {
            var _this46 = this;
            this._log("parse");
            var t = ft()(ft.a.parseXML(e))
              , i = new oi;
            if (i.rawVAST = e,
            this._checkSafeResponse(t))
                i.isSafeResponse = !0,
                i.adUnits = [];
            else {
                var _e24 = t.find("VAST >Extensions");
                _e24.find("AuditParam").each(function(e, t) {
                    t = ft()(t),
                    i.auditParams[t.attr("key")] = t.attr("value")
                }),
                i.userState = _e24.find("UserState").attr("value") || "",
                i.sessionState = _e24.find("SessionState").attr("value") || "",
                i.adTargetingRawValues = _e24.find("AdTargetingValidation").attr("value") || "",
                i.adTargetingUserInfo = _e24.find("AdTargetingUserInfo").attr("value") || "",
                i.upid = _e24.find("upid").text(),
                i.adType = _e24.find("AdType").text(),
                i.cdns = this._parseCDNs(_e24.find("Cdns")),
                i.timestamp = t.find("VAST").attr("timestamp"),
                _e24.find("SpareAds SpareAd").each(function(e, t) {
                    var n = _this46._parseSpareAd(ft()(t));
                    i.spareAds.push(n)
                }),
                t.find("Ad InLine").each(function(e, t) {
                    var n = _this46._parseAdUnit(ft()(t));
                    i.adUnits.push(n)
                });
                for (var _e25 = 0; _e25 < i.adUnits.length; _e25++) {
                    i.adUnits[_e25].slotIndex = _e25,
                    i.adUnits[_e25].playlist = i
                }
            }
            return i
        }
        ;
        _proto25.parseVASTList = function parseVASTList(e) {
            var _this47 = this;
            var t = new oi;
            return e.forEach(function(e) {
                var i = _this47.parse(e.vast);
                if (!i.isSafeResponse) {
                    var _n17 = t.adUnits;
                    t = i;
                    var _r9 = i.adUnits[0];
                    _r9.slotIndex = _n17.length,
                    _r9.linear && (_r9.linear.duration = e.duration),
                    _n17.push(_r9),
                    t.adUnits = _n17
                }
            }),
            t.adUnits.forEach(function(e) {
                return e.playlist = t
            }),
            t
        }
        ;
        _proto25._checkSafeResponse = function _checkSafeResponse(e) {
            var t = e.find("Sequence").length > 0 ? e.find("Sequence") : null;
            return !!(t && t.find("VideoAdServingTemplate").length > 0 && t.find("VideoAdServingTemplate").find("MissedAd").length > 0)
        }
        ;
        _proto25._log = function _log() {
            var e = ["VASTParser"].concat(Array.prototype.slice.call(arguments));
            G.c.log.apply(G.c, e)
        }
        ;
        return Ai
    }()
      , Pi = i(45)
      , wi = i.n(Pi)
      , ki = i(75)
      , Ci = i.n(ki);
    var Ii = function() {
        function Ii() {
            this.reset()
        }
        var _proto26 = Ii.prototype;
        _proto26.start = function start() {
            return this._paused && (this._lastStartTime = Date.now(),
            this._paused = !1),
            this
        }
        ;
        _proto26.pause = function pause() {
            return this._paused || (this._runLength += Date.now() - this._lastStartTime,
            this._paused = !0),
            this
        }
        ;
        _proto26.reset = function reset() {
            return this._runLength = 0,
            this._paused = !0,
            this
        }
        ;
        _proto26.getTime = function getTime() {
            return this._runLength + (this._paused ? 0 : Date.now() - this._lastStartTime)
        }
        ;
        return Ii
    }();
    var Ri = new (function() {
        function _class13() {
            this._getPlaylistStopwatch = new Ii,
            this._getAssetStopwatch = new Ii,
            this._fetchVASTURLStopwatch = new Ii
        }
        var _proto27 = _class13.prototype;
        _proto27.fetchPlaylist = function fetchPlaylist(e, t, i) {
            var _this48 = this;
            if (i === void 0) {
                i = 0
            }
            if (Mi.overrideVpaidCreativeUrl && W.ENABLE_AD_OPS)
                return G.c.log("Overriding resposne to ", Mi.overrideVpaidCreativeUrl),
                this._getVpaidCreativeUrl(Mi.overrideVpaidCreativeUrl);
            var n = this._constructAdRequestXML(e, i)
              , r = this._encryptAdRequest(n)
              , s = at.adServer + "/getPlaylist?" + ft.a.param({
                kv: r.kv,
                iv: r.iv
            });
            return this._getPlaylistStopwatch.reset().start(),
            Object(G.i)(s, {
                method: "POST",
                body: r.encryptedString,
                credentials: "include"
            }, {
                timeoutMs: 1e4
            }).then(function(e) {
                return e.assertOK().text()
            }).then(function(n) {
                return t.isCancellationRequested ? At : (_this48._getPlaylistStopwatch.pause(),
                Mi.isAdSessionSampled && se.reportToPlayerIndex(ne.Type.SAMPLE_AD_GET_PLAYLIST, {
                    pod: e,
                    timeUsed: _this48._getPlaylistStopwatch.getTime(),
                    retryTime: i
                }),
                n)
            }).then(function(e) {
                return _this48._decryptResponse(e)
            }).then(function(e) {
                return _this48._parseVAST(e)
            }).then(function(t) {
                var i = ft()(ft.a.parseXML(n)).find("AdRequest");
                if (!t.isSafeResponse && t.timestamp != i.attr("Timestamp"))
                    throw new Error("invalid_response");
                return t.pod = e,
                t
            }).catch(function(r) {
                return t.isCancellationRequested ? At : (G.c.info(r.toString()),
                G.c.info("retry getPlaylist"),
                se.reportToPlayerIndex(ne.Type.AD_GET_PLAYLIST_ERROR, {
                    request: n,
                    pod: e,
                    retryTime: i,
                    reason: r.toString()
                }),
                ++i < 2 ? _this48.fetchPlaylist(e, t, i) : Promise.reject(r))
            }).then(function(e) {
                return t.isCancellationRequested ? At : (Mi.update({
                    adSelectorOption: null
                }),
                _this48._resolveAllClientSideVASTInPlaylist(e))
            }).then(function(e) {
                return t.isCancellationRequested ? At : (Mi.sessionState = e.sessionState,
                e)
            }).catch(function(i) {
                return t.isCancellationRequested ? At : (G.c.error(i.toString()),
                Mi.update({
                    adSelectorOption: null
                }),
                _i.createAdBlockerPlaylist(e))
            })
        }
        ;
        _proto27._resolveClientSideVASTForSingleAdUnit = function _resolveClientSideVASTForSingleAdUnit(e) {
            var _this49 = this;
            return G.c.info("_resolveClientSideVASTForSingleAdUnit: " + e.vastUrl),
            this._fetchVASTURLStopwatch.reset().start(),
            Object(G.i)(e.vastUrl, {
                credentials: "include"
            }, {
                timeoutMs: 1e4,
                retryCount: 1
            }).then(function(e) {
                return e.arrayBuffer()
            }).then(function(t) {
                return _this49._fetchVASTURLStopwatch.pause(),
                Mi.isAdSessionSampled && se.reportToPlayerIndex(ne.Type.SAMPLE_FETCH_VAST_URL, {
                    adUnitId: e.adUnitId,
                    vastUrl: e.vastUrl,
                    timeUsed: _this49._fetchVASTURLStopwatch.getTime(),
                    hostname: Q.getHostName(e.vastUrl)
                }),
                t
            }).catch(function(t) {
                return G.c.info(t.toString()),
                G.c.info("Failed to fetch VAST url, fallback to empty string"),
                se.reportToPlayerIndex(ne.Type.FETCH_VAST_URL_ERROR, {
                    adUnitId: e.adUnitId,
                    vastUrl: e.vastUrl,
                    hostname: Q.getHostName(e.vastUrl),
                    reason: t.toString()
                }),
                new ArrayBuffer(0)
            }).then(function(t) {
                return t.byteLength > 1048576 ? (se.reportToPlayerIndex(ne.Type.VAST_URL_SIZE_EXCEEDED, {
                    adUnitId: e.adUnitId,
                    vastUrl: e.vastUrl
                }),
                Promise.reject("vast url size limit exceeded!")) : t
            }).then(this._deflateBytes).then(oe.util.bytesToBase64).then(function(t) {
                return _this49._getAsset(t, e)
            }).then(function(t) {
                return e.playlist.sessionState = t.sessionState,
                t.isSafeResponse ? _i.createSafeEmptyAd() : t.adUnits[0]
            }).catch(function(t) {
                return G.c.info(t.toString()),
                _i.createAdBlocker(e)
            })
        }
        ;
        _proto27._getVpaidCreativeUrl = function _getVpaidCreativeUrl(e) {
            var _this50 = this;
            return Object(G.i)(e, {
                credentials: "include"
            }, {
                retryCount: 1
            }).then(function(e) {
                return e.assertOK().text()
            }).then(function(e) {
                return _this50._parseVAST(e)
            }).then(function(e) {
                return _this50._resolveAllClientSideVASTInPlaylist(e)
            })
        }
        ;
        _proto27._resolveAllClientSideVASTInPlaylist = function _resolveAllClientSideVASTInPlaylist(e, t) {
            var _this51 = this;
            if (t === void 0) {
                t = 0
            }
            G.c.info("_resolveAllClientSideVASTInPlaylist startIndex: ", t);
            var _loop = function(_i26) {
                var t = e.adUnits[_i26];
                if (!Q.isNullOrEmpty(t.vastUrl))
                    return {
                        v: _this51._resolveClientSideVASTForSingleAdUnit(t).then(function(t) {
                            return e.adUnits[_i26] = t,
                            t.playlist = e,
                            t.slotIndex = _i26,
                            _this51._resolveAllClientSideVASTInPlaylist(e, _i26 + 1)
                        })
                    }
            };
            for (var _i26 = t; _i26 < e.adUnits.length; _i26++) {
                var _ret = _loop(_i26);
                if (typeof _ret === "object")
                    return _ret.v
            }
            return Promise.resolve(e)
        }
        ;
        _proto27._getAsset = function _getAsset(e, t) {
            var _this52 = this;
            var i = this._constructAssetRequestXML(e, t)
              , n = this._encryptAdRequest(i)
              , r = at.adServer + "/getAsset?" + ft.a.param({
                kv: n.kv,
                iv: n.iv
            });
            return this._getAssetStopwatch.reset().start(),
            Object(G.i)(r, {
                method: "POST",
                body: n.encryptedString,
                credentials: "include"
            }, {
                timeoutMs: 1e4,
                retryCount: 0
            }).then(function(e) {
                return e.text()
            }).then(function(e) {
                return _this52._getAssetStopwatch.pause(),
                Mi.isAdSessionSampled && se.reportToPlayerIndex(ne.Type.SAMPLE_AD_GET_ASSET, {
                    adUnitId: t.adUnitId,
                    adUnitType: t.adUnitType,
                    vastUrl: t.vastUrl,
                    timeUsed: _this52._getAssetStopwatch.getTime()
                }),
                e
            }).catch(function(e) {
                return G.c.info(e.toString()),
                se.reportToPlayerIndex(ne.Type.AD_GET_ASSET_ERROR, {
                    adUnitId: t.adUnitId,
                    adUnitType: t.adUnitType,
                    requestBody: i,
                    reason: e.toString()
                }),
                Promise.reject(e)
            }).then(this._decryptResponse).then(this._parseVAST).then(function(e) {
                var t = ft()(ft.a.parseXML(i)).find("AssetRequest");
                if (!e.isSafeResponse && e.timestamp != t.attr("Timestamp"))
                    throw new Error("invalid_response");
                return e
            })
        }
        ;
        _proto27._constructAssetRequestXML = function _constructAssetRequestXML(e, t) {
            var i = {};
            i["@Pod"] = t.playlist.pod,
            i["@SessionState"] = t.playlist.sessionState || "",
            i["@ResponseType"] = "VAST",
            i["@ScopeName"] = "h2o",
            i["@UPID"] = String(new Date().valueOf() + Math.round(1e3 * Math.random())),
            i["@IsHTML5Player"] = "1",
            i["@Timestamp"] = new Date().getTime(),
            i["@IncludeT2RevenueBeacon"] = "1",
            i["@IncludeT2AdInteractionBeacon"] = "1";
            var n = wi.a.create("AssetRequest");
            return n.ele(i),
            n.ele("FormatProfiles").ele(this._buildFormatProfiles()),
            n.ele("Distributor").ele(this._buildDistributor()),
            n.ele("Visitor").ele(this._buildVisitor()),
            n.ele("SiteLocation").ele(this._buildSiteLocation(t.playlist.pod)),
            n.ele({
                AdUnitId: t.adUnitId
            }),
            n.ele({
                DetachedCompanionAdUnitIds: t.detachedCompanionAds
            }),
            n.ele({
                AddOnInformation: t.addOnInformation
            }),
            n.ele({
                Vast: e
            }),
            n.end({
                pretty: !0
            })
        }
        ;
        _proto27._parseVAST = function _parseVAST(e) {
            return new Ai().parse(e)
        }
        ;
        _proto27._decryptResponse = function _decryptResponse(e) {
            var t = oe.util.base64ToBytes("uEOB61NaNb6u47rolFtkIw71I2N+vhdmQL3g6RTIMx0=");
            for (var _e26 = 0; _e26 < t.length; _e26++) {
                t[_e26] = 42 ^ t[_e26]
            }
            var i = oe.util.base64ToBytes(e).slice(1)
              , n = Pe.decrypt(i, t, {
                mode: oe.mode.CBC7,
                usePkcs7: !0
            });
            return oe.charenc.UTF8.bytesToString(n)
        }
        ;
        _proto27._constructAdRequestXML = function _constructAdRequestXML(e, t) {
            var i = {}
              , n = this._buildDistributor()
              , r = this._buildVisitor()
              , s = []
              , a = this._buildSiteLocation(e)
              , o = {}
              , l = this._buildFormatProfiles();
            i["@Pod"] = e,
            i["@SessionState"] = Mi.sessionState || "",
            i["@ResponseType"] = "VAST",
            i["@Timestamp"] = new Date().getTime(),
            i["@ScopeName"] = "h2o",
            i["@SupportVASTAds"] = "1",
            i["@IsHTML5Player"] = "1",
            i["@IncludeT2RevenueBeacon"] = "1",
            i["@IncludeT2AdInteractionBeacon"] = "1",
            t > 0 && (i["@Retry"] = t),
            o["@AdUnitIds"] = W.ENABLE_AD_OPS && Mi.overrideAdUnits || "",
            s.push({
                KeyValue: {
                    "@Key": "env",
                    "@Value": W.ENV
                }
            }),
            s.push({
                KeyValue: {
                    "@Key": "version",
                    "@Value": "Voltron"
                }
            }),
            $.donutAssignments && s.push({
                KeyValue: {
                    "@Key": "donut",
                    "@Value": $.donutAssignments
                }
            });
            var d = Rt.entity && Rt.entity.bundle ? Rt.entity.bundle.networkName : "";
            s.push({
                KeyValue: {
                    "@Key": "network_name",
                    "@Value": d || ""
                }
            });
            var u = wi.a.create("AdRequest");
            return u.ele(i),
            u.ele("FormatProfiles").ele(l),
            u.ele("Distributor").ele(n),
            u.ele("Visitor").ele(r),
            u.ele("KeyValues").ele(s),
            u.ele("SiteLocation").ele(a),
            u.ele("Diagnostics").ele(o),
            u.ele("HubSite").ele(this._buildHubSite()),
            u.end({
                pretty: !W.IS_PROD
            })
        }
        ;
        _proto27._buildDistributor = function _buildDistributor() {
            return {
                "@Name": W.DISTRO,
                "@Platform": W.DISTRO_PLATFORM,
                "@RequireSSL": !0
            }
        }
        ;
        _proto27._buildVisitor = function _buildVisitor() {
            var e = {
                "@IPV4Address": "",
                "@UserId": pt.userId,
                "@MiniCount": "",
                "@MiniDuration": "",
                "@ComputerGuid": $.computerGuid,
                "@AdFeedback": pt.adFeedback,
                "@PlanId": pt.planId,
                "@Language": ei.playlist.audioLanguage,
                "@is_noah": pt.isNoah,
                "@PackageGroupId": pt.userPGID,
                "@State": pt.adUserState,
                "@ProfileId": pt.profileId
            };
            return pt.socialIdentityIds && pt.socialIdentityIds.length > 0 && (e["@SocialIdentities"] = pt.socialIdentityIds.join(",")),
            $.referralUrl && (e["@Referral"] = $.referralUrl),
            Mi.adSelectorOption && (e["@AdSelectorOption"] = Mi.adSelectorOption),
            -1 == Mi.thirdPartySelectorMetadata || isNaN(Mi.thirdPartySelectorMetadata) || (e["@ThirdPartySelectorMetadata"] = Mi.thirdPartySelectorMetadata),
            -1 == Mi.videoTrailerSelectorAdUnitId || isNaN(Mi.videoTrailerSelectorAdUnitId) || (e["@VideoTrailerSelectorAdUnitId"] = Mi.videoTrailerSelectorAdUnitId),
            e
        }
        ;
        _proto27._buildSiteLocation = function _buildSiteLocation() {
            return {
                "@Path": "",
                VideoPlayer: {
                    "@Url": $.pageUrl,
                    "@Mode": ni.externalViewMode,
                    VideoAsset: {
                        "@Id": $.assetId,
                        "@BitRate": 650,
                        "@Width": 480,
                        "@Height": 360,
                        EAB: {
                            "@EntityId": $.entityId,
                            "@AssetId": $.assetId,
                            "@BundleId": $.bundleId,
                            "@PackageId": Rt.entity && Rt.entity.bundle && Rt.entity.bundle.packageId || 2
                        }
                    }
                }
            }
        }
        ;
        _proto27._buildFormatProfiles = function _buildFormatProfiles() {
            return [{
                Profile: "mp4"
            }, {
                Profile: "JS VPAID"
            }, {
                Profile: "JavaScript"
            }]
        }
        ;
        _proto27._buildHubSite = function _buildHubSite() {
            var e = "";
            return "yahoo" == W.DISTRO.toLowerCase() && (e = "view.yahoo.com"),
            {
                "#text": e
            }
        }
        ;
        _proto27._encryptAdRequest = function _encryptAdRequest(e, t) {
            var i = {}
              , n = oe.util.base64ToBytes(t || "d8nmQB30Zcym3G6IefdRk3Fkw5tRUxCDC4509P54cQQ=");
            for (var _e27 = 0; _e27 < n.length; _e27++) {
                n[_e27] = 42 ^ n[_e27]
            }
            var r = Pe.encrypt(e, n, {
                mode: oe.mode.CBC7
            });
            return i = {
                encryptedString: r.ciphertext,
                kv: 2,
                iv: r.iv
            },
            i
        }
        ;
        _proto27._deflateBytes = function _deflateBytes(e) {
            return Ci.a.deflate(e)
        }
        ;
        return _class13
    }());
    var Di = function() {
        function Di(e) {
            var t = e || {}
              , i = t.unit;
            i && (this._unitId = i.id,
            this._unitType = i.type),
            this._advertiserId = t.advertiserId,
            this._campaignId = t.campaignId,
            this._name = t.name,
            this._viewability = t.viewability,
            this._clickthrough = t.clickthrough;
            var n = t.flight;
            n && (this._flightId = n.id,
            this._flightType = n.type);
            var r = t.moat;
            r && (this._freeWeelCode = r.freeWeelCode,
            this._partnerCode = r.partnerCode)
        }
        _createClass(Di, [{
            key: "unitId",
            get: function get() {
                return isNaN(this._unitId) ? -1 : this._unitId
            }
        }, {
            key: "unitType",
            get: function get() {
                return this._unitType || ""
            }
        }, {
            key: "advertiserId",
            get: function get() {
                return this._advertiserId
            }
        }, {
            key: "compaignId",
            get: function get() {
                return this._campaignId
            }
        }, {
            key: "name",
            get: function get() {
                return this._name
            }
        }, {
            key: "viewability",
            get: function get() {
                return this._viewability
            }
        }, {
            key: "clickthrough",
            get: function get() {
                return this._clickthrough
            }
        }, {
            key: "flightId",
            get: function get() {
                return isNaN(this._flightId) ? -1 : this._flightId
            }
        }, {
            key: "flightType",
            get: function get() {
                return this._flightType || ""
            }
        }, {
            key: "freeWeelCode",
            get: function get() {
                return this._freeWeelCode || ""
            }
        }, {
            key: "partnerCode",
            get: function get() {
                return this._partnerCode || ""
            }
        }, {
            key: "companions",
            get: function get() {
                return this._companions
            }
        }]);
        return Di
    }();
    var Li = function(_m12) {
        _inheritsLoose(Li, _m12);
        function Li() {
            var _this53;
            _this53 = _m12.call(this) || this,
            _this53.reset();
            return _this53
        }
        var _proto28 = Li.prototype;
        _proto28.updateOverrideParameters = function updateOverrideParameters() {
            this.update({
                overrideAdUnits: Q.getParameterInUrlByName("overrideAdUnits") || "",
                overrideVpaidCreativeUrl: Q.getParameterInUrlByName("overrideVpaidCreativeUrl") || "",
                forceHighAdBitrate: Q.getParameterInUrlByName("forceHighAdBitrate") || !1
            })
        }
        ;
        _proto28.reset = function reset() {
            this.set({
                playlistPromises: {},
                playlists: {},
                desireBitrate: 1e6,
                forceHighAdBitrate: !1,
                videoTrailerSelectorAdUnitId: -1,
                thirdPartySelectorMetadata: -1,
                sessionState: "",
                isAdSessionSampled: Math.random() < .01,
                currentSlot: -1,
                currentAdMetadata: null
            }),
            this.updateOverrideParameters()
        }
        ;
        _proto28.fetchPod = function fetchPod(e, t, i) {
            var _this54 = this;
            return this._data.playlistPromises[e] || (this._data.playlistPromises[e] = Ri.fetchPlaylist(e, i).then(function(t) {
                return i.isCancellationRequested ? At : (_this54._data.playlists[e] = t,
                t)
            })),
            t || this._data.playlistPromises[e].then(function() {
                _this54._data.playlistPromises[e] = null
            }),
            this._data.playlistPromises[e]
        }
        ;
        _proto28.fetchPodFromVASTList = function fetchPodFromVASTList(e, t) {
            var i = new Ai;
            this._data.playlists[e] = i.parseVASTList(t)
        }
        ;
        _createClass(Li, [{
            key: "currentPlaylist",
            get: function get() {
                return this._data.playlists[this.currentPod]
            }
        }, {
            key: "currentAdUnit",
            get: function get() {
                var e = this._data.playlists[this.currentPod];
                return e && e.adUnits[this.currentSlot]
            },
            set: function set(e) {
                this._data.playlists[this.currentPod].adUnits[this.currentSlot] = e
            }
        }, {
            key: "currentAdMetadata",
            set: function set(e) {
                !e || e instanceof Di || (e = new Di(e)),
                this.update({
                    currentAdMetadata: e
                })
            },
            get: function get() {
                return this._data.currentAdMetadata
            }
        }, {
            key: "countdownParams",
            get: function get() {
                var _this55 = this;
                var e = 0
                  , t = 0
                  , i = 0
                  , n = Math.max(this.currentAdRemainingTime || 0, 0);
                return this.currentPlaylist && this.currentPlaylist.adUnits.forEach(function(r, s) {
                    r.isSafeResponse || _i.isBlankAdUnit(r) || (e += s == _this55.currentSlot ? _this55.currentAdDuration : r.linear.duration,
                    ++t,
                    s > _this55.currentSlot && (n += r.linear.duration,
                    ++i))
                }),
                {
                    remainSeconds: n,
                    totalSeconds: e,
                    remainCount: i,
                    totalCount: t
                }
            }
        }]);
        return Li
    }(m);
    Li.defineProxyProperties({
        overrideVpaidCreativeUrl: !1,
        forceHighAdBitrate: !1,
        videoTrailerSelectorAdUnitId: !0,
        thirdPartySelectorMetadata: !0,
        adSelectorOption: !0,
        overrideAdUnits: !1,
        sessionState: !0,
        desireBitrate: !1,
        currentSlot: !0,
        currentPod: !0,
        playlists: !1,
        playlistPromises: !1,
        skipAdBreak: !0,
        isAdSessionSampled: !1,
        currentAdRemainingTime: !0,
        currentAdDuration: !0
    });
    var Mi = new Li;
    var Oi = Object.assign({
        CONTINUOUS_PLAY: "continuousplay",
        METADATA_CUE_CHANGE: "metadatacuechange",
        READY: "ready",
        ROLLOVER: "rollover",
        START: "start",
        STOP: "stop",
        MBR_MODE_CHANGE: "mbrmodechange",
        WILL_LOAD_START: "willloadstart"
    }, G.e);
    var xi = Object.assign({
        before: function before(e) {
            return "before_" + e
        },
        after: function after(e) {
            return "after_" + e
        },
        INTRO_START: "introstart",
        INTRO_END: "introend",
        AD_BREAK_END: "adbreakend",
        AD_BREAK_START: "adbreakstart",
        AD_POD_END: "adpodend",
        AD_POD_START: "adpodstart",
        AD_PROGRESS_UPDATE: "adprogressupdate",
        SEGMENT_END: "segmentend",
        SEGMENT_START: "segmentstart",
        USER_ACTION: "useraction",
        CONTINUOUS_SESSION_START: "continuous_session_start",
        CONTINUOUS_SESSION_END: "continuous_session_end",
        SOURCE_RENDER_START: "sourcerenderstart"
    }, Oi);
    var Ni = {
        CueType: G.b.CueType,
        IntroType: G.b.IntroType,
        QualityType: G.b.QualityType,
        TrackId: G.b.TrackId,
        TrackingEvent: G.b.TrackingEvent
    };
    var Ui = new (function(_m13) {
        _inheritsLoose(_class14, _m13);
        function _class14() {
            var _this56;
            _this56 = _m13.call(this) || this,
            _this56._data = {
                isOn: !0,
                autoPlayUpNext: !1,
                userInteractionTime: -1
            };
            return _this56
        }
        var _proto29 = _class14.prototype;
        _proto29.reset = function reset() {
            this.set({})
        }
        ;
        _createClass(_class14, [{
            key: "isOn",
            set: function set(e) {
                this.update({
                    isOn: e,
                    autoPlayUpNext: e
                })
            },
            get: function get() {
                return this._data.isOn
            }
        }, {
            key: "autoPlayUpNext",
            set: function set(e) {
                this.update({
                    autoPlayUpNext: e
                })
            },
            get: function get() {
                return this._data.autoPlayUpNext
            }
        }, {
            key: "userInteractionTime",
            set: function set(e) {
                this.update({
                    userInteractionTime: e
                })
            },
            get: function get() {
                return this._data.userInteractionTime
            }
        }]);
        return _class14
    }(m));
    var Bi = Ut.EPSILON;
    var Fi = function(_m14) {
        _inheritsLoose(Fi, _m14);
        function Fi() {
            var _this57;
            _this57 = _m14.call(this) || this,
            _this57._data = {
                isSeeking: !1
            };
            return _this57
        }
        var _proto30 = Fi.prototype;
        _proto30.getSeekableTarget = function getSeekableTarget(e) {
            var t = this.getSeekBlockedReason(e);
            return t ? {
                reason: t
            } : this.findSeekCrossAdPosition(e)
        }
        ;
        _proto30.getSeekBlockedReason = function getSeekBlockedReason(e) {
            var t = Rt.entity
              , _Kt$seekableWindow = Kt.seekableWindow
              , i = _Kt$seekableWindow.start
              , n = _Kt$seekableWindow.end;
            return null == e || null == t || n - i < Bi ? "NOT_READY" : this.isAllowed ? e < i && (t.isLive && !t.bundle.startover || Kt.isPartialPSL) ? "SEEK_REGION_UNAVAILABLE" : null : "AD_SEEK"
        }
        ;
        _proto30.getTarget = function getTarget(e) {
            var t = Rt.entity
              , _Kt$seekableWindow2 = Kt.seekableWindow
              , i = _Kt$seekableWindow2.start
              , n = _Kt$seekableWindow2.end;
            return Math.abs(e - n) < Bi || t.isLive && e > n - 10 ? n : e = Math.max(i, Math.min(e, n))
        }
        ;
        _proto30.findSeekCrossAdPosition = function findSeekCrossAdPosition(e) {
            var t = this.getTarget(e)
              , i = {
                insertedAdBreak: null,
                burnedInAdBreak: null,
                isAdSkipped: !1,
                contentPosition: t
            };
            if (Kt.adConsumed && this.isPremiumPSL)
                return i.contentPosition = t + Bi,
                i;
            var n = Wt.findContainingBreak(t);
            if (null != n)
                return i.burnedInAdBreak = n,
                i.contentPosition = Math.max(n.start, Kt.seekableWindow.start),
                i;
            if (t < Kt.currentTime)
                return i;
            if (n = Wt.findLastCrossedBreak(Kt.currentTime, t + Bi),
            null == n)
                return i;
            var s = t > n.start + Bi
              , a = Kt.totalPlayedTime - Kt.lastContentPlayedDuration < 45;
            return Kt.adConsumed && s && a ? i.isAdSkipped = !0 : Wt.useManifestBreaks ? (i.burnedInAdBreak = n,
            i.contentPosition = n.start) : (i.insertedAdBreak = Wt.cuePoints[n.index],
            i.contentPosition = t + Bi),
            i
        }
        ;
        _createClass(Fi, [{
            key: "isAllowed",
            get: function get() {
                var e = Kt.mediaType;
                return e == Ft.CONTENT || e == Ft.BURNED_IN_AD && this.isPremiumPSL
            }
        }, {
            key: "isPremiumPSL",
            get: function get() {
                var e = Rt.entity && Rt.entity.bundle.isRecordedContent;
                return pt.isPremiumPSL && (Kt.isRecording || e)
            }
        }]);
        return Fi
    }(m);
    Fi.defineProxyProperties({
        isSeeking: !0
    });
    var Vi = new Fi;
    var Hi = new f;
    var ji = function() {
        function ji() {}
        var _proto31 = ji.prototype;
        _proto31.init = function init() {}
        ;
        _proto31.broadcastBefore = function broadcastBefore(e) {
            for (var _len2 = arguments.length, t = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                t[_key2 - 1] = arguments[_key2]
            }
            Hi.trigger.apply(Hi, ["BEFORE_EVENT." + e].concat(t))
        }
        ;
        _proto31.broadcast = function broadcast(e) {
            for (var _len3 = arguments.length, t = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
                t[_key3 - 1] = arguments[_key3]
            }
            Hi.trigger.apply(Hi, [e].concat(t)),
            Hi.trigger.apply(Hi, ["AFTER_EVENT." + e].concat(t))
        }
        ;
        _proto31.beforeBroadcast = function beforeBroadcast(e, t) {
            Hi.on("BEFORE_EVENT." + e, t)
        }
        ;
        _proto31.onBroadcast = function onBroadcast(e, t) {
            Hi.on(e, t)
        }
        ;
        _proto31.afterBroadcast = function afterBroadcast(e, t) {
            Hi.on("AFTER_EVENT." + e, t)
        }
        ;
        return ji
    }();
    var Wi = {
        CustomReceiver: {
            ACK: "ack",
            START: "start",
            STOP: "stop",
            PLAY: "play",
            PAUSE: "pause",
            WILL_SEEK: "will_seek",
            SEEK: "seek",
            RELATIVE_SEEK: "relative_seek",
            SPECIAL_SEEK: "special_seek",
            REQUEST_SETTINGS: "request_settings",
            REQUEST_DETAILED_STATUS: "request_detailed_status",
            SELECT_CAPTION: "select_caption",
            SELECT_CAPTION_STYLE: "select_caption_style",
            SELECT_AUDIO_TRACK: "select_audio_track",
            SELECT_QUALITY: "select_quality",
            SET_AUTOPLAY: "set_autoplay",
            RECEIVER_CONTEXT: "receiver_context",
            CHANGE_RECORDING: "change_recording",
            UPDATE_CREDENTIALS: "update_credentials"
        },
        CustomSender: {
            CURRENT_SETTINGS: "current_settings",
            DETAILED_STATUS: "detailed_status",
            PLAYBACK_UPDATE: "playback_update",
            PLAY_NEXT: "play_next"
        },
        Media: {
            PAUSE: "pause",
            PLAY: "play",
            PLAY_AGAIN: "playagain",
            SEEK: "onSeek",
            SET_VOLUME: "onSetVolume",
            STOP: "onStop"
        },
        CAC: {
            LOAD: "load",
            SET_CREDENTIAL: "setcredential",
            DISPLAY_METADATA: "displaymetadata",
            SKIP_ADS: "skipads"
        }
    };
    var Gi = {};
    Object.keys(Oi).forEach(function(e) {
        Gi[e] = "InsertedAdEvents." + Oi[e]
    });
    var zi = {};
    Object.keys(Oi).forEach(function(e) {
        zi[e] = "IntroEvents." + Oi[e]
    });
    var qi = zi;
    var Yi = {
        AdLoaded: "AdLoaded",
        AdStarted: "AdStarted",
        AdStopped: "AdStopped",
        AdSkipped: "AdSkipped",
        AdLinearChange: "AdLinearChange",
        AdSizeChange: "AdSizeChange",
        AdExpandedChange: "AdExpandedChange",
        AdSkippableStateChange: "AdSkippableStateChange",
        AdRemainingTimeChange: "AdRemainingTimeChange",
        AdDurationChange: "AdDurationChange",
        AdVolumeChange: "AdVolumeChange",
        AdImpression: "AdImpression",
        AdVideoStart: "AdVideoStart",
        AdVideoFirstQuartile: "AdVideoFirstQuartile",
        AdVideoMidpoint: "AdVideoMidpoint",
        AdVideoThirdQuartile: "AdVideoThirdQuartile",
        AdVideoComplete: "AdVideoComplete",
        AdClickThru: "AdClickThru",
        AdInteraction: "AdInteraction",
        AdUserAcceptInvitation: "AdUserAcceptInvitation",
        AdUserMinimize: "AdUserMinimize",
        AdUserClose: "AdUserClose",
        AdPaused: "AdPaused",
        AdPlaying: "AdPlaying",
        AdLog: "AdLog",
        AdError: "AdError",
        HULU: {
            AdProgressUpdate: "AdProgressUpdate",
            AdStoppableStateChange: "AdStoppableStateChange",
            AdSelectorChoice: "AdSelectorChoice",
            CdnChange: "CdnChange",
            StreamErrorUpdate: "StreamErrorUpdate",
            ExitWithAdFree: "exitWithAdFree",
            ExitWithSkipAdBreak: "exitWithSkipAdBreak",
            ExitSelectWatch: "exitSelectWatch",
            ExitAutoWatch: "exitAutoWatch",
            ExitAfterOptIn: "exitAfterOptIn",
            WatchFullTrailer: "WatchFullTrailer",
            PauseVideoPlayback: "PauseVideoPlayback",
            ResumeVideoPlayback: "ResumeVideoPlayback",
            TrailerSelectorChoice: "TrailerSelectorChoice"
        }
    };
    var Qi = function() {
        function Qi() {
            this._paused = !0
        }
        var _proto32 = Qi.prototype;
        _proto32.callMeLater = function callMeLater(e, t, i) {
            var n = this
              , r = Array.prototype.slice.call(arguments, 3);
            this._duration = e,
            this._callback = function() {
                t.apply(i, r),
                n.abort()
            }
            ,
            this.resume()
        }
        ;
        _proto32.pause = function pause() {
            this._paused || (this._paused = !0,
            this._duration -= Date.now() - this._start,
            window.clearTimeout(this._timeout))
        }
        ;
        _proto32.resume = function resume() {
            this._paused && (this._paused = !1,
            this._start = Date.now(),
            this._timeout = window.setTimeout(this._callback, this._duration))
        }
        ;
        _proto32.abort = function abort() {
            this._paused = !0,
            this._callback = null,
            window.clearTimeout(this._timeout)
        }
        ;
        return Qi
    }();
    var $i = new (function(_ji) {
        _inheritsLoose(_class15, _ji);
        function _class15() {
            var _this58;
            _this58 = _ji.call(this) || this,
            _this58._cts = new G.a,
            _this58._linearCompleteWatchdog = new Qi,
            _this58._startPodStopwatch = new Ii,
            _this58._actualPodDurationStopwatch = new Ii,
            _this58._actualPodPlayingDurationStopwatch = new Ii;
            return _this58
        }
        var _proto33 = _class15.prototype;
        _proto33.init = function init(e, t) {
            this.videoTag = e,
            this.adSlot = t,
            this.videoTag.addEventListener("canplay", this.onVideoCanPlay.bind(this)),
            this.onBroadcast(Yi.AdSkipped, this.onAdStopped.bind(this)),
            this.onBroadcast(Yi.AdStopped, this.onAdStopped.bind(this)),
            this.onBroadcast(Yi.AdError, this.onAdError.bind(this)),
            this.onBroadcast(Yi.HULU.ExitWithAdFree, this.onExitWithAdFree.bind(this)),
            this.onBroadcast(Yi.HULU.ExitWithSkipAdBreak, this.onExitWithSkipAdBreak.bind(this)),
            this.onBroadcast(Yi.HULU.TrailerSelectorChoice, this.onTrailerSelectorChoice.bind(this)),
            this.onBroadcast("AdController.initPod", this.initPod.bind(this)),
            this.onBroadcast("AdController.startPod", this.startPod.bind(this)),
            this.onBroadcast("AdController.play", this._play.bind(this)),
            this.onBroadcast("AdController.pause", this._pause.bind(this)),
            this.onBroadcast("AdController.stopSession", this._stopSession.bind(this)),
            this.onBroadcast("AdController.stop", this._stop.bind(this)),
            this.onBroadcast(Oi.TIMED_METADATA, this.onPlayerTimedMetadata.bind(this))
        }
        ;
        _proto33.onVideoCanPlay = function onVideoCanPlay() {
            var _this59 = this;
            Promise.resolve(this.videoTag.play()).catch(function(e) {
                e && "NotAllowedError" === e.name && _this59.broadcast("VPAIDController.pause")
            })
        }
        ;
        _proto33.initPod = function initPod() {
            G.c.log("AdController.initPod", Kt.nextCuePoint.data.pod),
            Mi.fetchPod(Kt.nextCuePoint.data.pod, !0, this._cts.token)
        }
        ;
        _proto33.startPod = function startPod() {
            var _this60 = this;
            this.broadcast(Gi.WILL_LOAD_START);
            var e = this._cts.token
              , t = Kt.currentCuePoint.data.pod;
            G.c.log("AdController.startPod", t),
            Mi.currentPod = t,
            this._startPodStopwatch.reset().start(),
            this._linearCompleteWatchdog.abort(),
            this._linearCompleteWatchdog.callMeLater(3e5, this.onLinearCompleteTimeout, this),
            Mi.fetchPod(t, !1, e).then(function(i) {
                if (e.isCancellationRequested)
                    return At;
                _this60._startPodStopwatch.pause(),
                _this60._actualPodDurationStopwatch.reset().start(),
                _this60._actualPodPlayingDurationStopwatch.reset().start(),
                Mi.isAdSessionSampled && se.reportToPlayerIndex(ne.Type.SAMPLE_POD_START, {
                    pod: t,
                    startPodTime: _this60._startPodStopwatch.getTime()
                }),
                _this60._playPlaylist(i)
            }, function(t) {
                if (e.isCancellationRequested)
                    return At;
                se.reportToPlayerIndex(ne.Type.UNEXPECTED_EXECUTION, {
                    reason: t && t.toString() || "",
                    reasonStackTrace: t && t.stack || ""
                }),
                Kt.mediaType = Ft.CONTENT,
                _this60.broadcast("PlayerController.play")
            })
        }
        ;
        _proto33.onAdStopped = function onAdStopped() {
            Mi.update({
                currentSlot: Mi.currentSlot + 1
            }),
            this._tryToPlayAdUnit()
        }
        ;
        _proto33.onAdError = function onAdError() {
            var e = _i.createAdBlocker(Mi.currentAdUnit);
            Mi.currentAdUnit = e,
            this.broadcast("VPAIDController.playAdUnit", this.adSlot, this.videoTag)
        }
        ;
        _proto33.onTrailerSelectorChoice = function onTrailerSelectorChoice(e) {
            if (e && e.opt_in) {
                var _e28 = Mi.currentAdUnit;
                if (0 == Mi.currentPod) {
                    var _t24 = _i.createTrailerVideoPlaylist(1, _e28)
                      , _i27 = Mi.playlists
                      , _n18 = Mi.playlistPromises;
                    _i27[1] = _t24,
                    _n18[1] = Promise.resolve(_t24),
                    Mi.update({
                        playlists: _i27,
                        playlistPromises: _n18
                    })
                } else {
                    var _t25 = _i.createTrailerVideoAdUnit(_e28)
                      , _i28 = Mi.currentPlaylist.adUnits;
                    _i28.splice(_e28.slotIndex + 1, _i28.length - _e28.slotIndex - 1, _t25),
                    _t25.slotIndex = _i28.length - 1
                }
            }
        }
        ;
        _proto33.onExitWithAdFree = function onExitWithAdFree() {
            Mi.thirdPartySelectorMetadata = Mi.currentAdUnit.adUnitId,
            Mi.skipAdBreak = !0
        }
        ;
        _proto33.onExitWithSkipAdBreak = function onExitWithSkipAdBreak() {
            Mi.skipAdBreak = !0
        }
        ;
        _proto33.onLinearCompleteTimeout = function onLinearCompleteTimeout() {
            var e = {
                pod: Mi.currentPod,
                actualPodDuration: this._actualPodDurationStopwatch.getTime(),
                actualPodPlayingDuration: this._actualPodPlayingDurationStopwatch.getTime()
            }
              , t = Mi.currentAdUnit;
            t && (e.adUnitId = t.adUnitId,
            e.vastUrl = t.vastUrl),
            se.reportToPlayerIndex(ne.Type.LINEAR_COMPLETE_TIMEOUT, e)
        }
        ;
        _proto33.onPlayerTimedMetadata = function onPlayerTimedMetadata(e) {
            if (Kt.isVod)
                return;
            if (!e || !e.detail || "urn:com:hulu:dash:event:ad:2018" !== e.detail.schemeIdUri)
                return;
            var t = e.detail.messageData;
            try {
                t = JSON.parse(t)
            } catch (e) {
                return void G.c.log("AdController.onPlayerTimedMetadata parse event ads data failed.")
            }
            "metadata" == t.type ? Mi.currentAdMetadata = t.data : "tracking" == t.type && this.broadcast("BeaconController.adTracking", {
                id: e.detail.id,
                position: e.detail.presentationTime,
                url: t.data && t.data.url
            })
        }
        ;
        _proto33._stopSession = function _stopSession() {
            Mi.reset(),
            Mi.currentAdMetadata = null,
            this._cts.cancel(),
            this._cts = new G.a,
            this._linearCompleteWatchdog.abort(),
            this.broadcast("VPAIDController.stopAdSession")
        }
        ;
        _proto33._playPlaylist = function _playPlaylist(e) {
            G.c.log("AdController._playPlaylist", e),
            Mi.update({
                currentSlot: 0
            }),
            this._tryToPlayAdUnit()
        }
        ;
        _proto33._tryToPlayAdUnit = function _tryToPlayAdUnit() {
            if (Mi.currentPlaylist && Mi.currentSlot < Mi.currentPlaylist.adUnits.length && !Mi.skipAdBreak) {
                var _e29 = Mi.currentAdUnit.linear ? Mi.currentAdUnit.linear.duration : 0;
                Mi.update({
                    currentAdRemainingTime: _e29,
                    currentAdDuration: _e29
                }),
                this.broadcast("VPAIDController.playAdUnit", this.adSlot, this.videoTag)
            } else
                0 != Kt.currentCuePoint.data.pod || Mi.skipAdBreak ? (this._actualPodDurationStopwatch.pause(),
                this._actualPodPlayingDurationStopwatch.pause(),
                this._linearCompleteWatchdog.abort(),
                Mi.isAdSessionSampled && se.reportToPlayerIndex(ne.Type.SAMPLE_POD_COMPLETE, {
                    pod: Mi.currentPod,
                    actualPodDuration: this._actualPodDurationStopwatch.getTime(),
                    actualPodPlayingDuration: this._actualPodPlayingDurationStopwatch.getTime()
                }),
                Kt.mediaType = Ft.CONTENT,
                Mi.skipAdBreak = !1,
                this.broadcast("PlayerController.play")) : (Kt.currentCuePoint = Wt.cuePoints[1],
                this.startPod())
        }
        ;
        _proto33._stop = function _stop() {
            this.broadcast("VPAIDController.stopAd")
        }
        ;
        _proto33._play = function _play() {
            this._linearCompleteWatchdog.resume(),
            this._actualPodPlayingDurationStopwatch.start(),
            this.broadcast("VPAIDController.play")
        }
        ;
        _proto33._pause = function _pause() {
            this._linearCompleteWatchdog.pause(),
            this._actualPodPlayingDurationStopwatch.pause(),
            this.broadcast("VPAIDController.pause")
        }
        ;
        return _class15
    }(ji));
    var Xi = function(_m15) {
        _inheritsLoose(Xi, _m15);
        function Xi(e) {
            var _this61;
            _this61 = _m15.call(this) || this,
            _this61._data = {
                url: e.url || ""
            };
            return _this61
        }
        _createClass(Xi, [{
            key: "url",
            get: function get() {
                return this._data.url
            }
        }]);
        return Xi
    }(m);
    var Ji = function(_m16) {
        _inheritsLoose(Ji, _m16);
        function Ji() {
            var _this62;
            _this62 = _m16.call(this) || this,
            _this62._data = {
                preroll: [],
                prerollIndex: -1,
                postroll: [],
                postrollIndex: -1,
                useManifestIntro: !1
            };
            return _this62
        }
        var _proto34 = Ji.prototype;
        _proto34.init = function init(e) {
            e == Ft.INTRO ? this.update({
                prerollIndex: -1
            }) : e == Ft.POST_INTRO && this.update({
                postrollIndex: -1
            })
        }
        ;
        _proto34.updateFromDeejay = function updateFromDeejay(e) {
            var t = []
              , i = [];
            if (e && e.breaks) {
                var _n19 = e.breaks;
                for (var _e30 = 0; _e30 < _n19.length; ++_e30) {
                    var _r10 = _n19[_e30];
                    (/^preroll/.test(_r10.kind) || /^postroll/.test(_r10.kind)) && (/^preroll/.test(_r10.kind) ? t.push(new Xi(_r10)) : i.push(new Xi(_r10)))
                }
            }
            this.update({
                preroll: t,
                prerollIndex: -1,
                postroll: i,
                postrollIndex: -1,
                useManifestIntro: e && e.use_manifest_breaks
            })
        }
        ;
        _proto34.hasNextIntroUnit = function hasNextIntroUnit(e) {
            return e == Ft.INTRO ? this._data.preroll.length > this._data.prerollIndex + 1 : e == Ft.POST_INTRO ? this._data.postroll.length > this._data.postrollIndex + 1 : void 0
        }
        ;
        _proto34.getNextIntroUnit = function getNextIntroUnit(e) {
            if (e == Ft.INTRO) {
                var _e31 = this._data.prerollIndex + 1;
                return this.update({
                    prerollIndex: _e31
                }),
                this._data.preroll[_e31]
            }
            if (e == Ft.POST_INTRO) {
                var _e32 = this._data.postrollIndex + 1;
                return this.update({
                    postrollIndex: _e32
                }),
                this._data.postroll[_e32]
            }
        }
        ;
        _proto34.getCurrentIntroUnit = function getCurrentIntroUnit(e) {
            return e == Ft.INTRO ? this._data.preroll[this._data.prerollIndex] : e == Ft.POST_INTRO ? this._data.postroll[this._data.postrollIndex] : void 0
        }
        ;
        _proto34.isIntroPeriod = function isIntroPeriod(e) {
            return !!e && e.type == Ni.CueType.INTRO
        }
        ;
        _proto34.generateIntros = function generateIntros() {
            if (this._data.useManifestIntro)
                return null;
            var e = this._data.preroll
              , t = this._data.postroll;
            return e.map(function(e) {
                return {
                    type: Ni.IntroType.PRE_ROLL,
                    url: e.url
                }
            }).concat(t.map(function(e) {
                return {
                    type: Ni.IntroType.POST_ROLL,
                    url: e.url
                }
            }))
        }
        ;
        return Ji
    }(m);
    Ji.defineProxyProperties({
        currentIntroDuration: !0,
        currentIntroPosition: !0
    });
    var Zi = new Ji;
    var en = new (function(_ji2) {
        _inheritsLoose(_class16, _ji2);
        function _class16() {
            var _this63;
            _this63 = _ji2.call(this) || this,
            _this63._onIntroEnd = _this63._onIntroEnd.bind(_assertThisInitialized(_this63)),
            _this63._onIntroError = _this63._onIntroError.bind(_assertThisInitialized(_this63)),
            _this63._onCanPlay = _this63._onCanPlay.bind(_assertThisInitialized(_this63)),
            _this63._onPlay = _this63._onPlay.bind(_assertThisInitialized(_this63)),
            _this63._onPlaying = _this63._onPlaying.bind(_assertThisInitialized(_this63)),
            _this63._onPause = _this63._onPause.bind(_assertThisInitialized(_this63)),
            _this63._onWaiting = _this63._onWaiting.bind(_assertThisInitialized(_this63)),
            _this63._onTimeUpdate = _this63._onTimeUpdate.bind(_assertThisInitialized(_this63)),
            _this63._onLoadedMetadata = _this63._onLoadedMetadata.bind(_assertThisInitialized(_this63)),
            _this63._updateVolume = _this63._updateVolume.bind(_assertThisInitialized(_this63));
            return _this63
        }
        var _proto35 = _class16.prototype;
        _proto35.init = function init(e) {
            this.videoTag = e,
            this.onBroadcast("IntroController.startIntro", this._startIntro.bind(this)),
            this.onBroadcast("IntroController.startPostIntro", this._startPostIntro.bind(this)),
            this.onBroadcast("IntroController.play", this._play.bind(this)),
            this.onBroadcast("IntroController.pause", this._pause.bind(this)),
            this.onBroadcast("IntroController.stop", this._stop.bind(this))
        }
        ;
        _proto35._attachListeners = function _attachListeners() {
            this.videoTag.addEventListener(Oi.ENDED, this._onIntroEnd),
            this.videoTag.addEventListener(Oi.ERROR, this._onIntroError),
            this.videoTag.addEventListener(Oi.CAN_PLAY, this._onCanPlay),
            this.videoTag.addEventListener(Oi.PLAY, this._onPlay),
            this.videoTag.addEventListener(Oi.PLAYING, this._onPlaying),
            this.videoTag.addEventListener(Oi.PAUSE, this._onPause),
            this.videoTag.addEventListener(Oi.WAITING, this._onWaiting),
            this.videoTag.addEventListener(Oi.TIME_UPDATE, this._onTimeUpdate),
            this.videoTag.addEventListener(Oi.LOADED_METADATA, this._onLoadedMetadata),
            Kt.onUpdated(this._updateVolume)
        }
        ;
        _proto35._removeListeners = function _removeListeners() {
            this.videoTag.removeEventListener(Oi.ERROR, this._onError),
            this.videoTag.removeEventListener(Oi.TIME_UPDATE, this._onTimeUpdate),
            this.videoTag.removeEventListener(Oi.ENDED, this._onEnded),
            this.videoTag.removeEventListener(Oi.LOADED_METADATA, this._onLoadedMetadata),
            this.videoTag.removeEventListener(Oi.CAN_PLAY, this._onCanPlay),
            this.videoTag.removeEventListener(Oi.PLAY, this._onPlay),
            this.videoTag.removeEventListener(Oi.PLAYING, this._onPlaying),
            this.videoTag.removeEventListener(Oi.PAUSE, this._onPause),
            this.videoTag.removeEventListener(Oi.WAITING, this._onWaiting),
            Kt.offUpdated(this._updateVolume)
        }
        ;
        _proto35._stop = function _stop() {
            this._removeListeners(),
            this.videoTag.removeAttribute("src"),
            this.videoTag.load(),
            this.broadcast(qi.STOP)
        }
        ;
        _proto35.load = function load(e) {
            this._attachListeners(),
            this.videoTag.setAttribute("src", e),
            this.videoTag.load(),
            this.videoTag.volume = Kt.playVolume
        }
        ;
        _proto35._startIntro = function _startIntro() {
            Kt.mediaType = Ft.INTRO,
            Zi.init(Kt.mediaType),
            this._tryToPlayNextIntroUnit()
        }
        ;
        _proto35._startPostIntro = function _startPostIntro() {
            Kt.mediaType = Ft.POST_INTRO,
            Zi.init(Kt.mediaType),
            this._tryToPlayNextIntroUnit()
        }
        ;
        _proto35._tryToPlayNextIntroUnit = function _tryToPlayNextIntroUnit() {
            var e = Kt.mediaType;
            Zi.hasNextIntroUnit(e) ? this._playIntroUnit(Zi.getNextIntroUnit(e)) : e == Ft.INTRO ? (Kt.mediaType = Ft.CONTENT,
            this.broadcast("PlayerController.load")) : Kt.mediaType == Ft.POST_INTRO && (Kt.mediaType = Ft.CONTENT,
            this.broadcast("PlayerController.ended"))
        }
        ;
        _proto35._playIntroUnit = function _playIntroUnit(e) {
            this.broadcast(qi.WILL_LOAD_START),
            this.load(e.url)
        }
        ;
        _proto35._onIntroEnd = function _onIntroEnd() {
            this._stop(),
            this.broadcast(qi.ENDED),
            this._tryToPlayNextIntroUnit()
        }
        ;
        _proto35._onIntroError = function _onIntroError() {
            this._stop(),
            G.c.error("Intro Playback Error"),
            this._tryToPlayNextIntroUnit()
        }
        ;
        _proto35._onLoadedMetadata = function _onLoadedMetadata() {
            Zi.currentIntroDuration = this.videoTag.duration,
            this._play()
        }
        ;
        _proto35._onCanPlay = function _onCanPlay() {
            this.broadcast(qi.CAN_PLAY)
        }
        ;
        _proto35._onPlay = function _onPlay() {
            this.broadcast(qi.PLAY)
        }
        ;
        _proto35._onPlaying = function _onPlaying() {
            this.broadcast(qi.PLAYING)
        }
        ;
        _proto35._onPause = function _onPause() {
            this.videoTag.ended || this.broadcast(qi.PAUSE)
        }
        ;
        _proto35._onTimeUpdate = function _onTimeUpdate() {
            Zi.currentIntroPosition = this.videoTag.currentTime
        }
        ;
        _proto35._onWaiting = function _onWaiting() {
            this.broadcast(qi.WAITING)
        }
        ;
        _proto35._play = function _play() {
            var _this64 = this;
            Promise.resolve(this.videoTag.play()).catch(function(e) {
                e && "NotAllowedError" === e.name && _this64.broadcast(qi.PAUSE, new Event("pause"))
            })
        }
        ;
        _proto35._pause = function _pause() {
            this.videoTag.pause()
        }
        ;
        _proto35._updateVolume = function _updateVolume(e, t, i) {
            (i.muted || i.volume) && (this.videoTag.volume = Kt.playVolume)
        }
        ;
        return _class16
    }(ji));
    var tn = "https://home." + (W.IS_QA ? "huluqa" : "hulu") + ".com/v1/users/self";
    var nn = new (function() {
        function _class17() {}
        var _proto36 = _class17.prototype;
        _proto36.fetchUserInfo = function fetchUserInfo(e) {
            var t = {
                "Content-Type": "application/json"
            };
            return W.COOKIE_ENABLE ? t["X-HULU-USER-AGENT"] = W.PLAYER_TYPE + "-player/" + W.COMPILED_VERSION : t.Authorization = "Bearer " + pt.userToken,
            Object(G.i)(tn, {
                method: "GET",
                headers: t,
                credentials: W.FETCH_CREDENTIALS
            }, {
                timeoutMs: 1e4
            }).then(function(e) {
                return e.assertOK().json()
            }).then(function(t) {
                if (e && e.isCancellationRequested)
                    return At;
                var i = pt.profileId
                  , n = t.profiles || []
                  , r = n[0];
                "-1" !== i && (r = n.find(function(e) {
                    return e.id == i
                })),
                pt.parseUserData({
                    userId: t.id,
                    profile: r,
                    subscription: t.subscription
                })
            }).catch(function(t) {
                if (e && e.isCancellationRequested)
                    return At;
                G.c.warn("Fetch user info failed", t)
            })
        }
        ;
        _proto36.trackAssetViewStart = function trackAssetViewStart() {
            var e = $.eabId;
            this._postToFlintan("asset_view_start", {
                eab_id: e,
                start_type: "u"
            })
        }
        ;
        _proto36.trackAssetViewProgress = function trackAssetViewProgress(e) {
            var t = $.eabId;
            this._postToFlintan("asset_view_progress", {
                eab_id: t,
                position: Math.floor(e)
            })
        }
        ;
        _proto36._postToFlintan = function _postToFlintan(e, t) {
            var i = {
                "Content-Type": "application/json"
            };
            return W.COOKIE_ENABLE ? i["X-HULU-USER-AGENT"] = W.PLAYER_TYPE + "-player/" + W.COMPILED_VERSION : i.Authorization = "Bearer " + pt.userToken,
            Object(G.i)(tn + "/profiles/self/" + e, {
                method: "POST",
                body: JSON.stringify(t),
                headers: i,
                credentials: W.FETCH_CREDENTIALS
            })
        }
        ;
        return _class17
    }());
    var rn = new (function() {
        function _class18() {
            this.reset(),
            this._playlistCallOffset = Ut.PLAYLIST_CALL_OFFSET + Math.random() * (Ut.PROGRAM_ROLLOVER_T_MINUS - Ut.PLAYLIST_CALL_OFFSET)
        }
        var _proto37 = _class18.prototype;
        _proto37.reset = function reset() {
            this._nextPlaylistPromise = null
        }
        ;
        _proto37.handleLiveProgress = function handleLiveProgress(e, t, i) {
            e >= t - this._playlistCallOffset && this._loadNextPlaylist(i)
        }
        ;
        _proto37.getRolloverAction = function getRolloverAction(e) {
            return this._loadNextPlaylist(e).then(function(e) {
                return e == Ut.RolloverActions.SIMPLE && Kt.liveEdge - Kt.duration > Ut.LIVE_LINEAR_THRESHOLD ? Ut.RolloverActions.SIMPLE_NONLINEAR : e
            })
        }
        ;
        _proto37._loadNextPlaylist = function _loadNextPlaylist(e) {
            if (null == this._nextPlaylistPromise)
                if (Rt.nextEntity) {
                    var _t26 = Rt.nextEntity.bundle;
                    this._nextPlaylistPromise = ei.loadUpnextPlaylist(_t26.eabId, _t26.channelId, e).then(function() {
                        return ei.upnextPlaylist.stormflowId == ei.playlist.stormflowId ? Ut.RolloverActions.SIMPLE : Ut.RolloverActions.RELOAD
                    })
                } else
                    this._nextPlaylistPromise = At,
                    on.liveEntityPoll(e);
            return this._nextPlaylistPromise
        }
        ;
        return _class18
    }());
    var sn = "hulu:client:playback:metadata:entity:poll:error";
    var on = new (function(_m17) {
        _inheritsLoose(_class19, _m17);
        function _class19() {
            var _this65;
            _this65 = _m17.call(this) || this,
            _this65._cts = new G.a;
            return _this65
        }
        var _proto38 = _class19.prototype;
        _proto38.startPoll = function startPoll() {
            this._updateLiveEntityPollTtl(),
            this.liveEntityPoll(this._cts.token)
        }
        ;
        _proto38.stopPoll = function stopPoll() {
            this._cts.cancel(),
            this._cts = new G.a,
            this._liveEntityPollTtl = -1,
            this._resetPollTimer(),
            this.set({})
        }
        ;
        _proto38.liveEntityPoll = function liveEntityPoll(e) {
            var _this66 = this;
            if (e.isCancellationRequested)
                return At;
            this._resetPollTimer();
            var t = Rt.entity.bundle
              , i = null;
            return vt.requestLiveEntityPoll(t.channelId, t.allETag).then(function(t) {
                return e.isCancellationRequested ? At : 304 === t.status ? Promise.reject("entity poll not modified") : 200 !== t.status ? (i = new ze("hulu:metadata:entity:poll:error"),
                i.rawError = t,
                i.message = "HeimdallService:request entity poll error",
                Promise.reject(i)) : t.json().then(function(n) {
                    var r = null;
                    if (n && n.items && n.items[0] && (r = Rt.parseEntityFromRawData(n.items[0])),
                    !r || !r.bundle)
                        return i = new ze(sn),
                        i.rawError = t,
                        i.message = "live poll:failing to parse entity from entity poll response",
                        Promise.reject(i);
                    var s = Rt.entity.bundle;
                    if (s.eabId !== r.bundle.eabId) {
                        if (r.bundle.availability.endDate <= s.availability.startDate)
                            return i = new ze(sn),
                            i.rawError = t,
                            i.message = "live poll:unexpected previous not airing program",
                            Promise.reject(i);
                        _this66._handleEabIdChanged(r)
                    } else
                        Rt.entity = r,
                        _this66._updateLiveEntityPollTtl(),
                        _this66._liveEntityPollTimer = setTimeout(function() {
                            return _this66.liveEntityPoll(e)
                        }, 1e3 * _this66._liveEntityPollTtl),
                        s.rightsETag !== r.bundle.rightsETag ? _this66._handleRightsChanged(e) : s.streamETag !== r.bundle.streamETag ? _this66._handleStreamChanged(e) : s.airingsETag !== r.bundle.airingsETag && _this66._handleAiringsChanged()
                })
            }).catch(function(t) {
                if (t instanceof ze && (qe.error = t),
                e.isCancellationRequested)
                    return At;
                _this66._resetPollTimer(),
                _this66._liveEntityPollTimer = setTimeout(function() {
                    return _this66.liveEntityPoll(e)
                }, 1e3 * _this66._liveEntityPollTtl)
            })
        }
        ;
        _proto38._handleEabIdChanged = function _handleEabIdChanged(e) {
            Rt.nextEntity || (Rt.updateBundleEndTime(e.bundle.availability.startDate),
            rn.reset()),
            Rt.nextEntity = e
        }
        ;
        _proto38._handleAiringsChanged = function _handleAiringsChanged() {
            Kt.duration = Rt.entity.bundle.duration
        }
        ;
        _proto38._handleRightsChanged = function _handleRightsChanged(e) {
            clearTimeout(this._blackoutPlaylistTimer),
            this._blackoutPlaylistTimer = setTimeout(function() {
                ei.loadPlaylist(!0, e).catch(function(t) {
                    e.isCancellationRequested || (qe.error = t)
                })
            }, 1e3 * Ut.BLACKOUT_PLAYLIST_DELAY)
        }
        ;
        _proto38._handleStreamChanged = function _handleStreamChanged(e) {
            var _this67 = this;
            clearTimeout(this._streamSwitchPlaylistTimer);
            var t = ei.playlist.stormflowId;
            this._streamSwitchPlaylistTimer = setTimeout(function() {
                ei.loadPlaylist(!0, e).then(function() {
                    e.isCancellationRequested || t != ei.playlist.stormflowId && (Rt.nextEntity = Rt.entity,
                    _this67.streamSwitching = !0)
                })
            }, 1e3 * Ut.STREAM_CHANGED_PLAYLIST_DELAY)
        }
        ;
        _proto38._updateLiveEntityPollTtl = function _updateLiveEntityPollTtl() {
            var e = Rt.entity.bundle
              , t = Math.min(e.airingsTtl, e.rightsTtl, e.streamTtl);
            this._liveEntityPollTtl = t > 0 ? t : Math.max(this._liveEntityPollTtl, 0) || 90
        }
        ;
        _proto38._resetPollTimer = function _resetPollTimer() {
            this._liveEntityPollTimer >= 0 && (clearTimeout(this._liveEntityPollTimer),
            this._liveEntityPollTimer = -1),
            this._blackoutPlaylistTimer >= 0 && (clearTimeout(this._blackoutPlaylistTimer),
            this._blackoutPlaylistTimer = -1)
        }
        ;
        _createClass(_class19, [{
            key: "streamSwitching",
            set: function set(e) {
                this.update({
                    streamSwitching: e
                })
            },
            get: function get() {
                return this._data.streamSwitching
            }
        }]);
        return _class19
    }(m));
    var ln = new (function(_m18) {
        _inheritsLoose(_class20, _m18);
        function _class20() {
            var _this68;
            _this68 = _m18.call(this) || this,
            _this68._data = {
                videoIdx: 0,
                appSessionInfo: T.getItem("hulu_player_app_session", null) || {},
                cpSessionId: Q.generateGuid()
            },
            _this68._generatedAppSessionId = "";
            return _this68
        }
        var _proto39 = _class20.prototype;
        _proto39.reset = function reset() {
            this.update({
                cpSessionId: Q.generateGuid(),
                videoIdx: 0
            })
        }
        ;
        _proto39.getAppSessionInfo = function getAppSessionInfo(e) {
            if ("site" == W.PLAYER_TYPE)
                try {
                    return (JSON.parse(z.getCookie("metrics_tracker_session_manager")) || {})[e]
                } catch (e) {}
            return this._data.appSessionInfo[e]
        }
        ;
        _createClass(_class20, [{
            key: "cpSessionId",
            set: function set(e) {
                this.update({
                    cpSessionId: e || Q.generateGuid()
                })
            },
            get: function get() {
                return this._data.cpSessionId
            }
        }, {
            key: "videoIdx",
            set: function set(e) {
                this.update({
                    videoIdx: e || 0
                })
            },
            get: function get() {
                return this._data.videoIdx
            }
        }]);
        return _class20
    }(m));
    var dn = new (function() {
        function _class21() {
            this.reset(),
            this._playbackStartSource = "browse"
        }
        var _proto40 = _class21.prototype;
        _proto40.reset = function reset() {
            this._streamUrl = "",
            this._segmentSessionId = "",
            this._cpCurrentReason = Ot
        }
        ;
        _proto40.wrapQuality = function wrapQuality(e) {
            var t = [400, 650, 1e3, 1500, 2e3, 2500, 3200, 6e3]
              , i = ["0.4M", "0.65M", "1M", "1.5M", "2M", "2.5M", "3.2M", "6M"];
            for (var _n20 = 0; _n20 < t.length; _n20++) {
                if (e <= t[_n20])
                    return i[_n20]
            }
            return "6M"
        }
        ;
        _proto40.getPlaybackSource = function getPlaybackSource(e) {
            return e && e.bundle && e.bundle.bundleType ? e.bundle.bundleType == ut.BundleTypes.RECORDED ? "psl" : e.bundle.bundleType.toLowerCase() : null
        }
        ;
        _proto40.isLive = function isLive() {
            return ((Rt.entity || {}).bundle || {}).isLiveContent || !1
        }
        ;
        _proto40.getBundleOffsetPosition = function getBundleOffsetPosition() {
            var e = (Rt.entity || {}).bundle;
            return e && e.availability && e.availability.startDate ? e.availability.startDate.getTime() : 0
        }
        ;
        _proto40.getSeekableWindowLatestPosition = function getSeekableWindowLatestPosition() {
            var e = Zn.seekableWindow;
            return e && e.end ? Math.floor(1e3 * e.end) + this.getBundleOffsetPosition() : this.getAbsoluteContentPosition()
        }
        ;
        _proto40.getMpdSeekableWindowLatestPosition = function getMpdSeekableWindowLatestPosition() {
            if (Kt.manifest && Kt.manifest.periods) {
                var _e33 = Kt.manifest.periods
                  , _t27 = _e33[_e33.length - 1];
                return _t27 ? Math.floor(1e3 * Bt.playerToApp(_t27.start + _t27.seekable[1])) + this.getBundleOffsetPosition() : 0
            }
            return this.getSeekableWindowLatestPosition()
        }
        ;
        _proto40.getAbsoluteContentPosition = function getAbsoluteContentPosition() {
            return Math.floor(1e3 * Kt.currentTime) + this.getBundleOffsetPosition()
        }
        ;
        _proto40.getLiveLatencyAmount = function getLiveLatencyAmount() {
            if (this.isLive()) {
                var _e34 = this.getSeekableWindowLatestPosition() - this.getAbsoluteContentPosition();
                return Q.isFairPlayHlsSupported() ? Math.max(_e34, 0) : _e34
            }
            return null
        }
        ;
        _proto40.getMpdLiveLatencyAmount = function getMpdLiveLatencyAmount() {
            return this.isLive() ? this.getMpdSeekableWindowLatestPosition() - this.getAbsoluteContentPosition() : null
        }
        ;
        _proto40._formatCodec = function _formatCodec(e) {
            return e ? e.split(".")[0] : ""
        }
        ;
        _createClass(_class21, [{
            key: "cpCurrentReason",
            get: function get() {
                return 0 == ln.videoIdx ? Ot : this._cpCurrentReason
            },
            set: function set(e) {
                this._cpCurrentReason = e
            }
        }, {
            key: "playbackStartSource",
            get: function get() {
                return this._playbackStartSource
            },
            set: function set(e) {
                null != e && (this._playbackStartSource = e)
            }
        }, {
            key: "playbackDeviceDisplayResolution",
            get: function get() {
                return ni.deviceWidth + "x" + ni.deviceHeight
            }
        }, {
            key: "maxAvailableVideoResolution",
            get: function get() {
                return Kt.maxVideoResolution
            }
        }, {
            key: "maxAllowedVideoResolution",
            get: function get() {
                return ni.deviceWidth < Kt.maxVideoWidth ? this.playbackDeviceDisplayResolution : this.maxAvailableVideoResolution
            }
        }, {
            key: "commonProperty",
            get: function get() {
                var e = ei.playlist || {}
                  , t = Rt.entity
                  , i = this.getPlaybackSource(t)
                  , n = "vod" == i ? "vod" : "live"
                  , r = Q.isFairPlayHlsSupported() ? "HLS" : "DASH";
                this._streamUrl = e.streamUrl || this._streamUrl;
                var s = {
                    ad_id: Mi.currentAdUnit ? Mi.currentAdUnit.id : null,
                    audio_bitrate: Kt.audioBitrate || null,
                    audio_bitrate_rounded: Kt.audioBitrate ? 5e4 * Math.round(Kt.audioBitrate / 5e4) : null,
                    audio_codec: this._formatCodec(Kt.audioCodec),
                    audio_language: Kt.audioLanguage || "und",
                    audio_role: Kt.audioKind || "main",
                    buffered_segment_duration: Math.floor(1e3 * (Kt.buffered.bufferLength || 0)),
                    build_number: W.COMPILED_VERSION,
                    captions_available: !0,
                    cdn: Zn.playbackProperty.getCdn(),
                    content_id: $.eabId,
                    content_length: Math.floor(1e3 * Zn.duration),
                    content_position: Math.floor(1e3 * Zn.currentTime),
                    continuous_play: Kt.playedVideoCount > 1,
                    cp_session_id: ln.cpSessionId,
                    cp_video_index: ln.videoIdx,
                    live_latency_amount: this.getLiveLatencyAmount(),
                    live_presentation_delay: Math.floor(1e3 * Kt.manifest.suggestedPresentationDelay) || 0,
                    max_allowed_video_resolution: this.maxAllowedVideoResolution,
                    mbr_used: !0,
                    max_available_video_resolution: this.maxAvailableVideoResolution,
                    playback_device_display_resolution: this.playbackDeviceDisplayResolution,
                    playback_mode: n,
                    playback_source: i,
                    playback_start_source: this.playbackStartSource,
                    playback_stream_id: $.sessionGuid || "",
                    player_common_properties_hit_version: "1.13.0",
                    player_core_plugin_groupid: String(Kt.mbrGroupId),
                    player_core_plugin_version: Kt.mbrVersion,
                    player_device_platform: (W.IS_NONSUB ? "Hulu Free Web" : W.APP_NAME) + " " + r,
                    player_framework_name: "Hulu Assaultron " + r,
                    player_framework_version: W.PLAYER_FRAMEWORK_VERSION,
                    player_instance_id: $.instanceId,
                    player_language: W.LANGUAGE,
                    player_version: W.PLAYER_VERSION,
                    quality: this.wrapQuality(Kt.bitrate),
                    screen_fullscreen: ni.isFullscreen,
                    segment_position: Math.floor(1e3 * Kt.currentTime) + this.getBundleOffsetPosition(),
                    segment_session_id: this._segmentSessionId,
                    smart_start: !0,
                    stormflow_id: e.stormflowId || "",
                    stream_format: Q.isFairPlayHlsSupported() ? "hls" : "dash",
                    stream_url: this._streamUrl,
                    video_bitrate: Kt.videoBitrate || null,
                    video_bitrate_rounded: Kt.videoBitrate ? 1e5 * Math.round(Kt.videoBitrate / 1e5) : null,
                    video_codec: this._formatCodec(Kt.videoCodec),
                    video_frame_rate: Math.round(Kt.videoFrameRate),
                    video_resolution: Kt.videoResolution,
                    period_type: this.periodType,
                    max_available_video_bitrate: this.maxAvailableVideoBitrate,
                    max_allowed_video_bitrate: this.maxAllowedVideoBitrate,
                    bitrate_cap: Zn.playbackProperty.getMaxBitrate()
                };
                return Q.isFairPlayHlsSupported() || (s.mpd_live_latency_amount = this.getMpdLiveLatencyAmount(),
                s.bitrate = Kt.bitrate),
                s
            }
        }, {
            key: "periodType",
            get: function get() {
                if (!Zn.adsManager.isManifestBreaksUsed()) {
                    var _e35 = Kt.mediaType;
                    return _e35 === Ft.CONTENT ? "content" : _e35 === Ft.INSERTED_AD || _e35 === Ft.BURNED_IN_AD ? "ad" : _e35 === Ft.INTRO || _e35 === Ft.POST_INTRO ? "bumper" : "unknown"
                }
                return Kt.segmentType
            }
        }, {
            key: "activeVideoTrack",
            get: function get() {
                var e = Zn.videoTracks;
                if (e) {
                    var _t28 = e[0];
                    return e[e.selectedIndex] || _t28
                }
                return null
            }
        }, {
            key: "maxAvailableVideoBitrate",
            get: function get() {
                var e = this.activeVideoTrack;
                if (!e)
                    return null;
                var t = e.representations;
                return t && 0 != t.length ? Array.prototype.reduce.call(t, function(e, t) {
                    return t.bandwidth > e ? t.bandwidth : e
                }, t[0].bandwidth) : null
            }
        }, {
            key: "maxAllowedVideoBitrate",
            get: function get() {
                var e = Zn.activeVideoTrack
                  , t = Zn.playbackProperty.getMaxBitrate();
                if (!e)
                    return null;
                var i = e.representations;
                return i && 0 != i.length ? Array.prototype.reduce.call(i, function(e, i) {
                    return i.bandwidth > e && i.bandwidth < t ? i.bandwidth : e
                }, i[0].bandwidth) : null
            }
        }]);
        return _class21
    }());
    var un = new (function(_ji3) {
        _inheritsLoose(_class22, _ji3);
        function _class22() {
            var _this69;
            _this69 = _ji3.call(this) || this,
            _this69.player = null,
            _this69.metadataTrack = null,
            _this69._cts = new G.a,
            _this69._queuedSeekPosition = -1,
            _this69.onAddTrack = _this69.onAddTrack.bind(_assertThisInitialized(_this69)),
            _this69.onAudioTracksChange = _this69.onAudioTracksChange.bind(_assertThisInitialized(_this69)),
            _this69.onVideoTracksChange = _this69.onVideoTracksChange.bind(_assertThisInitialized(_this69)),
            _this69.onVideoRepresentationsChange = _this69.onVideoRepresentationsChange.bind(_assertThisInitialized(_this69)),
            _this69.onAudioRepresentationsChange = _this69.onAudioRepresentationsChange.bind(_assertThisInitialized(_this69)),
            _this69.onSubChapterCueChange = _this69.onSubChapterCueChange.bind(_assertThisInitialized(_this69)),
            _this69.onSubChapterEnter = _this69.onSubChapterEnter.bind(_assertThisInitialized(_this69)),
            _this69.onSubChapterExit = _this69.onSubChapterExit.bind(_assertThisInitialized(_this69)),
            _this69.onUpdateAudioTrack = _this69.onUpdateAudioTrack.bind(_assertThisInitialized(_this69)),
            _this69.onBroadcast("PlayerController.start", function(e) {
                return _this69.start(e)
            }),
            _this69.onBroadcast("PlayerController.load", function() {
                return _this69.load()
            }),
            _this69.onBroadcast("PlayerController.play", function() {
                return _this69._play()
            }),
            _this69.onBroadcast("PlayerController.changeBitrate", function(e) {
                return _this69._changeBitrate(e)
            }),
            _this69.onBroadcast("PlayerController.changeAudio", function() {
                var _this70;
                return (_this70 = _this69)._changeAudio.apply(_this70, arguments)
            }),
            _this69.onBroadcast("PlayerController.pause", function() {
                return _this69._pause()
            }),
            _this69.onBroadcast("PlayerController.muted", function(e) {
                return _this69._muted(e)
            }),
            _this69.onBroadcast("PlayerController.volume", _this69._volume.bind(_assertThisInitialized(_this69))),
            _this69.onBroadcast("PlayerController.seek", function(e) {
                return _this69._seekToPosition(e)
            }),
            _this69.onBroadcast("PlayerController.forcedSeek", function(e) {
                return _this69.forcedSeek(e)
            }),
            _this69.beforeBroadcast("PlayerController.stop", function(e) {
                return _this69._beforeStop(e)
            }),
            _this69.onBroadcast("PlayerController.stop", function(e) {
                return _this69._stop(e)
            }),
            _this69.onBroadcast("PlayerController.ended", function() {
                return _this69._ended()
            }),
            _this69.onBroadcast("PlayerController.continuousplay", function(e) {
                return _this69._continuousPlay(e)
            }),
            _this69.beforeBroadcast("PlayerController.rollover", function(e) {
                return _this69._beforeRollover(e)
            }),
            _this69.onBroadcast("PlayerController.rollover", function(e) {
                return _this69._rollover(e)
            }),
            _this69.onBroadcast("PlayerController.setCaptionStyle", function(e) {
                return _this69.setCaptionStyle(e)
            }),
            _this69.onBroadcast("PlayerController.refreshCaption", function() {
                return _this69._refreshCaption()
            }),
            on.onUpdated(_this69._onStreamSwitch.bind(_assertThisInitialized(_this69)));
            return _this69
        }
        var _proto41 = _class22.prototype;
        _proto41.init = function init(e, t) {
            this.captionNode = t,
            "dash" === W.STREAM_TYPE ? (this.player = new G.h(e,G.d.DASH),
            this.player.setConfiguration({
                enabledKeySystems: W.KEY_SYSTEMS
            })) : this.player = new G.h(e),
            Kt.updateDeviceCapabilities(this.player),
            this.player.logger.enable = !W.IS_PROD || !1,
            this.broadcast(Oi.READY, this.player),
            this.player.addEventListener(Oi.LOAD_START, this.onLoadStart.bind(this)),
            this.player.addEventListener(Oi.PROGRESS, this.onProgress.bind(this)),
            this.player.addEventListener(Oi.SUSPEND, this.onSuspend.bind(this)),
            this.player.addEventListener(Oi.ABORT, this.onAbort.bind(this)),
            this.player.addEventListener(Oi.ERROR, this.onError.bind(this)),
            this.player.addEventListener(Oi.EMPTIED, this.onEmptied.bind(this)),
            this.player.addEventListener(Oi.STALLED, this.onStalled.bind(this)),
            this.player.addEventListener(Oi.LOADED_METADATA, this.onLoadedMetadata.bind(this)),
            this.player.addEventListener(Oi.LOADED_DATA, this.onLoadedData.bind(this)),
            this.player.addEventListener(Oi.CAN_PLAY, this.onCanPlay.bind(this)),
            this.player.addEventListener(Oi.CAN_PLAY_THROUGH, this.onCanPlayThrough.bind(this)),
            this.player.addEventListener(Oi.PLAYING, this.onPlaying.bind(this)),
            this.player.addEventListener(Oi.WAITING, this.onWaiting.bind(this)),
            this.player.addEventListener(Oi.SEEKING, this.onSeeking.bind(this)),
            this.player.addEventListener(Oi.SEEKED, this.onSeeked.bind(this)),
            this.player.addEventListener(Oi.ENDED, this.onEnded.bind(this)),
            this.player.addEventListener(Oi.DURATION_CHANGE, this.onDurationChange.bind(this)),
            this.player.addEventListener(Oi.TIME_UPDATE, this.onTimeUpdate.bind(this)),
            this.player.addEventListener(Oi.PLAY, this.onPlay.bind(this)),
            this.player.addEventListener(Oi.PAUSE, this.onPause.bind(this)),
            this.player.addEventListener(Oi.VOLUME_CHANGE, this.onVolumeChange.bind(this)),
            this.player.addEventListener(Oi.MANIFEST_CHANGE, this.onManifestChange.bind(this)),
            this.player.addEventListener(Oi.PERIOD_ENTER, this.onPeriodEnter.bind(this)),
            this.player.addEventListener(Oi.PERIOD_EXIT, this.onPeriodExit.bind(this)),
            this.player.addEventListener(Oi.PERIOD_RESOLVING, this.onPeriodResolving.bind(this)),
            this.player.addEventListener(Oi.PERIOD_RESOLVED, this.onPeriodResolved.bind(this)),
            this.player.addEventListener(Oi.QUALITY_CHANGE, this.onQualityChange.bind(this)),
            this.player.addEventListener(Oi.CDN_CHANGE, this.onCdnChange.bind(this)),
            this.player.addEventListener(Oi.BITRATE_CHANGE, this.onBitrateChange.bind(this)),
            this.player.addEventListener(Oi.SEEKABLE_CHANGE, this.onSeekableChange.bind(this)),
            this.player.addEventListener(Oi.CUE_POINT_START, this.onCuePointStart.bind(this)),
            this.player.addEventListener(Oi.CUE_POINT_ENDED, this.onCuePointEnded.bind(this)),
            this.player.addEventListener(Oi.REBUFFER_START, this.onRebufferStart.bind(this)),
            this.player.addEventListener(Oi.REBUFFER_END, this.onRebufferEnd.bind(this)),
            this.player.addEventListener(Oi.TIMED_METADATA, this.onTimedMetadata.bind(this)),
            this.player.addEventListener(Oi.WARNING, this.onWarning.bind(this)),
            this.player.addEventListener(Oi.LOG, this.onLog.bind(this)),
            this.player.addEventListener(Oi.QOS_FRAGMENT, this.onQosFragment.bind(this)),
            this.player.addEventListener(Oi.QOS_MANIFEST, this.onQosManifest.bind(this)),
            this.player.addEventListener(Oi.QOS_LICENSE, this.onQosLicense.bind(this)),
            this.player.addEventListener(Oi.QOS_REMOTE_PERIOD, this.onQosRemotePeriod.bind(this)),
            this.player.addEventListener(Oi.TRACKING, this.onTracking.bind(this))
        }
        ;
        _proto41.start = function start(_ref) {
            var e = _ref.reason
              , t = _ref.user;
            Kt.playedVideoCount++,
            Kt.playedVideoCount > 1 && this.broadcast(Oi.CONTINUOUS_PLAY, {
                reason: e
            }),
            this.broadcast(Oi.START, {
                user: t
            })
        }
        ;
        _proto41.load = function load() {
            this.broadcast(Oi.WILL_LOAD_START);
            var e = ei.playlist;
            this._cppConfig = Object.assign({
                player_device_platform: "Hulu Web"
            }, e.mbrManifest),
            Kt.update({
                isActive: !0,
                mediaType: Ft.CONTENT,
                adConsumed: !1
            }),
            this.player.load({
                content: e.streamUrl,
                license: {
                    widevine: {
                        license: e.dashWvServer
                    },
                    playready: {
                        license: e.dashPrServer
                    },
                    fairplay: {
                        license: e.fpServer,
                        cert: e.fpCert
                    }
                },
                intros: W.XLINK_ENABLE ? Zi.generateIntros() : null,
                collapseBreaks: Rt.entity.isVod && W.COLLAPSE_BREAKS,
                cppConfig: this._cppConfig,
                maxBufferedSecs: W.MAX_BUFFERED_SECS,
                maxBufferedKilobytes: W.MAX_BUFFERED_KILOBYTES,
                playbackRequestRetries: at.playbackRequestRetries,
                playbackRequestTimeout: at.playbackRequestTimeout
            }),
            this.player.volume = Kt.playVolume;
            var t = Kt.activeAudioTrack;
            this.player.setPreferredAudioTrack(t.language, t.kind),
            Rt.entity.isLive && (this.player.startDate = new Date(0));
            var i = !Wt.useManifestBreaks && Wt.cuePoints.length;
            0 === e.initialPosition && i ? this._startCuePoint(Wt.cuePoints[0]) : (e.initialPosition >= 0 && this._seek(e.initialPosition),
            this.player.play()),
            Q.isFairPlayHlsSupported() ? this.player.textTracks && this.player.textTracks.addEventListener("addtrack", this.onAddTrack) : (this.player.textTracks && this.player.textTracks.getTrackById(Ni.TrackId.SUB_CHAPTERS).addEventListener("cuechange", this.onSubChapterCueChange),
            this.player.videoTracks && this.player.videoTracks.addEventListener("change", this.onVideoTracksChange)),
            this.player.audioTracks && (this.player.audioTracks.addEventListener("change", this.onAudioTracksChange),
            this.player.audioTracks.addEventListener("addtrack", this.onUpdateAudioTrack),
            this.player.audioTracks.addEventListener("removetrack", this.onUpdateAudioTrack)),
            this.captionHandle = this.player.renderCaptions(this.captionNode, !/\.mpd/gi.test(this.player.currentSrc))
        }
        ;
        _proto41.onVideoTracksChange = function onVideoTracksChange() {
            var e = this.player.videoTracks[0];
            e && (Kt.update({
                maxVideoWidth: parseInt(e.maxWidth) || 0,
                maxVideoHeight: parseInt(e.maxHeight) || 0,
                videoCodec: e.codecs || ""
            }),
            this._mbrModeChange(),
            e.representations.addEventListener("change", this.onVideoRepresentationsChange))
        }
        ;
        _proto41.onUpdateAudioTrack = function onUpdateAudioTrack() {
            var e = Array.from(this.player.audioTracks || []);
            Kt.update({
                audioTracks: e
            });
            var t = e[(this.player.audioTracks || {}).selectedIndex];
            t && Kt.update({
                audioKind: t.kind,
                audioLanguage: t.language
            })
        }
        ;
        _proto41.onVideoRepresentationsChange = function onVideoRepresentationsChange() {
            if (!this.player.videoTracks[0])
                return;
            var e = this.player.videoTracks[0].representations
              , t = e[e.selectedIndex] || {};
            Kt.update({
                videoFrameRate: Q.formatFrameRate(t.frameRate),
                videoCodec: t.codecs || "",
                videoBitrate: t.bandwidth,
                videoWidth: t.width || Kt.maxVideoWidth || 0,
                videoHeight: t.height || Kt.maxVideoHeight || 0
            })
        }
        ;
        _proto41.onAudioTracksChange = function onAudioTracksChange() {
            var e = this.activeAudioTrack;
            e && (e.representations && e.representations.addEventListener("change", this.onAudioRepresentationsChange),
            Kt.update({
                audioKind: e.kind,
                audioLanguage: e.language
            }))
        }
        ;
        _proto41.onAudioRepresentationsChange = function onAudioRepresentationsChange() {
            var e = this.activeAudioTrack;
            if (e && e.representations) {
                var _t29 = e.representations
                  , _i29 = _t29[_t29.selectedIndex] || {};
                Kt.update({
                    audioCodec: _i29.codecs || "",
                    audioBitrate: _i29.bandwidth
                })
            }
        }
        ;
        _proto41.onSubChapterCueChange = function onSubChapterCueChange(e) {
            var t = e.target.cues;
            for (var _e36 = 0; _e36 < t.length; _e36++) {
                t[_e36].addEventListener("enter", this.onSubChapterEnter),
                t[_e36].addEventListener("exit", this.onSubChapterExit)
            }
        }
        ;
        _proto41.onSubChapterEnter = function onSubChapterEnter(e) {
            if (Kt.mediaType === Ft.INSERTED_AD && Wt.isAdPeriod(e.target)) {
                var _e37 = this.player.textTracks.getTrackById(Ni.TrackId.SUB_CHAPTERS).cues;
                this.broadcast("AdController.adStart", _e37)
            }
            this.broadcast(Oi.PERIOD_ENTER)
        }
        ;
        _proto41.onSubChapterExit = function onSubChapterExit(e) {
            this.broadcast(Oi.PERIOD_EXIT),
            Kt.mediaType === Ft.INSERTED_AD && Wt.isAdPeriod(e.target) && this.broadcast("AdController.adStopped")
        }
        ;
        _proto41.onLoadStart = function onLoadStart(e) {
            this.broadcast(Oi.LOAD_START, e)
        }
        ;
        _proto41.onProgress = function onProgress(e) {
            this.broadcast(Oi.PROGRESS, e)
        }
        ;
        _proto41.onSuspend = function onSuspend(e) {
            this.broadcast(Oi.SUSPEND, e)
        }
        ;
        _proto41.onAbort = function onAbort(e) {
            this.broadcast(Oi.ABORT, e)
        }
        ;
        _proto41.onError = function onError() {
            var e = this.player.error.params;
            if (e.type === G.g.MPD_EXPIRED && Rt.entity.isLive) {
                se.reportToPlayerIndex(Ni.TrackingEvent.MPD_REFRESH_FAILURE, e);
                var _t30 = new ze(re[G.g.MPD_EXPIRED]);
                return _t30.rawError = e,
                se.reportToEMUIndex(_t30),
                Rt.nextEntity = Rt.entity,
                void this._continuousPlay({
                    reason: Dt
                })
            }
            var t = [G.g.MEDIA_SRC_NOT_SUPPORTED_ERROR, G.g.MEDIA_ENCRYPTED_ERROR, G.g.MEDIA_DECODE_ERROR].includes(e.type);
            if (Kt.videoCodec.includes("hev1") && t && Rt.entity.isVod)
                return void this._handleHEVCDecodeError();
            var i = "";
            i = e.type === G.g.MPD_LOAD_FAILURE ? 200 === e.httpStatus ? "hulu:client:playback:manifest:error:timeout" : "hulu:client:playback:manifest:error" : e.type === G.g.MEDIA_TIMEOUT_ERROR ? 1 === e.timeoutState ? "hulu:client:playback:runtime:error:rebuffering" : "hulu:client:playback:runtime:error" : re[e.type],
            this._handleError(i, e)
        }
        ;
        _proto41._handleError = function _handleError(e, t) {
            var i = new ze(e);
            i.rawError = t,
            i.stackTrace = t.errorStack || "",
            this.broadcast(Oi.ERROR, {
                detail: {
                    error: i
                }
            })
        }
        ;
        _proto41.onEmptied = function onEmptied(e) {
            this.broadcast(Oi.EMPTIED, e)
        }
        ;
        _proto41.onStalled = function onStalled(e) {
            this.broadcast(Oi.STALLED, e)
        }
        ;
        _proto41.onLoadedMetadata = function onLoadedMetadata(e) {
            Kt.update({
                mbrGroupId: this._cppConfig.group_id,
                mbrVersion: this._cppConfig.version
            }),
            this.broadcast(Oi.LOADED_METADATA, e)
        }
        ;
        _proto41.onLoadedData = function onLoadedData(e) {
            this.broadcast(Oi.LOADED_DATA, e)
        }
        ;
        _proto41.onCanPlay = function onCanPlay(e) {
            this.broadcast(Oi.CAN_PLAY, e)
        }
        ;
        _proto41.onCanPlayThrough = function onCanPlayThrough(e) {
            this.broadcast(Oi.CAN_PLAY_THROUGH, e)
        }
        ;
        _proto41.onPlaying = function onPlaying(e) {
            Kt.paused = !1,
            this.broadcast(Oi.PLAYING, e)
        }
        ;
        _proto41.onWaiting = function onWaiting(e) {
            this.broadcast(Oi.WAITING, e)
        }
        ;
        _proto41.onSeeking = function onSeeking(e) {
            this.broadcast(Oi.SEEKING, e)
        }
        ;
        _proto41.onSeeked = function onSeeked(e) {
            Vi.isSeeking = !1,
            this.broadcast(Oi.SEEKED, e)
        }
        ;
        _proto41.onEnded = function onEnded(e) {
            this._trackUserWatchPosition(),
            !W.XLINK_ENABLE && Zi.hasNextIntroUnit(Ft.POST_INTRO) ? this.broadcast("IntroController.startPostIntro") : this.broadcast(Oi.ENDED, e),
            zt.clearForSession()
        }
        ;
        _proto41.onDurationChange = function onDurationChange(e) {
            !Rt.entity || Rt.entity.isLive || /Infinity/i.test(this.player.duration) || (Kt.duration = this.player.duration),
            this.broadcast(Oi.DURATION_CHANGE, e)
        }
        ;
        _proto41.onTimeUpdate = function onTimeUpdate(e) {
            var t = Kt.currentTime
              , i = Bt.playerToApp(this.player.currentTime);
            Kt.updateProgress(i),
            Kt.update({
                buffered: this.player.buffered,
                positionInPeriod: e.target.getPositionInPeriod && e.target.getPositionInPeriod()
            });
            var n = 30;
            at.progressReportInterval && at.progressReportInterval > 0 && (n = at.progressReportInterval / 1e3),
            Kt.totalPlayedTime - Kt.lastRecoredPlayedDuration > n && this._trackUserWatchPosition(),
            this._tryPlayCuePoint(t, i),
            this.broadcast(Oi.TIME_UPDATE, e)
        }
        ;
        _proto41.onPlay = function onPlay(e) {
            Kt.paused = !1,
            this.broadcast(Oi.PLAY, e)
        }
        ;
        _proto41.onPause = function onPause(e) {
            Kt.paused = !0,
            Kt.mediaType !== Ft.INSERTED_AD ? this._trackUserWatchPosition() : Vi.isSeeking || null == Kt.currentCuePoint.time || this._trackUserWatchPosition(Kt.currentCuePoint.time),
            this.broadcast(Oi.PAUSE, e)
        }
        ;
        _proto41.onVolumeChange = function onVolumeChange(e) {
            this.broadcast(Oi.VOLUME_CHANGE, e)
        }
        ;
        _proto41.onManifestChange = function onManifestChange(e) {
            G.c.log("PlayerController: onManifestChange", e.detail);
            var t = null;
            Q.isFairPlayHlsSupported() || (t = this.player.textTracks.getTrackById(Ni.TrackId.CHAPTERS).cues),
            Wt.updatePeriods(this.player.manifest),
            Kt.update({
                chapters: t || [],
                manifest: this.player.manifest || {}
            }),
            this.broadcast(Oi.MANIFEST_CHANGE, e)
        }
        ;
        _proto41.onPeriodEnter = function onPeriodEnter(e) {
            G.c.log("PlayerController: onPeriodEnter", e.detail);
            var t = Kt.manifest && Kt.manifest.periods || []
              , i = e.detail.cue && e.detail.cue.id
              , n = t.find(function(e) {
                return e.id === i
            });
            Kt.segmentType = n && n.segmentType && n.segmentType.value,
            Zi.isIntroPeriod(e.detail.cue) ? (Kt.mediaType == Ft.CONTENT && this._trackUserWatchPosition(),
            Kt.mediaType = i.indexOf("preroll") > 0 ? Ft.INTRO : Ft.POST_INTRO) : Wt.isAdPeriod(e.detail.cue) ? (Kt.mediaType == Ft.CONTENT && this._trackUserWatchPosition(),
            Wt.useManifestBreaks ? Kt.mediaType = Ft.BURNED_IN_AD : (Kt.mediaType = Ft.INSERTED_AD,
            this.broadcast("AdController.startPod", e.detail.cue.startTime))) : (W.XLINK_ENABLE && (Kt.mediaType = Ft.CONTENT),
            -1 !== this._queuedSeekPosition && (this._seek(this._queuedSeekPosition),
            this._queuedSeekPosition = -1)),
            this.broadcast(Oi.PERIOD_ENTER, e)
        }
        ;
        _proto41.onPeriodExit = function onPeriodExit(e) {
            G.c.log("PlayerController: onPeriodExit", e.detail),
            Wt.isAdPeriod(e.detail.cue) && (this.broadcast("AdController.endPod"),
            Kt.mediaType = Ft.CONTENT),
            this.broadcast(Oi.PERIOD_EXIT, e)
        }
        ;
        _proto41.onPeriodResolving = function onPeriodResolving(e) {
            this.broadcast(Oi.PERIOD_RESOLVING, e)
        }
        ;
        _proto41.onPeriodResolved = function onPeriodResolved(e) {
            this.broadcast(Oi.PERIOD_RESOLVED, e)
        }
        ;
        _proto41.onCuePointStart = function onCuePointStart(e) {
            G.c.log("PlayerController: onCuePointStart", this.player.currentCuePoint, e),
            Kt.currentCuePoint = this.player.currentCuePoint,
            Kt.currentCuePoint.data.type === Ft.INSERTED_AD && (Kt.mediaType = Ft.INSERTED_AD,
            this.player.pause(),
            this.broadcast("AdController.startPod")),
            this.broadcast(Oi.CUE_POINT_START, e)
        }
        ;
        _proto41.onCuePointEnded = function onCuePointEnded(e) {
            G.c.log("PlayerController: onCuePointEnded", this.player.currentCuePoint, e),
            this._trackUserWatchPosition(),
            this.broadcast(Oi.CUE_POINT_ENDED, e)
        }
        ;
        _proto41.onRebufferStart = function onRebufferStart(e) {
            this.broadcast(Oi.REBUFFER_START, e)
        }
        ;
        _proto41.onRebufferEnd = function onRebufferEnd(e) {
            this.broadcast(Oi.REBUFFER_END, e)
        }
        ;
        _proto41.onQualityChange = function onQualityChange(e) {
            Kt.update({
                bitrate: e.detail.cue.profile
            }),
            this.broadcast(Oi.QUALITY_CHANGE, e)
        }
        ;
        _proto41.onCdnChange = function onCdnChange(e) {
            Kt.update({
                cdn: e.detail.current
            }),
            this.broadcast(Oi.CDN_CHANGE, e)
        }
        ;
        _proto41.onBitrateChange = function onBitrateChange(e) {
            this.broadcast(Oi.BITRATE_CHANGE, e)
        }
        ;
        _proto41.onSeekableChange = function onSeekableChange(e) {
            Kt.seekableWindow = this.player.seekable,
            Kt.isLive && (Wt.updateIncompleteBreak(this.player.manifest),
            Kt.paused && Kt.currentTime + 1 < Kt.seekableWindow.start && this.player.play()),
            this.broadcast(Oi.SEEKABLE_CHANGE, e)
        }
        ;
        _proto41.onTimedMetadata = function onTimedMetadata(e) {
            this.broadcast(Oi.TIMED_METADATA, e)
        }
        ;
        _proto41.onWarning = function onWarning(e) {
            this._handleError("hulu:client:playback:player:warning", e.detail),
            this.broadcast(Oi.WARNING, e)
        }
        ;
        _proto41.onLog = function onLog(e) {
            this.broadcast(Oi.LOG, e)
        }
        ;
        _proto41.onQosFragment = function onQosFragment(e) {
            e.detail.successful || this._handleError("hulu:client:playback:qos:fragment:error", e.detail),
            this.broadcast(Oi.QOS_FRAGMENT, e)
        }
        ;
        _proto41.onQosManifest = function onQosManifest(e) {
            this.broadcast(Oi.QOS_MANIFEST, e)
        }
        ;
        _proto41.onQosLicense = function onQosLicense(e) {
            this.broadcast(Oi.QOS_LICENSE, e)
        }
        ;
        _proto41.onQosRemotePeriod = function onQosRemotePeriod(e) {
            this.broadcast(Oi.QOS_REMOTE_PERIOD, e)
        }
        ;
        _proto41.onTracking = function onTracking(e) {
            e.detail.event == Ni.TrackingEvent.SEGMENT_DOWNLOAD_FAILURE ? se.reportToPlayerIndex(ne.Type.SEGMENT_DOWNLOAD_FAILURE, e.detail.data) : e.detail.event == Ni.TrackingEvent.MPD_MISSING_SEGMENT ? se.reportToPlayerIndex(ne.Type.MPD_MISSING_SEGMENT, e.detail.data) : e.detail.event == Ni.TrackingEvent.MPD_REFRESH_FAILURE ? se.reportToPlayerIndex(ne.Type.MPD_REFRESH_FAILURE, e.detail.data) : e.detail.event == Ni.TrackingEvent.SEGMENT_SKIP ? se.reportToPlayerIndex(ne.Type.SEGMENT_SKIP, e.detail.data) : e.detail.event == Ni.TrackingEvent.SEGMENT_SKIP_PLAYBACK && se.reportToPlayerIndex(ne.Type.SEGMENT_SKIP_PLAYBACK, e.detail.data)
        }
        ;
        _proto41.onAddTrack = function onAddTrack(e) {
            e.track && "metadata" == e.track.kind && (this.metadataTrack = e.track,
            this.metadataTrack.mode = "hidden",
            this.metadataTrack.addEventListener("cuechange", this.onMetadataCueChange.bind(this)))
        }
        ;
        _proto41.onMetadataCueChange = function onMetadataCueChange() {
            if (this.metadataTrack && this.metadataTrack.activeCues.length > 0) {
                var _e38 = this.metadataTrack.activeCues;
                this.broadcast(Oi.METADATA_CUE_CHANGE, _e38)
            }
        }
        ;
        _proto41.setCaptionStyle = function setCaptionStyle(e) {
            this.captionHandle && (this.captionHandle.style = e)
        }
        ;
        _proto41._refreshCaption = function _refreshCaption() {
            this.captionHandle && this.captionHandle.refresh()
        }
        ;
        _proto41._play = function _play() {
            var e = Kt.mediaType;
            if (W.XLINK_ENABLE)
                this.player.play();
            else if (e == Ft.INSERTED_AD)
                this.broadcast("AdController.play");
            else if (e == Ft.INTRO || e == Ft.POST_INTRO)
                this.broadcast("IntroController.play");
            else
                try {
                    Kt.lastMediaType !== Ft.CONTENT && this._trackUserWatchPosition(),
                    this.player.play()
                } catch (e) {}
        }
        ;
        _proto41._pause = function _pause() {
            var e = Kt.mediaType;
            W.XLINK_ENABLE ? this.player.pause() : e == Ft.INSERTED_AD ? this.broadcast("AdController.pause") : e == Ft.INTRO || e == Ft.POST_INTRO ? this.broadcast("IntroController.pause") : this.player.pause()
        }
        ;
        _proto41._seek = function _seek(e) {
            Vi.isSeeking = !0,
            this.player.seek(Bt.appToPlayer(e));
            var t = Kt.currentTime;
            Kt.currentTime = e,
            Kt.mediaType !== Ft.CONTENT ? this._trackUserWatchPosition(t) : Math.abs(e - t) > 10 && this._trackUserWatchPosition(e)
        }
        ;
        _proto41._seekToPosition = function _seekToPosition(e) {
            var _Vi$getSeekableTarget = Vi.getSeekableTarget(e)
              , t = _Vi$getSeekableTarget.reason
              , i = _Vi$getSeekableTarget.insertedAdBreak
              , n = _Vi$getSeekableTarget.burnedInAdBreak
              , r = _Vi$getSeekableTarget.contentPosition
              , s = _Vi$getSeekableTarget.isAdSkipped;
            this.broadcastBefore(Oi.SEEKING, {
                insertedAdBreak: i,
                burnedInAdBreak: n,
                contentPosition: r,
                isAdSkipped: s,
                failedReason: t
            }),
            t || (null == i ? (this._seek(r),
            n && e > n.end && (this._queuedSeekPosition = e)) : (Kt.mediaType = Ft.INSERTED_AD,
            Kt.currentCuePoint = i,
            this.player.pause(),
            this.broadcast("AdController.startPod"),
            this._seek(r)))
        }
        ;
        _proto41.forcedSeek = function forcedSeek(e) {
            this.broadcastBefore(Oi.SEEKING),
            Kt.isLive && "live" === e && (this._queuedSeekPosition = -1,
            this._seek(Kt.liveEdge))
        }
        ;
        _proto41._tryPlayCuePoint = function _tryPlayCuePoint(e, t) {
            if (Vi.isSeeking)
                return;
            if (Wt.useManifestBreaks || !Wt.cuePoints.length)
                return;
            if (t - e < Ut.EPSILON)
                return;
            if (t - e > Ut.SEEK_EPSILON)
                return;
            var i = Wt.findLastCrossedBreak(e, t);
            null != i && i.index > 1 && this._startCuePoint(Wt.cuePoints[i.index]);
            var n = Wt.findLastCrossedBreak(e + 10, t + 10);
            null != n && n.index > 1 && (Kt.nextCuePoint = Wt.cuePoints[n.index],
            this.broadcast("AdController.initPod"))
        }
        ;
        _proto41._startCuePoint = function _startCuePoint(e) {
            Kt.currentCuePoint = e,
            Kt.mediaType = Ft.INSERTED_AD,
            this.player.pause(),
            this.broadcast("AdController.startPod")
        }
        ;
        _proto41._trackUserWatchPosition = function _trackUserWatchPosition(e) {
            W.IS_NONSUB || (nn.trackAssetViewProgress(e || Kt.currentTime),
            Kt.lastRecoredPlayedDuration = Kt.totalPlayedTime)
        }
        ;
        _proto41._muted = function _muted(e) {
            0 != Kt.volume || e || (Kt.volume = .5),
            Kt.muted = e,
            this._updateVolume()
        }
        ;
        _proto41._volume = function _volume(e) {
            Kt.muted && e > 0 && (Kt.muted = !1),
            Kt.volume = e,
            this._updateVolume()
        }
        ;
        _proto41._updateVolume = function _updateVolume() {
            var e = Kt.playVolume;
            this.player.volume = e,
            this.broadcast("VPAIDController.volume", e)
        }
        ;
        _proto41._beforeStop = function _beforeStop(e) {
            Kt.currentTime > 0 && Vi.isAllowed && this._trackUserWatchPosition(),
            this.broadcastBefore(Oi.STOP, e)
        }
        ;
        _proto41._stop = function _stop(e) {
            Kt.isActive = !1,
            this.player.stop(),
            this.broadcast(Oi.STOP, e),
            this._cts.cancel(),
            this._cts = new G.a,
            this._queuedSeekPosition = -1
        }
        ;
        _proto41._ended = function _ended() {
            this.broadcast(Oi.ENDED)
        }
        ;
        _proto41._continuousPlay = function _continuousPlay(e) {
            this.broadcastBefore(Oi.CONTINUOUS_PLAY, e),
            Kt.mediaType = Ft.CONTENT,
            e.entity = Rt.nextEntity,
            e.channelId = Rt.nextEntity.bundle.channelId,
            this.broadcast("LogicPlayerController.load", Rt.nextEntity.bundle.eabId, e)
        }
        ;
        _proto41._beforeRollover = function _beforeRollover(_ref2) {
            var e = _ref2.action;
            this.broadcastBefore(Oi.ROLLOVER, {
                action: e
            })
        }
        ;
        _proto41._rollover = function _rollover(_ref3) {
            var e = _ref3.action;
            var t = e === Ut.RolloverActions.SIMPLE;
            if (this.player.startDate = new Date(0),
            t)
                Kt.update({
                    playbackJoinPos: 0
                });
            else {
                var _e39 = Bt.playerToApp(this.player.seekable.end(0));
                Kt.update({
                    playbackJoinPos: _e39
                }),
                this._seek(_e39)
            }
            Kt.playedVideoCount++,
            Kt.seekableWindow = this.player.seekable,
            this.broadcast(Oi.ROLLOVER, {
                action: e
            })
        }
        ;
        _proto41._changeBitrate = function _changeBitrate(e) {
            this.player.setMaxBitrate(e),
            Kt.maxBitrate = e
        }
        ;
        _proto41._changeAudio = function _changeAudio(e, t) {
            Kt.update({
                audioKind: t,
                audioLanguage: e
            }),
            this.player.setPreferredAudioTrack(e, t)
        }
        ;
        _proto41._onStreamSwitch = function _onStreamSwitch(e, t, i) {
            !i.isReset && i.streamSwitching && e.streamSwitching && this._continuousPlay({
                playbackJoinPos: Kt.get().playbackJoinPos,
                startPosition: Kt.currentTime,
                reason: "automatic_stream_switch"
            })
        }
        ;
        _proto41._mbrModeChange = function _mbrModeChange() {
            var e = dn.commonProperty.max_allowed_video_resolution;
            e !== this._prevResolution && (this._prevResolution = e),
            this.broadcast(Oi.MBR_MODE_CHANGE, e)
        }
        ;
        _proto41._handleHEVCDecodeError = function _handleHEVCDecodeError() {
            var _this71 = this;
            Kt.accumulateHEVCError();
            var e = this._cts.token;
            ei.loadPlaylist(!0, e).then(function() {
                return _this71.load()
            }, function(t) {
                if (e.isCancellationRequested)
                    return At;
                _this71.broadcast(Oi.ERROR, {
                    detail: {
                        error: t
                    }
                })
            })
        }
        ;
        _createClass(_class22, [{
            key: "activeAudioTrack",
            get: function get() {
                var e = this.player.audioTracks;
                if (e) {
                    var _t31 = e[0];
                    return e[e.selectedIndex] || _t31
                }
                return null
            }
        }]);
        return _class22
    }(ji));
    var cn = function(_G$f) {
        _inheritsLoose(cn, _G$f);
        function cn() {
            return _G$f.call(this) || this
        }
        var _proto42 = cn.prototype;
        _proto42.dispatchEvent = function dispatchEvent(e, t) {
            var i, n = e;
            if ("object" == typeof e && e.type)
                n = e.type,
                i = e;
            else {
                var _e40 = t && t.target || this;
                i = new window.CustomEvent(n,t),
                Object.defineProperties(i, {
                    target: {
                        configurable: !0,
                        enumerable: !0,
                        get: function get() {
                            return _e40
                        }
                    },
                    currentTarget: {
                        configurable: !0,
                        enumerable: !0,
                        get: function get() {
                            return _e40
                        }
                    }
                })
            }
            this.trigger(n, i)
        }
        ;
        _proto42.addEventListener = function addEventListener(e, t) {
            this.on(e, t)
        }
        ;
        _proto42.removeEventListener = function removeEventListener(e, t) {
            this.off(e, t)
        }
        ;
        _proto42.wrapEvent = function wrapEvent(e) {
            return {
                detail: e
            }
        }
        ;
        return cn
    }(G.f);
    var hn = new cn;
    var pn = function(_m19) {
        _inheritsLoose(pn, _m19);
        function pn() {
            var _this72;
            _this72 = _m19.call(this) || this,
            _this72._data = {
                isReady: !1,
                isPaused: !1
            };
            return _this72
        }
        var _proto43 = pn.prototype;
        _proto43.reset = function reset() {
            this.set({
                isReady: !1,
                isPaused: !1
            })
        }
        ;
        _createClass(pn, [{
            key: "isAdPlayerActive",
            get: function get() {
                if (W.XLINK_ENABLE)
                    return !1;
                return Kt.mediaType == Ft.INSERTED_AD
            }
        }, {
            key: "isIntroPlayerActive",
            get: function get() {
                if (W.XLINK_ENABLE)
                    return !1;
                var e = Kt.mediaType;
                return e == Ft.INTRO || e == Ft.POST_INTRO
            }
        }, {
            key: "isMainPlayerActive",
            get: function get() {
                if (W.XLINK_ENABLE)
                    return !0;
                var e = Kt.mediaType;
                return e == Ft.CONTENT || e == Ft.BURNED_IN_AD
            }
        }]);
        return pn
    }(m);
    pn.defineProxyProperties({
        isReady: !0,
        isPaused: !0
    });
    var _n = new pn;
    var fn = function() {
        function fn(e, t, i) {
            this._captions = e,
            this._parsedCaptions = [],
            this._key = t,
            this._iv = i
        }
        var _proto44 = fn.prototype;
        _proto44.getCaptionByTime = function getCaptionByTime(e) {
            if (0 === this._captions.length)
                return null;
            var t = this._findCaptionIndexByTime(e);
            if (t < 0)
                return null;
            var i = this._parsedCaptions[t];
            if (void 0 !== i)
                return i;
            var n = this._captions[t];
            return n.encrypted && (n.htmlText = this._decryptCaptionText(n.htmlText),
            n.htmlText = n.htmlText.replace(/(<br\/><\/p>$)/gi, "</P>").split("\n").join("").split("<BR/>").join("<br/>").split("&amp;").join("&").split("&quot;").join("\"").split("&apos;").join("'").replace("\xA0", " ").replace("&#160;", " ").replace(/<P><\/P>/gi, ""),
            n.encrypted = !1),
            this._parsedCaptions[t] = n.htmlText
        }
        ;
        _proto44._findCaptionIndexByTime = function _findCaptionIndexByTime(e) {
            var t = 0
              , i = this._captions.length - 1;
            for (; t <= i; ) {
                var _n21 = Math.floor((t + i) / 2);
                if (e >= this._captions[_n21].startTime) {
                    if (_n21 == this._captions.length - 1 || e < this._captions[_n21 + 1].startTime)
                        return _n21;
                    t = _n21 + 1
                } else {
                    if (0 !== _n21 && e >= this._captions[_n21 - 1].startTime)
                        return _n21 - 1;
                    i = _n21 - 1
                }
            }
            return -1
        }
        ;
        _proto44._decryptCaptionText = function _decryptCaptionText(e) {
            var t = oe.util.hexToBytes(e)
              , i = oe.charenc.UTF8.stringToBytes(this._iv).concat(t)
              , n = oe.util.hexToBytes(this._key)
              , r = Pe.decrypt(i, n, {
                mode: oe.mode.CBC7,
                usePkcs7: !0
            });
            return oe.charenc.UTF8.bytesToString(r)
        }
        ;
        fn.parse = function parse(e, t, i) {
            try {
                var _n22 = ft()(e).children(0);
                if ("sami" != _n22[0].nodeName.toLowerCase())
                    return;
                var _r11 = null;
                if (_n22.children().each(function() {
                    "body" == this.nodeName.toLowerCase() && (_r11 = ft()(this))
                }),
                null === _r11)
                    return;
                var _s6 = [];
                return _r11.children().each(function() {
                    if ("sync" == this.nodeName.toLowerCase()) {
                        var _e41 = "true" == ft()(this).attr("Encrypted") || !1
                          , _t32 = ft()(this).attr("start") || ft()(this).attr("START") || ft()(this).attr("Start");
                        _s6.push({
                            startTime: _t32,
                            encrypted: _e41,
                            htmlText: this.childNodes[0].nodeValue
                        })
                    }
                }),
                new fn(_s6,t,i)
            } catch (e) {}
        }
        ;
        return fn
    }();
    var gn = function(_m20) {
        _inheritsLoose(gn, _m20);
        function gn() {
            var _this73;
            _this73 = _m20.call(this) || this,
            _this73.reset();
            return _this73
        }
        var _proto45 = gn.prototype;
        _proto45.reset = function reset() {
            this._data = {
                allLanguages: [],
                transcriptsDefaultOn: !1,
                outbandSmils: {},
                outbandSmilPromises: {},
                outbandSmilUrls: {}
            }
        }
        ;
        _proto45.updateOutband = function updateOutband(e) {
            var t = {
                captionType: "outband",
                iv: e.transcripts_encryption_iv,
                key: e.transcripts_encryption_key,
                transcriptsDefaultOn: e.transcripts_default_on
            };
            if (e.transcripts_urls && e.transcripts_urls.smi) {
                var _i30 = e.transcripts_urls.smi;
                t.allLanguages = Object.keys(_i30),
                t.outbandSmilUrls = _objectSpread({}, _i30)
            }
            this.update(t)
        }
        ;
        _proto45.updateInband = function updateInband() {
            this.update({
                captionType: "inband",
                allLanguages: ["en"]
            })
        }
        ;
        _proto45._fetchOutBandCaption = function _fetchOutBandCaption(e) {
            var _this74 = this;
            this._data.outbandSmilPromises[e] = this._data.outbandSmilPromises[e] || Object(G.i)(this.outbandSmilUrls[e]).then(function(e) {
                return e.assertOK().text()
            }).then(function(t) {
                var i;
                _this74._data.outbandSmils[e] = fn.parse((i = t,
                new DOMParser().parseFromString(i, "application/xml")), _this74._data.key, _this74._data.iv)
            })
        }
        ;
        _proto45.getCaption = function getCaption(e, t) {
            if ("outband" !== this.captionType || !this.allLanguages.includes(t))
                return "";
            var i = this._data.outbandSmils[t];
            return i ? i.getCaptionByTime(1e3 * e) || "" : (this._fetchOutBandCaption(t),
            "")
        }
        ;
        return gn
    }(m);
    gn.defineProxyProperties({
        allLanguages: !1,
        captionType: !1,
        outbandSmilUrls: !1
    });
    var mn = new gn;
    var yn = {
        LongTimeTipsCloseReason: {
            CONTINUE: "continue",
            STOP: "stop",
            TIMEOUT: "timeout"
        },
        PlaybackEndedReason: {
            EXIT: "user_ended",
            INACTIVE: "user_inactivity",
            ERROR: "error",
            ENDED: "content_ended"
        }
    };
    var vn = {
        src: "",
        currentSrc: "",
        initialTime: 0,
        paused: !0,
        seeking: !1,
        ended: !1,
        currentTime: 0,
        duration: NaN,
        buffered: {},
        networkState: 0,
        error: null
    };
    var En = new (function(_ji4) {
        _inheritsLoose(_class23, _ji4);
        function _class23() {
            var _this75;
            _this75 = _ji4.call(this) || this,
            _this75._isCPSessionStarted = !1,
            _this75._isVideoStopped = !0,
            _this75._cts = new G.a;
            return _this75
        }
        var _proto46 = _class23.prototype;
        _proto46.init = function init() {
            this.onBroadcast("LogicPlayerController.load", this.load.bind(this)),
            qe.onUpdated(this.onError.bind(this))
        }
        ;
        _proto46.load = function load(e, t) {
            var _this76 = this;
            if (this.stopVideo(),
            !e) {
                var _e42 = new ze("hulu:client:playback:metadata:entity:error:invalid:eab_unavailable");
                return qe.error = _e42,
                Promise.reject(_e42)
            }
            this._cts = new G.a,
            this._startCpSession(),
            this._processStartVideoParams(t),
            $.update(Object.assign({
                eabId: e,
                sessionGuid: Q.generateGuid()
            }, t)),
            pt.parseUserData(t),
            Kt.checkHEVCRecordExpired(),
            ei.playIntent = t.play_intent,
            dn.playbackStartSource = t.source,
            this.broadcast("PlayerController.start", {
                reason: t.reason
            }),
            this._isVideoStopped = !1;
            var i = {
                eabIdChanged: !1
            }
              , n = this._cts.token;
            return Promise.all([Rt.loadEntity(n), ei.loadPlaylist(!1, n)]).then(function() {
                if (n.isCancellationRequested)
                    return At;
                zt.startPing();
                var r = ei.playlist.contentEabId;
                if (r && r !== e)
                    return i.eabIdChanged = !0,
                    _this76.load(r, t).then(function() {
                        return i
                    });
                var s = Rt.entity.bundle;
                return Kt.update({
                    currentTime: 0,
                    duration: s.duration,
                    isLive: Rt.entity.isLive,
                    isVod: Rt.entity.isVod,
                    playbackJoinPos: t && t.playbackJoinPos >= 0 ? t.playbackJoinPos : -1,
                    recordingOffset: ei.playlist.recordingOffset,
                    startPosition: t && t.startPosition >= 0 ? t.startPosition : -1,
                    audioTracks: ei.playlist.audioTracks
                }),
                Bt.update({
                    startTime: Rt.entity.isVod ? 0 : s.availability.airingStartDate.getTime() / 1e3
                }),
                s.isLiveContent || s.isRecordedContent || s.isLookbackContent ? mn.updateInband() : mn.updateOutband(ei.playlist.get()),
                Wt.updateFromDeejay(ei.playlist.get()),
                W.IS_NONSUB || nn.trackAssetViewStart(),
                Zi.updateFromDeejay(ei.playlist.get()),
                0 === ei.playlist.initialPosition && Zi.hasNextIntroUnit(Ft.INTRO) ? _this76.broadcast("IntroController.startIntro") : (_this76.broadcast("PlayerController.load"),
                Rt.entity.isLive && on.startPoll()),
                Promise.resolve(i)
            }, function(e) {
                return n.isCancellationRequested ? At : (qe.error = e,
                _this76._isVideoStopped = !0,
                Promise.reject(e))
            })
        }
        ;
        _proto46.stopVideo = function stopVideo(e) {
            if (e === void 0) {
                e = {}
            }
            this.isVideoStopped || (this.broadcastBefore("PlayerController.stop"),
            qe.reset(),
            Kt.reset(),
            Rt.reset(),
            _n.reset(),
            rn.reset(),
            mn.reset(),
            zt.clearForSession(),
            on.stopPoll(),
            this._cts.cancel(),
            this.broadcast("AdController.stopSession"),
            this.broadcast("PlayerController.stop"),
            this.broadcast("IntroController.stop"),
            this.broadcast("ContinuousPlayController.reset"),
            this._endCpSession(e.reason),
            this._isVideoStopped = !0)
        }
        ;
        _proto46.onError = function onError(_ref4) {
            var e = _ref4.error;
            e && (hn.dispatchEvent(xi.ERROR, hn.wrapEvent(e)),
            e.isFatal && (this.broadcastBefore("PlayerController.stop", !0),
            rn.reset(),
            mn.reset(),
            zt.clearForSession(),
            on.stopPoll(),
            this._cts.cancel(),
            this.broadcast("AdController.stopSession"),
            this.broadcast("PlayerController.stop", !0),
            this.broadcast("IntroController.stop"),
            this.broadcast("ContinuousPlayController.reset"),
            this._endCpSession(yn.PlaybackEndedReason.ERROR)))
        }
        ;
        _proto46.play = function play() {
            this.broadcast("PlayerController.play")
        }
        ;
        _proto46.pause = function pause() {
            this.broadcast("PlayerController.pause")
        }
        ;
        _proto46.seek = function seek(e) {
            this.broadcast("PlayerController.seek", e)
        }
        ;
        _proto46.forcedSeek = function forcedSeek(e) {
            this.broadcast("PlayerController.forcedSeek", e)
        }
        ;
        _proto46.continuousPlay = function continuousPlay(_ref5) {
            var e = _ref5.reason
              , t = _ref5.entity;
            this.broadcast("ContinuousPlayController.playNext", {
                reason: e,
                entity: t
            })
        }
        ;
        _proto46.stopVPAID = function stopVPAID() {
            this.broadcast("AdController.stop")
        }
        ;
        _proto46.pauseVPAID = function pauseVPAID() {
            this.broadcast("AdController.pause")
        }
        ;
        _proto46.clickThroughVPAID = function clickThroughVPAID(e) {
            this.broadcast(Yi.AdClickThru, {
                src: e
            })
        }
        ;
        _proto46.switchAudioTrack = function switchAudioTrack(e) {
            var t = e.language
              , i = e.kind;
            this.broadcast("PlayerController.changeAudio", t, i)
        }
        ;
        _proto46.setMaxBitrate = function setMaxBitrate(e) {
            this.broadcast("PlayerController.changeBitrate", e)
        }
        ;
        _proto46.setCaptionStyle = function setCaptionStyle(e) {
            this.broadcast("PlayerController.setCaptionStyle", e)
        }
        ;
        _proto46.setPlayerResolution = function setPlayerResolution(e) {
            ni.update(_objectSpread({}, e)),
            this.broadcast("VPAIDController.resizeAd")
        }
        ;
        _proto46.refreshCaption = function refreshCaption() {
            this.broadcast("PlayerController.refreshCaption")
        }
        ;
        _proto46._startCpSession = function _startCpSession() {
            this._isCPSessionStarted || (this._isCPSessionStarted = !0,
            Kt.playedVideoCount = 0,
            hn.dispatchEvent(xi.CONTINUOUS_SESSION_START))
        }
        ;
        _proto46._endCpSession = function _endCpSession(e) {
            this._isCPSessionStarted && e && (this._isCPSessionStarted = !1,
            hn.dispatchEvent(xi.CONTINUOUS_SESSION_END, hn.wrapEvent({
                reason: e
            })))
        }
        ;
        _proto46._processStartVideoParams = function _processStartVideoParams(e) {
            e.computerGuid || (e.computerGuid = $.computerGuid)
        }
        ;
        _createClass(_class23, [{
            key: "muted",
            set: function set(e) {
                this.broadcast("PlayerController.muted", e)
            }
        }, {
            key: "volume",
            set: function set(e) {
                this.broadcast("PlayerController.volume", e)
            }
        }, {
            key: "isVideoStopped",
            get: function get() {
                var e = this._cts.token;
                return this._isVideoStopped || e.isCancellationRequested
            }
        }, {
            key: "physicalPlayer",
            get: function get() {
                return un.player || vn
            }
        }]);
        return _class23
    }(ji));
    var bn = {
        From: {
            WIDGETS: "widgets",
            CONTROLS_BAR: "controlsbar",
            MINIMIZED_PLAYER: "minimizedplayer"
        },
        Player: {
            PAUSE: "UserActions.Player.pause",
            PLAY: "UserActions.Player.play",
            SEEK: "UserActions.Player.seek",
            CLOSE: "UserActions.Player.close"
        },
        ControlsBar: {
            TOGGLE_MUTE: "UserActions.ControlsBar.mute",
            REWIND: "UserActions.ControlsBar.rewind",
            FASTFORWARD: "UserActions.ControlsBar.fastforward",
            TOGGLE_FULLSCREEN: "UserActions.ControlsBar.togglefullscreen",
            TOGGLE_EXPAND_SETTING: "UserAction.ControlsBar.toggleexpandsetting",
            PLAY_NEXT: "UserAction.ControlsBar.toggleexpandsetting"
        },
        LiveGuide: {
            OPEN: "UserActions.LiveGuide.open",
            CLICK: "UserActions.LiveGuide.click",
            CLOSE: "UserActions.LiveGuide.close"
        },
        LongTimeTips: {
            OPEN: "UserActions.LongTimeTips.open",
            CLOSE: "UserActions.LongTimeTips.close",
            IDLE: "UserAction.LongTimeTips.IDLE"
        },
        EndCard: {
            OPEN: "UserActions.EndCard.open",
            CLICK: "UserActions.EndCard.click",
            CLOSE: "UserActions.EndCard.close"
        },
        PictureInPicture: {
            MINIMIZED: "UserAction.PictureInPicture.minimized",
            MAXIMIZED: "UserAction.PictureInPicture.maximized",
            CLOSE: "UserAction.PictureInPicture.close"
        }
    };
    var Tn = new (function(_ji5) {
        _inheritsLoose(_class24, _ji5);
        function _class24() {
            var _this77;
            _this77 = _ji5.call(this) || this,
            _this77._innerPlayer = {},
            _this77._isLiveRollovered = !1,
            _this77._resetSession(),
            _this77._reset(),
            _this77._qualitySegments = {
                totalVideoFrames: [],
                droppedVideoFrames: []
            };
            return _this77
        }
        var _proto47 = _class24.prototype;
        _proto47.init = function init() {
            this._bindEvents()
        }
        ;
        _proto47._reset = function _reset() {
            this._endSegments();
            var e = Date.now();
            this._adPodStarted = !1,
            this._burnedInAdStarted = !1,
            this._contentStarted = !1,
            this._contentStartTime = e,
            this._insertedAdStarted = !1,
            this._insertedAdStartTime = e,
            this._introStarted = !1,
            this._introStartTime = e,
            this._lastContentPosition = -1,
            this._lastMediaType = "",
            this._pausedDuration = 0,
            this._pauseStartTime = 0,
            this._periodStarted = !1,
            this._periodStartTime = e,
            this._seekStarted = !1,
            this._segmentStarted = !1,
            this._segmentFinishReason = "segment_ended",
            this._waitingStarted = !1,
            this._waitingReason = null,
            this._qualitySegments = {
                totalVideoFrames: [],
                droppedVideoFrames: []
            }
        }
        ;
        _proto47._resetSession = function _resetSession() {
            this._sessionStarted = !1,
            this._willLoadStarted = !1,
            this._beforeStoped = !1,
            this._stopped = !1,
            this._errored = !1
        }
        ;
        _proto47._startSession = function _startSession() {
            this._resetSession(),
            this._sessionStarted = !0,
            this._sessionStartTime = Date.now()
        }
        ;
        _proto47._bindEvents = function _bindEvents() {
            this.onBroadcast("AppPlayerController.userAction", this.onUserAction.bind(this)),
            this.onBroadcast(Oi.READY, this.onPlayerReady.bind(this)),
            this.onBroadcast(Oi.START, this.onPlayerStart.bind(this)),
            this.onBroadcast(Oi.WILL_LOAD_START, this.onPlayerWillLoadStart.bind(this)),
            this.onBroadcast(Oi.LOAD_START, this.onPlayerLoadStart.bind(this)),
            this.onBroadcast(Oi.ERROR, this.onPlayerError.bind(this)),
            this.onBroadcast(Oi.LOADED_METADATA, this.onPlayerLoadedMetadata.bind(this)),
            this.onBroadcast(Oi.LOADED_DATA, this.onPlayerLoadedData.bind(this)),
            this.onBroadcast(Oi.CAN_PLAY, this.onPlayerCanPlay.bind(this)),
            this.onBroadcast(Oi.CAN_PLAY_THROUGH, this.onPlayerCanPlayThrough.bind(this)),
            this.onBroadcast(Oi.PLAYING, this.onPlayerPlaying.bind(this)),
            this.onBroadcast(Oi.WAITING, this.onPlayerWaiting.bind(this)),
            this.beforeBroadcast(Oi.SEEKING, this.onBeforePlayerSeeking.bind(this)),
            this.onBroadcast(Oi.SEEKING, this.onPlayerSeeking.bind(this)),
            this.onBroadcast(Oi.SEEKED, this.onPlayerSeeked.bind(this)),
            this.onBroadcast(Oi.ENDED, this.onPlayerEnded.bind(this)),
            this.onBroadcast(Oi.DURATION_CHANGE, this.onPlayerDurationChange.bind(this)),
            this.onBroadcast(Oi.MBR_MODE_CHANGE, this.onMbrModeChange.bind(this)),
            this.onBroadcast(Oi.TIME_UPDATE, this.onPlayerTimeUpdate.bind(this)),
            this.onBroadcast(Oi.PLAY, this.onPlayerPlay.bind(this)),
            this.onBroadcast(Oi.PAUSE, this.onPlayerPause.bind(this)),
            this.onBroadcast(Oi.MANIFEST_CHANGE, this.onPlayerManifestChange.bind(this)),
            this.onBroadcast(Oi.PERIOD_ENTER, this.onPlayerPeriodEnter.bind(this)),
            this.onBroadcast(Oi.PERIOD_EXIT, this.onPlayerPeriodExit.bind(this)),
            this.onBroadcast(Oi.PERIOD_RESOLVING, this.onPlayerPeriodResolving.bind(this)),
            this.onBroadcast(Oi.PERIOD_RESOLVED, this.onPlayerPeriodResolved.bind(this)),
            this.onBroadcast(Oi.CDN_CHANGE, this.onPlayerCdnChange.bind(this)),
            this.onBroadcast(Oi.BITRATE_CHANGE, this.onPlayerBitrateChange.bind(this)),
            this.onBroadcast(Oi.QUALITY_CHANGE, this.onPlayerQualityChange.bind(this)),
            this.onBroadcast(Oi.SEEKABLE_CHANGE, this.onPlayerSeekableChange.bind(this)),
            this.onBroadcast(Oi.TIMED_METADATA, this.onPlayerTimedMetadata.bind(this)),
            this.onBroadcast(Oi.METADATA_CUE_CHANGE, this.onPlayerMetadataCueChange.bind(this)),
            this.beforeBroadcast(Oi.STOP, this.onPlayerBeforeStop.bind(this)),
            this.onBroadcast(Oi.STOP, this.onPlayerStop.bind(this)),
            this.beforeBroadcast(Oi.CONTINUOUS_PLAY, this.onBeforePlayerContinuousPlay.bind(this)),
            this.onBroadcast(Oi.CONTINUOUS_PLAY, this.onPlayerContinuousPlay.bind(this)),
            this.beforeBroadcast(Oi.ROLLOVER, this.onPlayerBeforeRollover.bind(this)),
            this.onBroadcast(Oi.ROLLOVER, this.onPlayerRollover.bind(this)),
            this.onBroadcast(Oi.QOS_FRAGMENT, this.onPlayerQosFragment.bind(this)),
            this.onBroadcast(Oi.QOS_MANIFEST, this.onPlayerQosManifest.bind(this)),
            this.onBroadcast(Oi.QOS_LICENSE, this.onPlayerQosLicense.bind(this)),
            this.onBroadcast(Oi.QOS_REMOTE_PERIOD, this.onPlayerQosRemotePeriod.bind(this)),
            this.onBroadcast(Yi.AdStarted, this.onVPAIDAdStarted.bind(this)),
            this.onBroadcast(Yi.AdVideoStart, this.onVPAIDAdVideoStart.bind(this)),
            this.onBroadcast(Yi.AdStopped, this.onVPAIDAdStopped.bind(this)),
            this.onBroadcast(Yi.AdSkipped, this.onVPAIDAdStopped.bind(this)),
            this.onBroadcast(Yi.AdPaused, this.onVPAIDAdPause.bind(this)),
            this.onBroadcast(Yi.AdPlaying, this.onVPAIDAdPlay.bind(this)),
            this.onBroadcast(Yi.HULU.AdProgressUpdate, this.onVPAIDAdProgressUpdate.bind(this)),
            this.onBroadcast(qi.WILL_LOAD_START, this.onIntroWillLoadStart.bind(this)),
            this.onBroadcast(qi.CAN_PLAY, this.onIntroCanPlay.bind(this)),
            this.onBroadcast(qi.ENDED, this.onIntroEnded.bind(this)),
            this.onBroadcast(qi.PAUSE, this.onIntroPause.bind(this)),
            this.onBroadcast(qi.PLAY, this.onIntroPlay.bind(this))
        }
        ;
        _proto47._getJoinTime = function _getJoinTime(e) {
            var t = Date.now() - (this._segmentStarted ? e : this._sessionStartTime) - this._pausedDuration;
            return Math.min(Math.max(t, 0), 6e4)
        }
        ;
        _proto47._getSegmentFinishReason = function _getSegmentFinishReason() {
            return this._errored ? "error" : this._stopped ? "user_ended" : this._segmentFinishReason
        }
        ;
        _proto47._startSegment = function _startSegment(e) {
            var _this78 = this;
            var t = hn.wrapEvent(e);
            !this._segmentStarted && (setTimeout(function() {
                return _this78.onPlayerQualityChange()
            }, 50),
            this._isLiveRollovered || hn.dispatchEvent(xi.SOURCE_RENDER_START, t)),
            this._segmentStarted = !0,
            hn.dispatchEvent(xi.SEGMENT_START, t),
            e.mediaType !== Ft.BURNED_IN_AD && e.mediaType !== Ft.INSERTED_AD || hn.dispatchEvent(xi.AD_BREAK_START, t),
            e.mediaType !== Ft.INTRO && e.mediaType !== Ft.POST_INTRO || hn.dispatchEvent(xi.INTRO_START, t),
            this._pausedDuration = 0,
            this._pauseStartTime = 0
        }
        ;
        _proto47._endSegment = function _endSegment(e) {
            this._pausedDuration = 0,
            this._pauseStartTime = 0,
            e.finishReason = this._getSegmentFinishReason(),
            hn.dispatchEvent(xi.SEGMENT_END, hn.wrapEvent(e)),
            e.mediaType !== Ft.INSERTED_AD && e.mediaType !== Ft.BURNED_IN_AD || hn.dispatchEvent(xi.AD_BREAK_END, hn.wrapEvent(e)),
            e.mediaType !== Ft.INTRO && e.mediaType !== Ft.POST_INTRO || hn.dispatchEvent(xi.INTRO_END, hn.wrapEvent(e))
        }
        ;
        _proto47._endIntroSegment = function _endIntroSegment() {
            !this._introStarted || this._lastMediaType !== Ft.INTRO && this._lastMediaType !== Ft.POST_INTRO || (this._endSegment({
                mediaType: this._lastMediaType
            }),
            this._introStarted = !1)
        }
        ;
        _proto47._endInsertedAdSegment = function _endInsertedAdSegment() {
            this._insertedAdStarted && this._lastMediaType === Ft.INSERTED_AD && (this._endSegment({
                mediaType: Ft.INSERTED_AD
            }),
            this._insertedAdStarted = !1)
        }
        ;
        _proto47._endBurnedInAdSegment = function _endBurnedInAdSegment() {
            this._burnedInAdStarted && this._lastMediaType === Ft.BURNED_IN_AD && (this._endSegment({
                mediaType: Ft.BURNED_IN_AD
            }),
            this._burnedInAdStarted = !1)
        }
        ;
        _proto47._endContentSegment = function _endContentSegment() {
            this._contentStarted && this._lastMediaType === Ft.CONTENT && (this._endSegment({
                mediaType: Ft.CONTENT
            }),
            this._contentStarted = !1)
        }
        ;
        _proto47._endSegments = function _endSegments() {
            this._endIntroSegment(),
            this._endBurnedInAdSegment(),
            this._endInsertedAdSegment(),
            this._endContentSegment()
        }
        ;
        _proto47._startPeriod = function _startPeriod() {
            this._periodStarted = !0,
            this._periodStartTime = Date.now(),
            this._lastContentPosition = Kt.currentTime || -1,
            Wt.useManifestBreaks && (Kt.mediaType === Ft.INTRO || Kt.mediaType === Ft.POST_INTRO ? this.onIntroWillLoadStart() : Kt.mediaType === Ft.INSERTED_AD && this.onVPAIDAdStarted())
        }
        ;
        _proto47._isTransitionToContent = function _isTransitionToContent() {
            return Kt.mediaType === Ft.CONTENT && (this._lastMediaType === Ft.INTRO || this._lastMediaType === Ft.POST_INTRO || this._lastMediaType === Ft.INSERTED_AD)
        }
        ;
        _proto47.onUserAction = function onUserAction(e) {
            e.type == bn.LiveGuide.CLICK && (this._segmentFinishReason = "user_ended"),
            hn.dispatchEvent(xi.USER_ACTION, hn.wrapEvent(e))
        }
        ;
        _proto47.onMbrModeChange = function onMbrModeChange(e) {
            hn.dispatchEvent(xi.MBR_MODE_CHANGE, hn.wrapEvent(e))
        }
        ;
        _proto47.onPlayerStart = function onPlayerStart() {
            this._sessionStarted || (this._startSession(),
            hn.dispatchEvent(xi.START))
        }
        ;
        _proto47.onPlayerReady = function onPlayerReady(e) {
            this.physicalPlayer = e,
            hn.dispatchEvent(xi.READY)
        }
        ;
        _proto47.onPlayerWillLoadStart = function onPlayerWillLoadStart() {
            this._willLoadStarted || (this.onPlayerStart(),
            this._willLoadStarted = !0,
            hn.dispatchEvent(xi.WILL_LOAD_START))
        }
        ;
        _proto47.onPlayerLoadStart = function onPlayerLoadStart(e) {
            hn.dispatchEvent(xi.LOAD_START, e)
        }
        ;
        _proto47.onPlayerError = function onPlayerError(e) {
            this._errored = !0,
            qe.error = e.detail.error
        }
        ;
        _proto47.onPlayerLoadedMetadata = function onPlayerLoadedMetadata(e) {
            hn.dispatchEvent(xi.LOADED_METADATA, e)
        }
        ;
        _proto47.onPlayerLoadedData = function onPlayerLoadedData(e) {
            hn.dispatchEvent(xi.LOADED_DATA, e)
        }
        ;
        _proto47.onPlayerCanPlay = function onPlayerCanPlay(e) {
            hn.dispatchEvent(xi.CAN_PLAY, e),
            this._waitingStarted && (this._waitingStarted = !1,
            "seeking" != this._waitingReason && hn.dispatchEvent(xi.REBUFFER_END, hn.wrapEvent({
                bufferType: this._waitingReason
            })),
            this._waitingReason = null)
        }
        ;
        _proto47.onPlayerCanPlayThrough = function onPlayerCanPlayThrough(e) {
            hn.dispatchEvent(xi.CAN_PLAY_THROUGH, e)
        }
        ;
        _proto47.onPlayerPlaying = function onPlayerPlaying(e) {
            hn.dispatchEvent(xi.PLAYING, e),
            !this._contentStarted && Kt.isVod && Kt.isHls && this._startPeriod()
        }
        ;
        _proto47.onPlayerWaiting = function onPlayerWaiting(e) {
            if (hn.dispatchEvent(xi.WAITING, e),
            !this._waitingStarted) {
                if (this._waitingStarted = !0,
                this._waitingReason = this.physicalPlayer.bufferingState,
                "seeking" == this._waitingReason)
                    return;
                hn.dispatchEvent(xi.REBUFFER_START, hn.wrapEvent({
                    bufferType: this._waitingReason
                }))
            }
        }
        ;
        _proto47.onBeforePlayerSeeking = function onBeforePlayerSeeking(e) {
            if (e === void 0) {
                e = {}
            }
            hn.dispatchEvent(xi.before(Oi.SEEKING), hn.wrapEvent(e))
        }
        ;
        _proto47.onPlayerSeeking = function onPlayerSeeking(e) {
            this._seekStarted = !0,
            hn.dispatchEvent(xi.SEEKING, e),
            hn.dispatchEvent(xi.REBUFFER_START, hn.wrapEvent({
                bufferType: "seeking"
            }))
        }
        ;
        _proto47.onPlayerSeeked = function onPlayerSeeked(e) {
            this._seekStarted && (this._seekStarted = !1,
            hn.dispatchEvent(xi.REBUFFER_END, hn.wrapEvent({
                bufferType: "seeking"
            })),
            hn.dispatchEvent(xi.SEEKED, e))
        }
        ;
        _proto47.onPlayerEnded = function onPlayerEnded(e) {
            this._reset(),
            this._sessionStarted && (this._resetSession(),
            this._trackSessionSummaryDoppler(),
            hn.dispatchEvent(xi.ENDED, e))
        }
        ;
        _proto47.onPlayerDurationChange = function onPlayerDurationChange(e) {
            hn.dispatchEvent(xi.DURATION_CHANGE, e)
        }
        ;
        _proto47.onPlayerTimeUpdate = function onPlayerTimeUpdate(e) {
            if (hn.dispatchEvent(xi.TIME_UPDATE, e),
            Kt.isLive && !Kt.isHls && this._updateVideoPlaybackQuality(),
            this._willLoadStarted) {
                if (Kt.mediaType === Ft.BURNED_IN_AD && hn.dispatchEvent(xi.AD_PROGRESS_UPDATE, hn.wrapEvent({
                    mediaType: Ft.BURNED_IN_AD
                })),
                Wt.useManifestBreaks) {
                    if (Kt.mediaType === Ft.INTRO || Kt.mediaType === Ft.POST_INTRO)
                        return void this.onIntroCanPlay();
                    if (Kt.mediaType === Ft.INSERTED_AD)
                        return void this.onVPAIDAdVideoStart()
                }
                -1 !== this._lastContentPosition && Kt.currentTime !== this._lastContentPosition ? this._isTransitionToContent() && !this._contentStarted ? (this._contentStarted = !0,
                this._lastMediaType = Ft.CONTENT,
                this._startSegment({
                    mediaType: Ft.CONTENT,
                    joinTime: this._getJoinTime(this._contentStartTime)
                }),
                this.onPlayerQualityChange()) : this._periodStarted && (this._contentStarted || Kt.mediaType !== Ft.CONTENT ? this._burnedInAdStarted || Kt.mediaType !== Ft.BURNED_IN_AD || (this._burnedInAdStarted = !0,
                this._lastMediaType = Ft.BURNED_IN_AD,
                this._startSegment({
                    mediaType: Ft.BURNED_IN_AD,
                    joinTime: this._getJoinTime(this._periodStartTime)
                })) : (this._contentStarted = !0,
                this._lastMediaType = Ft.CONTENT,
                this._startSegment({
                    mediaType: Ft.CONTENT,
                    joinTime: this._getJoinTime(this._periodStartTime)
                })),
                this._periodStarted = !1) : this._lastContentPosition = Kt.currentTime
            }
        }
        ;
        _proto47.onPlayerPlay = function onPlayerPlay(e) {
            (this._contentStarted || Wt.useManifestBreaks) && hn.dispatchEvent(xi.PLAY, e),
            this._isTransitionToContent() && (this._contentStartTime = Date.now(),
            this._lastContentPosition = Kt.currentTime),
            !this._contentStarted && this._pauseStartTime && (this._pausedDuration += Date.now() - this._pauseStartTime,
            this._pauseStartTime = 0)
        }
        ;
        _proto47.onPlayerPause = function onPlayerPause(e) {
            this._sessionStarted && (hn.dispatchEvent(xi.PAUSE, e),
            this._contentStarted || (this._pauseStartTime = Date.now()))
        }
        ;
        _proto47.onPlayerManifestChange = function onPlayerManifestChange(e) {
            hn.dispatchEvent(xi.MANIFEST_CHANGE, e)
        }
        ;
        _proto47.onPlayerPeriodEnter = function onPlayerPeriodEnter(e) {
            hn.dispatchEvent(xi.PERIOD_ENTER, e);
            var t = Kt.mediaType;
            t !== Ft.CONTENT && (this._endContentSegment(),
            t === Ft.BURNED_IN_AD && hn.dispatchEvent(xi.AD_POD_START, hn.wrapEvent({
                mediaType: Ft.BURNED_IN_AD
            }))),
            this._currentTrack = this.physicalPlayer.videoTracks && this.physicalPlayer.videoTracks[0] || {},
            this._startPeriod()
        }
        ;
        _proto47.onPlayerPeriodExit = function onPlayerPeriodExit(e) {
            this._endIntroSegment(),
            this._endInsertedAdSegment(),
            this._endBurnedInAdSegment(),
            this._periodStarted = !1,
            this._burnedInAdStarted = !1,
            this._lastMediaType === Ft.BURNED_IN_AD && hn.dispatchEvent(xi.AD_POD_END, hn.wrapEvent({
                mediaType: Ft.BURNED_IN_AD
            })),
            this._sessionStarted && (Kt.isLive && !Kt.isHls && this._updateSessionSummary(),
            hn.dispatchEvent(xi.PERIOD_EXIT, e))
        }
        ;
        _proto47.onPlayerPeriodResolving = function onPlayerPeriodResolving(e) {
            hn.dispatchEvent(xi.PERIOD_RESOLVING, e)
        }
        ;
        _proto47.onPlayerPeriodResolved = function onPlayerPeriodResolved(e) {
            hn.dispatchEvent(xi.PERIOD_RESOLVED, e)
        }
        ;
        _proto47.onPlayerCdnChange = function onPlayerCdnChange(e) {
            Kt.cdn && hn.dispatchEvent(xi.CDN_CHANGE, e)
        }
        ;
        _proto47.onPlayerBitrateChange = function onPlayerBitrateChange(e) {
            this._segmentStarted && Kt.bitrate && hn.dispatchEvent(xi.BITRATE_CHANGE, e)
        }
        ;
        _proto47.onPlayerQualityChange = function onPlayerQualityChange() {
            this._segmentStarted && hn.dispatchEvent(xi.QUALITY_CHANGE, hn.wrapEvent({
                bitrate: Kt.bitrate,
                cdn: Kt.cdn
            }))
        }
        ;
        _proto47.onPlayerSeekableChange = function onPlayerSeekableChange(e) {
            hn.dispatchEvent(xi.SEEKABLE_CHANGE, e)
        }
        ;
        _proto47.onPlayerTimedMetadata = function onPlayerTimedMetadata(e) {
            hn.dispatchEvent(xi.TIMED_METADATA, e)
        }
        ;
        _proto47.onPlayerMetadataCueChange = function onPlayerMetadataCueChange(e) {
            hn.dispatchEvent(xi.METADATA_CUE_CHANGE, hn.wrapEvent(e))
        }
        ;
        _proto47.onPlayerBeforeStop = function onPlayerBeforeStop(e) {
            !this._willLoadStarted && !e || this._beforeStoped || (this._stopped = !0,
            e ? this._errored = !0 : this._trackSessionSummaryDoppler(),
            this._reset(),
            this._beforeStoped = !0,
            this._isLiveRollovered = !1,
            hn.dispatchEvent(xi.before(xi.STOP)))
        }
        ;
        _proto47.onPlayerStop = function onPlayerStop(e) {
            (this._willLoadStarted || e) && (this._stopped = !0,
            e && (this._errored = !0),
            this._reset(),
            this._resetSession(),
            e ? setTimeout(function() {
                return hn.dispatchEvent(xi.STOP)
            }, 50) : hn.dispatchEvent(xi.STOP))
        }
        ;
        _proto47.onBeforePlayerContinuousPlay = function onBeforePlayerContinuousPlay(e) {
            hn.dispatchEvent(xi.before(xi.CONTINUOUS_PLAY), hn.wrapEvent(e))
        }
        ;
        _proto47.onPlayerContinuousPlay = function onPlayerContinuousPlay(e) {
            e.reason === Mt && (this._segmentFinishReason = Mt);
            var t = hn.wrapEvent(e);
            this.onPlayerEnded(),
            hn.dispatchEvent(xi.CONTINUOUS_PLAY, t)
        }
        ;
        _proto47.onPlayerBeforeRollover = function onPlayerBeforeRollover(_ref6) {
            var e = _ref6.action;
            this.onPlayerEnded(),
            this._isLiveRollovered = !0,
            hn.dispatchEvent(xi.ROLLOVER, hn.wrapEvent({
                action: e,
                reason: Dt
            })),
            this.onPlayerWillLoadStart(),
            this._startPeriod()
        }
        ;
        _proto47.onPlayerRollover = function onPlayerRollover(_ref7) {
            var e = _ref7.action;
            hn.dispatchEvent(xi.after(xi.ROLLOVER), hn.wrapEvent({
                action: e
            })),
            this._lastContentPosition = Kt.currentTime
        }
        ;
        _proto47.onPlayerQosFragment = function onPlayerQosFragment(e) {
            hn.dispatchEvent(xi.QOS_FRAGMENT, e)
        }
        ;
        _proto47.onPlayerQosManifest = function onPlayerQosManifest(e) {
            hn.dispatchEvent(xi.QOS_MANIFEST, e)
        }
        ;
        _proto47.onPlayerQosLicense = function onPlayerQosLicense(e) {
            hn.dispatchEvent(xi.QOS_LICENSE, e)
        }
        ;
        _proto47.onPlayerQosRemotePeriod = function onPlayerQosRemotePeriod(e) {
            hn.dispatchEvent(xi.QOS_REMOTE_PERIOD, e)
        }
        ;
        _proto47.onVPAIDAdStarted = function onVPAIDAdStarted() {
            this._endContentSegment(),
            this._insertedAdStarted = !1,
            this._insertedAdStartTime = Date.now(),
            this._adPodStarted || 0 !== Mi.currentSlot || (this._adPodStarted = !0,
            hn.dispatchEvent(xi.AD_POD_START, hn.wrapEvent({
                mediaType: Ft.INSERTED_AD
            })))
        }
        ;
        _proto47.onVPAIDAdVideoStart = function onVPAIDAdVideoStart() {
            this._insertedAdStarted || (this._insertedAdStarted = !0,
            this._lastMediaType = Ft.INSERTED_AD,
            this._startSegment({
                mediaType: Ft.INSERTED_AD,
                joinTime: this._getJoinTime(this._insertedAdStartTime)
            }))
        }
        ;
        _proto47.onVPAIDAdStopped = function onVPAIDAdStopped() {
            this._endInsertedAdSegment(),
            this._adPodStarted && (Mi.currentPlaylist && Mi.currentSlot !== Mi.currentPlaylist.adUnits.length - 1 || (hn.dispatchEvent(xi.AD_POD_END, hn.wrapEvent({
                mediaType: Ft.INSERTED_AD
            })),
            this._adPodStarted = !1))
        }
        ;
        _proto47.onVPAIDAdPause = function onVPAIDAdPause(e) {
            this._insertedAdStarted && hn.dispatchEvent(xi.PAUSE, e)
        }
        ;
        _proto47.onVPAIDAdPlay = function onVPAIDAdPlay(e) {
            this._insertedAdStarted && (hn.dispatchEvent(xi.PLAY, e),
            hn.dispatchEvent(xi.PLAYING, e))
        }
        ;
        _proto47.onVPAIDAdProgressUpdate = function onVPAIDAdProgressUpdate() {
            hn.dispatchEvent(xi.AD_PROGRESS_UPDATE, hn.wrapEvent({
                mediaType: Ft.INSERTED_AD
            }))
        }
        ;
        _proto47.onIntroWillLoadStart = function onIntroWillLoadStart() {
            this._sessionStarted && this._willLoadStarted || Kt.mediaType !== Ft.INTRO || this.onPlayerWillLoadStart(),
            this._endContentSegment(),
            this._introStarted = !1,
            this._introStartTime = Date.now(),
            hn.dispatchEvent(xi.before(xi.SEGMENT_START), {
                mediaType: Kt.mediaType
            })
        }
        ;
        _proto47.onIntroCanPlay = function onIntroCanPlay() {
            this._introStarted || (hn.dispatchEvent(xi.CAN_PLAY, event),
            this._introStarted = !0,
            this._lastMediaType = Kt.mediaType,
            this._startSegment({
                mediaType: Kt.mediaType,
                joinTime: this._getJoinTime(this._introStartTime)
            }))
        }
        ;
        _proto47.onIntroEnded = function onIntroEnded() {
            this._endIntroSegment()
        }
        ;
        _proto47.onIntroPause = function onIntroPause(e) {
            this._introStarted && hn.dispatchEvent(xi.PAUSE, e)
        }
        ;
        _proto47.onIntroPlay = function onIntroPlay(e) {
            this._introStarted && (hn.dispatchEvent(xi.PLAY, e),
            hn.dispatchEvent(xi.PLAYING, e))
        }
        ;
        _proto47._updateSessionSummary = function _updateSessionSummary() {
            var e = function(_e43) {
                return _e43.reduce(function(e, t) {
                    return e + t
                }, 0)
            }
              , t = Kt.deviceCapabilities.h264
              , i = this._currentTrack
              , n = e(this._qualitySegments.totalVideoFrames)
              , r = e(this._qualitySegments.droppedVideoFrames);
            this._qualitySegments = {
                totalVideoFrames: [],
                droppedVideoFrames: []
            },
            this._sessionSummary = {
                config_max_width: t.width,
                config_max_height: t.height,
                config_max_framerate: t.framerate,
                aset_max_width: i.maxWidth,
                aset_max_height: i.maxHeight,
                aset_max_framerate: i.maxFrameRate,
                video_max_width: Kt.videoWidth,
                video_max_height: Kt.videoHeight,
                video_max_framerate: Kt.videoFrameRate,
                total_video_frames: n,
                dropped_video_frames: r,
                dropped_video_frames_ratio: 0 === n ? 0 : r / n,
                "720p60_enabled": !!$.abRules.is720p60Enabled,
                h265_enabled: !!$.abRules.isH265Enabled
            }
        }
        ;
        _proto47._updateVideoPlaybackQuality = function _updateVideoPlaybackQuality() {
            var _this79 = this;
            var e = this.physicalPlayer.getVideoPlaybackQuality();
            Object.keys(this._qualitySegments).forEach(function(t) {
                var i = _this79._qualitySegments[t]
                  , n = e[t];
                i.length > 0 && i[i.length - 1] <= n ? i[i.length - 1] = n : i.push(n)
            })
        }
        ;
        _proto47._trackSessionSummaryDoppler = function _trackSessionSummaryDoppler() {
            Kt.isLive && !Kt.isHls ? se.reportToPlayerIndex(ne.Type.SESSION_END, this._sessionSummary) : Kt.isVod && Kt.videoCodec && Kt.videoCodec.includes("hev1") && se.reportToPlayerIndex(ne.Type.SESSION_END)
        }
        ;
        return _class24
    }(ji));
    var Sn = function(_m21) {
        _inheritsLoose(Sn, _m21);
        function Sn() {
            return _m21.apply(this, arguments) || this
        }
        var _proto48 = Sn.prototype;
        _proto48.initAdUnit = function initAdUnit() {
            var e = Mi.currentAdUnit;
            if (e.isAdBlocker)
                return void (this.linearType = pt.isNoah ? dt.LINEAR_TYPE.SKIP : dt.LINEAR_TYPE.AD_BLOCKER);
            if (!e.linear)
                return void (this.linearType = dt.LINEAR_TYPE.UNKOWN);
            if (_i.isBlankAdUnit(e))
                return void (this.linearType = dt.LINEAR_TYPE.BLANK);
            var t = _i.getJSMediaFiles(e.linear.mediaFiles)
              , i = W.ENABLE_AD_OPS && Mi.forceHighAdBitrate ? 1 / 0 : Mi.desireBitrate;
            if (t.length > 0) {
                var _e44 = _i.getMediaFileByBitrate(t, i);
                return this.vpaidUrl = _e44.sourceUrl,
                void (this.linearType = this.vpaidUrl.includes("moatwrapper.js") ? dt.LINEAR_TYPE.MOAT : dt.LINEAR_TYPE.VPAID_VAST)
            }
            if (_i.isAdSelectorSlate(e.adUnitType))
                return void (this.linearType = dt.LINEAR_TYPE.AD_SELECTOR);
            if (_i.isTrailerSelector(e.adUnitType) && !e.isTrailerSelectorVideo)
                return void (this.linearType = dt.LINEAR_TYPE.MOVIE_SELECTOR);
            var n = _i.getVPAIDUrl(e.linear.mediaFiles);
            if (n)
                return this.vpaidUrl = n,
                void (this.linearType = dt.LINEAR_TYPE.VPAID_VAST);
            this.mp4MediaFiles.length > 0 && (this.linearType = dt.LINEAR_TYPE.VIDEO)
        }
        ;
        _createClass(Sn, [{
            key: "needControlBar",
            get: function get() {
                return this.linearType != dt.LINEAR_TYPE.VPAID_VAST || !this.vpaidUrl || !this.vpaidUrl.includes("truex")
            }
        }, {
            key: "mp4MediaFiles",
            get: function get() {
                var e = Mi.currentAdUnit
                  , t = _i.getMP4MediaFiles(e.linear.mediaFiles);
                return Mi.forceHighAdBitrate && (t = [_i.getMediaFileByBitrate(t, 1 / 0)]),
                t
            }
        }, {
            key: "adParameters",
            get: function get() {
                var e = Mi.currentAdUnit;
                if (this.linearType == dt.LINEAR_TYPE.AD_SELECTOR) {
                    var _t33 = {
                        duration: e.linear.duration,
                        is_random: e.linear.adSelectorRandom,
                        title_logo: e.linear.adSelectorTitleLogo,
                        title_text: e.linear.metadata.title_text,
                        voice_over: e.linear.metadata.voice_over,
                        options: []
                    };
                    for (var _i31 in e.linear.adSelectorOptions) {
                        var _n23 = {}
                          , _r12 = e.linear.adSelectorOptions[_i31];
                        _n23.index = _r12.index,
                        _n23.thumbnail = _r12.thumbnail,
                        _n23.label = _r12.label,
                        _n23.default_audit = _r12.defaultAudit,
                        _n23.click_audit = _r12.clickAudit,
                        _n23.group_id = _r12.adGroupId,
                        _t33.options.push(_n23)
                    }
                    return JSON.stringify(_t33)
                }
                if (this.linearType == dt.LINEAR_TYPE.MOVIE_SELECTOR) {
                    var _t34 = {
                        duration: e.linear.duration,
                        poster_url: e.linear.mediaFiles[dt.ASSET_TYPES.POSTER].sourceUrl,
                        trailer_duration: e.companionAds[dt.REGIONS.SELECTOR_VIDEO].duration
                    };
                    return _t34 = Object.assign(_t34, e.linear.metadata),
                    JSON.stringify(_t34)
                }
                if (this.linearType == dt.LINEAR_TYPE.AD_BLOCKER) {
                    var _t35 = {
                        duration: e.linear.duration,
                        isSubscriber: pt.isSubscriber
                    };
                    return JSON.stringify(_t35)
                }
                if (this.linearType == dt.LINEAR_TYPE.VIDEO) {
                    var _t36 = {
                        mediaFiles: this.mp4MediaFiles,
                        duration: e.linear.duration,
                        clickThrough: e.linear.clickThrough,
                        cdns: e.playlist.cdns.map(function(e) {
                            return {
                                name: e.name,
                                host: e.host
                            }
                        })
                    };
                    return JSON.stringify(_t36)
                }
                return e && e.linear ? e.linear.adParameters : "{}"
            }
        }, {
            key: "isAdBrandedSlate",
            get: function get() {
                var e = Mi.currentAdUnit;
                return null != e && _i.isBrandedSlate(e.adUnitType)
            }
        }]);
        return Sn
    }(m);
    Sn.defineProxyProperties({
        adState: !0,
        linearType: !0,
        vpaidUrl: !0
    });
    var An = new Sn;
    var Pn = function() {
        function Pn() {
            this._eventListenerMap = {}
        }
        var _proto49 = Pn.prototype;
        _proto49.subscribe = function subscribe(e, t, i) {
            this._eventListenerMap[t] = this._eventListenerMap[t] || [],
            this._eventListenerMap[t].push([e, i])
        }
        ;
        _proto49.unsubscribe = function unsubscribe(e, t) {
            var i = this._eventListenerMap[t];
            i && (this._eventListenerMap[t] = i.filter(function(t) {
                return t[0] !== e
            }))
        }
        ;
        _proto49.trigger = function trigger(e) {
            var t = this._eventListenerMap[e];
            if (!t)
                return;
            var i = Array.prototype.slice.call(arguments, 1);
            t.forEach(function(e) {
                e[0].apply(e[1], i)
            })
        }
        ;
        return Pn
    }();
    var wn = ["If you are using ad-blocking software, click&nbsp;", "here", "&nbsp;to enable ads on Hulu."];
    var kn = function(_Pn) {
        _inheritsLoose(kn, _Pn);
        function kn() {
            return _Pn.apply(this, arguments) || this
        }
        var _proto50 = kn.prototype;
        _proto50.handshakeVersion = function handshakeVersion() {
            return "2.0"
        }
        ;
        _proto50.initAd = function initAd(e, t, i, n, r, s) {
            var _this80 = this;
            var a = JSON.parse(r.AdParameters);
            this._duration = a.duration,
            this._stopwatch = new Ii,
            this._timer = setInterval(function() {
                0 == _this80.getAdRemainingTime() && _this80.stopAd()
            }, 500),
            this._slot = s.slot,
            this._slot.innerHTML = "\n<style>\n  .ad-blocker {\n    width: 100%;\n    height: 100%;\n    cursor: default;\n    background: #000;\n    overflow: hidden;\n  }\n  .ad-blocker>.ad-blocker-content {\n    width: 944px;\n    height: 531px;\n    display: none;\n    position: relative;\n  }\n  .ad-blocker>.ad-blocker-content>.ad-blocker-title {\n    margin-top: 108px;\n    color: #fff;\n    font-size: 30px;\n    font-family: \"Flama\", \"Helvetica\", \"Arial\", \"Verdana\", \"sans-serif\";\n    text-align: center;\n  }\n  .ad-blocker>.ad-blocker-content>.ad-blocker-message {\n    width: 754px;\n    height: 0;\n    margin: 55px auto 0 auto;\n    color: #ccc;\n    line-height: 1;\n    font-size: 23px;\n    font-family: \"Flama\", \"Helvetica\", \"Arial\", \"Verdana\", \"sans-serif\";\n  }\n  .ad-blocker>.ad-blocker-content>.ad-blocker-message>a.ad-blocker-link {\n    color: #ccc;\n    box-shadow: inset 0 -2px 0 #000, inset 0 -3px 0 #ccc;\n  }\n  .ad-blocker>.ad-blocker-content>a.ad-blocker-button {\n    width: 230px;\n    display: block;\n    padding: 4px;\n    margin: 75px auto 0 auto;\n    cursor: pointer;\n    color: #fff;\n    font-size: 19px;\n    font-family: \"Flama\", \"Helvetica\", \"Arial\", \"Verdana\", \"sans-serif\";\n    text-align: center;\n    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);\n\n    border: 1px solid #337721;\n    border-radius: 3px;\n    background: linear-gradient(#5ca030, #3e8226);\n  }\n  .ad-blocker>.ad-blocker-content>a.ad-blocker-button:hover {\n    background: #6fb033\n  }\n</style>\n<div class=\"ad-blocker\">\n  <div class=\"ad-blocker-content\">\n    <div class=\"ad-blocker-title\">Sorry, we're unable to load a message from our sponsors.</div>\n    <div class=\"ad-blocker-message\">" + (a.isSubscriber ? "Advertisements allow us to provide quality content to you at a low subscription price." : "Advertisements allow us to provide quality content to you for free.") + "\n      " + wn[0] + "<a class=\"ad-blocker-link\" href=\"https://help.hulu.com/articles/21091762\" target=\"_blank\">" + wn[1] + "</a>" + wn[2] + "\n    </div>\n    <a class=\"ad-blocker-button\" href=\"https://help.hulu.com/articles/21091762\" target=\"_blank\">Click Here to Enable Ads</a>\n  </div>\n</div>",
            this._elem = this._slot.getElementsByClassName("ad-blocker-content")[0],
            this._resize(e, t),
            this.trigger(Yi.AdLoaded)
        }
        ;
        _proto50.resizeAd = function resizeAd(e, t) {
            this._resize(e, t),
            this.trigger(Yi.AdSizeChange)
        }
        ;
        _proto50._resize = function _resize(e, t) {
            this._width = e,
            this._height = t;
            var i = Math.min(e / 944, t / 531);
            this._elem.style.setProperty("top", (t - 531) / 2 + "px"),
            this._elem.style.setProperty("left", (e - 944) / 2 + "px"),
            this._elem.style.setProperty("transform", "scale(" + i + ")")
        }
        ;
        _proto50.startAd = function startAd() {
            this._elem.style.setProperty("display", "inline-block"),
            this._stopwatch.start(),
            this.trigger(Yi.AdStarted),
            this.trigger(Yi.AdImpression)
        }
        ;
        _proto50.stopAd = function stopAd() {
            clearInterval(this._timer),
            this._slot.innerHTML = null,
            this.trigger(Yi.AdStopped)
        }
        ;
        _proto50.pauseAd = function pauseAd() {
            this._stopwatch.pause(),
            this.trigger(Yi.AdPaused)
        }
        ;
        _proto50.resumeAd = function resumeAd() {
            this._stopwatch.start(),
            this.trigger(Yi.AdPlaying)
        }
        ;
        _proto50.skipAd = function skipAd() {}
        ;
        _proto50.expandAd = function expandAd() {}
        ;
        _proto50.collapseAd = function collapseAd() {}
        ;
        _proto50.getAdCompanions = function getAdCompanions() {
            return ""
        }
        ;
        _proto50.getAdDuration = function getAdDuration() {
            return this._duration
        }
        ;
        _proto50.getAdExpanded = function getAdExpanded() {
            return !1
        }
        ;
        _proto50.getAdHeight = function getAdHeight() {
            return this._height
        }
        ;
        _proto50.getAdIcons = function getAdIcons() {
            return ""
        }
        ;
        _proto50.getAdLinear = function getAdLinear() {
            return !0
        }
        ;
        _proto50.getAdRemainingTime = function getAdRemainingTime() {
            return Math.max(this._duration - this._stopwatch.getTime() / 1e3, 0)
        }
        ;
        _proto50.getAdSkippableState = function getAdSkippableState() {
            return !1
        }
        ;
        _proto50.getAdVolume = function getAdVolume() {
            return 0
        }
        ;
        _proto50.getAdWidth = function getAdWidth() {
            return this._width
        }
        ;
        _proto50.setAdVolume = function setAdVolume() {}
        ;
        kn.getVPAIDAd = function getVPAIDAd() {
            return new kn
        }
        ;
        return kn
    }(Pn);
    var Cn = function(_Pn2) {
        _inheritsLoose(Cn, _Pn2);
        function Cn() {
            var _this81;
            _this81 = _Pn2.call(this) || this,
            _this81._pendingProgressEvents = [{
                event: Yi.AdVideoStart,
                percent: 0
            }, {
                event: Yi.AdVideoFirstQuartile,
                percent: 25
            }, {
                event: Yi.AdVideoMidpoint,
                percent: 50
            }, {
                event: Yi.AdVideoThirdQuartile,
                percent: 75
            }];
            return _this81
        }
        var _proto51 = Cn.prototype;
        _proto51.getAdLinear = function getAdLinear() {
            return !0
        }
        ;
        _proto51.getAdWidth = function getAdWidth() {
            return this._adWidth
        }
        ;
        _proto51.getAdHeight = function getAdHeight() {
            return this._adHeight
        }
        ;
        _proto51.getAdExpanded = function getAdExpanded() {
            return !1
        }
        ;
        _proto51.getAdSkippableState = function getAdSkippableState() {
            return !1
        }
        ;
        _proto51.getAdRemainingTime = function getAdRemainingTime() {
            return this.getAdDuration() - this._position
        }
        ;
        _proto51.getAdDuration = function getAdDuration() {
            return this._duration
        }
        ;
        _proto51.getAdVolume = function getAdVolume() {
            return 0
        }
        ;
        _proto51.setAdVolume = function setAdVolume() {}
        ;
        _proto51.getAdCompanions = function getAdCompanions() {
            return ""
        }
        ;
        _proto51.getAdIcons = function getAdIcons() {
            return !1
        }
        ;
        _proto51.initAd = function initAd(e, t, i, n, r, s) {
            this._adWidth = e,
            this._adHeight = t,
            this._viewMode = i,
            this._parameters = JSON.parse(r.AdParameters),
            this._slot = s.slot,
            this._videoSlot = s.videoSlot,
            this._position = 0,
            this._firstPlayEventTriggered = !1,
            this._isPaused = !1,
            this._onTimeupdate = this._onTimeupdate.bind(this),
            this._initData(),
            this._initSlot()
        }
        ;
        _proto51._initData = function _initData() {
            this._duration = this._parameters.duration,
            this._isRandom = this._parameters.is_random,
            this._options = this._parameters.options,
            this._titleLogo = this._parameters.title_logo,
            this._titleText = this._parameters.title_text || "Which ad experience do you prefer?",
            this._voiceOverUrl = this._parameters.voice_over || "https://assetshuluimcom-a.akamaihd.net/ad/voltron/AdSelector_voiceover.mp3",
            (!this._duration || this._duration <= 0) && (this._duration = 15),
            this._isRandom && function(e) {
                var t, i;
                for (var _n24 = 0; _n24 < e.length; _n24++) {
                    t = Math.round(Math.random() * (e.length - 1)),
                    t != _n24 && (i = e[_n24],
                    e[_n24] = e[t],
                    e[t] = i)
                }
            }(this._options)
        }
        ;
        _proto51._initSlot = function _initSlot() {
            var _this82 = this;
            this._styleDom = document.createElement("style"),
            this._styleDom.textContent = "\n.ad-selector-container {\n  position: absolute;\n  width: 896px;\n  height: 504px;\n  margin: auto;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.ad-selector-content {\n  position: fixed;\n  width: 896px;\n  height: 504px;\n  margin: auto;\n  top: 0;\n  left: 0;\n}\n\n.ad-selector-background {\n  display: block;\n  position: fixed;\n  width: 896px;\n  height: 504px;\n  margin: auto;\n  left: 0;\n  top: 0;\n  opacity: 0.5;\n  background-image: url(\"https://assetshuluimcom-a.akamaihd.net/ad/voltron/Selector_bg.jpg\");\n  -webkit-filter: blur(20px);\n  -moz-filter: blur(20px);\n  -o-filter: blur(20px);\n  -ms-filter: blur(20px);\n  filter: blur(20px);\n}\n\n.ad-selector-header {\n  position: relative;\n  height: 92px;\n  margin-top: 64px;\n  margin-left: 32px;\n  text-align: left;\n}\n\n.ad-selector-title-logo {\n  display: block;\n  width: 127px;\n  height: 40px;\n  background-size: contain;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n}\n\n.ad-selector-title-text {\n  display: block;\n  color: #ffffff;\n  font-size: 25px;\n  text-align: left;\n  width: auto;\n  height: 25px;\n  margin-top: 27px;\n  vertical-align: text-bottom;\n  font-weight: 200;\n}\n\n.ad-selector-header.ad-selector-nologo .ad-selector-title-logo {\n  display: none;\n}\n\n.ad-selector-header.ad-selector-nologo .ad-selector-title-text {\n  margin-left: 0;\n}\n\n.ad-selector-options {\n  text-align: center;\n  margin-top: 22px;\n}\n\n.ad-selector-option {\n  display: inline-block;\n  margin-left: 10px;\n  margin-right: 10px;\n  cursor: pointer;\n}\n\n.ad-selector-option-thumbnail:hover .ad-selector-option-hover-area {\n  width: 261px;\n  height: 189px;\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAABd0lEQVR42tWZoW7DMBCGSwsLp6A9gkneISTSYGAUlAcIKAyKBoeiwZJIg1XQWMoGx0LHQwYCxlpfZUtW1bTr5a49n/SjJPan8/l8viwWOFtpKa0XrVyrnFBu3lHmG3Z71kouAF1TYsZgAUtngJ0qpQJdakWEYKeKzBxouJwRzo3TmyGftNZ3gLNamzn/7bl7wrmQSynLil7u6IFw7saZTCWlEJ1NQakgwFSy9856EXV8xXH8Xtf1ZxAErwyAiXvwowZpmma31zYMw29VVVsGyGOBoeYCWuv7/ge8SggIbMdyiATQWtd130TLDmz4xDwFCDaO4x88J0jc+AEuAVqD+MyybDNjHl5ANz7DMHwTC2itbdsv0YAQm2IB4X3E7uYHnBF/JVuaIdrBOUuihjiDM5oqUStKQNilhMWDIikWmM7h0u1GoMotqGAgzoqi+OAst7woWMWX/F5cmsRfO724uItvfXjRPPKi/eZFA9OLFrA3TfSH/YY4AEU8K9kskI/gAAAAAElFTkSuQmCC');\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n}\n\n.ad-selector-option-thumbnail {\n  width: 261px;\n  height: 189px;\n  background-size: contain;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n}\n\n.ad-selector-option-label {\n  color: #ffffff;\n  font-size: 16px;\n  text-align: left;\n  font-weight: 200;\n  padding-top: 6px;\n  padding-left: 8px;\n}\n",
            this._slot.appendChild(this._styleDom),
            this._container = document.createElement("div"),
            this._container.className = "ad-selector-container",
            this._slot.appendChild(this._container),
            this._container.innerHTML = "\n<div class=\"ad-selector-background\"></div>\n<div class=\"ad-selector-content\">\n  <div class=\"ad-selector-header\">\n      <div class=\"ad-selector-title-logo\"></div>\n      <div class=\"ad-selector-title-text\"></div>\n  </div>\n  <div class=\"ad-selector-options\">\n</div>\n",
            this._titleLogoDom = this._container.getElementsByClassName("ad-selector-title-logo")[0],
            this._titleTextDom = this._container.getElementsByClassName("ad-selector-title-text")[0],
            this._optionContainer = this._container.getElementsByClassName("ad-selector-options")[0],
            null != this._titleLogo ? this._titleLogoDom.style.backgroundImage = "url(" + this._titleLogo + ")" : this._container.getElementsByClassName("ad-selector-header")[0].className += " ad-selector-nologo",
            this._titleTextDom.textContent = this._titleText;
            for (var _e45 = 0; _e45 < this._options.length; ++_e45) {
                this._optionContainer.innerHTML += "\n<div class=\"ad-selector-option\">\n    <div class=\"ad-selector-option-thumbnail\">\n    \t<div class=\"ad-selector-option-hover-area\"></div>\n    </div>\n    <div class=\"ad-selector-option-label\"></div>\n</div>\n"
            }
            for (var _e46 = 0; _e46 < this._options.length; ++_e46) {
                var _t37 = this._options[_e46]
                  , _i32 = this._optionContainer.getElementsByClassName("ad-selector-option")[_e46];
                _i32.getElementsByClassName("ad-selector-option-thumbnail")[0].style.backgroundImage = "url(" + _t37.thumbnail + ")",
                _i32.getElementsByClassName("ad-selector-option-label")[0].textContent = _t37.label,
                _i32.addEventListener("click", this._onOptionClick.bind(this, _t37, _e46 + 1)),
                _i32.addEventListener("mouseenter", this._onOptionHover.bind(this, _t37)),
                0 == _e46 && this._onOptionHover(_t37)
            }
            this._videoSlot.setAttribute("src", this._voiceOverUrl),
            setTimeout(function() {
                _this82.trigger(Yi.AdLoaded)
            }, 1),
            this._layout()
        }
        ;
        _proto51._onTimeupdate = function _onTimeupdate() {
            if (this._isPaused)
                return;
            this._position++;
            var e = this._position / this._duration * 100;
            for (; this._pendingProgressEvents.length > 0 && this._pendingProgressEvents[0].percent <= e; ) {
                this.trigger(this._pendingProgressEvents[0].event),
                this._pendingProgressEvents.shift()
            }
            this._position >= this._duration && this._onEnded(this._options[0], 1, !0)
        }
        ;
        _proto51._onOptionClick = function _onOptionClick(e, t) {
            this._onEnded(e, t, !1)
        }
        ;
        _proto51._onOptionHover = function _onOptionHover(e) {
            this._container.getElementsByClassName("ad-selector-background")[0].style.backgroundImage = "url(" + e.thumbnail + ")"
        }
        ;
        _proto51._onEnded = function _onEnded(e, t, i) {
            var n = {
                index: e.index,
                position: t,
                timedout: i,
                group_id: e.group_id,
                default_audit: e.default_audit,
                click_audit: e.click_audit
            };
            this.trigger(Yi.HULU.AdSelectorChoice, n),
            this.trigger(Yi.AdVideoComplete),
            this.stopAd()
        }
        ;
        _proto51.handshakeVersion = function handshakeVersion() {
            return "2.0"
        }
        ;
        _proto51.resizeAd = function resizeAd(e, t, i) {
            this._viewMode = i,
            this._adWidth = e,
            this._adHeight = t,
            this._layout(),
            this.trigger(Yi.AdSizeChange)
        }
        ;
        _proto51._layout = function _layout() {
            var e = Math.min(this._adWidth / 896, this._adHeight / 504, 3);
            this._container.style.transform = "scale(" + e + ")",
            this._container.style.transformOrigin = e < 1 ? "left" : "center"
        }
        ;
        _proto51.startAd = function startAd() {
            this.trigger(Yi.AdStarted),
            this.trigger(Yi.AdImpression),
            this.trigger(Yi.AdPlaying),
            this._isPaused = !1,
            this._countDownTimeId = setInterval(this._onTimeupdate, 1e3)
        }
        ;
        _proto51.stopAd = function stopAd() {
            var _this83 = this;
            this._slot && (this._slot.innerHTML = ""),
            this._videoSlot && (this._videoSlot.removeAttribute("src"),
            this._videoSlot.load()),
            this._countDownTimeId > 0 && (clearInterval(this._countDownTimeId),
            this._countDownTimeId = -1),
            setTimeout(function() {
                _this83.trigger(Yi.AdStopped)
            }, 75)
        }
        ;
        _proto51.pauseAd = function pauseAd() {
            this._isPaused = !0,
            this.trigger(Yi.AdPaused)
        }
        ;
        _proto51.resumeAd = function resumeAd() {
            this._isPaused = !1,
            this.trigger(Yi.AdPlaying)
        }
        ;
        _proto51.expandAd = function expandAd() {}
        ;
        _proto51.collapseAd = function collapseAd() {}
        ;
        _proto51.skipAd = function skipAd() {}
        ;
        Cn.getVPAIDAd = function getVPAIDAd() {
            return new Cn
        }
        ;
        return Cn
    }(Pn);
    var In = function(_Pn3) {
        _inheritsLoose(In, _Pn3);
        function In() {
            return _Pn3.apply(this, arguments) || this
        }
        var _proto52 = In.prototype;
        _proto52.handshakeVersion = function handshakeVersion() {
            return "2.0"
        }
        ;
        _proto52.initAd = function initAd() {
            this.trigger(Yi.AdLoaded)
        }
        ;
        _proto52.resizeAd = function resizeAd() {}
        ;
        _proto52.startAd = function startAd() {
            var _this84 = this;
            this.trigger(Yi.AdStarted),
            this.trigger(Yi.AdVideoStart),
            this.trigger(Yi.AdImpression),
            setTimeout(function() {
                _this84.trigger(Yi.AdVideoFirstQuartile),
                _this84.trigger(Yi.AdVideoMidpoint),
                _this84.trigger(Yi.AdVideoThirdQuartile),
                _this84.trigger(Yi.AdVideoComplete),
                _this84.trigger(Yi.AdStopped)
            })
        }
        ;
        _proto52.stopAd = function stopAd() {
            this.trigger(Yi.AdStopped)
        }
        ;
        _proto52.pauseAd = function pauseAd() {
            this.trigger(Yi.AdPaused)
        }
        ;
        _proto52.resumeAd = function resumeAd() {
            this.trigger(Yi.AdPlaying)
        }
        ;
        _proto52.skipAd = function skipAd() {}
        ;
        _proto52.expandAd = function expandAd() {}
        ;
        _proto52.collapseAd = function collapseAd() {}
        ;
        _proto52.getAdCompanions = function getAdCompanions() {
            return ""
        }
        ;
        _proto52.getAdDuration = function getAdDuration() {
            return 0
        }
        ;
        _proto52.getAdExpanded = function getAdExpanded() {
            return !1
        }
        ;
        _proto52.getAdHeight = function getAdHeight() {
            return 9
        }
        ;
        _proto52.getAdIcons = function getAdIcons() {
            return ""
        }
        ;
        _proto52.getAdLinear = function getAdLinear() {
            return !0
        }
        ;
        _proto52.getAdRemainingTime = function getAdRemainingTime() {
            return 0
        }
        ;
        _proto52.getAdSkippableState = function getAdSkippableState() {
            return !1
        }
        ;
        _proto52.getAdVolume = function getAdVolume() {
            return 0
        }
        ;
        _proto52.getAdWidth = function getAdWidth() {
            return 16
        }
        ;
        _proto52.setAdVolume = function setAdVolume() {}
        ;
        In.getVPAIDAd = function getVPAIDAd() {
            return new In
        }
        ;
        return In
    }(Pn);
    var Rn = function() {
        function Rn(e, t) {
            this.source = t,
            this._factory = e
        }
        var _proto53 = Rn.prototype;
        _proto53.load = function load() {
            return Promise.resolve(this._factory)
        }
        ;
        _proto53.dispose = function dispose() {}
        ;
        return Rn
    }();
    var Dn = function() {
        function Dn(e) {
            this.source = e,
            this._iframe = null,
            this._loadingTimer = -1
        }
        var _proto54 = Dn.prototype;
        _proto54.load = function load() {
            var _this85 = this;
            return new Promise(function(e, t) {
                _this85._iframe = document.createElement("iframe"),
                _this85._iframe.style.display = "none",
                _this85._iframe.addEventListener("load", function() {
                    var i = _this85._iframe.contentWindow.document.createElement("script");
                    _this85._iframe.contentWindow.document.body.appendChild(i),
                    _this85._loadingTimer = setTimeout(function() {
                        null != _this85._iframe && t("timeout")
                    }, 16e3),
                    i.addEventListener("load", function() {
                        null != _this85._iframe && (_this85._loadingTimer > 0 && (clearTimeout(_this85._loadingTimer),
                        _this85._loadingTimer = -1),
                        e(_this85._iframe.contentWindow.getVPAIDAd))
                    }),
                    i.addEventListener("error", function() {
                        null != _this85._iframe && t("error")
                    }),
                    i.src = _this85.source
                }),
                document.body.appendChild(_this85._iframe)
            }
            )
        }
        ;
        _proto54.dispose = function dispose() {
            this._iframe && (document.body.removeChild(this._iframe),
            this._iframe = null),
            this._loadingTimer > 0 && (clearTimeout(this._loadingTimer),
            this._loadingTimer = -1)
        }
        ;
        return Dn
    }();
    var Ln = function(e) {
        return "\n    <img\n      " + Object.keys(e).reduce(function(t, i) {
            return null == e[i] && "" !== e[i] || (t += i + "=" + e[i] + " "),
            t
        }, "") + "\n      onerror=\"this.src=this.src;this.onerror=null;\"\n    />\n  "
    };
    var Mn = "<div class=\"trailer-selector-background\"></div>\n<div class=\"trailer-selector-left-container\">\n    <div class=\"trailer-selector-header\"></div>\n    <div class=\"trailer-selector-title\"></div>\n    <div class=\"trailer-selector-buttons\">\n      <div class=\"trailer-selector-watch-trailer-button\"></div>\n      <div class=\"trailer-selector-normal-ad-button\"></div>\n    </div>\n</div>\n<div class=\"trailer-selector-right-container\">\n    " + Ln({
        class: "trailer-selector-poster"
    }) + "\n    <div class=\"trailer-selector-poster-shadow\"></div>\n</div>";
    var On = function(_Pn4) {
        _inheritsLoose(On, _Pn4);
        function On() {
            var _this86;
            _this86 = _Pn4.call(this) || this,
            _this86._pendingProgressEvents = [{
                event: Yi.AdVideoStart,
                percent: 0
            }, {
                event: Yi.AdVideoFirstQuartile,
                percent: 25
            }, {
                event: Yi.AdVideoMidpoint,
                percent: 50
            }, {
                event: Yi.AdVideoThirdQuartile,
                percent: 75
            }];
            return _this86
        }
        var _proto55 = On.prototype;
        _proto55.getAdLinear = function getAdLinear() {
            return !0
        }
        ;
        _proto55.getAdWidth = function getAdWidth() {
            return this._adWidth
        }
        ;
        _proto55.getAdHeight = function getAdHeight() {
            return this._adHeight
        }
        ;
        _proto55.getAdExpanded = function getAdExpanded() {
            return !1
        }
        ;
        _proto55.getAdSkippableState = function getAdSkippableState() {
            return !1
        }
        ;
        _proto55.getAdRemainingTime = function getAdRemainingTime() {
            return this.getAdDuration() - this._position
        }
        ;
        _proto55.getAdDuration = function getAdDuration() {
            return this._duration
        }
        ;
        _proto55.getAdVolume = function getAdVolume() {
            return 0
        }
        ;
        _proto55.setAdVolume = function setAdVolume() {}
        ;
        _proto55.getAdCompanions = function getAdCompanions() {
            return ""
        }
        ;
        _proto55.getAdIcons = function getAdIcons() {
            return !1
        }
        ;
        _proto55.initAd = function initAd(e, t, i, n, r, s) {
            this._adWidth = e,
            this._adHeight = t,
            this._viewMode = i,
            this._parameters = JSON.parse(r.AdParameters),
            this._duration = this._parameters.duration,
            this._slot = s.slot,
            this._videoSlot = s.videoSlot,
            this._position = 0,
            this._firstPlayEventTriggered = !1,
            this._onTimeupdate = this._onTimeupdate.bind(this),
            this._onTrailerClick = this._onTrailerClick.bind(this),
            this._onNormalClick = this._onNormalClick.bind(this),
            this._onError = this._onError.bind(this),
            this._initData(),
            this._initSlot()
        }
        ;
        _proto55._initData = function _initData() {
            this._posterUrl = this._parameters.poster_url,
            this._headerText = "Skip the Ad Breaks",
            this._titleText = this._parameters.title_text || "Enjoy your program without commercial interruption by watching this %DURATION% trailer first.",
            this._defaultOptIn = "false" != this._parameters.default_opt_in,
            this._normalAdBreaksText = "Regular Ad Breaks",
            this._watchTrailerText = "Watch Commercial",
            this._voiceOverUrl = this._parameters.voice_over || "https://assetshuluimcom-a.akamaihd.net/ad/voltron/TrailerSelector_voiceover.mp3";
            var e = this._parameters.trailer_duration;
            this._trailerDurationText = Math.floor(e / 60) + ":",
            this._trailerDurationText += ("0" + Math.floor(e % 60)).substr(-2)
        }
        ;
        _proto55._initSlot = function _initSlot() {
            var _this87 = this;
            this._styleDom = document.createElement("style"),
            this._styleDom.textContent = ".trailer-selector-left-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 420px;\n}\n\n.trailer-selector-right-container {\n  position: absolute;\n  top: 0;\n  left: 420px;\n}\n\n.trailer-selector-background {\n  display: block;\n  position: fixed;\n  width: 896px;\n  height: 504px;\n  margin: auto;\n  left: 0;\n  top: 0;\n  background: linear-gradient(317deg, #1C2F2B 0%, rgba(0,0,0,0) 40%, #3F8E86 100%);\n}\n\n.trailer-selector-container {\n  width: 896px;\n  height: 504px;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.trailer-selector-poster {\n  width: 273px;\n  height: 406px;\n  margin-left: 68px;\n  margin-top: 48px;\n}\n\n.trailer-selector-poster-shadow {\n  background-image: url(\"https://assetshuluimcom-a.akamaihd.net/ad/voltron/TrailerSelector_shadow.png\");\n  background-size: 404px 18px;\n  width: 404px;\n  height: 18px;\n  margin-top: -9px;\n}\n\n.trailer-selector-header {\n  color: #FFFFFF;\n  font-size: 24px;\n  text-align: left;\n  font-weight: 300;\n  margin-top: 150px;\n  margin-left: 60px;\n  padding-right: 30px;\n}\n\n.trailer-selector-title {\n  color: #FFFFFF;\n  font-size: 14px;\n  text-align: left;\n  font-weight: 200;\n  margin-top: 10px;\n  margin-left: 60px;\n  padding-right: 30px;\n}\n\n.trailer-selector-buttons {\n  width: 320px;\n  height: 40px;\n  margin-top: 32px;\n  margin-left: 60px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.trailer-selector-watch-trailer-button {\n  color: #FFFFFF;\n  text-align: center;\n  font-size: 16px;\n  cursor: pointer;\n  width: 150px;\n  height: 40px;\n  font-weight: 400;\n  border-top: 3px solid transparent;\n}\n\n.trailer-selector-watch-trailer-button:hover {\n  border-top: 3px solid #40DE91;\n}\n\n.trailer-selector-normal-ad-button {\n  color: #FFFFFF;\n  text-align: center;\n  font-size: 16px;\n  cursor: pointer;\n  width: 150px;\n  height: 40px;\n  font-weight: 400;\n  margin-left: 20px;\n  border-top: 3px solid transparent;\n}\n\n.trailer-selector-normal-ad-button:hover {\n  border-top: 3px solid #40DE91;\n}",
            this._slot.appendChild(this._styleDom),
            this._container = document.createElement("div"),
            this._container.className = "trailer-selector-container",
            this._slot.appendChild(this._container),
            this._container.innerHTML = Mn,
            this._poster = this._container.getElementsByClassName("trailer-selector-poster")[0],
            this._headerTextField = this._container.getElementsByClassName("trailer-selector-header")[0],
            this._titleTextField = this._container.getElementsByClassName("trailer-selector-title")[0],
            this._watchTrailerButton = this._container.getElementsByClassName("trailer-selector-watch-trailer-button")[0],
            this._normalAdBreaksButton = this._container.getElementsByClassName("trailer-selector-normal-ad-button")[0],
            this._poster.addEventListener("load", function() {
                _this87.trigger(Yi.AdLoaded)
            }, !1),
            this._poster.addEventListener("error", function() {
                _this87.trigger(Yi.AdError, {
                    error: "load poster failed"
                })
            }, !1),
            this._watchTrailerButton.addEventListener("click", this._onTrailerClick),
            this._normalAdBreaksButton.addEventListener("click", this._onNormalClick),
            this._poster.setAttribute("src", this._posterUrl),
            this._videoSlot.setAttribute("src", this._voiceOverUrl),
            this._watchTrailerButton.textContent = this._watchTrailerText,
            this._normalAdBreaksButton.textContent = this._normalAdBreaksText,
            this._headerTextField.textContent = this._headerText,
            this._titleTextField.textContent = this._titleText.replace("%DURATION%", this._trailerDurationText),
            this._layout()
        }
        ;
        _proto55._onTimeupdate = function _onTimeupdate() {
            if (this._isPaused)
                return;
            this._position++;
            var e = this._position / this._duration * 100;
            for (; this._pendingProgressEvents.length > 0 && this._pendingProgressEvents[0].percent <= e; ) {
                this.trigger(this._pendingProgressEvents[0].event),
                this._pendingProgressEvents.shift()
            }
            this._position >= this._duration && this._onEnded(!0, this._defaultOptIn)
        }
        ;
        _proto55._onTrailerClick = function _onTrailerClick() {
            this._onEnded(!1, !0)
        }
        ;
        _proto55._onNormalClick = function _onNormalClick() {
            this._onEnded(!1, !1)
        }
        ;
        _proto55._onError = function _onError() {}
        ;
        _proto55._onEnded = function _onEnded(e, t) {
            var i = {
                timedout: e,
                opt_in: t,
                choiceposition: t ? 2 : 1
            };
            this.trigger(Yi.AdVideoComplete),
            this.trigger(Yi.HULU.TrailerSelectorChoice, i),
            this.stopAd()
        }
        ;
        _proto55.handshakeVersion = function handshakeVersion() {
            return "2.0"
        }
        ;
        _proto55.resizeAd = function resizeAd(e, t, i) {
            this._viewMode = i,
            this._adWidth = e,
            this._adHeight = t,
            this._layout(),
            this.trigger(Yi.AdSizeChange)
        }
        ;
        _proto55._layout = function _layout() {
            var e = Math.min(this._adWidth / 896, this._adHeight / 504, 3);
            this._container.style.transform = "scale(" + e + ")",
            this._container.style.transformOrigin = e < 1 ? "left" : "center"
        }
        ;
        _proto55.startAd = function startAd() {
            this._videoSlot.play(),
            this.trigger(Yi.AdStarted),
            this.trigger(Yi.AdImpression),
            this.trigger(Yi.AdPlaying),
            this._isPaused = !1,
            this._countDownTimeId = setInterval(this._onTimeupdate, 1e3)
        }
        ;
        _proto55.stopAd = function stopAd() {
            var _this88 = this;
            this._slot && (this._slot.innerHTML = ""),
            this._videoSlot && (this._videoSlot.removeAttribute("src"),
            this._videoSlot.load()),
            this._countDownTimeId > 0 && (clearInterval(this._countDownTimeId),
            this._countDownTimeId = -1),
            setTimeout(function() {
                _this88.trigger(Yi.AdStopped)
            }, 75)
        }
        ;
        _proto55.pauseAd = function pauseAd() {
            this._isPaused = !0,
            this.trigger(Yi.AdPaused)
        }
        ;
        _proto55.resumeAd = function resumeAd() {
            this._isPaused = !1,
            this.trigger(Yi.AdPlaying)
        }
        ;
        _proto55.expandAd = function expandAd() {}
        ;
        _proto55.collapseAd = function collapseAd() {}
        ;
        _proto55.skipAd = function skipAd() {}
        ;
        On.getVPAIDAd = function getVPAIDAd() {
            return new On
        }
        ;
        return On
    }(Pn);
    var xn = ["handshakeVersion", "initAd", "startAd", "stopAd", "skipAd", "resizeAd", "pauseAd", "resumeAd", "expandAd", "collapseAd", "subscribe", "unsubscribe"];
    var Nn = function(_f2) {
        _inheritsLoose(Nn, _f2);
        function Nn(e, t, i, n) {
            var _this89;
            _this89 = _f2.call(this) || this,
            _this89._vpaidLoader = e,
            _this89._adParameters = t,
            _this89._vpaid = null,
            _this89._slot = i,
            _this89._video = n,
            _this89._loadingTimer = -1,
            _this89._stoppedTimer = -1,
            _this89._eventListenerMap = {
                [Yi.AdLoaded]: _this89._onVPAIDAdLoaded,
                [Yi.AdStarted]: _this89._onVPAIDAdStarted,
                [Yi.AdStopped]: _this89._onVPAIDAdStopped,
                [Yi.AdSkipped]: _this89._onVPAIDAdSkipped,
                [Yi.AdSkippableStateChange]: _this89._onVPAIDAdSkippableStateChange,
                [Yi.AdSizeChange]: _this89._onVPAIDAdSizeChange,
                [Yi.AdLinearChange]: _this89._onVPAIDAdLinearChange,
                [Yi.AdDurationChange]: _this89._onVPAIDAdDurationChange,
                [Yi.AdExpandedChange]: _this89._onVPAIDAdExpandedChange,
                [Yi.AdRemainingTimeChange]: _this89._onVPAIDAdRemainingTimeChange,
                [Yi.AdVolumeChange]: _this89._onVPAIDAdVolumeChange,
                [Yi.AdImpression]: _this89._onVPAIDAdImpression,
                [Yi.AdVideoStart]: _this89._onVPAIDAdVideoStart,
                [Yi.AdVideoFirstQuartile]: _this89._onVPAIDAdVideoFirstQuartile,
                [Yi.AdVideoMidpoint]: _this89._onVPAIDAdVideoMidpoint,
                [Yi.AdVideoThirdQuartile]: _this89._onVPAIDAdVideoThirdQuartile,
                [Yi.AdVideoComplete]: _this89._onVPAIDAdVideoComplete,
                [Yi.AdClickThru]: _this89._onVPAIDAdClickThru,
                [Yi.AdInteraction]: _this89._onVPAIDAdInteraction,
                [Yi.AdUserAcceptInvitation]: _this89._onVPAIDAdUserAcceptInvitation,
                [Yi.AdUserMinimize]: _this89._onVPAIDAdUserMinimize,
                [Yi.AdUserClose]: _this89._onVPAIDAdUserClose,
                [Yi.AdPaused]: _this89._onVPAIDAdPaused,
                [Yi.AdPlaying]: _this89._onVPAIDAdPlaying,
                [Yi.AdError]: _this89._onVPAIDAdError,
                [Yi.AdLog]: _this89._onVPAIDAdLog,
                [Yi.HULU.AdSelectorChoice]: _this89._onVPAIDAdSelectorChoice,
                [Yi.HULU.CdnChange]: _this89._onVPAIDCdnChange,
                [Yi.HULU.PauseVideoPlayback]: _this89._onVPAIDPauseVideoPlayback,
                [Yi.HULU.ResumeVideoPlayback]: _this89._onVPAIDResumeVideoPlayback,
                [Yi.HULU.TrailerSelectorChoice]: _this89._onVPAIDTrailerSelectorChoice,
                [Yi.HULU.StreamErrorUpdate]: _this89._onVPAIDStreamErrorUpdate,
                [Yi.HULU.AdStoppableStateChange]: _this89._onVPAIDAdStoppableStateChange,
                [Yi.HULU.ExitWithAdFree]: _this89._onVPAIDExitWithAdFree,
                [Yi.HULU.ExitWithSkipAdBreak]: _this89._onVPAIDExitWithSkipAdBreak,
                [Yi.HULU.ExitSelectWatch]: _this89._onVPAIDExitSelectWatch,
                [Yi.HULU.ExitAutoWatch]: _this89._onVPAIDExitAutoWatch,
                [Yi.HULU.ExitAfterOptIn]: _this89._onVPAIDExitAfterOptIn
            };
            return _this89
        }
        var _proto56 = Nn.prototype;
        _proto56.handshakeVersion = function handshakeVersion(e) {
            return this._callVPAIDFunction("handshakeVersion", e)
        }
        ;
        _proto56.initAd = function initAd(e, t, i, n, r, s) {
            var _this90 = this;
            this._vpaidLoader.load().then(function(a) {
                if ("function" != typeof a)
                    return _this90._trackMissingFunction("getVPAIDAd"),
                    void _this90._onVPAIDAdError("missing getVPAIDAd");
                _this90._vpaid = a();
                var o = xn.filter(function(e) {
                    return "function" != typeof _this90._vpaid[e]
                });
                if (o.length > 0)
                    return _this90._trackMissingFunction(o.join(", ")),
                    void _this90._onVPAIDAdError("missing functions: " + o.join(", "));
                _this90._attachEvents(),
                (r = r || {}).AdParameters = _this90._adParameters,
                (s = s || {}).slot = _this90._slot,
                s.videoSlot = _this90._video,
                _this90._callVPAIDFunction("initAd", e, t, i, n, r, s)
            }, function(e) {
                G.c.error("VPAIDAdapter.getVPAIDAd error", e),
                _this90._onVPAIDAdError(e)
            })
        }
        ;
        _proto56.resizeAd = function resizeAd(e, t, i) {
            return this._callVPAIDFunction("resizeAd", e, t, i)
        }
        ;
        _proto56.startAd = function startAd() {
            return this._callVPAIDFunction("startAd")
        }
        ;
        _proto56.stopAd = function stopAd() {
            this._vpaid ? (this._stoppedTimer = setTimeout(this._onVPAIDAdStopped.bind(this), 5e3),
            this._callVPAIDFunction("stopAd")) : this._onVPAIDAdStopped()
        }
        ;
        _proto56.pauseAd = function pauseAd() {
            return this._callVPAIDFunction("pauseAd")
        }
        ;
        _proto56.resumeAd = function resumeAd() {
            return this._callVPAIDFunction("resumeAd")
        }
        ;
        _proto56.skipAd = function skipAd() {
            return this._callVPAIDFunction("skipAd")
        }
        ;
        _proto56.expandAd = function expandAd() {
            return this._callVPAIDFunction("expandAd")
        }
        ;
        _proto56.collapseAd = function collapseAd() {
            return this._callVPAIDFunction("collapseAd")
        }
        ;
        _proto56.getAdCompanions = function getAdCompanions() {
            return this._callVPAIDFunction("getAdCompanions")
        }
        ;
        _proto56.getAdDuration = function getAdDuration() {
            return this._callVPAIDFunction("getAdDuration")
        }
        ;
        _proto56.getAdExpanded = function getAdExpanded() {
            return this._callVPAIDFunction("getAdExpanded")
        }
        ;
        _proto56.getAdHeight = function getAdHeight() {
            return this._callVPAIDFunction("getAdHeight")
        }
        ;
        _proto56.getAdIcons = function getAdIcons() {
            return this._callVPAIDFunction("getAdIcons")
        }
        ;
        _proto56.getAdLinear = function getAdLinear() {
            return this._callVPAIDFunction("getAdLinear")
        }
        ;
        _proto56.getAdRemainingTime = function getAdRemainingTime() {
            return this._callVPAIDFunction("getAdRemainingTime")
        }
        ;
        _proto56.getAdSkippableState = function getAdSkippableState() {
            return this._callVPAIDFunction("getAdSkippableState")
        }
        ;
        _proto56.getAdStoppableState = function getAdStoppableState() {
            return this._callVPAIDFunction("getAdStoppableState")
        }
        ;
        _proto56.getAdVolume = function getAdVolume() {
            return this._callVPAIDFunction("getAdVolume")
        }
        ;
        _proto56.getAdWidth = function getAdWidth() {
            return this._callVPAIDFunction("getAdWidth")
        }
        ;
        _proto56.setAdVolume = function setAdVolume(e) {
            return this._callVPAIDFunction("setAdVolume", e)
        }
        ;
        _proto56._onVPAIDAdLoaded = function _onVPAIDAdLoaded() {
            this.trigger(Yi.AdLoaded)
        }
        ;
        _proto56._onVPAIDAdStarted = function _onVPAIDAdStarted() {
            this.trigger(Yi.AdStarted)
        }
        ;
        _proto56._onVPAIDAdStopped = function _onVPAIDAdStopped() {
            this._clear(),
            this.trigger(Yi.AdStopped)
        }
        ;
        _proto56._onVPAIDAdSkipped = function _onVPAIDAdSkipped() {
            this._clear(),
            this.trigger(Yi.AdSkipped)
        }
        ;
        _proto56._onVPAIDAdSkippableStateChange = function _onVPAIDAdSkippableStateChange() {
            this.trigger(Yi.AdSkippableStateChange)
        }
        ;
        _proto56._onVPAIDAdStoppableStateChange = function _onVPAIDAdStoppableStateChange() {
            this.trigger(Yi.HULU.AdStoppableStateChange)
        }
        ;
        _proto56._onVPAIDAdSizeChange = function _onVPAIDAdSizeChange() {
            this.trigger(Yi._onVPAIDAdSizeChange)
        }
        ;
        _proto56._onVPAIDAdLinearChange = function _onVPAIDAdLinearChange() {
            this.trigger(Yi.AdLinearChange)
        }
        ;
        _proto56._onVPAIDAdDurationChange = function _onVPAIDAdDurationChange() {
            this.trigger(Yi.AdDurationChange)
        }
        ;
        _proto56._onVPAIDAdExpandedChange = function _onVPAIDAdExpandedChange() {
            this.trigger(Yi.AdExpandedChange)
        }
        ;
        _proto56._onVPAIDAdRemainingTimeChange = function _onVPAIDAdRemainingTimeChange() {
            this.trigger(Yi.AdRemainingTimeChange)
        }
        ;
        _proto56._onVPAIDAdVolumeChange = function _onVPAIDAdVolumeChange() {
            this.trigger(Yi.AdVolumeChange)
        }
        ;
        _proto56._onVPAIDAdImpression = function _onVPAIDAdImpression() {
            this.trigger(Yi.AdImpression)
        }
        ;
        _proto56._onVPAIDAdVideoStart = function _onVPAIDAdVideoStart() {
            this.trigger(Yi.AdVideoStart)
        }
        ;
        _proto56._onVPAIDAdVideoFirstQuartile = function _onVPAIDAdVideoFirstQuartile() {
            this.trigger(Yi.AdVideoFirstQuartile)
        }
        ;
        _proto56._onVPAIDAdVideoMidpoint = function _onVPAIDAdVideoMidpoint() {
            this.trigger(Yi.AdVideoMidpoint)
        }
        ;
        _proto56._onVPAIDAdVideoThirdQuartile = function _onVPAIDAdVideoThirdQuartile() {
            this.trigger(Yi.AdVideoThirdQuartile)
        }
        ;
        _proto56._onVPAIDAdVideoComplete = function _onVPAIDAdVideoComplete() {
            this.trigger(Yi.AdVideoComplete)
        }
        ;
        _proto56._onVPAIDAdClickThru = function _onVPAIDAdClickThru(e, t, i) {
            this.trigger(Yi.AdClickThru, {
                url: e,
                Id: t,
                playerHandles: i
            })
        }
        ;
        _proto56._onVPAIDAdInteraction = function _onVPAIDAdInteraction(e, t) {
            t && this.trigger(Yi.AdInteraction, t)
        }
        ;
        _proto56._onVPAIDAdUserAcceptInvitation = function _onVPAIDAdUserAcceptInvitation() {}
        ;
        _proto56._onVPAIDAdUserMinimize = function _onVPAIDAdUserMinimize() {}
        ;
        _proto56._onVPAIDAdUserClose = function _onVPAIDAdUserClose() {}
        ;
        _proto56._onVPAIDAdPaused = function _onVPAIDAdPaused() {
            this.trigger(Yi.AdPaused)
        }
        ;
        _proto56._onVPAIDAdPlaying = function _onVPAIDAdPlaying() {
            this.trigger(Yi.AdPlaying)
        }
        ;
        _proto56._onVPAIDAdLog = function _onVPAIDAdLog() {}
        ;
        _proto56._onVPAIDAdError = function _onVPAIDAdError(e, t) {
            G.c.log("VPAIDAdapter._onVPAIDAdError " + e + " " + t),
            this._clear(),
            this.trigger(Yi.AdError, {
                message: e,
                reason: t
            })
        }
        ;
        _proto56._onVPAIDCdnChange = function _onVPAIDCdnChange(e) {
            this.trigger(Yi.HULU.CdnChange, e)
        }
        ;
        _proto56._onVPAIDPauseVideoPlayback = function _onVPAIDPauseVideoPlayback() {
            this.trigger(Yi.HULU.PauseVideoPlayback)
        }
        ;
        _proto56._onVPAIDResumeVideoPlayback = function _onVPAIDResumeVideoPlayback() {
            this.trigger(Yi.HULU.ResumeVideoPlayback)
        }
        ;
        _proto56._onVPAIDTrailerSelectorChoice = function _onVPAIDTrailerSelectorChoice(e) {
            this.trigger(Yi.HULU.TrailerSelectorChoice, e)
        }
        ;
        _proto56._onVPAIDAdSelectorChoice = function _onVPAIDAdSelectorChoice(e) {
            this.trigger(Yi.HULU.AdSelectorChoice, e)
        }
        ;
        _proto56._onVPAIDStreamErrorUpdate = function _onVPAIDStreamErrorUpdate(e) {
            this.trigger(Yi.HULU.StreamErrorUpdate, e)
        }
        ;
        _proto56._onVPAIDExitWithAdFree = function _onVPAIDExitWithAdFree() {
            G.c.log("VPAIDAdapter._onVPAIDExitWithAdFree"),
            this.trigger(Yi.HULU.ExitWithAdFree),
            this._onVPAIDAdStopped()
        }
        ;
        _proto56._onVPAIDExitWithSkipAdBreak = function _onVPAIDExitWithSkipAdBreak() {
            G.c.log("VPAIDAdapter._onVPAIDExitWithSkipAdBreak"),
            this.trigger(Yi.HULU.ExitWithSkipAdBreak),
            this._onVPAIDAdStopped()
        }
        ;
        _proto56._onVPAIDExitSelectWatch = function _onVPAIDExitSelectWatch() {
            G.c.log("VPAIDAdapter._onVPAIDExitSelectWatch"),
            this.trigger(Yi.HULU.ExitSelectWatch),
            this._onVPAIDAdStopped()
        }
        ;
        _proto56._onVPAIDExitAutoWatch = function _onVPAIDExitAutoWatch() {
            G.c.log("VPAIDAdapter._onVPAIDExitAutoWatch"),
            this.trigger(Yi.HULU.ExitAutoWatch),
            this._onVPAIDAdStopped()
        }
        ;
        _proto56._onVPAIDExitAfterOptIn = function _onVPAIDExitAfterOptIn() {
            G.c.log("VPAIDAdapter._onVPAIDExitAfterOptIn"),
            this.trigger(Yi.HULU.ExitAfterOptIn)
        }
        ;
        _proto56._clear = function _clear() {
            this._vpaid && (this._detachEvents(),
            this._vpaid = null),
            this._stoppedTimer > 0 && (clearTimeout(this._stoppedTimer),
            this._stoppedTimer = -1),
            this._video && (this._video.removeAttribute("src"),
            this._video.load()),
            this._slot && (this._slot.innerHTML = ""),
            this._vpaidLoader && (this._vpaidLoader.dispose(),
            this._vpaidLoader = null)
        }
        ;
        _proto56._attachEvents = function _attachEvents() {
            for (var _e47 in this._eventListenerMap) {
                this._callVPAIDFunction("subscribe", this._eventListenerMap[_e47], _e47, this)
            }
        }
        ;
        _proto56._detachEvents = function _detachEvents() {
            for (var _e48 in this._eventListenerMap) {
                this._callVPAIDFunction("unsubscribe", this._eventListenerMap[_e48], _e48)
            }
        }
        ;
        _proto56._callVPAIDFunction = function _callVPAIDFunction(e) {
            if (!this._vpaid)
                return;
            var t = this._vpaid[e];
            if ("function" == typeof t)
                try {
                    return t.apply(this._vpaid, Array.prototype.slice.call(arguments, 1))
                } catch (t) {
                    return G.c.error(t),
                    void this._trackVPAIDException(e, t)
                }
            else
                this._trackMissingFunction(e)
        }
        ;
        _proto56._trackMissingFunction = function _trackMissingFunction(e) {
            G.c.error("VPAIDAdapter._trackMissingFunction", e)
        }
        ;
        _proto56._trackVPAIDException = function _trackVPAIDException(e, t) {
            G.c.error("VPAIDAdapter._trackVPAIDException", e, t)
        }
        ;
        return Nn
    }(f);
    var Un = function(_Pn5) {
        _inheritsLoose(Un, _Pn5);
        function Un() {
            var _this91;
            _this91 = _Pn5.call(this) || this,
            _this91._cdnHostHistory = [],
            _this91._cdnFallbackCurrentTime = !1,
            _this91._pendingProgressEvents = [{
                event: Yi.AdVideoStart,
                percent: 0
            }, {
                event: Yi.AdVideoFirstQuartile,
                percent: 25
            }, {
                event: Yi.AdVideoMidpoint,
                percent: 50
            }, {
                event: Yi.AdVideoThirdQuartile,
                percent: 75
            }, {
                event: Yi.AdVideoComplete,
                percent: 100
            }];
            return _this91
        }
        var _proto57 = Un.prototype;
        _proto57.getAdLinear = function getAdLinear() {
            return !0
        }
        ;
        _proto57.getAdWidth = function getAdWidth() {
            return this._adWidth
        }
        ;
        _proto57.getAdHeight = function getAdHeight() {
            return this._adHeight
        }
        ;
        _proto57.getAdExpanded = function getAdExpanded() {
            return !1
        }
        ;
        _proto57.getAdSkippableState = function getAdSkippableState() {
            return !1
        }
        ;
        _proto57.getAdRemainingTime = function getAdRemainingTime() {
            return this._videoSlot.readyState < this._videoSlot.HAVE_METADATA ? -2 : this._videoSlot.duration - this._videoSlot.currentTime
        }
        ;
        _proto57.getAdDuration = function getAdDuration() {
            return this._videoSlot.readyState < this._videoSlot.HAVE_METADATA ? -2 : this._videoSlot.duration
        }
        ;
        _proto57.getAdVolume = function getAdVolume() {
            return this._videoSlot.volume
        }
        ;
        _proto57.setAdVolume = function setAdVolume(e) {
            this._videoSlot.volume = e
        }
        ;
        _proto57.getAdCompanions = function getAdCompanions() {
            return ""
        }
        ;
        _proto57.getAdIcons = function getAdIcons() {
            return !1
        }
        ;
        _proto57.initAd = function initAd(e, t, i, n, r, s) {
            this._adWidth = e,
            this._adHeight = t,
            this._viewMode = i,
            this._desiredBitrate = n,
            this._creativeData = r,
            this._slot = s.slot,
            this._videoSlot = s.videoSlot,
            this._parameters = JSON.parse(r.AdParameters),
            this._duration = this._parameters.duration,
            this._cdns = this._parameters.cdns,
            this._mediaFiles = this._parameters.mediaFiles,
            this._mediaFiles.sort(function(e, t) {
                return e.bitrate < t.bitrate ? -1 : e.bitrate > t.bitrate ? 1 : 0
            }),
            this._clickThrough = this._parameters.clickThrough,
            this._cdnHostHistory = [],
            this._cdnFallbackInProgress = !1,
            this._updateVideoSlot(),
            this._firstPlayEventTriggered = !1,
            this._onLoadedMetadataAsAdLoaded = this._onLoadedMetadataAsAdLoaded.bind(this),
            this._onPlayAfterResumeAd = this._onPlayAfterResumeAd.bind(this),
            this._onPauseAfterPauseAd = this._onPauseAfterPauseAd.bind(this),
            this._onTimeupdate = this._onTimeupdate.bind(this),
            this._onEnded = this._onEnded.bind(this),
            this._onClick = this._onClick.bind(this),
            this._onStreamError = this._onStreamError.bind(this),
            this._onPause = this._onPause.bind(this),
            this._onPlay = this._onPlay.bind(this),
            this._videoSlot.addEventListener("loadedmetadata", this._onLoadedMetadataAsAdLoaded),
            this._videoSlot.addEventListener("error", this._onStreamError),
            this._videoSlot.addEventListener("timeupdate", this._onTimeupdate),
            this._videoSlot.addEventListener("ended", this._onEnded),
            this._videoSlot.addEventListener("play", this._onPlay),
            this._videoSlot.addEventListener("pause", this._onPause),
            this._slot.addEventListener("click", this._onClick)
        }
        ;
        _proto57._onLoadedMetadataAsAdLoaded = function _onLoadedMetadataAsAdLoaded() {
            this._videoSlot.removeEventListener("loadedmetadata", this._onLoadedMetadataAsAdLoaded),
            this.trigger(Yi.AdLoaded)
        }
        ;
        _proto57._updateVideoSlotSize = function _updateVideoSlotSize() {}
        ;
        _proto57._updateVideoSlot = function _updateVideoSlot() {
            null == this._videoSlot && (this._videoSlot = document.createElement("video"),
            this._slot.appendChild(this._videoSlot)),
            this._updateVideoSlotSize();
            var t = this._mediaFiles;
            if (0 === t.length)
                return this._uninstallAllVideoSlotListeners(),
                void this.trigger(Yi.AdError, "No video input");
            var i = -1
              , n = -1;
            for (var _e49 = 0; _e49 < t.length; ++_e49) {
                t[_e49].bitrate <= this._desiredBitrate && i < t[_e49].bitrate && (i = t[_e49].bitrate,
                n = _e49)
            }
            -1 === n && (n = 0),
            this._videoSlot.setAttribute("src", t[n].sourceUrl);
            try {
                this._currentCdnHost = new URL(this._videoSlot.src).host,
                this._cdnHostHistory.push(this._currentCdnHost),
                this._onCdnChange(this._currentCdnHost)
            } catch (e) {
                this._currentCdnHost = null,
                this._cdnHostHistory = [],
                this._onCdnChange(null),
                this.trigger(Yi.AdLog, "Cannot parse CDN from sourceUrl, CDN fallback is off")
            }
        }
        ;
        _proto57.handshakeVersion = function handshakeVersion() {
            return "2.0"
        }
        ;
        _proto57.resizeAd = function resizeAd(e, t, i) {
            this._viewMode = i,
            this._adWidth = e,
            this._adHeight = t,
            this._updateVideoSlotSize(),
            this.trigger(Yi.AdSizeChange)
        }
        ;
        _proto57.startAd = function startAd() {
            this._paused = !1,
            this._videoSlot.play(),
            this.trigger(Yi.AdStarted),
            this.trigger(Yi.AdImpression)
        }
        ;
        _proto57.stopAd = function stopAd() {
            var _this92 = this;
            this._slot && this._slot.removeEventListener("click", this._onClick),
            this._videoSlot && (this._uninstallAllVideoSlotListeners(),
            this._videoSlot.removeAttribute("src"),
            this._videoSlot.load()),
            setTimeout(function() {
                _this92.trigger(Yi.AdStopped)
            }, 75)
        }
        ;
        _proto57._onPauseAfterPauseAd = function _onPauseAfterPauseAd() {
            this._videoSlot.removeEventListener("pause", this._onPauseAfterPauseAd),
            this.trigger(Yi.AdPaused)
        }
        ;
        _proto57.pauseAd = function pauseAd() {
            this._paused || (this._paused = !0,
            this._videoSlot.addEventListener("pause", this._onPauseAfterPauseAd),
            this._videoSlot.pause())
        }
        ;
        _proto57._onPlayAfterResumeAd = function _onPlayAfterResumeAd() {
            this._videoSlot.removeEventListener("play", this._onPlayAfterResumeAd),
            this.trigger(Yi.AdPlaying)
        }
        ;
        _proto57.resumeAd = function resumeAd() {
            this._paused && (this._paused = !1,
            this._videoSlot.addEventListener("play", this._onPlayAfterResumeAd),
            this._videoSlot.play())
        }
        ;
        _proto57.expandAd = function expandAd() {}
        ;
        _proto57.collapseAd = function collapseAd() {}
        ;
        _proto57.skipAd = function skipAd() {}
        ;
        _proto57._onClick = function _onClick() {
            var e = this._clickThrough;
            this.trigger(Yi.AdClickThru, e, "", !0)
        }
        ;
        _proto57._cdnFallback = function _cdnFallback(e) {
            var t = this._videoSlot.src
              , i = t.replace(new URL(t).host, e)
              , n = this._videoSlot.currentTime;
            this._videoSlot.src = i,
            this._videoSlot.load(),
            this._videoSlot.currentTime = n,
            this._paused ? this._videoSlot.pause() : this._videoSlot.play()
        }
        ;
        _proto57._uninstallAllVideoSlotListeners = function _uninstallAllVideoSlotListeners() {
            this._videoSlot.removeEventListener("play", this._onPlayAfterResumeAd),
            this._videoSlot.removeEventListener("pause", this._onPauseAfterPauseAd),
            this._videoSlot.removeEventListener("loadedmetadata", this._onLoadedMetadataAsAdLoaded),
            this._videoSlot.removeEventListener("timeupdate", this._onTimeupdate),
            this._videoSlot.removeEventListener("ended", this._onEnded),
            this._videoSlot.removeEventListener("error", this._onStreamError),
            this._videoSlot.removeEventListener("play", this._onPlay),
            this._videoSlot.removeEventListener("pause", this._onPause)
        }
        ;
        _proto57._onEnded = function _onEnded() {
            for (; this._pendingProgressEvents.length > 0; ) {
                this.trigger(this._pendingProgressEvents[0].event),
                this._pendingProgressEvents.shift()
            }
            this.stopAd()
        }
        ;
        _proto57._reportStreamError = function _reportStreamError(e) {
            this.trigger(Yi.HULU.StreamErrorUpdate, {
                reason: e,
                is_fatal: this._cdnHostHistory.length == this._cdns.length
            })
        }
        ;
        _proto57._onStreamError = function _onStreamError() {
            var _this93 = this;
            var e = ""
              , t = "";
            if (3 == this._videoSlot.networkState ? (e = "streamnotfound",
            t = "notfound") : (e = "dropped",
            t = "blocked"),
            this._reportStreamError(e),
            this._currentCdnHost) {
                var _loop2 = function(_e50) {
                    if (_this93._cdnHostHistory.every(function(t) {
                        return t !== _this93._cdns[_e50].host
                    }))
                        return {
                            v: (_this93._cdnHostHistory.push(_this93._cdns[_e50].host),
                            _this93._cdnFallback(_this93._cdns[_e50].host),
                            void _this93._onCdnChange(_this93._cdns[_e50].host))
                        }
                };
                for (var _e50 = 0; _e50 < this._cdns.length; ++_e50) {
                    var _ret2 = _loop2(_e50);
                    if (typeof _ret2 === "object")
                        return _ret2.v
                }
            }
            this._uninstallAllVideoSlotListeners(),
            this.trigger(Yi.AdError, "stream error", t)
        }
        ;
        _proto57._onPlay = function _onPlay() {
            this._paused && this._videoSlot.pause()
        }
        ;
        _proto57._onPause = function _onPause() {
            this._videoSlot.ended || this._paused || this._videoSlot.play()
        }
        ;
        _proto57._onTimeupdate = function _onTimeupdate() {
            var e = this._videoSlot.currentTime / this._videoSlot.duration * 100;
            for (; this._pendingProgressEvents.length > 0 && this._pendingProgressEvents[0].percent <= e; ) {
                this.trigger(this._pendingProgressEvents[0].event),
                this._pendingProgressEvents.shift()
            }
        }
        ;
        _proto57._onCdnChange = function _onCdnChange(e) {
            var t = "Default";
            for (var _i33 = 0; _i33 < this._cdns.length; ++_i33) {
                this._cdns[_i33].host == e && (t = this._cdns[_i33].name)
            }
            this.trigger(Yi.HULU.CdnChange, t)
        }
        ;
        Un.getVPAIDAd = function getVPAIDAd() {
            return new Un
        }
        ;
        return Un
    }(Pn);
    var Bn = new (function(_ji6) {
        _inheritsLoose(_class25, _ji6);
        function _class25() {
            var _this94;
            _this94 = _ji6.call(this) || this,
            _this94._updateAdProgress = _this94._updateAdProgress.bind(_assertThisInitialized(_this94)),
            _this94._linearAdAdapter = null,
            _this94._waitingForVpaidEventTimeoutIds = {},
            _this94._eventListenerMap = {
                [Yi.AdLoaded]: _this94._onVPAIDAdLoaded.bind(_assertThisInitialized(_this94)),
                [Yi.AdStarted]: _this94._onVPAIDAdStarted.bind(_assertThisInitialized(_this94)),
                [Yi.AdStopped]: _this94._onVPAIDAdStopped.bind(_assertThisInitialized(_this94)),
                [Yi.AdSkipped]: _this94._onVPAIDAdSkipped.bind(_assertThisInitialized(_this94)),
                [Yi.AdSkippableStateChange]: _this94._onVPAIDAdSkippableStateChange.bind(_assertThisInitialized(_this94)),
                [Yi.AdSizeChange]: _this94._onVPAIDAdSizeChange.bind(_assertThisInitialized(_this94)),
                [Yi.AdLinearChange]: _this94._onVPAIDAdLinearChange.bind(_assertThisInitialized(_this94)),
                [Yi.AdDurationChange]: _this94._onVPAIDAdDurationChange.bind(_assertThisInitialized(_this94)),
                [Yi.AdExpandedChange]: _this94._onVPAIDAdExpandedChange.bind(_assertThisInitialized(_this94)),
                [Yi.AdRemainingTimeChange]: _this94._onVPAIDAdRemainingTimeChange.bind(_assertThisInitialized(_this94)),
                [Yi.AdVolumeChange]: _this94._onVPAIDAdVolumeChange.bind(_assertThisInitialized(_this94)),
                [Yi.AdImpression]: _this94._onVPAIDAdImpression.bind(_assertThisInitialized(_this94)),
                [Yi.AdVideoStart]: _this94._onVPAIDAdVideoStart.bind(_assertThisInitialized(_this94)),
                [Yi.AdVideoFirstQuartile]: _this94._onVPAIDAdVideoFirstQuartile.bind(_assertThisInitialized(_this94)),
                [Yi.AdVideoMidpoint]: _this94._onVPAIDAdVideoMidpoint.bind(_assertThisInitialized(_this94)),
                [Yi.AdVideoThirdQuartile]: _this94._onVPAIDAdVideoThirdQuartile.bind(_assertThisInitialized(_this94)),
                [Yi.AdVideoComplete]: _this94._onVPAIDAdVideoComplete.bind(_assertThisInitialized(_this94)),
                [Yi.AdClickThru]: _this94._onVPAIDAdClickThru.bind(_assertThisInitialized(_this94)),
                [Yi.AdInteraction]: _this94._onVPAIDAdInteraction.bind(_assertThisInitialized(_this94)),
                [Yi.AdUserAcceptInvitation]: _this94._onVPAIDAdUserAcceptInvitation.bind(_assertThisInitialized(_this94)),
                [Yi.AdUserMinimize]: _this94._onVPAIDAdUserMinimize.bind(_assertThisInitialized(_this94)),
                [Yi.AdUserClose]: _this94._onVPAIDAdUserClose.bind(_assertThisInitialized(_this94)),
                [Yi.AdPaused]: _this94._onVPAIDAdPaused.bind(_assertThisInitialized(_this94)),
                [Yi.AdPlaying]: _this94._onVPAIDAdPlaying.bind(_assertThisInitialized(_this94)),
                [Yi.AdError]: _this94._onVPAIDAdError.bind(_assertThisInitialized(_this94)),
                [Yi.AdLog]: _this94._onVPAIDAdLog.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.AdSelectorChoice]: _this94._onVPAIDAdSelectorChoice.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.CdnChange]: _this94._onVPAIDCdnChange.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.PauseVideoPlayback]: _this94._onVPAIDPauseVideoPlayback.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.ResumeVideoPlayback]: _this94._onVPAIDResumeVideoPlayback.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.TrailerSelectorChoice]: _this94._onVPAIDTrailerSelectorChoice.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.StreamErrorUpdate]: _this94._onVPAIDStreamErrorUpdate.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.AdStoppableStateChange]: _this94._onVPAIDAdStoppableStateChange.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.ExitWithAdFree]: _this94._onVPAIDExitWithAdFree.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.ExitWithSkipAdBreak]: _this94._onVPAIDExitWithSkipAdBreak.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.ExitSelectWatch]: _this94._onVPAIDExitSelectWatch.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.ExitAutoWatch]: _this94._onVPAIDExitAutoWatch.bind(_assertThisInitialized(_this94)),
                [Yi.HULU.ExitAfterOptIn]: _this94._onVPAIDExitAfterOptIn.bind(_assertThisInitialized(_this94))
            };
            return _this94
        }
        var _proto58 = _class25.prototype;
        _proto58.init = function init() {
            this.onBroadcast("VPAIDController.playAdUnit", this.playAdUnit.bind(this)),
            this.onBroadcast("VPAIDController.play", this._resumeAd.bind(this)),
            this.onBroadcast("VPAIDController.pause", this._pauseAd.bind(this)),
            this.onBroadcast("VPAIDController.stopAd", this.stopAd.bind(this)),
            this.onBroadcast("VPAIDController.resizeAd", this._resizeLinearAd.bind(this)),
            this.onBroadcast("VPAIDController.stopAdSession", this._stopAdSession.bind(this)),
            this.onBroadcast("VPAIDController.volume", this._setVolume.bind(this))
        }
        ;
        _proto58.playAdUnit = function playAdUnit(e, t) {
            var _this95 = this;
            if (An.initAdUnit(),
            this._removeVPAIDEventListeners(),
            Mi.isAdSessionSampled) {
                var _e51 = Mi.currentAdUnit;
                se.reportToPlayerIndex(ne.Type.SAMPLE_AD_START, {
                    pod: Mi.currentPod,
                    slot: Mi.currentSlot,
                    adUnitId: _e51.adUnitId,
                    adUnitType: _e51.adUnitType,
                    duration: this.getAdDuration()
                })
            }
            switch (An.linearType) {
            case dt.LINEAR_TYPE.MOAT:
                this._linearAdAdapter = new Nn(new Dn(An.vpaidUrl),An.adParameters,e,t);
                break;
            case dt.LINEAR_TYPE.VIDEO:
                this._linearAdAdapter = new Nn(new Rn(Un.getVPAIDAd,"VideoWrapper"),An.adParameters,e,t);
                break;
            case dt.LINEAR_TYPE.AD_SELECTOR:
                this._linearAdAdapter = new Nn(new Rn(Cn.getVPAIDAd,"AdSelectorWrapper"),An.adParameters,e,t);
                break;
            case dt.LINEAR_TYPE.MOVIE_SELECTOR:
                this._linearAdAdapter = new Nn(new Rn(On.getVPAIDAd,"TrailerSelectorWrapper"),An.adParameters,e,t);
                break;
            case dt.LINEAR_TYPE.VPAID_VAST:
                this._linearAdAdapter = new Nn(new Dn(An.vpaidUrl),An.adParameters,e,t);
                break;
            case dt.LINEAR_TYPE.BLANK:
                this._linearAdAdapter = new Nn(new Rn(In.getVPAIDAd,"BlankWrapper"),An.adParameters,e,t);
                break;
            case dt.LINEAR_TYPE.AD_BLOCKER:
                this._linearAdAdapter = new Nn(new Rn(kn.getVPAIDAd,"AdBlockerWrapper"),An.adParameters,e,t);
                break;
            default:
                this._linearAdAdapter = null;
            }
            this._linearAdAdapter ? (this._addVPAIDEventListeners(),
            An.adState = dt.AD_STATES.INIT,
            this._setVpaidEventTimeout(Yi.AdLoaded, 1e4, "init_ad_time_out", function() {
                An.adState = dt.AD_STATES.STOPPED,
                _this95.dispose(),
                _this95.broadcast(Yi.AdStopped)
            }),
            this._linearAdAdapter.initAd(ni.width, ni.height, ni.externalViewMode, Mi.desireBitrate)) : An.linearType === dt.LINEAR_TYPE.SKIP ? (An.adState = dt.AD_STATES.STOPPED,
            this.broadcast(Yi.AdStopped)) : (G.c.error("VPAIDController.playAdUnit: UnSupported Linear"),
            An.adState = dt.AD_STATES.STOPPED,
            se.reportToPlayerIndex(ne.Type.AD_LINEAR_TYPE_NOT_SUPPORT),
            this.broadcast(Yi.AdStopped))
        }
        ;
        _proto58._resetVpaidEventTimeout = function _resetVpaidEventTimeout() {
            if (this._waitingForVpaidEventTimeoutIds)
                for (var _e52 in this._waitingForVpaidEventTimeoutIds) {
                    this._clearVpaidEventTimeout(_e52)
                }
            else
                this._waitingForVpaidEventTimeoutIds = {}
        }
        ;
        _proto58._clearVpaidEventTimeout = function _clearVpaidEventTimeout(e) {
            this._waitingForVpaidEventTimeoutIds[e] > -1 && (clearTimeout(this._waitingForVpaidEventTimeoutIds[e]),
            this._waitingForVpaidEventTimeoutIds[e] = -1)
        }
        ;
        _proto58._setVpaidEventTimeout = function _setVpaidEventTimeout(e, t, i, n) {
            this._clearVpaidEventTimeout(e),
            this._waitingForVpaidEventTimeoutIds[e] = setTimeout(function() {
                var e = Mi.currentAdUnit
                  , t = {
                    adUnitId: e && e.adUnitId,
                    adUnitType: e && e.adUnitType,
                    timeoutType: i,
                    rawVAST: e && e.playlist && _i.shrinkVAST(e.playlist.rawVAST)
                };
                se.reportToPlayerIndex(ne.Type.AD_VPAID_EVENT_TIMEOUT, t),
                n.apply()
            }, t)
        }
        ;
        _proto58.startAd = function startAd() {
            var _this96 = this;
            Mi.update({
                currentAdRemainingTime: this.getAdDuration(),
                currentAdDuration: this.getAdDuration()
            }),
            this._adVideoThirdQuartilePassed = !1,
            this._setVpaidEventTimeout(Yi.AdStarted, 8e3, "start_ad_time_out", function() {
                _this96.stopAd()
            }),
            this._linearAdAdapter.startAd()
        }
        ;
        _proto58.dispose = function dispose() {
            this._resetVpaidEventTimeout(),
            this._stopUpdateAdProgress(),
            this._removeVPAIDEventListeners(),
            this._linearAdAdapter = null
        }
        ;
        _proto58._stopAdSession = function _stopAdSession() {
            this._removeVPAIDEventListeners(),
            this._linearAdAdapter && (this._linearAdAdapter.pauseAd(),
            this._linearAdAdapter.stopAd(),
            this._linearAdAdapter = null)
        }
        ;
        _proto58._setVolume = function _setVolume(e) {
            this._linearAdAdapter && this._linearAdAdapter.setAdVolume(e)
        }
        ;
        _proto58.stopAd = function stopAd() {
            var _this97 = this;
            this._linearAdAdapter && (this._setVpaidEventTimeout(Yi.AdStopped, 8e3, "stop_ad_time_out", function() {
                An.adState = dt.AD_STATES.STOPPED,
                _this97.dispose(),
                _this97.broadcast(Yi.AdStopped)
            }),
            this._linearAdAdapter.stopAd())
        }
        ;
        _proto58._resizeLinearAd = function _resizeLinearAd() {
            this._linearAdAdapter && this._linearAdAdapter.resizeAd(ni.width, ni.height, ni.externalViewMode)
        }
        ;
        _proto58._addVPAIDEventListeners = function _addVPAIDEventListeners() {
            if (this._linearAdAdapter)
                for (var _e53 in this._eventListenerMap) {
                    this._linearAdAdapter.on(_e53, this._eventListenerMap[_e53])
                }
        }
        ;
        _proto58._removeVPAIDEventListeners = function _removeVPAIDEventListeners() {
            if (this._linearAdAdapter)
                for (var _e54 in this._eventListenerMap) {
                    this._linearAdAdapter.off(_e54, this._eventListenerMap[_e54])
                }
        }
        ;
        _proto58._onVPAIDAdLoaded = function _onVPAIDAdLoaded() {
            G.c.info("VPAIDController._onVPAIDAdLoaded"),
            this._clearVpaidEventTimeout(Yi.AdLoaded),
            this._linearAdAdapter && (this._linearAdAdapter.setAdVolume(Kt.muted ? 0 : Kt.volume),
            this._linearAdAdapter.resizeAd(ni.width, ni.height, ni.externalViewMode)),
            Mi.currentAdUnit && Mi.currentAdUnit.playlist && (pt.adUserState = Mi.currentAdUnit.playlist.userState),
            An.adState = dt.AD_STATES.LOADED,
            this.startAd(),
            this.broadcast(Yi.AdLoaded)
        }
        ;
        _proto58._onVPAIDAdStarted = function _onVPAIDAdStarted() {
            G.c.info("VPAIDController._onVPAIDAdStarted"),
            An.adState = dt.AD_STATES.PLAYING,
            this._clearVpaidEventTimeout(Yi.AdStarted),
            this._startUpdateAdProgress(),
            this.broadcast(Yi.AdStarted)
        }
        ;
        _proto58._onVPAIDAdEnded = function _onVPAIDAdEnded() {
            if (G.c.info("VPAIDController._onVPAIDAdEnded"),
            An.adState = dt.AD_STATES.STOPPED,
            Mi.isAdSessionSampled) {
                var _e55 = Mi.currentAdUnit;
                se.reportToPlayerIndex(ne.Type.SAMPLE_AD_STOPPED, {
                    pod: Mi.currentPod,
                    slot: Mi.currentSlot,
                    adUnitId: _e55.adUnitId,
                    adUnitType: _e55.adUnitType,
                    duration: this.getAdDuration(),
                    linearAdAdapterType: An.linearType
                })
            }
            this.dispose()
        }
        ;
        _proto58._onVPAIDAdStopped = function _onVPAIDAdStopped() {
            G.c.info("VPAIDController._onVPAIDAdStopped"),
            this._clearVpaidEventTimeout(Yi.AdStopped),
            this._onVPAIDAdEnded(),
            this.broadcast(Yi.AdStopped)
        }
        ;
        _proto58._onVPAIDAdSkipped = function _onVPAIDAdSkipped() {
            G.c.info("VPAIDController._onVPAIDAdSkipped"),
            this._onVPAIDAdEnded(),
            this.broadcast(Yi.AdSkipped)
        }
        ;
        _proto58._onVPAIDAdSkippableStateChange = function _onVPAIDAdSkippableStateChange() {
            Mi.update({
                currentAdSkippableState: this._linearAdAdapter.getAdSkippableState()
            }),
            this.broadcast(Yi.AdSkippableStateChange)
        }
        ;
        _proto58._onVPAIDAdSizeChange = function _onVPAIDAdSizeChange() {
            this.broadcast(Yi.AdSizeChange)
        }
        ;
        _proto58._onVPAIDAdLinearChange = function _onVPAIDAdLinearChange() {
            this.broadcast(Yi.AdLinearChange)
        }
        ;
        _proto58._onVPAIDAdDurationChange = function _onVPAIDAdDurationChange() {
            this.broadcast(Yi.AdDurationChange)
        }
        ;
        _proto58._onVPAIDAdExpandedChange = function _onVPAIDAdExpandedChange() {
            this.broadcast(Yi.AdExpandedChange)
        }
        ;
        _proto58._onVPAIDAdRemainingTimeChange = function _onVPAIDAdRemainingTimeChange() {
            this.broadcast(Yi.AdRemainingTimeChange)
        }
        ;
        _proto58._onVPAIDAdVolumeChange = function _onVPAIDAdVolumeChange() {
            this.broadcast(Yi.AdVolumeChange)
        }
        ;
        _proto58._onVPAIDAdImpression = function _onVPAIDAdImpression() {
            this.broadcast(Yi.AdImpression);
            var e = Mi.currentAdUnit ? Mi.currentAdUnit.impressions : null;
            if (e) {
                for (var _iterator5 = _createForOfIteratorHelperLoose(e), _step5; !(_step5 = _iterator5()).done; ) {
                    var _t38 = _step5.value;
                    Q.pingImage(_t38, !0)
                }
            }
        }
        ;
        _proto58._onVPAIDAdVideoStart = function _onVPAIDAdVideoStart() {
            G.c.info("VPAIDController._onVPAIDAdVideoStart"),
            this.broadcast(Yi.AdVideoStart)
        }
        ;
        _proto58._onVPAIDAdVideoFirstQuartile = function _onVPAIDAdVideoFirstQuartile() {
            this.broadcast(Yi.AdVideoFirstQuartile)
        }
        ;
        _proto58._onVPAIDAdVideoMidpoint = function _onVPAIDAdVideoMidpoint() {
            this.broadcast(Yi.AdVideoMidpoint)
        }
        ;
        _proto58._onVPAIDAdVideoThirdQuartile = function _onVPAIDAdVideoThirdQuartile() {
            this._adVideoThirdQuartilePassed = !0,
            this.broadcast(Yi.AdVideoThirdQuartile)
        }
        ;
        _proto58._onVPAIDAdVideoComplete = function _onVPAIDAdVideoComplete() {
            this.broadcast(Yi.AdVideoComplete)
        }
        ;
        _proto58._onVPAIDAdClickThru = function _onVPAIDAdClickThru() {}
        ;
        _proto58._onVPAIDAdInteraction = function _onVPAIDAdInteraction() {
            this.broadcast(Yi.AdInteraction)
        }
        ;
        _proto58._onVPAIDAdUserAcceptInvitation = function _onVPAIDAdUserAcceptInvitation() {
            this.broadcast(Yi.AdUserAcceptInvitation)
        }
        ;
        _proto58._onVPAIDAdUserMinimize = function _onVPAIDAdUserMinimize() {
            this.broadcast(Yi.AdUserMinimize)
        }
        ;
        _proto58._onVPAIDAdUserClose = function _onVPAIDAdUserClose() {
            this.broadcast(Yi.AdUserClose)
        }
        ;
        _proto58._onVPAIDAdPaused = function _onVPAIDAdPaused() {
            An.adState = dt.AD_STATES.PAUSED,
            this.broadcast(Yi.AdPaused)
        }
        ;
        _proto58._onVPAIDAdPlaying = function _onVPAIDAdPlaying() {
            An.adState = dt.AD_STATES.PLAYING,
            this.broadcast(Yi.AdPlaying)
        }
        ;
        _proto58._onVPAIDAdError = function _onVPAIDAdError(e) {
            G.c.info("VPAIDController._onVPAIDAdError"),
            G.c.error(this._linearAdAdapterType, e);
            var t = Mi.currentAdUnit
              , i = {
                adUnitId: t && t.adUnitId,
                adUnitType: t && t.adUnitType,
                params: e,
                rawVAST: t && t.playlist && _i.shrinkVAST(t.playlist.rawVAST)
            };
            se.reportToPlayerIndex(ne.Type.AD_ERROR_EVENT_WHEN_PLAYBACK, i),
            this._stopUpdateAdProgress(),
            this.broadcast(Yi.AdError)
        }
        ;
        _proto58._onVPAIDAdLog = function _onVPAIDAdLog() {
            this.broadcast(Yi.AdLog)
        }
        ;
        _proto58._onVPAIDAdSelectorChoice = function _onVPAIDAdSelectorChoice(e) {
            Mi.update({
                adSelectorOption: e.group_id
            }),
            this.broadcast(Yi.HULU.AdSelectorChoice, e)
        }
        ;
        _proto58._onVPAIDCdnChange = function _onVPAIDCdnChange() {
            this.broadcast(Yi.HULU.CdnChange)
        }
        ;
        _proto58._onVPAIDPauseVideoPlayback = function _onVPAIDPauseVideoPlayback() {
            this.broadcast(Yi.HULU.PauseVideoPlayback)
        }
        ;
        _proto58._onVPAIDResumeVideoPlayback = function _onVPAIDResumeVideoPlayback() {
            this.broadcast(Yi.HULU.ResumeVideoPlayback)
        }
        ;
        _proto58._onVPAIDTrailerSelectorChoice = function _onVPAIDTrailerSelectorChoice(e) {
            if (e.opt_in) {
                var _e56 = Mi.currentAdUnit;
                Mi.update({
                    videoTrailerSelectorAdUnitId: _e56.adUnitId
                }),
                _e56.playlist.userState += _e56.freePassToken,
                pt.adUserState = _e56.playlist.userState
            }
            this.broadcast(Yi.HULU.TrailerSelectorChoice, e)
        }
        ;
        _proto58._onVPAIDStreamErrorUpdate = function _onVPAIDStreamErrorUpdate() {
            this.broadcast(Yi.HULU.StreamErrorUpdate)
        }
        ;
        _proto58._onVPAIDAdStoppableStateChange = function _onVPAIDAdStoppableStateChange() {
            Mi.update({
                currentAdSkippableState: this._linearAdAdapter.getAdStoppableState()
            }),
            this.broadcast(Yi.HULU.AdStoppableStateChange)
        }
        ;
        _proto58._onVPAIDExitWithAdFree = function _onVPAIDExitWithAdFree(e) {
            this.broadcast(Yi.HULU.ExitWithAdFree, e)
        }
        ;
        _proto58._onVPAIDExitWithSkipAdBreak = function _onVPAIDExitWithSkipAdBreak() {
            this.broadcast(Yi.HULU.ExitWithSkipAdBreak)
        }
        ;
        _proto58._onVPAIDExitSelectWatch = function _onVPAIDExitSelectWatch() {
            this.broadcast(Yi.HULU.ExitSelectWatch)
        }
        ;
        _proto58._onVPAIDExitAutoWatch = function _onVPAIDExitAutoWatch() {
            this.broadcast(Yi.HULU.ExitAutoWatch)
        }
        ;
        _proto58._onVPAIDExitAfterOptIn = function _onVPAIDExitAfterOptIn() {
            this.broadcast(Yi.HULU.ExitAfterOptIn)
        }
        ;
        _proto58._startUpdateAdProgress = function _startUpdateAdProgress() {
            this._adProgressTimerId = setInterval(this._updateAdProgress, 200)
        }
        ;
        _proto58._stopUpdateAdProgress = function _stopUpdateAdProgress() {
            clearInterval(this._adProgressTimerId)
        }
        ;
        _proto58.getAdDuration = function getAdDuration() {
            var e = 0;
            return this._linearAdAdapter && (e = this._linearAdAdapter.getAdDuration(),
            (isNaN(e) || e < 2) && (e = Mi.currentAdUnit.linear.duration)),
            e
        }
        ;
        _proto58.getAdRemainingTime = function getAdRemainingTime() {
            var e = 0;
            return this._linearAdAdapter && (e = this._linearAdAdapter.getAdRemainingTime(),
            e <= 0 && (e = this._adVideoThirdQuartilePassed ? 0 : this.getAdDuration())),
            e
        }
        ;
        _proto58._updateAdProgress = function _updateAdProgress() {
            Mi.update({
                currentAdRemainingTime: this.getAdRemainingTime()
            }),
            this.broadcast(Yi.HULU.AdProgressUpdate)
        }
        ;
        _proto58._resumeAd = function _resumeAd() {
            this._linearAdAdapter && this._linearAdAdapter.resumeAd()
        }
        ;
        _proto58._pauseAd = function _pauseAd() {
            this._linearAdAdapter && this._linearAdAdapter.pauseAd()
        }
        ;
        return _class25
    }(ji));
    var Fn = "hulu:client:playback:metadata:browse:upnext:error";
    var Hn = new (function(_m22) {
        _inheritsLoose(_class26, _m22);
        function _class26() {
            return _m22.call(this) || this
        }
        var _proto59 = _class26.prototype;
        _proto59.load = function load() {
            this._refreshTimer = setTimeout(this.updateUpNext.bind(this), 1e3)
        }
        ;
        _proto59.reset = function reset() {
            this.set({}),
            clearTimeout(this._refreshTimer)
        }
        ;
        _proto59.updateUpNext = function updateUpNext() {
            var _this98 = this;
            clearTimeout(this._refreshTimer);
            var e = it(function() {
                return vt.requestUpNext().then(function(e) {
                    return _this98._parseFliptrayData(e)
                })
            }, function() {
                return "hulu:metadata:browse:upnext:error"
            });
            return e.catch(function(e) {
                qe.error = e
            }).finally(function() {
                var e = Rt.nextEntity
                  , t = 6e5;
                null == e ? _this98._refreshTimer = setTimeout(_this98.updateUpNext.bind(_this98), t) : e.isLive && (t = Math.min(e.bundle.availability.endDate.getTime() - Date.now(), t),
                _this98._refreshTimer = setTimeout(_this98.updateUpNext.bind(_this98), t))
            }),
            e
        }
        ;
        _proto59.findNextEntityIndex = function findNextEntityIndex() {
            return this._data.upNextList && Rt.nextEntity ? this._data.upNextList.findIndex(function(e) {
                return e.id == Rt.nextEntity.id
            }) : -1
        }
        ;
        _proto59._parseFliptrayData = function _parseFliptrayData(e) {
            var t = e.items;
            (null == t || null == t.length || t.length < 2) && this._throw(Fn, "fliptray:no playable_content");
            var i = t[1];
            Rt.nextEntity = i;
            var n = Rt.nextEntity;
            null == n ? this._throw(Fn, "fliptray:entity type not supported") : null == n.bundle ? this._throw(Fn, "fliptray:entity bundle missing") : null == n.bundle.availability && this._throw(Fn, "fliptray:bundle availability missing");
            var r = t.slice(1).map(function(e) {
                return Rt.parseEntityFromRawData(e)
            });
            this.update({
                upNextList: r,
                primaryCollection: {
                    id: e.id,
                    entities: e.items.map(function(e) {
                        return e.id
                    }).join("|")
                }
            })
        }
        ;
        _proto59._throw = function _throw(e, t) {
            var i = new Error(t);
            throw Ze(i, e),
            i.message = t,
            i
        }
        ;
        _createClass(_class26, [{
            key: "upNextList",
            get: function get() {
                return this._data.upNextList
            }
        }, {
            key: "primaryCollection",
            get: function get() {
                return this._data.primaryCollection
            }
        }, {
            key: "secondaryCollection",
            get: function get() {
                return null
            }
        }, {
            key: "nextUpnextEntity",
            get: function get() {
                var e = this.findNextEntityIndex();
                return e >= 0 ? this.upNextList[e + 1] : null
            }
        }, {
            key: "previousUpnextEntity",
            get: function get() {
                var e = this.findNextEntityIndex();
                return e >= 0 ? this.upNextList[e - 1] : null
            }
        }]);
        return _class26
    }(m));
    var jn = new (function(_ji7) {
        _inheritsLoose(_class27, _ji7);
        function _class27() {
            var _this99;
            _this99 = _ji7.call(this) || this,
            _this99._cts = new G.a;
            return _this99
        }
        var _proto60 = _class27.prototype;
        _proto60.init = function init() {
            this.onBroadcast(Oi.TIME_UPDATE, this.onTimeUpdate.bind(this)),
            this.onBroadcast(Oi.ENDED, this.onEnded.bind(this)),
            this.onBroadcast("ContinuousPlayController.playNext", this.onPlayNext.bind(this)),
            this.onBroadcast("ContinuousPlayController.reset", this._onReset.bind(this))
        }
        ;
        _proto60.onTimeUpdate = function onTimeUpdate() {
            if (Rt.entity && Rt.entity.isLive) {
                var _e57 = Kt.currentTime
                  , _t39 = Kt.duration;
                if (rn.handleLiveProgress(_e57, _t39, this._cts.token),
                _e57 >= _t39)
                    if (Rt.nextEntity && !this._rolloverActionPromise)
                        this._transitToNextProgram();
                    else {
                        var _t40 = Rt.entity.bundle.availability.startDate;
                        Rt.updateBundleEndTime(_t40.getTime() + 1e3 * _e57)
                    }
            }
        }
        ;
        _proto60.onEnded = function onEnded() {
            W.IS_NONSUB && this.onPlayNext({
                reason: Dt
            })
        }
        ;
        _proto60.onPlayNext = function onPlayNext(_ref8) {
            var e = _ref8.reason
              , t = _ref8.entity;
            t && (Rt.nextEntity = t),
            this.broadcast("PlayerController.continuousplay", {
                reason: e
            })
        }
        ;
        _proto60._transitToNextProgram = function _transitToNextProgram() {
            var _this100 = this;
            var e = this._cts.token;
            this._rolloverActionPromise = rn.getRolloverAction(e),
            this._rolloverActionPromise.then(function(t) {
                if (!e.isCancellationRequested) {
                    switch (t) {
                    case Ut.RolloverActions.SIMPLE:
                    case Ut.RolloverActions.SIMPLE_NONLINEAR:
                        _this100.broadcastBefore("PlayerController.rollover", {
                            action: t
                        }),
                        $.update({
                            eabId: Rt.nextEntity.bundle.eabId
                        }),
                        Rt.entity = Rt.nextEntity,
                        Rt.nextEntity = null,
                        Kt.duration = Rt.entity.bundle.duration,
                        Bt.update({
                            startTime: Rt.entity.bundle.availability.startDate.getTime() / 1e3
                        }),
                        Hn.reset(),
                        rn.reset(),
                        ei.playlist = ei.upnextPlaylist,
                        ei.upnextPlaylist = null,
                        Kt.update({
                            recordingOffset: ei.playlist.recordingOffset
                        }),
                        on.stopPoll(),
                        on.startPoll(),
                        _this100.broadcast("PlayerController.rollover", {
                            action: t
                        });
                        break;
                    case Ut.RolloverActions.RELOAD:
                        _this100.onPlayNext({
                            reason: Dt
                        });
                    }
                    _this100._rolloverActionPromise = null
                }
            }, function(t) {
                e.isCancellationRequested || (qe.error = t,
                _this100._rolloverActionPromise = null)
            })
        }
        ;
        _proto60._onReset = function _onReset() {
            this._cts.cancel(),
            this._cts = new G.a
        }
        ;
        return _class27
    }(ji));
    var Wn = new (function(_ji8) {
        _inheritsLoose(_class28, _ji8);
        function _class28() {
            return _ji8.apply(this, arguments) || this
        }
        var _proto61 = _class28.prototype;
        _proto61.init = function init() {
            this.onBroadcast(qi.CAN_PLAY, this._onIntroPlayerReady.bind(this)),
            this.onBroadcast(qi.PAUSE, this._onIntroPlayerPause.bind(this)),
            this.onBroadcast(qi.PLAY, this._onIntroPlayerPlay.bind(this)),
            this.onBroadcast(Oi.CAN_PLAY, this._onMainPlayerReady.bind(this)),
            this.onBroadcast(Oi.PAUSE, this._onMainPlayerPause.bind(this)),
            this.onBroadcast(Oi.PLAY, this._onMainPlayerPlay.bind(this)),
            this.onBroadcast(Yi.AdPaused, this._onAdPlayerPause.bind(this)),
            this.onBroadcast(Yi.AdPlaying, this._onAdPlayerPlay.bind(this)),
            this.onBroadcast(Yi.AdStarted, this._onAdPlayerReady.bind(this))
        }
        ;
        _proto61._onIntroPlayerReady = function _onIntroPlayerReady() {
            _n.isIntroPlayerActive && (_n.isReady = !0)
        }
        ;
        _proto61._onIntroPlayerPause = function _onIntroPlayerPause() {
            _n.isIntroPlayerActive && (_n.isPaused = !0)
        }
        ;
        _proto61._onIntroPlayerPlay = function _onIntroPlayerPlay() {
            _n.isIntroPlayerActive && (_n.isPaused = !1)
        }
        ;
        _proto61._onMainPlayerReady = function _onMainPlayerReady() {
            _n.isMainPlayerActive && (_n.isReady = !0)
        }
        ;
        _proto61._onMainPlayerPause = function _onMainPlayerPause() {
            _n.isMainPlayerActive && (_n.isPaused = !0)
        }
        ;
        _proto61._onMainPlayerPlay = function _onMainPlayerPlay() {
            _n.isMainPlayerActive && (_n.isPaused = !1)
        }
        ;
        _proto61._onAdPlayerReady = function _onAdPlayerReady() {
            _n.isAdPlayerActive && (_n.isReady = !0)
        }
        ;
        _proto61._onAdPlayerPause = function _onAdPlayerPause() {
            _n.isAdPlayerActive && (_n.isPaused = !0)
        }
        ;
        _proto61._onAdPlayerPlay = function _onAdPlayerPlay() {
            _n.isAdPlayerActive && (_n.isPaused = !1)
        }
        ;
        return _class28
    }(ji));
    var Kn = function() {
        var e = new f;
        return ei.onUpdated(function(t, i, n) {
            n.playlist && e.emit("playlistchange")
        }),
        {
            addEventListener: e.on.bind(e),
            removeEventListener: e.off.bind(e),
            getPlaylist: function getPlaylist() {
                return ei.playlist
            }
        }
    };
    var qn = function() {
        var e = new f;
        return Mi.onUpdated(function(t, i, n) {
            n.currentAdSkippableState && (r = t.currentAdSkippableState,
            e.emit("skippablechange", r));
            var r
        }),
        {
            addEventListener: e.on.bind(e),
            removeEventListener: e.off.bind(e),
            getFirstAdBreakByTime: function getFirstAdBreakByTime(e) {
                return Wt.findContainingBreak(e)
            },
            isForcedHideOverlays: function isForcedHideOverlays() {
                return !An.needControlBar
            },
            getAdState: function getAdState() {
                return An.adState
            },
            getAdUnitType: function getAdUnitType() {
                return An.linearType
            },
            isManifestBreaksUsed: function isManifestBreaksUsed() {
                return Wt.useManifestBreaks
            },
            getAdBreaks: function getAdBreaks() {
                return Wt.adBreaks
            },
            getAdPlaylist: function getAdPlaylist() {
                return Mi.currentAdPlaylist
            },
            getAdUnit: function getAdUnit() {
                return Mi.currentAdUnit
            },
            isAdUnitBrandedSlate: function isAdUnitBrandedSlate() {
                return An.isAdBrandedSlate
            },
            isAdUnitUiModeHidden() {
                var e = Wt.currentAdUnit;
                return !!e && "hidden" === e.adUIMode
            },
            getAdRemainingTime: function getAdRemainingTime() {
                return Mi.currentAdRemainingTime
            },
            getCountdownState: function getCountdownState() {
                return Mi.countdownParams
            }
        }
    };
    var Yn = function() {
        return {
            getTotalPlayedTime: function getTotalPlayedTime() {
                return Kt.totalPlayedTime
            }
        }
    };
    var Qn = function(e) {
        return {
            getCdn: function getCdn() {
                return Kt.cdn
            },
            getBitrate: function getBitrate() {
                return Kt.bitrate
            },
            getManifest: function getManifest() {
                return e().manifest
            },
            getMaxBitrate: function getMaxBitrate() {
                return Kt.maxBitrate
            },
            getVideoFrameRate: function getVideoFrameRate() {
                return Kt.videoFrameRate
            }
        }
    };
    var $n = En;
    function Xn() {
        return $n.physicalPlayer
    }
    var Jn = function() {
        function Jn() {
            this.playlistManager = Kn(),
            this.adsManager = qn(),
            this.captionManager = {
                getCurrentOutboundCaption: function getCurrentOutboundCaption(e) {
                    return e ? mn.getCaption(Kt.currentTime, e) : ""
                },
                get isTranscriptsDefaultOn() {
                    return mn.transcriptsDefaultOn
                },
                get allLanguages() {
                    return mn.allLanguages
                }
            },
            this.playbackProperty = Qn(Xn),
            this.contentProperty = Yn(Xn)
        }
        var _proto62 = Jn.prototype;
        _proto62.init = function init() {
            We.init(),
            Tn.init(),
            Bn.init(),
            jn.init(),
            Wn.init(),
            En.init()
        }
        ;
        _proto62.attachToContentPlayer = function attachToContentPlayer(e, t) {
            un.init(e, t)
        }
        ;
        _proto62.attachToAdPlayer = function attachToAdPlayer(e, t) {
            $i.init(e, t)
        }
        ;
        _proto62.attachToIntroPlayer = function attachToIntroPlayer(e) {
            en.init(e)
        }
        ;
        _proto62.load = function load(e, t) {
            return $n.load(e, t)
        }
        ;
        _proto62.play = function play() {
            $n.play()
        }
        ;
        _proto62.pause = function pause() {
            $n.pause()
        }
        ;
        _proto62.seek = function seek(e) {
            $n.seek(e)
        }
        ;
        _proto62.forcedSeek = function forcedSeek(e) {
            $n.forcedSeek(e)
        }
        ;
        _proto62.trySeek = function trySeek(e) {
            return Vi.getSeekableTarget(e)
        }
        ;
        _proto62.stopVideo = function stopVideo(e) {
            if (e === void 0) {
                e = {}
            }
            $n.stopVideo({
                reason: e.reason
            })
        }
        ;
        _proto62.continuousPlay = function continuousPlay(_ref9) {
            var e = _ref9.reason
              , t = _ref9.entity;
            $n.continuousPlay({
                reason: e,
                entity: t
            })
        }
        ;
        _proto62.stopVPAID = function stopVPAID() {
            $n.stopVPAID()
        }
        ;
        _proto62.pauseVPAID = function pauseVPAID() {
            $n.pauseVPAID()
        }
        ;
        _proto62.clickThroughVPAID = function clickThroughVPAID(e) {
            $n.clickThroughVPAID(e)
        }
        ;
        _proto62.switchAudioTrack = function switchAudioTrack(e) {
            $n.switchAudioTrack(e)
        }
        ;
        _proto62.setMaxBitrate = function setMaxBitrate(e) {
            $n.setMaxBitrate(e)
        }
        ;
        _proto62.setCaptionStyle = function setCaptionStyle(e) {
            $n.setCaptionStyle(e)
        }
        ;
        _proto62.refreshCaption = function refreshCaption() {
            $n.refreshCaption()
        }
        ;
        _proto62.addEventListener = function addEventListener(e, t) {
            hn.addEventListener(e, t)
        }
        ;
        _proto62.removeEventListener = function removeEventListener(e, t) {
            hn.removeEventListener(e, t)
        }
        ;
        _proto62.trackUserAction = function trackUserAction(e) {
            hn.dispatchEvent(xi.USER_ACTION, hn.wrapEvent(e))
        }
        ;
        _proto62.setErrorManagerCondition = function setErrorManagerCondition(e) {
            qe.backgroundCondition = e
        }
        ;
        _proto62.setPlayerResolution = function setPlayerResolution(e) {
            $n.setPlayerResolution(_objectSpread({}, e))
        }
        ;
        _createClass(Jn, [{
            key: "physicalPlayer",
            get: function get() {
                return $n.physicalPlayer
            }
        }, {
            key: "muted",
            set: function set(e) {
                $n.muted = e
            },
            get: function get() {
                return Kt.muted
            }
        }, {
            key: "volume",
            set: function set(e) {
                $n.volume = e
            },
            get: function get() {
                return Kt.volume
            }
        }, {
            key: "currentTime",
            get: function get() {
                return Kt.currentTime
            }
        }, {
            key: "autoplay",
            set: function set(e) {
                Ui.autoPlayUpNext = e
            },
            get: function get() {
                return Ui.autoPlayUpNext
            }
        }, {
            key: "seekableWindow",
            get: function get() {
                return Kt.seekableWindow
            }
        }, {
            key: "isVideoStopped",
            get: function get() {
                return $n.isVideoStopped
            }
        }, {
            key: "src",
            get: function get() {
                return $n.physicalPlayer.src || $n.physicalPlayer.currentSrc
            }
        }, {
            key: "currentSrc",
            get: function get() {
                return $n.physicalPlayer.currentSrc
            }
        }, {
            key: "initialTime",
            get: function get() {
                return $n.physicalPlayer.initialTime
            }
        }, {
            key: "paused",
            get: function get() {
                return _n.isPaused
            }
        }, {
            key: "seeking",
            get: function get() {
                return $n.physicalPlayer.seeking
            }
        }, {
            key: "ended",
            get: function get() {
                return $n.physicalPlayer.ended
            }
        }, {
            key: "duration",
            get: function get() {
                return Kt.duration
            }
        }, {
            key: "buffered",
            get: function get() {
                return $n.physicalPlayer.buffered
            }
        }, {
            key: "networkState",
            get: function get() {
                return $n.physicalPlayer.networkState
            }
        }, {
            key: "error",
            get: function get() {
                return $n.physicalPlayer.error
            }
        }, {
            key: "bufferingState",
            get: function get() {
                return $n.physicalPlayer.bufferingState
            }
        }, {
            key: "audioTracks",
            get: function get() {
                return $n.physicalPlayer.audioTracks
            }
        }, {
            key: "videoTracks",
            get: function get() {
                return $n.physicalPlayer.videoTracks
            }
        }, {
            key: "mediaType",
            get: function get() {
                return Kt.mediaType
            }
        }]);
        return Jn
    }();
    Jn.Events = xi;
    var Zn = new Jn;
    var er = window.ADB && window.ADB.va.MediaHeartbeat;
    var tr = new (function() {
        function _class29() {}
        var _proto63 = _class29.prototype;
        _proto63.reset = function reset() {
            this._timeToPlaybackStart = -1,
            this._burnedInAdBreakIndex = -1,
            this._contentStarted = !1,
            this._adStartFired = !1,
            this._adPodStartFired = !1
        }
        ;
        _proto63.init = function init() {
            this._mediaHeartbeat = this._createAgent(),
            Zn.addEventListener(xi.WILL_LOAD_START, this.onWillLoadStart.bind(this)),
            Zn.addEventListener(xi.STOP, this.onStop.bind(this)),
            Zn.addEventListener(xi.ENDED, this.onEnded.bind(this)),
            Zn.addEventListener(xi.PLAY, this.onPlay.bind(this)),
            Zn.addEventListener(xi.PAUSE, this.onPause.bind(this)),
            Zn.addEventListener(xi.QUALITY_CHANGE, this.onQualityChange.bind(this)),
            Zn.addEventListener(xi.AD_BREAK_START, this.onAdBreakStart.bind(this)),
            Zn.addEventListener(xi.AD_BREAK_END, this.onAdBreakEnd.bind(this)),
            Zn.addEventListener(xi.AD_POD_START, this.onAdPodStart.bind(this)),
            Zn.addEventListener(xi.AD_POD_END, this.onAdPodEnd.bind(this)),
            Zn.addEventListener(xi.SEEKING, this.onSeekStart.bind(this)),
            Zn.addEventListener(xi.SEEKED, this.onSeekEnd.bind(this)),
            Zn.addEventListener(xi.REBUFFER_START, this.onRebufferStart.bind(this)),
            Zn.addEventListener(xi.REBUFFER_END, this.onRebufferEnd.bind(this)),
            Zn.addEventListener(xi.SEGMENT_START, this.onSegmentStart.bind(this)),
            Zn.addEventListener(xi.SEGMENT_END, this.onSegmentEnd.bind(this)),
            this.reset()
        }
        ;
        _proto63._createAgent = function _createAgent() {
            var _this101 = this;
            var e = new window.Visitor("0A19F13A598372E90A495D62@AdobeOrg")
              , t = pt.externalId;
            e.trackingServer = "hulu.sc.omtrdc.net",
            e.setCustomerIDs({
                userId: {
                    id: t
                },
                puuid: {
                    id: $.computerGuid
                }
            });
            var i = new window.AppMeasurement;
            i.visitor = e,
            i.trackingServer = "hulu.sc.omtrdc.net",
            i.account = "huluvideo",
            i.pageName = "PlayerWorkflow",
            i.charSet = "UTF-8",
            i.visitorID = t;
            var n = new window.ADB.va.MediaHeartbeatConfig;
            n.trackingServer = W.IS_PROD ? "hulu.hb.omtrdc.net" : "hb-fa-stage.omtrdc.net",
            n.playerName = "Site Curiosity Player",
            n.channel = "all_media_partners",
            n.debugLogging = !W.IS_PROD,
            n.appVersion = W.APP_VERSION,
            n.ssl = !0,
            n.ovp = "hulu";
            var r = new window.ADB.va.MediaHeartbeatDelegate;
            return r.getQoSInfo = function() {
                return _this101._getQosInfo()
            }
            ,
            r.getCurrentPlaybackTime = function() {
                return _this101._getCurrentPlaybackTime()
            }
            ,
            new er(r,n,i)
        }
        ;
        _proto63._getCurrentPlaybackTime = function _getCurrentPlaybackTime() {
            return Math.max(Zn.currentTime, 0)
        }
        ;
        _proto63._getQosInfo = function _getQosInfo() {
            return er.createQoSObject(Math.max(1024 * Zn.playbackProperty.bitrate, 0), Math.max(this._timeToPlaybackStart, 0), Math.max(Kt.videoFrameRate, 0), 0)
        }
        ;
        _proto63.onWillLoadStart = function onWillLoadStart() {
            if (!this.isTrackingAllowed)
                return;
            var e = Rt.entity
              , t = Kt.isLive ? er.StreamType.LIVE : er.StreamType.VOD
              , i = e.name || e.seriesName || "unknown"
              , n = er.createMediaObject(i, e.bundle.eabId, e.duration, t)
              , r = this.createStandardVideoMetadata();
            n.setValue(er.MediaObjectKey.StandardVideoMetadata, r);
            var s = {
                "device.platform": W.DEVICE_PLATFORM,
                "device.name": W.DEVICE_PLATFORM,
                "device.appname": "Hulu",
                "media.gated": !1,
                "page.rsid": null,
                "media.league": e.leagueName,
                "media.video.id": $.assetId,
                deviceadid: $.deviceAdId
            };
            this._mediaHeartbeat.trackSessionStart(n, s)
        }
        ;
        _proto63.createStandardVideoMetadata = function createStandardVideoMetadata() {
            var e = {}
              , t = Rt.entity
              , i = er.VideoMetadataKeys;
            return t instanceof St && (e[i.SHOW] = t.seriesName,
            e[i.SEASON] = t.season,
            e[i.EPISODE] = t.number),
            e[i.SHOW_TYPE] = this.showType,
            e[i.ASSET_ID] = t.getExternalIdByNamespace("tms") || "",
            e[i.GENRE] = t.genreNames.join(),
            t.premiereDate && (e[i.FIRST_AIR_DATE] = t.premiereDate),
            t.rating && (e[i.RATING] = t.rating),
            e[i.NETWORK] = t.bundle.networkName,
            e[i.STREAM_FORMAT] = Q.isFairPlayHlsSupported() ? "hls" : "dash",
            e[i.DAY_PART] = this.periodName,
            e[i.MVPD] = "Hulu",
            e
        }
        ;
        _proto63.onPlay = function onPlay() {
            this.isTrackingAllowed && this._mediaHeartbeat.trackPlay()
        }
        ;
        _proto63.onPause = function onPause() {
            this.isTrackingAllowed && this._mediaHeartbeat.trackPause()
        }
        ;
        _proto63.onSeekStart = function onSeekStart() {
            this.isTrackingAllowed && this._mediaHeartbeat.trackEvent(er.Event.SeekStart)
        }
        ;
        _proto63.onSeekEnd = function onSeekEnd() {
            this.isTrackingAllowed && this._mediaHeartbeat.trackEvent(er.Event.SeekComplete)
        }
        ;
        _proto63.onRebufferStart = function onRebufferStart(e) {
            this.isTrackingAllowed && "rebuffering" === e.detail.bufferType && this._mediaHeartbeat.trackEvent(er.Event.BufferStart)
        }
        ;
        _proto63.onRebufferEnd = function onRebufferEnd(e) {
            this.isTrackingAllowed && "rebuffering" === e.detail.bufferType && this._mediaHeartbeat.trackEvent(er.Event.BufferComplete)
        }
        ;
        _proto63.onQualityChange = function onQualityChange() {
            this.isTrackingAllowed && this._mediaHeartbeat.trackEvent(er.Event.BitrateChange)
        }
        ;
        _proto63.onSegmentStart = function onSegmentStart(e) {
            this._timeToPlaybackStart < 0 && (this._timeToPlaybackStart = e.detail.joinTime),
            Kt.mediaType == Ft.CONTENT && (this._contentStarted = !0,
            this._onContentStart())
        }
        ;
        _proto63.onSegmentEnd = function onSegmentEnd() {
            this.isTrackingAllowed && this._contentStarted && Zn.mediaType !== Ft.CONTENT && (this._onContentEnd(),
            this._contentStarted = !1)
        }
        ;
        _proto63._onContentStart = function _onContentStart() {
            if (!this.isTrackingAllowed)
                return;
            var e = this.chapterIndex
              , t = Kt.chapterPosition
              , i = this.contentChapters[e]
              , n = i.endTime - i.startTime
              , r = Bt.playerToUx(i.startTime)
              , s = er.createChapterObject("chapter", t, n, r);
            this._mediaHeartbeat.trackEvent(er.Event.ChapterStart, s)
        }
        ;
        _proto63._onContentEnd = function _onContentEnd() {
            this.isTrackingAllowed && this._mediaHeartbeat.trackEvent(er.Event.ChapterComplete)
        }
        ;
        _proto63.onAdPodStart = function onAdPodStart() {
            if (!this.isTrackingAllowed)
                return;
            var e = "mid-roll"
              , t = null;
            if (Zn.mediaType === Ft.BURNED_IN_AD)
                t = Zn.adsManager.getFirstAdBreakByTime(Zn.currentTime);
            else {
                var _i34 = Mi.currentPod;
                t = Zn.adsManager.getAdBreaks()[_i34],
                0 === _i34 || 1 === _i34 ? e = "pre-roll" : t.startTime >= Zn.duration && (e = "post-roll")
            }
            var i = er.createAdBreakObject(e, t.index + 1, t.startTime);
            this._mediaHeartbeat.trackEvent(er.Event.AdBreakStart, i),
            this._adPodStartFired = !0
        }
        ;
        _proto63.onAdPodEnd = function onAdPodEnd() {
            this.isTrackingAllowed && this._trackAdPodEnd()
        }
        ;
        _proto63.onAdBreakStart = function onAdBreakStart() {
            if (!this.isTrackingAllowed)
                return;
            var e = Mi.currentAdUnit || {};
            var t = e.linear && e.linear.duration;
            if (Zn.mediaType === Ft.BURNED_IN_AD) {
                var _i35 = Zn.adsManager.getFirstAdBreakByTime(Zn.currentTime)
                  , _n25 = _i35 && _i35.segments.find(function(e) {
                    return e.incomplete || Zn.currentTime <= e.end
                });
                t = _n25 && !_n25.incomplete ? _n25.end - _n25.start : 0,
                e.slotIndex = _n25 && _n25.index || 0;
                var _r13 = Mi.currentAdMetadata;
                _r13 ? (e.adTitle = _r13.name,
                e.adUnitId = _r13.unitId) : e.adTitle = "Hulu Live Event Ad"
            }
            var i = er.createAdObject(e.adTitle || "missing_name", e.adUnitId || "missing_id", (e.slotIndex || 0) + 1, t);
            this._mediaHeartbeat.trackEvent(er.Event.AdStart, i),
            this._adStartFired = !0
        }
        ;
        _proto63.onAdBreakEnd = function onAdBreakEnd() {
            this.isTrackingAllowed && this._trackAdComplete()
        }
        ;
        _proto63.onEnded = function onEnded() {
            this.isTrackingAllowed && (this._trackAdComplete(),
            this._trackAdPodEnd(),
            this._mediaHeartbeat.trackComplete(),
            this._mediaHeartbeat.trackSessionEnd(),
            this.reset())
        }
        ;
        _proto63.onStop = function onStop() {
            this.isTrackingAllowed && (this._adStartFired && this._trackAdSkip(),
            this._trackAdPodEnd(),
            this._mediaHeartbeat.trackSessionEnd(),
            this.reset())
        }
        ;
        _proto63._trackAdSkip = function _trackAdSkip() {
            this.isTrackingAllowed && (this._mediaHeartbeat.trackEvent(er.Event.AdSkip),
            this._adStartFired = !1)
        }
        ;
        _proto63._trackAdComplete = function _trackAdComplete() {
            this.isTrackingAllowed && this._adStartFired && (this._mediaHeartbeat.trackEvent(er.Event.AdComplete),
            this._adStartFired = !1)
        }
        ;
        _proto63._trackAdPodEnd = function _trackAdPodEnd() {
            this.isTrackingAllowed && this._adPodStartFired && (this._mediaHeartbeat.trackEvent(er.Event.AdBreakComplete),
            this._adPodStartFired = !1)
        }
        ;
        _createClass(_class29, [{
            key: "chapterIndex",
            get: function get() {
                return this.contentChapters.findIndex(function(e) {
                    return Bt.playerToApp(e.endTime) >= Zn.currentTime
                })
            }
        }, {
            key: "periodName",
            get: function get() {
                var e = [3, 8, 14, 18, 22]
                  , t = new Date
                  , i = t.getHours() <= e[e.length - 1] ? t.getHours() : t.getHours() - 24;
                return ["night", "morning", "day", "afternoon", "evening"][e.findIndex(function(e) {
                    return i <= e
                })]
            }
        }, {
            key: "showType",
            get: function get() {
                var e = Rt.entity
                  , t = e.type
                  , i = e.relationship;
                return "episode" === t || "movie" === t ? "0" : "extras" === t ? "trailer" === i ? "1" : "2" : "3"
            }
        }, {
            key: "contentChapters",
            get: function get() {
                return Array.prototype.filter.call(Kt.chapters, function(e) {
                    return e.type === Ni.CueType.CONTENT
                })
            }
        }, {
            key: "isTrackingAllowed",
            get: function get() {
                var e = at.adobeAgent && at.adobeAgent.enabled
                  , t = Rt.entity && Rt.entity.restrictionLevel !== ut.RestrictionLevels.KIDS_APPROPRIATE;
                return e && t
            }
        }, {
            key: "available",
            get: function get() {
                return Boolean(!W.IS_NONSUB && er)
            }
        }]);
        return _class29
    }());
    var ir = {
        _siteMethods: null,
        setApi(e) {
            this._siteMethods = e || {}
        },
        backToBrowse() {
            for (var _len4 = arguments.length, e = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
                e[_key4] = arguments[_key4]
            }
            return this._callSiteApi("backToBrowse", e)
        },
        backToWatch() {
            for (var _len5 = arguments.length, e = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
                e[_key5] = arguments[_key5]
            }
            return this._callSiteApi("backToWatch", e)
        },
        closePlayer() {
            for (var _len6 = arguments.length, e = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
                e[_key6] = arguments[_key6]
            }
            return this._callSiteApi("closePlayer", e)
        },
        navigateTo() {
            for (var _len7 = arguments.length, e = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
                e[_key7] = arguments[_key7]
            }
            return this._callSiteApi("navigateTo", e)
        },
        refreshMetadata() {
            for (var _len8 = arguments.length, e = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
                e[_key8] = arguments[_key8]
            }
            return this._callSiteApi("refresh", e)
        },
        showLoginForm() {
            for (var _len9 = arguments.length, e = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
                e[_key9] = arguments[_key9]
            }
            return this._callSiteApi("showLoginForm", e)
        },
        getHitInfo() {
            for (var _len10 = arguments.length, e = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
                e[_key10] = arguments[_key10]
            }
            return this._callSiteApi("getHitInfo", e)
        },
        refreshUserLogin() {
            return this._callSiteApi("refreshUserLogin")
        },
        goToGuide() {
            for (var _len11 = arguments.length, e = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {
                e[_key11] = arguments[_key11]
            }
            return this._callSiteApi("goToGuide", e)
        },
        _callSiteApi(e, t) {
            if (!this._siteMethods)
                return G.c.info("SiteApi is not ready yet"),
                null;
            if (!this._siteMethods[e])
                return G.c.error("SiteApi._callSiteApi: ", e, " not available"),
                null;
            try {
                return this._siteMethods[e].apply(null, t)
            } catch (t) {
                G.c.error("SiteApi._callSiteApi failed", e, t)
            }
        }
    };
    var nr = new (function() {
        function _class30() {}
        _createClass(_class30, [{
            key: "sourceId",
            get: function get() {
                return this.siteCommonContext.source_id || $.computerGuid || ""
            }
        }, {
            key: "commonProperty",
            get: function get() {
                this._env = W.IS_PROD ? "prod" : "stage";
                var e = screen.orientation ? screen.orientation.type : ""
                  , t = this.siteCommonContext;
                return this._data = {
                    app: "hulu 2.0",
                    app_component: "player",
                    application_instance_id: t.application_instance_id || $.sessionGuid || "",
                    app_session_id: t.app_session_id || ln.getAppSessionInfo("session_id") || "",
                    app_version: t.app_version || W.APP_VERSION,
                    app_visit_count: t.app_visit_count || ln.getAppSessionInfo("visit_count") || "",
                    attr_campaign: "",
                    attr_content: "",
                    attr_source: "",
                    build_number: t.build_number || W.COMPILED_VERSION,
                    cmc_id: "",
                    cmp_id: "",
                    connected_device_id: "",
                    connected_remote_type: "",
                    cp_identifier: "",
                    curr_page_type: t.curr_page_type || "",
                    curr_page_uri: t.curr_page_uri || "",
                    deejay_device_id: W.DEEJAY_DEVICE_ID,
                    device_ad_id: $.deviceAdId || "",
                    device_family: t.device_family || W.CLIENT,
                    device_manufacturer: t.device_manufacturer || "site",
                    device_model: W.BROWSER || t.device_model || "site",
                    device_os: t.device_os || W.OS,
                    device_platform: t.device_platform || W.DEVICE_PLATFORM,
                    device_product: t.device_product || "Site Curiosity Player",
                    device_type: t.device_type || W.DISTRO_PLATFORM,
                    distro: t.distro || W.DISTRO,
                    distro_partner: "",
                    environment: this._env,
                    language: t.language || W.LANGUAGE,
                    manufacturer_device_id: "",
                    network_mode: "unknown",
                    package_availability: !0,
                    package_id: pt.packageIds.join(","),
                    parent_app_sessionId: "",
                    parent_app_version: "",
                    parent_device_family: "",
                    parent_device_manufacturer: "",
                    parent_device_mode: "",
                    parent_device_model: "",
                    parent_device_os: "",
                    parent_device_product: "",
                    parent_device_type: "",
                    parent_distro: "",
                    parent_source_id: "",
                    plan_id: t.plan_id || pt.planId,
                    player_presentation_mode: this.playerPresentationMode,
                    primary_ref_click: t.primary_ref_click || "",
                    primary_ref_page_type: t.primary_ref_page_type || "",
                    primary_ref_page_uri: t.primary_ref_page_uri || "",
                    profile_id: String(pt.profileId),
                    region: t.region || W.REGION,
                    seq_in_app_session: t.seq_in_app_session || ln.getAppSessionInfo("session_seq") || 0,
                    screen_orientation: e && e.indexOf("portrait") >= 0 ? "portrait" : "landscape",
                    screen_resolution: t.screen_resolution || screen.width + "x" + screen.height,
                    secondary_ref_click: t.secondary_ref_click || "",
                    secondary_ref_page_type: t.secondary_ref_page_type || "",
                    secondary_ref_page_uri: t.secondary_ref_page_uri || "",
                    user_id: t.user_id || String(pt.userId)
                },
                this._data
            }
        }, {
            key: "siteCommonContext",
            get: function get() {
                return ir.getHitInfo() || {}
            }
        }, {
            key: "playerPresentationMode",
            get: function get() {
                return document.hidden ? "invisible" : ni.isMinimized ? "picture_in_picture" : "full_screen"
            }
        }]);
        return _class30
    }());
    var rr = {
        is720p60Enabled: function is720p60Enabled(e) {
            return Q.hashCode(e) % 10 < 10
        },
        isH265Enabled: function isH265Enabled(e) {
            return Q.hashCode(e) % 100 < 15
        }
    };
    var sr = {
        executeWhenOnline: function executeWhenOnline(e) {
            function t(e) {
                try {
                    setTimeout(e)
                } catch (_unused) {}
            }
            return navigator.onLine && t(e),
            window.addEventListener("online", function i() {
                t(e),
                window.removeEventListener("online", i)
            }),
            Math.round(100 * Math.random())
        }
    };
    var ar = function() {
        function ar(e, t, i) {
            if (i === void 0) {
                i = function() {}
            }
            this._timeout = e,
            this._interval = t,
            this._handler = i,
            this._handlerIntervalId = null,
            this._start = null
        }
        ar.create = function create(e, t, i) {
            return new ar(e,t,i)
        }
        ;
        var _proto64 = ar.prototype;
        _proto64.reset = function reset() {
            this._handlerIntervalId && (clearInterval(this._handlerIntervalId),
            this._handlerIntervalId = null),
            this._start = null
        }
        ;
        _proto64.startInterval = function startInterval() {
            this.reset(),
            this.resetTime(),
            this._handlerIntervalId = setInterval(this._handler, this._interval)
        }
        ;
        _proto64.resetTime = function resetTime() {
            this._start = Date.now()
        }
        ;
        _createClass(ar, [{
            key: "timeouted",
            get: function get() {
                return null !== this._start && Date.now() - this._start > this._timeout
            }
        }]);
        return ar
    }();
    var lr = {
        appState: $,
        playerState: Kt,
        playbackState: _n,
        entity: Rt,
        captions: mn
    }
      , dr = {
        playerState: function playerState(e) {
            var t = e.playerState
              , i = e.playbackState
              , n = t.mediaType
              , r = n === Ft.CONTENT
              , s = n === Ft.INTRO || n === Ft.POST_INTRO
              , a = n === Ft.BURNED_IN_AD || n === Ft.INSERTED_AD;
            return {
                mediaType: n,
                paused: i.isPaused,
                isAd: a,
                isBumper: s,
                isContent: r
            }
        },
        entity: function entity(e) {
            var t = e.entity
              , i = t.entity || {}
              , n = i.bundle || {};
            return {
                isEmpty: !t.entity || !i.bundle,
                isVod: i.isVod || !1,
                isLive: i.isLive || !1,
                isRecorded: i.isRecorded || !1,
                duration: n.duration || 0,
                eabId: n.eabId || null
            }
        },
        appState: function appState(_ref10) {
            var e = _ref10.appState;
            return {
                pointerMonitorState: e.pointerMonitorState
            }
        },
        captions: function captions(_ref11) {
            var e = _ref11.captions;
            return {
                captionType: e.captionType
            }
        }
    }
      , ur = {
        playerState: ["playerState", "playbackState"],
        entity: ["entity"],
        appState: ["appState"],
        captions: ["captions"]
    }
      , cr = function() {
        var e = {};
        return Object.keys(ur).forEach(function(t) {
            ur[t].forEach(function(i) {
                e[i] = e[i] || [],
                e[i].push(t)
            })
        }),
        e
    }();
    function hr(e) {
        return dr[e].call(this, lr)
    }
    var pr = function() {
        var e = function() {
            var e = {};
            return Object.keys(dr).forEach(function(t) {
                e[t] = hr(t)
            }),
            e
        }();
        return {
            subscribe: function subscribe(t) {
                var i = Object.keys(lr).map(function(i) {
                    var n = lr[i];
                    function r() {
                        (function(e) {
                            return cr[e] || []
                        }
                        )(i).forEach(function(i) {
                            e[i] = hr(i),
                            t()
                        })
                    }
                    return n.onUpdated(r),
                    function() {
                        return n.offUpdated(r)
                    }
                });
                return function() {
                    return i.forEach(function(e) {
                        return e()
                    })
                }
            },
            getState: function getState() {
                return e
            }
        }
    }()
      , _r = i(76);
    var fr = {
        ALL_STYLES: {
            default: {
                font: "Arial",
                textColor: "#ffffff",
                textOpaque: 1,
                fontSize: 28,
                effect: "dropshadow",
                backgroundColor: "#000000",
                backgroundOpaque: .5,
                transitionMode: "popout"
            },
            green: {
                font: "Arial",
                textColor: "#66cc00",
                textOpaque: 1,
                fontSize: 28,
                effect: "dropshadow",
                backgroundColor: "#000000",
                backgroundOpaque: .5,
                transitionMode: "popout"
            },
            white: {
                font: "Arial",
                textColor: "#ffffff",
                textOpaque: 1,
                fontSize: 28,
                effect: "dropshadow",
                backgroundColor: "#000000",
                backgroundOpaque: .5,
                transitionMode: "popout"
            },
            red: {
                font: "Arial",
                textColor: "#cc0066",
                textOpaque: 1,
                fontSize: 28,
                effect: "dropshadow",
                backgroundColor: "#000000",
                backgroundOpaque: .5,
                transitionMode: "popout"
            },
            cyan: {
                font: "Arial",
                textColor: "#009999",
                textOpaque: 1,
                fontSize: 28,
                effect: "dropshadow",
                backgroundColor: "#000000",
                backgroundOpaque: .5,
                transitionMode: "popout"
            }
        },
        NONE: "none",
        POPOUT: "popout",
        BUBBLE: "bubble",
        COMMON_FONTS: ["Arial", "Arial Black", "Comic Sans MS", "Courier", "Courier New", "Georgia", "Impact", "Lucida Console", "Lucida Sans Unicode", "Monaco", "Palatino Linotype", "Palatino", "Tahoma", "Geneva", "Times New Roman", "Trebuchet MS", "Verdana", "Symbol", "MS Sans Serif", "MS Serif", "Cambria", "Constantia", "Calibri", "Candara", "Century Gothic", "Corbel", "Papyrus", "Bradley Hand", "Consolas", "Helvetica", "Gadget", "Book Antiqua", "Charcoal", "New York"]
    };
    var gr = function or(e) {
        var t = e;
        var i = [];
        return {
            getState: function getState() {
                return t
            },
            subscribe: function subscribe(e) {
                if ("function" != typeof e)
                    throw new Error("Expected the listener to be a function.");
                return i.push(e),
                function() {
                    var t = i.indexOf(e);
                    i.splice(t, 1)
                }
            },
            commit: function commit(e) {
                "object" == typeof e && null !== e && (Object.keys(e).forEach(function(i) {
                    var n = e[i];
                    t[i] ? Object.keys(n).forEach(function(e) {
                        t[i][e] = n[e]
                    }) : t[i] = n
                }),
                function() {
                    for (var _e58 = 0; _e58 < i.length; _e58++) {
                        i[_e58]()
                    }
                }())
            }
        }
    }(i.n(_r)()({
        player: Zn,
        appState: {
            isOn: !1,
            isCasting: !1,
            viewMode: Ut.ViewModeTypes.NORMAL
        },
        resolution: {
            width: 0,
            height: 0,
            scalePoint: ti.ScalePoint.S1600
        },
        visibility: {
            longTimeTips: !1,
            captionStylePanel: !1,
            controlBar: !1,
            loadingView: {
                isHidden: !0
            }
        },
        upnext: {
            isEndCredit: !1,
            isEndedReplay: !1
        },
        error: {
            errorInstance: null
        },
        captions: {
            captionType: null,
            defaultLanguage: "en",
            currentLanguage: null,
            allLanguages: ["en"],
            isOn: !1,
            isDefaultOn: !1,
            currentCaptionText: ""
        },
        user: {
            profileId: null,
            userId: null
        },
        captionStyle: _objectSpread({
            fontList: [],
            style: "default"
        }, fr.ALL_STYLES.default)
    }, pr.getState()));
    pr.subscribe(function() {
        gr.commit(pr.getState())
    });
    var mr = gr;
    var yr = function(e, t, i) {
        return Object.keys(e).reduce(function(n, r) {
            var s = e[r];
            return n[r] = function(e, t, i) {
                return function() {
                    var n = e.apply(this, arguments);
                    var r = n;
                    return "function" == typeof n && (r = n(i)),
                    t(r)
                }
            }(s, t, i),
            n
        }, {})
    };
    var vr = Object.prototype.hasOwnProperty;
    function Er(e, t) {
        return e === t ? 0 !== e || 0 !== t || 1 / e == 1 / t : e != e && t != t
    }
    var br = new f;
    function Tr(e, t) {
        return "function" != typeof e && (e = function() {
            return {}
        }
        ),
        function(i) {
            if (i.hasOwnProperty("props"))
                throw new Error("There is already a field called `props` in this view");
            var n = t && yr(t, mr.commit, mr.getState);
            function r() {
                var t = e(mr.getState());
                return Object.assign(t, n)
            }
            return i.props = r(),
            mr.subscribe(function() {
                var e = r()
                  , t = i.props;
                i.props = e,
                "function" == typeof i.onViewPropsUpdated && !function(e, t) {
                    if (Er(e, t))
                        return !0;
                    if ("object" != typeof e || null === e || "object" != typeof t || null === t)
                        return !1;
                    var i = Object.keys(e)
                      , n = Object.keys(t);
                    if (i.length !== n.length)
                        return !1;
                    for (var _n26 = 0; _n26 < i.length; _n26++) {
                        if (!vr.call(t, i[_n26]) || !Er(e[i[_n26]], t[i[_n26]]))
                            return !1
                    }
                    return !0
                }(t, e) && i.isReady && i.onViewPropsUpdated(t)
            }),
            i
        }
    }
    var Sr = {
        on: br.on.bind(br),
        off: br.off.bind(br),
        Events: {
            USER_COMMAND: "usercommand"
        },
        dispatch: function dispatch(e, t) {
            return br.emit(e, {
                type: e,
                payload: t
            })
        }
    };
    var Pr = "video_end"
      , wr = "playback_item_selected";
    var kr = function() {
        function kr(e) {
            this._props = {},
            this._cloneProps(this._props, e),
            this.reset()
        }
        var _proto65 = kr.prototype;
        _proto65._cloneProps = function _cloneProps(e, t) {
            Object.keys(t).forEach(function(i) {
                Array.isArray(t[i]) ? e[i] = Array.prototype.slice.call(t[i]) : e[i] = t[i]
            })
        }
        ;
        _proto65.createPayload = function createPayload(e) {
            return Object.assign({}, this.payload, e)
        }
        ;
        _proto65.reset = function reset() {
            this._cloneProps(this, this._props)
        }
        ;
        return kr
    }();
    var Cr = {
        bufferEnd: new kr({
            payload: {
                event: "player_buffer_end",
                hit_version: "1.0.1",
                buffer_type: "initializing",
                duration: 0
            }
        }),
        bufferStart: new kr({
            startTime: 0,
            started: !1,
            bufferType: "initializing",
            payload: {
                event: "player_buffer_start",
                hit_version: "1.0.1",
                buffer_type: "initializing"
            }
        }),
        cdn: new kr({
            prevCdn: "",
            payload: {
                event: "player_cdn_changed",
                hit_version: "1.0.1",
                previous_cdn: "",
                data_type: null,
                reason: null,
                message: null,
                is_initial: null
            }
        }),
        mbrMode: new kr({
            payload: {
                event: "player_mbr_mode_changed",
                hit_version: "1.0.0"
            }
        }),
        click: new kr({
            payload: {
                event: "click",
                hit_version: "1.0.1",
                target_id: null,
                entity_type: null,
                target_type: null,
                position: null,
                heimdall_hub_id: null,
                page_instance_id: null,
                collection_id: null,
                collection_source: null,
                hardware_button: null,
                action_type: null,
                reco_tags: "",
                target_display_name: null
            }
        }),
        contentEnd: new kr({
            payload: {
                event: "player_content_end",
                hit_version: "1.1.1"
            }
        }),
        contentStart: new kr({
            payload: {
                event: "player_content_start",
                hit_version: "1.0.1"
            }
        }),
        continuousplaySwitch: new kr({
            payload: {
                event: "player_continuousplay_switch",
                hit_version: "1.2.0",
                next_entity: null,
                next_cp_reason: null,
                reco_tags: ""
            }
        }),
        error: new kr({
            payload: {
                event: "player_error",
                hit_version: "1.3.0",
                error_category: "",
                error_subcategory: "",
                error_detail: 0,
                error_entitlement_failure: "",
                error_id: "",
                error_level: "",
                error_message: "",
                error_name: "",
                error_playback_fragment_type: "",
                error_type: null,
                is_fatal: !1,
                playback_stage: null
            }
        }),
        flipTrayClosed: new kr({
            payload: {
                event: "player_flip_tray_closed",
                hit_version: "1.0.1",
                scenario: null,
                open_duration: 0,
                ads_shown_during_fliptray: !1,
                flip_tray_type: null
            }
        }),
        flipTrayShown: new kr({
            adsShownDuringFliptray: !1,
            opened: !1,
            openTime: !1,
            payload: {
                event: "player_flip_tray_shown",
                hit_version: "1.1.0",
                scenario: null,
                playable_content_id: null,
                primary_collection_id: null,
                secondary_collection_id: null,
                primary_collection_entities: null,
                secondary_collection_entities: null,
                flip_tray_type: null
            }
        }),
        heartbeat: new kr({
            playedDuration: 0,
            playedBits: 0,
            prevTotalPlayedTime: 0,
            payload: {
                event: "player_heartbeat",
                hit_version: "1.1.0",
                playback_duration: 0,
                time_weighted_bitrate: null,
                playback_state: null,
                effective_user_idle_duration: 0
            }
        }),
        interactivePeriodSummary: new kr({
            PERIOD_DURATION: 4e3,
            SESSION_DURATION: 6e5,
            periodCount: 0,
            periodDuration: 0,
            prevTotalPlayedTime: 0,
            currentPeriodStartTime: 0,
            payload: {
                event: "player_ui_interactive_period_summary",
                hit_version: "1.0.0",
                interactive_period_count: 0,
                interactive_period_duration: 0,
                playback_duration: 0
            }
        }),
        pause: new kr({
            started: !1,
            startTime: 0,
            payload: {
                event: "player_pause",
                hit_version: "1.0.1"
            }
        }),
        pauseAdImpressionStart: new kr({
            payload: {
                event: "player_pause_ad_impression_start",
                hit_version: "1.0.0"
            }
        }),
        pauseAdImpressionEnd: new kr({
            payload: {
                event: "player_pause_ad_impression_end",
                hit_version: "1.0.0"
            }
        }),
        playerContinuousPlaybackEnd: new kr({
            payload: {
                event: "player_continuous_playback_end",
                hit_version: "1.0.0"
            }
        }),
        playerContinuousPlaybackStart: new kr({
            payload: {
                event: "player_continuous_playback_start",
                hit_version: "1.0.0"
            }
        }),
        playerInstanceEnd: new kr({
            payload: {
                event: "player_instance_end",
                hit_version: "1.0.0"
            }
        }),
        playerInstanceStart: new kr({
            payload: {
                event: "player_instance_start",
                hit_version: "1.0.0"
            }
        }),
        playerStart: new kr({
            started: !1,
            payload: {
                event: "player_start",
                hit_version: "1.0.1"
            }
        }),
        playerPresentation: new kr({
            payload: {
                event: "player_presentation_changed",
                hit_version: "1.0.0",
                action: null
            }
        }),
        playerUiShown: new kr({
            payload: {
                event: "player_ui_shown",
                hit_version: "1.0.0"
            }
        }),
        playerUiClosed: new kr({
            payload: {
                event: "player_ui_closed",
                hit_version: "1.0.0"
            }
        }),
        quality: new kr({
            firstUpdated: !0,
            prevBitrate: null,
            prevQuality: null,
            payload: {
                event: "player_quality_changed",
                hit_version: "1.0.1",
                first_update: !0,
                previous_quality: null,
                previous_bitrate: null
            }
        }),
        resume: new kr({
            pauseTime: null,
            payload: {
                event: "player_resume",
                hit_version: "1.0.1",
                duration: 0
            }
        }),
        seekEnd: new kr({
            count: 0,
            payload: {
                event: "player_seek_end",
                hit_version: "1.0.1",
                seek_type: "normal",
                duration: 0
            }
        }),
        seekStart: new kr({
            started: !1,
            startTime: 0,
            seekSource: null,
            payload: {
                event: "player_seek_start",
                hit_version: "1.0.1",
                seek_type: "normal",
                content_position: -1,
                seek_source: null
            }
        }),
        timelineScrub: new kr({
            scrubStartPosition: null,
            scrubStartTime: null,
            payload: {
                event: "player_ui_timeline_scrub",
                hit_version: "1.0.0",
                did_playback_position_change: !1,
                scrubbing_duration: 0,
                was_blocked_by_ad_restrictions: !1
            }
        }),
        segmentDownload: new kr({
            segments: [],
            rateLimitName: "segment_download_hit",
            payload: {
                event: "player_custom_event",
                category: "segment_download",
                hit_version: "1.2.0",
                bandwidth_trace: ""
            }
        }),
        segmentEnd: new kr({
            finishReason: "segment_ended",
            payload: {
                event: "player_segment_end",
                hit_version: "1.1.0",
                finish_reason: "segment_ended"
            }
        }),
        segmentStart: new kr({
            payload: {
                event: "player_segment_start",
                hit_version: "1.0.1",
                time_to_playback_start: 0
            }
        }),
        stillWatchingClosed: new kr({
            payload: {
                event: "still_watching_closed",
                hit_version: "1.0.0"
            }
        }),
        stillWatchingOpened: new kr({
            startTime: 0,
            payload: {
                event: "still_watching_opened",
                hit_version: "1.0.0"
            }
        }),
        sourceRenderStart: new kr({
            payload: {
                event: "player_source_render_start",
                hit_version: "1.0.0"
            }
        }),
        userInteraction: new kr({
            payload: {
                event: "user_interaction",
                hit_version: "2.1.0",
                action_specifier: null,
                element_specifier: null,
                target_display_name: null,
                page_instance_id: null,
                interaction_type: null,
                conditional_properties: [],
                hardware_button: null,
                entity_id: null,
                entity_action_id: null,
                entity_type: null,
                entity_action_eab_id: null,
                entity_action_type: null,
                reco_tags: "",
                collection_id: null,
                collection_source: null,
                collection_item_index: null,
                collection_index: null,
                cover_story_campaign_id: null,
                cover_story_promo_text_format: null,
                cover_story_logo_id: null,
                cover_story_reasons: null
            }
        })
    };
    var Ir = function(_m23) {
        _inheritsLoose(Ir, _m23);
        function Ir() {
            var _this102;
            _this102 = _m23.call(this) || this,
            _this102._data = {
                sessionStarted: !1,
                contentStarted: !1,
                segmentStarted: !1,
                userInactivity: !1,
                mediaType: Ft.UNKNOWN,
                payload: {
                    event: ""
                }
            };
            return _this102
        }
        var _proto66 = Ir.prototype;
        _proto66.reset = function reset() {
            this.update({
                sessionStarted: !1,
                contentStarted: !1,
                segmentStarted: !1,
                mediaType: Ft.UNKNOWN
            })
        }
        ;
        _proto66.shouldSampleHit = function shouldSampleHit(e) {
            var t = at.instrumentRateLimit[e];
            if (null == t)
                return !0;
            return Q.hashCode(nr.sourceId) % 1e4 < t / 100 * 1e4
        }
        ;
        _createClass(Ir, [{
            key: "contentEnded",
            get: function get() {
                return this.contentStarted && Kt.duration - Kt.currentTime < 1
            }
        }, {
            key: "payload",
            set: function set(e) {
                e && e.event && this.update({
                    payload: e
                })
            }
        }]);
        return Ir
    }(m);
    Ir.defineProxyProperties({
        sessionStarted: !0,
        contentStarted: !0,
        segmentStarted: !0,
        mediaType: !0,
        userInactivity: !0
    });
    var Rr = new Ir;
    var Dr = {
        track: function track(e, t) {
            var i = e.createPayload(t);
            Rr.payload = i
        },
        Events: Cr
    };
    var Lr = function() {
        function Lr(e) {
            e = e || {},
            this._title = e.title,
            this._subtitle = e.subtitle,
            this._tertiaryTitle = e.tertiaryTitle,
            this._imageUrl = e.images && e.images[0].url
        }
        _createClass(Lr, [{
            key: "title",
            get: function get() {
                return this._title
            }
        }, {
            key: "subtitle",
            get: function get() {
                return this._subtitle
            }
        }, {
            key: "tertiaryTitle",
            get: function get() {
                return this._tertiaryTitle
            }
        }, {
            key: "imageUrl",
            get: function get() {
                return this._imageUrl
            }
        }]);
        return Lr
    }();
    var Mr = function() {
        function Mr(e) {
            e = e || {},
            this._activeSessionCount = e.active_session_count,
            this._adBreaks = e.ad_breaks_live && e.ad_breaks_live.map(function(e) {
                return {
                    start: e.start_time,
                    end: e.end_time
                }
            }) || Object.keys(e.dot_states || {}).map(function(e) {
                return {
                    start: e,
                    end: e
                }
            }),
            this._captionLanguage = e.caption_language,
            this._durationMsec = e.duration_msec,
            this._eabId = e.eab_id,
            this._entity = Rt.parseEntityFromRawData(e.entity),
            this._error = e.error,
            this._isAdState = null != e.ad,
            this._isRecording = e.is_recording,
            this._isSeekingAllowed = e.is_seeking_allowed,
            this._playbackState = e.playback_state,
            this._positionMsec = e.position_msec;
            var t = e.seekable_window || {
                start_time: 0,
                end_time: 0
            };
            this._seekableStart = t.start_time,
            this._seekableEnd = t.end_time,
            this._volume = e.volume,
            this._userTokenExpired = e.user_token_expired
        }
        _createClass(Mr, [{
            key: "activeSessionCount",
            get: function get() {
                return this._activeSessionCount || 0
            }
        }, {
            key: "adBreaks",
            get: function get() {
                return this._adBreaks || []
            }
        }, {
            key: "captionLanguage",
            get: function get() {
                return this._captionLanguage
            }
        }, {
            key: "duration",
            get: function get() {
                return this._durationMsec
            }
        }, {
            key: "eabId",
            get: function get() {
                return this._eabId
            }
        }, {
            key: "entity",
            get: function get() {
                return this._entity
            }
        }, {
            key: "error",
            get: function get() {
                return this._error
            }
        }, {
            key: "isAdState",
            get: function get() {
                return this._isAdState
            }
        }, {
            key: "isLive",
            get: function get() {
                return this._entity && this._entity.isLive
            }
        }, {
            key: "isPaused",
            get: function get() {
                return null != this._playbackState && ("PAUSED" == this._playbackState || this._playbackState.includes("PAUSED"))
            }
        }, {
            key: "isPlaying",
            get: function get() {
                return null != this._playbackState && ("PLAYING" == this._playbackState || this._playbackState.includes("PLAYING"))
            }
        }, {
            key: "isLoading",
            get: function get() {
                return null != this._playbackState && ("LOADING" == this._playbackState || this._playbackState.includes("LOADING"))
            }
        }, {
            key: "isRecording",
            get: function get() {
                return this._isRecording || !1
            }
        }, {
            key: "isRecorded",
            get: function get() {
                return this._entity && this._entity.isRecorded
            }
        }, {
            key: "isSeekingAllowed",
            get: function get() {
                return this._isSeekingAllowed || !1
            }
        }, {
            key: "playbackState",
            get: function get() {
                return this._playbackState
            }
        }, {
            key: "currentTime",
            get: function get() {
                return this._positionMsec || 0
            }
        }, {
            key: "seekableWindow",
            get: function get() {
                return {
                    start: this._seekableStart,
                    end: this._seekableEnd
                }
            }
        }, {
            key: "volume",
            get: function get() {
                return this._volume
            }
        }, {
            key: "userTokenExpired",
            get: function get() {
                return this._userTokenExpired
            }
        }]);
        return Mr
    }();
    var Or = function() {
        function Or(e) {
            e = e || {},
            this._captionsLanguage = e.captions_language,
            this._captionsOptions = e.captions_options,
            this._autoplay = e.autoplay,
            this._audioTrackOptions = e.audio_track_options,
            this._audioTrack = e.audio_track
        }
        _createClass(Or, [{
            key: "captionsLanguage",
            get: function get() {
                return this._captionsLanguage || "off"
            },
            set: function set(e) {
                this._captionsLanguage = e
            }
        }, {
            key: "captionsOptions",
            get: function get() {
                return this._captionsOptions || []
            },
            set: function set(e) {
                this._captionsOptions = e
            }
        }, {
            key: "autoplay",
            get: function get() {
                return this._autoplay || {}
            }
        }, {
            key: "isOn",
            get: function get() {
                return "off" != this.captionsLanguage
            }
        }, {
            key: "isAutoPlayOn",
            get: function get() {
                return this.autoplay && "on" === this.autoplay.autoplay
            }
        }, {
            key: "audioTrackOptions",
            get: function get() {
                return this._audioTrackOptions
            }
        }, {
            key: "audioTrack",
            get: function get() {
                return this._audioTrack
            }
        }]);
        return Or
    }();
    var xr = function(_m24) {
        _inheritsLoose(xr, _m24);
        function xr() {
            var _this103;
            _this103 = _m24.call(this) || this,
            _this103._data = {
                mediaMetadata: new Lr,
                playbackData: new Mr,
                settingData: new Or,
                volume: .5,
                isMuted: !1,
                receiverFriendlyName: !1
            };
            return _this103
        }
        var _proto67 = xr.prototype;
        _proto67.reset = function reset() {
            this.update({
                mediaMetadata: new Lr,
                playbackData: new Mr,
                settingData: new Or,
                volume: .5,
                isMuted: !1,
                receiverFriendlyName: !1
            })
        }
        ;
        _createClass(xr, [{
            key: "playVolume",
            get: function get() {
                return this.isMuted ? 0 : this.volume
            }
        }]);
        return xr
    }(m);
    xr.defineProxyProperties({
        mediaMetadata: !0,
        playbackData: !0,
        settingData: !0,
        volume: !0,
        isMuted: !0,
        receiverFriendlyName: !0
    });
    var Nr = new xr;
    var Ur = "dropshadow"
      , Br = "outline"
      , Fr = "depressed"
      , Vr = "raised"
      , jr = {
        [Ur]: "2px 2px 3px rgba(0, 0, 0, .75)",
        [Vr]: "-1px -1px #ccc, 1px 1px #000",
        [Fr]: "-1px -1px #000, 1px 1px #ccc",
        [Br]: "-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000, 0px -1px 0 #000, -1px 0px 0 #000, 0px 1px 0 #000, 1px 0px 0 #000"
    }
      , Wr = function(e) {
        return jr[e] || ""
    }
      , Gr = function(_ref12) {
        var e = _ref12.captionStyle;
        var t = e.font
          , i = e.fontSize
          , n = e.backgroundColor
          , r = e.backgroundOpaque
          , s = e.textColor
          , a = e.textOpaque
          , o = e.effect;
        var l = Wr(o);
        return {
            color: Yr(s, a),
            "font-family": t,
            "font-size": i + "px",
            "text-shadow": l,
            "background-color": Yr(n, r),
            overflow: "visible"
        }
    }
      , Kr = function(_ref13) {
        var e = _ref13.captionStyle;
        var t = e.font
          , i = e.fontSize
          , n = e.backgroundColor
          , r = e.backgroundOpaque
          , s = e.textColor
          , a = e.textOpaque
          , o = e.effect;
        return {
            font_family: t,
            text_size: parseInt(i) / 36,
            background_color: qr(n, r || 1),
            edge_type: o,
            text_color: qr(s, a || 1)
        }
    }
      , zr = function(_ref14) {
        var e = _ref14.captionStyle;
        var t = Object.assign({}, e);
        return delete t.style,
        delete t.fontList,
        t
    };
    function qr(e, t) {
        if ("string" == typeof e && (e = parseInt(e.replace("#", ""), 16)),
        t = parseFloat(t),
        e >= 0 && t <= 1) {
            var _i36 = e >> 16 & 255
              , _n27 = e >> 8 & 255
              , _r14 = 255 & e
              , _s7 = [parseInt(255 * t), _i36, _n27, _r14]
              , _a5 = "0x";
            for (var _i37 = 0, _s8 = _s7; _i37 < _s8.length; _i37++) {
                var _e59 = _s8[_i37];
                _a5 += ("0" + _e59.toString(16)).slice(-2)
            }
            return parseInt(_a5)
        }
        return 0
    }
    function Yr(e, t) {
        if ("string" == typeof e && (e = parseInt(e.replace("#", ""), 16)),
        t = parseFloat(t),
        e >= 0 && t <= 1) {
            return "rgba(" + (e >> 16 & 255) + ", " + (e >> 8 & 255) + ", " + (255 & e) + ", " + t + ")"
        }
        return "rgba(0,0,0,0.5)"
    }
    var Qr = function(_ref15) {
        var e = _ref15.captions;
        var t = e.isOn
          , i = e.currentLanguage;
        return t ? i : "off"
    };
    var $r = new (function(_f3) {
        _inheritsLoose(_class31, _f3);
        function _class31() {
            var _this104;
            _this104 = _f3.call(this) || this,
            _this104._messageId = 0,
            _this104._userToken = null,
            _this104._isRefreshingWhenTokenExpired = !1,
            _this104._initialTime = -1,
            _this104._closed = !1,
            _this104._connected = !1,
            _this104._available = !1;
            return _this104
        }
        var _proto68 = _class31.prototype;
        _proto68.init = function init() {
            if ("undefined" != typeof cast && "undefined" != typeof chrome && null != chrome.cast) {
                var _e60 = cast.framework.CastContext.getInstance();
                _e60.setOptions({
                    receiverApplicationId: this.receiverApplicationId,
                    autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED
                }),
                _e60.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED, this.onCastStateChanged.bind(this)),
                _e60.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED, this.onSessionStateChanged.bind(this)),
                this._remotePlayer = new cast.framework.RemotePlayer,
                this._remotePlayerController = new cast.framework.RemotePlayerController(this._remotePlayer),
                this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.MEDIA_INFO_CHANGED, this.onMediaInfoChanged.bind(this)),
                this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED, this.onMuteChanged.bind(this)),
                this._remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED, this.onVolumeChanged.bind(this))
            }
        }
        ;
        _proto68.setInitialTime = function setInitialTime(e) {
            this._initialTime = e
        }
        ;
        _proto68._initSession = function _initSession() {
            this._messageId = 0,
            Nr.receiverFriendlyName = this.currentSession.getCastDevice().friendlyName,
            this._sendReceiverContext(),
            this.currentSession.addMessageListener("urn:x-cast:com.hulu.plus", this.onReceiverMessages.bind(this))
        }
        ;
        _proto68.onCastStateChanged = function onCastStateChanged(e) {
            var t = !0;
            switch (e.castState) {
            case cast.framework.CastState.CONNECTED:
                this.onConnected();
                break;
            case cast.framework.CastState.CONNECTING:
                this.onConnecting();
                break;
            case cast.framework.CastState.NOT_CONNECTED:
                this.onDisconnected();
                break;
            case cast.framework.CastState.NO_DEVICES_AVAILABLE:
                this.onDisconnected(),
                t = !1;
            }
            this._available !== t && this.trigger("availablechanged", t),
            this._available = t
        }
        ;
        _proto68.onConnected = function onConnected() {
            this._connected = !0,
            Nr.volume = this._remotePlayer.volumeLevel,
            Nr.isMuted = this._remotePlayer.isMuted,
            this._requestSetting(),
            this.trigger("connected")
        }
        ;
        _proto68.onConnecting = function onConnecting() {
            this._closed = !1,
            this.trigger("connecting")
        }
        ;
        _proto68.onDisconnected = function onDisconnected() {
            if (!this._connected)
                return;
            this._connected = !1;
            var e = -1
              , t = {};
            if (!this._closed) {
                var _i38 = Nr.playbackData;
                e = _i38.eabId,
                t = {
                    isLiveTV: _i38.isLive
                },
                this._stopSession(),
                this.trigger("end", e, t)
            }
            Nr.reset()
        }
        ;
        _proto68.onReceiverMessages = function onReceiverMessages(e, t) {
            var i = JSON.parse(t);
            if (i.event_type === Wi.CustomSender.PLAYBACK_UPDATE && i.data.entity) {
                var _e61 = new Mr(i.data);
                if (this.refreshUserTokenIfExpired(_e61.userTokenExpired),
                _e61.error && this.trigger("error", _e61.error),
                !Nr.mediaMetadata || !Nr.playbackData || Nr.playbackData.eabId !== _e61.eabId) {
                    var _e62 = this.currentSession.getMediaSession();
                    _e62 && _e62.media && (Nr.mediaMetadata = new Lr(_e62.media.metadata))
                }
                Nr.playbackData = _e61
            } else if (i.event_type === Wi.CustomSender.CURRENT_SETTINGS) {
                var _e63 = new Or(i.data);
                Nr.settingData = _e63,
                this.trigger("settingschanged"),
                _e63.autoplay && T.setItem(pt.postfixProfileId("hulu$castautoplay"), _e63.autoplay.autoplay)
            }
        }
        ;
        _proto68.refreshUserTokenIfExpired = function refreshUserTokenIfExpired(e) {
            var _this105 = this;
            e && (this._isRefreshingWhenTokenExpired || (this._isRefreshingWhenTokenExpired = !0,
            this._refreshUserToken().then(function() {
                return _this105._updateCredentials()
            }).finally(function() {
                setTimeout(function() {
                    _this105._isRefreshingWhenTokenExpired = !1
                }, 1e4)
            })))
        }
        ;
        _proto68.onSessionStateChanged = function onSessionStateChanged(e) {
            switch (e.sessionState) {
            case cast.framework.SessionState.SESSION_STARTED:
                this.onSessionStarted();
                break;
            case cast.framework.SessionState.SESSION_RESUMED:
                this.onSessionResumed();
            }
        }
        ;
        _proto68.onMediaInfoChanged = function onMediaInfoChanged() {
            this._remotePlayer.mediaInfo && (Nr.mediaMetadata = new Lr(this._remotePlayer.mediaInfo.metadata))
        }
        ;
        _proto68.onMuteChanged = function onMuteChanged() {
            Nr.isMuted = this._remotePlayer.isMuted
        }
        ;
        _proto68.onVolumeChanged = function onVolumeChanged() {
            Nr.volume = this._remotePlayer.volumeLevel
        }
        ;
        _proto68.onSessionResumed = function onSessionResumed() {
            var _this106 = this;
            this._initSession(),
            this._refreshUserToken().then(function() {
                return _this106.trigger("sessionresumed")
            })
        }
        ;
        _proto68.onSessionStarted = function onSessionStarted() {
            var _this107 = this;
            this._initSession(),
            this._refreshUserToken().then(function() {
                return _this107.trigger("sessionstarted")
            })
        }
        ;
        _proto68.load = function load(e, t) {
            var _this108 = this;
            null != e && this._refreshUserToken().then(function() {
                _this108.stopVideo(),
                _this108.startVideo(t)
            })
        }
        ;
        _proto68._refreshUserToken = function _refreshUserToken() {
            var _this109 = this;
            return ir.refreshUserLogin().then(function(e) {
                _this109._userToken = {
                    value: e.user_token,
                    expirationTime: 1e3 * (e.expires_in || 14400)
                }
            })
        }
        ;
        _proto68.turnOnCaption = function turnOnCaption() {
            this.setCaption(this.currentLanguage)
        }
        ;
        _proto68.turnOffCaption = function turnOffCaption() {
            this.setCaption("off")
        }
        ;
        _proto68._toggleMute = function _toggleMute() {
            this._remotePlayerController.muteOrUnmute()
        }
        ;
        _proto68.pause = function pause() {
            this.sendMessage(Wi.CustomReceiver.PAUSE)
        }
        ;
        _proto68.play = function play() {
            this.sendMessage(Wi.CustomReceiver.PLAY)
        }
        ;
        _proto68.seek = function seek(e) {
            this.sendMessage(Wi.CustomReceiver.SEEK, {
                location_msec: e
            })
        }
        ;
        _proto68.setCaption = function setCaption(e) {
            this.sendMessage(Wi.CustomReceiver.SELECT_CAPTION, {
                value: e
            })
        }
        ;
        _proto68.setCaptionStyle = function setCaptionStyle(e) {
            this.sendMessage(Wi.CustomReceiver.SELECT_CAPTION_STYLE, {
                caption_style_data: e
            })
        }
        ;
        _proto68.switchAudioTrack = function switchAudioTrack(e, t) {
            this.sendMessage(Wi.CustomReceiver.SELECT_AUDIO_TRACK, {
                language: e,
                kind: t
            }),
            this._requestSetting()
        }
        ;
        _proto68.setMaxBitrate = function setMaxBitrate(e) {
            this.sendMessage(Wi.CustomReceiver.SELECT_QUALITY, e)
        }
        ;
        _proto68.specialSeek = function specialSeek(e) {
            this.sendMessage(Wi.CustomReceiver.SPECIAL_SEEK, {
                target: e
            })
        }
        ;
        _proto68.startVideo = function startVideo(e) {
            this.sendMessage(Wi.CustomReceiver.START, this._getStartData(e)),
            this.setInitialTime(-1)
        }
        ;
        _proto68.stopVideo = function stopVideo() {
            this.sendMessage(Wi.CustomReceiver.STOP)
        }
        ;
        _proto68._requestSetting = function _requestSetting() {
            this.sendMessage(Wi.CustomReceiver.REQUEST_SETTINGS)
        }
        ;
        _proto68._stopSession = function _stopSession() {
            this._available = !1,
            this._closed = !0,
            this.currentSession && (this.sendMessage(Wi.CustomReceiver.STOP),
            this.currentSession.removeMessageListener("urn:x-cast:com.hulu.plus", this.onReceiverMessages),
            this.currentSession.endSession(!0),
            Nr.receiverFriendlyName = "")
        }
        ;
        _proto68._updateCredentials = function _updateCredentials() {
            this.sendMessage(Wi.CustomReceiver.UPDATE_CREDENTIALS, {
                user_token: this._userToken.value,
                expiration_time: this._userToken.expirationTime,
                user_id: z.getCookie("_hulu_uid") || "-1"
            })
        }
        ;
        _proto68._sendReceiverContext = function _sendReceiverContext() {
            this.sendMessage(Wi.CustomReceiver.RECEIVER_CONTEXT, {
                friendly_name: Nr.receiverFriendlyName
            })
        }
        ;
        _proto68.sendMessage = function sendMessage(e, t) {
            this.currentSession && this.currentSession.sendMessage("urn:x-cast:com.hulu.plus", {
                event_type: e,
                message_id: this._messageId++,
                version: "0.1",
                data: t
            })
        }
        ;
        _proto68._getStartData = function _getStartData(_ref16) {
            var e = _ref16.entity
              , t = _ref16.collectionId
              , i = _ref16.latitude
              , n = _ref16.longitude
              , r = _ref16.computerGuid
              , s = _ref16.deviceAdId
              , a = _ref16.limitAdTracking
              , o = _ref16.isCasting
              , l = _ref16.audioTrack
              , d = _ref16.userId
              , u = _ref16.profileId;
            return {
                caption_style_data: Kr(mr.getState()),
                eab_id: e.bundle.eab_id,
                source_collection_id: t,
                offset_msec: 1e3 * this._initialTime,
                entity: e,
                user_token: this._userToken.value,
                expiration_time: this._userToken.expirationTime,
                user_id: d,
                captions_language: Qr(mr.getState()),
                latitude: i,
                longitude: n,
                show_prerolls: !0,
                device_id: nr.sourceId,
                beacon_data: {
                    c_app_version: W.APP_VERSION,
                    c_computerguid: r,
                    c_userid: nr.commonProperty.user_id,
                    c_session: nr.commonProperty.app_session_id,
                    c_os: nr.commonProperty.device_os,
                    c_player: W.PLAYER_VERSION,
                    c_distro: nr.commonProperty.distro,
                    c_distroplatform: W.DISTRO_PLATFORM,
                    c_device_fam: nr.commonProperty.device_family,
                    c_device_product: nr.commonProperty.device_product,
                    c_device_man: nr.commonProperty.device_manufacturer,
                    c_device_model: nr.commonProperty.device_model,
                    c_type: "controller",
                    sitesessionid: nr.commonProperty.app_session_id,
                    dup_play: !o,
                    package_id: nr.commonProperty.package_id,
                    plan_id: nr.commonProperty.plan_id,
                    profile_id: nr.commonProperty.profile_id,
                    device_id: nr.sourceId,
                    curr_page_type: nr.commonProperty.curr_page_type,
                    primary_ref_page_type: nr.commonProperty.primary_ref_page_type,
                    secondary_ref_page_type: nr.commonProperty.secondary_ref_page_type
                },
                profile: {
                    profile_id: u
                },
                autoplay: {
                    autoplay: T.getItem(pt.postfixProfileId("hulu$castautoplay"), "on")
                },
                audio_track: {
                    language: l && l.language,
                    kind: l && l.kind
                },
                device_ad_id: s,
                device_context_id: 1,
                limit_ad_tracking: a
            }
        }
        ;
        _createClass(_class31, [{
            key: "currentSession",
            get: function get() {
                return "undefined" != typeof cast ? cast.framework.CastContext.getInstance().getCurrentSession() : null
            }
        }, {
            key: "receiverApplicationId",
            get: function get() {
                return W.IS_QA ? "52CF632F" : W.IS_SMOKE ? "E94CA3C2" : "3EC252A5"
            }
        }, {
            key: "isConnected",
            get: function get() {
                return cast && cast.framework && cast.framework.CastContext.getInstance().getCastState() === cast.framework.CastState.CONNECTED
            }
        }, {
            key: "isCaptionOn",
            get: function get() {
                return "off" !== Nr.settingData.captionsLanguage
            }
        }, {
            key: "currentLanguage",
            get: function get() {
                return mr.getState().captions.currentLanguage
            }
        }, {
            key: "muted",
            set: function set(e) {
                e !== this._remotePlayer.isMuted && this._toggleMute()
            },
            get: function get() {
                return Nr.isMuted
            }
        }, {
            key: "autoplay",
            set: function set(e) {
                var t = e ? "on" : "off";
                this.sendMessage(Wi.CustomReceiver.SET_AUTOPLAY, {
                    autoplay: t
                })
            }
        }, {
            key: "volume",
            set: function set(e) {
                Nr.isMuted && e > 0 && this._toggleMute(),
                this._remotePlayer.volumeLevel = e,
                this._remotePlayerController.setVolumeLevel()
            }
        }]);
        return _class31
    }(f));
    var Xr = [{
        name: "Best Available",
        bitrate: 1 / 0
    }, {
        name: "Data Saver",
        bitrate: 2150400
    }];
    function Jr() {
        return Xr
    }
    var Zr = {
        findQualityByBitrate: function findQualityByBitrate(e) {
            return Jr().find(function(t) {
                return t.bitrate === e
            })
        },
        getQualities: Jr
    };
    var es = "hulu$cc_on"
      , ts = "hulu$cc_lang"
      , is = "hulu$cc_style"
      , ns = "hulu$autoplay"
      , rs = "hulu$audio_track"
      , ss = "hulu$max_bitrate"
      , as = {
        isCaptionDefaultOn: function isCaptionDefaultOn(e) {
            return cs(e, es, !1)
        },
        storeCaptionDefaultOn(e, t) {
            hs(t, es, e)
        },
        getCaptionDefaultLanguage: function getCaptionDefaultLanguage(e) {
            return cs(e, ts)
        },
        storeCaptionDefaultLanguage(e, t) {
            hs(t, ts, e)
        }
    }
      , os = {
        getCaptionStyle: function getCaptionStyle(e) {
            return cs(e, is)
        },
        storeCaptionStyle(e, t) {
            hs(t, is, e)
        }
    }
      , ls = {
        isAutoplayOn: function isAutoplayOn(e) {
            return cs(e, ns, !0)
        },
        storeAutoplay(e, t) {
            hs(t, ns, e)
        }
    }
      , ds = {
        getAudioTrack: function getAudioTrack(e) {
            return cs(e, rs, null)
        },
        storeAudioTrack(e, t) {
            hs(t, rs, e)
        }
    }
      , us = {
        getMaxBitrate: function getMaxBitrate(e) {
            return cs(e, ss)
        },
        storeMaxBitrate(e, t) {
            hs(t, ss, e)
        }
    };
    function cs(e, t, i) {
        var n = ct(t, e);
        return T.getItem(n, i)
    }
    function hs(e, t, i) {
        var n = ct(t, e);
        return T.setItem(n, i)
    }
    var ps = function(e) {
        return function(e) {
            return {
                appState: {
                    viewMode: e,
                    isMinimized: e === Ut.ViewModeTypes.MINIMIZED,
                    isFullscreen: e === Ut.ViewModeTypes.FULLSCREEN,
                    isNormal: e === Ut.ViewModeTypes.NORMAL
                }
            }
        }(e)
    }
      , _s = function() {
        return ps(Ut.ViewModeTypes.NORMAL)
    }
      , fs = function() {
        return ps(Ut.ViewModeTypes.FULLSCREEN)
    }
      , gs = function() {
        return ps(Ut.ViewModeTypes.MINIMIZED)
    }
      , ms = function(e) {
        return {
            appState: e
        }
    }
      , ys = function() {
        return ms({
            isOn: !0
        })
    }
      , vs = function() {
        return ms({
            isOn: !1
        })
    }
      , Es = function(e) {
        return ms({
            isCasting: e
        })
    }
      , bs = function(e) {
        Ui.userInteractionTime = e
    }
      , Ts = function(e) {
        return {
            visibility: e
        }
    }
      , Ss = function() {
        return Ts({
            longTimeTips: !0
        })
    }
      , As = function() {
        return Ts({
            longTimeTips: !1
        })
    }
      , Ps = function(e) {
        if (e === void 0) {
            e = !0
        }
        return Ts({
            loadingView: {
                hideMask: e,
                isHidden: !1
            }
        })
    }
      , ws = function() {
        return Ts({
            loadingView: {
                isHidden: !0
            }
        })
    }
      , ks = function() {
        return Ts({
            captionStylePanel: !0
        })
    }
      , Cs = function() {
        return Ts({
            captionStylePanel: !1
        })
    }
      , Is = function() {
        return Ts({
            controlBar: !0
        })
    }
      , Rs = function() {
        return Ts({
            controlBar: !1
        })
    }
      , Ds = function(e) {
        return {
            error: {
                errorInstance: e
            }
        }
    }
      , Ls = function(e) {
        return {
            upnext: e
        }
    }
      , Ms = function(e) {
        return Ls({
            isEndCredit: e
        })
    }
      , Os = function(e) {
        return Ls({
            isEndedReplay: e
        })
    }
      , xs = function(_ref17) {
        var e = _ref17.width
          , t = _ref17.height;
        return {
            resolution: {
                width: e,
                height: t
            }
        }
    }
      , Ns = function(e) {
        return {
            resolution: {
                scalePoint: e
            }
        }
    }
      , Us = function(e) {
        return {
            captions: e
        }
    }
      , Bs = function(e) {
        return Us({
            defaultLanguage: e
        })
    }
      , Fs = function(e) {
        return Us({
            allLanguages: e
        })
    }
      , Vs = function(e) {
        return Us({
            isDefaultOn: e
        })
    }
      , Hs = function(e) {
        return Us({
            currentCaptionText: e
        })
    }
      , js = function() {
        return Us({
            isOn: !1,
            isDefaultOn: !1,
            currentLanguage: null
        })
    }
      , Ws = function(_temp) {
        var _ref18 = _temp === void 0 ? {} : _temp
          , _ref18$isUserInitiate = _ref18.isUserInitiated
          , e = _ref18$isUserInitiate === void 0 ? !0 : _ref18$isUserInitiate
          , t = _ref18.language;
        return function(i) {
            var n = {};
            if (e && (n.isDefaultOn = !0),
            n.isOn = !0,
            t)
                n.defaultLanguage = t,
                n.currentLanguage = t;
            else {
                var _i$captions = i().captions
                  , _e64 = _i$captions.allLanguages
                  , _t41 = _i$captions.defaultLanguage
                  , _r15 = [_t41, "en", _e64[0]].find(function(t) {
                    return _e64.includes(t)
                });
                _r15 && (n.currentLanguage = _r15)
            }
            return Us(n)
        }
    }
      , Gs = function(e) {
        return {
            user: e
        }
    }
      , Ks = function(e) {
        return {
            captionStyle: e
        }
    }
      , zs = function(e) {
        return Ks(e)
    }
      , qs = function(e) {
        return Ks({
            textColor: e
        })
    }
      , Ys = function(e) {
        return Ks({
            textOpaque: e
        })
    }
      , Qs = function(e) {
        return Ks({
            backgroundColor: e
        })
    }
      , $s = function(e) {
        return Ks({
            backgroundOpaque: e
        })
    }
      , Xs = function(e) {
        return Ks({
            font: e
        })
    }
      , Js = function(e) {
        return Ks({
            fontSize: e
        })
    }
      , Zs = function(e) {
        return Ks({
            fontList: e
        })
    }
      , ea = function(e) {
        return Ks({
            transitionMode: e
        })
    }
      , ta = function(e) {
        return Ks({
            effect: e
        })
    };
    var ia = Tr(function(_ref19) {
        var e = _ref19.appState
          , t = _ref19.user;
        return {
            isAppOn: e.isOn,
            isMinimized: e.isMinimized,
            isCasting: e.isCasting,
            profileId: t.profileId,
            userId: t.userId
        }
    }, {
        setPlayerError: a.setPlayerError,
        setViewModeToMinimized: n.setViewModeToMinimized,
        setViewModeToNormal: n.setViewModeToNormal,
        startPlayer: r.startPlayer,
        closePlayer: r.closePlayer,
        setCastMode: r.setCastMode,
        setUserData: u.setUserData,
        setCaptionDefaultLanguage: d.setCaptionDefaultLanguage,
        setCaptionDefaultOn: d.setCaptionDefaultOn,
        setCaptionStyle: c.setCaptionStyle
    })(new (function() {
        function _class32() {
            this._reloadIfExecutionHangUp = this._reloadIfExecutionHangUp.bind(this),
            this._scheduleReloadOnTabVisible = this._scheduleReloadOnTabVisible.bind(this),
            this._executionHangUpChecker = ar.create(6e4, 3e3, this._reloadIfExecutionHangUp),
            this._reloadTaskId = null
        }
        var _proto69 = _class32.prototype;
        _proto69.init = function init() {
            var _this110 = this;
            window.addEventListener("unload", function() {
                return _this110._onPageLeave()
            }),
            Zn.setErrorManagerCondition(function() {
                return _this110._executionHangUpChecker.timeouted
            }),
            Zn.addEventListener(xi.CONTINUOUS_SESSION_END, function() {
                _this110._executionHangUpChecker.reset()
            }),
            Zn.addEventListener(xi.before(xi.CONTINUOUS_PLAY), this._beforeContinuousPlay.bind(this)),
            Zn.addEventListener(xi.ERROR, function(e) {
                var t = e.detail;
                t.shouldReport && se.reportToEMUIndex(t),
                t.isFatal && _this110.props.setPlayerError(t)
            }),
            Zn.addEventListener(xi.START, function() {
                _this110.props.setPlayerError(null)
            }),
            Zn.addEventListener(xi.ROLLOVER, function() {
                $.isLiveTV || _this110.props.isMinimized || ir.navigateTo({
                    type: Ut.NavigateTypes.VIDEO,
                    entityId: Rt.nextEntity.id,
                    entityType: Rt.nextEntity.type,
                    eabId: Rt.nextEntity.bundle.eabId
                })
            }),
            this._setupFliptry(),
            $.update({
                abRules: {
                    is720p60Enabled: rr.is720p60Enabled(nr.sourceId),
                    isH265Enabled: rr.isH265Enabled(nr.sourceId)
                }
            });
            var e = ds.getAudioTrack(this.props.profileId);
            null != e && Kt.update({
                audioKind: e.kind,
                audioLanguage: e.language
            }),
            at.loadConfig($.computerGuid),
            $r.on("sessionstarted", this._onCastStarted.bind(this)),
            $r.on("sessionresumed", this._onCastResume.bind(this)),
            $r.on("connecting", this._onCastResume.bind(this)),
            $r.on("end", this._onCastEnd.bind(this)),
            $r.on("error", this._onCastError.bind(this)),
            $r.on("settingschanged", this._onCastSettingDataUpdated.bind(this))
        }
        ;
        _proto69.playVideo = function playVideo(e, t) {
            this.props.startPlayer(),
            this._executionHangUpChecker.startInterval(),
            $.update({
                isLiveTV: !!t.isLiveTV
            }),
            this._prepareLoad(t);
            var i = Ui.isOn;
            this.props.isCasting ? ($r.autoplay = i,
            this.loadCast(e, t)) : (Zn.autoplay = i,
            this.load(e, t))
        }
        ;
        _proto69.load = function load(e, t) {
            var _this111 = this;
            return Zn.load(e, t).then(function(_ref20) {
                var e = _ref20.eabIdChanged;
                e && !_this111.props.isMinimized && _this111._navigateToVideo()
            })
        }
        ;
        _proto69.loadCast = function loadCast(e, t) {
            var _this112 = this;
            this.props.setPlayerError(null),
            vt.requestEntities([e]).then(function(e) {
                return e.items && e.items[0]
            }).then(function(i) {
                i && ($.update(_objectSpread({}, t, {
                    eabId: e,
                    sessionGuid: Q.generateGuid()
                })),
                $r.load(e, {
                    entity: i,
                    latitude: $.latitude,
                    longitude: $.longitude,
                    collectionId: $.collectionId,
                    computerGuid: $.computerGuid,
                    deviceAdId: $.deviceAdId,
                    limitAdTracking: $.limitAdTracking,
                    isCasting: _this112.props.isCasting,
                    audioTrack: ds.getAudioTrack(_this112.props.profileId),
                    userId: _this112.props.userId,
                    profileId: _this112.props.profileId
                }))
            })
        }
        ;
        _proto69._prepareLoad = function _prepareLoad(e) {
            var t = e.profile;
            t && (this.props.setUserData({
                userId: e.userId,
                profileId: t.id
            }),
            this._updateUserSettingFromLocalStorage(t.id))
        }
        ;
        _proto69._updateUserSettingFromLocalStorage = function _updateUserSettingFromLocalStorage(e) {
            var t = os.getCaptionStyle(e);
            t && this.props.setCaptionStyle(t),
            this.props.setCaptionDefaultLanguage(as.getCaptionDefaultLanguage(e)),
            this.props.setCaptionDefaultOn(as.isCaptionDefaultOn(e)),
            Ui.isOn = ls.isAutoplayOn(e),
            Zn.autoplay = Ui.isOn;
            var i = us.getMaxBitrate(e) || Zr.getQualities()[0].bitrate;
            Zn.setMaxBitrate(i)
        }
        ;
        _proto69.stopVideo = function stopVideo() {
            this._executionHangUpChecker.reset(),
            Zn.stopVideo()
        }
        ;
        _proto69.setSiteApi = function setSiteApi(e) {
            ir.setApi(e)
        }
        ;
        _proto69.postInit = function postInit() {
            this.onPlayerInstanceStart()
        }
        ;
        _proto69.onPlayerInstanceStart = function onPlayerInstanceStart() {
            Dr.track(Dr.Events.playerInstanceStart)
        }
        ;
        _proto69.onPlayerInstanceEnd = function onPlayerInstanceEnd() {
            Dr.track(Dr.Events.playerInstanceEnd)
        }
        ;
        _proto69.switchMode = function switchMode(e) {
            "page" === e ? (this.props.isAppOn && this._navigateToVideo(),
            this.props.isMinimized && this.props.setViewModeToNormal()) : "modal" !== e || this.props.isMinimized || this.props.setViewModeToMinimized()
        }
        ;
        _proto69._navigateToVideo = function _navigateToVideo() {
            Rt.entity && ir.navigateTo({
                type: Ut.NavigateTypes.VIDEO,
                entityId: Rt.entity.id,
                entityType: Rt.entity.type,
                eabId: Rt.entity.bundle.eabId
            })
        }
        ;
        _proto69._onPageLeave = function _onPageLeave() {
            this.onPlayerInstanceEnd(),
            zt.clearForSession(!0)
        }
        ;
        _proto69._setupFliptry = function _setupFliptry() {
            Zn.addEventListener(xi.WILL_LOAD_START, function() {
                W.IS_NONSUB || Rt.entity.isLive || Hn.load()
            }),
            Zn.addEventListener(xi.STOP, function() {
                Hn.reset()
            })
        }
        ;
        _proto69.scheduleReload = function scheduleReload() {
            var _this113 = this;
            this._reloadTaskId = sr.executeWhenOnline(function() {
                Zn.isVideoStopped || (se.reportToPlayerIndex(ne.Type.RELOAD_APP_RESUME),
                Zn.continuousPlay({
                    reason: "app_resume",
                    entity: Rt.entity
                }),
                _this113._reloadTaskId = null,
                _this113._executionHangUpChecker.startInterval())
            })
        }
        ;
        _proto69._scheduleReloadOnTabVisible = function _scheduleReloadOnTabVisible() {
            document.hidden || this.scheduleReload(),
            document.removeEventListener("visibilitychange", this._scheduleReloadOnTabVisible)
        }
        ;
        _proto69._reloadIfExecutionHangUp = function _reloadIfExecutionHangUp() {
            this._executionHangUpChecker.timeouted ? null === this._reloadTaskId && (document.hidden ? document.addEventListener("visibilitychange", this._scheduleReloadOnTabVisible) : this.scheduleReload()) : this._executionHangUpChecker.resetTime()
        }
        ;
        _proto69._onCastResume = function _onCastResume() {
            $r.setInitialTime(Zn.currentTime),
            Zn.stopVideo({
                reason: yn.PlaybackEndedReason.EXIT
            }),
            this.props.setPlayerError(null),
            this.props.setCastMode(!0),
            ir.backToBrowse({
                type: "pip"
            }),
            this.props.setViewModeToMinimized()
        }
        ;
        _proto69._onCastStarted = function _onCastStarted() {
            this.props.setPlayerError(null),
            this.props.setCastMode(!0),
            this.loadCast($.eabId)
        }
        ;
        _proto69._onCastEnd = function _onCastEnd(e, t) {
            this.props.setCastMode(!1),
            this.playVideo(e, t)
        }
        ;
        _proto69._onCastError = function _onCastError(e) {
            this.props.setPlayerError(e)
        }
        ;
        _proto69._onCastSettingDataUpdated = function _onCastSettingDataUpdated() {
            var e = Nr.settingData;
            e.audioTrack && e.audioTrack.language && ds.storeAudioTrack(e.audioTrack, this.props.profileId)
        }
        ;
        _proto69._beforeContinuousPlay = function _beforeContinuousPlay() {
            if (!Rt.nextEntity || !Rt.nextEntity.bundle)
                return Zn.stopVideo({
                    reason: yn.PlaybackEndedReason.ENDED
                }),
                void this.props.closePlayer();
            this.props.isMinimized || ir.navigateTo({
                type: Ut.NavigateTypes.VIDEO,
                entityId: Rt.nextEntity.id,
                entityType: Rt.nextEntity.type,
                eabId: Rt.nextEntity.bundle.eabId
            })
        }
        ;
        return _class32
    }()))
      , na = i(0)
      , ra = i.n(na)
      , sa = i(32)
      , aa = i.n(sa);
    function oa() {
        return (oa = Object.assign || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var i = arguments[t];
                for (var n in i) {
                    Object.prototype.hasOwnProperty.call(i, n) && (e[n] = i[n])
                }
            }
            return e
        }
        ).apply(this, arguments)
    }
    var la = ra.a.createContext({})
      , da = function(e) {
        return e
    };
    var ua = function(_ra$a$Component) {
        _inheritsLoose(ua, _ra$a$Component);
        function ua(e) {
            var _this114 = _ra$a$Component.call(this, e) || this;
            var t = e.store;
            _this114.state = {
                store: t,
                storeState: t.getState()
            };
            return _this114
        }
        var _proto70 = ua.prototype;
        _proto70.componentDidMount = function componentDidMount() {
            this._isMounted = !0,
            this.subscribe()
        }
        ;
        _proto70.componentWillUnmount = function componentWillUnmount() {
            this._isMounted = !1,
            this.unsubscribe && this.unsubscribe()
        }
        ;
        _proto70.subscribe = function subscribe() {
            var _this115 = this;
            var e = this.props.store;
            this.unsubscribe = e.subscribe(function() {
                var t = e.getState();
                _this115._isMounted && _this115.setState({
                    storeState: t
                })
            })
        }
        ;
        _proto70.render = function render() {
            return ra.a.createElement(la.Provider, {
                value: this.state
            }, this.props.children)
        }
        ;
        return ua
    }(ra.a.Component);
    var ca = function(_f4) {
        _inheritsLoose(ca, _f4);
        function ca() {
            return _f4.call(this) || this
        }
        var _proto71 = ca.prototype;
        _proto71.init = function init(e) {
            this.elem = e,
            this.visible = !0,
            this.notifyReady()
        }
        ;
        _proto71.notifyReady = function notifyReady() {
            this.isReady = !0,
            this.trigger("ready")
        }
        ;
        _proto71.notifyVisibility = function notifyVisibility(e) {
            this.visible = e,
            this.trigger("visibilityChanged", e)
        }
        ;
        _proto71.isActive = function isActive() {
            return !0
        }
        ;
        _proto71.show = function show() {
            this.elem && this.isActive() && (this.elem.show(),
            this.notifyVisibility(!0))
        }
        ;
        _proto71.hide = function hide() {
            this.elem && (this.elem.hide(),
            this.notifyVisibility(!1))
        }
        ;
        return ca
    }(f);
    var ha = function(e) {
        return i(160)("./" + e + ".svg")
    };
    var pa = "\n  <div class=\"player-container\">\n    <div class=\"media-info\"><img/></div>\n    <video class=\"video-player content-video-player\"></video>\n    <div class=\"restore-button player-svgicon\">" + ha("full_screen_hover") + "</div>\n  </div>\n";
    var _a = {
        bottom: 72,
        right: 32,
        width: 288,
        height: 162
    };
    var fa = Tr(function(_ref21) {
        var e = _ref21.upnext
          , t = _ref21.appState
          , i = _ref21.resolution;
        return {
            isCasting: t.isCasting,
            isMinimized: t.isMinimized,
            isEndCredit: e.isEndCredit,
            playerSizeResolution: i.width * i.height
        }
    }, {
        setEndCredit: o.setEndCredit
    })(new (function(_ca) {
        _inheritsLoose(_class33, _ca);
        function _class33() {
            var _this116;
            _this116 = _ca.call(this) || this,
            _this116._mediaImageUrl = null;
            return _this116
        }
        var _proto72 = _class33.prototype;
        _proto72.init = function init() {
            var e = ft()(pa);
            $.onUpdated(this.toggleCursor.bind(this)),
            Kt.onUpdated(this.toggleCursor.bind(this)),
            Kt.onUpdated(this.forceVideoLayout.bind(this)),
            _n.onUpdated(this.toggleCursor.bind(this)),
            Nr.onUpdated(this.onCastStateChange.bind(this)),
            this.initElements(e),
            _ca.prototype.init.call(this, e)
        }
        ;
        _proto72.initElements = function initElements(e) {
            var _this117 = this;
            this.elems = {
                video: e.find("video"),
                mediaInfoCover: e.find(".media-info > img")
            },
            this.elems.video[0].disablePictureInPicture = !0,
            this.elems.mediaInfoCover.hide(),
            this._needStretchVideo() && this.elems.video.css({
                "object-fit": "fill",
                position: "absolute",
                top: "50%",
                left: "50%",
                transform: "translate(-50%, -50%)"
            }),
            e.on("click", function() {
                return _this117.onRestore()
            })
        }
        ;
        _proto72.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var _this$props = this.props
              , t = _this$props.isEndCredit
              , i = _this$props.isMinimized
              , n = _this$props.playerSizeResolution;
            e.isEndCredit && !e.isMinimized || !t || i ? (e.isEndCredit && !t || !e.isMinimized && i) && this.exitEndCredit() : this.enterEndCredit(),
            n !== e.playerSizeResolution && this.refreshVideoLayout()
        }
        ;
        _proto72.onCastStateChange = function onCastStateChange(e, t, i) {
            var _this118 = this;
            if (this.props.isCasting && i.mediaMetadata && e.mediaMetadata) {
                var _t42 = e.mediaMetadata.imageUrl;
                _t42 != this._mediaImageUrl && (this._mediaImageUrl = _t42,
                Q.loadImage(_t42).then(function(e) {
                    _this118.elems.mediaInfoCover.removeClass("media-info--fadeIn"),
                    _this118.elems.mediaInfoCover.addClass("media-info--fadeOut"),
                    setTimeout(function() {
                        _this118.elems.mediaInfoCover.attr("src", e),
                        _this118.elems.mediaInfoCover.show(),
                        _this118.elems.mediaInfoCover.removeClass("media-info--fadeOut"),
                        _this118.elems.mediaInfoCover.addClass("media-info--fadeIn")
                    }, 100)
                }).catch(function() {}))
            }
            this.props.isCasting || (this.elems.mediaInfoCover.removeAttr("src"),
            this.elems.mediaInfoCover.hide(),
            this._mediaImageUrl = null)
        }
        ;
        _proto72.onRestore = function onRestore() {
            this.props.isEndCredit && this.props.setEndCredit(!1)
        }
        ;
        _proto72.enterEndCredit = function enterEndCredit() {
            this.elem.addClass("player-container--endcredit");
            var e = _a.width
              , t = _a.height
              , i = _a.bottom
              , n = _a.right;
            this.elem.css({
                right: n + "px",
                bottom: i + "px",
                width: e + "px",
                height: t + "px"
            }),
            this.refreshVideoLayout()
        }
        ;
        _proto72.exitEndCredit = function exitEndCredit() {
            this.elem.removeClass("player-container--endcredit"),
            this.elem.attr("style", ""),
            this.refreshVideoLayout()
        }
        ;
        _proto72.toggleCursor = function toggleCursor() {
            "idle" == $.pointerMonitorState && _n.isReady ? this.elem.addClass("hide-cursor") : this.elem.removeClass("hide-cursor")
        }
        ;
        _proto72.forceVideoLayout = function forceVideoLayout(e, t, i) {
            var _this119 = this;
            if (e.isVod && i.mediaType && e.mediaType == Ft.CONTENT && t.mediaType != e.mediaType)
                if (this._needStretchVideo())
                    this.refreshVideoLayout();
                else {
                    var _e65 = function(t) {
                        _this119.elems.video.width("99.99%"),
                        setTimeout(function() {
                            return _this119.elems.video.width("100%")
                        }, 100),
                        t && setTimeout(function() {
                            return _e65(--t)
                        }, 1100)
                    };
                    _e65(3)
                }
            (i.maxVideoWidth || i.maxVideoHeight) && this.refreshVideoLayout()
        }
        ;
        _proto72.refreshVideoLayout = function refreshVideoLayout() {
            if (!this._needStretchVideo())
                return;
            if (!this.elem)
                return;
            var e = [16, 9];
            var t = Zn.playlistManager.getPlaylist();
            t && t.aspectRatio ? "4x3" === t.aspectRatio && (e = [4, 3]) : Kt.maxVideoWidth && Kt.maxVideoHeight && (e = [Kt.maxVideoWidth, Kt.maxVideoHeight]);
            var i = this.elem.width()
              , n = this.elem.height()
              , r = Math.min(i / e[0], n / e[1])
              , s = r * e[0] / i
              , a = r * e[1] / n;
            this.elems.video.css({
                width: 100 * s + "%",
                height: 100 * a + "%"
            })
        }
        ;
        _proto72._needStretchVideo = function _needStretchVideo() {
            return !/edge|safari/i.test(W.BROWSER)
        }
        ;
        _createClass(_class33, [{
            key: "videoTag",
            get: function get() {
                return this.elems.video[0]
            }
        }]);
        return _class33
    }(ca)));
    var ga = Tr(function(_ref22) {
        var e = _ref22.playerState;
        return {
            mediaType: e.mediaType
        }
    })(new (function(_ca2) {
        _inheritsLoose(_class34, _ca2);
        function _class34() {
            return _ca2.call(this) || this
        }
        var _proto73 = _class34.prototype;
        _proto73.init = function init() {
            var e = ft()("\n  <div class=\"ad-container\">\n    <video class='video-player ad-video-player'></video>\n    <div class='ad-player'>\n      <div id='vpaid-ad-slot' class='vpaid-ad-slot'></div>\n    </div>\n  </div>\n");
            this.initElements(e),
            _ca2.prototype.init.call(this, e),
            this.hide()
        }
        ;
        _proto73.initElements = function initElements(e) {
            this.elems = {
                adSlot: e.find(".vpaid-ad-slot"),
                adVideo: e.find(".ad-video-player")
            },
            this.videoTag.disablePictureInPicture = !0
        }
        ;
        _proto73.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var t = this.props.mediaType;
            t !== e.mediaType && (t == Ft.BURNED_IN_AD || t == Ft.INSERTED_AD ? (t == Ft.BURNED_IN_AD ? (this.elem.addClass("ad-container--burned-in"),
            this.elems.adVideo.hide(),
            this.elems.adSlot.hide()) : (this.elems.adVideo.show(),
            this.elems.adSlot.show(),
            this.elem.removeClass("ad-container--burned-in")),
            this.show()) : this.hide())
        }
        ;
        _createClass(_class34, [{
            key: "adSlot",
            get: function get() {
                return this.elems.adSlot.get(0)
            }
        }, {
            key: "videoTag",
            get: function get() {
                return this.elems.adVideo.get(0)
            }
        }]);
        return _class34
    }(ca)));
    var ma = Tr(function(_ref23) {
        var e = _ref23.playerState;
        return {
            mediaType: e.mediaType
        }
    })(new (function(_ca3) {
        _inheritsLoose(_class35, _ca3);
        function _class35() {
            return _ca3.call(this) || this
        }
        var _proto74 = _class35.prototype;
        _proto74.init = function init() {
            var e = ft()("  \n  <div class=\"intro-container\">\n    <video class=\"video-player intro-video-player\"></video>\n  </div>\n");
            this.initElements(e),
            _ca3.prototype.init.call(this, e),
            this.hide()
        }
        ;
        _proto74.initElements = function initElements(e) {
            this.elems = {
                video: e.find("video")
            },
            this.videoTag.disablePictureInPicture = !0
        }
        ;
        _proto74.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var t = this.props.mediaType;
            e.mediaType !== t && (function(e) {
                return e === Ft.INTRO || e === Ft.POST_INTRO
            }(t) ? this.show() : this.hide())
        }
        ;
        _createClass(_class35, [{
            key: "videoTag",
            get: function get() {
                return this.elems.video[0]
            }
        }]);
        return _class35
    }(ca)));
    var ya = "\n  <div class='widgets-container'>\n    <div class='back-to-browse-widget keep-mouse-active' data-role=\"control\">\n      <div class='minimize-button player-svgicon'>" + ha("close_button") + "</div>\n    </div>\n    </div>\n  </div>\n"
      , va = {
        ESCAPE: "Escape",
        SPACE: "Space",
        ENTER: "Enter",
        ARROW_LEFT: "ArrowLeft",
        ARROW_RIGHT: "ArrowRight",
        ARROW_UP: "ArrowUp",
        ARROW_DOWN: "ArrowDown",
        TAB: "Tab",
        K: "k",
        M: "m",
        F: "f"
    }
      , Ea = {
        ESC: va.ESCAPE,
        " ": va.SPACE,
        Spacebar: va.SPACE,
        Left: va.ARROW_LEFT,
        Right: va.ARROW_RIGHT,
        Up: va.ARROW_UP,
        Down: va.ARROW_DOWN
    }
      , ba = function(e) {
        return Ea[e] || e
    };
    var Ta = {
        KEYS: va,
        getUnifiedKey: ba,
        hasHotkey: function hasHotkey(e, t) {
            return e && e.split(",").includes(t)
        },
        setHotkeys: function setHotkeys(e, t) {
            if (t === void 0) {
                t = {}
            }
            var i = Object.keys(t);
            i && i.length > 0 && (e.dataset.hotkeys = i.join(","),
            e.addEventListener("keydown", function(e) {
                var n = ba(e.key);
                i.includes(n) && t[n](e)
            }))
        }
    };
    var Sa = function(e, t) {
        if (e && t)
            for (var _i39 in t) {
                t[_i39] && e.setAttribute(_i39, t[_i39])
            }
    }
      , Aa = function(e, _ref24) {
        var t = _ref24.onTrigger
          , i = _ref24.onIncrease
          , n = _ref24.onDecrease;
        var r = {};
        t && (r[Ta.KEYS.SPACE] = t,
        r[Ta.KEYS.ENTER] = t),
        i && (r[Ta.KEYS.ARROW_RIGHT] = i,
        r[Ta.KEYS.ARROW_UP] = i),
        n && (r[Ta.KEYS.ARROW_LEFT] = n,
        r[Ta.KEYS.ARROW_DOWN] = n),
        Ta.setHotkeys(e, r)
    }
      , Pa = function(e) {
        var t = Math.floor(e / 60)
          , i = Math.floor(t / 60);
        var n = "";
        return i > 0 && (n = i + " hour" + (i > 1 ? "s " : " ")),
        n + (t % 60 + " minute" + (t % 60 > 1 ? "s" : ""))
    };
    var wa = Tr(function(_ref25) {
        var e = _ref25.appState
          , t = _ref25.playerState;
        return {
            isMinimized: e.isMinimized,
            isBackToBrowseButtonVisible: t.paused || "active" === e.pointerMonitorState
        }
    }, {
        setViewModeToMinimized: n.setViewModeToMinimized,
        setViewModeToNormal: n.setViewModeToNormal,
        closePlayer: r.closePlayer
    })(new (function(_ca4) {
        _inheritsLoose(_class36, _ca4);
        function _class36() {
            return _ca4.call(this) || this
        }
        var _proto75 = _class36.prototype;
        _proto75.init = function init() {
            var e = ft()(ya);
            this.initElements(e),
            _ca4.prototype.init.call(this, e)
        }
        ;
        _proto75.initElements = function initElements(e) {
            this.elems = {},
            this.elems.backToBrowse = e.find(".back-to-browse-widget"),
            Sa(this.elems.backToBrowse[0], {
                role: "button",
                tabindex: "0",
                "aria-label": this.props.isMinimized ? "Close" : "Minimize"
            }),
            Aa(this.elems.backToBrowse[0], {
                onTrigger: this.closePlayer.bind(this)
            }),
            this.elems.backToBrowse[0].addEventListener("click", this.closePlayer.bind(this)),
            this.elems.backToBrowse.hide()
        }
        ;
        _proto75.closePlayer = function closePlayer() {
            this.props.setViewModeToNormal(),
            this.props.closePlayer()
        }
        ;
        _proto75.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var _this$props2 = this.props
              , t = _this$props2.isMinimized
              , i = _this$props2.isBackToBrowseButtonVisible;
            t !== e.isMinimized && Sa(this.elems.backToBrowse[0], {
                "aria-label": t ? "Close" : "Minimize"
            }),
            i ? this.elems.backToBrowse.show() : this.elems.backToBrowse.hide()
        }
        ;
        return _class36
    }(ca)));
    var ka = function(_f5) {
        _inheritsLoose(ka, _f5);
        function ka() {
            return _f5.call(this) || this
        }
        var _proto76 = ka.prototype;
        _proto76.init = function init(e) {
            this.elem = e,
            this.notifyReady()
        }
        ;
        _proto76.notifyReady = function notifyReady() {
            this.isReady = !0,
            this.trigger("ready")
        }
        ;
        _proto76.show = function show() {
            this.elem && this.elem.show()
        }
        ;
        _proto76.hide = function hide() {
            this.elem && this.elem.hide()
        }
        ;
        return ka
    }(f);
    var Ca = "\n  <div class='entity-badge'>\n    <div class='entity-badge__live player-svgicon'>" + ha("live_badge") + "</div>\n    <div class='entity-badge__recorded player-svgicon'>" + ha("recorded_badge") + "</div>\n  </div>";
    var Ia = function(_ka) {
        _inheritsLoose(Ia, _ka);
        function Ia() {
            var _this120;
            _this120 = _ka.call(this) || this,
            _this120.init(ft()(Ca));
            return _this120
        }
        var _proto77 = Ia.prototype;
        _proto77.displayByType = function displayByType(e, t) {
            e ? (this.elem.show(),
            this.elem.find(".player-svgicon").hide(),
            this.elem.find(".entity-badge__live").show()) : t ? (this.elem.show(),
            this.elem.find(".player-svgicon").hide(),
            this.elem.find(".entity-badge__recorded").show()) : this.elem.hide()
        }
        ;
        return Ia
    }(ka);
    var Ra = function(_ref26) {
        var e = _ref26.name
          , _ref26$children = _ref26.children
          , t = _ref26$children === void 0 ? "" : _ref26$children
          , _ref26$className = _ref26.className
          , i = _ref26$className === void 0 ? "" : _ref26$className;
        return "\n  <div class=\"controls__setting-item controls__setting-" + e + " " + i + "\">\n    <div class=\"controls__setting-label\">\n      <div class=\"controls__setting-head\">" + e + "</div>\n      <div class=\"controls__setting-tail\"></div>\n    </div>\n    " + t + "\n  </div>"
    }
      , Da = function(_ref27) {
        var e = _ref27.link
          , t = _ref27.content;
        return "<div class=\"controls__setting-col-ft\"><a class=\"controls__setting-footerlink\" href=\"" + e + "\" target=\"_blank\">" + t + "</a></div>"
    }
      , La = function() {
        return "<div class=\"controls__setting-enter-icon player-svgicon\">" + ha("arrow") + "</div>"
    }
      , Ma = function() {
        return "\n  <div class=\"controls__setting-switch\">\n    <div class=\"controls__setting-slider\">\n      <span class=\"controls__setting-slider-toggler\">" + ha("check") + "</span>\n    </div>\n  </div>\n"
    }
      , Oa = function(_ref28) {
        var e = _ref28.name
          , _ref28$children = _ref28.children
          , t = _ref28$children === void 0 ? "" : _ref28$children;
        return "\n  <div class=\"controls__setting-col controls__setting-" + e + "\">\n    <div class=\"controls__setting-head\">" + e + "</div>\n    <div class=\"controls__setting-bd\" aria-label=\"" + e + "\" role=\"radiogroup\" aria-roledescription=\"group\"></div>\n    " + t + "\n  </div>\n"
    }
      , xa = function() {
        return "\n  <div class=\"controls__setting-normal\">\n    \n  <div class=\"controls__setting-main-menu\">\n    " + function(_ref29) {
            var e = _ref29.name
              , _ref29$items = _ref29.items
              , t = _ref29$items === void 0 ? [] : _ref29$items
              , _ref29$children = _ref29.children
              , i = _ref29$children === void 0 ? "" : _ref29$children
              , _ref29$className = _ref29.className
              , n = _ref29$className === void 0 ? "" : _ref29$className;
            return "\n  <div class=\"controls__setting-item controls__setting-item--multi controls__setting-" + e + " " + n + "\">\n    <div class=\"controls__setting-item-list\">\n    " + t.map(function(e) {
                return "<div class=\"controls__setting-label controls__setting-label--" + e + "\">\n        <div class=\"controls__setting-head\">" + e + "</div>\n        <div class=\"controls__setting-tail\"></div>\n      </div>"
            }).join("") + "\n    </div>\n    " + i + "\n  </div>"
        }({
            name: "language",
            items: ["subtitles", "audio"],
            children: La(),
            className: "controls__setting--navigable"
        }) + "\n    " + Ra({
            name: "quality",
            children: La(),
            className: "controls__setting--navigable"
        }) + "\n    " + Ra({
            name: "autoplay",
            children: Ma()
        }) + "\n  </div>\n    \n  <div class=\"controls__setting-sub-menu controls__setting-sub-menu-quality\">\n    <div class=\"controls__setting-back-icon player-svgicon\">" + ha("arrow") + "</div>\n      " + Oa({
            name: "quality",
            children: Da({
                content: "Learn More",
                link: "https://help.hulu.com/en-us/video-quality-settings"
            })
        }) + "\n    <div class=\"controls__setting-divider\"></div>\n  </div>\n\n    \n  <div class=\"controls__setting-sub-menu controls__setting-sub-menu-language\">\n    <div class=\"controls__setting-back-icon player-svgicon\">" + ha("arrow") + "</div>\n    " + Oa({
            name: "subtitles",
            children: Da({
                content: "Settings",
                link: "#"
            })
        }) + "\n    " + Oa({
            name: "audio"
        }) + "\n    <div class=\"controls__setting-divider\"></div>\n  </div>\n\n  </div>\n"
    }
      , Na = function() {
        return "\n<div class=\"controls__setting-panel\">\n  " + xa() + "\n  \n  <div class=\"controls__setting-pip\">\n    <div class=\"controls__setting-pip-menu\">\n      " + Ra({
            name: "subtitles",
            children: Ma()
        }) + "\n      <div class=\"controls__setting-pip-hint\">Maximize player for more Settings.</div>\n    </div>\n  </div>\n\n</div>\n"
    }
      , Ua = function(_ref30) {
        var e = _ref30.val
          , t = _ref30.selected
          , i = _ref30.label;
        return "\n  <div class=\"controls__setting-option " + (t ? "controls__setting-option--selected" : "") + "\" data-val=\"" + e + "\"\n    tabindex=\"0\" role=\"radio\" aria-roledescription=\"radio button\" aria-checked=\"" + (t ? "true" : "false") + "\">\n    <div class=\"controls__setting-option-radio\"></div>\n    <div class=\"controls__setting-option-label\">" + (i || e) + "</div>\n  </div>\n"
    };
    var Ba = function(_ka2) {
        _inheritsLoose(Ba, _ka2);
        function Ba(e) {
            var _this121;
            _this121 = _ka2.call(this) || this,
            _ka2.prototype.init.call(_assertThisInitialized(_this121), e),
            _this121.initElements(e),
            _this121.elems.qualitySettingBd.on("click", ".controls__setting-option", function(e) {
                return _this121.changeQuality(e)
            });
            return _this121
        }
        var _proto78 = Ba.prototype;
        _proto78.initElements = function initElements(e) {
            this.elems = {
                qualitySettingBd: e.find(".controls__setting-bd")
            }
        }
        ;
        _proto78.changeQuality = function changeQuality(e) {
            var t = Number(e.currentTarget.dataset.val);
            this.props.isCasting ? $r.setMaxBitrate(t) : (Zn.setMaxBitrate(t),
            us.storeMaxBitrate(t, this.props.profileId)),
            this.renderSelectedQualitySetting()
        }
        ;
        _proto78.renderFullQualitySetting = function renderFullQualitySetting() {
            var _this122 = this;
            var e = Zn.playbackProperty.getMaxBitrate()
              , t = Zr.getQualities().map(function(t) {
                return Ua({
                    val: t.bitrate,
                    selected: e === t.bitrate,
                    label: t.name
                })
            }).join("");
            this.elems.qualitySettingBd.html(t),
            this.elems.qualitySettingBd[0].querySelectorAll(".controls__setting-option").forEach(function(e) {
                Aa(e, {
                    onTrigger: _this122.changeQuality.bind(_this122)
                })
            })
        }
        ;
        _proto78.renderSelectedQualitySetting = function renderSelectedQualitySetting() {
            var e = Zn.playbackProperty.getMaxBitrate()
              , t = this.elems.qualitySettingBd
              , i = t.find(".controls__setting-option")
              , n = t.find(".controls__setting-option[data-val=\"" + e + "\"]");
            i.removeClass("controls__setting-option--selected"),
            n.addClass("controls__setting-option--selected"),
            t[0].querySelectorAll(".controls__setting-option").forEach(function(t) {
                Sa(t, {
                    "aria-checked": t.dataset.val === String(e) ? "true" : "false"
                })
            })
        }
        ;
        return Ba
    }(ka);
    var Fa = function(e) {
        return Tr(function(_ref31) {
            var e = _ref31.appState
              , t = _ref31.user;
            return {
                isCasting: e.isCasting,
                profileId: t.profileId
            }
        })(new Ba(e))
    }
      , Va = i(9)
      , Ha = i.n(Va);
    var ja = function(_ka3) {
        _inheritsLoose(ja, _ka3);
        function ja(e) {
            var _this123;
            _this123 = _ka3.call(this) || this,
            _ka3.prototype.init.call(_assertThisInitialized(_this123), e),
            _this123.initElements(e),
            _this123.elems.subtitleSettingBd.on("click", ".controls__setting-option", _this123.changeSubtitle.bind(_assertThisInitialized(_this123))),
            _this123.elems.subtitleSettingFtLink.on("click", _this123.onSubtitleStyleOpt.bind(_assertThisInitialized(_this123))),
            Sa(_this123.elems.subtitleSettingFtLink[0], {
                tabindex: "-1"
            }),
            Nr.onUpdated(_this123.onCastStateChange.bind(_assertThisInitialized(_this123)));
            return _this123
        }
        var _proto79 = ja.prototype;
        _proto79.initElements = function initElements(e) {
            this.elems = {
                subtitleSettingBd: e.find(".controls__setting-bd"),
                subtitleSettingFtLink: e.find(".controls__setting-footerlink")
            }
        }
        ;
        _proto79.changeSubtitle = function changeSubtitle(e) {
            var t = e.currentTarget.dataset.val;
            if (this.props.isCasting)
                $r.setCaption(t);
            else {
                var _e66 = "off" !== t;
                _e66 ? (this.props.turnOnCaption({
                    language: t
                }),
                as.storeCaptionDefaultLanguage(t, this.props.profileId)) : this.props.turnOffCaption(),
                as.storeCaptionDefaultOn(_e66, this.props.profileId)
            }
        }
        ;
        _proto79.onSubtitleStyleOpt = function onSubtitleStyleOpt(e) {
            e.preventDefault(),
            this.props.showCaptionStylePanel()
        }
        ;
        _proto79.renderFullSubtitleSetting = function renderFullSubtitleSetting() {
            var _this124 = this;
            var e = "";
            var t = this.props.isCasting
              , i = t ? Nr.settingData.captionsOptions.filter(function(e) {
                return "off" !== e
            }) : this.props.allLanguages
              , n = t ? "off" !== Nr.settingData.captionsLanguage : this.props.isCaptionOn;
            if (i && i.length > 0) {
                e += Ua({
                    val: "off",
                    selected: !n,
                    label: "Off"
                });
                for (var _iterator6 = _createForOfIteratorHelperLoose(i), _step6; !(_step6 = _iterator6()).done; ) {
                    var _t43 = _step6.value;
                    e += Ua({
                        val: _t43,
                        selected: this.props.isCaptionOn && this.currentLanguage === _t43,
                        label: Ge[_t43]
                    })
                }
            } else
                e = "\n  <div class='controls__setting-unavailable'>" + "Subtitles are unavailable for this content." + "</div>\n";
            this.elems.subtitleSettingBd.html(e),
            this.elems.subtitleSettingBd[0].querySelectorAll(".controls__setting-option").forEach(function(e) {
                Aa(e, {
                    onTrigger: _this124.changeSubtitle.bind(_this124)
                })
            })
        }
        ;
        _proto79.renderSelectedSubtitleSetting = function renderSelectedSubtitleSetting() {
            var e = this.currentLanguage
              , t = this.elems.subtitleSettingBd
              , i = t.find(".controls__setting-option")
              , n = t.find(".controls__setting-option[data-val=\"" + e + "\"]");
            i.removeClass("controls__setting-option--selected"),
            n.addClass("controls__setting-option--selected"),
            t[0].querySelectorAll(".controls__setting-option").forEach(function(t) {
                Sa(t, {
                    "aria-checked": t.dataset.val === e ? "true" : "false"
                })
            })
        }
        ;
        _proto79.onViewPropsUpdated = function onViewPropsUpdated(e) {
            this.props.isCaptionOn === e.isCaptionOn && this.props.currentLanguage === e.currentLanguage || this.renderSelectedSubtitleSetting(),
            Ha()(this.props.allLanguages, e.allLanguages) || this.renderFullSubtitleSetting()
        }
        ;
        _proto79.onCastStateChange = function onCastStateChange(e, t, i) {
            this.props.isCasting && i.settingData && e.settingData.captionsLanguage !== t.settingData.captionsLanguage && this.renderSelectedSubtitleSetting()
        }
        ;
        _createClass(ja, [{
            key: "currentLanguage",
            get: function get() {
                return this.props.isCasting ? Nr.settingData.captionsLanguage : this.props.isCaptionOn ? this.props.currentLanguage : "off"
            }
        }]);
        return ja
    }(ka);
    var Wa = function(e) {
        return Tr(function(_ref32) {
            var e = _ref32.captions
              , t = _ref32.appState
              , i = _ref32.user;
            return {
                allLanguages: e.allLanguages,
                isCaptionOn: e.isOn,
                isCaptionDefaultOn: e.isDefaultOn,
                isCasting: t.isCasting,
                currentLanguage: e.currentLanguage,
                profileId: i.profileId
            }
        }, {
            showCaptionStylePanel: s.showCaptionStylePanel,
            turnOffCaption: d.turnOffCaption,
            turnOnCaption: d.turnOnCaption
        })(new ja(e))
    };
    var Ga = {
        main: "",
        "main-desc": "Audio Description",
        descriptions: "Audio Description",
        commentary: "Audio Commentary"
    }
      , Ka = function(e) {
        if (e === void 0) {
            e = {}
        }
        return (e.language || "primary") + "-" + (e.kind || "main")
    }
      , za = function(e, t) {
        return null != e && null != t && e.kind === t.kind && e.language == t.language
    }
      , qa = function(e, t) {
        if (e === void 0) {
            e = {}
        }
        if (t === void 0) {
            t = "Primary"
        }
        return [Ge[e.language] || t, Ga[e.kind || "main"]].filter(Boolean).join(" - ")
    };
    var Ya = function(_ka4) {
        _inheritsLoose(Ya, _ka4);
        function Ya(e) {
            var _this125;
            _this125 = _ka4.call(this) || this,
            _ka4.prototype.init.call(_assertThisInitialized(_this125), e),
            _this125.initElements(e),
            Kt.onUpdated(_this125.onPlayerStateChange.bind(_assertThisInitialized(_this125))),
            Nr.onUpdated(_this125.onCastPlayerStateChange.bind(_assertThisInitialized(_this125)));
            return _this125
        }
        var _proto80 = Ya.prototype;
        _proto80.initElements = function initElements(e) {
            this.elems = {
                audioSettingBd: e.find(".controls__setting-bd")
            }
        }
        ;
        _proto80.changeAudio = function changeAudio(e) {
            this.props.isCasting ? $r.switchAudioTrack(e.language, e.kind) : Zn.switchAudioTrack({
                kind: e.kind,
                language: e.language
            })
        }
        ;
        _proto80.renderFullAudioSetting = function renderFullAudioSetting() {
            var _this126 = this;
            var e = this.props.isCasting
              , t = e ? Nr.settingData.audioTrackOptions : Array.from(Kt.audioTracks)
              , i = (e ? Nr.isLive : Kt.isLive) ? "Primary" : "Default"
              , n = e ? Nr.settingData.audioTrack : Kt.activeAudioTrack;
            var r = (t || []).filter(function(e, t, i) {
                return i.findIndex(function(t) {
                    return za(t, e)
                }) === t
            }).map(function(e) {
                return Object.assign(e, {
                    value: Ka(e),
                    selected: za(n, e),
                    label: qa(e, i)
                })
            }).sort(function(e, t) {
                return e.label.localeCompare(t.label)
            }).map(function(e) {
                var t = Ua({
                    val: e.value,
                    selected: e.selected,
                    label: e.label
                })
                  , i = ft()(t)[0];
                return i.addEventListener("click", function() {
                    return _this126.changeAudio(e)
                }),
                Aa(i, {
                    onTrigger: function onTrigger() {
                        return _this126.changeAudio(e)
                    }
                }),
                i
            });
            r.length || (r = [ft()(Ua({
                val: "primary",
                selected: !0,
                label: qa(n, i)
            }))[0]]);
            var s = this.elems.audioSettingBd[0];
            s.innerHTML = "",
            r.forEach(function(e) {
                return s.appendChild(e)
            })
        }
        ;
        _proto80.renderSelectedAudioSetting = function renderSelectedAudioSetting() {
            var e = this.props.isCasting ? Nr.settingData.audioTrack : Kt.activeAudioTrack;
            if (!e)
                return;
            var t = this.elems.audioSettingBd
              , i = t.find(".controls__setting-option")
              , n = t.find(".controls__setting-option[data-val=\"" + Ka(e) + "\"]");
            i.removeClass("controls__setting-option--selected"),
            n.addClass("controls__setting-option--selected"),
            t[0].querySelectorAll(".controls__setting-option").forEach(function(t) {
                Sa(t, {
                    "aria-checked": t.dataset.val === Ka(e) ? "true" : "false"
                })
            })
        }
        ;
        _proto80.onPlayerStateChange = function onPlayerStateChange(e, t, i) {
            (i.audioKind || i.audioLanguage) && this.renderSelectedAudioSetting()
        }
        ;
        _proto80.onCastPlayerStateChange = function onCastPlayerStateChange(e, t, i) {
            i.settingData && this.renderSelectedAudioSetting()
        }
        ;
        return Ya
    }(ka);
    var Qa = function(e) {
        return Tr(function(_ref33) {
            var e = _ref33.appState;
            return {
                isCasting: e.isCasting
            }
        })(new Ya(e))
    };
    var $a = function() {
        var e = document.activeElement;
        function t(e) {
            return e && "function" == typeof e.focus && e.focus(),
            document.activeElement === e
        }
        return document.addEventListener("focus", function(t) {
            e = t.target
        }, !0),
        {
            focusFirstFocusableElement: function e(i) {
                for (var _n28 = 0; _n28 < i.childNodes.length; _n28++) {
                    var _r16 = i.childNodes[_n28];
                    if (t(_r16) || e(_r16))
                        return !0
                }
                return !1
            },
            getLastFocusedElement: function getLastFocusedElement() {
                return e
            }
        }
    }();
    var Xa = Tr(function(_ref34) {
        var e = _ref34.captions
          , t = _ref34.user
          , i = _ref34.appState;
        return {
            isCaptionOn: e.isOn,
            currentLanguage: e.currentLanguage,
            allLanguages: e.allLanguages,
            profileId: t.profileId,
            isCasting: i.isCasting
        }
    })(new (function(_ca5) {
        _inheritsLoose(_class37, _ca5);
        function _class37() {
            var _this127;
            _this127 = _ca5.call(this) || this,
            Nr.onUpdated(_this127.onCastStateChange.bind(_assertThisInitialized(_this127)));
            return _this127
        }
        var _proto81 = _class37.prototype;
        _proto81.init = function init(e) {
            _ca5.prototype.init.call(this, e),
            this.initElements(e),
            this.audioViewer = new Qa(this.elems.audioSettingView),
            this.subtitleViewer = new Wa(this.elems.subtitleSettingView),
            this.qualityViewer = new Fa(this.elems.qualitySettingView),
            Sa(this.elems.mainSettingMenu[0], {
                role: "menu"
            });
            var t = this.elems.settingItemLanguage[0];
            Sa(t, {
                tabindex: "0",
                role: "menuitem",
                "aria-haspopup": "true"
            }),
            Aa(t, {
                onTrigger: this.openLanguageSettingMenu.bind(this)
            });
            var i = this.elems.settingItemQuality[0];
            Sa(i, {
                tabindex: "0",
                role: "menuitem",
                "aria-haspopup": "true"
            }),
            Aa(i, {
                onTrigger: this.openQualitySettingMenu.bind(this)
            });
            var n = this.elems.settingItemAutoplay[0];
            Sa(n, {
                tabindex: "0",
                role: "menuitemcheckbox",
                "aria-checked": Zn.autoplay ? "true" : "false"
            }),
            Aa(n, {
                onTrigger: this.onChangeAutoPlay.bind(this)
            });
            var r = this.elems.backToMainSettingButton;
            for (var _e67 = 0; _e67 < r.length; _e67++) {
                var _t44 = r.get(_e67);
                Sa(_t44, {
                    tabindex: "0",
                    role: "button",
                    "aria-label": "Back"
                }),
                Aa(_t44, {
                    onTrigger: this.openMainSettingMenu.bind(this)
                })
            }
            this.elems.settingItemLanguage.on("click", this.openLanguageSettingMenu.bind(this)),
            this.elems.settingItemQuality.on("click", this.openQualitySettingMenu.bind(this)),
            this.elems.backToMainSettingButton.on("click", this.openMainSettingMenu.bind(this)),
            this.hideAllSettingMenus()
        }
        ;
        _proto81.initElements = function initElements(e) {
            this.elems = {
                mainSettingMenu: e.find(".controls__setting-main-menu"),
                languageSettingMenu: e.find(".controls__setting-sub-menu-language"),
                qualitySettingMenu: e.find(".controls__setting-sub-menu-quality"),
                settingItemLanguage: e.find(".controls__setting-main-menu .controls__setting-language"),
                settingItemQuality: e.find(".controls__setting-main-menu .controls__setting-quality"),
                settingItemAutoplay: e.find(".controls__setting-main-menu .controls__setting-autoplay"),
                autoplayToggler: e.find(".controls__setting-autoplay .controls__setting-switch"),
                backToMainSettingButton: e.find(".controls__setting-sub-menu .controls__setting-back-icon"),
                subtitleSettingView: e.find(".controls__setting-col.controls__setting-subtitles"),
                audioSettingView: e.find(".controls__setting-col.controls__setting-audio"),
                qualitySettingView: e.find(".controls__setting-col.controls__setting-quality"),
                autoplaySettingView: e.find(".controls__setting-col.controls__setting-autoplay")
            },
            this.elems.settingItemAutoplay.on("click", this.onChangeAutoPlay.bind(this))
        }
        ;
        _proto81.onChangeAutoPlay = function onChangeAutoPlay() {
            var e = this.props.isCasting ? !Nr.settingData.isAutoPlayOn : !Zn.autoplay;
            this.props.isCasting ? $r.autoplay = e : (Ui.isOn = e,
            Zn.autoplay = e,
            ls.storeAutoplay(e, this.props.profileId)),
            this.elems.autoplayToggler.toggleClass("controls__setting-switch__open", e),
            Sa(this.elems.settingItemAutoplay[0], {
                "aria-checked": Zn.autoplay ? "true" : "false"
            })
        }
        ;
        _proto81.openMainSettingMenu = function openMainSettingMenu() {
            this.hideAllSettingMenus(),
            this.showMainSettingMenu(),
            document.addEventListener("click", this.onClickBlankHandler),
            $a.focusFirstFocusableElement(this.elems.mainSettingMenu[0])
        }
        ;
        _proto81.openLanguageSettingMenu = function openLanguageSettingMenu() {
            this.isLanguageSettingAvailable && (this.hideAllSettingMenus(),
            this.showLanguageSettingMenu(),
            $a.focusFirstFocusableElement(this.elems.languageSettingMenu[0]))
        }
        ;
        _proto81.openQualitySettingMenu = function openQualitySettingMenu() {
            this.hideAllSettingMenus(),
            this.showQualitySettingMenu(),
            $a.focusFirstFocusableElement(this.elems.qualitySettingMenu[0])
        }
        ;
        _proto81.onViewPropsUpdated = function onViewPropsUpdated(e) {
            this.props.currentLanguage !== e.currentLanguage && this.renderMainSettingItems()
        }
        ;
        _proto81.onCastStateChange = function onCastStateChange(e, t, i) {
            this.props.isCasting && i.settingData && e.settingData.isAutoPlayOn !== t.settingData.isAutoPlayOn && this.renderMainSettingItems()
        }
        ;
        _proto81.hideAllSettingMenus = function hideAllSettingMenus() {
            this.elems.mainSettingMenu.hide(),
            this.elems.languageSettingMenu.hide(),
            this.elems.qualitySettingMenu.hide()
        }
        ;
        _proto81.showMainSettingMenu = function showMainSettingMenu() {
            this.renderMainSettingItems(),
            this.elems.mainSettingMenu.show()
        }
        ;
        _proto81.showLanguageSettingMenu = function showLanguageSettingMenu() {
            this.subtitleViewer.renderFullSubtitleSetting(),
            this.audioViewer.renderFullAudioSetting(),
            this.elems.languageSettingMenu.css("display", "flex"),
            this.elems.languageSettingMenu.show()
        }
        ;
        _proto81.showQualitySettingMenu = function showQualitySettingMenu() {
            this.qualityViewer.renderFullQualitySetting(),
            this.elems.qualitySettingMenu.css("display", "flex"),
            this.elems.qualitySettingMenu.show()
        }
        ;
        _proto81.renderPipSubtitleSetting = function renderPipSubtitleSetting(e) {
            this.pipViewer.renderPipSubtitleSetting(e)
        }
        ;
        _proto81.renderMainSettingItems = function renderMainSettingItems() {
            var e = this.elems.settingItemLanguage.find(".controls__setting-label--subtitles .controls__setting-tail")
              , t = this.elems.settingItemLanguage.find(".controls__setting-label--audio .controls__setting-tail")
              , i = this.elems.settingItemQuality.find(".controls__setting-tail")
              , n = this.props.isCasting
              , r = !Q.isFairPlayHlsSupported() && !this.props.isCasting
              , s = !W.IS_NONSUB;
            if (n ? Nr.settingData.isOn : this.props.isCaptionOn) {
                var _t45 = n ? Nr.settingData.captionsLanguage : this.props.currentLanguage;
                e.text(Ge[_t45])
            } else
                e.text(this.hasSubtitleOptions ? "Off" : "Unavailable");
            var a = (n ? Nr.playbackData.isLive : Kt.isLive) ? "Primary" : "Default"
              , o = Zr.findQualityByBitrate(Zn.playbackProperty.getMaxBitrate());
            i.text(o.name);
            var l = n ? Nr.settingData.audioTrack : Kt.activeAudioTrack;
            t.text(qa(l, a)),
            this.elems.settingItemLanguage.toggleClass("controls__setting--navigable", this.isLanguageSettingAvailable),
            this.elems.settingItemQuality.toggleClass("controls__setting--hidden", !r),
            this.elems.settingItemAutoplay.toggleClass("controls__setting--hidden", !s);
            var d = n ? Nr.settingData.isAutoPlayOn : Zn.autoplay;
            this.elems.autoplayToggler.toggleClass("controls__setting-switch__open", d)
        }
        ;
        _createClass(_class37, [{
            key: "hasSubtitleOptions",
            get: function get() {
                if (this.props.isCasting) {
                    var _e68 = Nr.settingData.captionsOptions;
                    return _e68 && _e68.length > 0
                }
                return this.props.allLanguages.length > 0
            }
        }, {
            key: "isLanguageSettingAvailable",
            get: function get() {
                if (this.props.isCasting) {
                    var _e69 = Nr.settingData.audioTrackOptions;
                    return Boolean(_e69 && _e69.length > 1) || this.hasSubtitleOptions
                }
                return Boolean(Kt.audioTracks && Kt.audioTracks.length > 1) || this.hasSubtitleOptions
            }
        }]);
        return _class37
    }(ca)));
    var Ja = Tr(function(_ref35) {
        var e = _ref35.appState
          , t = _ref35.captions
          , i = _ref35.user;
        return {
            isCasting: e.isCasting,
            isCaptionOn: t.isOn,
            profileId: i.profileId
        }
    }, {
        turnOnCaption: d.turnOnCaption,
        turnOffCaption: d.turnOffCaption
    })(new (function(_ca6) {
        _inheritsLoose(_class38, _ca6);
        function _class38() {
            var _this128;
            _this128 = _ca6.call(this) || this,
            Nr.onUpdated(_this128.onCastStateChange.bind(_assertThisInitialized(_this128)));
            return _this128
        }
        var _proto82 = _class38.prototype;
        _proto82.init = function init(e) {
            _ca6.prototype.init.call(this, e),
            this.initElements(e),
            this.elems.subtitleToggler.on("click", this.onToggleSubtitle.bind(this)),
            Aa(this.elems.subtitleSettingItem, {
                onTrigger: this.onToggleSubtitle.bind(this)
            })
        }
        ;
        _proto82.initElements = function initElements(e) {
            this.elems = {
                subtitleSettingItem: e[0].querySelector(".controls__setting-subtitles"),
                subtitleToggler: e.find(".controls__setting-subtitles .controls__setting-switch")
            }
        }
        ;
        _proto82.renderPipSubtitleSetting = function renderPipSubtitleSetting(e) {
            this.elems.subtitleToggler.toggleClass("controls__setting-switch__open", e),
            Sa(this.elems.subtitleSettingItem, {
                tabindex: "0",
                role: "menuitemcheckbox",
                "aria-label": "Subtitles",
                "aria-checked": e ? "true" : "false"
            })
        }
        ;
        _proto82.onToggleSubtitle = function onToggleSubtitle() {
            if (this.props.isCasting)
                $r.isCaptionOn ? $r.turnOffCaption() : $r.turnOnCaption();
            else {
                var _e70 = this.props.isCaptionOn;
                _e70 ? this.props.turnOffCaption() : this.props.turnOnCaption(),
                as.storeCaptionDefaultOn(!_e70, this.props.profileId)
            }
        }
        ;
        _proto82.onViewPropsUpdated = function onViewPropsUpdated(e) {
            this.props.isCaptionOn !== e.isCaptionOn && this.renderPipSubtitleSetting(this.props.isCaptionOn)
        }
        ;
        _proto82.onCastStateChange = function onCastStateChange(e, t, i) {
            this.props.isCasting && i.settingData && e.settingData.captionsLanguage !== t.settingData.captionsLanguage && this.renderPipSubtitleSetting($r.isCaptionOn)
        }
        ;
        return _class38
    }(ca)));
    var Za = Tr(function(_ref36) {
        var e = _ref36.captions;
        return {
            isCaptionOn: e.isOn
        }
    })(new (function(_ca7) {
        _inheritsLoose(_class39, _ca7);
        function _class39() {
            var _this129;
            _this129 = _ca7.call(this) || this,
            _this129.normalView = null,
            _this129.pipView = null;
            return _this129
        }
        var _proto83 = _class39.prototype;
        _proto83.init = function init() {
            var e = ft()(Na());
            this.elem = e,
            this.initElements(e),
            this.normalView = Xa,
            this.pipView = Ja,
            this.normalView.init(this.elems.normalView),
            this.pipView.init(this.elems.pipView),
            this.onClickBlankHandler = this.onClickBlank.bind(this),
            _ca7.prototype.init.call(this, e),
            this.normalView.hide(),
            this.pipView.hide()
        }
        ;
        _proto83.initElements = function initElements(e) {
            this.elems = {
                normalView: e.find(".controls__setting-normal"),
                pipView: e.find(".controls__setting-pip")
            }
        }
        ;
        _proto83.onClickBlank = function onClickBlank(e) {
            var t = this.elem[0]
              , i = this.elems.trigger[0];
            t.contains(e.target) || i.contains(e.target) || this.closeSettingPanel()
        }
        ;
        _proto83.toggleDisplay = function toggleDisplay(e, t) {
            this.switchDisplay(e, t),
            this.elem.hasClass("menu-open") ? this.closeSettingPanel() : this.openSettingPanel()
        }
        ;
        _proto83.switchDisplay = function switchDisplay(e, t) {
            e.append(this.elem),
            this.elems.trigger = t
        }
        ;
        _proto83.openSettingPanel = function openSettingPanel() {
            var e = this.elem
              , t = this.elems.trigger;
            this.normalView.openMainSettingMenu(),
            this.normalView.show(),
            this.openPipSettingMenu(),
            document.addEventListener("click", this.onClickBlankHandler),
            t.addClass("menu-open"),
            e.addClass("menu-open"),
            $a.focusFirstFocusableElement(e[0])
        }
        ;
        _proto83.closeSettingPanel = function closeSettingPanel() {
            var e = this.elem;
            if (e.hasClass("menu-open")) {
                var _t46 = this.elems.trigger;
                document.removeEventListener("click", this.onClickBlankHandler),
                _t46.removeClass("menu-open"),
                e.removeClass("menu-open")
            }
        }
        ;
        _proto83.openPipSettingMenu = function openPipSettingMenu() {
            var e = this.props.isCasting ? "off" !== Nr.settingData.captionsLanguage : this.props.isCaptionOn;
            this.pipView.renderPipSubtitleSetting(e),
            this.pipView.show()
        }
        ;
        _createClass(_class39, [{
            key: "isMenuOpen",
            get: function get() {
                var e = this.elem;
                return e && e.hasClass("menu-open")
            }
        }]);
        return _class39
    }(ca)));
    var eo = Tr(function(_ref37) {
        var e = _ref37.visibility
          , t = _ref37.appState;
        return {
            isCaptionStylePanelVisible: e.captionStylePanel,
            isControlBarVisible: e.controlBar,
            isCasting: t.isCasting
        }
    })(new (function(_ca8) {
        _inheritsLoose(_class40, _ca8);
        function _class40() {
            return _ca8.call(this) || this
        }
        var _proto84 = _class40.prototype;
        _proto84.init = function init() {
            var e = ft()("\n  <div class='content-container'>\n    <div class='player-mask'>\n      <div class='player-mask__gradient'></div>\n    </div>\n    <div class='metadata-area'>\n      <img class=\"metadata-area__network-logo keep-mouse-active\">\n      <div class='metadata-area__text keep-mouse-active' tabindex=\"0\" role=\"region\">\n        <div class='metadata-area__first-line-container'>\n          <div class='metadata-area__entity-badge-placeholder'></div>\n          <div class='metadata-area__first-line'></div>\n        </div>\n        <div class='metadata-area__second-line'></div>\n        <div class='metadata-area__third-line'></div>\n        <div class='metadata-area__more-button-container'></div>\n      </div>\n    </div>\n    <div class='rating-bug'>\n      <img class=\"rating-bug__big\">\n      <img class=\"rating-bug__small\">\n    </div>\n    <img class=\"network-bug\">\n  </div>\n");
            Rt.onUpdated(this.renderMetadataArea.bind(this)),
            $.onUpdated(this.toggleVisible.bind(this)),
            Nr.onUpdated(this.renderMetadataArea.bind(this)),
            Kt.onUpdated(this.toggleVisible.bind(this)),
            _n.onUpdated(this.toggleVisible.bind(this)),
            Zn.addEventListener(xi.WILL_LOAD_START, this.renderRatingBugs.bind(this)),
            this.initElements(e),
            _ca8.prototype.init.call(this, e),
            this._isContainerVisible = !0,
            this._isOverlayDark = !1,
            this._isOverlayVisible = !0,
            this._hasRatingBugShown = !1,
            this._isNetworkBugVisible = !0,
            this.toggleVisible()
        }
        ;
        _proto84.initElements = function initElements(e) {
            this.elems = {
                mask: e.find(".player-mask"),
                metadataArea: e.find(".metadata-area"),
                networkLogo: e.find(".metadata-area__network-logo"),
                firstMetadataLine: e.find(".metadata-area__first-line"),
                secondMetadataLine: e.find(".metadata-area__second-line"),
                thirdMetadataLine: e.find(".metadata-area__third-line"),
                moreButton: e.find(".metadata-area__more-button"),
                morePanel: e.find(".metadata-area__more-panel"),
                ratingBug: e.find(".rating-bug"),
                ratingBugBig: e.find(".rating-bug__big"),
                ratingBugSmall: e.find(".rating-bug__small"),
                networkBug: e.find(".network-bug")
            },
            this.entityBadge = new Ia,
            this.entityBadge.elem.insertAfter(e.find(".metadata-area__entity-badge-placeholder")),
            this.entityBadge.elem.addClass("metadata-area__entity-badge")
        }
        ;
        _proto84.onViewPropsUpdated = function onViewPropsUpdated(e) {
            this.props.viewMode == Ut.ViewModeTypes.MINIMIZED && e.viewMode != Ut.ViewModeTypes.MINIMIZED ? this.hide() : this.props.viewMode != Ut.ViewModeTypes.MINIMIZED && e.viewMode == Ut.ViewModeTypes.MINIMIZED && this.show()
        }
        ;
        _proto84.toggleVisible = function toggleVisible() {
            var _this130 = this;
            if (this.props.isCasting) {
                this.elem.toggle(!0);
                var _e71 = !0;
                _e71 != this._isOverlayDark && (this._isOverlayDark = _e71,
                this.elems.mask.toggleClass("player-mask__scrim", _e71));
                var _t47 = !0;
                _t47 != this._isOverlayVisible && (this._isOverlayVisible = _t47,
                this.elems.mask.toggle(_t47)),
                this.elems.metadataArea.toggle(this.isMetadataVisible)
            } else {
                var _e72 = _n.isReady && !(Kt.mediaType == Ft.INSERTED_AD && Zn.adsManager.isForcedHideOverlays());
                _e72 != this._isContainerVisible && (this._isContainerVisible = _e72,
                this.elem.toggle(_e72)),
                this.elem.toggle(!0);
                var _t48 = _n.isPaused && !this.props.isCaptionStylePanelVisible;
                _t48 !== this._isOverlayDark && (this._isOverlayDark = _t48,
                this.elems.mask.toggleClass("player-mask__scrim", _t48));
                var _i40 = _n.isPaused || "active" == $.pointerMonitorState;
                _i40 != this._isOverlayVisible && (this._isOverlayVisible = _i40,
                this.elems.mask.toggle(_i40)),
                this.elems.metadataArea.toggle(this.isMetadataVisible);
                var _n29 = this.isRatingBugVisible;
                this.elems.ratingBug.toggle(_n29),
                _n29 && !this._isRatingBugVisible && (this.elems.ratingBugSmall.toggle(this._hasRatingBugShown),
                this.elems.ratingBugBig.toggle(!this._hasRatingBugShown),
                this._hasRatingBugShown = !0,
                clearTimeout(this._ratingBugTimer),
                this._ratingBugTimer = setTimeout(function() {
                    _this130.elems.ratingBugSmall.hide(),
                    _this130.elems.ratingBugBig.hide()
                }, 15e3)),
                this._isRatingBugVisible = _n29;
                var _r17 = _n.isReady && Kt.mediaType === Ft.CONTENT && this.isNetworkBugRequired && !this.props.isControlBarVisible && !W.IS_NONSUB;
                _r17 !== this._isNetworkBugVisible && (this._isNetworkBugVisible = _r17,
                this.elems.networkBug.toggle(_r17))
            }
        }
        ;
        _proto84.renderMetadataArea = function renderMetadataArea() {
            (this.props.isCasting || Rt.entity) && (this.renderNetworkImage(this.elems.networkLogo),
            this.renderNetworkImage(this.elems.networkBug),
            this.renderMetadataLines(),
            this.renderBadge())
        }
        ;
        _proto84.renderNetworkImage = function renderNetworkImage(e) {
            var _this131 = this;
            if (W.IS_NONSUB)
                return this.elems.networkLogo.hide(),
                void this.elems.networkBug.hide();
            var t = this.props.isCasting ? Nr.playbackData.entity : Rt.entity;
            if (!t)
                return;
            var i = t.getNetworkLogoBySize("172x172");
            i && e.attr("src") == i || (e.hide(),
            i ? Q.loadImage(i).then(function(t) {
                e.attr("src", t),
                (e != _this131.elems.networkBug || _this131._isNetworkBugVisible) && e.show()
            }).catch(function() {
                e.removeAttr("src")
            }) : e.removeAttr("src"))
        }
        ;
        _proto84.renderMetadataLines = function renderMetadataLines() {
            var e, t = "", i = "", n = "";
            if (this.props.isCasting ? null != Nr.playbackData && (e = Nr.playbackData.entity) : e = Rt.entity,
            null != e && e.titleInfos) {
                var _r18 = e.titleInfos;
                t = _r18.tertiaryTitle,
                i = _r18.primaryTitle,
                n = _r18.secondaryTitle
            }
            this.elems.firstMetadataLine.text(t),
            this.elems.secondMetadataLine.text(i),
            this.elems.thirdMetadataLine.text(n),
            null == n || W.IS_NONSUB ? this.elems.thirdMetadataLine.hide() : this.elems.thirdMetadataLine.show()
        }
        ;
        _proto84.renderBadge = function renderBadge() {
            if (W.IS_NONSUB)
                return void this.entityBadge.displayByType(!1, !1);
            var e = !1
              , t = !1;
            if (this.props.isCasting)
                e = Nr.playbackData.isLive,
                t = Nr.playbackData.isRecording;
            else {
                var _i41 = Rt.entity;
                e = _i41.bundle && _i41.bundle.isLiveContent,
                t = _i41.bundle && _i41.bundle.isRecordedContent
            }
            this.entityBadge.displayByType(e, t)
        }
        ;
        _proto84.renderRatingBugs = function renderRatingBugs() {
            var _this132 = this;
            if (_n.isReady)
                return;
            var e = Zn.playlistManager.getPlaylist();
            var t = e.ratingBugBig
              , i = e.ratingBugSmall;
            this._hasRatingBugShown = !1,
            Q.loadImage(t).then(function(e) {
                _this132.elems.ratingBugBig.attr("src", e)
            }).catch(function() {
                _this132.elems.ratingBugBig.removeAttr("src")
            }),
            Q.loadImage(i).then(function(e) {
                _this132.elems.ratingBugSmall.attr("src", e)
            }).catch(function() {
                _this132.elems.ratingBugSmall.removeAttr("src")
            })
        }
        ;
        _proto84.show = function show() {
            _ca8.prototype.show.call(this)
        }
        ;
        _createClass(_class40, [{
            key: "isNetworkBugRequired",
            get: function get() {
                var e = Zn.playlistManager.getPlaylist();
                return Rt.entity && Rt.entity.isVod && e && !e.hasBug
            }
        }, {
            key: "isMetadataVisible",
            get: function get() {
                var e = _n.isReady && Kt.mediaType == Ft.CONTENT && (_n.isPaused || Za.isMenuOpen || "active" == $.pointerMonitorState);
                return this.props.isCasting || e
            }
        }, {
            key: "isRatingBugVisible",
            get: function get() {
                return _n.isReady && Zn.mediaType == Ft.CONTENT && Zn.contentProperty.getTotalPlayedTime() > .5
            }
        }]);
        return _class40
    }(ca)));
    var to = function(_ka5) {
        _inheritsLoose(to, _ka5);
        function to(e, t) {
            var _this133;
            _this133 = _ka5.call(this) || this,
            _this133.init(ft()("<button class='btn action-button'></div>")),
            _this133._name = e,
            _this133.renderButtonText(e),
            _this133.renderButtonColor(t);
            return _this133
        }
        var _proto85 = to.prototype;
        _proto85.renderButtonText = function renderButtonText(e) {
            this.elem.text(e)
        }
        ;
        _proto85.renderButtonColor = function renderButtonColor(e) {
            this.elem.addClass(e)
        }
        ;
        _createClass(to, [{
            key: "name",
            get: function get() {
                return this._name
            }
        }]);
        return to
    }(ka);
    to.ColorClass = {
        GREEN: "btn-cta",
        GREY: "btn-inverse"
    };
    var io = to;
    var no = "\n  <div class='error-card-container'>\n    <div class='error'>\n      <div class='error__warning player-svgicon'>" + ha("error-icon") + "</div>\n      <div class='error__heading' />\n      <div class='error__description' />\n      <div class='error__code' />\n      <div class='error__id' />\n      <div class='error__time' />\n      <div class='error__action-button-container'></div>\n    </div>\n  </div>\n"
      , ro = "<div class=\"back-to-watch-widget player-svgicon\">" + ha("attch_to_player") + "</div>";
    var so = function(_ka6) {
        _inheritsLoose(so, _ka6);
        function so() {
            var _this134;
            _this134 = _ka6.call(this) || this,
            _this134.init(ft()(ro));
            return _this134
        }
        return so
    }(ka);
    var ao = Tr(function(_ref38) {
        var e = _ref38.error
          , t = _ref38.appState;
        return {
            error: e.errorInstance,
            isMinimized: t.isMinimized,
            isCasting: t.isCasting
        }
    }, {
        setViewModeToNormal: n.setViewModeToNormal,
        closePlayer: r.closePlayer
    })(new (function(_ca9) {
        _inheritsLoose(_class41, _ca9);
        function _class41() {
            return _ca9.call(this) || this
        }
        var _proto86 = _class41.prototype;
        _proto86.init = function init() {
            var e = ft()(no);
            this.initElements(e),
            _ca9.prototype.init.call(this, e),
            this.hide()
        }
        ;
        _proto86.initElements = function initElements(e) {
            var _this135 = this;
            this.elems = {
                errorContainer: e.find(".error"),
                errorHeading: e.find(".error__heading"),
                errorDescription: e.find(".error__description"),
                errorCode: e.find(".error__code"),
                errorId: e.find(".error__id"),
                errorTime: e.find(".error__time"),
                errorActionContainer: e.find(".error__action-button-container")
            },
            this.backToWatchWidget = new so,
            e.find(".error").append(this.backToWatchWidget.elem),
            this.closeButton = new io(ie.OK,io.ColorClass.GREEN),
            this.closeButton.elem.on("click", function() {
                clearTimeout(_this135._redirectTimer),
                _this135.props.closePlayer()
            }),
            this.elems.errorActionContainer.append(this.closeButton.elem),
            this.backToWatchWidget.elem.on("click", function() {
                return _this135.backToWatch()
            })
        }
        ;
        _proto86.backToWatch = function backToWatch() {
            ir.backToWatch(),
            this.props.setViewModeToNormal()
        }
        ;
        _proto86.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var _this136 = this;
            var _this$props3 = this.props
              , t = _this$props3.error
              , i = _this$props3.isMinimized
              , n = e.error
              , r = e.isMinimized;
            if (t && null == n) {
                var _e73 = t.description;
                t.helpUrl && (_e73 += "<br>" + Ke.HELP_URL + ("<a href=\"https://" + t.helpUrl + "\" target=\"_blank\">" + t.helpUrl + "</a>."));
                var _i42 = Ke.ERROR_CODE + t.vxCode
                  , _n30 = Ke.ERROR_ID + t.errorId
                  , _r19 = Ke.ERROR_TIME + this.formatDate(t.time);
                this.elems.errorHeading.text(t.heading),
                this.elems.errorDescription.html(_e73),
                this.elems.errorCode.text(_i42),
                this.elems.errorId.text(_n30),
                this.elems.errorTime.text(_r19),
                this.closeButton.show(),
                this.elems.errorContainer.toggleClass("error--casting", this.props.isCasting),
                this.show(),
                t.autoRedirect && (clearTimeout(this._redirectTimer),
                this._redirectTimer = setTimeout(function() {
                    return _this136.props.closePlayer()
                }, 1500))
            } else
                null == t && n && this.hide();
            i && !r ? this.backToWatchWidget.show() : !i && r && this.backToWatchWidget.hide()
        }
        ;
        _proto86.formatDate = function formatDate(e) {
            var t = new Date(e);
            return ot.formatDate(t, "yyyy-MM-dd hh:mm:ss") + " " + ("(UTC" + t.getTimezoneOffset() / 60 + ")")
        }
        ;
        _proto86.hide = function hide() {
            this.elems.errorHeading.text(""),
            this.elems.errorDescription.text(""),
            this.elems.errorCode.text(""),
            this.closeButton.hide(),
            clearTimeout(this._redirectTimer),
            _ca9.prototype.hide.call(this)
        }
        ;
        return _class41
    }(ca)));
    var oo = function(_ka7) {
        _inheritsLoose(oo, _ka7);
        function oo(e) {
            var _this137;
            var t, i, n, r;
            _this137 = _ka7.call(this) || this,
            _this137.radius = e.radius,
            _this137.thickness = e.thickness,
            _this137.color = e.color,
            _this137.backgroundColor = e.backgroundColor,
            _this137.init(ft()((t = _this137.radius,
            i = _this137.thickness,
            n = _this137.color,
            r = _this137.backgroundColor,
            "\n  <svg class=\"countdown-rotor\" width=\"100%\" height=\"100%\">\n    <circle r=\"" + (t - 2 * i) + "\" cx=\"" + t + "\" cy=\"" + t + "\" stroke-width=\"" + i + "\" stroke=\"" + r + "\"></circle>\n    <circle r=\"" + (t - 2 * i) + "\" cx=\"" + t + "\" cy=\"" + t + "\" stroke-width=\"" + i + "\" stroke=\"" + n + "\"></circle>\n  </svg>"))),
            _this137.elems = {
                background: _this137.elem.find("circle:nth-child(1)"),
                foreground: _this137.elem.find("circle:nth-child(2)")
            },
            _this137._draw(),
            _this137.percentage = 0;
            return _this137
        }
        var _proto87 = oo.prototype;
        _proto87.redraw = function redraw() {
            var _this138 = this;
            this.elem[0].querySelectorAll("circle").forEach(function(e) {
                e.setAttribute("cx", _this138.radius),
                e.setAttribute("cy", _this138.radius),
                e.setAttribute("stroke-width", _this138.thickness)
            }),
            this.elems.background[0].setAttribute("r", this.radius),
            this.elems.foreground[0].setAttribute("r", this.radius - 2 * this.thickness),
            this._draw()
        }
        ;
        _proto87._draw = function _draw() {
            this.elems.foreground.attr("stroke-dasharray", 2 * Math.PI * this.innerRadius + "px")
        }
        ;
        _createClass(oo, [{
            key: "percentage",
            set: function set(e) {
                this.elems.foreground.attr("stroke-dashoffset", 2 * Math.PI * (1 - e) * this.innerRadius + "px")
            }
        }, {
            key: "innerRadius",
            get: function get() {
                return this.radius - 2 * this.thickness
            }
        }]);
        return oo
    }(ka);
    var lo = "\n  <div class=\"end-card-container\">\n    <div class=\"end-card__thumbnail-container\">\n      <img class=\"end-card__thumbnail\">\n      <div class=\"end-card__thumbnail-scrim\"></div>\n    </div>\n    <div class=\"end-card__upnext-hint\">Up Next</div>\n    <img class=\"end-card__network-logo\">\n    <div class=\"end-card__metadata-area\">\n      <div class=\"end-card__metadata-area-first-line\"></div>\n      <div class=\"end-card__metadata-area-second-line\"></div>\n      <div class=\"end-card__metadata-area-third-line\"></div>\n      <div class=\"end-card__metadata-area-description\"></div>\n      <div class=\"end-card__metadata-area-entity-badge-placeholder\"></div>\n      <div class=\"end-card__metadata-area-button-wrapper\">\n        <div class=\"end-card__metadata-area-play-button\">\n          <div class=\"end-card__metadata-area-play-button-play-icon\"></div>\n        </div>\n        <div class=\"end-card__metadata-area-more-button-container\"></div>\n      </div>\n    </div>\n    <div class=\"end-card__replay-container\">\n      <div class=\"end-card__replay-thumbnail-container\">\n        <img class=\"end-card__replay-thumbnail\">\n        <div class=\"end-card__replay-thumbnail-scrim\"></div>\n        <div class=\"end-card__replay-button player-svgicon\">" + ha("reload") + "</div>\n      </div>\n      <div class=\"end-card__replay-title\"></div>\n    </div>\n    <div class=\"end-card__left-arrow\">\n     <div class=\"end-card__left-arrow-icon player-svgicon\">" + ha("down_arrow") + "</div>\n    </div>\n    <div class=\"end-card__right-arrow\">\n      <div class=\"end-card__right-arrow-icon player-svgicon\">" + ha("down_arrow") + "</div>\n    </div>\n  </div>\n";
    var uo = Tr(function(_ref39) {
        var e = _ref39.appState
          , t = _ref39.upnext;
        return {
            isOn: e.isOn,
            isMinimized: e.isMinimized,
            isEndCredit: t.isEndCredit,
            isEndedReplay: t.isEndedReplay
        }
    }, {
        setViewModeToNormal: n.setViewModeToNormal,
        showLongTimeTips: s.showLongTimeTips,
        setEndCredit: o.setEndCredit,
        setEndedReplay: o.setEndedReplay
    })(new (function(_ca10) {
        _inheritsLoose(_class42, _ca10);
        function _class42() {
            var _this139;
            _this139 = _ca10.call(this) || this,
            _this139.isEnteredEndCredit = !1;
            return _this139
        }
        var _proto88 = _class42.prototype;
        _proto88.init = function init() {
            var _this140 = this;
            var t = ft()(lo);
            this.initElements(t),
            Rt.onUpdated(this.renderEntity.bind(this)),
            Rt.onUpdated(this.renderUpnext.bind(this)),
            Rt.onUpdated(this.renderReplayArea.bind(this)),
            Hn.onUpdated(this.renderUpnext.bind(this)),
            Zn.addEventListener(xi.START, function() {
                return _this140.onVideoStart()
            }),
            Zn.addEventListener(xi.PLAY, function() {
                _this140.countdownTimerStopped = !1
            }),
            Zn.addEventListener(xi.ENDED, function() {
                return _this140.onVideoEnded()
            }),
            Zn.addEventListener(xi.TIME_UPDATE, function() {
                return _this140.onTimeUpdate()
            }),
            Zn.addEventListener(xi.before(xi.STOP), function() {
                return _this140.reset()
            }),
            _ca10.prototype.init.call(this, t)
        }
        ;
        _proto88.initElements = function initElements(e) {
            var _this141 = this;
            this.elems = {
                thumbnail: e.find(".end-card__thumbnail"),
                networkLogo: e.find(".end-card__network-logo"),
                firstMetadataLine: e.find(".end-card__metadata-area-first-line"),
                secondMetadataLine: e.find(".end-card__metadata-area-second-line"),
                thirdMetadataLine: e.find(".end-card__metadata-area-third-line"),
                descriptionDom: e.find(".end-card__metadata-area-description"),
                badgeIconWrapper: e.find(".end-card__metadata-area-badge-wrapper"),
                replayThumbnail: e.find(".end-card__replay-thumbnail"),
                replayThumbnailContainer: e.find(".end-card__replay-thumbnail-container"),
                replayTitle: e.find(".end-card__replay-title"),
                playButton: e.find(".end-card__metadata-area-play-button"),
                leftArrow: e.find(".end-card__left-arrow"),
                rightArrow: e.find(".end-card__right-arrow"),
                replayContainer: e.find(".end-card__replay-container")
            },
            this.entityBadge = new Ia,
            this.entityBadge.elem.insertAfter(e.find(".end-card__metadata-area-entity-badge-placeholder")),
            this.entityBadge.elem.addClass("end-card__metadata-area-entity-badge"),
            this.backToWatchWidget = new so,
            this.countdownRotor = new oo({
                radius: 28,
                thickness: 2,
                backgroundColor: "rgba(255, 255, 255, 0.4)",
                color: "#fff"
            }),
            e.append(this.backToWatchWidget.elem),
            this.elems.playButton.append(this.countdownRotor.elem),
            this.elems.leftArrow.on("click", function() {
                return _this141.onViewPrevious()
            }),
            this.elems.rightArrow.on("click", function() {
                return _this141.onViewNext()
            }),
            this.elems.replayThumbnailContainer.on("click", function() {
                return _this141.onViewReplay()
            }),
            this.elems.playButton.on("click", function() {
                return _this141.onViewPlayNext()
            }),
            this.backToWatchWidget.elem.on("click", function() {
                return _this141.backToWatch()
            }),
            this.resetView()
        }
        ;
        _proto88.backToWatch = function backToWatch() {
            ir.backToWatch(),
            this.props.setViewModeToNormal()
        }
        ;
        _proto88.reset = function reset() {
            clearInterval(this.countdownTimer),
            this.props.setEndCredit(!1),
            this._trackEndCardClose("user_dismissed")
        }
        ;
        _proto88.onTimeUpdate = function onTimeUpdate() {
            if (W.IS_NONSUB)
                return;
            var e = Zn.playlistManager.getPlaylist().endCreditTime
              , t = Zn.currentTime;
            if (this.props.isEndCredit && e > t && this.props.setEndCredit(!1),
            Rt.entity && !Rt.entity.isLive && Zn.mediaType === Ft.CONTENT && !Vi.isSeeking && e > 0 && Hn.upNextList && Hn.upNextList.length > 0) {
                var _i43 = Zn.adsManager.getAdBreaks()
                  , _n31 = _i43 && _i43[_i43.length - 1];
                e > (_n31 ? _n31.end : 0) && t > e ? (this.props.isEndCredit || this.isEnteredEndCredit || this.props.isMinimized || (this.isEnteredEndCredit = !0,
                this.props.setEndCredit(!0),
                Zn.trackUserAction({
                    type: bn.EndCard.OPEN
                })),
                !this.countdownTimerStopped && this.updateCoundown((t - e) / (Zn.duration - e))) : t < e && (this.isEnteredEndCredit = !1)
            }
        }
        ;
        _proto88.onVideoStart = function onVideoStart() {
            this.props.setEndCredit(!1),
            this.props.setEndedReplay(!1)
        }
        ;
        _proto88.onVideoEnded = function onVideoEnded() {
            var _this142 = this;
            if (!W.IS_NONSUB && (this.props.setEndCredit(!1),
            this.isEnteredEndCredit = !1,
            Rt.entity && !Rt.entity.isLive)) {
                if (!Hn.upNextList || Hn.upNextList.length <= 0)
                    return this.props.setEndedReplay(!1),
                    this._trackEndCardClose(Pr),
                    void Zn.continuousPlay({
                        reason: Dt
                    });
                if (this.props.setEndedReplay(!0),
                Zn.trackUserAction({
                    type: bn.EndCard.OPEN
                }),
                !Ui.autoPlayUpNext)
                    return;
                if (this.props.isEndCredit && this.isEnteredEndCredit)
                    return Ui.userInteractionTime > 0 && Date.now() - Ui.userInteractionTime >= at.autoplayIdleTimeout ? void this.props.showLongTimeTips() : (this.props.setEndedReplay(!1),
                    this._trackEndCardClose(Pr),
                    void Zn.continuousPlay({
                        reason: Dt
                    }));
                this.currentCountdownMs = 0,
                clearInterval(this.countdownTimer),
                this.countdownTimer = setInterval(function() {
                    if (_this142.currentCountdownMs += 500,
                    _this142.currentCountdownMs <= 5e3)
                        _this142.updateCoundown(_this142.currentCountdownMs / 5e3);
                    else {
                        if (clearInterval(_this142.countdownTimer),
                        Ui.userInteractionTime > 0 && Date.now() - Ui.userInteractionTime >= at.autoplayIdleTimeout)
                            return void _this142.props.showLongTimeTips();
                        _this142.props.setEndedReplay(!1),
                        _this142._trackEndCardClose(Pr),
                        Zn.continuousPlay({
                            reason: Dt
                        })
                    }
                }, 500)
            }
        }
        ;
        _proto88._trackEndCardClose = function _trackEndCardClose(e) {
            Zn.trackUserAction({
                type: bn.EndCard.CLOSE,
                reason: e
            })
        }
        ;
        _proto88.resetView = function resetView() {
            this.elems.thumbnail.hide(),
            this.elems.networkLogo.hide(),
            this.entityBadge.displayByType(!1, !1),
            this.elems.leftArrow.toggle(!1),
            this.elems.rightArrow.toggle(!1),
            this.elems.firstMetadataLine.text(""),
            this.elems.secondMetadataLine.text(""),
            this.elems.thirdMetadataLine.text(""),
            this.elems.descriptionDom.text("")
        }
        ;
        _proto88.renderReplayArea = function renderReplayArea(e, t, i) {
            var _this143 = this;
            if (!i.entity || !e.entity)
                return;
            var n = Rt.entity
              , r = n.getVideoImageBySize("288x162");
            this.elems.replayThumbnail.hide(),
            Q.loadImage(r).then(function(e) {
                _this143.elems.replayThumbnail.attr("src", e),
                _this143.elems.replayThumbnail.show()
            }).catch(function() {}),
            this.elems.replayTitle.text(n.titleInfos.primaryTitle)
        }
        ;
        _proto88.renderUpnext = function renderUpnext(e, t, i) {
            (i.nextEntity || i.upNextList) && (this.elems.leftArrow.toggle(null != Hn.previousUpnextEntity),
            this.elems.rightArrow.toggle(null != Hn.nextUpnextEntity))
        }
        ;
        _proto88.renderEntity = function renderEntity(e, t, i) {
            if (!i.nextEntity)
                return;
            var n = e.nextEntity;
            null != n ? (this.renderThumbnail(n),
            this.renderNetworkLogo(n),
            this.renderMetadataArea(n),
            this.renderBadge(n)) : this.resetView()
        }
        ;
        _proto88.renderThumbnail = function renderThumbnail(e) {
            var _this144 = this;
            var t = e.getVideoImageBySize("1280x720");
            this.elems.thumbnail.hide(),
            Q.loadImage(t).then(function(e) {
                _this144.elems.thumbnail.attr("src", e),
                _this144.elems.thumbnail.show()
            }).catch(function() {})
        }
        ;
        _proto88.renderNetworkLogo = function renderNetworkLogo(e) {
            var _this145 = this;
            var t = e.getNetworkLogoBySize("72x72");
            this.elems.networkLogo.hide(),
            Q.loadImage(t).then(function(e) {
                _this145.elems.networkLogo.attr("src", e),
                _this145.elems.networkLogo.show()
            }).catch(function() {})
        }
        ;
        _proto88.renderMetadataArea = function renderMetadataArea(e) {
            this.elems.firstMetadataLine.text(e.titleInfos.tertiaryTitle),
            this.elems.secondMetadataLine.text(e.titleInfos.primaryTitle),
            this.elems.thirdMetadataLine.text(e.titleInfos.secondaryTitle),
            e.titleInfos.secondaryTitle ? this.elems.thirdMetadataLine.show() : this.elems.thirdMetadataLine.hide(),
            this.elems.descriptionDom.text(e.description.length >= 200 ? e.description.slice(0, 200).trim() + "..." : e.description)
        }
        ;
        _proto88.renderBadge = function renderBadge(e) {
            var t = e.bundle && e.bundle.isLiveContent
              , i = e.bundle && e.bundle.isRecordedContent;
            this.entityBadge.displayByType(t, i)
        }
        ;
        _proto88.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var _this$props4 = this.props
              , t = _this$props4.isMinimized
              , i = _this$props4.isEndCredit
              , n = _this$props4.isEndedReplay
              , r = _this$props4.isOn;
            t && !e.isMinimized ? this.backToWatchWidget.show() : !t && e.isMinimized && this.backToWatchWidget.hide();
            var s = !e.isEndCredit && i
              , a = e.isEndCredit && !i
              , o = !e.isEndedReplay && n
              , l = e.isEndedReplay && !n;
            l ? this.elems.replayThumbnailContainer.css("visibility", "hidden") : o && this.elems.replayThumbnailContainer.css("visibility", "visible"),
            s || o ? this.show() : (a || l) && this.hide(),
            (e.isOn && !r || !e.isOn && r) && (this.props.setEndCredit(!1),
            this.props.setEndedReplay(!1))
        }
        ;
        _proto88.hide = function hide() {
            this.elem.removeClass("end-card-container--show")
        }
        ;
        _proto88.show = function show() {
            this.elem.addClass("end-card-container--show")
        }
        ;
        _proto88.updateCoundown = function updateCoundown(e) {
            this.countdownRotor.percentage = e
        }
        ;
        _proto88.onViewPrevious = function onViewPrevious() {
            this.countdownTimerStopped = !0,
            clearInterval(this.countdownTimer),
            this.updateCoundown(0),
            Zn.autoplay = !1,
            Rt.nextEntity = Hn.previousUpnextEntity
        }
        ;
        _proto88.onViewNext = function onViewNext() {
            this.countdownTimerStopped = !0,
            clearInterval(this.countdownTimer),
            this.updateCoundown(0),
            Zn.autoplay = !1,
            Rt.nextEntity = Hn.nextUpnextEntity
        }
        ;
        _proto88.onViewPlayNext = function onViewPlayNext() {
            clearInterval(this.countdownTimer),
            this.props.setEndCredit(!1),
            this.props.setEndedReplay(!1),
            Zn.trackUserAction({
                type: bn.EndCard.CLICK
            }),
            this._trackEndCardClose(wr),
            Zn.continuousPlay({
                reason: Lt
            })
        }
        ;
        _proto88.onViewReplay = function onViewReplay() {
            this.props.setEndedReplay(!1),
            Zn.trackUserAction({
                type: bn.EndCard.CLICK
            }),
            this._trackEndCardClose(wr),
            Rt.entity && Rt.entity.bundle && (clearInterval(this.countdownTimer),
            Zn.load(Rt.entity.bundle.eabId, {
                channelId: Rt.entity.bundle.channelId
            }))
        }
        ;
        _createClass(_class42, [{
            key: "contentPlaceholderOffset",
            get: function get() {
                var e = this.elems.replayContainer.position();
                return e.width = this.elems.replayThumbnailContainer.width(),
                e.height = this.elems.replayThumbnailContainer.height(),
                e
            }
        }]);
        return _class42
    }(ca)))
      , co = Boolean(window.MouseEvent)
      , ho = Boolean(window.TouchEvent)
      , po = Boolean(window.PointerEvent)
      , _o = function(e) {
        return "mouse" === e.pointerType || co && e instanceof window.MouseEvent
    }
      , fo = function(e) {
        return "touch" === e.pointerType || ho && e instanceof window.TouchEvent
    }
      , go = function(e) {
        return "mouse" === e.pointerType || co && e instanceof window.MouseEvent && (!po || !(e instanceof window.PointerEvent))
    };
    function mo(e) {
        return function() {
            for (var t = [], i = arguments.length; i--; ) {
                t[i] = arguments[i]
            }
            "function" == typeof e && e.apply(void 0, t)
        }
    }
    var yo = ["pointerdown", "pointermove", "pointerup"]
      , vo = ["touchstart", "touchmove", "touchend"]
      , Eo = ["pointerenter", "pointermove", "pointerleave"]
      , bo = ["mouseenter", "mousemove", "mouseleave"]
      , To = po ? "pointercancel" : "touchcancel";
    function So(e, t, i) {
        var n = t.onStart
          , r = t.onMove
          , s = t.onEnd;
        n = mo(n),
        r = mo(r),
        s = mo(s),
        (i = Object.assign({
            hover: !1,
            mouse: !1,
            touch: !0
        }, i)).hover && (i.mouse = !1);
        var a = i.hover
          , o = i.mouse
          , l = i.touch
          , d = Boolean(a)
          , u = Boolean(o)
          , c = Boolean(l)
          , h = a ? po ? Eo : bo : po ? yo : vo
          , p = a ? e : document
          , _ = h[0]
          , f = h[1]
          , g = h[2]
          , m = !1;
        function y(e) {
            m = !0,
            u && _o(e) && n(e),
            c && fo(e) && n(e),
            d && go(e) && n(e)
        }
        function v(e) {
            m && (u && _o(e) && r(e),
            c && fo(e) && r(e),
            d && go(e) && r(e))
        }
        function E(e) {
            m && (u && _o(e) && s(e),
            c && fo(e) && s(e),
            d && go(e) && s(e),
            m = !1)
        }
        return e.addEventListener(_, y),
        p.addEventListener(f, v),
        p.addEventListener(g, E),
        !a && e.addEventListener(To, E),
        !po && u && (e.addEventListener("mousedown", y),
        p.addEventListener("mousemove", v),
        p.addEventListener("mouseup", E)),
        function() {
            e.removeEventListener(_, y),
            p.removeEventListener(f, y),
            p.removeEventListener(g, y),
            !po && u && (e.removeEventListener("mousedown", y),
            p.removeEventListener("mousemove", v),
            p.removeEventListener("mouseup", E)),
            !a && e.removeEventListener(To, E)
        }
    }
    var Ao = "\n  <div class=\"controls-bar-container\">\n    <div class=\"up-next-wrap\">\n      <div class=\"up-next\" data-role=\"control\">\n        <div class=\"up-next__title\">Up Next</div>\n        <div class=\"up-next__subtitle\"></div>\n      </div>\n      <div class=\"up-next__button player-svgicon\">" + ha("play_next") + "</div>\n    </div>\n    <div class='controls-wrap'>\n      <div class='action-feedback'>\n        <div class='action-feedback__text keep-mouse-active'></div>\n      </div>\n      <div class='controls'>\n\n        <div class='controls__timeline-container' />\n\n        <div class='controls__menus'>\n          <div class=\"controls__menus-left\">\n            <div class=\"controls__live-guide\" data-role=\"control\">\n              <div class=\"controls__live-guide-icon player-svgicon\">" + ha("live_guide") + "</div>\n              <div class=\"controls__live-guide-text\">GUIDE</div>\n            </div>\n            <div class=\"controls__live-guide-sep\"></div>\n            <div class='controls__setting keep-mouse-active' data-role=\"control\">\n              <div class=\"controls__setting-panel-wrap\"></div>\n              <div class='controls__setting-button player-svgicon'>" + ha("settings_hover") + "</div>\n            </div>\n            <div class='controls__volume keep-mouse-active' data-role=\"control\">\n              <div class='controls__volume-button controls__volume-button--lg'>\n                <div class=\"controls__volume-button-mute player-svgicon\">" + ha("volume_4_hover") + "</div>\n                <div class=\"controls__volume-button-sm player-svgicon\">" + ha("volume_1_hover") + "</div>\n                <div class=\"controls__volume-button-md player-svgicon\">" + ha("volume_2_hover") + "</div>\n                <div class=\"controls__volume-button-lg player-svgicon\">" + ha("volume_3_hover") + "</div>\n              </div>\n              <div class=\"controls__volume-slider-wrap\">\n                <div class=\"controls__volume-slider\">\n                  <div class=\"controls__volume-max\"></div>\n                  <div class=\"controls__volume-now\"></div>\n                  <div class=\"controls__volume-handle\">\n                    <div class=\"controls__volume-handle-track\"></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"controls__menus-center\">\n            <div class=\"controls__rewind-button keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__rewind-button-tip button-tool-tips\">10 SECOND REWIND</div>\n              <div class=\"controls__rewind-button-icon player-svgicon\">" + ha("10_LEFT_hover") + "</div>\n            </div>\n            <div class=\"controls__playback-button keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__playback-button-playing\">\n                <div class=\"controls__playback-button-playing-tip button-tool-tips\">PLAY</div>\n                <div class=\"controls__playback-button-playing-icon player-svgicon\">" + ha("play_hover") + "</div>\n              </div>\n              <div class=\"controls__playback-button-paused\" data-role=\"control\">\n                <div class=\"controls__playback-button-paused-tip button-tool-tips\">PAUSE</div>\n                <div class=\"controls__playback-button-paused-icon player-svgicon\">" + ha("pause_hover") + "</div>\n              </div>\n            </div>\n            <div class=\"controls__fastforward-button keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__fastforward-button-tip button-tool-tips\">10 SECOND FASTFORWARD</div>\n              <div class=\"controls__fastforward-button-icon player-svgicon\">" + ha("10_RIGHT_hover") + "</div>\n            </div>\n          </div>\n          <div class=\"controls__menus-right\">\n            <div class=\"controls__cast-button\" data-role=\"control\">\n              <div class=\"controls__cast-device-name button-tool-tips\">CAST</div>\n              <div class=\"controls__cast-button-icon\">\n                <google-cast-launcher></google-cast-launcher>\n              </div>\n            </div>\n            <div class=\"controls__pip-mode-button keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__pip-mode-button-normal\">\n                <div class=\"controls__detach-button-tip button-tool-tips\">MINIMIZE</div>\n                <div class=\"controls__detach-button-icon player-svgicon\">" + ha("detach_from_player") + "</div>\n              </div>\n              <div class=\"controls__pip-mode-button-pip\">\n                <div class=\"controls__attach-button-tip button-tool-tips\">MAXIMIZE</div>\n                <div class=\"controls__attach-button-icon player-svgicon\">" + ha("attch_to_player") + "</div>\n              </div>\n            </div>\n            <div class=\"controls__view-mode-button keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__view-mode-button-normal\">\n                <div class=\"controls__view-mode-button-normal-tip button-tool-tips\">FULL SCREEN</div>\n                <div class=\"controls__view-mode-button-normal-icon player-svgicon\">" + ha("full_screen_hover") + "</div>\n              </div>\n              <div class=\"controls__view-mode-button-fullscreen\">\n                <div class=\"controls__view-mode-button-fullscreen-tip button-tool-tips\">EXIT FULL SCREEN</div>\n                <div class=\"controls__view-mode-button-fullscreen-icon player-svgicon\">" + ha("exit_full_screen_hover") + "</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n"
      , Po = Boolean(window.PointerEvent);
    function wo(e, t) {
        var i = null
          , n = Date.now();
        function r(e) {
            if (e.pointerType)
                return e.pointerType;
            switch (e.type) {
            case "touchstart":
            case "touchmove":
            case "touchend":
                return "touch";
            }
            return null
        }
        (Po ? ["pointerenter", "pointerleave", "pointermove"] : ["touchstart", "touchend", "touchmove"]).forEach(function(t) {
            e.addEventListener(t, function(e) {
                i = r(e),
                n = Date.now()
            })
        }),
        Object.keys(t).forEach(function(s) {
            var a = t[s];
            var o = s
              , l = !1;
            o.endsWith("capture") && (l = !0,
            o = o.substring(0, o.length - 7)),
            e.addEventListener(o, function(e) {
                var t = Date.now();
                e.pointerType || (t - n >= 100 && (i = null),
                e.pointerType = r(e) || i || "mouse"),
                a.call(this, e)
            }, l)
        })
    }
    function ko(e) {
        return "touch" === e.pointerType
    }
    function Co(e) {
        return "mouse" === e.pointerType
    }
    var Io = function(_ref40) {
        var e = _ref40.upnext
          , t = _ref40.error
          , i = _ref40.visibility;
        return {
            endCard: e.isEndCredit || e.isEndedReplay,
            errorCard: Boolean(t.errorInstance),
            longTimeTips: i.longTimeTips
        }
    };
    var Ro = {
        applyFocusVisible: function applyFocusVisible(e) {
            var t = !1;
            function i(e) {
                delete e.dataset.focusVisible
            }
            function n() {
                t = !1;
                var r = document.activeElement;
                r && e.contains(r) && i(r)
            }
            e.classList.add("js-focus-visible"),
            document.addEventListener("keydown", function(e) {
                "Tab" === e.key && (t = !0)
            }, !0),
            document.addEventListener("mousedown", n, !0),
            document.addEventListener("pointerdown", n, !0),
            document.addEventListener("touchstart", n, !0),
            e.addEventListener("focus", function(e) {
                t && (e.target.dataset.focusVisible = "")
            }, !0),
            e.addEventListener("blur", function(e) {
                i(e.target)
            }, !0)
        },
        isFocusVisible: function isFocusVisible(e) {
            return Boolean("focusVisible"in e.dataset)
        }
    };
    var Do = function() {
        var e = document.createElement("canvas");
        return !(!e.getContext || !e.getContext("2d")) && 0 == e.toDataURL("image/webp").indexOf("data:image/webp")
    }();
    var Lo = new (function() {
        function _class43() {
            this.reset()
        }
        var _proto89 = _class43.prototype;
        _proto89.reset = function reset() {
            this._frequency = 20,
            this._thumbnails = [],
            this._nextLiveFetchingStart = 0,
            this._fetchLiveThumbPromise = 0,
            this._cts && this._cts.cancel(),
            this._cts = new G.a
        }
        ;
        _proto89.loadThumbnails = function loadThumbnails() {
            this._generateFrequency(),
            this._useLiveThumbService ? this._loadLiveThumbnails() : this._loadVodThumbnails()
        }
        ;
        _proto89.tryUpdateLiveThumbnails = function tryUpdateLiveThumbnails() {
            var e = Zn.seekableWindow.end;
            !this._loadingLiveBundles && this._nextLiveFetchingStart > 0 && e <= Zn.duration && this._nextLiveFetchingStart <= e && this._loadLiveThumbnails(this._nextLiveFetchingStart)
        }
        ;
        _proto89.generateThumbnalUrl = function generateThumbnalUrl(e, t, i) {
            if (t === void 0) {
                t = !1
            }
            if (i === void 0) {
                i = !1
            }
            return this._useLiveThumbService ? "https://livethumb.huluim.com/thumbnail?" + ft.a.param({
                channelid: ei.playlist.stormflowId,
                timestamp: Math.floor(1e3 * Bt.uxToUtc(e)),
                profile: t ? "hd" : "sd",
                format: Do && !i ? "webp" : "jpg"
            }) : "https://ib.hulu.com/thumb?eab_id=" + $.eabId + "&s=" + Math.floor(e) + "&size=" + (t ? "512x288" : "145x80")
        }
        ;
        _proto89.getThumbnailAtPos = function getThumbnailAtPos(e) {
            var t = Math.min(Math.floor(e / this.frequency), this._thumbnails.length - 1);
            return this._thumbnails[t]
        }
        ;
        _proto89._loadLiveThumbnails = function _loadLiveThumbnails(e) {
            var _this146 = this;
            var t = e || Zn.seekableWindow.start
              , i = this._thumbnails.length
              , n = Math.min(Zn.seekableWindow.end, Zn.duration)
              , r = this._cts.token;
            this._fetchLiveThumbPromise = Promise.all(Array.from(Array(Math.floor((n - t) / this.frequency) + 1).keys()).map(function(e, n) {
                var s = Object(G.i)(_this146.generateThumbnalUrl(t, !1), {}, {
                    timeoutMs: 1e4,
                    cancellationToken: r,
                    retryCount: 1
                }).then(function(e) {
                    return e.assertOK().arrayBuffer()
                }).then(function(e) {
                    if (r.isCancellationRequested)
                        return At;
                    _this146._thumbnails[i + n] = "data:image/webp;base64," + _this146._toBase64String(e)
                }).catch(function() {
                    if (r.isCancellationRequested)
                        return At;
                    _this146._thumbnails[i + n] = null
                });
                return t += _this146.frequency,
                s
            })),
            this._fetchLiveThumbPromise.catch(function() {}).then(function() {
                return _this146._fetchLiveThumbPromise = null
            }),
            this._nextLiveFetchingStart = t
        }
        ;
        _proto89._loadVodThumbnails = function _loadVodThumbnails() {
            var _this147 = this;
            var e = this._cts.token;
            Object(G.i)("https://ib.hulu.com/thumbs?" + ft.a.param({
                eab_id: $.eabId,
                frequency: this.frequency,
                size: "145x80"
            }), {}, {
                retryCount: 1,
                timeoutMs: 2e4,
                cancellationToken: e
            }).then(function(e) {
                return e.assertOK().arrayBuffer()
            }).then(function(t) {
                if (e.isCancellationRequested)
                    return At;
                var i = new DataView(t)
                  , n = 0
                  , r = (i.getUint32(n) << 32) + i.getUint32(n + 4);
                if (n += 8,
                _this147._thumbnails = [],
                !(r <= 0))
                    for (var _e74 = 0; _e74 < r; _e74++) {
                        var _e75 = i.getUint32(n + 4);
                        n += 8;
                        var _r20 = i.getUint32(n + 4);
                        _this147._thumbnails.push("data:image/jpeg;base64," + _this147._toBase64String(t.slice(_e75, _r20)))
                    }
            }).catch(function() {
                return _this147._thumbnails = []
            })
        }
        ;
        _proto89._toBase64String = function _toBase64String(e) {
            return btoa(String.fromCharCode.apply(null, new Uint8Array(e)))
        }
        ;
        _proto89._generateFrequency = function _generateFrequency() {
            var e = Zn.duration;
            this._useLiveThumbService ? this._frequency = Math.floor(e / 100) : this._frequency = e < 120 ? 1 : e < 3600 ? 10 : 20
        }
        ;
        _createClass(_class43, [{
            key: "frequency",
            get: function get() {
                return this._frequency
            }
        }, {
            key: "_useLiveThumbService",
            get: function get() {
                var e;
                if (mr.getState().appState.isCasting)
                    e = Nr.playbackData && Nr.playbackData.isLive;
                else {
                    var _t49 = Rt.entity.bundle;
                    e = _t49 && (_t49.isLiveContent || _t49.isRecordedContent || _t49.isLookbackContent)
                }
                return e
            }
        }]);
        return _class43
    }());
    var Mo = "\n  <div class='controls__live-button keep-mouse-active'>\n    <div class='controls__watching-live'>WATCHING LIVE</div>\n    <div class='controls__jump-to-live' data-role=\"control\">\n      <span class='controls__jump-to-live-lighting player-svgicon'>" + ha("live_lighting") + "</span>JUMP TO LIVE\n    </div>\n  </div>\n  <div class='controls__timeline keep-mouse-active' data-role=\"control\">\n    <div class='controls__progress-wrap'>\n      <div class='controls__progress-bar-total'></div>\n      <div class='controls__progress-bar-seekable'></div>\n      <div class='controls__progress-bar-played'></div>\n      <div class='controls__ad-breaks'></div>\n      <div class='controls__live-edge-wrap'>\n        <div class='controls__live-state'></div>\n        <div class='controls__live-edge-marker'></div>\n      </div>\n      <div class=\"controls__playhead-wrap\">\n        <span class=\"controls__playhead-state\"></span>\n        <div class='controls__playhead-marker'></div>\n      </div>\n      <div class=\"controls__thumbnail-wrap\">\n        <div class=\"controls__thumbnail-preview\">\n          " + Ln({
        class: "controls__thumbnail-image"
    }) + "\n          <div class=\"controls__thumbnail-position\"></div>\n        </div>\n        <div class=\"controls__thumbnail-marker\"></div>\n      </div>\n    </div>\n    <div class=\"controls__time-wrap\">\n      <span class='controls__time-elapsed'>00:00</span>\n      <span class=\"controls__time-separate\">/</span>\n      <span class='controls__time-duration'>00:00</span>\n    </div>\n  </div>\n";
    function Oo(e, t, i) {
        return i.some(function(i) {
            return e[i] !== t[i]
        })
    }
    var xo = function(_ca11) {
        _inheritsLoose(xo, _ca11);
        function xo(e) {
            var _this148;
            _this148 = _ca11.call(this) || this,
            _this148._thumbnailLoadTimer = -1,
            _this148.init(e),
            _this148.props = {
                seekableStart: 0,
                seekableEnd: 0,
                duration: 0,
                currentTime: 0,
                liveEdge: 0,
                isLive: !1,
                isCasting: !1,
                adBreaks: [],
                onSeek() {},
                onJumpToLive() {},
                onPlayheadDragStart() {},
                onPlayheadDragging() {},
                onPlayheadDragEnd() {},
                onTimelineScrubStart() {},
                onTimelineScrubMove() {},
                onTimelineScrubEnd() {},
                onQuickRewind() {},
                onQuickForward() {},
                shouldAllowSeeking: function shouldAllowSeeking() {
                    return !0
                }
            };
            return _this148
        }
        var _proto90 = xo.prototype;
        _proto90.receiveProps = function receiveProps(e) {
            var t = _objectSpread({}, this.props);
            Object.assign(this.props, e),
            Oo(t, e, ["isLive", "liveEdge", "duration", "currentTime"]) && this.renderLive(),
            Oo(t, e, ["duration", "seekableStart", "currentTime"]) && this.renderProgress(),
            Oo(t, e, ["duration", "liveEdge", "isLive"]) && this.renderLiveEdge(),
            Oo(t, e, ["adBreaks", "duration", "seekableStart", "seekableEnd", "isLive"]) && this.renderAdBreaks(),
            Oo(t, e, ["seekableStart", "seekableEnd", "duration"]) && this.renderSeekableWindow()
        }
        ;
        _proto90.init = function init(e) {
            var _this149 = this;
            e.html(Mo),
            this.elems = {
                timeline: e.find(".controls__timeline"),
                playheadWrap: e.find(".controls__playhead-wrap"),
                watchingLiveLabel: e.find(".controls__watching-live"),
                jumpToLiveButton: e.find(".controls__jump-to-live"),
                progressBar: e.find(".controls__progress-wrap"),
                progressBarPlayed: e.find(".controls__progress-bar-played"),
                progressBarSeekable: e.find(".controls__progress-bar-seekable"),
                liveEdgeWrap: e.find(".controls__live-edge-wrap").hide(),
                liveStatus: e.find(".controls__live-state"),
                adBreaksContainer: e.find(".controls__ad-breaks"),
                timeElapsed: e.find(".controls__time-elapsed"),
                timeDuration: e.find(".controls__time-duration"),
                timeSeparate: e.find(".controls__time-separate"),
                thumbnailWrap: e.find(".controls__thumbnail-wrap"),
                thumbnailImage: e.find(".controls__thumbnail-image"),
                thumbnailPosition: e.find(".controls__thumbnail-position")
            };
            var t = this.elems.timeline[0];
            Sa(t, {
                tabindex: "0",
                role: "slider",
                "aria-label": "Timeline"
            }),
            Aa(t, {
                onIncrease: this.onQuickForward.bind(this),
                onDecrease: this.onQuickRewind.bind(this)
            }),
            this.elems.jumpToLiveButton.on("click", function() {
                return _this149.props.onJumpToLive()
            }),
            this.elems.progressBar[0].addEventListener("click", function(e) {
                return _this149.onSeek(e)
            }),
            So(this.elems.playheadWrap[0], {
                onStart: function onStart(e) {
                    return _this149.onPlayheadDragStart(e)
                },
                onMove: function onMove(e) {
                    return _this149.onPlayheadDragging(e)
                },
                onEnd: function onEnd(e) {
                    return _this149.onPlayheadDragEnd(e)
                }
            }, {
                touch: !0,
                mouse: !0
            }),
            So(this.elems.progressBar[0], {
                onStart: function onStart(e) {
                    return _this149.onTimelineScrubStart(e)
                },
                onMove: function onMove(e) {
                    return _this149.onTimelineScrubMove(e)
                },
                onEnd: function onEnd(e) {
                    return _this149.onTimelineScrubEnd(e)
                }
            }, {
                hover: !0,
                touch: !1
            }),
            this.elems.jumpToLiveButton.hide(),
            this.elems.watchingLiveLabel.hide(),
            this.onThumbnailInactivate()
        }
        ;
        _proto90._verifyRenderPosition = function _verifyRenderPosition() {
            var e = this.props.currentTime;
            return Math.abs(e - this._lastPlayheadPosition) > .9 && (this._lastPlayheadPosition = e,
            !0)
        }
        ;
        _proto90.renderProgress = function renderProgress() {
            var _this$props5 = this.props
              , e = _this$props5.duration
              , t = _this$props5.seekableStart
              , i = _this$props5.currentTime
              , n = Math.max(0, Math.min(t, e));
            this.elems.timeElapsed.text(ot.formatSecondsAsTimeCode(i)),
            !isFinite(e) ? (this.elems.timeSeparate.hide(),
            this.elems.timeDuration.text("")) : (this.elems.timeSeparate.show(),
            this.elems.timeDuration.text(ot.formatSecondsAsTimeCode(e)));
            var r = Math.min(i, e);
            this._playheadWidth = this.elems.playheadWrap.width() || this._playheadWidth || 0;
            var s = Q.toPercentage(Math.max(r - n, 0) / e)
              , a = Q.formatCalc(Math.max(r / e, 0), this._playheadWidth / 2);
            this.elems.progressBarPlayed.css("width", s),
            this.elems.playheadWrap.css("left", a),
            Sa(this.elems.timeline[0], {
                "aria-valuemin": "0",
                "aria-valuenow": String(Math.floor(r)),
                "aria-valuemax": String(Math.floor(e)),
                "aria-valuetext": Pa(r) + " out of " + Pa(e)
            })
        }
        ;
        _proto90.renderLive = function renderLive() {
            var _this$props6 = this.props
              , e = _this$props6.isLive
              , t = _this$props6.liveEdge
              , i = _this$props6.duration
              , n = _this$props6.currentTime
              , r = e && t < i + 15
              , s = t - n < 15;
            this.elems.playheadWrap.css("display", r && s ? "none" : "flex"),
            this.elems.jumpToLiveButton.css("display", r && !s ? "flex" : "none"),
            this.elems.watchingLiveLabel.css("display", r && s ? "flex" : "none")
        }
        ;
        _proto90.renderAdBreaks = function renderAdBreaks() {
            var _this$props7 = this.props
              , e = _this$props7.adBreaks
              , t = _this$props7.duration
              , i = _this$props7.seekableStart
              , n = _this$props7.seekableEnd
              , r = _this$props7.isLive;
            this.elems.adBreaksContainer.empty();
            for (var _iterator7 = _createForOfIteratorHelperLoose(e), _step7; !(_step7 = _iterator7()).done; ) {
                var _s9 = _step7.value;
                var _e76 = ft()("<div class='controls__ad-break'></div>")
                  , _a6 = _s9.start
                  , _o2 = _s9.end;
                if (this.elems.adBreaksContainer.append(_e76),
                (_o2 < i || _a6 > n || _o2 < Ut.EPSILON) && (0 !== i || 0 !== n || r))
                    _e76.hide();
                else if (_o2 - _a6 > Ut.EPSILON) {
                    var _r21 = Math.max(_a6, i) / t
                      , _s10 = Math.min(_o2, n) / t;
                    _e76.css({
                        left: Q.toPercentage(_r21),
                        width: Q.toPercentage(_s10 - _r21)
                    })
                } else
                    _e76.css({
                        left: Q.formatCalc(_a6 / t, _e76.width() / 2)
                    })
            }
        }
        ;
        _proto90.renderSeekableWindow = function renderSeekableWindow() {
            var _this$props8 = this.props
              , e = _this$props8.seekableStart
              , t = _this$props8.seekableEnd
              , i = _this$props8.duration
              , n = Math.min(e, i)
              , r = Math.min(t, i);
            this.elems.progressBarSeekable.css({
                width: Q.toPercentage((r - n) / i),
                left: Q.toPercentage(n / i)
            }),
            this.elems.progressBarPlayed.css("left", Q.toPercentage(n / i))
        }
        ;
        _proto90.renderLiveEdge = function renderLiveEdge() {
            var _this$props9 = this.props
              , e = _this$props9.duration
              , t = _this$props9.liveEdge
              , i = _this$props9.isLive;
            i && t < e ? (this.elems.liveEdgeWrap.css("display", "flex"),
            this.elems.liveStatus.text("LIVE"),
            this.elems.liveEdgeWrap.css("left", Q.formatCalc(Math.min(t, e) / e, this.elems.liveEdgeWrap.width() / 2))) : (this.elems.liveStatus.text(""),
            this.elems.liveEdgeWrap.hide())
        }
        ;
        _proto90.onPlayheadDragStart = function onPlayheadDragStart(e) {
            if (!this.props.shouldAllowSeeking())
                return;
            this._isPlayheadDragging = !0;
            var t = this.props.duration
              , i = this.getTargetTimelinePositionPercentage(e);
            this.props.onPlayheadDragStart(i * t)
        }
        ;
        _proto90.onPlayheadDragging = function onPlayheadDragging(e) {
            this.props.shouldAllowSeeking() && (this.updatePlayheadDraggingPosition(e),
            this.props.onPlayheadDragging())
        }
        ;
        _proto90.onPlayheadDragEnd = function onPlayheadDragEnd(e) {
            var t = this.props.duration;
            if (this.onThumbnailInactivate(),
            !this.props.shouldAllowSeeking() || !this._isPlayheadDragging)
                return;
            this._isPlayheadDragging = !1;
            var i = this.getTargetTimelinePositionPercentage(e);
            this.props.onPlayheadDragEnd(i * t)
        }
        ;
        _proto90.onTimelineScrubStart = function onTimelineScrubStart(e) {
            if (this.onThumbnailActivate(),
            !this.props.shouldAllowSeeking())
                return;
            var t = this.getTargetTimelinePositionPercentage(e)
              , i = this.props.duration;
            this.props.onTimelineScrubStart(i * t)
        }
        ;
        _proto90.onTimelineScrubMove = function onTimelineScrubMove(e) {
            this.onThumbnailUpdate(e),
            this.props.shouldAllowSeeking() && this.props.onTimelineScrubMove()
        }
        ;
        _proto90.onTimelineScrubEnd = function onTimelineScrubEnd(e) {
            var t = this.props.duration;
            if (this.onThumbnailInactivate(),
            !this.props.shouldAllowSeeking())
                return;
            var i = this.getTargetTimelinePositionPercentage(e) * t;
            this.props.onTimelineScrubEnd(i)
        }
        ;
        _proto90.onSeek = function onSeek(e) {
            var t = this.props.duration
              , i = e.target
              , n = this.elems.progressBar[0]
              , r = i.getBoundingClientRect()
              , s = n.getBoundingClientRect()
              , a = Q.getOffset(r).left - Q.getOffset(s).left + (e.pageX - r.left);
            this._progressBarWidth = s.width || this._progressBarWidth || 1;
            var o = a / this._progressBarWidth * t;
            this.props.onSeek(o)
        }
        ;
        _proto90.onQuickForward = function onQuickForward() {
            this.props.onQuickForward()
        }
        ;
        _proto90.onQuickRewind = function onQuickRewind() {
            this.props.onQuickRewind()
        }
        ;
        _proto90.onThumbnailActivate = function onThumbnailActivate() {
            this.props.shouldAllowSeeking() && this.elems.thumbnailWrap.show()
        }
        ;
        _proto90.onThumbnailInactivate = function onThumbnailInactivate() {
            this.hideThumbnail()
        }
        ;
        _proto90.onThumbnailUpdate = function onThumbnailUpdate(e) {
            var t = e.target
              , i = this.elems.progressBar[0]
              , n = t.getBoundingClientRect()
              , r = i.getBoundingClientRect()
              , s = Q.getOffset(n).left - Q.getOffset(r).left + (e.pageX - n.left);
            this._progressBarWidth = r.width || this._progressBarWidth || 1;
            var a = s / this._progressBarWidth;
            this.showThumbnail(a)
        }
        ;
        _proto90.showThumbnail = function showThumbnail(e) {
            var _this$props10 = this.props
              , t = _this$props10.seekableStart
              , i = _this$props10.seekableEnd
              , n = _this$props10.duration
              , r = _this$props10.isCasting
              , s = e * n;
            s < t || s > i ? this.onThumbnailInactivate() : (this.onThumbnailActivate(),
            this.elems.thumbnailWrap.css("left", Q.formatCalc(e, this.elems.thumbnailWrap.width() / 2)),
            this.elems.thumbnailPosition.text(ot.formatSecondsAsTimeCode(s)),
            r || this._generateThumbnailImage(s))
        }
        ;
        _proto90._generateThumbnailImage = function _generateThumbnailImage(e) {
            var _this150 = this;
            var t = Lo.generateThumbnalUrl(e, !1, !1);
            this._lastPreviewPosition != e && t !== this.elems.thumbnailImage.attr("src") && (this._lastPreviewPosition = e,
            this.elems.thumbnailImage.removeAttr("src"),
            clearTimeout(this._thumbnailLoadTimer),
            this._thumbnailLoadTimer = setTimeout(function() {
                return new Promise(function(e, i) {
                    _this150.elems.thumbnailImage[0].onload = e,
                    _this150.elems.thumbnailImage[0].onerror = i,
                    _this150.elems.thumbnailImage.attr("src", t)
                }
                ).then(function() {
                    _this150.elems.thumbnailImage.show()
                }).catch(function() {
                    _this150.elems.thumbnailImage.hide()
                })
            }, 500))
        }
        ;
        _proto90.hideThumbnail = function hideThumbnail() {
            clearTimeout(this._thumbnailLoadTimer),
            this._lastPreviewPosition = -1,
            this.elems.thumbnailImage.removeAttr("src"),
            this.elems.thumbnailWrap.hide()
        }
        ;
        _proto90.getTargetTimelinePositionPercentage = function getTargetTimelinePositionPercentage(e) {
            var t = e.target.getBoundingClientRect()
              , i = this.elems.progressBar[0].getBoundingClientRect();
            return (t.left - i.left + (e.pageX - t.left)) / i.width
        }
        ;
        _proto90.updatePlayheadDraggingPosition = function updatePlayheadDraggingPosition(e) {
            var t = this.getTargetTimelinePositionPercentage(e);
            this.showThumbnail(t),
            this.renderProgress()
        }
        ;
        return xo
    }(ca);
    var No = Tr(function(e) {
        var t = e.appState
          , i = e.visibility
          , n = Io(e);
        return {
            isAppOn: t.isOn,
            visibleState: n,
            isOverlayActive: n.endCard || n.errorCard,
            isVisible: i.controlBar,
            isFullscreen: t.isFullscreen,
            isMinimized: t.isMinimized,
            viewMode: t.viewMode,
            isCasting: t.isCasting,
            pointerMonitorState: t.pointerMonitorState
        }
    }, {
        setViewModeToNormal: n.setViewModeToNormal,
        setViewModeToFullScreen: n.setViewModeToFullScreen,
        setViewModeToMinimized: n.setViewModeToMinimized,
        hideControlBar: s.hideControlBar,
        showControlBar: s.showControlBar,
        closePlayer: r.closePlayer
    })(new (function(_ca12) {
        _inheritsLoose(_class44, _ca12);
        function _class44() {
            var _this151;
            _this151 = _ca12.call(this) || this,
            _this151._thumbnailLoadTimer = -1,
            _this151._lastPreviewPosition = -1,
            _this151._lastPlayheadPosition = 0,
            _this151._isVolumeDragging = !1,
            _this151._isVolumeControlActive = !1,
            _this151._isFadingIn = !1,
            _this151._isFadingOut = !1,
            _this151.onClickOutsideVolumeControl = _this151.onClickOutsideVolumeControl.bind(_assertThisInitialized(_this151)),
            _this151.onKeydown = _this151.onKeydown.bind(_assertThisInitialized(_this151));
            return _this151
        }
        var _proto91 = _class44.prototype;
        _proto91.init = function init() {
            var _this152 = this;
            var t = ft()(Ao);
            this.initElements(t),
            Kt.onUpdated(this.afterPlayerModelUpdated.bind(this)),
            _n.onUpdated(this.renderPlaybackButton.bind(this)),
            $.onUpdated(this.toggleVisible.bind(this)),
            Kt.onUpdated(this.toggleVisible.bind(this)),
            _n.onUpdated(this.toggleVisible.bind(this)),
            Rt.onUpdated(this.renderUpNext.bind(this)),
            Zn.addEventListener(xi.before(xi.SEEKING), this.onBeforeSeeking.bind(this)),
            Zn.addEventListener(xi.WILL_LOAD_START, this.onWillLoadStart.bind(this)),
            [xi.DURATION_CHANGE, xi.SEEKABLE_CHANGE, xi.PLAYING].forEach(function(e) {
                Zn.addEventListener(e, function() {
                    return _this152.renderAdBreaks()
                })
            }),
            $r.on("availablechanged", this._onCastAvailableChange.bind(this)),
            /safari/i.test(W.BROWSER) ? this.renderPaused() : this.renderPlaying(),
            this.renderViewModeButton("normal"),
            this.renderPipModeButton("normal"),
            _ca12.prototype.init.call(this, t),
            this.hide()
        }
        ;
        _proto91.initElements = function initElements(e) {
            var _this153 = this;
            this.elems = {
                controlsWrap: e.find(".controls-wrap"),
                actionHint: e.find(".action-feedback__text"),
                plackbackButton: e.find(".controls__playback-button"),
                rewindButton: e.find(".controls__rewind-button"),
                fastforwardButton: e.find(".controls__fastforward-button"),
                timelineContainer: e.find(".controls__timeline-container"),
                liveGuideButton: e.find(".controls__live-guide"),
                liveGuideSeperator: e.find(".controls__live-guide-sep"),
                volume: e.find(".controls__volume"),
                volumeButton: e.find(".controls__volume-button"),
                volumeNow: e.find(".controls__volume-now"),
                volumeSliderWrap: e.find(".controls__volume-slider-wrap"),
                volumeSlider: e.find(".controls__volume-slider"),
                volumeHandle: e.find(".controls__volume-handle"),
                viewModeButton: e.find(".controls__view-mode-button"),
                pipModeButton: e.find(".controls__pip-mode-button"),
                settingButton: e.find(".controls__setting-button"),
                settingPanelWrap: e.find(".controls__setting-panel-wrap"),
                upNextWrap: e.find(".up-next-wrap").hide(),
                upNextSubTitle: e.find(".up-next__subtitle"),
                upNextButton: e.find(".up-next__button"),
                castButton: e.find(".controls__cast-button"),
                controlSetting: e.find(".controls__setting")
            };
            var t = this.elems.settingButton[0];
            Sa(t, {
                tabindex: "0",
                role: "button",
                "aria-label": "Settings",
                "aria-haspopup": "true"
            }),
            Aa(t, {
                onTrigger: this.onToggleExpandSetting.bind(this)
            });
            var i = this.elems.volumeButton[0]
              , n = Zn.muted || 0 === Math.round(10 * Zn.volume);
            Sa(i, {
                tabindex: "0",
                role: "button",
                "aria-label": "Mute",
                "aria-checked": n ? "true" : "false"
            }),
            Aa(i, {
                onTrigger: this.onToggleMute.bind(this)
            });
            var r = this.elems.volumeSliderWrap[0]
              , s = Math.round(100 * Zn.volume);
            Sa(r, {
                tabindex: "0",
                role: "slider",
                "aria-valuemin": "0",
                "aria-valuenow": String(s),
                "aria-valuemax": "100",
                "aria-valuetext": s + "% Volume" + (n ? " Muted" : "")
            }),
            Aa(r, {
                onIncrease: function onIncrease() {
                    var e = Math.max(0, Math.min(1, Zn.volume + .1));
                    Zn.volume = e,
                    Zn.muted && _this153.onToggleMute()
                },
                onDecrease: function onDecrease() {
                    var e = Math.min(1, Math.max(0, Zn.volume - .1));
                    Zn.volume = e,
                    Zn.muted && e > 0 && _this153.onToggleMute()
                }
            }),
            r.addEventListener("focus", this.activeVolumeControl.bind(this)),
            r.addEventListener("blur", this.idleVolumeControl.bind(this));
            var a = this.elems.rewindButton[0];
            Sa(a, {
                tabindex: "0",
                role: "button",
                "aria-label": "10 second rewind"
            }),
            Aa(a, {
                onTrigger: this.onQuickRewind.bind(this)
            });
            var o = this.elems.plackbackButton[0];
            Sa(o, {
                tabindex: "0",
                role: "button"
            }),
            Aa(o, {
                onTrigger: this.onTogglePlay.bind(this)
            });
            var l = this.elems.fastforwardButton[0];
            Sa(l, {
                tabindex: "0",
                role: "button",
                "aria-label": "10 second fast forward"
            }),
            Aa(l, {
                onTrigger: this.onQuickForward.bind(this)
            });
            var d = this.elems.liveGuideButton[0];
            Sa(d, {
                tabindex: "0",
                role: "button",
                "aria-label": "Guide"
            }),
            Aa(d, {
                onTrigger: this.onToggleLiveGuide.bind(this)
            });
            var u = this.elems.upNextWrap[0];
            Sa(u, {
                tabindex: "0",
                role: "button"
            }),
            Aa(u, {
                onTrigger: this.onUpNext.bind(this)
            });
            var c = this.elems.pipModeButton[0];
            Sa(c, {
                tabindex: "0",
                role: "button"
            }),
            Aa(c, {
                onTrigger: this.onTogglePipMode.bind(this)
            });
            var h = this.elems.viewModeButton[0];
            Sa(h, {
                tabindex: "0",
                role: "button"
            }),
            Aa(h, {
                onTrigger: this.onToggleFullscreen.bind(this)
            }),
            this.timeline = new xo(this.elems.timelineContainer),
            this.timeline.receiveProps({
                isCasting: !1,
                onSeek: this.onSeek.bind(this),
                onJumpToLive: this.onJumpToLive.bind(this),
                onPlayheadDragStart: this.onPlayheadDragStart.bind(this),
                onPlayheadDragging: this.onPlayheadDragging.bind(this),
                onPlayheadDragEnd: this.onPlayheadDragEnd.bind(this),
                onTimelineScrubStart: this.onTimelineScrubStart.bind(this),
                onTimelineScrubEnd: this.onTimelineScrubEnd.bind(this),
                onQuickRewind: this.onQuickRewind.bind(this),
                onQuickForward: this.onQuickForward.bind(this),
                shouldAllowSeeking: this.shouldAllowSeeking.bind(this)
            }),
            this.elems.plackbackButton.on("click", this.onTogglePlay.bind(this)),
            this.elems.rewindButton.on("click", this.onQuickRewind.bind(this)),
            this.elems.fastforwardButton.on("click", this.onQuickForward.bind(this)),
            So(this.elems.volume[0], {
                onStart: function onStart() {
                    _this153.activeVolumeControl()
                },
                onEnd: function onEnd(e) {
                    _this153.onVolumeDragEnd(e),
                    _this153.idleVolumeControl()
                }
            }, {
                hover: !0,
                touch: !1
            }),
            wo(this.elems.volumeButton[0], {
                click: function click(e) {
                    Co(e) ? _this153.onToggleMute(e) : ko(e) && (_this153._isVolumeControlActive ? _this153.onToggleMute(e) : _this153.activeVolumeControl())
                }
            }),
            this.elems.volumeSliderWrap.on("click", function(e) {
                return _this153.onTune(e)
            }),
            So(this.elems.volumeSliderWrap[0], {
                onStart: this.onVolumeDragStart.bind(this),
                onMove: this.onVolumeDragging.bind(this),
                onEnd: this.onVolumeDragEnd.bind(this)
            }),
            this.elems.viewModeButton.on("click", this.onToggleFullscreen.bind(this)),
            this.elems.pipModeButton.on("click", this.onTogglePipMode.bind(this)),
            this.elems.liveGuideButton.on("click", this.onToggleLiveGuide.bind(this)),
            So(this.elems.controlSetting[0], {
                onStart: function onStart() {
                    _this153.elems.controlSetting.addClass("controls__setting-menu-open")
                },
                onEnd: function onEnd() {
                    _this153.elems.controlSetting.removeClass("controls__setting-menu-open")
                }
            }, {
                hover: !0,
                touch: !1
            }),
            this.elems.settingButton.on("click", this.onToggleExpandSetting.bind(this)),
            this.elems.upNextWrap.on("click", this.onUpNext.bind(this)),
            document.addEventListener("keydown", this.onKeydown, !0),
            this.elems.castButton.hide()
        }
        ;
        _proto91.onUpNext = function onUpNext() {
            Zn.continuousPlay({
                reason: xt
            }),
            Zn.trackUserAction({
                type: bn.ControlsBar.PLAY_NEXT
            })
        }
        ;
        _proto91.onJumpToLive = function onJumpToLive() {
            Dr.Events.seekStart.seekSource = "go_to_live_button",
            Zn.forcedSeek("live"),
            Zn.trackUserAction({
                type: bn.Player.SEEK
            }),
            this.trackTimelineScrub(Zn.seekableWindow.end)
        }
        ;
        _proto91.onTogglePlay = function onTogglePlay() {
            _n.isPaused ? (Zn.play(),
            Zn.trackUserAction({
                type: bn.Player.PLAY,
                from: bn.From.CONTROLS_BAR
            })) : (Zn.pause(),
            Zn.trackUserAction({
                type: bn.Player.PAUSE,
                from: bn.From.CONTROLS_BAR
            }))
        }
        ;
        _proto91.onToggleFullscreen = function onToggleFullscreen() {
            Za.closeSettingPanel(),
            this.props.isFullscreen ? this.props.setViewModeToNormal() : this.props.setViewModeToFullScreen()
        }
        ;
        _proto91.onTogglePipMode = function onTogglePipMode() {
            Za.closeSettingPanel(),
            this.props.isMinimized ? (ir.backToWatch(),
            this.props.setViewModeToNormal()) : (ir.backToBrowse({
                type: "pip"
            }),
            this.props.setViewModeToMinimized())
        }
        ;
        _proto91.onToggleLiveGuide = function onToggleLiveGuide() {
            ir.goToGuide()
        }
        ;
        _proto91.onSeek = function onSeek(e) {
            Dr.Events.seekStart.seekSource = "timeline_jump";
            var t = Bt.uxToApp(e);
            Dr.Events.timelineScrub.scrubStartTime = Date.now(),
            Dr.Events.timelineScrub.scrubStartPosition = this.getUxCurrentTime(),
            Zn.trackUserAction({
                type: bn.Player.SEEK
            }),
            this.trackTimelineScrub(t),
            Zn.seek(t)
        }
        ;
        _proto91.onQuickForward = function onQuickForward() {
            Dr.Events.seekStart.seekSource = "fast_forward_button";
            var e = Zn.currentTime + 10;
            Zn.trackUserAction({
                type: bn.ControlsBar.FASTFORWARD
            }),
            Dr.Events.timelineScrub.scrubStartTime = Date.now(),
            Dr.Events.timelineScrub.scrubStartPosition = this.getUxCurrentTime(),
            this.trackTimelineScrub(e),
            Zn.seek(e)
        }
        ;
        _proto91.onQuickRewind = function onQuickRewind() {
            Dr.Events.seekStart.seekSource = "rewind_button";
            var e = Zn.currentTime - 10;
            Zn.trackUserAction({
                type: bn.ControlsBar.REWIND
            }),
            Dr.Events.timelineScrub.scrubStartTime = Date.now(),
            Dr.Events.timelineScrub.scrubStartPosition = this.getUxCurrentTime(),
            this.trackTimelineScrub(e),
            Zn.seek(e)
        }
        ;
        _proto91.shouldAllowSeeking = function shouldAllowSeeking() {
            return Vi.isAllowed
        }
        ;
        _proto91.onToggleMute = function onToggleMute() {
            Zn.muted = !Zn.muted,
            Zn.trackUserAction({
                muted: Zn.muted,
                type: bn.Player.TOGGLE_MUTE,
                from: bn.From.CONTROLS_BAR
            })
        }
        ;
        _proto91.activeVolumeControl = function activeVolumeControl() {
            this._isVolumeControlActive = !0,
            this.elems.volume.addClass("controls__volume--active"),
            document.addEventListener("click", this.onClickOutsideVolumeControl)
        }
        ;
        _proto91.idleVolumeControl = function idleVolumeControl() {
            this._isVolumeControlActive = !1,
            this.elems.volume.removeClass("controls__volume--active"),
            document.removeEventListener("click", this.onClickOutsideVolumeControl)
        }
        ;
        _proto91.onVolumeDragStart = function onVolumeDragStart() {
            this._isVolumeDragging = !0
        }
        ;
        _proto91.onVolumeDragging = function onVolumeDragging(e) {
            this._isVolumeDragging && this.onTune(e)
        }
        ;
        _proto91.onVolumeDragEnd = function onVolumeDragEnd() {
            this._isVolumeDragging = !1
        }
        ;
        _proto91.onTune = function onTune(e) {
            var t = e.target
              , i = this.elems.volumeSlider[0]
              , n = t.getBoundingClientRect()
              , r = i.getBoundingClientRect();
            var s = n.left - r.left + (e.pageX - n.left);
            var a = Math.max(0, Math.min(1, Math.round(s / r.width * 10) / 10));
            Zn.volume = a
        }
        ;
        _proto91.onKeydown = function onKeydown(e) {
            if (!this.props.isAppOn || !Kt.isActive)
                return;
            var t = Ta.getUnifiedKey(e.key)
              , i = e.target.dataset.hotkeys;
            switch (t) {
            case Ta.KEYS.ESCAPE:
                this.props.closePlayer();
                break;
            case Ta.KEYS.K:
                Ui.userInteractionTime = new Date,
                this.onTogglePlay();
                break;
            case Ta.KEYS.M:
                this.onToggleMute();
            }
            if (!this.props.isMinimized)
                switch ([Ta.KEYS.SPACE, Ta.KEYS.ARROW_LEFT, Ta.KEYS.ARROW_RIGHT].includes(t) && (Ui.userInteractionTime = new Date),
                t) {
                case Ta.KEYS.F:
                    this.onToggleFullscreen();
                    break;
                case Ta.KEYS.SPACE:
                    Ta.hasHotkey(i, t) && Ro.isFocusVisible(e.target) || this.onTogglePlay();
                    break;
                case Ta.KEYS.ARROW_LEFT:
                    Ta.hasHotkey(i, t) && Ro.isFocusVisible(e.target) || this.onQuickRewind();
                    break;
                case Ta.KEYS.ARROW_RIGHT:
                    Ta.hasHotkey(i, t) && Ro.isFocusVisible(e.target) || this.onQuickForward();
                }
        }
        ;
        _proto91.onToggleExpandSetting = function onToggleExpandSetting() {
            Za.toggleDisplay(this.elems.settingPanelWrap, this.elems.settingButton),
            Zn.trackUserAction({
                visible: Za.isMenuOpen,
                type: bn.ControlsBar.TOGGLE_EXPAND_SETTING,
                from: bn.From.CONTROLS_BAR
            })
        }
        ;
        _proto91.onClickOutsideVolumeControl = function onClickOutsideVolumeControl(e) {
            var t = this.elems.volume[0]
              , i = e.target;
            t.contains(i) || this.idleVolumeControl()
        }
        ;
        _proto91.afterPlayerModelUpdated = function afterPlayerModelUpdated(e, t, i) {
            this.visible && ((i.currentTime || i.seekableWindow || i.isLive) && this.renderLive(),
            (i.duration || i.currentTime && this._verifyRenderPosition()) && (this._isPlayheadDragging || this.renderProgress()),
            (i.duration || i.seekableWindow || i.isLive) && this.renderSeekableWindow(),
            (i.duration || i.seekableWindow || i.isLive) && this.renderLiveEdge(),
            (i.volume || i.muted) && this.renderVolume(),
            i.isLive && this.renderLiveGuideButton())
        }
        ;
        _proto91._onCastAvailableChange = function _onCastAvailableChange(e) {
            this.elems.castButton.toggle(e && !W.IS_NONSUB),
            this.elems.castButton.toggleClass("controls__cast-button-available", e)
        }
        ;
        _proto91.onWillLoadStart = function onWillLoadStart() {
            Zn.playlistManager.getPlaylist().initialPosition > 0 && (Dr.Events.seekStart.seekSource = "resume_on_playback");
            var _this$getUxSeekableWi = this.getUxSeekableWindow()
              , e = _this$getUxSeekableWi.seekableStart
              , t = _this$getUxSeekableWi.seekableEnd;
            this.timeline.receiveProps({
                isLive: Kt.isLive,
                adBreaks: this.getUxAdBreaks(),
                currentTime: this.getUxCurrentTime(),
                duration: this.getUxDuration(),
                seekableStart: e,
                seekableEnd: t
            })
        }
        ;
        _proto91.onBeforeSeeking = function onBeforeSeeking(e) {
            var _this154 = this;
            var t = e.detail.failedReason
              , i = Ke.UNAVAILABLE_ACTION_FEEDBACK[t];
            i ? (clearTimeout(this._actionHintTimer),
            this.elems.actionHint.text(i).show(),
            this._actionHintTimer = setTimeout(function() {
                return _this154.elems.actionHint.hide()
            }, 5e3)) : (clearTimeout(this._actionHintTimer),
            this.elems.actionHint.hide())
        }
        ;
        _proto91._verifyRenderPosition = function _verifyRenderPosition() {
            var e = Zn.currentTime;
            return Math.abs(e - this._lastPlayheadPosition) > .9 && (this._lastPlayheadPosition = e,
            !0)
        }
        ;
        _proto91.toggleVisible = function toggleVisible() {
            var e = this.props.isOverlayActive
              , t = _n.isReady && !this.props.isCasting
              , i = _n.isPaused
              , n = "active" === this.props.pointerMonitorState || this.isInteractingWithControl
              , r = Zn.mediaType === Ft.INSERTED_AD && Zn.adsManager.isForcedHideOverlays()
              , s = !e && t && !r && (i || n);
            if (s && !this.props.isVisible) {
                var _e77 = "external";
                i ? _e77 = "paused" : n && (_e77 = "user_initiated"),
                Dr.Events.playerUiShown.openReason = _e77,
                this.props.showControlBar()
            } else if (!s && this.props.isVisible) {
                var _e78 = "external";
                "idle" === this.props.pointerMonitorState ? _e78 = "timer" : "leave" === this.props.pointerMonitorState && (_e78 = "user_initiated"),
                Dr.Events.playerUiClosed.closeReason = _e78,
                this.props.hideControlBar()
            }
        }
        ;
        _proto91.animateIn = function animateIn() {
            var _this155 = this;
            this._isFadingOut && (clearTimeout(this._animateOutTimer),
            this.fadeOutControls()),
            this._isFadingIn || (this._isFadingIn = !0,
            this.elem.addClass("controls-bar-container--fadeIn"),
            this.show(),
            setTimeout(function() {
                _this155._isFadingIn = !1
            }, 100),
            this.renderLive(),
            this._isPlayheadDragging || this.renderProgress(),
            this.renderSeekableWindow(),
            this.renderLiveEdge(),
            this.renderAdBreaks(),
            this.renderLiveGuideButton(),
            this.renderVolume(),
            this.trackPlayerUiShown())
        }
        ;
        _proto91.animateOut = function animateOut() {
            var _this156 = this;
            this._isFadingOut || (this._isFadingOut = !0,
            this.elem.addClass("controls-bar-container--fadeOut"),
            this._animateOutTimer = setTimeout(function() {
                _this156.fadeOutControls()
            }, 200),
            this.trackPlayerUiClosed())
        }
        ;
        _proto91.fadeOutControls = function fadeOutControls() {
            this.elem.removeClass("controls-bar-container--fadeIn controls-bar-container--fadeOut"),
            this._isFadingOut = !1,
            this.hide()
        }
        ;
        _proto91.resetPlaybackButton = function resetPlaybackButton() {
            this.elems.plackbackButton.removeClass(["playing", "paused"].map(function(e) {
                return "controls__playback-button--" + e
            }).join(" "))
        }
        ;
        _proto91.renderPlaying = function renderPlaying() {
            this.resetPlaybackButton(),
            this.elems.plackbackButton.addClass("controls__playback-button--playing"),
            Sa(this.elems.plackbackButton[0], {
                "aria-label": "Pause"
            })
        }
        ;
        _proto91.renderPaused = function renderPaused() {
            this.resetPlaybackButton(),
            this.elems.plackbackButton.addClass("controls__playback-button--paused"),
            Sa(this.elems.plackbackButton[0], {
                "aria-label": "Play"
            })
        }
        ;
        _proto91.renderViewModeButton = function renderViewModeButton(e) {
            var _this157 = this;
            ["pip", "normal", "fullscreen"].forEach(function(e) {
                return _this157.elems.viewModeButton.removeClass("controls__view-mode-button--" + e)
            }),
            this.elems.viewModeButton.addClass("controls__view-mode-button--" + e),
            Sa(this.elems.viewModeButton[0], {
                "aria-label": "fullscreen" === e ? "Exit Fullscreen" : "Fullscreen"
            })
        }
        ;
        _proto91.renderPipModeButton = function renderPipModeButton(e) {
            var _this158 = this;
            ["pip", "normal"].forEach(function(e) {
                return _this158.elems.pipModeButton.removeClass("controls__pip-mode-button--" + e)
            }),
            this.elems.pipModeButton.addClass("controls__pip-mode-button--" + e),
            Sa(this.elems.pipModeButton[0], {
                "aria-label": "pip" === e ? "Maximize" : "Minimize"
            })
        }
        ;
        _proto91.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var t;
            t = this.props.isMinimized ? "pip" : this.props.isFullscreen ? "fullscreen" : "normal",
            this.renderViewModeButton(t),
            this.renderPipModeButton(this.props.isMinimized ? "pip" : "normal"),
            e.isCasting === this.props.isCasting && e.pointerMonitorState === this.props.pointerMonitorState && e.isOverlayActive === this.props.isOverlayActive || this.toggleVisible(),
            e.isVisible && !this.props.isVisible ? this.animateOut() : !e.isVisible && this.props.isVisible && this.animateIn()
        }
        ;
        _proto91.renderProgress = function renderProgress() {
            var _this$getUxSeekableWi2 = this.getUxSeekableWindow()
              , e = _this$getUxSeekableWi2.seekableStart
              , t = this.getUxDuration()
              , i = this.getUxCurrentTime();
            this.timeline.receiveProps({
                duration: t,
                seekableStart: e,
                currentTime: i
            })
        }
        ;
        _proto91.renderSeekableWindow = function renderSeekableWindow() {
            var _this$getUxSeekableWi3 = this.getUxSeekableWindow()
              , e = _this$getUxSeekableWi3.seekableStart
              , t = _this$getUxSeekableWi3.seekableEnd
              , i = this.getUxDuration();
            this.timeline.receiveProps({
                seekableStart: e,
                seekableEnd: t,
                duration: i
            })
        }
        ;
        _proto91.renderLiveEdge = function renderLiveEdge() {
            var e = this.getUxDuration()
              , _this$getUxSeekableWi4 = this.getUxSeekableWindow()
              , t = _this$getUxSeekableWi4.seekableEnd
              , i = Rt.entity && Rt.entity.isLive;
            this.timeline.receiveProps({
                isLive: i,
                duration: e,
                liveEdge: t
            })
        }
        ;
        _proto91.renderPlaybackButton = function renderPlaybackButton(e, t, i) {
            i.isPaused && (e.isPaused ? this.renderPaused() : this.renderPlaying())
        }
        ;
        _proto91.renderAdBreaks = function renderAdBreaks() {
            var _this$getUxSeekableWi5 = this.getUxSeekableWindow()
              , e = _this$getUxSeekableWi5.seekableStart
              , t = _this$getUxSeekableWi5.seekableEnd
              , i = Kt.isLive
              , n = this.getUxAdBreaks()
              , r = this.getUxDuration();
            this.timeline.receiveProps({
                adBreaks: n,
                duration: r,
                seekableStart: e,
                seekableEnd: t,
                isLive: i
            })
        }
        ;
        _proto91.renderVolume = function renderVolume() {
            var e = Zn.muted ? 0 : Zn.volume
              , t = "controls__volume-button"
              , i = e / 1;
            this.elems.volumeButton.get(0).className = t,
            e > .6 ? this.elems.volumeButton.addClass(t + "--lg") : e > .3 ? this.elems.volumeButton.addClass(t + "--md") : e > 0 ? this.elems.volumeButton.addClass(t + "--sm") : this.elems.volumeButton.addClass(t + "--mute"),
            this.elems.volumeNow.css({
                width: Q.toPercentage(i)
            }),
            this.elems.volumeHandle.css({
                left: Q.formatCalc(i, this.elems.volumeHandle.width() / 2)
            });
            var n = Zn.muted || 0 === Math.round(10 * Zn.volume)
              , r = Math.round(100 * Zn.volume);
            Sa(this.elems.volumeSliderWrap[0], {
                "aria-valuenow": String(r),
                "aria-valuetext": r + "% Volume" + (n ? " Muted" : "")
            }),
            Sa(this.elems.volumeButton[0], {
                "aria-checked": n ? "true" : "false"
            })
        }
        ;
        _proto91.renderLiveGuideButton = function renderLiveGuideButton() {
            var e = W.IS_NONSUB || !(Kt.isLive && pt.isLiveSubscriber);
            this.elems.liveGuideButton.toggleClass("controls__live-guide--hidden", e),
            this.elems.liveGuideSeperator.toggleClass("controls__live-guide--hidden", e)
        }
        ;
        _proto91.renderLive = function renderLive() {
            var _this$getUxSeekableWi6 = this.getUxSeekableWindow()
              , e = _this$getUxSeekableWi6.seekableEnd;
            this.elems.controlsWrap.toggleClass("controls-wrap--live", Kt.isLive),
            this.timeline.receiveProps({
                liveEdge: e,
                isLive: Kt.isLive,
                duration: this.getUxDuration(),
                currentTime: this.getUxCurrentTime()
            })
        }
        ;
        _proto91.renderUpNext = function renderUpNext(e, t, i) {
            if (i.nextEntity)
                if (!W.IS_NONSUB && Kt.isVod && e.nextEntity) {
                    var _t50 = e.nextEntity.titleInfos.quaternaryTitle || e.nextEntity.titleInfos.primaryTitle;
                    this.elems.upNextSubTitle.text(_t50),
                    this.elems.upNextWrap.show()
                } else
                    this.elems.upNextWrap.hide()
        }
        ;
        _proto91.getUxAdBreaks = function getUxAdBreaks() {
            var e = Zn.adsManager.isManifestBreaksUsed()
              , t = Zn.adsManager.getAdBreaks();
            if (!e || Kt.isLive)
                return t;
            {
                var _e79 = 0;
                var _i44 = [];
                for (var _iterator8 = _createForOfIteratorHelperLoose(t), _step8; !(_step8 = _iterator8()).done; ) {
                    var _n32 = _step8.value;
                    _i44.push({
                        start: _n32.start - _e79,
                        end: _n32.start - _e79
                    }),
                    _e79 += _n32.end - _n32.start
                }
                return _i44
            }
        }
        ;
        _proto91.getUxCurrentTime = function getUxCurrentTime() {
            return Bt.appToUx(Zn.currentTime)
        }
        ;
        _proto91.getUxDuration = function getUxDuration() {
            return Bt.appToUx(Zn.duration)
        }
        ;
        _proto91.getUxSeekableWindow = function getUxSeekableWindow() {
            var e = Zn.seekableWindow
              , t = this.getUxDuration();
            return {
                seekableStart: Math.max(0, Math.min(Bt.appToUx(e.start), t)),
                seekableEnd: Math.max(0, Math.min(Bt.appToUx(e.end), t))
            }
        }
        ;
        _proto91.onPlayheadDragStart = function onPlayheadDragStart() {
            $.pointerMonitorState = "active",
            Dr.Events.timelineScrub.scrubStartPosition = this.getUxCurrentTime(),
            Dr.Events.timelineScrub.scrubStartTime = Date.now()
        }
        ;
        _proto91.onPlayheadDragging = function onPlayheadDragging() {
            $.pointerMonitorState = "active"
        }
        ;
        _proto91.onPlayheadDragEnd = function onPlayheadDragEnd(e) {
            Dr.Events.seekStart.seekSource = "timeline_scrub";
            var t = Bt.uxToApp(e);
            Zn.seek(t),
            this.isValidScrub() ? this.trackTimelineScrub(t) : Dr.Events.timelineScrub.reset(),
            Zn.trackUserAction({
                type: bn.Player.SEEK
            })
        }
        ;
        _proto91.onTimelineScrubStart = function onTimelineScrubStart() {
            Dr.Events.timelineScrub.scrubStartTime = Date.now()
        }
        ;
        _proto91.onTimelineScrubEnd = function onTimelineScrubEnd(e) {
            var t = Bt.uxToApp(e);
            Dr.Events.timelineScrub.scrubStartPosition = t,
            this.isValidScrub() ? this.trackTimelineScrub(t) : Dr.Events.timelineScrub.reset()
        }
        ;
        _proto91.isValidScrub = function isValidScrub() {
            var _Dr$Events$timelineSc = Dr.Events.timelineScrub
              , e = _Dr$Events$timelineSc.scrubStartTime
              , t = _Dr$Events$timelineSc.scrubStartPosition;
            return null !== t && null !== e && Date.now() - e > 200
        }
        ;
        _proto91.trackPlayerUiShown = function trackPlayerUiShown() {
            this.props.isOverlayActive || (this._playerUiShownTime = Date.now(),
            Dr.track(Dr.Events.playerUiShown, {
                open_reason: Dr.Events.playerUiShown.openReason
            }))
        }
        ;
        _proto91.trackPlayerUiClosed = function trackPlayerUiClosed() {
            if (this.props.isOverlayActive)
                return;
            var e = Date.now() - this._playerUiShownTime;
            Dr.track(Dr.Events.playerUiClosed, {
                close_reason: Dr.Events.playerUiClosed.closeReason,
                ui_visible_duration: e
            })
        }
        ;
        _proto91.trackTimelineScrub = function trackTimelineScrub(e) {
            var _Dr$Events$timelineSc2 = Dr.Events.timelineScrub
              , t = _Dr$Events$timelineSc2.scrubStartTime
              , i = _Dr$Events$timelineSc2.scrubStartPosition;
            if (!this.shouldAllowSeeking())
                return Dr.Events.timelineScrub.reset(),
                !1;
            if (null === i || null === t)
                return void Dr.Events.timelineScrub.reset();
            var _Zn$trySeek = Zn.trySeek(e)
              , n = _Zn$trySeek.burnedInAdBreak
              , r = _Zn$trySeek.insertedAdBreak
              , a = {
                did_playback_position_change: i !== e,
                scrubbing_duration: Date.now() - t,
                was_blocked_by_ad_restrictions: !(!n && !r)
            };
            Dr.track(Dr.Events.timelineScrub, a),
            Dr.Events.timelineScrub.reset()
        }
        ;
        _createClass(_class44, [{
            key: "isInteractingWithControl",
            get: function get() {
                return this._isVolumeDragging || this._isPlayheadDragging || Za.isMenuOpen
            }
        }]);
        return _class44
    }(ca)));
    var Uo = "\n  <div class=\"cast-controls-bar-container\">\n    <div class='controls-wrap'>\n      <div class='action-feedback'>\n        <div class='action-feedback__text keep-mouse-active'></div>\n      </div>\n      <div class='controls'>\n\n        <div class='controls__timeline-container' />\n\n        <div class='controls__menus'>\n          <div class=\"controls__menus-left\">\n            <div class=\"controls__live-guide\">\n              <div class=\"controls__live-guide-icon player-svgicon\">" + ha("live_guide") + "</div>\n              <div class=\"controls__live-guide-text\">GUIDE</div>\n              <div class=\"controls__live-guide-sep\"/>\n            </div>\n            <div class='controls__setting keep-mouse-active' data-role=\"control\">\n              <div class=\"controls__setting-panel-wrap\">\n              </div>\n              <div class='controls__setting-button player-svgicon'>" + ha("settings_hover") + "</div>\n            </div>\n            <div class='controls__volume keep-mouse-active' data-role=\"control\">\n              <div class='controls__volume-button controls__volume-button--lg'>\n                <div class=\"controls__volume-button-mute player-svgicon\">" + ha("volume_4_hover") + "</div>\n                <div class=\"controls__volume-button-sm player-svgicon\">" + ha("volume_1_hover") + "</div>\n                <div class=\"controls__volume-button-md player-svgicon\">" + ha("volume_2_hover") + "</div>\n                <div class=\"controls__volume-button-lg player-svgicon\">" + ha("volume_3_hover") + "</div>\n              </div>\n              <div class=\"controls__volume-slider-wrap\">\n                <div class=\"controls__volume-slider\">\n                  <div class=\"controls__volume-max\"></div>\n                  <div class=\"controls__volume-now\"></div>\n                  <div class=\"controls__volume-handle\">\n                    <div class=\"controls__volume-handle-track\"></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"controls__menus-center\">\n            <div class=\"controls__rewind-button keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__rewind-button-tip button-tool-tips\">10 SECOND REWIND</div>\n              <div class=\"controls__rewind-button-icon player-svgicon\">" + ha("10_LEFT_hover") + "</div>\n            </div>\n            <div class=\"controls__playback-button keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__playback-button-playing\">\n                <div class=\"controls__playback-button-playing-tip button-tool-tips\">PLAY</div>\n                <div class=\"controls__playback-button-playing-icon player-svgicon\">" + ha("play_hover") + "</div>\n              </div>\n              <div class=\"controls__playback-button-paused\">\n                <div class=\"controls__playback-button-paused-tip button-tool-tips\">PAUSE</div>\n                <div class=\"controls__playback-button-paused-icon player-svgicon\">" + ha("pause_hover") + "</div>\n              </div>\n            </div>\n            <div class=\"controls__fastforward-button keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__fastforward-button-tip button-tool-tips\">10 SECOND FASTFORWARD</div>\n              <div class=\"controls__fastforward-button-icon player-svgicon\">" + ha("10_RIGHT_hover") + "</div>\n            </div>\n          </div>\n          <div class=\"controls__menus-right\">\n            <div class=\"controls__cast-button controls__cast-button-available keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__cast-device-name button-tool-tips\"></div>\n              <div class=\"controls__cast-button-icon\">\n                <google-cast-launcher></google-cast-launcher>\n              </div>\n            </div>\n            <div class=\"controls__pip-mode-button keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__pip-mode-button-normal\">\n                <div class=\"controls__detach-button-tip button-tool-tips\">MINIMIZE</div>\n                <div class=\"controls__detach-button-icon player-svgicon\">" + ha("detach_from_player") + "</div>\n              </div>\n              <div class=\"controls__pip-mode-button-pip\">\n                <div class=\"controls__attach-button-tip button-tool-tips\">MAXIMIZE</div>\n                <div class=\"controls__attach-button-icon player-svgicon\">" + ha("attch_to_player") + "</div>\n              </div>\n            </div>\n            <div class=\"controls__view-mode-button keep-mouse-active\" data-role=\"control\">\n              <div class=\"controls__view-mode-button-normal\">\n                <div class=\"controls__view-mode-button-normal-tip button-tool-tips\">FULL SCREEN</div>\n                <div class=\"controls__view-mode-button-normal-icon player-svgicon\">" + ha("full_screen_hover") + "</div>\n              </div>\n              <div class=\"controls__view-mode-button-fullscreen\">\n                <div class=\"controls__view-mode-button-fullscreen-tip button-tool-tips\">EXIT FULL SCREEN</div>\n                <div class=\"controls__view-mode-button-fullscreen-icon player-svgicon\">" + ha("exit_full_screen_hover") + "</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n";
    var Bo = Tr(function(_ref41) {
        var e = _ref41.appState
          , t = _ref41.error;
        return {
            viewMode: e.viewMode,
            isMinimized: e.isMinimized,
            isFullscreen: e.isFullscreen,
            error: t.errorInstance,
            isCasting: e.isCasting,
            isAppOn: e.isOn
        }
    }, {
        setViewModeToNormal: n.setViewModeToNormal,
        setViewModeToFullScreen: n.setViewModeToFullScreen,
        setViewModeToMinimized: n.setViewModeToMinimized
    })(new (function(_ca13) {
        _inheritsLoose(_class45, _ca13);
        function _class45() {
            var _this159;
            _this159 = _ca13.call(this) || this,
            _this159._lastPreviewPosition = -1,
            _this159._lastPlayheadPosition = 0,
            _this159._isVolumeDragging = !1,
            _this159._isSettingMenuOpen = !1,
            _this159._isVolumeControlActive = !1,
            _this159.onClickOutsideVolumeControl = _this159.onClickOutsideVolumeControl.bind(_assertThisInitialized(_this159)),
            _this159.onKeydown = _this159.onKeydown.bind(_assertThisInitialized(_this159));
            return _this159
        }
        var _proto92 = _class45.prototype;
        _proto92.init = function init() {
            var t = ft()(Uo);
            this.initElements(t),
            Nr.onUpdated(this.onCastPlayerModelUpdated.bind(this)),
            /safari/i.test(W.BROWSER) ? this.renderPaused() : this.renderPlaying(),
            _ca13.prototype.init.call(this, t),
            this.renderViewModeButton("normal"),
            this.renderPipModeButton("normal"),
            this.renderPaused(),
            this.hide()
        }
        ;
        _proto92.initElements = function initElements(e) {
            var _this160 = this;
            this.elems = {
                controlsWrap: e.find(".controls-wrap"),
                watchingLiveLabel: e.find(".controls__watching-live"),
                plackbackButton: e.find(".controls__playback-button"),
                rewindButton: e.find(".controls__rewind-button"),
                fastforwardButton: e.find(".controls__fastforward-button"),
                programStatus: e.find(".controls__program-status"),
                liveGuideButton: e.find(".controls__live-guide"),
                liveGuideSeperator: e.find(".controls__live-guide-sep"),
                volume: e.find(".controls__volume"),
                volumeButton: e.find(".controls__volume-button"),
                volumeNow: e.find(".controls__volume-now"),
                volumeSliderWrap: e.find(".controls__volume-slider-wrap"),
                volumeSlider: e.find(".controls__volume-slider"),
                volumeHandle: e.find(".controls__volume-handle"),
                viewModeButton: e.find(".controls__view-mode-button"),
                pipModeButton: e.find(".controls__pip-mode-button"),
                settingButton: e.find(".controls__setting-button"),
                settingPanelWrap: e.find(".controls__setting-panel-wrap"),
                castDeviceName: e.find(".controls__cast-device-name"),
                controlSetting: e.find(".controls__setting"),
                timelineContainer: e.find(".controls__timeline-container")
            },
            this.elems.plackbackButton.on("click", this.onTogglePlay.bind(this)),
            this.elems.rewindButton.on("click", this.onQuickRewind.bind(this)),
            this.elems.fastforwardButton.on("click", this.onQuickForward.bind(this)),
            this.timeline = new xo(this.elems.timelineContainer),
            this.timeline.receiveProps({
                isCasting: !0,
                onSeek: this.onSeek.bind(this),
                onJumpToLive: this.onJumpToLive.bind(this)
            }),
            So(this.elems.volume[0], {
                onStart: function onStart() {
                    return _this160.activeVolumeControl()
                },
                onEnd: function onEnd(e) {
                    _this160.onVolumeDragEnd(e),
                    _this160.idleVolumeControl()
                }
            }, {
                hover: !0,
                touch: !1
            }),
            wo(this.elems.volumeButton[0], {
                click: function click(e) {
                    Co(e) ? _this160.onToggleMute(e) : ko(e) && (_this160.isVolumeSettingActive() ? _this160.onToggleMute(e) : _this160.activeVolumeControl())
                }
            }),
            this.elems.volumeSliderWrap.on("click", function(e) {
                return _this160.onTune(e)
            }),
            So(this.elems.volumeSliderWrap[0], {
                onStart: this.onVolumeDragStart.bind(this),
                onMove: this.onVolumeDragging.bind(this),
                onLeave: this.onVolumeDragEnd.bind(this)
            }, {
                touch: !0
            }),
            this.elems.viewModeButton.on("click", this.onToggleFullscreen.bind(this)),
            this.elems.pipModeButton.on("click", this.onTogglePipMode.bind(this)),
            this.elems.settingButton.on("click", this.onToggleExpandSetting.bind(this)),
            this.elems.liveGuideButton.on("click", this.onToggleLiveGuide.bind(this)),
            So(this.elems.controlSetting[0], {
                onStart: function onStart() {
                    return _this160.elems.controlSetting.addClass("controls__setting-menu-open")
                },
                onEnd: function onEnd() {
                    return _this160.elems.controlSetting.removeClass("controls__setting-menu-open")
                }
            }, {
                hover: !0,
                touch: !1
            }),
            document.addEventListener("keydown", this.onKeydown)
        }
        ;
        _proto92.onViewPropsUpdated = function onViewPropsUpdated() {
            var t = this.props.isMinimized ? "pip" : this.props.isFullscreen ? "fullscreen" : "normal";
            this.renderViewModeButton(t),
            this.renderPipModeButton(this.props.isMinimized ? "pip" : "normal"),
            this.toggleVisible()
        }
        ;
        _proto92.onToggleExpandSetting = function onToggleExpandSetting() {
            Za.toggleDisplay(this.elems.settingPanelWrap, this.elems.settingButton)
        }
        ;
        _proto92.onToggleLiveGuide = function onToggleLiveGuide() {
            W.LIVE_GUIDE_V2_ENABLED ? ir.goToGuide() : this.trigger("toggleLiveGuideV1")
        }
        ;
        _proto92.onClickOutsideVolumeControl = function onClickOutsideVolumeControl(e) {
            var t = this.elems.volume[0]
              , i = e.target;
            t.contains(i) || this.idleVolumeControl()
        }
        ;
        _proto92.onCastPlayerModelUpdated = function onCastPlayerModelUpdated(e, t, i) {
            if (i.playbackData) {
                var _t51 = e.playbackData;
                _t51.isPlaying ? this.renderPlaying() : this.renderPaused();
                var _i45 = _t51.seekableWindow
                  , _n33 = _t51.isLive
                  , _r22 = _i45.start / 1e3
                  , _s11 = _i45.end / 1e3
                  , _a7 = _t51.duration / 1e3
                  , _o3 = _t51.currentTime / 1e3
                  , _l2 = _t51.adBreaks.map(function(e) {
                    return {
                        start: e.start / 1e3,
                        end: e.end / 1e3
                    }
                });
                this.renderLive({
                    isLive: _n33,
                    liveEdge: _s11,
                    duration: _a7,
                    currentTime: _o3
                }),
                this.renderLiveEdge({
                    duration: _a7,
                    seekableStart: _r22,
                    seekableEnd: _s11,
                    isLive: _n33
                }),
                this.renderLiveGuideButton({
                    isLive: _n33
                }),
                this.renderProgress({
                    duration: _a7,
                    currentTime: _o3,
                    seekableStart: _r22
                }),
                this.renderSeekableWindow({
                    seekableStart: _r22,
                    seekableEnd: _s11,
                    duration: _a7
                }),
                this.renderAdBreaks({
                    adBreaks: _l2,
                    duration: _a7,
                    seekableStart: _r22,
                    seekableEnd: _s11,
                    isLive: _n33
                })
            }
            if ((i.volume || i.isMuted) && this.renderVolume(),
            i.receiverFriendlyName) {
                var _t52 = e.receiverFriendlyName ? "CASTING ON " + e.receiverFriendlyName.toUpperCase() : "CASTING";
                this.elems.castDeviceName.html(_t52)
            }
        }
        ;
        _proto92.onJumpToLive = function onJumpToLive() {
            $r.specialSeek("live")
        }
        ;
        _proto92.onTogglePlay = function onTogglePlay() {
            Nr.playbackData && Nr.playbackData.isPlaying ? $r.pause() : $r.play()
        }
        ;
        _proto92.onToggleFullscreen = function onToggleFullscreen() {
            Za.closeSettingPanel(),
            this.props.isFullscreen ? this.props.setViewModeToNormal() : this.props.setViewModeToFullScreen()
        }
        ;
        _proto92.onTogglePipMode = function onTogglePipMode() {
            Za.closeSettingPanel(),
            this.props.isMinimized ? (ir.backToWatch(),
            this.props.setViewModeToNormal()) : (ir.backToBrowse({
                type: "pip"
            }),
            this.props.setViewModeToMinimized())
        }
        ;
        _proto92.onQuickForward = function onQuickForward() {
            if (Nr.playbackData.seekableWindow && null != Nr.playbackData.seekableWindow.end) {
                var _e80 = Math.min(Nr.playbackData.currentTime + 1e4, Nr.playbackData.seekableWindow.end);
                $r.seek(_e80)
            }
        }
        ;
        _proto92.onQuickRewind = function onQuickRewind() {
            if (Nr.playbackData.seekableWindow && null != Nr.playbackData.seekableWindow.start) {
                var _e81 = Math.max(Nr.playbackData.currentTime - 1e4, Nr.playbackData.seekableWindow.start);
                $r.seek(_e81)
            }
        }
        ;
        _proto92.onSeek = function onSeek(e) {
            $r.seek(1e3 * e)
        }
        ;
        _proto92.onToggleMute = function onToggleMute() {
            $r.muted = !$r.muted
        }
        ;
        _proto92.isVolumeSettingActive = function isVolumeSettingActive() {
            return this.elems.volume.hasClass("controls__volume--active")
        }
        ;
        _proto92.activeVolumeControl = function activeVolumeControl() {
            this._isVolumeControlActive = !0,
            this.elems.volume.addClass("controls__volume--active"),
            document.addEventListener("click", this.onClickOutsideVolumeControl)
        }
        ;
        _proto92.idleVolumeControl = function idleVolumeControl() {
            this._isVolumeControlActive = !1,
            this.elems.volume.removeClass("controls__volume--active"),
            document.removeEventListener("click", this.onClickOutsideVolumeControl)
        }
        ;
        _proto92.onTune = function onTune(e) {
            var t = e.target
              , i = this.elems.volumeSlider[0]
              , n = t.getBoundingClientRect()
              , r = i.getBoundingClientRect();
            var s = Q.getOffset(n).left - Q.getOffset(r).left + (e.pageX - n.left);
            var a = Math.max(0, Math.min(1, Math.round(s / r.width * 10) / 10));
            $r.volume = a
        }
        ;
        _proto92.onVolumeDragStart = function onVolumeDragStart() {
            this._isVolumeDragging = !0
        }
        ;
        _proto92.onVolumeDragging = function onVolumeDragging(e) {
            this._isVolumeDragging && this.onTune(e)
        }
        ;
        _proto92.onVolumeDragEnd = function onVolumeDragEnd() {
            this._isVolumeDragging = !1
        }
        ;
        _proto92.onKeydown = function onKeydown(e) {
            if (this.props.isAppOn && !this.props.isMinimized)
                switch (e.which) {
                case 27:
                    ir.backToWatch(),
                    this.props.setViewModeToNormal();
                    break;
                case 32:
                    this.onTogglePlay();
                    break;
                case 37:
                    this.onQuickRewind();
                    break;
                case 39:
                    this.onQuickForward();
                    break;
                case 77:
                    this.onToggleMute();
                }
        }
        ;
        _proto92.renderAdBreaks = function renderAdBreaks(_ref42) {
            var e = _ref42.adBreaks
              , t = _ref42.duration
              , i = _ref42.seekableStart
              , n = _ref42.seekableEnd
              , r = _ref42.isLive;
            this.timeline.receiveProps({
                adBreaks: e,
                duration: t,
                seekableStart: i,
                seekableEnd: n,
                isLive: r
            })
        }
        ;
        _proto92.renderLive = function renderLive(_ref43) {
            var e = _ref43.liveEdge
              , t = _ref43.duration
              , i = _ref43.isLive
              , n = _ref43.currentTime;
            this.elems.controlsWrap.toggleClass("controls-wrap--live", i),
            this.timeline.receiveProps({
                liveEdge: e,
                duration: t,
                isLive: i,
                currentTime: n
            })
        }
        ;
        _proto92.renderLiveEdge = function renderLiveEdge(_ref44) {
            var e = _ref44.duration
              , t = _ref44.seekableStart
              , i = _ref44.seekableEnd
              , n = _ref44.isLive;
            this.timeline.receiveProps({
                duration: e,
                seekableStart: t,
                seekableEnd: i,
                isLive: n
            })
        }
        ;
        _proto92.renderLiveGuideButton = function renderLiveGuideButton(_ref45) {
            var e = _ref45.isLive;
            var t = !(e && pt.isLiveSubscriber);
            this.elems.liveGuideButton.toggleClass("controls__live-guide--hidden", t),
            this.elems.liveGuideSeperator.toggleClass("controls__live-guide--hidden", t)
        }
        ;
        _proto92.renderPaused = function renderPaused() {
            this.resetPlaybackButton(),
            this.elems.plackbackButton.addClass("controls__playback-button--paused")
        }
        ;
        _proto92.renderPlaying = function renderPlaying() {
            this.resetPlaybackButton(),
            this.elems.plackbackButton.addClass("controls__playback-button--playing")
        }
        ;
        _proto92.renderPlaybackButton = function renderPlaybackButton(e, t, i) {
            i.isPaused && (e.isPaused ? this.renderPaused() : this.renderPlaying())
        }
        ;
        _proto92.renderProgress = function renderProgress(_ref46) {
            var e = _ref46.seekableStart
              , t = _ref46.duration
              , i = _ref46.currentTime;
            this.timeline.receiveProps({
                seekableStart: e,
                currentTime: i,
                duration: t
            })
        }
        ;
        _proto92.renderSeekableWindow = function renderSeekableWindow(_ref47) {
            var e = _ref47.seekableStart
              , t = _ref47.seekableEnd
              , i = _ref47.duration;
            e = Math.min(e, i),
            t = Math.min(t, i),
            this.timeline.receiveProps({
                seekableStart: e,
                seekableEnd: t,
                duration: i
            })
        }
        ;
        _proto92.renderViewModeButton = function renderViewModeButton(e) {
            var _this161 = this;
            ["pip", "normal", "fullscreen"].forEach(function(e) {
                return _this161.elems.viewModeButton.removeClass("controls__view-mode-button--" + e)
            }),
            this.elems.viewModeButton.addClass("controls__view-mode-button--" + e)
        }
        ;
        _proto92.renderPipModeButton = function renderPipModeButton(e) {
            var _this162 = this;
            ["pip", "normal"].forEach(function(e) {
                return _this162.elems.pipModeButton.removeClass("controls__pip-mode-button--" + e)
            }),
            this.elems.pipModeButton.addClass("controls__pip-mode-button--" + e)
        }
        ;
        _proto92.renderVolume = function renderVolume() {
            var e = Nr.playVolume
              , t = "controls__volume-button"
              , i = e / 1;
            this.elems.volumeButton.get(0).className = t,
            e > .6 ? this.elems.volumeButton.addClass(t + "--lg") : e > .3 ? this.elems.volumeButton.addClass(t + "--md") : e > 0 ? this.elems.volumeButton.addClass(t + "--sm") : this.elems.volumeButton.addClass(t + "--mute"),
            this.elems.volumeNow.css({
                width: Q.toPercentage(i)
            }),
            this.elems.volumeHandle.css({
                left: Q.formatCalc(i, this.elems.volumeHandle.width() / 2)
            })
        }
        ;
        _proto92.resetPlaybackButton = function resetPlaybackButton() {
            this.elems.plackbackButton.removeClass(["playing", "paused"].map(function(e) {
                return "controls__playback-button--" + e
            }).join(" "))
        }
        ;
        _proto92.toggleVisible = function toggleVisible() {
            var e = this.props.isCasting && null == this.props.error;
            e && !this.visible ? this.show() : !e && this.visible && this.hide()
        }
        ;
        return _class45
    }(ca)));
    var Fo = "loading-screen-container--masked"
      , Vo = {
        [Ft.CONTENT]: [Ft.INSERTED_AD, Ft.POST_INTRO],
        [Ft.INTRO]: [Ft.CONTENT, Ft.INSERTED_AD, Ft.BURNED_IN_AD]
    };
    var Ho = Tr(function(_ref48) {
        var e = _ref48.appState
          , t = _ref48.visibility
          , i = _ref48.playerState;
        return {
            isMinimized: e.isMinimized,
            loadingViewVisibility: t.loadingView,
            mediaType: i.mediaType,
            isCasting: e.isCasting
        }
    }, {
        showLoadingView: s.showLoadingView,
        hideLoadingView: s.hideLoadingView
    })(new (function(_ca14) {
        _inheritsLoose(_class46, _ca14);
        function _class46() {
            return _ca14.apply(this, arguments) || this
        }
        var _proto93 = _class46.prototype;
        _proto93.init = function init() {
            var e = ft()("\n  <div class=\"loading-screen-container\">\n    <div class=\"loading-screen-bar\">\n      <div class=\"loading-screen-progress\">\n      </div>\n    </div>\n  </div>\n");
            _ca14.prototype.init.call(this, e),
            this.hide(),
            this._bindingEvents()
        }
        ;
        _proto93._bindingEvents = function _bindingEvents() {
            var _this163 = this;
            Zn.addEventListener(xi.CAN_PLAY, this._onCanPlay.bind(this)),
            Zn.addEventListener(xi.PERIOD_EXIT, this._onPeriodExit.bind(this)),
            Zn.addEventListener(xi.PLAYING, this._onPlaying.bind(this)),
            Zn.addEventListener(xi.REBUFFER_START, this._onRebufferStart.bind(this)),
            Zn.addEventListener(xi.SEEKING, this._onSeeking.bind(this)),
            Zn.addEventListener(xi.ENDED, function() {
                return _this163.hideLoading()
            }),
            Zn.addEventListener(xi.ERROR, function() {
                return _this163.hideLoading()
            }),
            Zn.addEventListener(xi.AD_BREAK_START, function() {
                return _this163.hideLoading()
            })
        }
        ;
        _proto93._onCanPlay = function _onCanPlay() {
            var e = this.props.hideLoadingView;
            e()
        }
        ;
        _proto93._onPeriodExit = function _onPeriodExit(e) {
            e.detail.ended && !e.detail.seamless && this.props.showLoadingView(!0)
        }
        ;
        _proto93._onPlaying = function _onPlaying() {
            this.props.hideLoadingView()
        }
        ;
        _proto93._onRebufferStart = function _onRebufferStart() {
            this.props.mediaType === Ft.CONTENT && this.props.showLoadingView()
        }
        ;
        _proto93._onSeeking = function _onSeeking() {
            this.props.showLoadingView()
        }
        ;
        _proto93.hideLoading = function hideLoading() {
            this.props.hideLoadingView()
        }
        ;
        _proto93.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var _this$props11 = this.props
              , t = _this$props11.isCasting
              , i = _this$props11.mediaType
              , n = _this$props11.isMinimized
              , r = _this$props11.loadingViewVisibility;
            !e.isCasting && t && this.props.hideLoadingView(),
            !t && (Vo[e.mediaType] || []).includes(i) && this.props.showLoadingView(!0),
            !e.isMinimized && n && this.hide(),
            e.loadingViewVisibility.isHidden && !r.isHidden ? this.show(r.hideMask) : !e.loadingViewVisibility.isHidden && r.isHidden && this.hide()
        }
        ;
        _proto93.isActive = function isActive() {
            return !this.props.isMinimized
        }
        ;
        _proto93.show = function show(e) {
            this.isActive() && this.elem.addClass(e ? "" : Fo).show()
        }
        ;
        _proto93.hide = function hide() {
            this.elem.removeClass(Fo).hide()
        }
        ;
        return _class46
    }(ca)));
    var jo = function(e) {
        return "<div class='closed-caption-panel__font-option' data-font='" + e + "' style='font-family: " + e + ";'>" + e + " </div>"
    }
      , Wo = "\n  <div class=\"closed-caption-panel__base-color-style-selector\">\n    <div class=\"closed-caption-panel__opaque-selector\">\n      <div class=\"closed-caption-panel__opaque-option\" data-opaque=\"1\">opaque</div>\n      <div class=\"closed-caption-panel__opaque-option\" data-opaque=\"0.5\">semi-transparent</div>\n      <div class=\"closed-caption-panel__opaque-option\" data-opaque=\"0\">none</div>\n    </div>\n    <div class=\"closed-caption-panel__base-color-picker\">\n      <div class=\"closed-caption-panel__base-cell\" style=\"background-color: rgb(255, 255, 255);\" data-color=\"#ffffff\"></div>\n      <div class=\"closed-caption-panel__base-cell\" style=\"background-color: rgb(255, 0, 0);\" data-color=\"#ff0000\"></div>\n      <div class=\"closed-caption-panel__base-cell\" style=\"background-color: rgb(204, 0, 102);\" data-color=\"#cc0066\"></div>\n      <div class=\"closed-caption-panel__base-cell\" style=\"background-color: rgb(255, 204, 0);\" data-color=\"#ffcc00\"></div>\n      <div class=\"closed-caption-panel__base-cell\" style=\"background-color: rgb(0, 0, 0);\" data-color=\"#000000\"></div>\n      <div class=\"closed-caption-panel__base-cell\" style=\"background-color: rgb(0, 51, 153);\" data-color=\"#003399\"></div>\n      <div class=\"closed-caption-panel__base-cell\" style=\"background-color: rgb(0, 153, 153);\" data-color=\"#009999\"></div>\n      <div class=\"closed-caption-panel__base-cell\" style=\"background-color: rgb(102, 204, 0);\" data-color=\"#66cc00\"></div>\n    </div>\n  </div>\n"
      , Go = function(e, t) {
        return "\n  <div class=\"closed-caption-panel__base-cell closed-caption-panel__effect-cell\" data-effect=\"" + e + "\" style=\"text-shadow: " + t + "\">A</div>\n"
    };
    var Ko = function() {
        var e = ["monospace", "sans-serif", "serif"]
          , t = document.getElementsByTagName("body")[0]
          , i = document.createElement("span");
        i.style.fontSize = "72px",
        i.innerHTML = "mmmmmmmmmmlli";
        var n = {}
          , r = {};
        for (var _s12 in e) {
            i.style.fontFamily = e[_s12],
            t.appendChild(i),
            n[e[_s12]] = i.offsetWidth,
            r[e[_s12]] = i.offsetHeight,
            t.removeChild(i)
        }
        this.detect = function(s) {
            var a = !1;
            for (var _o4 in e) {
                i.style.fontFamily = s + "," + e[_o4],
                t.appendChild(i);
                var _l3 = i.offsetWidth != n[e[_o4]] || i.offsetHeight != r[e[_o4]];
                t.removeChild(i),
                a = a || _l3
            }
            return a
        }
    };
    var zo = Tr(function(e) {
        var t = e.appState
          , i = e.visibility
          , n = e.user
          , r = e.captionStyle;
        return {
            isVisible: i.captionStylePanel,
            viewMode: t.viewMode,
            isCasting: t.isCasting,
            profileId: n.profileId,
            transitionMode: r.transitionMode,
            fontList: r.fontList,
            fontSize: r.fontSize,
            textOpaque: r.textOpaque,
            textColor: r.textColor,
            backgroundColor: r.backgroundColor,
            backgroundOpaque: r.backgroundOpaque,
            style: r.style,
            storableCaptionProperties: zr(e),
            captionCssObject: Gr(e),
            castCaptionCssObjectSelector: Kr(e)
        }
    }, {
        hideCaptionStylePanel: s.hideCaptionStylePanel,
        setCaptionStyle: c.setCaptionStyle,
        setCaptionTransitionMode: c.setCaptionTransitionMode,
        setFontList: c.setCaptionFontList,
        setFont: c.setCaptionFont,
        setFontSize: c.setCaptionFontSize,
        setCaptionTextOpaque: c.setCaptionTextOpaque,
        setCaptionTextColor: c.setCaptionTextColor,
        setCaptionBackgroundColor: c.setCaptionBackgroundColor,
        setCaptionBackgroundOpaque: c.setCaptionBackgroundOpaque,
        setCaptionEffect: c.setCaptionEffect
    })(new (function(_ca15) {
        _inheritsLoose(_class47, _ca15);
        function _class47() {
            return _ca15.call(this) || this
        }
        var _proto94 = _class47.prototype;
        _proto94.init = function init() {
            var t = ft()("  \n  <div class=\"closed-caption-style-panel-container\">\n    <div class=\"closed-caption-panel\">\n      <div class=\"closed-caption-panel__title\">caption options</div>\n      <div class=\"closed-caption-panel__style-selector\">\n        <div class=\"closed-caption-panel__style-option green-style\" data-style=\"green\">Aa</div>\n        <div class=\"closed-caption-panel__style-option white-style\" data-style=\"white\">Aa</div>\n        <div class=\"closed-caption-panel__style-option red-style\" data-style=\"red\">Aa</div>\n        <div class=\"closed-caption-panel__style-option cyan-style\" data-style=\"cyan\">Aa</div>\n        <div class=\"closed-caption-panel__style-option default-style\" data-style=\"default\">default</div>\n        <div class=\"closed-caption-panel__style-option custom-style\" data-style=\"custom\">custom</div>\n      </div>\n      <div class=\"closed-caption-panel__vertical-separator\"></div>\n      <div class=\"closed-caption-panel__current-font closed-caption-panel__base-cell\">\n      </div>\n      <div class=\"closed-caption-panel__font-list\">\n      </div>\n      <div class=\"closed-caption-panel__current-color-icon closed-caption-panel__base-cell\">\n        <div class=\"closed-caption-panel__cell-up-left-hint\">C</div>\n      </div>\n      <div class=\"closed-caption-panel__color-selector\">\n      </div>\n      <div class=\"closed-caption-panel__current-effect-icon closed-caption-panel__base-cell closed-caption-panel__effect-cell\">\n        A\n        <div class=\"closed-caption-panel__cell-up-left-hint\">S</div>\n      </div>\n      <div class=\"closed-caption-panel__effect-selector\">\n      </div>\n      <div class=\"closed-caption-panel__current-background-color-icon closed-caption-panel__base-cell\">\n        <div class=\"closed-caption-panel__cell-up-left-hint\">B</div>\n      </div>\n      <div class=\"closed-caption-panel__current-transition-icon closed-caption-panel__base-cell\">\n        <div class=\"closed-caption-panel__cell-up-left-hint\">T</div>\n      </div>\n      <div class=\"closed-caption-panel__transition-selector\">\n        <div class=\"closed-caption-panel__transition-popout-cell closed-caption-panel__base-cell\" data-transition=\"popout\">\n        </div>\n        <div class=\"closed-caption-panel__transition-bubble-cell closed-caption-panel__base-cell\" data-transition=\"bubble\">\n        </div>\n      </div>\n      <div class=\"closed-caption-panel__size-selector\">\n        <div class=\"closed-caption-panel__size-option\" style=\"font-size: 12px;\" data-font-size=\"12\"><div>Aa</div></div>\n        <div class=\"closed-caption-panel__size-option\" style=\"font-size: 16px;\" data-font-size=\"16\"><div>Aa</div></div>\n        <div class=\"closed-caption-panel__size-option\" style=\"font-size: 20px;\" data-font-size=\"20\"><div>Aa</div></div>\n        <div class=\"closed-caption-panel__size-option\" style=\"font-size: 24px;\" data-font-size=\"24\"><div>Aa</div></div>\n        <div class=\"closed-caption-panel__size-option\" style=\"font-size: 28px;\" data-font-size=\"28\"><div>Aa</div></div>\n        <div class=\"closed-caption-panel__size-option\" style=\"font-size: 32px;\" data-font-size=\"32\"><div>Aa</div></div>\n        <div class=\"closed-caption-panel__size-option\" style=\"font-size: 36px;\" data-font-size=\"36\"><div>Aa</div></div>\n      </div>\n      <div class=\"closed-caption-panel__cancel-button\">x</div>\n      <div class=\"closed-caption-panel__done-button\">done</div>\n    </div>\n  </div>\n");
            this.initElements(t),
            _ca15.prototype.init.call(this, t),
            this.hide(),
            this.generateFontList(),
            this.updateCCStyle()
        }
        ;
        _proto94.generateFontList = function generateFontList() {
            var e = new Ko
              , t = fr.COMMON_FONTS.filter(function(t) {
                return e.detect(t)
            });
            this.props.setFontList(t)
        }
        ;
        _proto94.initColorSelectors = function initColorSelectors(e) {
            var t = e.find(".closed-caption-panel");
            t.append(ft()(Wo).addClass("closed-caption-panel__text-color-selector")),
            t.append(ft()(Wo).addClass("closed-caption-panel__background-color-selector"))
        }
        ;
        _proto94.initEffectSelector = function initEffectSelector(e) {
            var t = [Br, Ur, Fr, Vr, "none"];
            for (var _i46 = 0, _t53 = t; _i46 < _t53.length; _i46++) {
                var _i47 = _t53[_i46];
                e.append(ft()(Go(_i47, Wr(_i47))))
            }
        }
        ;
        _proto94.initElements = function initElements(e) {
            this.initColorSelectors(e),
            this.elems = {
                cancelButton: e.find(".closed-caption-panel__cancel-button"),
                doneButton: e.find(".closed-caption-panel__done-button"),
                styleButtons: e.find(".closed-caption-panel__style-option"),
                sizeButtons: e.find(".closed-caption-panel__size-option"),
                sizeSelector: e.find(".closed-caption-panel__size-selector"),
                currentTextColorIcon: e.find(".closed-caption-panel__current-color-icon"),
                currentBackgroundColorIcon: e.find(".closed-caption-panel__current-background-color-icon"),
                currentEffectIcon: e.find(".closed-caption-panel__current-effect-icon"),
                currentTransitionIcon: e.find(".closed-caption-panel__current-transition-icon"),
                currentFont: e.find(".closed-caption-panel__current-font"),
                fontList: e.find(".closed-caption-panel__font-list"),
                textColorSelector: e.find(".closed-caption-panel__text-color-selector"),
                textOpaqueButtons: e.find(".closed-caption-panel__text-color-selector .closed-caption-panel__opaque-option"),
                backgroundColorSelector: e.find(".closed-caption-panel__background-color-selector"),
                backgroundOpaqueButtons: e.find(".closed-caption-panel__background-color-selector .closed-caption-panel__opaque-option"),
                effectSelector: e.find(".closed-caption-panel__effect-selector"),
                transitionSelector: e.find(".closed-caption-panel__transition-selector")
            },
            this.initEffectSelector(this.elems.effectSelector),
            this.elems.cancelButton.on("click", this.onCancelClick.bind(this)),
            this.elems.doneButton.on("click", this.onDoneClick.bind(this)),
            this.elems.styleButtons.on("click", this.onStyleSelected.bind(this)),
            this.elems.currentFont.on("click", this.onFontDropdown.bind(this)),
            this.elems.fontList.on("click", this.onFontSelected.bind(this)),
            this.elems.sizeButtons.on("click", this.onSizeSelected.bind(this)),
            this.elems.currentTextColorIcon.on("click", this.onTextColorDropdown.bind(this)),
            this.elems.currentBackgroundColorIcon.on("click", this.onBackgroundColorDropdown.bind(this)),
            this.elems.textColorSelector.on("click", this.onTextColorSelected.bind(this)),
            this.elems.backgroundColorSelector.on("click", this.onBackgroundColorSelected.bind(this)),
            this.elems.currentEffectIcon.on("click", this.onEffectDropdown.bind(this)),
            this.elems.effectSelector.on("click", this.onEffectSelected.bind(this)),
            this.elems.currentTransitionIcon.on("click", this.onTransitionDropdown.bind(this)),
            this.elems.transitionSelector.on("click", this.onTransitionSelected.bind(this))
        }
        ;
        _proto94.onCancelClick = function onCancelClick() {
            var _this$props12 = this.props
              , e = _this$props12.profileId
              , t = _this$props12.hideCaptionStylePanel
              , i = _this$props12.setCaptionStyle;
            t();
            var n = os.getCaptionStyle(e);
            n && i(n)
        }
        ;
        _proto94.onDoneClick = function onDoneClick() {
            this.props.hideCaptionStylePanel(),
            this.storeCurrentStyle()
        }
        ;
        _proto94.onStyleSelected = function onStyleSelected(e) {
            var t = ft()(e.target).attr("data-style")
              , i = fr.ALL_STYLES[t];
            i && this.props.setCaptionStyle(i)
        }
        ;
        _proto94.onFontSelected = function onFontSelected(e) {
            var t = ft()(e.target).attr("data-font");
            t && this.props.setFont(t),
            this.resetDropdown()
        }
        ;
        _proto94.onSizeSelected = function onSizeSelected(e) {
            var t = ft()(e.currentTarget).attr("data-font-size");
            t && this.props.setFontSize(t)
        }
        ;
        _proto94.onTextColorSelected = function onTextColorSelected(e) {
            var t = ft()(e.target)
              , i = t.attr("data-opaque");
            i && this.props.setCaptionTextOpaque(i);
            var n = t.attr("data-color");
            n && this.props.setCaptionTextColor(n)
        }
        ;
        _proto94.onBackgroundColorSelected = function onBackgroundColorSelected(e) {
            var t = ft()(e.target)
              , i = t.attr("data-opaque");
            i && this.props.setCaptionBackgroundOpaque(i);
            var n = t.attr("data-color");
            n && this.props.setCaptionBackgroundColor(n)
        }
        ;
        _proto94.onEffectSelected = function onEffectSelected(e) {
            var t = ft()(e.target).attr("data-effect");
            t && this.props.setCaptionEffect(t)
        }
        ;
        _proto94.onTransitionSelected = function onTransitionSelected(e) {
            var t = ft()(e.target).attr("data-transition");
            t && this.props.setCaptionTransitionMode(t)
        }
        ;
        _proto94.onFontDropdown = function onFontDropdown() {
            this.hideForDropdown(),
            this.elems.fontList.show()
        }
        ;
        _proto94.onTextColorDropdown = function onTextColorDropdown() {
            this.hideForDropdown(),
            this.elems.textColorSelector.show()
        }
        ;
        _proto94.onBackgroundColorDropdown = function onBackgroundColorDropdown() {
            this.hideForDropdown(),
            this.elems.backgroundColorSelector.show()
        }
        ;
        _proto94.onEffectDropdown = function onEffectDropdown() {
            this.hideForDropdown(),
            this.elems.effectSelector.show()
        }
        ;
        _proto94.onTransitionDropdown = function onTransitionDropdown() {
            this.hideForDropdown(),
            this.elems.transitionSelector.show()
        }
        ;
        _proto94.hideForDropdown = function hideForDropdown() {
            this.elems.fontList.hide(),
            this.elems.sizeSelector.hide(),
            this.elems.textColorSelector.hide(),
            this.elems.backgroundColorSelector.hide(),
            this.elems.effectSelector.hide(),
            this.elems.transitionSelector.hide()
        }
        ;
        _proto94.updateCCStyle = function updateCCStyle() {
            var _this$props13 = this.props
              , e = _this$props13.captionCssObject
              , t = _this$props13.style
              , i = _this$props13.fontSize
              , n = _this$props13.textColor
              , r = _this$props13.backgroundColor
              , s = _this$props13.textOpaque
              , a = _this$props13.backgroundOpaque
              , o = _this$props13.transitionMode;
            this.elems.styleButtons.removeClass("checked"),
            this.elems.styleButtons.filter(t + "-style").addClass("checked"),
            this.elems.sizeButtons.removeClass("checked"),
            this.elems.sizeButtons.filter("[data-font-size=\"" + i + "\"]").addClass("checked"),
            this.elems.currentTextColorIcon.css("background-color", n),
            this.elems.currentBackgroundColorIcon.css("background-color", r),
            this.elems.currentEffectIcon.css("text-shadow", e["text-shadow"]),
            this.elems.currentFont.css("font-family", e["font-family"]),
            this.elems.currentFont.html(e["font-family"]),
            this.elems.textOpaqueButtons.removeClass("checked"),
            this.elems.textOpaqueButtons.filter("[data-opaque=\"" + s + "\"]").addClass("checked"),
            this.elems.backgroundOpaqueButtons.removeClass("checked"),
            this.elems.backgroundOpaqueButtons.filter("[data-opaque=\"" + a + "\"]").addClass("checked"),
            "popout" === o ? (this.elems.currentTransitionIcon.removeClass("closed-caption-panel__transition-bubble-cell"),
            this.elems.currentTransitionIcon.addClass("closed-caption-panel__transition-popout-cell")) : (this.elems.currentTransitionIcon.addClass("closed-caption-panel__transition-bubble-cell"),
            this.elems.currentTransitionIcon.removeClass("closed-caption-panel__transition-popout-cell")),
            this.fillFontList()
        }
        ;
        _proto94.fillFontList = function fillFontList() {
            this.elems.fontList.empty();
            for (var _iterator9 = _createForOfIteratorHelperLoose(this.props.fontList), _step9; !(_step9 = _iterator9()).done; ) {
                var _e82 = _step9.value;
                this.elems.fontList.append(jo(_e82))
            }
        }
        ;
        _proto94.resetDropdown = function resetDropdown() {
            this.hideForDropdown(),
            this.elems.sizeSelector.show()
        }
        ;
        _proto94.updateCastCaptionStyle = function updateCastCaptionStyle() {
            this.props.isCasting && $r.setCaptionStyle(this.props.castCaptionCssObjectSelector)
        }
        ;
        _proto94.show = function show() {
            var _this$props14 = this.props
              , e = _this$props14.isCasting
              , t = _this$props14.profileId;
            _ca15.prototype.show.call(this),
            this.resetDropdown(),
            e ? $r.pause() : Zn.pause(),
            os.getCaptionStyle(t) || this.storeCurrentStyle()
        }
        ;
        _proto94.storeCurrentStyle = function storeCurrentStyle() {
            var _this$props15 = this.props
              , e = _this$props15.storableCaptionProperties
              , t = _this$props15.profileId;
            os.storeCaptionStyle(e, t)
        }
        ;
        _proto94.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var _this$props16 = this.props
              , t = _this$props16.isVisible
              , i = _this$props16.viewMode
              , n = _this$props16.transitionMode
              , r = _this$props16.captionCssObject
              , s = _this$props16.castCaptionStyles;
            e.isVisible && !t ? (this.hide(),
            this.props.isCasting ? $r.play() : Zn.play()) : !e.isVisible && t && this.show(),
            e.viewMode !== i && ni.scalePoint < ti.ScalePoint.S768 && this.props.hideCaptionStylePanel(),
            Ha()(e.captionCssObject, r) && e.transitionMode === n || this.updateCCStyle(),
            Ha()(e.castCaptionCssObjectSelector, s) || this.updateCastCaptionStyle()
        }
        ;
        return _class47
    }(ca)));
    var qo = Tr(function(e) {
        var t = e.playerState
          , i = e.visibility
          , n = e.captions
          , r = e.captionStyle;
        return {
            mediaType: t.mediaType,
            isCaptionOn: n.isOn,
            isCaptionDefaultOn: n.isDefaultOn,
            captionText: n.currentCaptionText,
            captionType: n.captionType,
            currentLanguage: n.currentLanguage,
            isControlBarVisible: i.controlBar,
            transitionMode: r.transitionMode,
            captionCssObject: Gr(e)
        }
    }, {
        setCurrentCaptionText: d.setCurrentCaptionText,
        setAllLanguages: d.setAllLanguages,
        turnOnCaption: d.turnOnCaption
    })(new (function(_ca16) {
        _inheritsLoose(_class48, _ca16);
        function _class48() {
            return _ca16.call(this) || this
        }
        var _proto95 = _class48.prototype;
        _proto95.init = function init() {
            var _this164 = this;
            var t = ft()("  \n  <div class=\"closed-caption-container\">\n    <div class=\"closed-caption-inband\"></div>\n    <div class=\"closed-caption-outband\"></div>\n  </div>\n");
            this.initElements(t),
            Zn.addEventListener(xi.TIME_UPDATE, this.onTimeUpdate.bind(this)),
            Zn.addEventListener(xi.WILL_LOAD_START, this.onWillLoadStart.bind(this)),
            Zn.addEventListener(xi.STOP, function() {
                _this164.props.setCurrentCaptionText("")
            }),
            Zn.addEventListener(xi.LOAD_START, this.onLoadStart.bind(this)),
            _ca16.prototype.init.call(this, t)
        }
        ;
        _proto95.initElements = function initElements(e) {
            this.elems = {
                inband: e.find(".closed-caption-inband"),
                outband: e.find(".closed-caption-outband")
            },
            this.elems.inband.hide(),
            this.elems.outband.hide()
        }
        ;
        _proto95.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var _this$props17 = this.props
              , t = _this$props17.mediaType
              , i = _this$props17.isCaptionOn
              , n = _this$props17.captionType
              , r = _this$props17.captionText
              , s = _this$props17.captionCssObject;
            t !== e.mediaType && this.elem.toggle(t === Ft.CONTENT || t === Ft.BURN_IN_AD),
            "outband" === n && r !== e.captionText && this._renderOutbandCaptionContent(),
            i === e.isCaptionOn && n === e.captionType || this.toggleDisplayCaptions();
            var a = this.props.isControlBarVisible;
            e.isControlBarVisible !== a && (this.elems.inband.toggleClass("high", a),
            this.elems.outband.toggleClass("high", a),
            Zn.refreshCaption()),
            this.props.isCasting && !e.isCasting ? this.hide() : !this.props.isCasting && e.isCasting && this.show(),
            Ha()(s, e.captionCssObject) || (Zn.setCaptionStyle(s),
            this.elem.find(".caption-text-box").css(s))
        }
        ;
        _proto95.toggleDisplayCaptions = function toggleDisplayCaptions() {
            var _this$props18 = this.props
              , e = _this$props18.isCaptionOn
              , t = _this$props18.captionType;
            this.elems.inband.toggle(e && "inband" === t),
            this.elems.outband.toggle(e && "outband" === t)
        }
        ;
        _proto95._renderOutbandCaptionContent = function _renderOutbandCaptionContent() {
            var _this165 = this;
            var _this$props19 = this.props
              , e = _this$props19.captionCssObject
              , t = _this$props19.captionText
              , i = ft()("<div class=\"caption-text-box\" >" + t + "</div>");
            if (i.css(e),
            "" === t || this.props.transitionMode === fr.POPOUT)
                this.elems.outband.empty().append(i);
            else {
                var _e83 = this.elems.outband.children().last();
                this.elems.outband.append("<br/>", i),
                i.css({
                    visibility: "hidden",
                    "margin-bottom": -i.height()
                }),
                i.animate({
                    "margin-bottom": 0
                }, 100, function() {
                    _e83.fadeOut(500, function() {
                        _this165.elems.outband.children().slice(0, -1).remove()
                    }),
                    i.css("visibility", "visible")
                })
            }
        }
        ;
        _proto95.onTimeUpdate = function onTimeUpdate() {
            this.props.setCurrentCaptionText(Zn.captionManager.getCurrentOutboundCaption(this.props.currentLanguage))
        }
        ;
        _proto95.onWillLoadStart = function onWillLoadStart() {
            var _Zn$captionManager = Zn.captionManager
              , e = _Zn$captionManager.allLanguages
              , t = _Zn$captionManager.isTranscriptsDefaultOn
              , _this$props20 = this.props
              , i = _this$props20.isCaptionDefaultOn
              , n = _this$props20.captionType
              , r = _this$props20.setAllLanguages
              , s = _this$props20.turnOnCaption;
            r(e);
            var a = !1;
            a = "outband" === n && t || i,
            a && s({
                isUserInitiated: !1
            })
        }
        ;
        _proto95.onLoadStart = function onLoadStart() {
            Zn.setCaptionStyle(this.props.captionCssObject)
        }
        ;
        _createClass(_class48, [{
            key: "inband",
            get: function get() {
                return this.elems.inband.get(0)
            }
        }, {
            key: "outband",
            get: function get() {
                return this.elems.outband.get(0)
            }
        }]);
        return _class48
    }(ca)));
    var Yo = "\n<div class='ad-top-bar-container'>\n  <div class='ad-top-bar'>\n    <div class='ad-countdown'>\n      <div class='countdown-rotor-container'>\n        <div class='num-down-counter-in-rotor'></div>\n      </div>\n      <div class='ad-label-container'>\n        <div class='ad-label ad-top-bar-text'>Advertisement</div>\n        <div class='ad-top-bar-text visit-ad'>Visit advertiser's site</div>\n      </div>\n    </div>\n    <div class='ad-top-bar-right-section'>\n      <div class='ad-choices'>\n        <div class='ad-choices-text ad-top-bar-text'>AD CHOICES</div>\n        <div class='ad-choices-logo player-svgicon'>" + ha("ad-choices") + "</div>\n      </div>\n      <div class='separate-dot ad-top-bar-text'>\u2022</div>\n      <div class='return-video'>\n        <div class='return-text ad-top-bar-text'>RETURN TO VIDEO</div>\n        <div class='return-button player-svgicon'>" + ha("close_button") + "</div>\n      </div>\n    </div>\n  </div>\n</div>\n";
    var Qo = Tr(function(_ref49) {
        var e = _ref49.playerState
          , t = _ref49.appState
          , i = _ref49.resolution;
        return {
            isCasting: t.isCasting,
            viewMode: t.viewMode,
            scalePoint: i.scalePoint,
            mediaType: e.mediaType,
            isBackToBrowseButtonVisible: e.paused || "active" === t.pointerMonitorState
        }
    })(new (function(_ca17) {
        _inheritsLoose(_class49, _ca17);
        function _class49() {
            return _ca17.call(this) || this
        }
        var _proto96 = _class49.prototype;
        _proto96.init = function init() {
            var e = ft()(Yo);
            this.initElements(e),
            _ca17.prototype.init.call(this, e),
            this.hide(),
            this.onScalePointChange(),
            Zn.addEventListener(xi.AD_BREAK_START, this.onAdBreakStart.bind(this)),
            Zn.addEventListener(xi.AD_PROGRESS_UPDATE, this.onAdProgressUpdate.bind(this)),
            Zn.adsManager.addEventListener("skippablechange", this.onAdSkippableChange.bind(this))
        }
        ;
        _proto96.initElements = function initElements(e) {
            this.elems = {
                countdownRotorContainer: e.find(".countdown-rotor-container"),
                numberInCountdownRotor: e.find(".num-down-counter-in-rotor"),
                rightSection: e.find(".ad-top-bar-right-section"),
                adCountDown: e.find(".ad-countdown"),
                adLabel: e.find(".ad-label"),
                adChoices: e.find(".ad-choices"),
                visitAd: e.find(".visit-ad").hide(),
                adChoicesText: e.find(".ad-choices-text"),
                adChoicesLogo: e.find(".ad-choices-logo"),
                separateDot: e.find(".separate-dot"),
                returnVideo: e.find(".return-video"),
                returnText: e.find(".return-text"),
                returnButton: e.find(".return-button")
            },
            this._countdownRotor = new oo({
                radius: 28,
                thickness: 2,
                backgroundColor: "rgba(0, 0, 0, 0)",
                color: "#fff"
            }),
            this._countdownRotor.percentage = 0,
            this.elems.countdownRotorContainer.append(this._countdownRotor.elem),
            this.elems.adChoices.on("click", this.onAdChoicesClick.bind(this)),
            this.elems.visitAd.on("click", this.onVisitAdClick.bind(this)),
            this.elems.returnVideo.on("click", this.onReturnVideoClick.bind(this))
        }
        ;
        _proto96.initComponentsForInsertedAd = function initComponentsForInsertedAd() {
            this._shouldHideAdTopBar() ? this.hide() : this.show(),
            this.elems.adLabel.toggle(!this._shouldHideUIElement()),
            this.elems.adChoices.toggle(this.hasAdChoices()),
            this.elems.visitAd.toggle(this.hasVisitAd()),
            this.elems.separateDot.hide(),
            this.elems.returnVideo.hide()
        }
        ;
        _proto96.initComponentsForBurnedInAd = function initComponentsForBurnedInAd() {
            this.elems.adChoices.hide(),
            this.elems.separateDot.hide(),
            this.elems.returnVideo.hide(),
            this.elems.visitAd.hide(),
            this.elems.adLabel.text("Advertisement"),
            this.elems.adLabel.show(),
            this.show()
        }
        ;
        _proto96.onScalePointChange = function onScalePointChange() {
            var e = this.props.scalePoint;
            var t = 24
              , i = 1;
            e >= ti.ScalePoint.S768 && (i = 2,
            t = 32),
            e >= ti.ScalePoint.S1024 && (t = 40),
            e >= ti.ScalePoint.S1440 && (t = 44),
            this._countdownRotor.radius = t,
            this._countdownRotor.thickness = i,
            this._countdownRotor.redraw()
        }
        ;
        _proto96.onAdProgressUpdate = function onAdProgressUpdate() {
            var e = this.props.mediaType;
            if (e !== Ft.BURNED_IN_AD) {
                var _Zn$adsManager$getCou = Zn.adsManager.getCountdownState()
                  , _e84 = _Zn$adsManager$getCou.totalSeconds
                  , _t54 = _Zn$adsManager$getCou.remainSeconds;
                this.updateDownCounter({
                    totalSeconds: _e84,
                    remainSeconds: _t54
                })
            } else
                this._updateBurnedInAdsCountdown()
        }
        ;
        _proto96._updateBurnedInAdsCountdown = function _updateBurnedInAdsCountdown() {
            var e = Zn.adsManager.getFirstAdBreakByTime(Zn.currentTime);
            if (!e || e && e.incomplete)
                this.hideCountdown();
            else {
                var _t55 = e.end - e.start
                  , _i48 = e.end - Zn.currentTime;
                this.updateDownCounter({
                    remainSeconds: _i48,
                    totalSeconds: _t55
                })
            }
        }
        ;
        _proto96.onAdSkippableChange = function onAdSkippableChange(e) {
            e ? this.showReturnVideo() : this.hideReturnVideo()
        }
        ;
        _proto96.showCountdown = function showCountdown() {
            this.elems.countdownRotorContainer.show(),
            this._countdownRotor.show(),
            this.elems.numberInCountdownRotor.show()
        }
        ;
        _proto96.hideCountdown = function hideCountdown() {
            this.elems.countdownRotorContainer.hide(),
            this._countdownRotor.hide(),
            this.elems.numberInCountdownRotor.hide()
        }
        ;
        _proto96.updateDownCounter = function updateDownCounter(_ref50) {
            var e = _ref50.totalSeconds
              , t = _ref50.remainSeconds;
            e <= 0 || t <= 0 ? this.hideCountdown() : (this._countdownRotor.percentage = (e - t) / e,
            this.elems.numberInCountdownRotor.text(Math.floor(t)),
            this.showCountdown())
        }
        ;
        _proto96.hasAdChoices = function hasAdChoices() {
            var e = Zn.adsManager.getAdUnit();
            if (!e || !e.linear)
                return !1;
            if (Zn.adsManager.isAdUnitBrandedSlate())
                return !1;
            var t = e.linear.metadata;
            return !!t[dt.METADATA_KEYS.AD_CHOICES_VENDOR] && !!t[dt.METADATA_KEYS.AD_CHOICES_CLICK_THRU]
        }
        ;
        _proto96.hasVisitAd = function hasVisitAd() {
            var e = Zn.adsManager.getAdUnit();
            return !!e && !e.isAdBlocker && !Zn.adsManager.isAdUnitUiModeHidden() && !Zn.adsManager.isAdUnitBrandedSlate() && !!this.getVisitAdLink() && !(this.props.scalePoint <= ti.ScalePoint.S768)
        }
        ;
        _proto96.getVisitAdLink = function getVisitAdLink() {
            var e = Zn.adsManager.getAdUnit()
              , t = e.companionAds[dt.REGIONS.SELECTOR_VIDEO];
            return t ? t.clickThrough : e.linear ? e.linear.clickThrough : null
        }
        ;
        _proto96.getAdChoicesLink = function getAdChoicesLink() {
            var e = Zn.adsManager.getAdUnit().linear.metadata
              , t = e[dt.METADATA_KEYS.AD_CHOICES_VENDOR]
              , i = e[dt.METADATA_KEYS.AD_CHOICES_CLICK_THRU]
              , n = {
                ad_choices_vendor: t,
                ad_choices_click_thru: i,
                ad_choices_cs: Fe.hexMD5(dt.METADATA_KEYS.AD_CHOICES_SALT + t + i)
            };
            return W.SITE_HOST_URL + "/ad_choices?" + ft.a.param(n)
        }
        ;
        _proto96.onAdChoicesClick = function onAdChoicesClick() {
            $e.open(this.getAdChoicesLink())
        }
        ;
        _proto96.onVisitAdClick = function onVisitAdClick() {
            $e.open(this.getVisitAdLink()),
            Zn.clickThroughVPAID("adtopbar")
        }
        ;
        _proto96.showReturnVideo = function showReturnVideo() {
            this.elems.returnVideo.show(),
            this.hasAdChoices() && this.elems.separateDot.show()
        }
        ;
        _proto96.hideReturnVideo = function hideReturnVideo() {
            this.elems.returnVideo.hide(),
            this.elems.separateDot.hide()
        }
        ;
        _proto96.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var _this$props21 = this.props
              , t = _this$props21.viewMode
              , i = _this$props21.mediaType
              , n = _this$props21.scalePoint;
            t === Ut.ViewModeTypes.MINIMIZED && e !== Ut.ViewModeTypes.MINIMIZED ? (this.elems.rightSection.hide(),
            this.elems.adCountDown.addClass("minimized-mode")) : t !== Ut.ViewModeTypes.MINIMIZED && e === Ut.ViewModeTypes.MINIMIZED && (this.elems.rightSection.show(),
            this.elems.adCountDown.removeClass("minimized-mode")),
            this.isActive() || this.hide(),
            n !== e.scalePoint && this.onScalePointChange(),
            i !== e.mediaType && i !== Ft.BURNED_IN_AD && i !== Ft.INSERTED_AD && this.hide(),
            this.elems.rightSection.toggleClass("left-shift-mode", this.props.isBackToBrowseButtonVisible)
        }
        ;
        _proto96.onAdBreakStart = function onAdBreakStart() {
            var _Zn$adsManager$getCou2 = Zn.adsManager.getCountdownState()
              , e = _Zn$adsManager$getCou2.remainCount
              , t = _Zn$adsManager$getCou2.totalCount
              , i = t > 1 ? "Advertisement " + (t - e) + " of " + t : "Advertisement";
            this.elems.adLabel.text(i);
            var n = this.props.mediaType;
            n == Ft.BURNED_IN_AD ? this.initComponentsForBurnedInAd() : n === Ft.INSERTED_AD && this.initComponentsForInsertedAd()
        }
        ;
        _proto96.onReturnVideoClick = function onReturnVideoClick() {
            Zn.stopVPAID()
        }
        ;
        _proto96.isActive = function isActive() {
            return !this.props.isCasting
        }
        ;
        _proto96._shouldHideAdTopBar = function _shouldHideAdTopBar() {
            return !Zn.adsManager.getAdUnit() || Zn.adsManager.isAdUnitBrandedSlate()
        }
        ;
        _proto96._shouldHideUIElement = function _shouldHideUIElement() {
            return !Zn.adsManager.getAdUnit() || Zn.adsManager.isAdUnitUiModeHidden()
        }
        ;
        return _class49
    }(ca)));
    var $o = Tr(function(_ref51) {
        var e = _ref51.appState
          , t = _ref51.entity
          , i = _ref51.visibility;
        return {
            isMinimized: e.isMinimized,
            pointerMonitorState: e.pointerMonitorState,
            isEntityEmpty: t.isEmpty,
            isLongTimeTipsVisible: i.longTimeTips
        }
    }, {
        hideLongTimeTips: s.hideLongTimeTips,
        setViewModeToMinimized: n.setViewModeToMinimized,
        setUserInteractionTime: r.setUserInteractionTime
    })(new (function(_ca18) {
        _inheritsLoose(_class50, _ca18);
        function _class50() {
            return _ca18.call(this) || this
        }
        var _proto97 = _class50.prototype;
        _proto97.init = function init() {
            var _this166 = this;
            var t = ft()("  \n  <div class=\"long-time-tips-container\">\n    <div class=\"long-time-tips\">\n      <div class=\"long-time-tips__title\">Are you still watching?</div>\n      <div class=\"long-time-tips__message\">We'd hate for you to miss your show, so we wanted to see if you're still around.</div>\n      <div class=\"long-time-tips__continue-button-container\"></div>\n    </div>\n  </div>\n");
            this.initElements(t),
            _ca18.prototype.init.call(this, t),
            Zn.addEventListener(xi.START, this.onVideoStart.bind(this)),
            this.onViewContinue = this.onViewContinue.bind(this),
            this.onIdleTimeout = this.onIdleTimeout.bind(this),
            this.onMouseMonitor = this.onMouseMonitor.bind(this),
            window.addEventListener("unload", function() {
                return _this166.onUserStop()
            })
        }
        ;
        _proto97.initElements = function initElements(e) {
            var _this167 = this;
            this.elems = {
                buttonContainer: e.find(".long-time-tips__continue-button-container"),
                button: new io("YES",io.ColorClass.GREY).elem
            },
            this.elems.buttonContainer.append(this.elems.button),
            this.elems.button.on("click", function() {
                return _this167.onViewContinue()
            })
        }
        ;
        _proto97.onVideoStart = function onVideoStart() {
            Ui.userInteractionTime < 0 && "active" !== this.props.pointerMonitorState && (this.props.setUserInteractionTime(new Date),
            this._clearDialogIdleTimer()),
            this.hide(yn.LongTimeTipsCloseReason.CONTINUE)
        }
        ;
        _proto97.onViewContinue = function onViewContinue() {
            this._clearDialogIdleTimer(),
            Zn.continuousPlay({
                reason: Ot
            }),
            this.hide(yn.LongTimeTipsCloseReason.CONTINUE)
        }
        ;
        _proto97._clearDialogIdleTimer = function _clearDialogIdleTimer() {
            this._dialogIdleTimer >= 0 && (clearTimeout(this._dialogIdleTimer),
            this._dialogIdleTimer = -1)
        }
        ;
        _proto97.onUserStop = function onUserStop() {
            this.hide(yn.LongTimeTipsCloseReason.STOP)
        }
        ;
        _proto97.onIdleTimeout = function onIdleTimeout() {
            var _this168 = this;
            this.show(),
            this._dialogIdleTimer = setTimeout(function() {
                Rr.userInactivity = !0,
                Zn.stopVideo({
                    reason: yn.PlaybackEndedReason.INACTIVE
                }),
                ir.backToBrowse({
                    type: "pip"
                }),
                _this168.props.setViewModeToMinimized(),
                _this168.hide(yn.LongTimeTipsCloseReason.TIMEOUT)
            }, 3e4)
        }
        ;
        _proto97.onViewPropsUpdated = function onViewPropsUpdated(e) {
            e.pointerMonitorState !== this.props.pointerMonitorState && this.onMouseMonitor(),
            e.viewMode === this.props.viewMode || this.isActive() || this.hide(yn.LongTimeTipsCloseReason.STOP),
            !e.isLongTimeTipsVisible && this.props.isLongTimeTipsVisible && this.onIdleTimeout()
        }
        ;
        _proto97.onMouseMonitor = function onMouseMonitor() {
            "active" === this.props.pointerMonitorState ? this.props.setUserInteractionTime(-1) : this.props.isEntityEmpty ? this._clearDialogIdleTimer() : this.props.setUserInteractionTime(new Date)
        }
        ;
        _proto97.show = function show() {
            this.isActive() && this.elem.addClass("long-time-tips-container--show"),
            this.visible || this._trackStillWatchingOpened()
        }
        ;
        _proto97.hide = function hide(e) {
            this.props.hideLongTimeTips(),
            this.visible && this._trackStillWatchingClosed(e),
            this.elem.removeClass("long-time-tips-container--show")
        }
        ;
        _proto97.isActive = function isActive() {
            return !this.props.isMinimized && !W.IS_NONSUB
        }
        ;
        _proto97._trackStillWatchingOpened = function _trackStillWatchingOpened() {
            Dr.Events.stillWatchingOpened.startTime = Date.now(),
            Dr.track(Dr.Events.stillWatchingOpened, {
                effective_timeout: Date.now() - Ui.userInteractionTime
            })
        }
        ;
        _proto97._trackStillWatchingClosed = function _trackStillWatchingClosed(e) {
            var t = Date.now()
              , i = Dr.Events.stillWatchingOpened.startTime;
            i > 0 && t > i && (Dr.track(Dr.Events.stillWatchingClosed, {
                open_duration: t - i,
                close_reason: e
            }),
            Dr.Events.stillWatchingClosed.reset())
        }
        ;
        return _class50
    }(ca)));
    i(218);
    var Xo = ra.a.createContext(null)
      , Jo = function(e) {
        var t, i;
        function n(t, i) {
            var n = e.call(this, t, i) || this;
            var r, s = i && !i.isMounting ? t.enter : t.appear;
            return n.appearStatus = null,
            t.in ? s ? (r = "exited",
            n.appearStatus = "entering") : r = "entered" : r = t.unmountOnExit || t.mountOnEnter ? "unmounted" : "exited",
            n.state = {
                status: r
            },
            n.nextCallback = null,
            n
        }
        i = e,
        (t = n).prototype = Object.create(i.prototype),
        t.prototype.constructor = t,
        t.__proto__ = i,
        n.getDerivedStateFromProps = function(e, t) {
            return e.in && "unmounted" === t.status ? {
                status: "exited"
            } : null
        }
        ;
        var r = n.prototype;
        return r.componentDidMount = function() {
            this.updateStatus(!0, this.appearStatus)
        }
        ,
        r.componentDidUpdate = function(e) {
            var t = null;
            if (e !== this.props) {
                var i = this.state.status;
                this.props.in ? "entering" !== i && "entered" !== i && (t = "entering") : "entering" !== i && "entered" !== i || (t = "exiting")
            }
            this.updateStatus(!1, t)
        }
        ,
        r.componentWillUnmount = function() {
            this.cancelNextCallback()
        }
        ,
        r.getTimeouts = function() {
            var e, t, i, n = this.props.timeout;
            return e = t = i = n,
            null != n && "number" != typeof n && (e = n.exit,
            t = n.enter,
            i = void 0 !== n.appear ? n.appear : t),
            {
                exit: e,
                enter: t,
                appear: i
            }
        }
        ,
        r.updateStatus = function(e, t) {
            if (void 0 === e && (e = !1),
            null !== t) {
                this.cancelNextCallback();
                var i = aa.a.findDOMNode(this);
                "entering" === t ? this.performEnter(i, e) : this.performExit(i)
            } else
                this.props.unmountOnExit && "exited" === this.state.status && this.setState({
                    status: "unmounted"
                })
        }
        ,
        r.performEnter = function(e, t) {
            var i = this
              , n = this.props.enter
              , r = this.context ? this.context.isMounting : t
              , s = this.getTimeouts()
              , a = r ? s.appear : s.enter;
            t || n ? (this.props.onEnter(e, r),
            this.safeSetState({
                status: "entering"
            }, function() {
                i.props.onEntering(e, r),
                i.onTransitionEnd(e, a, function() {
                    i.safeSetState({
                        status: "entered"
                    }, function() {
                        i.props.onEntered(e, r)
                    })
                })
            })) : this.safeSetState({
                status: "entered"
            }, function() {
                i.props.onEntered(e)
            })
        }
        ,
        r.performExit = function(e) {
            var t = this
              , i = this.props.exit
              , n = this.getTimeouts();
            i ? (this.props.onExit(e),
            this.safeSetState({
                status: "exiting"
            }, function() {
                t.props.onExiting(e),
                t.onTransitionEnd(e, n.exit, function() {
                    t.safeSetState({
                        status: "exited"
                    }, function() {
                        t.props.onExited(e)
                    })
                })
            })) : this.safeSetState({
                status: "exited"
            }, function() {
                t.props.onExited(e)
            })
        }
        ,
        r.cancelNextCallback = function() {
            null !== this.nextCallback && (this.nextCallback.cancel(),
            this.nextCallback = null)
        }
        ,
        r.safeSetState = function(e, t) {
            t = this.setNextCallback(t),
            this.setState(e, t)
        }
        ,
        r.setNextCallback = function(e) {
            var t = this
              , i = !0;
            return this.nextCallback = function(n) {
                i && (i = !1,
                t.nextCallback = null,
                e(n))
            }
            ,
            this.nextCallback.cancel = function() {
                i = !1
            }
            ,
            this.nextCallback
        }
        ,
        r.onTransitionEnd = function(e, t, i) {
            this.setNextCallback(i);
            var n = null == t && !this.props.addEndListener;
            e && !n ? (this.props.addEndListener && this.props.addEndListener(e, this.nextCallback),
            null != t && setTimeout(this.nextCallback, t)) : setTimeout(this.nextCallback, 0)
        }
        ,
        r.render = function() {
            var e = this.state.status;
            if ("unmounted" === e)
                return null;
            var t = this.props
              , i = t.children
              , n = function(e, t) {
                if (null == e)
                    return {};
                var i, n, r = {}, s = Object.keys(e);
                for (n = 0; n < s.length; n++) {
                    i = s[n],
                    t.indexOf(i) >= 0 || (r[i] = e[i])
                }
                return r
            }(t, ["children"]);
            if (delete n.in,
            delete n.mountOnEnter,
            delete n.unmountOnExit,
            delete n.appear,
            delete n.enter,
            delete n.exit,
            delete n.timeout,
            delete n.addEndListener,
            delete n.onEnter,
            delete n.onEntering,
            delete n.onEntered,
            delete n.onExit,
            delete n.onExiting,
            delete n.onExited,
            "function" == typeof i)
                return ra.a.createElement(Xo.Provider, {
                    value: null
                }, i(e, n));
            var r = ra.a.Children.only(i);
            return ra.a.createElement(Xo.Provider, {
                value: null
            }, ra.a.cloneElement(r, n))
        }
        ,
        n
    }(ra.a.Component);
    function Zo() {}
    Jo.contextType = Xo,
    Jo.propTypes = {},
    Jo.defaultProps = {
        in: !1,
        mountOnEnter: !1,
        unmountOnExit: !1,
        appear: !1,
        enter: !0,
        exit: !0,
        onEnter: Zo,
        onEntering: Zo,
        onEntered: Zo,
        onExit: Zo,
        onExiting: Zo,
        onExited: Zo
    },
    Jo.UNMOUNTED = 0,
    Jo.EXITED = 1,
    Jo.ENTERING = 2,
    Jo.ENTERED = 3,
    Jo.EXITING = 4;
    var tl = new (function() {
        function _class51() {
            this._data = {},
            this.reset()
        }
        var _proto98 = _class51.prototype;
        _proto98.set = function set(e) {
            this._data = e
        }
        ;
        _proto98.reset = function reset() {
            var e = at.get() || {}
              , t = ei.playlist || {}
              , i = Rt.entity || {}
              , n = nr.siteCommonContext || nr.startContext || {}
              , r = Object.assign({
                a: parseInt($.computerGuid.substr(30), 16) % 2,
                annotation_enabled: !1,
                app_name: W.APP_NAME,
                app_version: W.APP_VERSION,
                auth: !0,
                beacon_endpoint: at.beaconHost + "/v3",
                bitrate: Kt.bitrate,
                bundle_id: i.bundle && i.bundle.id || "",
                bundle_type: i.bundle && i.bundle.bundleType || "",
                c1: n.primary_ref_click || "",
                c2: n.secondary_ref_click || "",
                cb: Q.getCacheBuster(),
                cdn: Kt.cdn,
                client: W.CLIENT,
                computerguid: $.computerGuid,
                content_id: $.eabId,
                cp_identifier: -1,
                deejay_device_id: W.DEEJAY_DEVICE_ID,
                device_fam: "hulu",
                device_id: W.DEVICE_ID,
                device_man: "hulu",
                device_model: W.OS,
                device_product: n.device_product || "Site Curiosity Player",
                duration: Math.floor(1e3 * Zn.duration),
                distro: W.DISTRO,
                distro_platform: W.DISTRO_PLATFORM,
                donut_treatment_name: -1,
                eab_id: $.eabId,
                embed: Fe.hexMD5($.pageUrl),
                fullscreen: ni.isFullscreen,
                view_mode: ni.externalViewMode,
                language: W.LANGUAGE,
                oem: window.navigator.platform,
                package_availability: e.package_availability || "",
                package_id: e.package_id,
                page_type: n.curr_page_type || "watch",
                page_url: $.pageUrl,
                pass_through_metric: e.pass_through_metric,
                pass_through_qos: e.pass_through_qos,
                profile_id: "" + pt.profileId,
                qos_endpoint: at.qosBeaconHost + "/playback",
                r1: n.primary_ref_page_type || "",
                r2: n.secondary_ref_page_type || "",
                region: W.REGION,
                sessionguid: $.sessionGuid,
                site_session_id: n.app_session_id || ln.getAppSessionInfo("session_id") || "",
                stormflow_id: t.stormflowId,
                stream_url: t.streamUrl,
                url: $.pageUrl,
                user_id: pt.userId,
                social_identities: pt.socialIdentities && pt.socialIdentities.length > 0 ? pt.socialIdentityIds.join(",") : "",
                visit: n.app_visit_count || ln.getAppSessionInfo("visit_count") || "",
                player_version: W.COMPILED_VERSION,
                os: W.OS,
                longitude: $.longitude,
                latitude: $.latitude
            }, this.playerCommonParams);
            this.set(r)
        }
        ;
        _proto98.get = function get() {
            return this._data
        }
        ;
        _createClass(_class51, [{
            key: "playerCommonParams",
            get: function get() {
                return {
                    cpSessionId: dn.commonProperty.cp_session_id,
                    contentPosition: dn.commonProperty.content_position,
                    cpseq: dn.commonProperty.cp_video_index,
                    cpCurrentReason: dn.cpCurrentReason
                }
            }
        }, {
            key: "props",
            get: function get() {
                return this.reset(),
                Object.assign({}, this.get())
            }
        }]);
        return _class51
    }());
    var nl = {
        Types: {
            AD_INTERACTION: "adinteraction",
            AD_TRACKING: "adtracking",
            CONTENT_INTERACTION: "contentinteraction",
            ERROR: "error",
            PLAYBACK: "playback",
            REVENUE: "revenue",
            SESSION: "session",
            ANT: "ant"
        },
        EventTypes: {
            CHAPTER_STARTED: "chapter_started",
            CHAPTER_ENDED: "chapter_ended",
            REBUFFER_STARTED: "rebuffer_started",
            REBUFFER_ENDED: "rebuffer_ended",
            AD_REBUFFER_STARTED: "ad_rebuffer_started",
            AD_REBUFFER_ENDED: "ad_rebuffer_ended",
            END: "end",
            PAUSE: "pause",
            PLAY: "play",
            POSITION: "position",
            SEEK: "seek",
            SPECIAL: "special",
            START: "start",
            STARTUP: "startup",
            POD_SKIPPED: "podskipped",
            REQUEST: "request",
            RESPONSE: "response",
            ATTR: "attr",
            COMSCORE_ERROR: "ComscoreError",
            CHANGE_VOLUME: "changevolume",
            MUTE: "mute",
            UNMUTE: "unmute",
            IDLE_CHECK: "idlecheck",
            SAMPLE: "sample",
            PLAYBACK: "playback",
            THIRDPARTY: "thirdparty",
            FLUSH_3RD_COUNT: "flush3rdcount"
        }
    };
    var rl = new (function(_m25) {
        _inheritsLoose(_class52, _m25);
        function _class52() {
            var _this169;
            _this169 = _m25.call(this) || this,
            _this169._data = {
                type: "",
                event: "",
                params: {}
            },
            _this169._siteSessionId = T.getItem("hulu$beacon:site_session_id"),
            _this169._seq = parseInt(T.getItem("hulu$beacon:seq")) || 0,
            _this169._cpSeq = 0;
            return _this169
        }
        var _proto99 = _class52.prototype;
        _proto99.getComputedCommonParams = function getComputedCommonParams() {
            this._resetSeqPerSession();
            var e = Object.assign({
                seq: ++this.seq
            }, tl.props);
            return T.setItem("hulu$beacon:seq", this.seq),
            e
        }
        ;
        _proto99._resetSeqPerSession = function _resetSeqPerSession() {
            var e = tl.props.site_session_id;
            this._siteSessionId !== e && (this.seq = 0,
            this._siteSessionId = e,
            T.setItem("hulu$beacon:site_session_id", e))
        }
        ;
        _proto99.getRevenueBeaconParams = function getRevenueBeaconParams(e, t) {
            var i = Mi.currentAdUnit
              , n = t || i.linear
              , r = {};
            n && (r = {
                creative_id: n.creativeId,
                placement_id: n.placementId,
                ba_id: n.baseAssetId
            });
            var s = Mi.currentPod;
            return Object.assign({}, i.playlist.auditParams, i.auditParams, n.auditParams, r, {
                adAudits: [],
                adtargeting_userinfo: i.playlist.adTargetingUserInfo || "",
                adtargeting_validation: i.playlist.adTargetingRawValues || "",
                advertiser_id: i.advertiserId,
                ad_feed_id: i.adFeedId,
                ad_start_volume: Kt.volume,
                ad_type: An.linearType,
                ad_unit_id: i.adUnitId,
                duration: Math.floor(1e3 * Kt.duration),
                flight_id: i.flightId,
                fullscreen: ni.isFullscreen,
                iag_ap: -1 == s ? "post" : s >= 2 ? "mid" : "pre",
                iag_apt: _i.isBrandedSlate(i.adUnitType) ? "bs" : "na",
                pod: this._getPodSlotValue(),
                rec_track: i.recommendationTracking
            }, e)
        }
        ;
        _proto99.getInteractionBeaconParams = function getInteractionBeaconParams(e) {
            var t = Mi.currentAdUnit;
            return Object.assign({}, {
                pod: Mi.currentSlot,
                creative_id: t.linear.creativeId,
                placement_id: t.linear.placementId,
                rec_track: t.recommendationTracking
            }, e)
        }
        ;
        _proto99.updateAdAudits = function updateAdAudits(e, t, i) {
            var _this170 = this;
            var n = null != t.metadata[dt.METADATA_KEYS.MULTI_BRAND];
            t && t.trackingEvents && t.trackingEvents[e] && t.trackingEvents[e].forEach(function(e) {
                if (!!e.multiBrand == n && "\"about:blank\"" != e.trackingUrl) {
                    var _n34 = _this170.getRevenueBeaconParams({
                        url: e.trackingUrl
                    }, t);
                    _this170.set({
                        type: nl.Types.AD_TRACKING,
                        event: nl.EventTypes.THIRDPARTY,
                        params: Object.assign(i, _n34)
                    })
                }
            })
        }
        ;
        _proto99.updateAdSelect = function updateAdSelect(e, t, i) {
            var _this171 = this;
            t && t.trackingEvents && t.trackingEvents[e] && t.trackingEvents[e].forEach(function(e) {
                _this171.set({
                    type: nl.Types.AD_TRACKING,
                    event: nl.EventTypes.THIRDPARTY,
                    params: Object.assign(i, _this171.getInteractionBeaconParams({
                        url: e.trackingUrl
                    }))
                })
            })
        }
        ;
        _proto99.updateTrailerSelect = function updateTrailerSelect(e, t) {
            var _this172 = this;
            t && t[e] && t[e].forEach(function(e) {
                _this172.set({
                    type: nl.Types.AD_TRACKING,
                    event: nl.EventTypes.THIRDPARTY,
                    params: {
                        url: e
                    }
                })
            })
        }
        ;
        _proto99.updateAdClickThru = function updateAdClickThru(e, t) {
            var _this173 = this;
            e && e.forEach(function(e) {
                _this173.set({
                    type: nl.Types.AD_TRACKING,
                    event: nl.EventTypes.THIRDPARTY,
                    params: _this173.getRevenueBeaconParams(_objectSpread({}, t, {
                        url: e
                    }))
                })
            })
        }
        ;
        _proto99.updateEventTracking = function updateEventTracking(e, t) {
            this.set({
                type: nl.Types.AD_TRACKING,
                event: nl.EventTypes.THIRDPARTY,
                params: Object.assign(this._getTrackingParams(), {
                    url: e
                }, t)
            })
        }
        ;
        _proto99._getTrackingParams = function _getTrackingParams() {
            var e = Mi.currentAdMetadata;
            return {
                ad_start_volume: Kt.volume,
                ad_type: e.unitType,
                ad_unit_id: e.unitId,
                duration: Math.floor(1e3 * Kt.duration),
                flight_id: e.flightId,
                fullscreen: "site" == W.PLAYER_TYPE ? ni.isFullscreen : ""
            }
        }
        ;
        _proto99._getPodSlotValue = function _getPodSlotValue() {
            return [Mi.currentPod, Mi.currentPlaylist.adUnits.length, String.fromCharCode("a".charCodeAt(0) + Mi.currentSlot)].join("_")
        }
        ;
        _createClass(_class52, [{
            key: "seq",
            get: function get() {
                return this._seq
            },
            set: function set(e) {
                this._seq = e
            }
        }]);
        return _class52
    }(m));
    var sl = {
        creativeid: "creative_id",
        placementid: "placement_id",
        adtype: "ad_type",
        adposition: "ad_position",
        adStartVolume: "ad_start_volume",
        variableattr: "variableAttr",
        recTrack: "rec_track",
        swappableoptions: "swappable_options",
        cpreason: "cpCurrentReason",
        cpsessionid: "cpSessionId",
        contentid: "content_id",
        cpidentifier: "cp_identifier",
        distroplatform: "distro_platform",
        deviceid: "device_id",
        embedurl: "embed",
        packageavailability: "package_availability",
        pageurl: "page_url",
        referrerurl: "referrer_url",
        sitesessionid: "site_session_id",
        socialidentities: "social_identities",
        timepadding: "time_padding",
        userid: "user_id",
        annotationenabled: "annotation_enabled",
        packageid: "package_id",
        pagetype: "page_type",
        planid: "plan_id",
        position: "contentPosition",
        player: "player_version",
        playermode: "view_mode",
        appversion: "app_version"
    };
    var al = new (function() {
        function _class53() {}
        var _proto100 = _class53.prototype;
        _proto100.init = function init() {
            var _this174 = this;
            rl.onUpdated(function(e) {
                return _this174.track(e.params)
            })
        }
        ;
        _proto100.isT2BeaconTemplate = function isT2BeaconTemplate(e) {
            return /^http(s)?:\/\/t2\.hulu(qa)?\.com/.test(e) || /^https?:\/\/t2hulu(qa)?com.*akamaihd/.test(e)
        }
        ;
        _proto100._track = function _track(e, t) {
            e && Q.pingImage(e, t)
        }
        ;
        _proto100.track = function track(e) {
            var t = e.url;
            var i = this.mergeParams(e, rl.getComputedCommonParams());
            var n = ir.getHitInfo();
            null != n && null != n.trackAdAuditBeacon ? n.trackAdAuditBeacon(t, i) : this.isT2BeaconTemplate(t) ? (t = this.formatUrl(t, i),
            this._track(t, !1)) : this._track(t, !0)
        }
        ;
        _proto100.mergeParams = function mergeParams() {
            for (var _len12 = arguments.length, e = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {
                e[_key12] = arguments[_key12]
            }
            var t = Object.assign.apply(Object, [{}].concat(e));
            return Object.entries(sl).forEach(function(e) {
                var i = e[0]
                  , n = e[1];
                t.hasOwnProperty(i) ? t[n] = t[i] : t.hasOwnProperty(n) && (t[i] = t[n])
            }),
            t
        }
        ;
        _proto100.getMacroVal = function getMacroVal(e, t) {
            if (t.hasOwnProperty(e)) {
                var _i49 = t[e];
                return null == _i49 ? "" : _i49
            }
            return ""
        }
        ;
        _proto100.formatUrl = function formatUrl(e, t) {
            var _this175 = this;
            var i = e.replace(/{}/g, function() {
                return ""
            });
            return i = i.replace(/{([a-zA-Z0-9\\._]+)}/g, function(e, i) {
                return encodeURIComponent(_this175.getMacroVal(i, t))
            }),
            i
        }
        ;
        return _class53
    }());
    var ol = function(e) {
        return e.slice(2).toLowerCase()
    };
    var ll = function(_ra$a$Component2) {
        _inheritsLoose(ll, _ra$a$Component2);
        function ll(e) {
            var _this176;
            _this176 = _ra$a$Component2.call(this, e) || this,
            _this176.events = {},
            _this176.eventBus = Sr,
            _this176.eventProxy = _this176.eventProxy.bind(_assertThisInitialized(_this176));
            return _this176
        }
        var _proto101 = ll.prototype;
        _proto101.componentDidMount = function componentDidMount() {
            this.updateHandlers({})
        }
        ;
        _proto101.componentDidUpdate = function componentDidUpdate(e) {
            this.updateHandlers(e)
        }
        ;
        _proto101.componentWillUnmount = function componentWillUnmount() {
            this.removeHandlers(),
            this.events = null,
            this.eventBus = null
        }
        ;
        _proto101.updateHandlers = function updateHandlers(e) {
            var _this177 = this;
            var t = Object.keys(e).concat(Object.keys(this.props));
            Array.from(new Set(t)).filter(function(e) {
                return "on" === e.slice(0, 2)
            }).forEach(function(t) {
                var i = "function" == typeof e[t]
                  , n = "function" == typeof _this177.props[t]
                  , r = ol(t);
                _this177.events[r] = _this177.props[t],
                i && !n ? _this177.eventBus.off(r, _this177.eventProxy) : n && !i && _this177.eventBus.on(r, _this177.eventProxy)
            })
        }
        ;
        _proto101.removeHandlers = function removeHandlers() {
            var _this178 = this;
            Object.keys(this.props).filter(function(e) {
                return "on" === e.slice(0, 2)
            }).forEach(function(e) {
                var t = ol(e);
                _this178.eventBus.off(t, _this178.eventProxy)
            })
        }
        ;
        _proto101.eventProxy = function eventProxy(e) {
            return this.events[e.type](e)
        }
        ;
        _proto101.render = function render() {
            return null
        }
        ;
        return ll
    }(ra.a.Component);
    var ul = i(46)
      , cl = i.n(ul);
    function hl() {
        return (hl = Object.assign || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var i = arguments[t];
                for (var n in i) {
                    Object.prototype.hasOwnProperty.call(i, n) && (e[n] = i[n])
                }
            }
            return e
        }
        ).apply(this, arguments)
    }
    var pl = function(_ra$a$Component3) {
        _inheritsLoose(pl, _ra$a$Component3);
        function pl(e) {
            var _this179;
            _this179 = _ra$a$Component3.call(this, e) || this,
            _this179.state = {
                isLoaded: !1
            },
            _this179._isMounted = !1;
            return _this179
        }
        var _proto102 = pl.prototype;
        _proto102.componentDidMount = function componentDidMount() {
            this.loadImage(),
            this._isMounted = !0
        }
        ;
        _proto102.componentWillUnmount = function componentWillUnmount() {
            this._isMounted = !1
        }
        ;
        _proto102.componentDidUpdate = function componentDidUpdate(e) {
            var t = this.props.src;
            e.src === t || this.isEmptySrc(t) || this.loadImage()
        }
        ;
        _proto102.loadImage = function loadImage() {
            var _this180 = this;
            var _this$props22 = this.props
              , e = _this$props22.onLoad
              , t = _this$props22.src;
            if ("//:0" === t)
                return;
            var i = new Image;
            i.onload = function() {
                _this180._isMounted && (_this180.setState({
                    isLoaded: !0
                }),
                e())
            }
            ,
            i.src = t
        }
        ;
        _proto102.isEmptySrc = function isEmptySrc(e) {
            return "//:0" === e
        }
        ;
        _proto102.render = function render() {
            var e = this.state.isLoaded
              , _this$props23 = this.props
              , t = _this$props23.src
              , i = _this$props23.size
              , n = _this$props23.position
              , r = _this$props23.style
              , s = _objectWithoutProperties(_this$props23, ["src", "size", "position", "style"]);
            return e && ra.a.createElement("div", hl({}, s, {
                style: _objectSpread({}, r, {
                    backgroundImage: "url(" + t + ")",
                    backgroundSize: i,
                    backgroundPosition: n,
                    backgroundRepeat: "no-repeat"
                })
            }))
        }
        ;
        return pl
    }(ra.a.Component);
    pl.defaultProps = {
        src: "//:0",
        size: "contain",
        position: "center",
        onLoad() {}
    };
    i(216);
    var fl = function(_ra$a$Component4) {
        _inheritsLoose(fl, _ra$a$Component4);
        function fl() {
            return _ra$a$Component4.apply(this, arguments) || this
        }
        var _proto103 = fl.prototype;
        _proto103.render = function render() {
            return ra.a.createElement(pl, {
                className: "PauseAdAsset",
                src: this.getSrc(),
                position: "bottom right 0px",
                onLoad: this.props.onLoad
            })
        }
        ;
        _proto103.getSrc = function getSrc() {
            var _this$props24 = this.props
              , e = _this$props24.path
              , t = _this$props24.width
              , i = _this$props24.height
              , n = _this$props24.format;
            return e + "&format=" + n + "&size=" + t + "x" + i
        }
        ;
        return fl
    }(ra.a.Component);
    fl.defaultProps = {
        onLoad() {},
        format: "png"
    };
    var ml = [[0, 0], [.0145772595, 8.62], [.055393586, 16.56], [.1180758017, 23.93], [.1982507289, 30.85], [.2915451895, 37.42], [.3935860058, 43.77], [.5, 50], [.6064139942, 56.23], [.7084548105, 62.58], [.8017492711, 69.15], [.8819241983, 76.07], [.944606414, 83.44], [.9854227405, 91.38], [1, 100]];
    function yl(_ref52) {
        var e = _ref52.color
          , t = _ref52.sideOrCorner
          , i = _ref52.style
          , n = _ref52.opacity;
        var r = e.r
          , s = e.g
          , a = e.b;
        return ra.a.createElement("div", {
            style: _objectSpread({
                position: "absolute",
                background: "linear-gradient(" + t + ",\n          " + ml.map(function(_ref53) {
                    var _ref54 = _slicedToArray(_ref53, 2)
                      , e = _ref54[0]
                      , t = _ref54[1];
                    return function(e, t, i, n) {
                        return "rgba(" + e + ", " + t + ", " + i + ", " + n + ")"
                    }(r, s, a, e) + " " + t + "%"
                }).join(",")
            }, i, {
                opacity: n
            })
        })
    }
    yl.defaultProps = {
        opacity: 1,
        sideOrCorner: "to bottom"
    };
    var vl = yl;
    function El() {
        return (El = Object.assign || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var i = arguments[t];
                for (var n in i) {
                    Object.prototype.hasOwnProperty.call(i, n) && (e[n] = i[n])
                }
            }
            return e
        }
        ).apply(this, arguments)
    }
    var bl = function(_ref55) {
        var e = _ref55.link
          , t = _ref55.text
          , i = _objectWithoutProperties(_ref55, ["link", "text"]);
        return ra.a.createElement("a", El({}, i, {
            target: "_blank",
            rel: "noopener noreferrer",
            href: e
        }), ra.a.createElement("span", null, t))
    };
    i(217);
    var Tl = {
        r: 0,
        g: 0,
        b: 0
    }
      , Sl = {
        left: "50%",
        right: 0,
        top: 0,
        bottom: 0
    };
    var Al = function(_ra$a$Component5) {
        _inheritsLoose(Al, _ra$a$Component5);
        function Al(e) {
            var _this181;
            _this181 = _ra$a$Component5.call(this, e) || this,
            _this181.state = {
                assetLoaded: !1
            };
            return _this181
        }
        var _proto104 = Al.prototype;
        _proto104.componentWillUnmount = function componentWillUnmount() {
            this.setAssetLoaded(!1)
        }
        ;
        _proto104.setAssetLoaded = function setAssetLoaded(e) {
            this.setState({
                assetLoaded: e
            })
        }
        ;
        _proto104.render = function render() {
            var _this182 = this;
            var _this$props25 = this.props
              , e = _this$props25.creative
              , t = _this$props25.fadeIn
              , i = _this$props25.onClickThrough
              , n = e.asset
              , r = e.clickthrough
              , s = this.state.assetLoaded;
            return ra.a.createElement("div", {
                className: cl()("PauseAdCreative", "PauseAdCreative-item--fade", {
                    "PauseAdCreative-item--fadeIn": t
                })
            }, ra.a.createElement(vl, {
                opacity: .8,
                color: Tl,
                sideOrCorner: "to right",
                style: Sl
            }), ra.a.createElement(vl, {
                opacity: .5,
                color: n.accent,
                sideOrCorner: "to right",
                style: Sl
            }), ra.a.createElement("div", {
                className: cl()("PauseAdCreative-wrap", "PauseAdCreative-item--fade", {
                    "PauseAdCreative-item--fadeIn": s
                })
            }, ra.a.createElement(fl, {
                path: n.path,
                width: n.width,
                height: n.height,
                onLoad: function onLoad() {
                    return _this182.setAssetLoaded(!0)
                }
            }), r && ra.a.createElement(bl, {
                link: r,
                onClick: i,
                text: "Visit Advertiser's site",
                className: "PauseAdCreative-disclaimer"
            })))
        }
        ;
        return Al
    }(ra.a.Component);
    var wl = function(_ra$a$Component6) {
        _inheritsLoose(wl, _ra$a$Component6);
        function wl(e) {
            var _this183;
            _this183 = _ra$a$Component6.call(this, e) || this,
            _this183.state = {
                isClicked: !1
            };
            return _this183
        }
        var _proto105 = wl.prototype;
        _proto105.componentDidMount = function componentDidMount() {
            this._showTime = Date.now(),
            this.trackRevenue(),
            this.trackStartHit()
        }
        ;
        _proto105.componentWillUnmount = function componentWillUnmount() {
            this.trackEndHit()
        }
        ;
        _proto105.trackStartHit = function trackStartHit() {
            Dr.track(Dr.Events.pauseAdImpressionStart, this.commonHitProps)
        }
        ;
        _proto105.trackEndHit = function trackEndHit() {
            var _this$props26 = this.props
              , e = _this$props26.creative
              , t = _this$props26.endReason
              , i = this.props.isClicked
              , n = Object.assign(this.commonHitProps, {
                duration: Date.now() - this._showTime,
                end_reason: t,
                was_ad_clickable: Boolean(e.clickthrough),
                was_ad_clicked: i
            });
            Dr.track(Dr.Events.pauseAdImpressionEnd, n)
        }
        ;
        _proto105.trackRevenue = function trackRevenue() {
            (this.audits.assetimpression || []).forEach(function(e) {
                return al.track({
                    url: e
                })
            })
        }
        ;
        _proto105.trackClickInteractions = function trackClickInteractions() {
            ((this.audits.adInteraction || {}).click || []).forEach(function(e) {
                return al.track({
                    url: e
                })
            }),
            this.setState({
                isClicked: !0
            })
        }
        ;
        _proto105.render = function render() {
            var _this184 = this;
            var _this$props27 = this.props
              , e = _this$props27.creative
              , t = _this$props27.fadeIn;
            return ra.a.createElement(Al, {
                fadeIn: t,
                creative: e,
                onClickThrough: function onClickThrough() {
                    return _this184.trackClickInteractions()
                }
            })
        }
        ;
        _createClass(wl, [{
            key: "commonHitProps",
            get: function get() {
                var e = this.props.creative;
                return {
                    pause_ad_id: e.id,
                    pause_ad_placement_id: e.placementId
                }
            }
        }, {
            key: "audits",
            get: function get() {
                var e = this.props.creative.audits;
                return e
            }
        }]);
        return wl
    }(ra.a.Component);
    wl.defaultProps = {
        endReason: "unknown"
    };
    var Cl = "user_action"
      , Rl = "unknown";
    var Dl = function(_ra$a$Component7) {
        _inheritsLoose(Dl, _ra$a$Component7);
        function Dl(e) {
            var _this185;
            _this185 = _ra$a$Component7.call(this, e) || this,
            _this185.state = {
                creativeIndex: 0,
                isCreativeAppeared: !1,
                endReason: Rl
            },
            _this185._pausedAdDisplayTime = 0,
            _this185.onUserCommand = _this185.onUserCommand.bind(_assertThisInitialized(_this185)),
            _this185.onWillLoadStart = _this185.onWillLoadStart.bind(_assertThisInitialized(_this185)),
            _this185.handleCreativeFadeOut = _this185.handleCreativeFadeOut.bind(_assertThisInitialized(_this185));
            return _this185
        }
        var _proto106 = Dl.prototype;
        _proto106.componentDidMount = function componentDidMount() {
            this.props.player.addEventListener(xi.WILL_LOAD_START, this.onWillLoadStart)
        }
        ;
        _proto106.componentWillUnmount = function componentWillUnmount() {
            this.props.player.removeEventListener(xi.WILL_LOAD_START, this.onWillLoadStart)
        }
        ;
        _proto106.componentDidUpdate = function componentDidUpdate(e) {
            if (!e.isPaused && this.props.isPaused && this.startConsumeCreative(),
            !this.shouldShowCreative && this.willAppearOrExisted) {
                var _e85 = this.props.visibleState
                  , _t56 = _e85.longTimeTips ? "idle_timeout" : Cl;
                this.cancelConsumeCreative(_t56)
            }
        }
        ;
        _proto106.onWillLoadStart = function onWillLoadStart() {
            this.setState({
                creativeIndex: 0,
                isCreativeAppeared: !1,
                endReason: Rl
            })
        }
        ;
        _proto106.onUserCommand = function onUserCommand() {
            this.cancelConsumeCreative(Cl)
        }
        ;
        _proto106.startConsumeCreative = function startConsumeCreative() {
            var _this186 = this;
            if (this.shouldShowCreative)
                return this.hasUnconsumedCreatives ? void (this._pausedAdDisplayTimer = setTimeout(function() {
                    _this186.props.root.classList.add("player-pause-ad--expanded"),
                    _this186.setState({
                        isCreativeAppeared: !0
                    }),
                    _this186._pausedAdDisplayTimer = null
                }, 4e3)) : (this._pausedAdDisplayTime = Date.now(),
                void (this.props.opportunityImpression || []).forEach(function(e) {
                    return al.track({
                        url: e
                    })
                }))
        }
        ;
        _proto106.cancelConsumeCreative = function cancelConsumeCreative(e) {
            this._pausedAdDisplayTimer ? (clearTimeout(this._pausedAdDisplayTimer),
            this._pausedAdDisplayTimer = null) : this.state.isCreativeAppeared && this.setState({
                endReason: e,
                isCreativeAppeared: !1
            })
        }
        ;
        _proto106.handleCreativeFadeOut = function handleCreativeFadeOut() {
            var e = this.state.creativeIndex + 1;
            this.setState({
                creativeIndex: e
            }),
            this._pausedAdDisplayTime = Date.now(),
            this.props.root.classList.remove("player-pause-ad--expanded")
        }
        ;
        _proto106.hasOverlay = function hasOverlay() {
            return !!this.props.isOverlayActive
        }
        ;
        _proto106.render = function render() {
            var _this$state = this.state
              , e = _this$state.isCreativeAppeared
              , t = _this$state.creativeIndex
              , i = _this$state.endReason
              , n = this.props.creatives[t];
            return this.hasUnconsumedCreatives && n ? ra.a.createElement(ra.a.Fragment, null, ra.a.createElement(Jo, {
                mountOnEnter: !0,
                unmountOnExit: !0,
                timeout: 500,
                in: e,
                onExited: this.handleCreativeFadeOut
            }, function(e) {
                return ra.a.createElement(wl, {
                    endReason: i,
                    creative: n,
                    fadeIn: "entered" === e
                })
            }), ra.a.createElement(ll, {
                onUserCommand: this.onUserCommand
            })) : null
        }
        ;
        _createClass(Dl, [{
            key: "willAppearOrExisted",
            get: function get() {
                return this._pausedAdDisplayTimer || this.state.isCreativeAppeared
            }
        }, {
            key: "hasUnconsumedCreatives",
            get: function get() {
                return this.props.creatives.length > this.state.creativeIndex
            }
        }, {
            key: "isMiniTimeSpanPassed",
            get: function get() {
                var e = this.props.pauseAdsMiniSpan;
                return Date.now() - this._pausedAdDisplayTime >= e
            }
        }, {
            key: "shouldShowCreative",
            get: function get() {
                var _this$props28 = this.props
                  , e = _this$props28.isVodContent
                  , t = _this$props28.isPaused
                  , i = _this$props28.scalePoint
                  , n = _this$props28.player;
                return n.contentProperty.getTotalPlayedTime() > 0 && this.isMiniTimeSpanPassed && e && t && i >= 768 && !this.hasOverlay()
            }
        }]);
        return Dl
    }(ra.a.Component);
    function Ml() {
        return (Ml = Object.assign || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var i = arguments[t];
                for (var n in i) {
                    Object.prototype.hasOwnProperty.call(i, n) && (e[n] = i[n])
                }
            }
            return e
        }
        ).apply(this, arguments)
    }
    var Ol = function(_ra$a$Component8) {
        _inheritsLoose(Ol, _ra$a$Component8);
        function Ol(e) {
            var _this187;
            _this187 = _ra$a$Component8.call(this, e) || this,
            _this187.forceRerender = function() {
                return _this187.forceUpdate()
            }
            ,
            _this187.ref = ra.a.createRef();
            return _this187
        }
        var _proto107 = Ol.prototype;
        _proto107.componentDidMount = function componentDidMount() {
            this.props.player.addEventListener(xi.WILL_LOAD_START, this.forceRerender)
        }
        ;
        _proto107.componentWillUnmount = function componentWillUnmount() {
            this.props.player.removeEventListener(xi.WILL_LOAD_START, this.forceRerender)
        }
        ;
        _proto107.render = function render() {
            var e = this.props.player.playlistManager.getPlaylist()
              , t = e ? e.pauseAdsCreatives : []
              , i = e ? e.pauseAdsMiniSpan : 3e5
              , n = e ? e.pauseAdsOpportunityImpression : [];
            return ra.a.createElement("div", {
                ref: this.ref,
                className: "player-pause-ad"
            }, ra.a.createElement(Dl, Ml({}, this.props, {
                creatives: t,
                pauseAdsMiniSpan: i,
                opportunityImpression: n,
                root: this.ref.current
            })))
        }
        ;
        return Ol
    }(ra.a.Component);
    var xl = function(e, t) {
        if (e === void 0) {
            e = da
        }
        return function(i) {
            var n = function(_ra$a$Component9) {
                _inheritsLoose(n, _ra$a$Component9);
                function n() {
                    return _ra$a$Component9.apply(this, arguments) || this
                }
                var _proto108 = n.prototype;
                _proto108.getChildProps = function getChildProps() {
                    return e(this.context.storeState)
                }
                ;
                _proto108.getChildActionsProps = function getChildActionsProps() {
                    return yr(t, this.context.store.commit)
                }
                ;
                _proto108.render = function render() {
                    return ra.a.createElement(i, oa({}, this.props, this.getChildProps(), t && this.getChildActionsProps()))
                }
                ;
                return n
            }(ra.a.Component);
            return n.contextType = la,
            n
        }
    }(function(e) {
        var t = e.player
          , i = e.entity
          , n = e.resolution
          , r = e.error
          , s = e.playerState;
        return {
            player: t,
            visibleState: Io(e),
            error: !!r.errorInstance,
            scalePoint: n.scalePoint,
            isVodContent: i.isVod && "content" === t.mediaType,
            isPaused: s.paused
        }
    })(Ol);
    var Nl = Object.values(ti.ScalePoint).sort(function(e, t) {
        return e - t
    });
    var Ul = Tr(function(_ref56) {
        var e = _ref56.appState;
        return {
            viewMode: e.viewMode,
            isFullscreen: e.isFullscreen,
            isMinimized: e.isMinimized,
            isAppOn: e.isOn,
            isCasting: e.isCasting
        }
    }, {
        setViewMode: n.setViewMode,
        setPlayerResolution: l.setPlayerResolution,
        setPlayerScalePoint: l.setPlayerScalePoint
    })(new (function(_ca19) {
        _inheritsLoose(_class54, _ca19);
        function _class54() {
            var _this188;
            _this188 = _ca19.call(this) || this,
            _this188.updateContainerAttribute = _this188.updateContainerAttribute.bind(_assertThisInitialized(_this188)),
            _this188.closePlayer = _this188.closePlayer.bind(_assertThisInitialized(_this188));
            return _this188
        }
        var _proto109 = _class54.prototype;
        _proto109.init = function init(e) {
            var _this189 = this;
            if (this.appContainerNode = e,
            this.appContainer = ft()(this.appContainerNode),
            _ca19.prototype.init.call(this, this.appContainer),
            Ro.applyFocusVisible(this.appContainerNode),
            document.addEventListener("keydown", this.handleKeydown.bind(this)),
            document.addEventListener("fullscreenchange", function() {
                return _this189.onFullscreenChange()
            }),
            Zn.addEventListener(xi.LOAD_START, function() {
                return _this189.updateContainerAttribute()
            }),
            this.updateSize(),
            this.watchUserCommand(),
            So(this.appContainerNode, {
                onStart: function onStart() {
                    return _this189.onMouseEnter()
                },
                onMove: function onMove(e) {
                    return _this189.onMouseMove(e)
                },
                onEnd: function onEnd() {
                    return _this189.onMouseLeave()
                }
            }, {
                hover: !0,
                touch: !1
            }),
            wo(this.appContainerNode, {
                click: function click(e) {
                    return ko(e) && _this189.onTouchClick(e)
                }
            }),
            new MutationObserver(function() {
                _this189.updateContainerAttribute()
            }
            ).observe(this.appContainerNode, {
                attributes: !0
            }),
            window.ResizeObserver) {
                new ResizeObserver(function() {
                    _this189.updateContainerAttribute()
                }
                ).observe(this.appContainerNode)
            }
            window.addEventListener("resize", function() {
                _this189.updateContainerAttribute()
            }),
            this.updateContainerAttribute()
        }
        ;
        _proto109.onMouseEnter = function onMouseEnter() {
            this._activateControls()
        }
        ;
        _proto109.handleKeydown = function handleKeydown(e) {
            if (!this.props.isAppOn)
                return;
            var t = Ta.getUnifiedKey(e.key)
              , i = e.target.dataset.hotkeys;
            (Ta.hasHotkey(i, t) && Ro.isFocusVisible(e.target) || t === Ta.KEYS.TAB && (!this.props.isMinimized || this.appContainerNode.contains(e.target) || this.appContainerNode.contains($a.getLastFocusedElement()))) && this._activateControls()
        }
        ;
        _proto109._resetControlsIdleTimer = function _resetControlsIdleTimer(e) {
            var _this190 = this;
            clearTimeout(this._controlsIdleTimer),
            this._controlsIdleTimer = setTimeout(function() {
                return _this190._idleControls()
            }, e)
        }
        ;
        _proto109._activateControls = function _activateControls() {
            $.pointerMonitorState = "active",
            this._resetControlsIdleTimer(3e3)
        }
        ;
        _proto109._idleControls = function _idleControls() {
            $.pointerMonitorState = "idle",
            clearTimeout(this._controlsIdleTimer)
        }
        ;
        _proto109._onTouchClick = function _onTouchClick(_ref57) {
            var e = _ref57.keepActive;
            e ? this._resetControlsIdleTimer(5e3) : this._toggleOnTouch()
        }
        ;
        _proto109.onMouseMove = function onMouseMove(e) {
            e.pageX === this.lastMouseX && e.pageY === this.lastMouseY || (this.lastMouseX = e.pageX,
            this.lastMouseY = e.pageY,
            "idle" !== $.pointerMonitorState && "leave" !== $.pointerMonitorState || ($.pointerMonitorState = "active"),
            this._resetControlsIdleTimer(3e3))
        }
        ;
        _proto109.onMouseLeave = function onMouseLeave() {
            $.pointerMonitorState = "leave",
            clearTimeout(this._controlsIdleTimer)
        }
        ;
        _proto109._toggleOnTouch = function _toggleOnTouch() {
            "active" !== $.pointerMonitorState ? ($.pointerMonitorState = "active",
            this._resetControlsIdleTimer(5e3)) : ($.pointerMonitorState = "leave",
            clearTimeout(this._controlsIdleTimer))
        }
        ;
        _proto109.onViewPropsUpdated = function onViewPropsUpdated(e) {
            var _this$props29 = this.props
              , t = _this$props29.viewMode
              , i = _this$props29.isCasting
              , n = e.viewMode;
            if (n !== t) {
                switch (t) {
                case Ut.ViewModeTypes.FULLSCREEN:
                    this.updateViewToFullScreen(n);
                    break;
                case Ut.ViewModeTypes.NORMAL:
                    this.updateViewToNormalSize(n);
                    break;
                case Ut.ViewModeTypes.MINIMIZED:
                    this.updateViewToMinimizedSize(n);
                }
                t && Zn.setPlayerResolution({
                    viewMode: t
                })
            }
            i && !e.isCasting ? this.enterCastMode() : !i && e.isCasting && this.exitCastMode(),
            e.isAppOn && !this.props.isAppOn && this.closePlayer()
        }
        ;
        _proto109.updateViewToFullScreen = function updateViewToFullScreen(e) {
            e === Ut.ViewModeTypes.NORMAL && (this.requestFullscreen(),
            this.updateContainerAttribute(),
            Zn.trackUserAction({
                fullscreen: !0,
                from: bn.From.ControlsBar,
                type: bn.ControlsBar.TOGGLE_FULLSCREEN
            }))
        }
        ;
        _proto109.updateViewToNormalSize = function updateViewToNormalSize(e) {
            e === Ut.ViewModeTypes.FULLSCREEN ? (this.cancelFullscreen(),
            this.updateContainerAttribute(),
            Zn.trackUserAction({
                fullscreen: !1,
                from: bn.From.ControlsBar,
                type: bn.ControlsBar.TOGGLE_FULLSCREEN
            })) : e === Ut.ViewModeTypes.MINIMIZED && (this.exitPictureInPictureMode(),
            this.updateContainerAttribute(),
            Zn.trackUserAction({
                from: bn.From.ControlsBar,
                type: bn.PictureInPicture.MAXIMIZED
            }))
        }
        ;
        _proto109.updateViewToMinimizedSize = function updateViewToMinimizedSize() {
            this.enterPictureInPictureMode(),
            this.cancelFullscreen(),
            this.updateContainerAttribute(),
            Zn.trackUserAction({
                from: bn.From.ControlsBar,
                type: bn.PictureInPicture.MINIMIZED
            })
        }
        ;
        _proto109.closePlayer = function closePlayer() {
            this.cancelFullscreen(),
            this.exitPictureInPictureMode(),
            Zn.trackUserAction({
                from: bn.From.WIDGETS,
                type: bn.PictureInPicture.CLOSE
            }),
            Zn.stopVideo({
                reason: yn.PlaybackEndedReason.EXIT
            }),
            $.update({
                eabId: "-1"
            }),
            setTimeout(function() {
                ir.closePlayer()
            })
        }
        ;
        _proto109.onTouchClick = function onTouchClick(e) {
            var t = e.target
              , i = this.appContainerNode.querySelector(".controls-bar-container");
            this._onTouchClick({
                keepActive: i.contains(t)
            })
        }
        ;
        _proto109.onFullscreenChange = function onFullscreenChange() {
            var e = Qe.getFullscreenElement();
            var t = this.props.viewMode;
            e ? t = Ut.ViewModeTypes.FULLSCREEN : t === Ut.ViewModeTypes.FULLSCREEN && (t = Ut.ViewModeTypes.NORMAL),
            this.props.setViewMode(t),
            this.updateSize()
        }
        ;
        _proto109.updateSize = function updateSize(e) {
            e = Object.assign({
                width: this.getContainerWidth(),
                height: this.getContainerHeight()
            }, e),
            this.props.setPlayerResolution(e),
            Zn.setPlayerResolution(e)
        }
        ;
        _proto109.watchUserCommand = function watchUserCommand() {
            var _this191 = this;
            setTimeout(function() {
                var e = _this191.appContainerNode.querySelectorAll("[data-role=\"control\"]");
                Array.from(e).forEach(function(e) {
                    e.addEventListener("click", function() {
                        Sr.dispatch(Sr.Events.USER_COMMAND)
                    })
                })
            })
        }
        ;
        _proto109.getContainerWidth = function getContainerWidth() {
            return this.props.viewMode === Ut.ViewModeTypes.FULLSCREEN ? window.innerWidth : this.appContainer.width()
        }
        ;
        _proto109.getContainerHeight = function getContainerHeight() {
            return this.props.viewMode === Ut.ViewModeTypes.FULLSCREEN ? window.innerHeight : this.appContainer.height()
        }
        ;
        _proto109.enterPictureInPictureMode = function enterPictureInPictureMode() {
            this.appContainer.addClass("hulu-player-app--pip")
        }
        ;
        _proto109.exitPictureInPictureMode = function exitPictureInPictureMode() {
            this.appContainer.removeClass("hulu-player-app--pip")
        }
        ;
        _proto109.enterCastMode = function enterCastMode() {
            this.appContainer.addClass("hulu-player-app--casted")
        }
        ;
        _proto109.exitCastMode = function exitCastMode() {
            this.appContainer.removeClass("hulu-player-app--casted")
        }
        ;
        _proto109.requestFullscreen = function requestFullscreen() {
            Qe.requestFullscreen(this.appContainerNode)
        }
        ;
        _proto109.cancelFullscreen = function cancelFullscreen() {
            Qe.cancelFullscreen()
        }
        ;
        _proto109.updateContainerAttribute = function updateContainerAttribute() {
            var _this192 = this;
            setTimeout(function() {
                var e = _this192.appContainerNode
                  , t = _this192.getElementSize(e);
                _this192.updateSize(t);
                var i = Nl.filter(function(e) {
                    return e <= (t.width || window.innerWidth)
                })
                  , n = i.map(function(e) {
                    return e + "px"
                }).join(" ")
                  , r = i[i.length - 1];
                _this192.appContainerNode.getAttribute("min-width") !== n && (e.setAttribute("min-width", n),
                _this192.props.setPlayerScalePoint(r))
            })
        }
        ;
        _proto109.getElementSize = function getElementSize(e) {
            if (!e.getBoundingClientRect)
                return {
                    width: e.offsetWidth,
                    height: e.offsetHeight
                };
            var t = e.getBoundingClientRect();
            return {
                width: Math.round(t.width),
                height: Math.round(t.height)
            }
        }
        ;
        return _class54
    }(ca)));
    var Bl = function(_ra$a$Component10) {
        _inheritsLoose(Bl, _ra$a$Component10);
        function Bl(e) {
            var _this193;
            _this193 = _ra$a$Component10.call(this, e) || this,
            _this193.ref = ra.a.createRef();
            return _this193
        }
        var _proto110 = Bl.prototype;
        _proto110.componentDidMount = function componentDidMount() {
            var e = this.props.jqueryView;
            e.init && e.init();
            var t = this.ref.current
              , i = e.elem[0];
            t.appendChild(i)
        }
        ;
        _proto110.render = function render() {
            return ra.a.createElement("div", {
                ref: this.ref
            })
        }
        ;
        _proto110.shouldComponentUpdate = function shouldComponentUpdate() {
            return !1
        }
        ;
        return Bl
    }(ra.a.Component);
    var Fl = Bl;
    var Vl = function(_ra$a$Component11) {
        _inheritsLoose(Vl, _ra$a$Component11);
        function Vl(e) {
            var _this194;
            _this194 = _ra$a$Component11.call(this, e) || this,
            _this194.ref = ra.a.createRef();
            return _this194
        }
        var _proto111 = Vl.prototype;
        _proto111.componentDidMount = function componentDidMount() {
            var e = this.ref.current;
            Ul.appContainerNode = e,
            Ul.init(e)
        }
        ;
        _proto111.render = function render() {
            return ra.a.createElement("div", {
                ref: this.ref,
                className: "hulu-player-app",
                tabIndex: "0"
            }, ra.a.createElement(Fl, {
                jqueryView: fa
            }), ra.a.createElement(Fl, {
                jqueryView: qo
            }), ra.a.createElement(Fl, {
                jqueryView: ga
            }), ra.a.createElement(Fl, {
                jqueryView: eo
            }), ra.a.createElement(Fl, {
                jqueryView: Qo
            }), ra.a.createElement(Fl, {
                jqueryView: ma
            }), ra.a.createElement(xl, null), ra.a.createElement(Fl, {
                jqueryView: uo
            }), ra.a.createElement(Fl, {
                jqueryView: ao
            }), ra.a.createElement(Fl, {
                jqueryView: wa
            }), ra.a.createElement(Fl, {
                jqueryView: No
            }), ra.a.createElement(Fl, {
                jqueryView: Bo
            }), ra.a.createElement(Fl, {
                jqueryView: zo
            }), ra.a.createElement(Fl, {
                jqueryView: Za
            }), ra.a.createElement(Fl, {
                jqueryView: Ho
            }), ra.a.createElement(Fl, {
                jqueryView: $o
            }))
        }
        ;
        return Vl
    }(ra.a.Component);
    function jl(_ref58) {
        var e = _ref58.store
          , t = _ref58.children;
        return ra.a.createElement(ua, {
            store: e
        }, t)
    }
    var Wl = {
        createReactRoot: function createReactRoot(e, t, i) {
            aa.a.render(ra.a.createElement(jl, {
                store: t
            }, ra.a.createElement(Vl, null)), e, i)
        }
    };
    var Gl = new (function(_ji9) {
        _inheritsLoose(_class55, _ji9);
        function _class55() {
            var _this195;
            _this195 = _ji9.call(this) || this,
            _this195._lastWatchedAdPosition = 0,
            _this195._alreadyFiredTrackingId = {};
            return _this195
        }
        var _proto112 = _class55.prototype;
        _proto112.init = function init() {
            this.onBroadcast(Yi.AdStarted, this._onAdStarted.bind(this)),
            this.onBroadcast(Yi.AdVideoStart, this._onAdVideoStart.bind(this)),
            this.onBroadcast(Yi.AdVideoComplete, this._onAdVideoComplete.bind(this)),
            this.onBroadcast(Yi.AdVideoFirstQuartile, this._onAdVideoFirstQuartile.bind(this)),
            this.onBroadcast(Yi.AdVideoMidpoint, this._onAdVideoMidpoint.bind(this)),
            this.onBroadcast(Yi.AdVideoThirdQuartile, this._onAdVideoThirdQuartile.bind(this)),
            this.onBroadcast(Yi.AdClickThru, this._onAdClickThru.bind(this)),
            this.onBroadcast(Yi.HULU.StreamErrorUpdate, this._onStreamErrorUpdate.bind(this)),
            this.onBroadcast(Yi.HULU.AdSelectorChoice, this._onAdSelectorChoice.bind(this)),
            this.onBroadcast(Yi.HULU.TrailerSelectorChoice, this._onTrailerSelectorChoice.bind(this)),
            Zn.addEventListener(xi.PERIOD_ENTER, this._onPeriodEnter.bind(this)),
            this.onBroadcast("BeaconController.adTracking", this._onAdTracking.bind(this))
        }
        ;
        _proto112._isBeaconEventFired = function _isBeaconEventFired(e) {
            return Mi.currentAdUnit.isBeaconFired(e)
        }
        ;
        _proto112._onAdStarted = function _onAdStarted() {
            this._isBeaconEventFired("creativeView") || rl.updateAdAudits("creativeView", Mi.currentAdUnit.linear, {})
        }
        ;
        _proto112._onAdVideoStart = function _onAdVideoStart() {
            this._isBeaconEventFired("start") || (this._lastWatchedAdPosition = 0,
            rl.updateAdAudits("start", Mi.currentAdUnit.linear, {
                ad_position: 0
            }))
        }
        ;
        _proto112._onAdVideoComplete = function _onAdVideoComplete() {
            if (this._isBeaconEventFired("complete"))
                return;
            var e = Mi.currentAdUnit.linear
              , t = parseInt(1e3 * (Mi.currentAdDuration - Mi.currentAdRemainingTime));
            rl.updateAdAudits("complete", e, {
                ad_position: t,
                watched: Math.max(0, t - this._lastWatchedAdPosition)
            })
        }
        ;
        _proto112._onAdVideoFirstQuartile = function _onAdVideoFirstQuartile() {
            if (this._isBeaconEventFired("firstquartile"))
                return;
            var e = Mi.currentAdUnit.linear
              , t = parseInt(1e3 * Mi.currentAdDuration * .25);
            rl.updateAdAudits("firstquartile", e, {
                ad_position: t,
                watched: t - this._lastWatchedAdPosition
            }),
            this._lastWatchedAdPosition = t
        }
        ;
        _proto112._onAdVideoMidpoint = function _onAdVideoMidpoint() {
            if (this._isBeaconEventFired("midpoint"))
                return;
            var e = Mi.currentAdUnit.linear
              , t = parseInt(1e3 * Mi.currentAdDuration * .5);
            rl.updateAdAudits("midpoint", e, {
                ad_position: t,
                watched: t - this._lastWatchedAdPosition
            }),
            this._lastWatchedAdPosition = t
        }
        ;
        _proto112._onAdVideoThirdQuartile = function _onAdVideoThirdQuartile() {
            if (this._isBeaconEventFired("thirdquartile"))
                return;
            var e = Mi.currentAdUnit.linear
              , t = parseInt(1e3 * Mi.currentAdDuration * .75);
            rl.updateAdAudits("thirdquartile", e, {
                ad_position: t,
                watched: t - this._lastWatchedAdPosition
            }),
            this._lastWatchedAdPosition = t
        }
        ;
        _proto112._onStreamErrorUpdate = function _onStreamErrorUpdate() {
            this._isBeaconEventFired("httpstreamerror")
        }
        ;
        _proto112._onAdSelectorChoice = function _onAdSelectorChoice(e) {
            if (this._isBeaconEventFired("adselectorchoice"))
                return;
            var t = Mi.currentAdUnit.linear && Mi.currentAdUnit.linear.adSelectorOptions[e.index];
            rl.updateAdSelect(e.timedout ? "noAction" : "selectOption", t, {
                choiceposition: e.position
            })
        }
        ;
        _proto112._onTrailerSelectorChoice = function _onTrailerSelectorChoice(e) {
            if (this._isBeaconEventFired("trailerselectorchoice"))
                return;
            var t = "noAction";
            e.timedout || (t = e.opt_in ? "selectTrailer" : "selectRegularAdBreak"),
            rl.updateTrailerSelect(t, Mi.currentAdUnit.linear.customClicksEvents)
        }
        ;
        _proto112._onAdClickThru = function _onAdClickThru(e) {
            var t;
            var i = 1e3 * parseInt(Mi.currentAdDuration);
            t = this._lastWatchedAdPosition <= i / 4 ? "beg" : this._lastWatchedAdPosition <= 3 * i / 4 ? "half" : "end",
            rl.updateAdClickThru(Mi.currentAdUnit.linear.clickTrackings, Object.assign({}, e, {
                adplaybackstate: Zn.adsManager.getAdState() === dt.AD_STATES.PLAYING ? "play" : "pause",
                srcclickstate: t
            }))
        }
        ;
        _proto112._onPeriodEnter = function _onPeriodEnter() {
            Zn.mediaType == Ft.BURNED_IN_AD && (this._alreadyFiredTrackingId = {},
            this._lastWatchedAdPosition = 0)
        }
        ;
        _proto112._onAdTracking = function _onAdTracking(e) {
            if (this._alreadyFiredTrackingId[e.id])
                return;
            this._alreadyFiredTrackingId[e.id] = !0;
            var t = parseInt(1e3 * e.position);
            rl.updateEventTracking(e.url, {
                ad_position: t,
                watched: t - this._lastWatchedAdPosition
            }),
            $e.searchJSON(e.url).hasOwnProperty("watched") && (this._lastWatchedAdPosition = t)
        }
        ;
        return _class55
    }(ji));
    var Kl = window.clientmetrics && window.clientmetrics.MetricsAgent;
    var zl = {
        enabled: !0,
        endpoint: W.IS_PROD ? "https://vortex.hulu.com" : "https://vortex.huluqa.com"
    };
    var ql = new (function() {
        function _class56() {
            this._app = "hulu 2.0",
            this._env = W.IS_PROD ? "prod" : "stage"
        }
        var _proto113 = _class56.prototype;
        _proto113.init = function init() {
            Kl && null == this._agent && this._setupAgent(),
            Rr.onUpdated(this.onTrackHits.bind(this))
        }
        ;
        _proto113.onTrackHits = function onTrackHits(e, t, i) {
            i.payload && this._trackEvent(e.payload.event, e.payload)
        }
        ;
        _proto113.getAssembledProperty = function getAssembledProperty(e) {
            var t = nr.commonProperty;
            return this._isOnSite && (t = {
                app_component: t.app_component,
                deejay_device_id: t.deejay_device_id,
                device_model: t.device_model,
                player_presentation_mode: t.player_presentation_mode
            }),
            Object.assign({}, t, dn.commonProperty, e)
        }
        ;
        _proto113._setupAgent = function _setupAgent() {
            var _this196 = this;
            var e = at.metricsAgent || zl;
            this._agent = this._createAgent(String(nr.sourceId), this._app, this._env, e),
            Object.keys(nr.commonProperty).forEach(function(e) {
                return _this196._agent.setContextProperty(e, nr.commonProperty[e])
            })
        }
        ;
        _proto113._trackEvent = function _trackEvent(e, t) {
            if (this._agent)
                this._agent.trackEvent(e, this.getAssembledProperty(t));
            else if (this._isOnSite) {
                var _i50 = ir.getHitInfo();
                _i50 && _i50.trackEvent && _i50.trackEvent(e, this.getAssembledProperty(t))
            } else
                G.c.info("ClientMetrics event: ", e, this.getAssembledProperty(t))
        }
        ;
        _proto113._createAgent = function _createAgent(e, t, i, n) {
            return new Kl(e,t,i,this._requestHook.bind(this)).updateConfig(n)
        }
        ;
        _proto113._requestHook = function _requestHook(e, t, i, n, r) {
            Object(G.i)(e, {
                method: t,
                headers: i,
                body: n
            }, {
                timeoutMs: 3e4,
                retryCount: 1
            }).then(function(e) {
                r(null, e)
            }).catch(function(e) {
                G.c.warn("ClientMetrics request failed: ", e),
                r(e)
            })
        }
        ;
        _createClass(_class56, [{
            key: "_isOnSite",
            get: function get() {
                return ir.getHitInfo()
            }
        }]);
        return _class56
    }());
    var Yl = "pre-roll"
      , Ql = "mid-roll"
      , $l = "post-roll";
    var Xl = new (function() {
        function _class57() {
            this._streamingAnalytics = null,
            null != window.ns_ && (this._streamingAnalytics = new window.ns_.StreamingAnalytics({
                publisherId: "3000007"
            })),
            this._notifiedPause = !1,
            this._notifiedSeek = !1,
            this._seekStartTime = null,
            this._assetMetadataSet = !1
        }
        var _proto114 = _class57.prototype;
        _proto114.init = function init() {
            null != this._streamingAnalytics && (Zn.addEventListener(xi.START, this.onStart.bind(this)),
            Zn.addEventListener(xi.STOP, this.onNotifyEnd.bind(this)),
            Zn.addEventListener(xi.ENDED, this.onNotifyEnd.bind(this)),
            Zn.addEventListener(xi.PLAYING, this.onPlaying.bind(this)),
            Zn.addEventListener(xi.USER_ACTION, this.onUserAction.bind(this)),
            Zn.addEventListener(xi.SEEKING, this.onSeekStart.bind(this)),
            Zn.addEventListener(xi.REBUFFER_START, this.onRebufferStart.bind(this)),
            Zn.addEventListener(xi.REBUFFER_END, this.onRebufferEnd.bind(this)),
            Zn.addEventListener(xi.SEGMENT_START, this.onSegmentStart.bind(this)),
            Zn.addEventListener(xi.SEGMENT_END, this.onNotifyEnd.bind(this)),
            Kt.onUpdated(this.onPlayerModelUpdated.bind(this)))
        }
        ;
        _proto114.onPlaying = function onPlaying() {
            (this._notifiedPause || this._notifiedSeek) && this._notifyPlay()
        }
        ;
        _proto114.onPlayerModelUpdated = function onPlayerModelUpdated(e, t, i) {
            i.seekableWindow && this._setDvrWindowLength()
        }
        ;
        _proto114.onStart = function onStart() {
            this._streamingAnalytics.createPlaybackSession(),
            this._notifiedPause = !1,
            this._notifiedSeek = !1,
            this._seekStartTime = null,
            this._assetMetadataSet = !1
        }
        ;
        _proto114.onSeekStart = function onSeekStart() {
            null != this._seekStartTime && (Kt.isLive ? this._streamingAnalytics.notifySeekStart() : this._streamingAnalytics.notifySeekStart(this._seekStartTime),
            this._seekStartTime = null,
            this._notifiedSeek = !0)
        }
        ;
        _proto114.onSegmentStart = function onSegmentStart() {
            var t = Rt.entity
              , i = {
                ns_st_ci: $.assetId || "0",
                ns_st_cl: Math.floor(1e3 * (Zn.duration || 0)).toString(),
                ns_st_pu: "hulu",
                ns_st_pr: t.seriesName || t.name,
                ns_st_tpr: "*null",
                ns_st_ep: t.name,
                ns_st_tep: "*null",
                ns_st_sn: null != t.season ? t.season.toString() : "*null",
                ns_st_en: null != t.number ? t.number.toString() : "*null",
                ns_st_ge: t.genreNames && t.genreNames.join(",") || "*null",
                ns_st_ct: this._getClassificationType(Zn.mediaType),
                ns_st_ia: "*null",
                ns_st_ddt: this._convertDateFormat(t.premiereDate),
                ns_st_tdt: this._convertDateFormat(t.bundle && t.bundle.availability && t.bundle.availability.startDate),
                ns_st_st: t.bundle && t.bundle.networkName || "*null",
                c3: t.bundle && t.bundle.networkName || "*null",
                c4: "3000007",
                c6: t.seriesName || t.name
            };
            if (Kt.mediaType === Ft.CONTENT) {
                var _e86 = {
                    ns_st_pn: Kt.chapterPosition.toString(),
                    ns_st_tp: this._getTotalNumberOfSegments().toString(),
                    ns_st_ce: this._getShowType(t)
                };
                Object.assign(i, _e86)
            } else if (Kt.mediaType === Ft.BURNED_IN_AD || Kt.mediaType === Ft.INSERTED_AD) {
                var _e87 = Math.floor(1e3 * (Mi.currentAdUnit && Mi.currentAdUnit.linear ? Mi.currentAdUnit.linear.duration : 0));
                var _t57 = {
                    ns_st_ad: this._getAdType(),
                    ns_st_cl: _e87.toString()
                };
                Object.assign(i, _t57)
            } else
                Kt.mediaType !== Ft.INTRO && Kt.mediaType !== Ft.POST_INTRO || Object.assign(i, {
                    ns_st_cl: Math.floor(1e3 * (Zi.currentIntroDuration || 0)).toString()
                });
            this._streamingAnalytics.getPlaybackSession().setAsset(i),
            this._assetMetadataSet = !0,
            this._notifyPlay()
        }
        ;
        _proto114.onNotifyEnd = function onNotifyEnd() {
            this._streamingAnalytics.notifyEnd()
        }
        ;
        _proto114.onRebufferStart = function onRebufferStart() {
            this._streamingAnalytics.notifyBufferStart()
        }
        ;
        _proto114.onRebufferEnd = function onRebufferEnd() {
            this._streamingAnalytics.notifyBufferStop()
        }
        ;
        _proto114.onUserAction = function onUserAction(e) {
            if (e && e.detail)
                switch (e.detail.type) {
                case bn.Player.PAUSE:
                    Kt.isLive ? this._streamingAnalytics.notifyPause() : this._streamingAnalytics.notifyPause(this._getContentPositionMs()),
                    this._notifiedPause = !0;
                    break;
                case bn.Player.SEEK:
                    Kt.mediaType === Ft.CONTENT && (this._seekStartTime = this._getContentPositionMs());
                }
        }
        ;
        _proto114._convertDateFormat = function _convertDateFormat(e) {
            if (!e)
                return "*null";
            var t = new Date(e);
            return ot.formatDate(t, "yyyy-MM-dd")
        }
        ;
        _proto114._getAdType = function _getAdType() {
            switch (Mi.currentPod) {
            case 0:
            case 1:
                return Yl;
            case -1:
                return $l;
            default:
                return Ql;
            }
        }
        ;
        _proto114._getClassificationType = function _getClassificationType(e) {
            if (e === Ft.CONTENT)
                return Kt.isLive ? "vc13" : Zn.duration > 600 ? "vc12" : "vc11";
            if (e === Ft.BURNED_IN_AD || e === Ft.INSERTED_AD) {
                if (Kt.isLive)
                    return "va21";
                {
                    var _e88 = this._getAdType();
                    return _e88 === Yl ? "va11" : _e88 === Ql ? "va12" : _e88 === $l ? "va13" : "va00"
                }
            }
            return e === Ft.INTRO || e === Ft.POST_INTRO ? "vc99" : "vc00"
        }
        ;
        _proto114._getContentPositionMs = function _getContentPositionMs() {
            return Kt.mediaType === Ft.INSERTED_AD ? Math.floor(1e3 * (Mi.currentAdDuration - Mi.currentAdRemainingTime)) : Kt.mediaType === Ft.INTRO || Kt.mediaType === Ft.POST_INTRO ? Math.floor(1e3 * (Zi.currentIntroPosition || 0)) : Math.floor(1e3 * Kt.currentTime)
        }
        ;
        _proto114._getTotalNumberOfSegments = function _getTotalNumberOfSegments() {
            if (Kt.isLive)
                return 0;
            return Zn.adsManager.getAdBreaks().filter(function(e) {
                return e.start > 0 && e.end < Zn.duration
            }).length + 1
        }
        ;
        _proto114._getShowType = function _getShowType(e) {
            return !e || e.type !== ut.EntityTypes.EPISODE && e.type !== ut.EntityTypes.MOVIE ? "0" : "1"
        }
        ;
        _proto114._isDvrEnabled = function _isDvrEnabled() {
            return Kt.isLive && Kt.seekableWindow && Kt.seekableWindow.end > Kt.seekableWindow.start
        }
        ;
        _proto114._notifyPlay = function _notifyPlay() {
            this._assetMetadataSet && (this._notifiedPause = !1,
            this._notifiedSeek = !1,
            Kt.isLive ? (this._setDvrWindowLength(),
            this._setDvrWindowOffset(),
            this._streamingAnalytics.notifyPlay()) : this._streamingAnalytics.notifyPlay(this._getContentPositionMs()))
        }
        ;
        _proto114._setDvrWindowLength = function _setDvrWindowLength() {
            if (this._isDvrEnabled()) {
                var _e89 = Zn.seekableWindow.end - Zn.seekableWindow.start;
                _e89 > 0 && this._streamingAnalytics.setDvrWindowLength(Math.floor(1e3 * _e89))
            }
        }
        ;
        _proto114._setDvrWindowOffset = function _setDvrWindowOffset() {
            if (this._isDvrEnabled()) {
                var _e90 = Math.max(Math.floor(1e3 * (Kt.seekableWindow.end - Kt.currentTime)), 0);
                this._streamingAnalytics.setDvrWindowOffset(_e90)
            }
        }
        ;
        _createClass(_class57, [{
            key: "available",
            get: function get() {
                return !W.IS_NONSUB
            }
        }]);
        return _class57
    }());
    var Jl = window.Conviva;
    var Zl = new (function() {
        function _class58() {
            this.isProd = W.IS_PROD && !Q.getParameterInUrlByName("touchstone"),
            this.playerAttached = !1,
            this.contentStarted = !1,
            this.playerType = Q.isFairPlayHlsSupported() ? "HLS" : "DASH",
            this.metaDataFullyUpdated = !1,
            this.assetNameAlreadySet = !1
        }
        var _proto115 = _class58.prototype;
        _proto115.init = function init() {
            var _this197 = this;
            this.initConvivaClient(),
            [xi.ENDED, xi.ERROR, xi.QUALITY_CHANGE, xi.SEEKING, xi.SEGMENT_START, xi.START, xi.STOP, xi.WILL_LOAD_START].forEach(function(e) {
                return Zn.addEventListener(e, function(e) {
                    return _this197.onAppPlayerEvent(e)
                })
            })
        }
        ;
        _proto115.getConvivaKey = function getConvivaKey() {
            return this.isProd ? "33490a8068184d69ac8e8a04a88c384b7ee3a9f7" : "fcdf7952413f8b5e9715e70066a40fe330632ac3"
        }
        ;
        _proto115.getGatewayUrl = function getGatewayUrl() {
            return this.isProd ? "https://cws-hulu.conviva.com" : "https://hulu-test.testonly.conviva.com"
        }
        ;
        _proto115.getAppName = function getAppName() {
            return (W.IS_NONSUB ? "Hulu Free Web" : W.APP_NAME) + " " + this.playerType
        }
        ;
        _proto115.initConvivaClient = function initConvivaClient() {
            var e = new Jl.SystemSettings;
            e.logLevel = this.isProd ? Jl.SystemSettings.LogLevel.NONE : Jl.SystemSettings.LogLevel.DEBUG;
            var t = new Jl.SystemInterface(new Jl.Impl.Html5Time(),new Jl.Impl.Html5Timer(),new Jl.Impl.Html5Http(),new Jl.Impl.Html5Storage(),new Jl.Impl.Html5Metadata(),new Jl.Impl.Html5Logging());
            this.systemFactory = new Jl.SystemFactory(t,e);
            var i = new Jl.ClientSettings(this.getConvivaKey());
            i.gatewayUrl = this.getGatewayUrl(),
            this.client = new Jl.Client(i,this.systemFactory),
            this.playerStateManager = this.client.getPlayerStateManager()
        }
        ;
        _proto115._removeSensitiveInfo = function _removeSensitiveInfo(e) {
            return "string" == typeof e ? e.replace(/&user_id=(-)*[\d]+/, "&user_id=filtered").replace(/\?user_id=(-)*[\d]+/, "?user_id=filtered").replace(/&user_profile_id=(-)*[\d]+/, "&user_profile_id=filtered").replace(/&auth=[\w]+/, "&auth=filtered") : e
        }
        ;
        _proto115._getVendorNameFromStormflowId = function _getVendorNameFromStormflowId(e) {
            var t = /-(ISP|MLB|SYNC)/g.exec(e);
            return t ? t[1] : "ISP"
        }
        ;
        _proto115.onAppPlayerEvent = function onAppPlayerEvent(e) {
            var t, i = e.type, n = e.detail || {};
            if (i === xi.START ? (this.contentStarted && this.clearSession(),
            this.createSession()) : i === xi.WILL_LOAD_START && this._updateContentMetadata(),
            this.validSessionKey()) {
                if (i === xi.SEGMENT_START) {
                    t = n.mediaType,
                    (t === Ft.INTRO || t === Ft.POST_INTRO || t === Ft.INSERTED_AD) && this.contentStarted || (this.contentStarted = !0,
                    this.play()),
                    this.contentStarted = !0,
                    this.attachPlayer()
                }
                i === xi.QUALITY_CHANGE && (this.playerStateManager.setBitrateKbps(n.bitrate),
                this._updateCdn(n.cdn)),
                i == xi.SEEKING && this.playerStateManager.setPlayerSeekStart(),
                i !== xi.ENDED && i !== xi.STOP || this.clearSession(),
                i === xi.ERROR && !n.entitlementFailure && n.isFatal && this.reportError(n.unifiedErrorName)
            }
        }
        ;
        _proto115.createContentMetadata = function createContentMetadata() {
            var e = new Jl.ContentMetadata
              , t = Rt.entity
              , i = ei.playlist;
            var n = {
                appVersion: W.PLAYER_VERSION,
                isLiveSubscriber: pt.isLiveSubscriber ? "true" : "false",
                huluPlayerFrameworkName: "Hulu Assaultron " + this.playerType,
                huluPlayerFrameworkVersion: W.PLAYER_FRAMEWORK_VERSION
            };
            e.applicationName = this.getAppName(),
            e.defaultResource = Zn.playbackProperty.cdn || "Unknown",
            e.duration = Zn.duration,
            e.viewerId = pt.externalId,
            null != t && (this.assetNameAlreadySet || null == t.metricsAssetName || (e.assetName = t.metricsAssetName,
            this.assetNameAlreadySet = !0),
            e.streamType = t.isLive ? Jl.ContentMetadata.StreamType.LIVE : Jl.ContentMetadata.StreamType.VOD,
            Object.assign(n, {
                network: t.bundle && t.bundle.networkName || "DEFAULT",
                channel: t.bundle && t.bundle.channelName || "DEFAULT",
                isLive: t.isLive ? "true" : "false"
            })),
            null != i && (n.stormflowId = String(i.stormflowId || "DEFAULT"));
            var r = t && t.bundle && t.bundle.vendorName;
            return null == r && null != i && (r = this._getVendorNameFromStormflowId(i.stormflowId)),
            Object.assign(n, {
                liveSignalProvider: r
            }),
            e.custom = n,
            e
        }
        ;
        _proto115.validSessionKey = function validSessionKey() {
            return void 0 !== this.sessionKey && null !== this.sessionKey
        }
        ;
        _proto115.play = function play() {
            this.attachPlayer(),
            this.playerAttached && this.playerStateManager.setPlayerState(Jl.PlayerStateManager.PlayerState.PLAYING)
        }
        ;
        _proto115.createConvivaPlayerAdapter = function createConvivaPlayerAdapter() {
            var e = Zn.physicalPlayer;
            return {
                get src() {
                    return e.src
                },
                get currentSrc() {
                    return e.currentSrc
                },
                get initialTime() {
                    return e.initialTime
                },
                get paused() {
                    return e.paused
                },
                get seeking() {
                    return e.seeking
                },
                get ended() {
                    return e.ended
                },
                get currentTime() {
                    return e.currentTime
                },
                get duration() {
                    return e.duration
                },
                get buffered() {
                    return e.buffered
                },
                get networkState() {
                    return e.networkState
                },
                get error() {
                    return e.error
                },
                addEventListener: function addEventListener() {
                    return Zn.addEventListener.apply(Zn, arguments)
                },
                removeEventListener: function removeEventListener() {
                    return Zn.addEventListener.apply(Zn, arguments)
                }
            }
        }
        ;
        _proto115.reportError = function reportError(e) {
            this._updateContentMetadata(),
            this.attachPlayer(),
            this.playerAttached ? this.playerStateManager.sendError(e, Jl.Client.ErrorSeverity.FATAL) : this.validSessionKey() && this.client.reportError(this.sessionKey, e, Jl.Client.ErrorSeverity.FATAL),
            this.clearSession()
        }
        ;
        _proto115.attachPlayer = function attachPlayer() {
            return this.contentStarted && this.validSessionKey() && !this.playerAttached && (this.client.attachPlayer(this.sessionKey, this.playerStateManager),
            this.playerAttached = !0),
            this.playerAttached
        }
        ;
        _proto115.detachPlayer = function detachPlayer() {
            this.validSessionKey() && (this.client.detachPlayer(this.sessionKey),
            this.playerAttached = !1)
        }
        ;
        _proto115.createSession = function createSession() {
            var e = this.createConvivaPlayerAdapter();
            if (this.html5PlayerInterface = this.html5PlayerInterface || new Jl.Impl.Html5PlayerInterface(this.playerStateManager,e,this.systemFactory),
            this.playerStateManager.setPlayerState(Jl.PlayerStateManager.PlayerState.UNKNOWN),
            !this.validSessionKey()) {
                var _e91 = this.createContentMetadata();
                this.sessionKey = this.client.createSession(_e91)
            }
        }
        ;
        _proto115.clearSession = function clearSession() {
            this.validSessionKey() && (this.playerStateManager.setPlayerState(Jl.PlayerStateManager.PlayerState.STOPPED),
            this.client.cleanupSession(this.sessionKey)),
            this.sessionKey = null,
            this.playerAttached = !1,
            this.contentStarted = !1,
            this.metaDataFullyUpdated = !1,
            this.assetNameAlreadySet = !1
        }
        ;
        _proto115._updateCdn = function _updateCdn(e) {
            var t = new Jl.ContentMetadata;
            t.defaultResource = e,
            this.client.updateContentMetadata(this.sessionKey, t)
        }
        ;
        _proto115._updateContentMetadata = function _updateContentMetadata() {
            if (!this.metaDataFullyUpdated && null != this.sessionKey) {
                var _e92 = this.createContentMetadata()
                  , _t58 = null != Rt.entity && null != ei.playlist;
                this.metaDataFullyUpdated = _t58,
                this.client.updateContentMetadata(this.sessionKey, _e92)
            }
        }
        ;
        _createClass(_class58, [{
            key: "available",
            get: function get() {
                return Boolean(Jl)
            }
        }]);
        return _class58
    }())
      , ed = function(e, t) {
        this._rateLimiterQueue = [],
        this._limitCount = e,
        this._limitPeriodInMS = t
    };
    ed.prototype.isRateLimited = function() {
        for (var e = new Date().getTime() - this._limitPeriodInMS; this._rateLimiterQueue.length > 0 && this._rateLimiterQueue[0] < e; ) {
            this._rateLimiterQueue.shift()
        }
        return this._rateLimiterQueue.length >= this._limitCount
    }
    ,
    ed.prototype.mark = function() {
        this._rateLimiterQueue.push(new Date().getTime())
    }
    ,
    ed.prototype.clear = function() {
        this._rateLimiterQueue = []
    }
    ;
    var td = function(e) {
        this._configs = e || {},
        this._init()
    }
      , id = {
        configs: {
            configurable: !0
        }
    };
    id.configs.set = function() {}
    ,
    td.prototype._init = function() {
        for (var e in this._channelsConfig = this._configs.channels || {},
        this._rateLimiterMapper = {},
        this._channelsConfig) {
            this._channelsConfig.hasOwnProperty(e) && (this._rateLimiterMapper[e] = new ed(this._channelsConfig[e].limitCount,this._channelsConfig[e].limitPeriodInMS))
        }
    }
    ,
    td.prototype.isChannelInRateLimiterControl = function(e) {
        return this._rateLimiterMapper.hasOwnProperty(e)
    }
    ,
    td.prototype.isChannelRateLimited = function(e) {
        return this._rateLimiterMapper[e].isRateLimited()
    }
    ,
    td.prototype.channelMark = function(e) {
        this._rateLimiterMapper[e].mark()
    }
    ,
    Object.defineProperties(td.prototype, id);
    var nd = function(e, t) {
        this.set(e, t)
    }
      , rd = {
        context: {
            configurable: !0
        },
        error: {
            configurable: !0
        }
    };
    nd.prototype.set = function(e, t) {
        this.context = e || {},
        this.error = t || {}
    }
    ,
    nd.prototype.get = function() {
        return {
            context: this._context,
            error: this._error
        }
    }
    ,
    rd.context.set = function(e) {
        this._context = JSON.parse(JSON.stringify(e))
    }
    ,
    rd.context.get = function() {
        return this._context
    }
    ,
    rd.error.set = function(e) {
        var t, i;
        this._error = JSON.parse(JSON.stringify(e)),
        this._error.id = this._error.id || (i = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/[x]/g, function(e) {
            var t = 16 * Math.random() | 0;
            return ("x" === e ? t : 3 & t | 8).toString(16)
        }),
        t ? i.substr(0, t) : i)
    }
    ,
    rd.error.get = function() {
        return this._error
    }
    ,
    Object.defineProperties(nd.prototype, rd);
    var sd = function(e) {
        function t(t) {
            e.call(this, t)
        }
        e && (t.__proto__ = e),
        t.prototype = Object.create(e && e.prototype),
        t.prototype.constructor = t;
        var i = {
            configs: {
                configurable: !0
            },
            context: {
                configurable: !0
            },
            production: {
                configurable: !0
            }
        };
        return t.prototype._init = function() {
            e.prototype._init.call(this),
            this._context = this._configs.context || {},
            this._payload = new nd(this._configs.context),
            this.production = this._configs.production
        }
        ,
        i.configs.set = function(e) {
            this._configs = e || {},
            this._init()
        }
        ,
        t.prototype.setConfigs = function(e) {
            this._configs = Object.assign(this._configs || {}, e),
            this.production = this._configs.production,
            this.context = this._configs.context
        }
        ,
        i.context.get = function() {
            return this._context
        }
        ,
        i.context.set = function(e) {
            this._context = e || this._context,
            this._payload.context = this._context
        }
        ,
        t.prototype.setContext = function(e) {
            this._context = Object.assign(this._context || {}, e),
            this._payload.context = this._context
        }
        ,
        i.production.set = function(e) {
            var t = e ? "" : "qa"
              , i = this._configs.source ? "?source=" + this._configs.source : "";
            this._url = "https://doppler.hulu" + t + ".com/doppler/1.0/ingest" + i
        }
        ,
        t.prototype.track = function(e, t, i) {
            if (this.isChannelInRateLimiterControl(i)) {
                if (this.isChannelRateLimited(i))
                    return Promise.reject();
                this.channelMark(i)
            }
            return n = this._url,
            void 0 === (r = {
                data: (s = new nd(Object.assign(this._payload.context, t),e).get(),
                Object.keys(s).reduce(function(e, t) {
                    return e.concat([encodeURIComponent(t) + "=" + encodeURIComponent(JSON.stringify(s[t]))])
                }, []).join("&").replace(/%20/g, "+"))
            }) && (r = {}),
            fetch(n, Object.assign({
                method: "POST",
                mode: "no-cors",
                headers: {
                    "Content-type": "application/x-www-form-urlencoded; charset=UTF-8"
                },
                body: r.data
            }, r));
            var n, r, s
        }
        ,
        Object.defineProperties(t.prototype, i),
        t
    }(td)
      , ad = function(e) {
        this._configs = e || {},
        this._doppler = new sd(Object.assign({}, this._configs))
    }
      , od = {
        configs: {
            configurable: !0
        },
        doppler: {
            configurable: !0
        }
    };
    od.configs.get = function() {
        return this._configs
    }
    ,
    od.configs.set = function(e) {
        this._configs = e || {},
        this._doppler.configs = Object.assign({}, this._configs),
        this._doppler = new sd(Object.assign({}, this._configs))
    }
    ,
    ad.prototype.setConfigs = function(e) {
        this._configs = Object.assign(this._configs || {}, e),
        this._doppler.setConfigs(e)
    }
    ,
    od.doppler.get = function() {
        return this._doppler
    }
    ,
    Object.defineProperties(ad.prototype, od);
    var ld = ad;
    var dd = new (function() {
        function _class59() {
            this.postToDoppler = this.postToDoppler.bind(this),
            se.onUpdated(this.postToDoppler),
            this.playerType = Q.isFairPlayHlsSupported() ? "HLS" : "DASH"
        }
        var _proto116 = _class59.prototype;
        _proto116.init = function init() {
            this.agentEMU = new ld({
                production: W.IS_PROD,
                source: "client-reporting-" + W.DEVICE_PLATFORM,
                context: this.getContext(),
                channels: this.getChannels()
            }),
            this.agentPlayer = new ld({
                production: W.IS_PROD,
                source: "playback_" + W.PLAYER_TYPE,
                context: this.getContext(),
                channels: this.getChannels()
            }),
            pt.onUpdated(this.onUserModelUpdated.bind(this)),
            Kt.onUpdated(this.onPlayerModelUpdated.bind(this))
        }
        ;
        _proto116.getContext = function getContext() {
            var e = nr.siteCommonContext || nr.startContext || {};
            return {
                source_id: nr.sourceId,
                app_session_id: nr.commonProperty.app_session_id,
                app_version: W.APP_VERSION,
                build_number: String(W.COMPILED_VERSION),
                deejay_device_id: String(W.DEEJAY_DEVICE_ID),
                device_type: e.device_type || W.DISTRO_PLATFORM,
                device_manufacturer: e.device_manufacturer || "site",
                device_model: W.BROWSER,
                device_os: nr.commonProperty.device_os,
                device_platform: e.device_platform || W.DEVICE_PLATFORM,
                device_family: e.device_family || W.CLIENT,
                device_product: e.device_product || "Site Curiosity Player",
                player_core_plugin_version: Kt.mbrVersion,
                player_device_platform: ($.isNonSub ? "Hulu Free Web" : W.APP_NAME) + " " + this.playerType,
                player_framework_name: "Hulu Assaultron " + this.playerType,
                player_framework_version: W.PLAYER_FRAMEWORK_VERSION,
                language: W.LANGUAGE,
                region: W.REGION,
                device_id: nr.sourceId,
                user_id: String(pt.userId),
                profile_id: String(pt.profileId),
                app: W.PLAYER_TYPE,
                player_version: String(W.PLAYER_VERSION),
                client: W.CLIENT
            }
        }
        ;
        _proto116.getChannels = function getChannels() {
            return {
                critical_channel: {
                    limitCount: 10,
                    limitPeriodInMS: 6e4
                },
                noncritical_channel: {
                    limitCount: 5,
                    limitPeriodInMS: 6e5
                }
            }
        }
        ;
        _proto116.onUserModelUpdated = function onUserModelUpdated(e, t, i) {
            i.userId && (this.agentEMU.doppler.context = this.getContext(),
            this.agentPlayer.doppler.context = this.getContext())
        }
        ;
        _proto116.onPlayerModelUpdated = function onPlayerModelUpdated(e, t, i) {
            i.mbrVersion && (this.agentEMU.doppler.context = this.getContext(),
            this.agentPlayer.doppler.context = this.getContext())
        }
        ;
        _proto116.formatStackTrace = function formatStackTrace(e) {
            return e.stackTrace || e.errorStack || new window.Error().stack
        }
        ;
        _proto116.formatErrorLogs = function formatErrorLogs(e) {
            if ("string" == typeof e.logs)
                return e.logs;
            try {
                return JSON.stringify(e.logs || "")
            } catch (e) {
                return ""
            }
        }
        ;
        _proto116.getDRMVersion = function getDRMVersion() {
            var e = (W.CLIENT || "").toLowerCase();
            return e.indexOf("explorer") >= 0 || e.indexOf("edge") >= 0 ? "playready" : e.indexOf("safari") >= 0 ? "fairplay" : "widevine"
        }
        ;
        _proto116.track = function track(e) {
            var t = Rt.entity
              , i = ei.playlist;
            if (this.agentEMU || this.agentPlayer) {
                var _n35 = {
                    id: e.id,
                    category: e.category || "runtime",
                    sub_category: e.subCategory || "",
                    level: e.level || "warn",
                    entitlement_failure: e.entitlementFailure || !1,
                    fatal: e.fatal || !1,
                    details: {
                        name: e.name || "",
                        message: e.message || "",
                        stack_trace: this.formatStackTrace(e),
                        file_name: "",
                        line_number: "",
                        logs: this.formatErrorLogs(e)
                    },
                    extras: Object.assign({}, e.extraParams, {
                        played_time: Kt.totalPlayedTime,
                        original_error_name: e.originalErrorName,
                        video_codec: Kt.videoCodec,
                        audio_codec: Kt.audioCodec,
                        presentation_mode: nr.playerPresentationMode,
                        support_widevine: Kt.drmState.supportWideVine,
                        support_hdcp: Kt.drmState.supportHDCP
                    }),
                    player: {
                        type: Q.isFairPlayHlsSupported() ? "hls" : "dash",
                        drm: this.getDRMVersion(),
                        playhead: Math.floor(1e3 * Kt.currentTime),
                        stream: i && i.streamUrl || "",
                        abr: this.getAbr(i),
                        request: this.formatErrorRequest(e.extraParams)
                    },
                    metadata: {
                        eab_id: $.eabId || "",
                        bundle_id: t && t.bundle && t.bundle.id || "",
                        bundle_type: t && t.bundle && t.bundle.bundleType || "",
                        stormflow_id: i && i.stormflowId || ""
                    },
                    fragment: this.formatErrorFragment(e.extraParams)
                };
                e.isReportToEMUIndex && this.agentEMU && this.agentEMU.doppler.track(_n35, {}, this.getTargetChannel(e)).catch(function() {}),
                this.agentPlayer && this.agentPlayer.doppler.track(_n35, {}, this.getTargetChannel(e)).catch(function() {})
            }
        }
        ;
        _proto116.getAbr = function getAbr(e) {
            var t = {};
            return e && e.mbrManifest && (t.player_core_plugin_groupid = e.mbrManifest.group_id,
            t.cdn_order = e.mbrManifest.cdn.cdn_order),
            t
        }
        ;
        _proto116.getTargetChannel = function getTargetChannel(e) {
            return e.fatal || !1 ? "critical_channel" : "noncritical_channel"
        }
        ;
        _proto116.formatErrorFragment = function formatErrorFragment(e) {
            var t = {};
            if (e) {
                if (e.cdn && (t.cdn = e.cdn),
                e.segmentBytes) {
                    var _i51 = e.segmentBytes.split("-");
                    t.byte_start = _i51[0] || 0,
                    t.byte_end = _i51[1] || 0
                }
                if ("string" == typeof e.segmentType && (t.type = e.segmentType.replace(/Segment/i, "")),
                e.url && (t.url = e.url),
                e.abrState) {
                    var _i52 = JSON.parse(e.abrState);
                    _i52.current_time && (t.position = _i52.current_time),
                    _i52.profile_bitrate && (t.bitrate = _i52.profile_bitrate)
                }
                e.representationId && (t.representation = e.representationId),
                e.duration && (t.duration = e.duration),
                e.index && (t.index = e.index)
            }
            return t
        }
        ;
        _proto116.formatErrorRequest = function formatErrorRequest(e) {
            var t = {};
            if ((e = e || {}).url || null != e.httpStatus || null != e.code || null != e.body) {
                if (t = {
                    id: Q.uuid(),
                    origin: location.origin
                },
                e.url) {
                    var _i53 = new $e.URL(e.url || "");
                    t.path = _i53.pathname,
                    t.params = $e.searchJSON(_i53.search)
                }
                null != e.httpStatus && (t.status = e.httpStatus),
                null != e.code && (t.server_code = e.code),
                null != e.body && (t.body = e.body)
            }
            return t
        }
        ;
        _proto116.postToDoppler = function postToDoppler() {
            this.track(se.get())
        }
        ;
        return _class59
    }());
    var ud = new (function() {
        function _class60() {
            this._reset()
        }
        var _proto117 = _class60.prototype;
        _proto117.init = function init() {
            Zn.addEventListener(xi.USER_ACTION, this.onAppPlayerUserAction.bind(this)),
            Zn.addEventListener(xi.START, this.onAppPlayerStart.bind(this)),
            Zn.addEventListener(xi.SEGMENT_START, this.onAppPlayerSegmentStart.bind(this)),
            Zn.addEventListener(xi.SEGMENT_END, this.onAppPlayerSegmentEnd.bind(this)),
            Zn.addEventListener(xi.before(xi.SEEKING), this.onAppPlayerSeekStart.bind(this)),
            Zn.addEventListener(xi.SEEKING, this.onAppPlayerSeeking.bind(this)),
            Zn.addEventListener(xi.SEEKED, this.onAppPlayerSeeked.bind(this)),
            Zn.addEventListener(xi.REBUFFER_START, this.onAppPlayerRebufferStart.bind(this)),
            Zn.addEventListener(xi.REBUFFER_END, this.onAppPlayerRebufferEnd.bind(this)),
            Zn.addEventListener(xi.ENDED, this.onAppPlayerEnded.bind(this)),
            Zn.addEventListener(xi.ERROR, this.onAppPlayerError.bind(this)),
            Zn.addEventListener(xi.PLAY, this.onAppPlayerPlay.bind(this)),
            Zn.addEventListener(xi.PAUSE, this.onAppPlayerPause.bind(this)),
            Zn.addEventListener(xi.STOP, this.onAppPlayerStop.bind(this)),
            Zn.addEventListener(xi.before(xi.STOP), this.onAppPlayerBeforeStop.bind(this)),
            Zn.addEventListener(xi.CDN_CHANGE, this.onAppPlayerCdnChange.bind(this)),
            Zn.addEventListener(xi.BITRATE_CHANGE, this.onAppPlayerBitrateChange.bind(this)),
            Zn.addEventListener(xi.before(xi.CONTINUOUS_PLAY), this.onBeforeContinuousPlay.bind(this)),
            Zn.addEventListener(xi.CONTINUOUS_PLAY, this.onAppPlayerContinuousPlay.bind(this)),
            Zn.addEventListener(xi.ROLLOVER, this.onAppPlayerRollover.bind(this)),
            Zn.addEventListener(xi.QOS_FRAGMENT, this.onAppPlayerQosFragment.bind(this)),
            Zn.addEventListener(xi.MBR_MODE_CHANGE, this.onAppPlayerMbrModeChange.bind(this)),
            Zn.addEventListener(xi.CONTINUOUS_SESSION_START, this.onContinuousSessionStart.bind(this)),
            Zn.addEventListener(xi.CONTINUOUS_SESSION_END, this.onContinuousSessionEnd.bind(this)),
            Zn.addEventListener(xi.SOURCE_RENDER_START, this.onPlayerSourceRenderStart.bind(this)),
            Zn.addEventListener(xi.WILL_LOAD_START, this.onAppPlayerWillLoadStart.bind(this))
        }
        ;
        _proto117._reset = function _reset() {
            clearInterval(this._heartbeatTimer),
            this._heartbeatTimer = -1,
            Rr.reset(),
            Cr.bufferStart.reset(),
            Cr.cdn.reset(),
            Cr.continuousplaySwitch.reset(),
            Cr.error.reset(),
            Cr.heartbeat.reset(),
            Cr.pause.reset(),
            Cr.quality.reset(),
            Cr.segmentEnd.reset()
        }
        ;
        _proto117._getContentPosition = function _getContentPosition() {
            return Math.floor(1e3 * Zn.currentTime)
        }
        ;
        _proto117._getTotalPlaybackTime = function _getTotalPlaybackTime() {
            return Math.floor(1e3 * Zn.contentProperty.getTotalPlayedTime())
        }
        ;
        _proto117._getTotalDuration = function _getTotalDuration() {
            return Math.floor(1e3 * Zn.duration)
        }
        ;
        _proto117._getPlaybackStage = function _getPlaybackStage() {
            switch (Rr.mediaType) {
            case Ft.CONTENT:
                return "content";
            case Ft.INSERTED_AD:
            case Ft.BURNED_IN_AD:
                return "ad";
            case Ft.INTRO:
                return "preroll";
            case Ft.POST_INTRO:
                return "postroll";
            default:
                return "loading";
            }
        }
        ;
        _proto117._getPlaybackState = function _getPlaybackState() {
            return Rr.contentEnded ? "finished" : Cr.pause.started ? "paused" : Cr.bufferStart.started ? "buffering" : Cr.seekStart.started ? "seeking" : "playing"
        }
        ;
        _proto117._parseFinishReason = function _parseFinishReason() {
            var e = Cr.segmentEnd.finishReason;
            return "segment_ended" === e && (e = "content_ended"),
            e
        }
        ;
        _proto117._updateHeartbeatValues = function _updateHeartbeatValues() {
            var e = Zn.contentProperty.getTotalPlayedTime() - Cr.heartbeat.prevTotalPlayedTime;
            Cr.heartbeat.playedDuration += e,
            Cr.heartbeat.playedBits += Cr.quality.prevBitrate * e,
            Cr.heartbeat.prevTotalPlayedTime = Zn.contentProperty.getTotalPlayedTime()
        }
        ;
        _proto117._enterInteractivePeriod = function _enterInteractivePeriod() {
            var _this198 = this;
            Rr.sessionStarted && (this._interactivePeriodSummaryTimer || this.startInteractiveSummarySession(),
            0 === Cr.interactivePeriodSummary.currentPeriodStartTime && (Cr.interactivePeriodSummary.currentPeriodStartTime = Date.now()),
            clearTimeout(this._interactivePeriodTimer),
            this._interactivePeriodTimer = setTimeout(function() {
                return _this198._closeInteractivePeriod()
            }, Cr.interactivePeriodSummary.PERIOD_DURATION))
        }
        ;
        _proto117._closeInteractivePeriodSession = function _closeInteractivePeriodSession() {
            this._closeInteractivePeriod(),
            Rr.payload = Cr.interactivePeriodSummary.createPayload({
                interactive_period_count: Cr.interactivePeriodSummary.periodCount,
                interactive_period_duration: Cr.interactivePeriodSummary.periodDuration,
                playback_duration: this._getTotalPlaybackTime() - Cr.interactivePeriodSummary.prevTotalPlayedTime
            }),
            this.resetInteractiveSummarySession()
        }
        ;
        _proto117._endInteractivePeriodSessions = function _endInteractivePeriodSessions() {
            this._closeInteractivePeriodSession(),
            Cr.interactivePeriodSummary.reset()
        }
        ;
        _proto117._closeInteractivePeriod = function _closeInteractivePeriod() {
            0 !== Cr.interactivePeriodSummary.currentPeriodStartTime && (clearTimeout(this._interactivePeriodTimer),
            Cr.interactivePeriodSummary.periodCount++,
            Cr.interactivePeriodSummary.periodDuration += Date.now() - Cr.interactivePeriodSummary.currentPeriodStartTime,
            Cr.interactivePeriodSummary.currentPeriodStartTime = 0)
        }
        ;
        _proto117._trackCdn = function _trackCdn(e) {
            Rr.segmentStarted && Cr.cdn.prevCdn !== e.cdn && (Rr.payload = Cr.cdn.createPayload({
                previous_cdn: Cr.cdn.prevCdn,
                cdn: e.cdn,
                data_type: e.data_type,
                reason: e.reason,
                message: e.message,
                is_initial: e.is_initial
            })),
            Cr.cdn.prevCdn = e.cdn
        }
        ;
        _proto117._trackMbrMode = function _trackMbrMode() {
            Rr.payload = Cr.mbrMode.createPayload()
        }
        ;
        _proto117._trackSegmentStart = function _trackSegmentStart(e) {
            Rr.payload = Cr.segmentStart.createPayload({
                time_to_playback_start: e
            })
        }
        ;
        _proto117._trackSegmentEnd = function _trackSegmentEnd(e) {
            Cr.segmentEnd.finishReason = Rr.userInactivity ? "user_inactivity" : e,
            Rr.payload = Cr.segmentEnd.createPayload({
                finish_reason: e
            })
        }
        ;
        _proto117._trackContentStart = function _trackContentStart() {
            Rr.payload = Cr.contentStart.createPayload()
        }
        ;
        _proto117._trackContentEnd = function _trackContentEnd(e) {
            Rr.contentStarted && (Rr.payload = Cr.contentEnd.createPayload({
                finish_reason: e
            }))
        }
        ;
        _proto117._trackPause = function _trackPause() {
            Cr.pause.started || (Cr.pause.started = !0,
            Cr.pause.startTime = Date.now(),
            Rr.payload = Cr.pause.createPayload())
        }
        ;
        _proto117._trackQuality = function _trackQuality(e, t) {
            if (Cr.quality.prevBitrate !== e || Cr.quality.prevQuality !== t) {
                var _e93;
                Cr.quality.firstUpdated || (_e93 = {
                    first_update: Cr.quality.firstUpdated,
                    previous_quality: dn.wrapQuality(Cr.quality.prevBitrate),
                    previous_bitrate: Cr.quality.prevBitrate
                }),
                Rr.payload = Cr.quality.createPayload(_e93),
                Cr.quality.firstUpdated = !1,
                this._updateHeartbeatValues()
            }
            Cr.quality.prevQuality = t,
            Cr.quality.prevBitrate = e
        }
        ;
        _proto117._trackResume = function _trackResume() {
            Cr.pause.started && Cr.pause.startTime && (Cr.pause.started = !1,
            Rr.payload = Cr.resume.createPayload({
                duration: Date.now() - Cr.pause.startTime
            }),
            Cr.pause.startTime = 0)
        }
        ;
        _proto117._trackError = function _trackError(e) {
            if (e.isFatal) {
                var _t59 = e.extraParams.segmentType || e.rawError.segmentType || "";
                Rr.payload = Cr.error.createPayload({
                    playback_stage: this._getPlaybackStage(),
                    error_id: e.errorId,
                    error_category: e.category,
                    error_subcategory: e.subCategory,
                    error_level: e.level,
                    error_name: e.unifiedErrorName,
                    error_message: this._getErrorMessage(e),
                    error_playback_fragment_type: _t59.replace(/Segment/i, ""),
                    error_entitlement_failure: e.entitlementFailure,
                    is_fatal: e.isFatal
                })
            }
        }
        ;
        _proto117._getErrorMessage = function _getErrorMessage(e) {
            return e ? e.message ? e.message : e.rawError && e.rawError.type ? e.rawError.type : e.originalErrorName ? e.originalErrorName : void 0 : ""
        }
        ;
        _proto117._trackContinuousPlaySwitch = function _trackContinuousPlaySwitch(_ref59) {
            var e = _ref59.reason;
            var t = e || Ot
              , i = Rt.nextEntity || {}
              , n = {
                next_entity: i.id || "",
                next_cp_reason: t,
                entity_source: e === Mt ? null : "playable_content",
                reco_tags: i.recoTags || ""
            };
            Rr.payload = Cr.continuousplaySwitch.createPayload(n),
            dn.cpCurrentReason = t
        }
        ;
        _proto117._trackFlipTrayShown = function _trackFlipTrayShown(e, t) {
            if (Cr.flipTrayShown.opened)
                return;
            var i = Hn.primaryCollection
              , n = Hn.secondaryCollection
              , r = i && i.id
              , s = i && i.entities
              , a = n && n.id
              , o = n && n.entities;
            Rr.payload = Cr.flipTrayShown.createPayload({
                scenario: e,
                playable_content_id: Rt.nextEntity && Rt.nextEntity.id || "",
                primary_collection_id: r,
                secondary_collection_id: a,
                primary_collection_entities: s,
                secondary_collection_entities: o,
                flip_tray_type: t
            }),
            Cr.flipTrayShown.openTime = Date.now(),
            Cr.flipTrayShown.opened = !0,
            Cr.flipTrayShown.adsShownDuringFliptray = Rr.mediaType === Ft.INSERTED_AD || Rr.mediaType === Ft.BURNED_IN_AD
        }
        ;
        _proto117._trackFlipTrayClosed = function _trackFlipTrayClosed(e, t) {
            Cr.flipTrayShown.opened && (Rr.payload = Cr.flipTrayClosed.createPayload({
                scenario: e,
                open_duration: Date.now() - Cr.flipTrayShown.openTime,
                ads_shown_during_fliptray: Cr.flipTrayShown.adsShownDuringFliptray,
                flip_tray_type: t
            }),
            Cr.flipTrayShown.reset())
        }
        ;
        _proto117._trackFlipTrayClick = function _trackFlipTrayClick() {
            var e = Rt.nextEntity
              , t = Rt.entity;
            Rr.payload = Cr.click.createPayload({
                target_id: e.id,
                entity_type: t ? t.type : null,
                target_type: e.type,
                position: Hn.findNextEntityIndex(),
                heimdall_hub_id: null,
                page_instance_id: null,
                collection_id: Hn.primaryCollection.id,
                collection_source: "heimdall",
                hardware_button: "memu",
                action_type: "playback",
                reco_tags: e.recoTags || "",
                target_display_name: e.name
            })
        }
        ;
        _proto117._trackFlipTrayUserInteraction = function _trackFlipTrayUserInteraction() {
            var e = Rt.nextEntity
              , t = Rt.entity && Rt.entity.bundle && !Rt.entity.bundle.isLiveContent;
            Rr.payload = Cr.userInteraction.createPayload({
                flip_tray_type: null,
                collection_id: null,
                action_specifier: "nav:player",
                element_specifier: t ? "flip_tray_basic:tile" : "live_guide:next:tile",
                target_display_name: e.name,
                interaction_type: "click",
                conditional_properties: ["entity"],
                entity_id: e.id,
                entity_action_id: e.id,
                entity_type: e.type,
                entity_action_eab_id: e.bundle.eabId,
                entity_action_type: "playback",
                reco_tags: e.recoTags || ""
            })
        }
        ;
        _proto117._trackHeartbeat = function _trackHeartbeat() {
            if (this._updateHeartbeatValues(),
            Cr.heartbeat.playedDuration <= 0)
                return;
            var e = Ui.userInteractionTime > 0 ? Ui.userInteractionTime : Date.now();
            Rr.payload = Cr.heartbeat.createPayload({
                playback_duration: Math.floor(1e3 * Cr.heartbeat.playedDuration),
                time_weighted_bitrate: Math.floor(Cr.heartbeat.playedBits / Cr.heartbeat.playedDuration) || null,
                playback_state: this._getPlaybackState(),
                effective_user_idle_duration: Date.now() - e
            }),
            Cr.heartbeat.playedDuration = 0,
            Cr.heartbeat.playedBits = 0
        }
        ;
        _proto117._trackPlayerPresentationChanged = function _trackPlayerPresentationChanged(e) {
            Rr.payload = Cr.playerPresentation.createPayload({
                action: e
            })
        }
        ;
        _proto117._trackSegmentDownload = function _trackSegmentDownload(e) {
            if (Rr.shouldSampleHit(Cr.segmentDownload.rateLimitName) && Cr.segmentDownload.segments.length > 0 && (e || Cr.segmentDownload.segments.length >= 10)) {
                var _e94 = {}
                  , _t60 = function(t, i) {
                    _e94[t] = _e94[t] || [],
                    _e94[t].push(i)
                };
                Cr.segmentDownload.segments.forEach(function(e) {
                    var i = e.assetIdentifier || {}
                      , n = e.segmentType || {};
                    _t60("abr_state", e.abrState),
                    _t60("asset_identifier", i.value || ""),
                    _t60("buffer_length", e.bufferLength),
                    _t60("byte_end", e.byteEnd),
                    _t60("byte_start", e.byteStart),
                    _t60("cdn", e.cdn),
                    _t60("data_type", e.dataType),
                    _t60("download_start_time", e.downloadStartTime),
                    _t60("download_time_to_first_byte", e.downloadTimeToFirstByte),
                    _t60("download_total_time", e.downloadTotalTime),
                    _t60("duration", e.duration),
                    _t60("failure_reason", e.failureReason),
                    _t60("failure_type", e.failureType),
                    _t60("index", e.index),
                    _t60("period_id", e.periodId),
                    _t60("presentation_time", e.presentationTime),
                    _t60("profile", e.profile),
                    _t60("representation_id", e.representationId),
                    _t60("retry_number", e.retryNumber),
                    _t60("segment_subtype", n.subValue || ""),
                    _t60("segment_type", n.value || ""),
                    _t60("size", e.size),
                    _t60("status_code", e.statusCode),
                    _t60("successful", e.successful)
                }),
                Rr.payload = Cr.segmentDownload.createPayload({
                    bandwidth_trace: JSON.stringify(_e94)
                }),
                Cr.segmentDownload.reset()
            }
        }
        ;
        _proto117.onSessionStart = function onSessionStart(e) {
            var _this199 = this;
            if (e === void 0) {
                e = {}
            }
            Cr.playerStart.started || (Cr.playerStart.started = !0,
            Rr.payload = Cr.playerStart.createPayload()),
            this._heartbeatTimer < 0 && (this._heartbeatTimer = setInterval(function() {
                return _this199._trackHeartbeat()
            }, 3e4))
        }
        ;
        _proto117.onSessionEnd = function onSessionEnd(e) {
            if (e === void 0) {
                e = {}
            }
            Rr.sessionStarted && (Rr.sessionStarted = !1,
            this._endInteractivePeriodSessions(),
            this._trackContentEnd(e.reason))
        }
        ;
        _proto117.onContentStart = function onContentStart(e) {
            if (e === void 0) {
                e = {}
            }
            this._trackContentStart()
        }
        ;
        _proto117.onSegmentStart = function onSegmentStart(e) {
            if (e === void 0) {
                e = {}
            }
            this._trackSegmentStart(e.time_to_playback_start)
        }
        ;
        _proto117.onSegmentEnd = function onSegmentEnd(e) {
            if (e === void 0) {
                e = {}
            }
            this._trackHeartbeat(),
            this._trackSegmentEnd(e.reason)
        }
        ;
        _proto117.onBufferStart = function onBufferStart(e) {
            if (e === void 0) {
                e = {}
            }
            Cr.bufferStart.started = !0,
            Cr.bufferStart.startTime = Date.now(),
            Cr.bufferStart.bufferType = e.buffer_type,
            Rr.payload = Cr.bufferStart.createPayload({
                buffer_type: Cr.bufferStart.bufferType
            })
        }
        ;
        _proto117.onBufferEnd = function onBufferEnd(e) {
            if (e === void 0) {
                e = {}
            }
            Cr.bufferStart.started = !1,
            Rr.payload = Cr.bufferEnd.createPayload({
                buffer_type: e.buffer_type,
                duration: Date.now() - Cr.bufferStart.startTime
            })
        }
        ;
        _proto117.trackSeekStart = function trackSeekStart() {
            Cr.seekStart.started = !0,
            Cr.seekStart.startTime = Date.now(),
            Rr.payload = Cr.seekStart.createPayload({
                content_position: this._getContentPosition(),
                seek_source: Cr.seekStart.seekSource
            }),
            Cr.seekStart.seekSource = null
        }
        ;
        _proto117.onSeekEnd = function onSeekEnd(e) {
            if (e === void 0) {
                e = {}
            }
            Cr.seekStart.startTime && (Rr.payload = Cr.seekEnd.createPayload({
                duration: Date.now() - Cr.seekStart.startTime
            }),
            Cr.seekStart.started = !1,
            Cr.seekStart.startTime = 0)
        }
        ;
        _proto117.onPaused = function onPaused(e) {
            if (e === void 0) {
                e = {}
            }
            this._trackPause()
        }
        ;
        _proto117.onResumed = function onResumed(e) {
            if (e === void 0) {
                e = {}
            }
            this._trackResume()
        }
        ;
        _proto117.onQualityChanged = function onQualityChanged(e) {
            if (e === void 0) {
                e = {}
            }
            this._trackQuality(e.bitrate, e.quality)
        }
        ;
        _proto117.onCdnChanged = function onCdnChanged(e) {
            if (e === void 0) {
                e = {}
            }
            this._trackCdn(e)
        }
        ;
        _proto117.onMbrModeChanged = function onMbrModeChanged(e) {
            if (e === void 0) {
                e = {}
            }
            this._trackMbrMode()
        }
        ;
        _proto117.onError = function onError(e) {
            this._trackError(e)
        }
        ;
        _proto117.onAppPlayerUserAction = function onAppPlayerUserAction(e) {
            switch (this._enterInteractivePeriod(),
            e.detail.type) {
            case bn.LiveGuide.OPEN:
                this._trackFlipTrayShown("manual", "live_guide");
                break;
            case bn.LiveGuide.CLOSE:
                this._trackFlipTrayClosed(e.detail.reason, "live_guide");
                break;
            case bn.LiveGuide.CLICK:
                this._trackFlipTrayClick(),
                this._trackFlipTrayUserInteraction();
                break;
            case bn.EndCard.CLICK:
                this._trackFlipTrayClick();
                break;
            case bn.EndCard.OPEN:
                this._trackFlipTrayShown("video_end", null);
                break;
            case bn.EndCard.CLOSE:
                this._trackFlipTrayClosed(e.detail.reason, "flip_tray_basic");
                break;
            case bn.PictureInPicture.MINIMIZED:
                this._trackPlayerPresentationChanged("minimized");
                break;
            case bn.PictureInPicture.MAXIMIZED:
                this._trackPlayerPresentationChanged("maximized");
                break;
            case bn.PictureInPicture.CLOSE:
                this._trackPlayerPresentationChanged("closed");
            }
        }
        ;
        _proto117.onAppPlayerPlay = function onAppPlayerPlay() {
            this.onResumed()
        }
        ;
        _proto117.onAppPlayerPause = function onAppPlayerPause() {
            this.onPaused()
        }
        ;
        _proto117.onAppPlayerStart = function onAppPlayerStart() {
            this._reset(),
            Rr.sessionStarted = !0,
            this.onSessionStart({
                content_id: dn.commonProperty.contentId,
                cp_current_reason: dn.cpCurrentReason
            }),
            this.resetInteractiveSummarySession()
        }
        ;
        _proto117.startInteractiveSummarySession = function startInteractiveSummarySession() {
            var _this200 = this;
            this._interactivePeriodSummaryTimer = setTimeout(function() {
                return _this200._closeInteractivePeriodSession()
            }, Cr.interactivePeriodSummary.SESSION_DURATION)
        }
        ;
        _proto117.resetInteractiveSummarySession = function resetInteractiveSummarySession() {
            Cr.interactivePeriodSummary.prevTotalPlayedTime = this._getTotalPlaybackTime(),
            Cr.interactivePeriodSummary.periodCount = 0,
            Cr.interactivePeriodSummary.periodDuration = 0,
            clearTimeout(this._interactivePeriodSummaryTimer),
            this._interactivePeriodSummaryTimer = null
        }
        ;
        _proto117.onAppPlayerSegmentStart = function onAppPlayerSegmentStart(e) {
            Rr.segmentStarted = !0;
            var t = e.detail.mediaType;
            Rr.mediaType = t,
            !Cr.flipTrayShown.opened || t !== Ft.BURNED_IN_AD && t !== Ft.INSERTED_AD || (Cr.flipTrayShown.adsShownDuringFliptray = !0),
            this.onSegmentStart({
                is_ad: "ad" === this._getPlaybackStage(),
                time_to_playback_start: e.detail.joinTime
            }),
            t !== Ft.CONTENT && t !== Ft.BURNED_IN_AD || (Rr.contentStarted || this.onContentStart(),
            Rr.contentStarted = !0)
        }
        ;
        _proto117.onAppPlayerSegmentEnd = function onAppPlayerSegmentEnd(e) {
            this.onSegmentEnd({
                reason: e.detail.finishReason
            })
        }
        ;
        _proto117.onAppPlayerSeekStart = function onAppPlayerSeekStart(e) {
            var _e$detail = e.detail
              , t = _e$detail.failedReason
              , i = _e$detail.burnedInAdBreak
              , n = _e$detail.insertedAdBreak;
            if (t)
                return void (Cr.seekStart.seekSource = null);
            Cr.seekStart.seekSource && this.trackSeekStart();
            var r = null;
            n ? r = "after_ad" : i && (r = "ad_start"),
            Cr.seekStart.seekSource = r
        }
        ;
        _proto117.onAppPlayerSeeking = function onAppPlayerSeeking() {
            var e = Cr.seekStart.seekSource;
            if (e) {
                var _t61 = "ad_start" === e ? "after_ad" : null;
                this.trackSeekStart(),
                Cr.seekStart.seekSource = _t61
            }
        }
        ;
        _proto117.onAppPlayerSeeked = function onAppPlayerSeeked() {
            this.onSeekEnd()
        }
        ;
        _proto117.onAppPlayerRebufferStart = function onAppPlayerRebufferStart(e) {
            var t = Rr.segmentStarted ? e.detail.bufferType : "initializing";
            this.onBufferStart({
                buffer_type: t
            })
        }
        ;
        _proto117.onAppPlayerRebufferEnd = function onAppPlayerRebufferEnd(e) {
            if (Cr.bufferStart.started) {
                var _t62 = Rr.segmentStarted ? e.detail.bufferType : "initializing";
                this.onBufferEnd({
                    buffer_type: _t62
                })
            }
        }
        ;
        _proto117.onAppPlayerEnded = function onAppPlayerEnded() {
            this.onSessionEnd({
                reason: this._parseFinishReason()
            }),
            this._reset()
        }
        ;
        _proto117.onAppPlayerError = function onAppPlayerError(e) {
            this._trackSegmentDownload(!0),
            this.onError(e.detail)
        }
        ;
        _proto117.onAppPlayerBeforeStop = function onAppPlayerBeforeStop() {
            this.onSessionEnd({
                reason: this._parseFinishReason()
            })
        }
        ;
        _proto117.onAppPlayerStop = function onAppPlayerStop() {
            this._trackSegmentDownload(!0),
            this._reset(),
            Cr.playerStart.reset(),
            dn.reset()
        }
        ;
        _proto117.onAppPlayerCdnChange = function onAppPlayerCdnChange(e) {
            this.onCdnChanged({
                cdn: e.detail.current,
                data_type: e.detail.dataType,
                reason: e.detail.reason,
                message: e.detail.message,
                is_initial: e.detail.isInitial
            })
        }
        ;
        _proto117.onAppPlayerBitrateChange = function onAppPlayerBitrateChange(e) {
            var t = e.detail.profileCurrent
              , i = dn.commonProperty;
            this.onQualityChanged({
                bitrate: t,
                quality: t,
                max_allowed_video_resolution: i.max_allowed_video_resolution
            })
        }
        ;
        _proto117.onBeforeContinuousPlay = function onBeforeContinuousPlay(e) {
            var t = e.detail.reason;
            dn.playbackStartSource = t === Lt || t === xt ? "flip_tray" : "autoplay"
        }
        ;
        _proto117.onAppPlayerContinuousPlay = function onAppPlayerContinuousPlay(e) {
            this._trackContinuousPlaySwitch({
                reason: e.detail.reason
            }),
            ln.videoIdx += 1
        }
        ;
        _proto117.onAppPlayerRollover = function onAppPlayerRollover(e) {
            dn.playbackStartSource = "autoplay";
            var _e$detail2 = e.detail
              , t = _e$detail2.reason
              , i = _e$detail2.action;
            i !== Ut.RolloverActions.SIMPLE && (Cr.seekStart.seekSource = "rollover"),
            this._trackContinuousPlaySwitch({
                reason: t
            }),
            ln.videoIdx += 1
        }
        ;
        _proto117.onAppPlayerQosFragment = function onAppPlayerQosFragment(e) {
            Rr.shouldSampleHit(Cr.segmentDownload.rateLimitName) && (Cr.segmentDownload.segments.push(Object.assign(e.detail, {
                bufferLength: Kt.buffered.bufferLength
            })),
            this._trackSegmentDownload())
        }
        ;
        _proto117.onAppPlayerMbrModeChange = function onAppPlayerMbrModeChange() {
            var t = dn.commonProperty;
            this.onMbrModeChanged({
                max_allowed_video_resolution: t.max_allowed_video_resolution,
                mbr_used: t.mbr_used
            })
        }
        ;
        _proto117.onPlayerSourceRenderStart = function onPlayerSourceRenderStart(e) {
            Rr.payload = Cr.sourceRenderStart.createPayload({
                video_startup_time: e.detail.joinTime
            })
        }
        ;
        _proto117.onContinuousSessionStart = function onContinuousSessionStart() {
            ln.reset(),
            Rr.payload = Cr.playerContinuousPlaybackStart.createPayload()
        }
        ;
        _proto117.onContinuousSessionEnd = function onContinuousSessionEnd(e) {
            Rr.payload = Cr.playerContinuousPlaybackEnd.createPayload({
                reason: e.detail.reason
            })
        }
        ;
        _proto117.onAppPlayerWillLoadStart = function onAppPlayerWillLoadStart() {
            Cr.heartbeat.prevTotalPlayedTime = Zn.contentProperty.getTotalPlayedTime()
        }
        ;
        return _class60
    }());
    var cd = {
        site: {
            INSTANCE_NAME: "Hulu Web Player",
            PRODUCTION_AP_ID: "PBDD4FB47-9120-49AC-804F-78F91CF66003",
            QA_AP_ID: "TBDD4FB47-9120-49AC-804F-78F91CF66003"
        },
        chromecast: {
            INSTANCE_NAME: "Hulu Chromecast Player",
            PRODUCTION_AP_ID: "P03C8CE0E-322B-447F-8700-24935DE469C1",
            QA_AP_ID: "T03C8CE0E-322B-447F-8700-24935DE469C1"
        }
    };
    var hd = new (function() {
        function _class61() {
            this._initialized = !1,
            this._nSdkInstance = null,
            this._trackContentStarted = !1,
            this._trackAdStarted = !1,
            this._trackEndFired = !1,
            this._lastFiredAdPosition = -1,
            this._lastFiredContentPosition = -1,
            this._lastState = ""
        }
        var _proto118 = _class61.prototype;
        _proto118.init = function init() {
            var _this201 = this;
            this._isProd = W.IS_PROD,
            this._playerType = W.PLAYER_TYPE,
            this.initNielsenSDK(),
            Mi.onUpdated(this.onAdModelUpdate.bind(this)),
            [xi.TIME_UPDATE, xi.ENDED, xi.STOP, xi.ERROR, xi.PAUSE, xi.TIMED_METADATA, xi.METADATA_CUE_CHANGE, xi.SEGMENT_START, xi.SEGMENT_END].forEach(function(e) {
                return Zn.addEventListener(e, function(e) {
                    return _this201.onAppPlayerEvent(e)
                })
            })
        }
        ;
        _proto118.initNielsenSDK = function initNielsenSDK() {
            if (!this._initialized && window.NOLBUNDLE) {
                var _e95 = cd[this._playerType].INSTANCE_NAME;
                "chromecast" === this._playerType ? this._nSdkInstance = window.NOLBUNDLE.nlsQ(this._getApId(), _e95, {
                    sfcode: "dcr-cert",
                    nol_sdkDebug: (this._isProd,
                    "debug")
                }) : this._nSdkInstance = window.NOLBUNDLE.nlsQ(this._getApId(), _e95, {
                    sfcode: "dcr"
                }),
                this._initialized = !0
            }
            return this._initialized
        }
        ;
        _proto118.onAppPlayerEvent = function onAppPlayerEvent(e) {
            var t = e.type
              , i = e.detail || {};
            if (t === xi.TIME_UPDATE) {
                var _e96 = Zn.currentTime;
                if (_e96 > 0 && (_e96 = Math.floor(_e96),
                Math.abs(_e96 - this._lastFiredContentPosition) >= 1)) {
                    if ("content" != this._lastState && (this._trackContentPlaybackStart(),
                    this._lastState = "content",
                    this._trackContentStarted = !0,
                    this._trackEndFired = !1),
                    !this._getIsVod())
                        return;
                    this._trackContentPlaybackPosition(_e96),
                    this._lastFiredContentPosition = _e96
                }
            }
            if (t === xi.ENDED && this._trackPlaybackStop(this._lastFiredContentPosition),
            t === xi.STOP && !this._trackEndFired && this._trackContentStarted && (this._trackPlaybackEnd(this._lastFiredContentPosition),
            this._trackEndFired = !0,
            this._trackContentStarted = !1,
            this._trackAdStarted = !1,
            this._lastState = ""),
            t === xi.PAUSE)
                if ("content" == this._lastState)
                    this._trackPlaybackStop(this._lastFiredContentPosition);
                else if ("ad" == this._lastState) {
                    if (this._lastFiredAdPosition < 0)
                        return;
                    this._trackPlaybackStop(this._lastFiredAdPosition)
                }
            if (t === xi.TIMED_METADATA) {
                if ("www.nielsen.com:id3:v1" == i.schemeIdUri) {
                    var _e97 = i.messageData
                      , _t63 = _e97.indexOf("www.nielsen.com")
                      , _n36 = [];
                    for (; _e97 && _t63 >= 0; ) {
                        var _i54 = _e97.substr(_t63, 249);
                        _n36.push(_i54),
                        _t63 = _e97.indexOf("www.nielsen.com", _t63 + 249)
                    }
                    _n36.length > 0 && this._trackSendID3(_n36)
                }
            }
            if (t === xi.METADATA_CUE_CHANGE) {
                var _e98 = i
                  , _t64 = [];
                for (var _i55 = 0; _i55 < _e98.length; _i55++) {
                    var _n37 = _e98[_i55];
                    "org.id3" == _n37.type && _n37.value && _n37.value.info && _n37.value.info.indexOf("www.nielsen.com") >= 0 && _t64.push(_n37.value.info)
                }
                _t64.length > 0 && this._trackSendID3(_t64)
            }
            if (t === xi.SEGMENT_START) {
                if (i.mediaType === Ft.INSERTED_AD) {
                    if (!this._getIsVod() || !Mi.currentAdUnit)
                        return;
                    this._trackContentStarted || (this._trackContentPlaybackStart(),
                    this._trackContentStarted = !0,
                    this._trackEndFired = !1),
                    this._trackAdPlaybackStart(),
                    this._trackAdStarted = !0,
                    this._lastFiredAdPosition = -1,
                    this._lastState = "ad"
                }
            }
            if (t === xi.SEGMENT_END) {
                if (i.mediaType === Ft.INSERTED_AD) {
                    if (!this._getIsVod())
                        return;
                    if (this._lastFiredAdPosition < 0)
                        return;
                    this._trackPlaybackStop(this._lastFiredAdPosition),
                    this._trackAdStarted = !1
                }
            }
        }
        ;
        _proto118.onAdModelUpdate = function onAdModelUpdate(e, t, i) {
            if (this._getIsVod() && this._trackAdStarted && Zn.adsManager.getAdState() != dt.AD_STATES.PAUSED && Mi.currentPlaylist && Mi.currentAdUnit && i.currentAdRemainingTime) {
                var _t65 = Mi.currentAdDuration
                  , _i56 = Math.floor(_t65 - e.currentAdRemainingTime);
                _i56 >= 0 && _i56 - this._lastFiredAdPosition >= 1 && (this._trackAdPlaybackPosition(_i56),
                this._lastFiredAdPosition = _i56)
            }
        }
        ;
        _proto118._getAdInfo = function _getAdInfo() {
            var e = {
                iag_tfid: "303",
                iag_sid: "1000046",
                type: this._getAdType()
            };
            if (Mi.currentAdUnit) {
                var _t66 = Mi.currentAdUnit
                  , _i57 = _t66.linear && _t66.linear.clickThrough || "";
                e.iag_cte = _i57,
                e.assetid = "AU" + _t66.adUnitId,
                e.title = _t66.adName
            }
            return e
        }
        ;
        _proto118._getContentInfo = function _getContentInfo() {
            var e = Rt.entity;
            return {
                iag_cte: "",
                iag_tfid: "301",
                iag_sid: "1000046",
                type: "content",
                assetid: e.id,
                isfullepisode: this._getIsFullEpisode() ? "y" : "n",
                program: this._getNielsenProgram(),
                title: this._getNielsenTitle(),
                length: Math.floor(Zn.duration),
                segB: this._getGenre(),
                segC: "",
                crossId1: "",
                crossId2: e.bundle.networkName || "",
                airdate: this._convertDateFormat(e.premiereDate) || "",
                adloadtype: this._getAdLoadType(),
                adModel: this._getAdLoadType(),
                hasAds: this._getHasAds()
            }
        }
        ;
        _proto118._getApId = function _getApId() {
            var e = cd[this._playerType];
            return this._isProd ? e.PRODUCTION_AP_ID : e.QA_AP_ID
        }
        ;
        _proto118._getAdType = function _getAdType() {
            switch (Mi.currentPod) {
            case 0:
            case 1:
                return "preroll";
            case -1:
                return "postroll";
            default:
                return "midroll";
            }
        }
        ;
        _proto118._getAdLoadType = function _getAdLoadType() {
            return Zn.adsManager.isManifestBreaksUsed() ? "1" : "2"
        }
        ;
        _proto118._getHasAds = function _getHasAds() {
            return Zn.adsManager.getAdBreaks().length > 0 ? "1" : "0"
        }
        ;
        _proto118._getNielsenProgram = function _getNielsenProgram() {
            var e = Rt.entity
              , t = e.seriesName;
            return t || e.name || ""
        }
        ;
        _proto118._getNielsenTitle = function _getNielsenTitle() {
            var e = Rt.entity
              , t = "";
            if (e.seriesName) {
                var _i58 = e.season || 0
                  , _n38 = e.number || 0;
                _i58 > 0 && _n38 > 0 && (t = " S" + _i58 + " E" + _n38)
            }
            return e.name + t
        }
        ;
        _proto118._getGenre = function _getGenre() {
            var e = Rt.entity.genreNames;
            return e.length > 0 ? e.join(",") : "unknown"
        }
        ;
        _proto118._getIsFullEpisode = function _getIsFullEpisode() {
            return Rt.entity.type === ut.EntityTypes.EPISODE || Rt.entity.type === ut.EntityTypes.MOVIE
        }
        ;
        _proto118._getIsVod = function _getIsVod() {
            var e = Rt.entity;
            return e && e.bundle && e.bundle.isVODContent
        }
        ;
        _proto118._convertDateFormat = function _convertDateFormat(e) {
            if (!e)
                return null;
            var t = new Date(e);
            return ot.formatDate(t, "MM-dd-yyyy")
        }
        ;
        _proto118._trackAdPlaybackStart = function _trackAdPlaybackStart() {
            this._callNielsenApi(this._nSdkInstance.ggPM, "loadMetadata", this._getAdInfo())
        }
        ;
        _proto118._trackContentPlaybackStart = function _trackContentPlaybackStart() {
            this._callNielsenApi(this._nSdkInstance.ggPM, "loadMetadata", this._getContentInfo())
        }
        ;
        _proto118._trackPlaybackStop = function _trackPlaybackStop(e) {
            this._callNielsenApi(this._nSdkInstance.ggPM, "stop", Math.max(e, 0))
        }
        ;
        _proto118._trackPlaybackEnd = function _trackPlaybackEnd(e) {
            this._callNielsenApi(this._nSdkInstance.ggPM, "end", Math.max(e, 0))
        }
        ;
        _proto118._trackAdPlaybackPosition = function _trackAdPlaybackPosition(e) {
            this._callNielsenApi(this._nSdkInstance.ggPM, "setPlayheadPosition", Math.max(e, 0))
        }
        ;
        _proto118._trackContentPlaybackPosition = function _trackContentPlaybackPosition(e) {
            this._callNielsenApi(this._nSdkInstance.ggPM, "setPlayheadPosition", Math.max(e, 0))
        }
        ;
        _proto118._trackSendID3 = function _trackSendID3(e) {
            var _this202 = this;
            this.initNielsenSDK() && e.forEach(function(e) {
                _this202._callNielsenApi(_this202._nSdkInstance.ggPM, "sendID3", e)
            })
        }
        ;
        _proto118._callNielsenApi = function _callNielsenApi(e) {
            try {
                for (var _len13 = arguments.length, t = new Array(_len13 > 1 ? _len13 - 1 : 0), _key13 = 1; _key13 < _len13; _key13++) {
                    t[_key13 - 1] = arguments[_key13]
                }
                this.initNielsenSDK() && e.apply(this, t)
            } catch (e) {
                G.c.error(e.message)
            }
        }
        ;
        return _class61
    }());
    var pd = {
        device_category: "desktop"
    };
    var _d = new (function() {
        function _class62() {
            this.reset()
        }
        var _proto119 = _class62.prototype;
        _proto119.init = function init() {
            Zn.addEventListener(xi.ENDED, this.onAppPlayerEnded.bind(this)),
            Zn.addEventListener(xi.TIME_UPDATE, this.onAppPlayerTimeUpdate.bind(this)),
            Zn.addEventListener(xi.SEGMENT_START, this.onAppPlayerStart.bind(this)),
            Zn.addEventListener(xi.USER_ACTION, this.onAppPlayerUserAction.bind(this)),
            Zn.addEventListener(xi.STOP, this.onAppPlayerStop.bind(this))
        }
        ;
        _proto119.reset = function reset() {
            this._videoProgress = 0,
            this._contentVideoStarted = !1
        }
        ;
        _proto119.onAppPlayerUserAction = function onAppPlayerUserAction(e) {
            var t = this._computedAction(e.detail);
            t && this._trackPlayerControlsEvent(t)
        }
        ;
        _proto119.onAppPlayerStart = function onAppPlayerStart() {
            this._videoProgress = 1,
            this._contentVideoStarted || Zn.mediaType !== Ft.CONTENT || (this._contentVideoStarted = !0,
            this._trackVODVideoEvents("content_video_start"))
        }
        ;
        _proto119.onAppPlayerTimeUpdate = function onAppPlayerTimeUpdate() {
            var e = Zn.currentTime / Zn.duration
              , t = this._videoProgress;
            e >= .8 ? this._videoProgress = 80 : e >= .5 ? this._videoProgress = 50 : e >= .25 && (this._videoProgress = 25),
            this._videoProgress !== t && this._trackVODVideoEvents("content_video_progress")
        }
        ;
        _proto119.onAppPlayerEnded = function onAppPlayerEnded() {
            this._videoProgress = 100,
            this._contentVideoStarted = !1,
            this._trackVODVideoEvents("content_video_end")
        }
        ;
        _proto119.onAppPlayerStop = function onAppPlayerStop() {
            this.reset()
        }
        ;
        _proto119._computedAction = function _computedAction(e) {
            if ([bn.From.CONTROLS_BAR, bn.From.WIDGETS].includes(e.from) || e.type === bn.PictureInPicture.MINIMIZED)
                switch (e.type) {
                case bn.Player.PLAY:
                    return "play";
                case bn.Player.PAUSE:
                    return "pause";
                case bn.ControlsBar.FASTFORWARD:
                    return "scrub-forward";
                case bn.ControlsBar.REWIND:
                    return "scrub-backward";
                case bn.Player.CLOSE:
                    return "back-to-browse";
                case bn.ControlsBar.TOGGLE_MUTE:
                    return e.muted ? "mute" : null;
                case bn.ControlsBar.TOGGLE_FULLSCREEN:
                    return e.fullscreen ? "fullscreen" : null;
                case bn.ControlsBar.TOGGLE_EXPAND_SETTING:
                    return e.visible ? "settings" : null;
                case bn.PictureInPicture.MINIMIZED:
                    return "back-to-browse";
                }
            return null
        }
        ;
        _proto119._callAPI = function _callAPI(e) {
            return function() {
                var i = window.utag;
                return !(!i || "function" != typeof i[e]) && i[e].apply(i, arguments)
            }
        }
        ;
        _proto119.link = function link(e) {
            return this._callAPI("link")(Object.assign({}, pd, e))
        }
        ;
        _proto119._trackPlayerControlsEvent = function _trackPlayerControlsEvent(e) {
            this.link({
                video_action: e,
                event_name: "video_control"
            })
        }
        ;
        _proto119._trackVODVideoEvents = function _trackVODVideoEvents(e) {
            if (Kt.isVod) {
                var _t67 = {
                    event_name: e,
                    content_id: Rt.entity && Rt.entity.contentId,
                    seconds_watched: Math.ceil(Zn.contentProperty.getTotalPlayedTime()),
                    video_progress: this._videoProgress
                };
                this.link(_t67)
            }
        }
        ;
        return _class62
    }());
    NodeList.prototype.forEach || (NodeList.prototype.forEach = Array.prototype.forEach);
    var fd = function() {
        function fd(e, t) {
            if (t === void 0) {
                t = {}
            }
            this._target = e,
            Q.isFairPlayHlsSupported() && W.updateFairPlay(),
            W.consumeAppConfiguration(t),
            ir.setApi(t.siteAPI),
            this.init()
        }
        var _proto120 = fd.prototype;
        _proto120.init = function init() {
            var _this203 = this;
            dd.init(),
            ql.init(),
            Zl.available && Zl.init(),
            al.init(),
            hd.init(),
            _d.init(),
            tr.available && tr.init(),
            Xl.available && Xl.init(),
            ud.init(),
            Gl.init(),
            $r.init(),
            ia.init(),
            Wl.createReactRoot(this._target, mr, function() {
                _this203._initLogicPlayer(),
                ia.postInit()
            })
        }
        ;
        _proto120._initLogicPlayer = function _initLogicPlayer() {
            Zn.init(),
            Zn.attachToAdPlayer(this.queryElement(".ad-video-player"), this.queryElement(".vpaid-ad-slot")),
            Zn.attachToContentPlayer(this.queryElement(".content-video-player"), this.queryElement(".closed-caption-inband")),
            Zn.attachToIntroPlayer(this.queryElement(".intro-video-player"))
        }
        ;
        _proto120.queryElement = function queryElement(e) {
            return this._target.querySelector(e)
        }
        ;
        _proto120.playVideo = function playVideo(e, t) {
            if (t === void 0) {
                t = {}
            }
            ia.playVideo(e, t)
        }
        ;
        _proto120.switchMode = function switchMode(e) {
            ia.switchMode(e)
        }
        ;
        _proto120.setSiteApi = function setSiteApi(e) {
            ia.setSiteApi(e)
        }
        ;
        _proto120.stopVideo = function stopVideo() {
            ia.stopVideo()
        }
        ;
        return fd
    }();
    function gd(e, t) {
        var i = new fd(e,t)
          , n = {
            playVideo: function playVideo(e, t) {
                return i.playVideo(e, t)
            },
            setSiteApi: function setSiteApi(e) {
                return i.setSiteApi(e)
            },
            stopVideo: function stopVideo() {
                i.stopVideo()
            },
            switchMode: function switchMode(e) {
                i.switchMode(e)
            }
        };
        return W.IS_PROD || (n.instance = i),
        n
    }
    window.DashPlayer = window.DashPlayer || {},
    window.DashPlayer.getSitePlayer = gd
}
]);
